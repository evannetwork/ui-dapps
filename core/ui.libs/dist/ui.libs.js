(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("@evan.network/api-blockchain-core"), require("@evan.network/ui-dapp-browser"));
	else if(typeof define === 'function' && define.amd)
		define("ui.libs.js", ["@evan.network/api-blockchain-core", "@evan.network/ui-dapp-browser"], factory);
	else if(typeof exports === 'object')
		exports["ui.libs.js"] = factory(require("@evan.network/api-blockchain-core"), require("@evan.network/ui-dapp-browser"));
	else
		root["ui.libs.js"] = factory(root["@evan.network/api-blockchain-core"], root["@evan.network/ui-dapp-browser"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE__evan_network_api_blockchain_core__, __WEBPACK_EXTERNAL_MODULE__evan_network_ui_dapp_browser__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/Dispatcher.ts":
/*!***************************!*\
  !*** ./src/Dispatcher.ts ***!
  \***************************/
/*! exports provided: Dispatcher, DispatcherInstance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Dispatcher\", function() { return Dispatcher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DispatcherInstance\", function() { return DispatcherInstance; });\n/* harmony import */ var _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @evan.network/ui-dapp-browser */ \"@evan.network/ui-dapp-browser\");\n/* harmony import */ var _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Queue */ \"./src/Queue.ts\");\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n/**\n * The Dispatcher handles batched data processing and saves the data within the EvanQueue. Within\n * the dispatcher, the several steps can be defined. From this, instances can be generated, that\n * will process the provided steps.\n *\n * @class      Dispatcher\n */\nvar Dispatcher = /** @class */ (function () {\n    function Dispatcher(dappEns, name, gas, title) {\n        /**\n         * Steps that should be runned everytime at synchrnisation beginning\n         */\n        this.startupSteps = [];\n        /**\n         * List of step functions.\n         */\n        this.steps = [];\n        /**\n         * Were the instances loaded before?\n         */\n        this.initialized = false;\n        /**\n         * Queue instances mapped to account id's and running dispatcher instances.\n         */\n        this.queues = {};\n        this.dappEns = dappEns;\n        this.name = name;\n        this.title = title || name;\n        this.id = (dappEns + \"|||\" + name);\n        this.gas = gas;\n    }\n    /**\n     * Dynamic watch for dispatcher updates within a dapp. Per default, it watches for everything.\n     * Optional, other dapp ens addresses or dispatcher names can be listened.\n     *\n     * @param      {any}  func    callback function that should be called\n     * @param      {string}  dappEns  ens address that should be watched\n     * @param      {string}  name     dispatcher name that should be watched\n     */\n    Dispatcher.watch = function (func, dappEns, name) {\n        if (dappEns === void 0) { dappEns = '*'; }\n        if (name === void 0) { name = '*'; }\n        var watch = function ($event) { return func($event); };\n        window.addEventListener(\"evan-queue-\" + dappEns + \"-\" + name, watch);\n        // return the watch remove function\n        return function () { return window.removeEventListener(\"evan-queue-\" + dappEns + \"-\" + name, watch); };\n    };\n    /**\n     * Add a step, that should be runned every time at the begging and ignore the state.\n     *\n     * @param      {Function}  stepFunc   Function that should be called.\n     */\n    Dispatcher.prototype.startup = function (stepFunc) {\n        this.startupSteps.push(stepFunc);\n        return this;\n    };\n    /**\n     * Adds a step into the step array\n     *\n     * @param      {Function}  stepFunc   Function that should be called.\n     */\n    Dispatcher.prototype.step = function (stepFunc) {\n        this.steps.push(stepFunc);\n        return this;\n    };\n    /**\n     * Get the current running instances.\n     *\n     * @param      {bccRuntime}  runtime  bcc runtime\n     * @param      {boolean}     asArray  should be the result an array?\n     */\n    Dispatcher.prototype.getInstances = function (runtime, asArray) {\n        if (asArray === void 0) { asArray = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var uiCoreQueue, entries, instances;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, new _Queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"](runtime.activeAccount)];\n                    case 1:\n                        uiCoreQueue = _a.sent();\n                        return [4 /*yield*/, uiCoreQueue.load(this.id)];\n                    case 2:\n                        entries = _a.sent();\n                        instances = {};\n                        Object.keys(entries).forEach(function (instanceId) {\n                            var entry = entries[instanceId];\n                            var instance = new DispatcherInstance({\n                                queue: uiCoreQueue,\n                                dispatcher: _this,\n                                runtime: runtime,\n                                data: entry.data,\n                                stepIndex: entry.stepIndex,\n                                id: instanceId,\n                                error: entry.error,\n                                customPrice: entry.customPrice,\n                            });\n                            // add instance to instances\n                            instances[instance.id] = instance;\n                        });\n                        // return the queue and the instances\n                        if (!asArray) {\n                            return [2 /*return*/, instances];\n                        }\n                        else {\n                            return [2 /*return*/, Object.keys(instances).map(function (key) { return instances[key]; })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Starts this dispatcher with an specific runtime, an data object at an specific point.\n     *\n     * @param      {any}     runtime    bcc runtime\n     * @param      {any}     data       Any option that should passed into the steps\n     * @param      {number}  stepIndex  step index to start at\n     * @param      {number}  price      The custom calculated price\n     */\n    Dispatcher.prototype.start = function (runtime, data, stepIndex, price) {\n        if (stepIndex === void 0) { stepIndex = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var uiCoreQueue, originalDispatcher, instance;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, new _Queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"](runtime.activeAccount)];\n                    case 1:\n                        uiCoreQueue = _a.sent();\n                        return [4 /*yield*/, _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__[\"System\"].import(this.dappEns + \"!dapp-content\")];\n                    case 2:\n                        originalDispatcher = (_a.sent())[this.name];\n                        if (originalDispatcher) {\n                            Object.keys(originalDispatcher).forEach(function (key) { return _this[key] = originalDispatcher[key]; });\n                        }\n                        instance = new DispatcherInstance({\n                            queue: uiCoreQueue,\n                            dispatcher: this,\n                            runtime: runtime,\n                            data: data,\n                            stepIndex: stepIndex,\n                        });\n                        // start the instance!\n                        return [4 /*yield*/, instance.start()];\n                    case 3:\n                        // start the instance!\n                        _a.sent();\n                        return [2 /*return*/, instance];\n                }\n            });\n        });\n    };\n    /**\n     * Watch for instance updates\n     *\n     * @param      {Function}  func    function that should be called on an update\n     */\n    Dispatcher.prototype.watch = function (func) {\n        var _this = this;\n        var watch = function ($event) { return func($event); };\n        window.addEventListener(\"evan-queue-\" + this.dappEns + \"-\" + this.name, watch);\n        // return the watch remove function\n        return function () { return window.removeEventListener(\"evan-queue-\" + _this.dappEns + \"-\" + _this.name, watch); };\n    };\n    return Dispatcher;\n}());\n\n/**\n * A DispatcherInstance is generated, when a Dispatcher was started. This instance runs the startup\n * and step functions and holds the data. Also it contains several status flags, which step is\n * currently running and it saves it's states and data into the queue.\n *\n * @class      DispatcherInstance\n */\nvar DispatcherInstance = /** @class */ (function () {\n    function DispatcherInstance(options) {\n        /**\n         * Current running status\n         */\n        this._status = 'stopped';\n        /**\n         * Error message.\n         */\n        this.error = false;\n        this.data = options.data;\n        this.dispatcher = options.dispatcher;\n        this.id = options.id || Date.now() + Math.round(Math.random() * 1000000);\n        this.queue = options.queue;\n        this.runtime = options.runtime;\n        this.stepIndex = options.stepIndex || 0;\n        if (options.customPrice) {\n            this.customEvePrice = options.customPrice;\n        }\n        if (options.error) {\n            this.error = options.error;\n            this._status = 'error';\n        }\n    }\n    Object.defineProperty(DispatcherInstance.prototype, \"status\", {\n        /**\n         * Current status\n         */\n        get: function () {\n            return this._status;\n        },\n        /**\n         * Set the current status.\n         */\n        set: function (value) {\n            this._status = value;\n            this.triggerWatchers(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Run the startup and run functions. If the evePrice is higher than the eve-treshold (0.5), it\n     * will send an event that this transaction must be accepted, before it can be started.\n     *\n     * @param      {boolean}  accept  should the dispatcher started directly?\n     */\n    DispatcherInstance.prototype.start = function (accept) {\n        return __awaiter(this, void 0, void 0, function () {\n            var defaultThreshold, priceThreshold, evePrice, gasPrice, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.save()];\n                    case 1:\n                        _b.sent();\n                        if (!(!accept && this.stepIndex === 0)) return [3 /*break*/, 5];\n                        defaultThreshold = 0;\n                        priceThreshold = parseFloat(window.location['dispatcher-eve-treshold'] || '0.5');\n                        evePrice = void 0;\n                        if (!this.customEvePrice) return [3 /*break*/, 2];\n                        evePrice = this.customEvePrice;\n                        return [3 /*break*/, 4];\n                    case 2:\n                        _a = parseInt;\n                        return [4 /*yield*/, this.runtime.signer.getGasPrice()];\n                    case 3:\n                        gasPrice = _a.apply(void 0, [_b.sent(), 16]);\n                        this.evePrice = this.runtime.web3.utils.fromWei(gasPrice.toString());\n                        _b.label = 4;\n                    case 4:\n                        if (this.evePrice > (isNaN(priceThreshold) ? defaultThreshold : priceThreshold)) {\n                            return [2 /*return*/, this.status = 'accept'];\n                        }\n                        _b.label = 5;\n                    case 5:\n                        // reset previous errors\n                        this.error = null;\n                        return [4 /*yield*/, this.startup()];\n                    case 6:\n                        _b.sent();\n                        this.status = 'running';\n                        return [4 /*yield*/, this.run()];\n                    case 7:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Run all the startup functions.\n     */\n    DispatcherInstance.prototype.startup = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.status = 'starting';\n                        return [4 /*yield*/, Promise.all(this.dispatcher.startupSteps.map(function (startup) { return startup(_this, _this.data); }))];\n                    case 1:\n                        _a.sent();\n                        // save the queue data\n                        return [4 /*yield*/, this.save()];\n                    case 2:\n                        // save the queue data\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Accept the dispatcher instance and start the synchronisation. Used to accept the eve-treshold\n     */\n    DispatcherInstance.prototype.accept = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.start(true)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Run the next step in the queue and persist the data.\n     */\n    DispatcherInstance.prototype.run = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ex_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.stepIndex < this.dispatcher.steps.length)) return [3 /*break*/, 12];\n                        if (!(this.status === 'running')) return [3 /*break*/, 8];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        // run the next step\n                        return [4 /*yield*/, this.dispatcher.steps[this.stepIndex](this, this.data)];\n                    case 2:\n                        // run the next step\n                        _a.sent();\n                        // increase the stepIndex\n                        this.stepIndex += 1;\n                        // trigger event again to update status\n                        this.status = 'running';\n                        return [3 /*break*/, 4];\n                    case 3:\n                        ex_1 = _a.sent();\n                        this.error = ex_1.message + \" (\" + ex_1.stack + \")\";\n                        this.status = 'error';\n                        this.runtime.logger.log(ex_1, 'error');\n                        return [3 /*break*/, 4];\n                    case 4: \n                    // save the queue data\n                    return [4 /*yield*/, this.save()];\n                    case 5:\n                        // save the queue data\n                        _a.sent();\n                        if (!(this.status !== 'error')) return [3 /*break*/, 7];\n                        return [4 /*yield*/, this.run()];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [3 /*break*/, 11];\n                    case 8:\n                        if (!(this.status === 'deleting')) return [3 /*break*/, 10];\n                        // else delete it directly\n                        return [4 /*yield*/, this.queue.save(this.dispatcher.id, this.id)];\n                    case 9:\n                        // else delete it directly\n                        _a.sent();\n                        this.status = 'deleted';\n                        return [3 /*break*/, 11];\n                    case 10:\n                        this.status = 'stopped';\n                        _a.label = 11;\n                    case 11: return [3 /*break*/, 13];\n                    case 12:\n                        this.finish();\n                        _a.label = 13;\n                    case 13: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Set the stopping status to break synchronisation at the next dispatcher status.\n     */\n    DispatcherInstance.prototype.stop = function () {\n        this.status = 'stopping';\n    };\n    /**\n     * Stops the current synchronisation and deletes the instance from the queue.\n     */\n    DispatcherInstance.prototype.delete = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.status === 'running')) return [3 /*break*/, 1];\n                        this.status = 'deleting';\n                        return [3 /*break*/, 3];\n                    case 1: \n                    // else delete it directly\n                    return [4 /*yield*/, this.queue.save(this.dispatcher.id, this.id)];\n                    case 2:\n                        // else delete it directly\n                        _a.sent();\n                        this.status = 'deleted';\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Run all watchers with an specific status\n     */\n    DispatcherInstance.prototype.triggerWatchers = function (status) {\n        var _this = this;\n        [\n            \"evan-queue-*-*\",\n            \"evan-queue-\" + this.dispatcher.dappEns + \"-*\",\n            \"evan-queue-\" + this.dispatcher.dappEns + \"-\" + this.dispatcher.name,\n            \"evan-queue-\" + this.id,\n        ].forEach(function (eventName) { return _this.sendEvent(eventName, status); });\n    };\n    /**\n     * Send an event with an status for this instance.\n     *\n     * @param      {string}  eventName  event name to trigger\n     * @param      {any}     status     status that should be sent\n     */\n    DispatcherInstance.prototype.sendEvent = function (eventName, status) {\n        window.dispatchEvent(new CustomEvent(eventName, {\n            detail: {\n                dispatcher: this.dispatcher,\n                instance: this,\n                status: status,\n            }\n        }));\n    };\n    /**\n     * Take the current data and saves it into the queue db.\n     */\n    DispatcherInstance.prototype.save = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.queue.save(this.dispatcher.id, this.id, {\n                            data: this.data,\n                            error: this.error,\n                            status: this.status,\n                            stepIndex: this.stepIndex,\n                            customEvePrice: this.customEvePrice,\n                        })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Set the status to finished and remove the queue entry data.\n     */\n    DispatcherInstance.prototype.finish = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.queue.save(this.dispatcher.id, this.id)];\n                    case 1:\n                        _a.sent();\n                        this.status = 'finished';\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Watch for instance updates\n     *\n     * @param      {Function}  func    function that should be called on an update\n     */\n    DispatcherInstance.prototype.watch = function (func) {\n        var _this = this;\n        var watch = function ($event) { return func($event); };\n        window.addEventListener(\"evan-queue-\" + this.id, watch);\n        // return the watch remove function\n        return function () { return window.removeEventListener(\"evan-queue-\" + _this.id, watch); };\n    };\n    return DispatcherInstance;\n}());\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL0Rpc3BhdGNoZXIudHM/NGRiOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFpQkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHNEY7QUFHOUQ7QUFFaEM7Ozs7OztHQU1HO0FBQ0g7SUFtRUUsb0JBQVksT0FBZSxFQUFFLElBQVksRUFBRSxHQUFXLEVBQUUsS0FBYztRQXBDdEU7O1dBRUc7UUFDSCxpQkFBWSxHQUFvQixFQUFHLENBQUM7UUFFcEM7O1dBRUc7UUFDSCxVQUFLLEdBQW9CLEVBQUcsQ0FBQztRQUU3Qjs7V0FFRztRQUNILGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBRXBCOztXQUVHO1FBQ0gsV0FBTSxHQUFHLEVBQUcsQ0FBQztRQW1CWCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN2QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFLLE9BQU8sV0FBUSxJQUFPLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztJQUNqQixDQUFDO0lBdEJEOzs7Ozs7O09BT0c7SUFDSSxnQkFBSyxHQUFaLFVBQWEsSUFBa0MsRUFBRSxPQUFhLEVBQUUsSUFBVTtRQUF6Qix1Q0FBYTtRQUFFLGlDQUFVO1FBQ3hFLElBQU0sS0FBSyxHQUFHLFVBQUMsTUFBbUIsSUFBSyxXQUFJLENBQUMsTUFBTSxDQUFDLEVBQVosQ0FBWSxDQUFDO1FBQ3BELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZSxPQUFPLFNBQU0sSUFBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXBFLG1DQUFtQztRQUNuQyxPQUFPLGNBQU0s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Z0IsQ0FBQyxnQkFBZSxJQUFJLENBQUMsRUFBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRTFELG1DQUFtQztRQUNuQyxPQUFPLGNBQU0sYUFBTSxDQUFDLG1CQUFtQixDQUFDLGdCQUFlLEtBQUksQ0FBQyxFQUFLLEVBQUUsS0FBSyxDQUFDLEVBQTVELENBQTRELENBQUM7SUFDNUUsQ0FBQztJQUNILHlCQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiIuL3NyYy9EaXNwYXRjaGVyLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgQ29weXJpZ2h0IChDKSAyMDE4LXByZXNlbnQgZXZhbiBHbWJILlxuXG4gIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0XG4gIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLCB2ZXJzaW9uIDMsXG4gIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxuXG4gIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuXG4gIFNlZSB0aGUgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvIG9yXG4gIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0cmVldCxcbiAgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEsIDAyMTEwLTEzMDEgVVNBLCBvciBkb3dubG9hZCB0aGUgbGljZW5zZSBmcm9tXG4gIHRoZSBmb2xsb3dpbmcgVVJMOiBodHRwczovL2V2YW4ubmV0d29yay9saWNlbnNlL1xuKi9cblxuXG5pbXBvcnQgeyBTeXN0ZW0sIGRhcHAsIHF1ZXVlLCBnZXREb21haW5OYW1lLCBiY2NIZWxwZXIgfSBmcm9tICdAZXZhbi5uZXR3b3JrL3VpLWRhcHAtYnJvd3Nlcic7XG5pbXBvcnQgKiBhcyBiY2MgZnJvbSAnQGV2YW4ubmV0d29yay9hcGktYmxvY2tjaGFpbi1jb3JlJztcblxuaW1wb3J0IEV2YW5RdWV1ZSBmcm9tICcuL1F1ZXVlJztcblxuLyoqXG4gKiBUaGUgRGlzcGF0Y2hlciBoYW5kbGVzIGJhdGNoZWQgZGF0YSBwcm9jZXNzaW5nIGFuZCBzYXZlcyB0aGUgZGF0YSB3aXRoaW4gdGhlIEV2YW5RdWV1ZS4gV2l0aGluXG4gKiB0aGUgZGlzcGF0Y2hlciwgdGhlIHNldmVyYWwgc3RlcHMgY2FuIGJlIGRlZmluZWQuIEZyb20gdGhpcywgaW5zdGFuY2VzIGNhbiBiZSBnZW5lcmF0ZWQsIHRoYXRcbiAqIHdpbGwgcHJvY2VzcyB0aGUgcHJvdmlkZWQgc3RlcHMuXG4gKlxuICogQGNsYXNzICAgICAgRGlzcGF0Y2hlclxuICovXG5leHBvcnQgY2xhc3MgRGlzcGF0Y2hlciB7XG4gIC8qKlxuICAgKiBPcmlnaW5hbCBkYXBwIGVucyBhZGRyZXNzLlxuICAgKi9cbiAgZGFwcEVuczogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUZWNobmljYWwgZXhwb3J0ZWQgY2xhc3MgbWVtYmVyIG9mIHRoZSBkaXNwYXRjaGVyIHdpdGhpbiB0aGUgZGFwcC5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogQ29tYmluYXRpb24gb2YgZGFwcCBlbnMgYW5kIHRoZSBuYW1lXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJMThOIGRpc3BsYXkga2V5LlxuICAgKi9cbiAgdGl0bGU6IHN0cmluZztcblxuICAvKipcbiAgICogZXN0aW1hdGVkIGdhcyBwcmljZSBmb3Igb25lIGZ1bGwgc3RlcHMgcnVuLlxuICAgKi9cbiAgZ2FzOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGVzdGltYXRlZCBldmUgcHJpY2UgZm9yIG9uZSBmdWxsIHN0ZXBzIHJ1bi5cbiAgICovXG4gIGV2ZVByaWNlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFN0ZXBzIHRoYXQgc2hvdWxkIGJlIHJ1bm5lZCBldmVyeXRpbWUgYXQgc3luY2hybmlzYXRpb24gYmVnaW5uaW5nXG4gICAqL1xuICBzdGFydHVwU3RlcHM6IEFycmF5PEZ1bmN0aW9uPiA9IFsgXTtcblxuICAvKipcbiAgICogTGlzdCBvZiBzdGVwIGZ1bmN0aW9ucy5cbiAgICovXG4gIHN0ZXBzOiBBcnJheTxGdW5jdGlvbj4gPSBbIF07XG5cbiAgLyoqXG4gICAqIFdlcmUgdGhlIGluc3RhbmNlcyBsb2FkZWQgYmVmb3JlP1xuICAgKi9cbiAgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogUXVldWUgaW5zdGFuY2VzIG1hcHBlZCB0byBhY2NvdW50IGlkJ3MgYW5kIHJ1bm5pbmcgZGlzcGF0Y2hlciBpbnN0YW5jZXMuXG4gICAqL1xuICBxdWV1ZXMgPSB7IH07XG5cbiAgLyoqXG4gICAqIER5bmFtaWMgd2F0Y2ggZm9yIGRpc3BhdGNoZXIgdXBkYXRlcyB3aXRoaW4gYSBkYXBwLiBQZXIgZGVmYXVsdCwgaXQgd2F0Y2hlcyBmb3IgZXZlcnl0aGluZy5cbiAgICogT3B0aW9uYWwsIG90aGVyIGRhcHAgZW5zIGFkZHJlc3NlcyBvciBkaXNwYXRjaGVyIG5hbWVzIGNhbiBiZSBsaXN0ZW5lZC5cbiAgICpcbiAgICogQHBhcmFtICAgICAge2FueX0gIGZ1bmMgICAgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkXG4gICAqIEBwYXJhbSAgICAgIHtzdHJpbmd9ICBkYXBwRW5zICBlbnMgYWRkcmVzcyB0aGF0IHNob3VsZCBiZSB3YXRjaGVkXG4gICAqIEBwYXJhbSAgICAgIHtzdHJpbmd9ICBuYW1lICAgICBkaXNwYXRjaGVyIG5hbWUgdGhhdCBzaG91bGQgYmUgd2F0Y2hlZFxuICAgKi9cbiAgc3RhdGljIHdhdGNoKGZ1bmM6ICgkZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiBhbnksIGRhcHBFbnMgPSAnKicsIG5hbWUgPSAnKicpIHtcbiAgICBjb25zdCB3YXRjaCA9ICgkZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiBmdW5jKCRldmVudCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYGV2YW4tcXVldWUtJHsgZGFwcEVucyB9LSR7IG5hbWUgfWAsIHdhdGNoKTtcblxuICAgIC8vIHJldHVybiB0aGUgd2F0Y2ggcmVtb3ZlIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBldmFuLXF1ZXVlLSR7IGRhcHBFbnMgfS0keyBuYW1lIH1gLCB3YXRjaCk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihkYXBwRW5zOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZ2FzOiBudW1iZXIsIHRpdGxlPzogc3RyaW5nKSB7XG4gICAgdGhpcy5kYXBwRW5zID0gZGFwcEVucztcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZSB8fCBuYW1lO1xuICAgIHRoaXMuaWQgPSAoYCR7IGRhcHBFbnMgfXx8fCR7IG5hbWUgfWApO1xuICAgIHRoaXMuZ2FzID0gZ2FzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHN0ZXAsIHRoYXQgc2hvdWxkIGJlIHJ1bm5lZCBldmVyeSB0aW1lIGF0IHRoZSBiZWdnaW5nIGFuZCBpZ25vcmUgdGhlIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0gICAgICB7RnVuY3Rpb259ICBzdGVwRnVuYyAgIEZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICovXG4gIHN0YXJ0dXAoc3RlcEZ1bmM6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5zdGFydHVwU3RlcHMucHVzaChzdGVwRnVuYyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgc3RlcCBpbnRvIHRoZSBzdGVwIGFycmF5XG4gICAqXG4gICAqIEBwYXJhbSAgICAgIHtGdW5jdGlvbn0gIHN0ZXBGdW5jICAgRnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLlxuICAgKi9cbiAgc3RlcChzdGVwRnVuYzogRnVuY3Rpb24pIHtcbiAgICB0aGlzLnN0ZXBzLnB1c2goc3RlcEZ1bmMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHJ1bm5pbmcgaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0gICAgICB7YmNjUnVudGltZX0gIHJ1bnRpbWUgIGJjYyBydW50aW1lXG4gICAqIEBwYXJhbSAgICAgIHtib29sZWFufSAgICAgYXNBcnJheSAgc2hvdWxkIGJlIHRoZSByZXN1bHQgYW4gYXJyYXk/XG4gICAqL1xuICBhc3luYyBnZXRJbnN0YW5jZXMocnVudGltZTogYmNjLlJ1bnRpbWUsIGFzQXJyYXkgPSB0cnVlKTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBjcmVhdGUgYSBuZXcgcXVldWUgYW5kIGluaXRpYWxpemUgaXRcbiAgICBjb25zdCB1aUNvcmVRdWV1ZSA9IGF3YWl0IG5ldyBFdmFuUXVldWUocnVudGltZS5hY3RpdmVBY2NvdW50KTtcblxuICAgIC8vIHJlY292ZXIgYWxsIHByZXZpb3VzIHJ1bm5pbmcgaW5zdGFuY2VzIGZvciB0aGlzIGRpc3BhdGNoZXJcbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdWlDb3JlUXVldWUubG9hZCh0aGlzLmlkKTtcbiAgICBjb25zdCBpbnN0YW5jZXMgPSB7IH07XG5cbiAgICBPYmplY3Qua2V5cyhlbnRyaWVzKS5mb3JFYWNoKChpbnN0YW5jZUlkOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1tpbnN0YW5jZUlkXTtcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IERpc3BhdGNoZXJJbnN0YW5jZSh7XG4gICAgICAgIHF1ZXVlOiB1aUNvcmVRdWV1ZSxcbiAgICAgICAgZGlzcGF0Y2hlcjogdGhpcyxcbiAgICAgICAgcnVudGltZSxcbiAgICAgICAgZGF0YTogZW50cnkuZGF0YSxcbiAgICAgICAgc3RlcEluZGV4OiBlbnRyeS5zdGVwSW5kZXgsXG4gICAgICAgIGlkOiBpbnN0YW5jZUlkLFxuICAgICAgICBlcnJvcjogZW50cnkuZXJyb3IsXG4gICAgICAgIGN1c3RvbVByaWNlOiBlbnRyeS5jdXN0b21QcmljZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBhZGQgaW5zdGFuY2UgdG8gaW5zdGFuY2VzXG4gICAgICBpbnN0YW5jZXNbaW5zdGFuY2UuaWRdID0gaW5zdGFuY2U7XG4gICAgfSk7XG5cbiAgICAvLyByZXR1cm4gdGhlIHF1ZXVlIGFuZCB0aGUgaW5zdGFuY2VzXG4gICAgaWYgKCFhc0FycmF5KSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2VzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoaW5zdGFuY2VzKS5tYXAoKGtleSkgPT4gaW5zdGFuY2VzW2tleV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhpcyBkaXNwYXRjaGVyIHdpdGggYW4gc3BlY2lmaWMgcnVudGltZSwgYW4gZGF0YSBvYmplY3QgYXQgYW4gc3BlY2lmaWMgcG9pbnQuXG4gICAqXG4gICAqIEBwYXJhbSAgICAgIHthbnl9ICAgICBydW50aW1lICAgIGJjYyBydW50aW1lXG4gICAqIEBwYXJhbSAgICAgIHthbnl9ICAgICBkYXRhICAgICAgIEFueSBvcHRpb24gdGhhdCBzaG91bGQgcGFzc2VkIGludG8gdGhlIHN0ZXBzXG4gICAqIEBwYXJhbSAgICAgIHtudW1iZXJ9ICBzdGVwSW5kZXggIHN0ZXAgaW5kZXggdG8gc3RhcnQgYXRcbiAgICogQHBhcmFtICAgICAge251bWJlcn0gIHByaWNlICAgICAgVGhlIGN1c3RvbSBjYWxjdWxhdGVkIHByaWNlXG4gICAqL1xuICBhc3luYyBzdGFydChydW50aW1lOiBiY2MuUnVudGltZSwgZGF0YTogYW55LCBzdGVwSW5kZXggPSAwLCBwcmljZT86IG51bWJlcikge1xuICAgIGNvbnN0IHVpQ29yZVF1ZXVlID0gYXdhaXQgbmV3IEV2YW5RdWV1ZShydW50aW1lLmFjdGl2ZUFjY291bnQpO1xuXG4gICAgLy8gbWFwIHRoZSBvcmlnaW5hbCBkaXNwYXRjaGVyIGluc3RhbmNlIHRvIHRoZSBjdXJyZW50IG9uZSA9PiBvdGhlciBkYXBwcyBjYW4gY3JlYXRlIGFcbiAgICAvLyBkaXNwYXRjaGVyIGluc3RhbmNlIHBvaW50aW5nIHRvIHRoZSBvcmlnaW5hbCBlbnMgYW5kIGNhbiB3YXRjaCBhbmQgc3RhcnQgdGhlIGRpc3BhdGNoZXJcbiAgICAvLyB3aXRob3V0IGltcGxlbWVudGluZyB0aGUgb3JpZ2luYWwgbG9naWNcbiAgICBjb25zdCBvcmlnaW5hbERpc3BhdGNoZXIgPSAoYXdhaXQgU3lzdGVtLmltcG9ydChgJHsgdGhpcy5kYXBwRW5zIH0hZGFwcC1jb250ZW50YCkpW3RoaXMubmFtZV07XG4gICAgaWYgKG9yaWdpbmFsRGlzcGF0Y2hlcikge1xuICAgICAgT2JqZWN0LmtleXMob3JpZ2luYWxEaXNwYXRjaGVyKS5mb3JFYWNoKGtleSA9PiB0aGlzW2tleV0gPSBvcmlnaW5hbERpc3BhdGNoZXJba2V5XSk7XG4gICAgfVxuXG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgRGlzcGF0Y2hlckluc3RhbmNlKHtcbiAgICAgIHF1ZXVlOiB1aUNvcmVRdWV1ZSxcbiAgICAgIGRpc3BhdGNoZXI6IHRoaXMsXG4gICAgICBydW50aW1lLFxuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIHN0ZXBJbmRleDogc3RlcEluZGV4LFxuICAgIH0pO1xuXG4gICAgLy8gc3RhcnQgdGhlIGluc3RhbmNlIVxuICAgIGF3YWl0IGluc3RhbmNlLnN0YXJ0KCk7XG5cbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogV2F0Y2ggZm9yIGluc3RhbmNlIHVwZGF0ZXNcbiAgICpcbiAgICogQHBhcmFtICAgICAge0Z1bmN0aW9ufSAgZnVuYyAgICBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgb24gYW4gdXBkYXRlXG4gICAqL1xuICB3YXRjaChmdW5jOiAoJGV2ZW50OiBDdXN0b21FdmVudCkgPT4gYW55KSB7XG4gICAgY29uc3Qgd2F0Y2ggPSAoJGV2ZW50OiBDdXN0b21FdmVudCkgPT4gZnVuYygkZXZlbnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGBldmFuLXF1ZXVlLSR7IHRoaXMuZGFwcEVucyB9LSR7IHRoaXMubmFtZSB9YCwgd2F0Y2gpO1xuICAgIC8vIHJldHVybiB0aGUgd2F0Y2ggcmVtb3ZlIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBldmFuLXF1ZXVlLSR7IHRoaXMuZGFwcEVucyB9LSR7IHRoaXMubmFtZSB9YCwgd2F0Y2gpO1xuICB9XG59XG5cbmludGVyZmFjZSBEaXNwYXRjaGVySW5zdGFuY2VPcHRpb25zIHtcbiAgLy8gUXVldWUgZm9yIHRoZSBjdXJyZW50IHJ1bnRpbWUgYW5kIGRpc3BhdGNoZXJcbiAgcXVldWU6IEV2YW5RdWV1ZTtcbiAgLy8gRGlzcGF0Y2hlciB0aGF0IHNob3VsZCBiZSBydW5uZWQuXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXI7XG4gIC8vIEEgaW5pdGlhbGl6ZWQgYmNjIHJ1bnRpbWUuXG4gIHJ1bnRpbWU6IGJjYy5SdW50aW1lO1xuICAvLyBEYXRhIHRoYXQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc3RlcHNcbiAgZGF0YTogYW55O1xuICAvLyBBY3RpdmUgc3RlcC5cbiAgc3RlcEluZGV4PzogbnVtYmVyO1xuICAvLyBJZiB0aGUgaW5zdGFuY2UgbXVzdCBiZSBhY2NlcHRlZCwgdGhlIGV2ZSBwcmljZSB3aWxsIGJlIGVzdGltYXRlZCBhbmQgc2F2ZWQgdG8gdGhpcyBpbnN0YW5jZS5cbiAgY3VzdG9tUHJpY2U/OiBudW1iZXI7XG4gIC8vIGRpc3BhdGNoZXIgcnVudGltZSBpZFxuICBpZD86IGFueTtcbiAgLy8gRXJyb3IgbWVzc2FnZS5cbiAgZXJyb3I/OiBhbnk7XG59XG5cbi8qKlxuICogQSBEaXNwYXRjaGVySW5zdGFuY2UgaXMgZ2VuZXJhdGVkLCB3aGVuIGEgRGlzcGF0Y2hlciB3YXMgc3RhcnRlZC4gVGhpcyBpbnN0YW5jZSBydW5zIHRoZSBzdGFydHVwXG4gKiBhbmQgc3RlcCBmdW5jdGlvbnMgYW5kIGhvbGRzIHRoZSBkYXRhLiBBbHNvIGl0IGNvbnRhaW5zIHNldmVyYWwgc3RhdHVzIGZsYWdzLCB3aGljaCBzdGVwIGlzXG4gKiBjdXJyZW50bHkgcnVubmluZyBhbmQgaXQgc2F2ZXMgaXQncyBzdGF0ZXMgYW5kIGRhdGEgaW50byB0aGUgcXVldWUuXG4gKlxuICogQGNsYXNzICAgICAgRGlzcGF0Y2hlckluc3RhbmNlXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNwYXRjaGVySW5zdGFuY2Uge1xuICAvKipcbiAgICogUXVldWUgZm9yIHRoZSBjdXJyZW50IHJ1bnRpbWUgYW5kIGRpc3BhdGNoZXJcbiAgICovXG4gIHF1ZXVlOiBFdmFuUXVldWU7XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXIgdGhhdCBzaG91bGQgYmUgcnVubmVkLlxuICAgKi9cbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcjtcblxuICAvKipcbiAgICogQSBpbml0aWFsaXplZCBiY2MgcnVudGltZS5cbiAgICovXG4gIHJ1bnRpbWU6IGJjYy5SdW50aW1lO1xuXG4gIC8qKlxuICAgKiBEYXRhIHRoYXQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc3RlcHNcbiAgICovXG4gIGRhdGE6IGFueTtcblxuICAvKipcbiAgICogQWN0aXZlIHN0ZXAuXG4gICAqL1xuICBzdGVwSW5kZXg6IG51bWJlcjtcblxuICAvKipcbiAgICogZGlzcGF0Y2hlciBydW50aW1lIGlkXG4gICAqL1xuICBpZDogYW55O1xuXG4gIC8qKlxuICAgKiBDdXJyZW50IHJ1bm5pbmcgc3RhdHVzXG4gICAqL1xuICBfc3RhdHVzID0gJ3N0b3BwZWQnO1xuXG4gIC8qKlxuICAgKiBFcnJvciBtZXNzYWdlLlxuICAgKi9cbiAgZXJyb3I6IGFueSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgaW5zdGFuY2UgbXVzdCBiZSBhY2NlcHRlZCwgdGhlIGV2ZSBwcmljZSB3aWxsIGJlIGVzdGltYXRlZCBhbmQgc2F2ZWQgdG8gdGhpcyBpbnN0YW5jZS5cbiAgICovXG4gIGV2ZVByaWNlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEN1c3RvbSBhcHBsaWVkIGV2ZSBwcmljZSB0aGF0IHdpbGwgb3ZlcndyaXRlIHRoZSBkaXNwYXRjaGVyIG9uZVxuICAgKi9cbiAgY3VzdG9tRXZlUHJpY2U6IG51bWJlcjtcblxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IHN0YXR1cy5cbiAgICovXG4gIHNldCBzdGF0dXModmFsdWUpIHtcbiAgICB0aGlzLl9zdGF0dXMgPSB2YWx1ZTtcbiAgICB0aGlzLnRyaWdnZXJXYXRjaGVycyh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3VycmVudCBzdGF0dXNcbiAgICovXG4gIGdldCBzdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IERpc3BhdGNoZXJJbnN0YW5jZU9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgdGhpcy5kaXNwYXRjaGVyID0gb3B0aW9ucy5kaXNwYXRjaGVyO1xuICAgIHRoaXMuaWQgPSBvcHRpb25zLmlkIHx8IERhdGUubm93KCkgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKTtcbiAgICB0aGlzLnF1ZXVlID0gb3B0aW9ucy5xdWV1ZTtcbiAgICB0aGlzLnJ1bnRpbWUgPSBvcHRpb25zLnJ1bnRpbWU7XG4gICAgdGhpcy5zdGVwSW5kZXggPSBvcHRpb25zLnN0ZXBJbmRleCB8fCAwO1xuXG4gICAgaWYgKG9wdGlvbnMuY3VzdG9tUHJpY2UpIHtcbiAgICAgIHRoaXMuY3VzdG9tRXZlUHJpY2UgPSBvcHRpb25zLmN1c3RvbVByaWNlO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmVycm9yKSB7XG4gICAgICB0aGlzLmVycm9yID0gb3B0aW9ucy5lcnJvcjtcbiAgICAgIHRoaXMuX3N0YXR1cyA9ICdlcnJvcic7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB0aGUgc3RhcnR1cCBhbmQgcnVuIGZ1bmN0aW9ucy4gSWYgdGhlIGV2ZVByaWNlIGlzIGhpZ2hlciB0aGFuIHRoZSBldmUtdHJlc2hvbGQgKDAuNSksIGl0XG4gICAqIHdpbGwgc2VuZCBhbiBldmVudCB0aGF0IHRoaXMgdHJhbnNhY3Rpb24gbXVzdCBiZSBhY2NlcHRlZCwgYmVmb3JlIGl0IGNhbiBiZSBzdGFydGVkLlxuICAgKlxuICAgKiBAcGFyYW0gICAgICB7Ym9vbGVhbn0gIGFjY2VwdCAgc2hvdWxkIHRoZSBkaXNwYXRjaGVyIHN0YXJ0ZWQgZGlyZWN0bHk/XG4gICAqL1xuICBhc3luYyBzdGFydChhY2NlcHQ/OiBib29sZWFuKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlKCk7XG5cbiAgICAvLyBpZiB0aGUgaW5zdGFuY2Ugc3RhcnRzIHRoZSBmaXJzdCB0aW1lIGFuZCB0aGUgcHJpY2UgdGhyZXNob2xkIGlzIHJlYWNoZWQsIGFzayBmb3IgcGVybWlzc2lvbnNcbiAgICBpZiAoIWFjY2VwdCAmJiB0aGlzLnN0ZXBJbmRleCA9PT0gMCkge1xuICAgICAgLy8gY2FsY3VsYXRlIHRoZSBwcmljZVxuICAgICAgY29uc3QgZGVmYXVsdFRocmVzaG9sZCA9IDA7XG4gICAgICBjb25zdCBwcmljZVRocmVzaG9sZCA9IHBhcnNlRmxvYXQod2luZG93LmxvY2F0aW9uWydkaXNwYXRjaGVyLWV2ZS10cmVzaG9sZCddIHx8ICcwLjUnKTtcbiAgICAgIGxldCBldmVQcmljZTtcblxuICAgICAgLy8gdXNlIGRlZmF1bHQgb25lIG9yIGVzdGltYXRlIHRoZSBjb3N0cyBmcm9tIGRpc3BhdGNoZXIgY29uZmlndXJhdGlvblxuICAgICAgaWYgKHRoaXMuY3VzdG9tRXZlUHJpY2UpIHtcbiAgICAgICAgZXZlUHJpY2UgPSB0aGlzLmN1c3RvbUV2ZVByaWNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZ2FzUHJpY2UgPSBwYXJzZUludChhd2FpdCAoPGFueT50aGlzLnJ1bnRpbWUuc2lnbmVyKS5nZXRHYXNQcmljZSgpLCAxNik7XG4gICAgICAgIHRoaXMuZXZlUHJpY2UgPSB0aGlzLnJ1bnRpbWUud2ViMy51dGlscy5mcm9tV2VpKGdhc1ByaWNlLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ldmVQcmljZSA+IChpc05hTihwcmljZVRocmVzaG9sZCkgPyBkZWZhdWx0VGhyZXNob2xkIDogcHJpY2VUaHJlc2hvbGQpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9ICdhY2NlcHQnO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlc2V0IHByZXZpb3VzIGVycm9yc1xuICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuXG4gICAgYXdhaXQgdGhpcy5zdGFydHVwKCk7XG4gICAgdGhpcy5zdGF0dXMgPSAncnVubmluZyc7XG4gICAgYXdhaXQgdGhpcy5ydW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gYWxsIHRoZSBzdGFydHVwIGZ1bmN0aW9ucy5cbiAgICovXG4gIGFzeW5jIHN0YXJ0dXAoKSB7XG4gICAgdGhpcy5zdGF0dXMgPSAnc3RhcnRpbmcnO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5kaXNwYXRjaGVyLnN0YXJ0dXBTdGVwcy5tYXAoc3RhcnR1cCA9PiBzdGFydHVwKHRoaXMsIHRoaXMuZGF0YSkpKTtcblxuICAgIC8vIHNhdmUgdGhlIHF1ZXVlIGRhdGFcbiAgICBhd2FpdCB0aGlzLnNhdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHQgdGhlIGRpc3BhdGNoZXIgaW5zdGFuY2UgYW5kIHN0YXJ0IHRoZSBzeW5jaHJvbmlzYXRpb24uIFVzZWQgdG8gYWNjZXB0IHRoZSBldmUtdHJlc2hvbGRcbiAgICovXG4gIGFzeW5jIGFjY2VwdCgpIHtcbiAgICBhd2FpdCB0aGlzLnN0YXJ0KHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB0aGUgbmV4dCBzdGVwIGluIHRoZSBxdWV1ZSBhbmQgcGVyc2lzdCB0aGUgZGF0YS5cbiAgICovXG4gIGFzeW5jIHJ1bigpIHtcbiAgICBpZiAodGhpcy5zdGVwSW5kZXggPCB0aGlzLmRpc3BhdGNoZXIuc3RlcHMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdydW5uaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIHJ1biB0aGUgbmV4dCBzdGVwXG4gICAgICAgICAgYXdhaXQgdGhpcy5kaXNwYXRjaGVyLnN0ZXBzW3RoaXMuc3RlcEluZGV4XSh0aGlzLCB0aGlzLmRhdGEpO1xuXG4gICAgICAgICAgLy8gaW5jcmVhc2UgdGhlIHN0ZXBJbmRleFxuICAgICAgICAgIHRoaXMuc3RlcEluZGV4ICs9IDE7XG4gICAgICAgICAgLy8gdHJpZ2dlciBldmVudCBhZ2FpbiB0byB1cGRhdGUgc3RhdHVzXG4gICAgICAgICAgdGhpcy5zdGF0dXMgPSAncnVubmluZyc7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGAkeyBleC5tZXNzYWdlIH0gKCR7IGV4LnN0YWNrIH0pYDtcbiAgICAgICAgICB0aGlzLnN0YXR1cyA9ICdlcnJvcic7XG5cbiAgICAgICAgICB0aGlzLnJ1bnRpbWUubG9nZ2VyLmxvZyhleCwgJ2Vycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIHRoZSBxdWV1ZSBkYXRhXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZSgpO1xuXG4gICAgICAgIC8vIGlmIG5vIGVycm9yIHdhcyBhcHBsaWVkLCBydW4gdGhlIG5leHQgc3RlcFxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgIT09ICdlcnJvcicpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJ1bigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiB0aGUgaW5zdGFuY2Ugc2hvdWxkIGJlIGRlbGV0ZSwgcmVtb3ZlIGl0IVxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdkZWxldGluZycpIHtcbiAgICAgICAgICAvLyBlbHNlIGRlbGV0ZSBpdCBkaXJlY3RseVxuICAgICAgICAgIGF3YWl0IHRoaXMucXVldWUuc2F2ZSh0aGlzLmRpc3BhdGNoZXIuaWQsIHRoaXMuaWQpO1xuICAgICAgICAgIHRoaXMuc3RhdHVzID0gJ2RlbGV0ZWQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3RhdHVzID0gJ3N0b3BwZWQnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmluaXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RvcHBpbmcgc3RhdHVzIHRvIGJyZWFrIHN5bmNocm9uaXNhdGlvbiBhdCB0aGUgbmV4dCBkaXNwYXRjaGVyIHN0YXR1cy5cbiAgICovXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5zdGF0dXMgPSAnc3RvcHBpbmcnO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3BzIHRoZSBjdXJyZW50IHN5bmNocm9uaXNhdGlvbiBhbmQgZGVsZXRlcyB0aGUgaW5zdGFuY2UgZnJvbSB0aGUgcXVldWUuXG4gICAqL1xuICBhc3luYyBkZWxldGUoKSB7XG4gICAgLy8gaWYgdGhlIHF1ZXVlIGlzIHJ1bm5pbmcsIHdhaXQgZm9yIGZpbmlzaGVkIGFuZCBkZWxldGUgaW4gdGhlaXJcbiAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdydW5uaW5nJykge1xuICAgICAgdGhpcy5zdGF0dXMgPSAnZGVsZXRpbmcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlbHNlIGRlbGV0ZSBpdCBkaXJlY3RseVxuICAgICAgYXdhaXQgdGhpcy5xdWV1ZS5zYXZlKHRoaXMuZGlzcGF0Y2hlci5pZCwgdGhpcy5pZCk7XG4gICAgICB0aGlzLnN0YXR1cyA9ICdkZWxldGVkJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUnVuIGFsbCB3YXRjaGVycyB3aXRoIGFuIHNwZWNpZmljIHN0YXR1c1xuICAgKi9cbiAgdHJpZ2dlcldhdGNoZXJzKHN0YXR1czogYW55KSB7XG4gICAgW1xuICAgICAgYGV2YW4tcXVldWUtKi0qYCxcbiAgICAgIGBldmFuLXF1ZXVlLSR7IHRoaXMuZGlzcGF0Y2hlci5kYXBwRW5zIH0tKmAsXG4gICAgICBgZXZhbi1xdWV1ZS0keyB0aGlzLmRpc3BhdGNoZXIuZGFwcEVucyB9LSR7IHRoaXMuZGlzcGF0Y2hlci5uYW1lIH1gLFxuICAgICAgYGV2YW4tcXVldWUtJHsgdGhpcy5pZCB9YCxcbiAgICBdLmZvckVhY2goKGV2ZW50TmFtZSkgPT4gdGhpcy5zZW5kRXZlbnQoZXZlbnROYW1lLCBzdGF0dXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGFuIGV2ZW50IHdpdGggYW4gc3RhdHVzIGZvciB0aGlzIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gICAgICB7c3RyaW5nfSAgZXZlbnROYW1lICBldmVudCBuYW1lIHRvIHRyaWdnZXJcbiAgICogQHBhcmFtICAgICAge2FueX0gICAgIHN0YXR1cyAgICAgc3RhdHVzIHRoYXQgc2hvdWxkIGJlIHNlbnRcbiAgICovXG4gIHNlbmRFdmVudChldmVudE5hbWU6IHN0cmluZywgc3RhdHVzOiBhbnkpIHtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZGlzcGF0Y2hlcjogdGhpcy5kaXNwYXRjaGVyLFxuICAgICAgICBpbnN0YW5jZTogdGhpcyxcbiAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICB9XG4gICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2UgdGhlIGN1cnJlbnQgZGF0YSBhbmQgc2F2ZXMgaXQgaW50byB0aGUgcXVldWUgZGIuXG4gICAqL1xuICBhc3luYyBzYXZlKCkge1xuICAgIGF3YWl0IHRoaXMucXVldWUuc2F2ZSh0aGlzLmRpc3BhdGNoZXIuaWQsIHRoaXMuaWQsIHtcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIGVycm9yOiB0aGlzLmVycm9yLFxuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHN0ZXBJbmRleDogdGhpcy5zdGVwSW5kZXgsXG4gICAgICBjdXN0b21FdmVQcmljZTogdGhpcy5jdXN0b21FdmVQcmljZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyB0byBmaW5pc2hlZCBhbmQgcmVtb3ZlIHRoZSBxdWV1ZSBlbnRyeSBkYXRhLlxuICAgKi9cbiAgYXN5bmMgZmluaXNoKCkge1xuICAgIGF3YWl0IHRoaXMucXVldWUuc2F2ZSh0aGlzLmRpc3BhdGNoZXIuaWQsIHRoaXMuaWQpO1xuICAgIHRoaXMuc3RhdHVzID0gJ2ZpbmlzaGVkJztcbiAgfVxuXG4gIC8qKlxuICAgKiBXYXRjaCBmb3IgaW5zdGFuY2UgdXBkYXRlc1xuICAgKlxuICAgKiBAcGFyYW0gICAgICB7RnVuY3Rpb259ICBmdW5jICAgIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCBvbiBhbiB1cGRhdGVcbiAgICovXG4gIHdhdGNoKGZ1bmM6ICgkZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiBhbnkpIHtcbiAgICBjb25zdCB3YXRjaCA9ICgkZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiBmdW5jKCRldmVudCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYGV2YW4tcXVldWUtJHsgdGhpcy5pZCB9YCwgd2F0Y2gpO1xuXG4gICAgLy8gcmV0dXJuIHRoZSB3YXRjaCByZW1vdmUgZnVuY3Rpb25cbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGV2YW4tcXVldWUtJHsgdGhpcy5pZCB9YCwgd2F0Y2gpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Dispatcher.ts\n");

/***/ }),

/***/ "./src/Files.ts":
/*!**********************!*\
  !*** ./src/Files.ts ***!
  \**********************/
/*! exports provided: fileToContainerFile, readFileAsArrayBuffer, getReadableFileSize, resizeImage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fileToContainerFile\", function() { return fileToContainerFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"readFileAsArrayBuffer\", function() { return readFileAsArrayBuffer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getReadableFileSize\", function() { return getReadableFileSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resizeImage\", function() { return resizeImage; });\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/**\n * Takes an usual File object (e.g. File from HTML 5 file input) and transforms it into an\n * blockchain-core understandable file.\n *\n * @param      {File}  file    html 5 input result file\n */\nfunction fileToContainerFile(file) {\n    return __awaiter(this, void 0, void 0, function () {\n        var fileOrigin, type, urlCreator, buffer, _a, blob;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    fileOrigin = file.file ? file.file : file;\n                    type = file.type || file.fileType;\n                    urlCreator = window.URL || window.webkitURL;\n                    if (!fileOrigin.buffer) return [3 /*break*/, 1];\n                    _a = fileOrigin.buffer;\n                    return [3 /*break*/, 3];\n                case 1: return [4 /*yield*/, readFileAsArrayBuffer(fileOrigin)];\n                case 2:\n                    _a = _b.sent();\n                    _b.label = 3;\n                case 3:\n                    buffer = _a;\n                    blob = new Blob([buffer], { type: type });\n                    return [2 /*return*/, {\n                            blob: blob,\n                            blobUri: urlCreator.createObjectURL(blob),\n                            file: buffer,\n                            fileType: type,\n                            name: file.name,\n                            readableSize: getReadableFileSize(file.size),\n                            size: file.size,\n                        }];\n            }\n        });\n    });\n}\n/**\n * Upload a file that were selected with an HTML 5 <input type=\"file\"> selector or using the\n * evan-file-select component and transforms them into an encryption object\n *\n * @param      {File}  file    array of files\n * @return     {Promise<any>}  uploaded files transformed into an encryption object\n */\nfunction readFileAsArrayBuffer(file) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!(file instanceof ArrayBuffer)) return [3 /*break*/, 1];\n                    return [2 /*return*/, file];\n                case 1: return [4 /*yield*/, new Promise(function (resolve) {\n                        var fileReader = new FileReader();\n                        // when the file was loaded successfully, return the uploaded file\n                        fileReader.onloadend = function ($event) { return resolve($event.target.result); };\n                        // start file reading\n                        fileReader.readAsArrayBuffer(file);\n                    })];\n                case 2: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\n/**\n * Parse the file size to a human readable format\n *\n * @param      {number}  size    size in B\n * @return     {string}  XXX KB / XXX MB\n */\nfunction getReadableFileSize(size) {\n    if ((size / 1000000) > 1) {\n        return (size / 1000000).toFixed(2) + \" MB\";\n    }\n    else if ((size / 1000) > 1) {\n        return (size / 1000).toFixed(2) + \" KB\";\n    }\n    else {\n        return size.toFixed(2) + \"B\";\n    }\n}\n/**\n * Takes an dataUri and resizes the img to an maximum px ratio of 1000px:1000px.\n *\n * @param      {string}  dataUri     Data Uri\n * @param      {any}     dimensions  dimensions to transform the picture to (default max_width:\n *                                   1000, max_height: 1000)\n * @return     {blob}    Returns the resized img as a blob.\n */\nfunction resizeImage(dataUri, dimensions) {\n    if (dimensions === void 0) { dimensions = { max_width: 1000, max_height: 1000 }; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var img = new Image();\n                    img.src = dataUri;\n                    img.onload = function () {\n                        var canvas = document.createElement('canvas');\n                        var ctx = canvas.getContext('2d');\n                        var canvasCopy = document.createElement('canvas');\n                        var copyContext = canvasCopy.getContext('2d');\n                        var ratio = 1;\n                        if (img.width > dimensions.max_width) {\n                            ratio = dimensions.max_width / img.width;\n                        }\n                        else if (img.height > dimensions.max_height) {\n                            ratio = dimensions.max_height / img.height;\n                        }\n                        canvasCopy.width = img.width;\n                        canvasCopy.height = img.height;\n                        copyContext.drawImage(img, 0, 0);\n                        canvas.width = img.width * ratio;\n                        canvas.height = img.height * ratio;\n                        ctx.drawImage(canvasCopy, 0, 0, canvasCopy.width, canvasCopy.height, 0, 0, canvas.width, canvas.height);\n                        canvas.toBlob(function (blob) { return resolve(blob); });\n                    };\n                })];\n        });\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL0ZpbGVzLnRzP2JiMGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztFQWlCRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBCRjs7Ozs7R0FLRztBQUNJLFNBQWUsbUJBQW1CLENBQ3ZDLElBQVM7Ozs7OztvQkFHSCxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUMxQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO29CQUlsQyxVQUFVLEdBQVMsTUFBTyxDQUFDLEdBQUcsSUFBVSxNQUFPLENBQUMsU0FBUyxDQUFDO3lCQUNqRCxVQUFVLENBQUMsTUFBTSxFQUFqQix3QkFBaUI7b0JBQUcsZUFBVSxDQUFDLE1BQU07O3dCQUFHLHFCQUFNLHFCQUFxQixDQUFDLFVBQVUsQ0FBQzs7b0JBQXZDLGNBQXVDOzs7b0JBQXhGLE1BQU0sS0FBa0Y7b0JBQ3hGLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFFLE1BQU0sQ0FBRSxFQUFFLEVBQUUsSUFBSSxRQUFFLENBQUMsQ0FBQztvQkFFNUMsc0JBQU87NEJBQ0wsSUFBSSxFQUFFLElBQUk7NEJBQ1YsT0FBTyxFQUFFLFVBQVUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDOzRCQUN6QyxJQUFJLEVBQUUsTUFBTTs0QkFDWixRQUFRLEVBQUUsSUFBSTs0QkFDZCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7NEJBQ2YsWUFBWSxFQUFFLG1CQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7NEJBQzVDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTt5QkFDaEIsRUFBQzs7OztDQUNIO0FBRUQ7Ozs7OztHQU1HO0FB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LENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsTUFBTSxFQUN6QyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FDbEMsQ0FBQzt3QkFDRixNQUFNLENBQUMsTUFBTSxDQUFDLFVBQUMsSUFBSSxJQUFLLGNBQU8sQ0FBQyxJQUFJLENBQUMsRUFBYixDQUFhLENBQUMsQ0FBQztvQkFDekMsQ0FBQyxDQUFDO2dCQUNKLENBQUMsQ0FBQyxFQUFDOzs7Q0FDSiIsImZpbGUiOiIuL3NyYy9GaWxlcy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIENvcHlyaWdodCAoQykgMjAxOC1wcmVzZW50IGV2YW4gR21iSC5cblxuICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdFxuICB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSwgdmVyc2lvbiAzLFxuICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cblxuICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLlxuICBTZWUgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLyBvclxuICB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsXG4gIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BLCAwMjExMC0xMzAxIFVTQSwgb3IgZG93bmxvYWQgdGhlIGxpY2Vuc2UgZnJvbVxuICB0aGUgZm9sbG93aW5nIFVSTDogaHR0cHM6Ly9ldmFuLm5ldHdvcmsvbGljZW5zZS9cbiovXG5cbmltcG9ydCAqIGFzIGJjYyBmcm9tICdAZXZhbi5uZXR3b3JrL2FwaS1ibG9ja2NoYWluLWNvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVJQ29udGFpbmVyRmlsZSBleHRlbmRzIGJjYy5Db250YWluZXJGaWxlIHtcbiAgLyoqXG4gICAqIFRoZSBmaWxlIHNpemUgaW4gYnl0ZXNcbiAgICovXG4gIHNpemU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFNpemUgcGFyc2VkIHRvIGtiLCBtZCwgLi4uXG4gICAqL1xuICByZWFkYWJsZVNpemU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIGRvd25sb2FkYWJsZSB1cmxcbiAgICovXG4gIGJsb2JVcmk6IHN0cmluZztcblxuICAvKipcbiAgICogYmxvYiBpbnN0YW5jZVxuICAgKi9cbiAgYmxvYjogQmxvYjtcbn1cblxuLyoqXG4gKiBUYWtlcyBhbiB1c3VhbCBGaWxlIG9iamVjdCAoZS5nLiBGaWxlIGZyb20gSFRNTCA1IGZpbGUgaW5wdXQpIGFuZCB0cmFuc2Zvcm1zIGl0IGludG8gYW5cbiAqIGJsb2NrY2hhaW4tY29yZSB1bmRlcnN0YW5kYWJsZSBmaWxlLlxuICpcbiAqIEBwYXJhbSAgICAgIHtGaWxlfSAgZmlsZSAgICBodG1sIDUgaW5wdXQgcmVzdWx0IGZpbGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVUb0NvbnRhaW5lckZpbGUoXG4gIGZpbGU6IGFueSxcbik6IFByb21pc2U8VUlDb250YWluZXJGaWxlPiB7XG4gIC8vIHVzZSBodG1sIDUgZmlsZXMgYW5kIGFscmVhZHkgc2F2ZWQgZmlsZXMgd2hpdCBhbm90aGVyIHN0cnVjdHVyZVxuICBjb25zdCBmaWxlT3JpZ2luID0gZmlsZS5maWxlID8gZmlsZS5maWxlIDogZmlsZTtcbiAgY29uc3QgdHlwZSA9IGZpbGUudHlwZSB8fCBmaWxlLmZpbGVUeXBlO1xuXG4gIC8vIHVzZSB0aGUgY29ycmVjdCB1cmwgY3JlYXRvciwgc2VhcmNoIGZvciB0aGUgY29ycmVjdCBidWZmZXIgb2JqZWN0IGFuZCBjcmVhdGUgYSBibG9iIGFuZCBibG9iXG4gIC8vIHVyaVxuICBjb25zdCB1cmxDcmVhdG9yID0gKDxhbnk+d2luZG93KS5VUkwgfHwgKDxhbnk+d2luZG93KS53ZWJraXRVUkw7XG4gIGNvbnN0IGJ1ZmZlciA9IGZpbGVPcmlnaW4uYnVmZmVyID8gZmlsZU9yaWdpbi5idWZmZXIgOiBhd2FpdCByZWFkRmlsZUFzQXJyYXlCdWZmZXIoZmlsZU9yaWdpbik7XG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbIGJ1ZmZlciBdLCB7IHR5cGUgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBibG9iOiBibG9iLFxuICAgIGJsb2JVcmk6IHVybENyZWF0b3IuY3JlYXRlT2JqZWN0VVJMKGJsb2IpLFxuICAgIGZpbGU6IGJ1ZmZlcixcbiAgICBmaWxlVHlwZTogdHlwZSxcbiAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgcmVhZGFibGVTaXplOiBnZXRSZWFkYWJsZUZpbGVTaXplKGZpbGUuc2l6ZSksXG4gICAgc2l6ZTogZmlsZS5zaXplLFxuICB9O1xufVxuXG4vKipcbiAqIFVwbG9hZCBhIGZpbGUgdGhhdCB3ZXJlIHNlbGVjdGVkIHdpdGggYW4gSFRNTCA1IDxpbnB1dCB0eXBlPVwiZmlsZVwiPiBzZWxlY3RvciBvciB1c2luZyB0aGVcbiAqIGV2YW4tZmlsZS1zZWxlY3QgY29tcG9uZW50IGFuZCB0cmFuc2Zvcm1zIHRoZW0gaW50byBhbiBlbmNyeXB0aW9uIG9iamVjdFxuICpcbiAqIEBwYXJhbSAgICAgIHtGaWxlfSAgZmlsZSAgICBhcnJheSBvZiBmaWxlc1xuICogQHJldHVybiAgICAge1Byb21pc2U8YW55Pn0gIHVwbG9hZGVkIGZpbGVzIHRyYW5zZm9ybWVkIGludG8gYW4gZW5jcnlwdGlvbiBvYmplY3RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRGaWxlQXNBcnJheUJ1ZmZlcihmaWxlOiBGaWxlKTogUHJvbWlzZTxhbnk+IHtcbiAgaWYgKGZpbGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmaWxlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAvLyB3aGVuIHRoZSBmaWxlIHdhcyBsb2FkZWQgc3VjY2Vzc2Z1bGx5LCByZXR1cm4gdGhlIHVwbG9hZGVkIGZpbGVcbiAgICAgIGZpbGVSZWFkZXIub25sb2FkZW5kID0gKCRldmVudDogYW55KSA9PiByZXNvbHZlKCRldmVudC50YXJnZXQucmVzdWx0KTtcblxuICAgICAgLy8gc3RhcnQgZmlsZSByZWFkaW5nXG4gICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgIH0pO1xuICB9XG59XG5cblxuLyoqXG4gKiBQYXJzZSB0aGUgZmlsZSBzaXplIHRvIGEgaHVtYW4gcmVhZGFibGUgZm9ybWF0XG4gKlxuICogQHBhcmFtICAgICAge251bWJlcn0gIHNpemUgICAgc2l6ZSBpbiBCXG4gKiBAcmV0dXJuICAgICB7c3RyaW5nfSAgWFhYIEtCIC8gWFhYIE1CXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFkYWJsZUZpbGVTaXplKHNpemU6IG51bWJlcikge1xuICBpZiAoKHNpemUgLyAxMDAwMDAwKSA+IDEpIHtcbiAgICByZXR1cm4gYCR7IChzaXplIC8gMTAwMDAwMCkudG9GaXhlZCgyKSB9IE1CYDtcbiAgfSBlbHNlIGlmICgoc2l6ZSAvIDEwMDApID4gMSkge1xuICAgIHJldHVybiBgJHsgKHNpemUgLyAxMDAwKS50b0ZpeGVkKDIpIH0gS0JgO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHsgc2l6ZS50b0ZpeGVkKDIpIH1CYDtcbiAgfVxufVxuXG4vKipcbiAqIFRha2VzIGFuIGRhdGFVcmkgYW5kIHJlc2l6ZXMgdGhlIGltZyB0byBhbiBtYXhpbXVtIHB4IHJhdGlvIG9mIDEwMDBweDoxMDAwcHguXG4gKlxuICogQHBhcmFtICAgICAge3N0cmluZ30gIGRhdGFVcmkgICAgIERhdGEgVXJpXG4gKiBAcGFyYW0gICAgICB7YW55fSAgICAgZGltZW5zaW9ucyAgZGltZW5zaW9ucyB0byB0cmFuc2Zvcm0gdGhlIHBpY3R1cmUgdG8gKGRlZmF1bHQgbWF4X3dpZHRoOlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMDAsIG1heF9oZWlnaHQ6IDEwMDApXG4gKiBAcmV0dXJuICAgICB7YmxvYn0gICAgUmV0dXJucyB0aGUgcmVzaXplZCBpbWcgYXMgYSBibG9iLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzaXplSW1hZ2UoZGF0YVVyaTogc3RyaW5nLCBkaW1lbnNpb25zID0geyBtYXhfd2lkdGg6IDEwMDAsIG1heF9oZWlnaHQ6IDEwMDAgfSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgIGltZy5zcmMgPSBkYXRhVXJpO1xuXG4gICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGNvbnN0IGNhbnZhc0NvcHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIGNvbnN0IGNvcHlDb250ZXh0ID0gY2FudmFzQ29weS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgbGV0IHJhdGlvID0gMTtcblxuICAgICAgaWYgKGltZy53aWR0aCA+IGRpbWVuc2lvbnMubWF4X3dpZHRoKSB7XG4gICAgICAgIHJhdGlvID0gZGltZW5zaW9ucy5tYXhfd2lkdGggLyBpbWcud2lkdGg7XG4gICAgICB9IGVsc2UgaWYgKGltZy5oZWlnaHQgPiBkaW1lbnNpb25zLm1heF9oZWlnaHQpIHtcbiAgICAgICAgcmF0aW8gPSBkaW1lbnNpb25zLm1heF9oZWlnaHQgLyBpbWcuaGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBjYW52YXNDb3B5LndpZHRoID0gaW1nLndpZHRoO1xuICAgICAgY2FudmFzQ29weS5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgY29weUNvbnRleHQuZHJhd0ltYWdlKGltZywgMCwgMCk7XG5cbiAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aCAqIHJhdGlvO1xuICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQgKiByYXRpbztcbiAgICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICAgIGNhbnZhc0NvcHksXG4gICAgICAgIDAsIDAsIGNhbnZhc0NvcHkud2lkdGgsIGNhbnZhc0NvcHkuaGVpZ2h0LFxuICAgICAgICAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRcbiAgICAgICk7XG4gICAgICBjYW52YXMudG9CbG9iKChibG9iKSA9PiByZXNvbHZlKGJsb2IpKTtcbiAgICB9O1xuICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Files.ts\n");

/***/ }),

/***/ "./src/Queue.ts":
/*!**********************!*\
  !*** ./src/Queue.ts ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/**\n * initialized queue database\n */\nvar queueDB;\n/**\n * Structure for handling dispatcher instances and managing data of them. It will start and register\n * dispatchers and offers the possiblity to save the dispatchers runtime data within the browsers\n * IndexDB.\n *\n * @class      EvanQueue\n */\nvar EvanQueue = /** @class */ (function () {\n    function EvanQueue(accountId) {\n        this.accountId = accountId;\n        this.storageName = this.getStorageName();\n    }\n    /**\n     * Open the correct index db for the current user. Checks also for upgrades.\n     *\n     * @param      {number}  version  current db version\n     */\n    EvanQueue.prototype.openDB = function (version) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var availableDB = window['indexedDB'] ||\n                            window['mozIndexedDB'] ||\n                            window['webkitIndexedDB'] ||\n                            window['msIndexedDB'] ||\n                            window['shimIndexedDB'];\n                        var openParams = ['EvanNetworkQueueV2'];\n                        // directly pass previous version\n                        if (version) {\n                            openParams.push(version);\n                        }\n                        var openRequest = availableDB.open.apply(availableDB, openParams);\n                        var storageName = _this.storageName;\n                        openRequest.onerror = function () {\n                            // if the browser could not detect initial so start with one\n                            if (!version) {\n                                _this.openDB(1);\n                            }\n                            else {\n                                reject(openRequest.error);\n                            }\n                        };\n                        openRequest.onsuccess = function (event) { return __awaiter(_this, void 0, void 0, function () {\n                            var storeExists, _a;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        storeExists = Object\n                                            .keys(openRequest.result.objectStoreNames)\n                                            .map(function (index) { return openRequest.result.objectStoreNames[index]; })\n                                            .indexOf(storageName) !== -1;\n                                        if (!!storeExists) return [3 /*break*/, 2];\n                                        openRequest.result.close();\n                                        _a = resolve;\n                                        return [4 /*yield*/, this.openDB(openRequest.result.version + 1)];\n                                    case 1:\n                                        _a.apply(void 0, [_b.sent()]);\n                                        return [3 /*break*/, 3];\n                                    case 2:\n                                        resolve(openRequest.result);\n                                        _b.label = 3;\n                                    case 3: return [2 /*return*/];\n                                }\n                            });\n                        }); };\n                        openRequest.onblocked = function (event) { return reject('indexDB blocked'); };\n                        openRequest.onupgradeneeded = function (event) {\n                            event.target.result\n                                .createObjectStore(storageName, {\n                                keyPath: 'dispatcherId'\n                            });\n                        };\n                    })];\n            });\n        });\n    };\n    /**\n     * Creates a queueDB if missing and open all connections. Is called by the Queue interaction\n     * functions itself.\n     */\n    EvanQueue.prototype.initialize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ex_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!queueDB) return [3 /*break*/, 6];\n                        if (!!this.initializing) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.openDB()];\n                    case 2:\n                        queueDB = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        ex_1 = _a.sent();\n                        console.error(ex_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [4 /*yield*/, this.initializing];\n                    case 5:\n                        _a.sent();\n                        _a.label = 6;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * gets the queue db storage name for the active account\n     *\n     * @return     {string}  The storage name.\n     */\n    EvanQueue.prototype.getStorageName = function () {\n        return 'evan-queue-' + this.accountId;\n    };\n    /**\n     * Gets the \"evan-queue\" IndexDB object store.\n     *\n     * @param      {any}  option  additional options for queueDB.transaction\n     * @return     {any}  The IDBObjectStore.\n     */\n    EvanQueue.prototype.getObjectStore = function (option) {\n        var transaction = queueDB.transaction([this.storageName], option);\n        var objectStore = transaction.objectStore(this.storageName);\n        return objectStore;\n    };\n    /**\n     * Loads the queue db for the current user and updates all global queue entries from the index db\n     * @param      {string}  dispatcherId  The dispatcher identifier\n     * @return     {Promise<Array<any>>}  global queue entry array\n     */\n    EvanQueue.prototype.load = function (dispatcherId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var entries;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.initialize()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                var objectStore = _this.getObjectStore('readonly');\n                                var request;\n                                if (dispatcherId === '*') {\n                                    if (objectStore.getAll) {\n                                        request = objectStore.getAll();\n                                        request.onsuccess = function (event) { return resolve(request.result); };\n                                    }\n                                    else {\n                                        // polyfill getAll for edge / ie\n                                        var results_1 = [];\n                                        request = objectStore.openCursor();\n                                        request.onsuccess = function (event) {\n                                            var cursor = event.target.result;\n                                            if (cursor) {\n                                                results_1.push(cursor.value);\n                                                cursor.continue();\n                                            }\n                                            else {\n                                                resolve(results_1);\n                                            }\n                                        };\n                                    }\n                                }\n                                else {\n                                    request = objectStore.get(dispatcherId);\n                                    request.onsuccess = function (event) {\n                                        return resolve(request.result && request.result.entries ? request.result.entries : {});\n                                    };\n                                }\n                                request.onerror = function (event) { return reject(request.error); };\n                            })];\n                    case 2:\n                        entries = _a.sent();\n                        return [2 /*return*/, entries];\n                }\n            });\n        });\n    };\n    /**\n     * Store for the current user its current global entries to the queue db.  It loads all current\n     * saved entries and checks for the provided entryId. If the entryId is empty, the entry will be\n     * deleted.\n     *\n     * @param      {string}  dispatcherId  dispatcher identifier (dappEns + dispatcher name)\n     * @param      {string}  entryId       random id string\n     * @param      {any}     data          any data that should be saved, leave empty to remove the\n     *                                     entry\n     * @return     {Promise<any>}  objectStore.put result\n     */\n    EvanQueue.prototype.save = function (dispatcherId, entryId, data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.initialize()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                                var entries, objectStore, request;\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0: return [4 /*yield*/, this.load(dispatcherId)];\n                                        case 1:\n                                            entries = _a.sent();\n                                            objectStore = this.getObjectStore('readwrite');\n                                            // if no data was applied, delete the data\n                                            if (!data) {\n                                                delete entries[entryId];\n                                            }\n                                            else {\n                                                entries[entryId] = data;\n                                            }\n                                            if (Object.keys(entries).length === 0) {\n                                                request = objectStore.delete(dispatcherId);\n                                            }\n                                            else {\n                                                request = objectStore.put({\n                                                    dispatcherId: dispatcherId,\n                                                    entries: entries || {}\n                                                });\n                                            }\n                                            request.onsuccess = function (event) { return resolve(request.result); };\n                                            request.onerror = function (event) { return reject(request.error); };\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); })];\n                    case 2: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return EvanQueue;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (EvanQueue);\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL1F1ZXVlLnRzPzJhNzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFpQkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFRjs7R0FFRztBQUNILElBQUksT0FBTyxDQUFDO0FBRVo7Ozs7OztHQU1HO0FBQ0g7SUFxQkUsbUJBQVksU0FBaUI7UUFDM0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7O09BSUc7SUFDRywwQkFBTSxHQUFaLFVBQWEsT0FBZ0I7Ozs7Z0JBQzNCLHNCQUFPLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU07d0JBQ2pDLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7NEJBQ3JDLE1BQU0sQ0FBQyxjQUFjLENBQUM7NEJBQ3RCLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQzs0QkFDekIsTUFBTSxDQUFDLGFBQWEsQ0FBQzs0QkFDckIsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO3dCQUUxQixJQUFNLFVBQVUsR0FBUSxDQUFFLG9CQUFvQixDQUFFLENBQUM7d0JBQ2pELGlDQUFpQzt3QkFDakMsSUFBSSxPQUFPLEVBQUU7NEJBQ1gsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzt5QkFDMUI7d0JBRUQsSUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO3dCQUNwRSxJQUFNLFdBQVcsR0FBRyxLQUFJLENBQUMsV0FBVyxDQUFDO3dCQUVyQyxXQUFXLENBQUMsT0FBTyxHQUFHOzRCQUNwQiw0REFBNEQ7NEJBQzVELElBQUksQ0FBQyxPQUFPLEVBQUU7Z0NBQ1osS0FBSSxD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cmlnaHQgKEMpIDIwMTgtcHJlc2VudCBldmFuIEdtYkguXG5cbiAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXRcbiAgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UsIHZlcnNpb24gMyxcbiAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXG5cbiAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS5cbiAgU2VlIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8gb3JcbiAgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgSW5jLiwgNTEgRnJhbmtsaW4gU3RyZWV0LFxuICBGaWZ0aCBGbG9vciwgQm9zdG9uLCBNQSwgMDIxMTAtMTMwMSBVU0EsIG9yIGRvd25sb2FkIHRoZSBsaWNlbnNlIGZyb21cbiAgdGhlIGZvbGxvd2luZyBVUkw6IGh0dHBzOi8vZXZhbi5uZXR3b3JrL2xpY2Vuc2UvXG4qL1xuXG4vKipcbiAqIGluaXRpYWxpemVkIHF1ZXVlIGRhdGFiYXNlXG4gKi9cbmxldCBxdWV1ZURCO1xuXG4vKipcbiAqIFN0cnVjdHVyZSBmb3IgaGFuZGxpbmcgZGlzcGF0Y2hlciBpbnN0YW5jZXMgYW5kIG1hbmFnaW5nIGRhdGEgb2YgdGhlbS4gSXQgd2lsbCBzdGFydCBhbmQgcmVnaXN0ZXJcbiAqIGRpc3BhdGNoZXJzIGFuZCBvZmZlcnMgdGhlIHBvc3NpYmxpdHkgdG8gc2F2ZSB0aGUgZGlzcGF0Y2hlcnMgcnVudGltZSBkYXRhIHdpdGhpbiB0aGUgYnJvd3NlcnNcbiAqIEluZGV4REIuXG4gKlxuICogQGNsYXNzICAgICAgRXZhblF1ZXVlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2YW5RdWV1ZSB7XG4gIC8qKlxuICAgKiBnbG9iYWwgYXZhaWxhYmxlIHF1ZXVlIGluc3RhbmNlXG4gICAqL1xuICBlbnRyaWVzOiB7IH07XG5cbiAgLyoqXG4gICAqIHNhdmUgdGhlIGxhc3QgYWNjb3VudCBpZCB0byBjaGVjaywgZm9yIHdoaWNoIGFjY291bnQgdGhlIHF1ZXVlIHdhcyBsb2FkZWRcbiAgICovXG4gIGFjY291bnRJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9taXNlIHRvIGhhbmRsZSBxdWV1ZURCIGxvYWRpbmcgZmluaXNoXG4gICAqL1xuICBpbml0aWFsaXppbmc6IFByb21pc2U8dm9pZD47XG5cbiAgLyoqXG4gICAqIFN0b3JhZ2UgbmFtZSBmb3IgdGhlIGN1cnJlbnQgdXNlci5cbiAgICovXG4gIHN0b3JhZ2VOYW1lOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYWNjb3VudElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmFjY291bnRJZCA9IGFjY291bnRJZDtcbiAgICB0aGlzLnN0b3JhZ2VOYW1lID0gdGhpcy5nZXRTdG9yYWdlTmFtZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW4gdGhlIGNvcnJlY3QgaW5kZXggZGIgZm9yIHRoZSBjdXJyZW50IHVzZXIuIENoZWNrcyBhbHNvIGZvciB1cGdyYWRlcy5cbiAgICpcbiAgICogQHBhcmFtICAgICAge251bWJlcn0gIHZlcnNpb24gIGN1cnJlbnQgZGIgdmVyc2lvblxuICAgKi9cbiAgYXN5bmMgb3BlbkRCKHZlcnNpb24/OiBudW1iZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgYXZhaWxhYmxlREIgPSB3aW5kb3dbJ2luZGV4ZWREQiddIHx8XG4gICAgICAgIHdpbmRvd1snbW96SW5kZXhlZERCJ10gfHxcbiAgICAgICAgd2luZG93Wyd3ZWJraXRJbmRleGVkREInXSB8fFxuICAgICAgICB3aW5kb3dbJ21zSW5kZXhlZERCJ10gfHxcbiAgICAgICAgd2luZG93WydzaGltSW5kZXhlZERCJ107XG5cbiAgICAgIGNvbnN0IG9wZW5QYXJhbXM6IGFueSA9IFsgJ0V2YW5OZXR3b3JrUXVldWVWMicgXTtcbiAgICAgIC8vIGRpcmVjdGx5IHBhc3MgcHJldmlvdXMgdmVyc2lvblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgb3BlblBhcmFtcy5wdXNoKHZlcnNpb24pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcGVuUmVxdWVzdCA9IGF2YWlsYWJsZURCLm9wZW4uYXBwbHkoYXZhaWxhYmxlREIsIG9wZW5QYXJhbXMpO1xuICAgICAgY29uc3Qgc3RvcmFnZU5hbWUgPSB0aGlzLnN0b3JhZ2VOYW1lO1xuXG4gICAgICBvcGVuUmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAvLyBpZiB0aGUgYnJvd3NlciBjb3VsZCBub3QgZGV0ZWN0IGluaXRpYWwgc28gc3RhcnQgd2l0aCBvbmVcbiAgICAgICAgaWYgKCF2ZXJzaW9uKSB7XG4gICAgICAgICAgdGhpcy5vcGVuREIoMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KG9wZW5SZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG9wZW5SZXF1ZXN0Lm9uc3VjY2VzcyA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZUV4aXN0cyA9IE9iamVjdFxuICAgICAgICAgIC5rZXlzKG9wZW5SZXF1ZXN0LnJlc3VsdC5vYmplY3RTdG9yZU5hbWVzKVxuICAgICAgICAgIC5tYXAoaW5kZXggPT4gb3BlblJlcXVlc3QucmVzdWx0Lm9iamVjdFN0b3JlTmFtZXNbaW5kZXhdKVxuICAgICAgICAgIC5pbmRleE9mKHN0b3JhZ2VOYW1lKSAhPT0gLTE7XG5cbiAgICAgICAgaWYgKCFzdG9yZUV4aXN0cykge1xuICAgICAgICAgIG9wZW5SZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xuICAgICAgICAgIHJlc29sdmUoYXdhaXQgdGhpcy5vcGVuREIob3BlblJlcXVlc3QucmVzdWx0LnZlcnNpb24gKyAxKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShvcGVuUmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBvcGVuUmVxdWVzdC5vbmJsb2NrZWQgPSAoZXZlbnQpID0+IHJlamVjdCgnaW5kZXhEQiBibG9ja2VkJyk7XG5cbiAgICAgIG9wZW5SZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICg8YW55PmV2ZW50LnRhcmdldCkucmVzdWx0XG4gICAgICAgICAgLmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JhZ2VOYW1lLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiAnZGlzcGF0Y2hlcklkJ1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgcXVldWVEQiBpZiBtaXNzaW5nIGFuZCBvcGVuIGFsbCBjb25uZWN0aW9ucy4gSXMgY2FsbGVkIGJ5IHRoZSBRdWV1ZSBpbnRlcmFjdGlvblxuICAgKiBmdW5jdGlvbnMgaXRzZWxmLlxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICghcXVldWVEQikge1xuICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHF1ZXVlREIgPSBhd2FpdCB0aGlzLm9wZW5EQigpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6aW5nO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBnZXRzIHRoZSBxdWV1ZSBkYiBzdG9yYWdlIG5hbWUgZm9yIHRoZSBhY3RpdmUgYWNjb3VudFxuICAgKlxuICAgKiBAcmV0dXJuICAgICB7c3RyaW5nfSAgVGhlIHN0b3JhZ2UgbmFtZS5cbiAgICovXG4gIGdldFN0b3JhZ2VOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdldmFuLXF1ZXVlLScgKyB0aGlzLmFjY291bnRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBcImV2YW4tcXVldWVcIiBJbmRleERCIG9iamVjdCBzdG9yZS5cbiAgICpcbiAgICogQHBhcmFtICAgICAge2FueX0gIG9wdGlvbiAgYWRkaXRpb25hbCBvcHRpb25zIGZvciBxdWV1ZURCLnRyYW5zYWN0aW9uXG4gICAqIEByZXR1cm4gICAgIHthbnl9ICBUaGUgSURCT2JqZWN0U3RvcmUuXG4gICAqL1xuICBnZXRPYmplY3RTdG9yZShvcHRpb24/OiBhbnkpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHF1ZXVlREIudHJhbnNhY3Rpb24oW3RoaXMuc3RvcmFnZU5hbWVdLCBvcHRpb24pO1xuICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yYWdlTmFtZSk7XG5cbiAgICByZXR1cm4gb2JqZWN0U3RvcmU7XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgdGhlIHF1ZXVlIGRiIGZvciB0aGUgY3VycmVudCB1c2VyIGFuZCB1cGRhdGVzIGFsbCBnbG9iYWwgcXVldWUgZW50cmllcyBmcm9tIHRoZSBpbmRleCBkYlxuICAgKiBAcGFyYW0gICAgICB7c3RyaW5nfSAgZGlzcGF0Y2hlcklkICBUaGUgZGlzcGF0Y2hlciBpZGVudGlmaWVyXG4gICAqIEByZXR1cm4gICAgIHtQcm9taXNlPEFycmF5PGFueT4+fSAgZ2xvYmFsIHF1ZXVlIGVudHJ5IGFycmF5XG4gICAqL1xuICBhc3luYyBsb2FkKGRpc3BhdGNoZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcblxuICAgIGNvbnN0IGVudHJpZXMgPSA8YW55PmF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdGhpcy5nZXRPYmplY3RTdG9yZSgncmVhZG9ubHknKTtcbiAgICAgIGxldCByZXF1ZXN0O1xuXG4gICAgICBpZiAoZGlzcGF0Y2hlcklkID09PSAnKicpIHtcbiAgICAgICAgaWYgKG9iamVjdFN0b3JlLmdldEFsbCkge1xuICAgICAgICAgIHJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXRBbGwoKTtcbiAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudCkgPT4gcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcG9seWZpbGwgZ2V0QWxsIGZvciBlZGdlIC8gaWVcbiAgICAgICAgICBjb25zdCByZXN1bHRzID0gWyBdO1xuICAgICAgICAgIHJlcXVlc3QgPSBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKCk7XG4gICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGN1cnNvci52YWx1ZSk7XG4gICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0KGRpc3BhdGNoZXJJZCk7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PlxuICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQgJiYgcmVxdWVzdC5yZXN1bHQuZW50cmllcyA/IHJlcXVlc3QucmVzdWx0LmVudHJpZXMgOiB7IH0pO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBlbnRyaWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3JlIGZvciB0aGUgY3VycmVudCB1c2VyIGl0cyBjdXJyZW50IGdsb2JhbCBlbnRyaWVzIHRvIHRoZSBxdWV1ZSBkYi4gIEl0IGxvYWRzIGFsbCBjdXJyZW50XG4gICAqIHNhdmVkIGVudHJpZXMgYW5kIGNoZWNrcyBmb3IgdGhlIHByb3ZpZGVkIGVudHJ5SWQuIElmIHRoZSBlbnRyeUlkIGlzIGVtcHR5LCB0aGUgZW50cnkgd2lsbCBiZVxuICAgKiBkZWxldGVkLlxuICAgKlxuICAgKiBAcGFyYW0gICAgICB7c3RyaW5nfSAgZGlzcGF0Y2hlcklkICBkaXNwYXRjaGVyIGlkZW50aWZpZXIgKGRhcHBFbnMgKyBkaXNwYXRjaGVyIG5hbWUpXG4gICAqIEBwYXJhbSAgICAgIHtzdHJpbmd9ICBlbnRyeUlkICAgICAgIHJhbmRvbSBpZCBzdHJpbmdcbiAgICogQHBhcmFtICAgICAge2FueX0gICAgIGRhdGEgICAgICAgICAgYW55IGRhdGEgdGhhdCBzaG91bGQgYmUgc2F2ZWQsIGxlYXZlIGVtcHR5IHRvIHJlbW92ZSB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlcbiAgICogQHJldHVybiAgICAge1Byb21pc2U8YW55Pn0gIG9iamVjdFN0b3JlLnB1dCByZXN1bHRcbiAgICovXG4gIGFzeW5jIHNhdmUoZGlzcGF0Y2hlcklkOiBzdHJpbmcsIGVudHJ5SWQ6IHN0cmluZywgZGF0YT86IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gbG9hZCBwcmV2aW91cyBlbnRyaWVzXG4gICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdGhpcy5sb2FkKGRpc3BhdGNoZXJJZCk7XG5cbiAgICAgIC8vIGNyZWF0ZSBvYmplY3RTdG9yZSB0byBkZWxldGUgb3IgcHV0IGRhdGFcbiAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdGhpcy5nZXRPYmplY3RTdG9yZSgncmVhZHdyaXRlJyk7XG4gICAgICBsZXQgcmVxdWVzdDtcblxuICAgICAgLy8gaWYgbm8gZGF0YSB3YXMgYXBwbGllZCwgZGVsZXRlIHRoZSBkYXRhXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgZGVsZXRlIGVudHJpZXNbZW50cnlJZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnRyaWVzW2VudHJ5SWRdID0gZGF0YTtcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVudHJpZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZGVsZXRlKGRpc3BhdGNoZXJJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0ID0gb2JqZWN0U3RvcmUucHV0KHtcbiAgICAgICAgICBkaXNwYXRjaGVySWQ6IGRpc3BhdGNoZXJJZCxcbiAgICAgICAgICBlbnRyaWVzOiBlbnRyaWVzIHx8IHsgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgfSk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Queue.ts\n");

/***/ }),

/***/ "./src/bccUtils.ts":
/*!*************************!*\
  !*** ./src/bccUtils.ts ***!
  \*************************/
/*! exports provided: getUserAlias, getContacts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUserAlias\", function() { return getUserAlias; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getContacts\", function() { return getContacts; });\n/* harmony import */ var _evan_network_api_blockchain_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @evan.network/api-blockchain-core */ \"@evan.network/api-blockchain-core\");\n/* harmony import */ var _evan_network_api_blockchain_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_evan_network_api_blockchain_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n/**\n * Returns the users alias, depending on it's profile type. If it's an old profile, resolve alias\n * from address book.\n *\n * @param      {bccProfile}  profile         profile to load the data for\n * @param      {any}         accountDetails  already laoded accountDetails, to prevent duplicated\n *                                           loading\n * @param      {any}         registration    company registration data, to prevent duplicated data\n *                                           loading\n */\nfunction getUserAlias(profile, accountDetails, registration) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, _b, _c, ex_1, profileOwner, myProfile, addressBook, contact;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    _d.trys.push([0, 3, , 4]);\n                    _a = _utils__WEBPACK_IMPORTED_MODULE_1__[\"cloneDeep\"];\n                    _b = [_evan_network_api_blockchain_core__WEBPACK_IMPORTED_MODULE_0__[\"lodash\"]];\n                    _c = accountDetails;\n                    if (_c) return [3 /*break*/, 2];\n                    return [4 /*yield*/, profile.getProfileProperty('accountDetails')];\n                case 1:\n                    _c = (_d.sent());\n                    _d.label = 2;\n                case 2:\n                    accountDetails = _a.apply(void 0, _b.concat([_c || {}]));\n                    return [3 /*break*/, 4];\n                case 3:\n                    ex_1 = _d.sent();\n                    return [3 /*break*/, 4];\n                case 4:\n                    if (!(accountDetails && accountDetails.accountName)) return [3 /*break*/, 5];\n                    return [2 /*return*/, accountDetails.accountName];\n                case 5:\n                    profileOwner = profile.profileOwner;\n                    myProfile = new _evan_network_api_blockchain_core__WEBPACK_IMPORTED_MODULE_0__[\"Profile\"](__assign(__assign({}, profile.options), { profileOwner: profile.activeAccount, accountId: profile.activeAccount }));\n                    return [4 /*yield*/, myProfile.getAddressBook()];\n                case 6:\n                    addressBook = _d.sent();\n                    contact = addressBook.profile[profileOwner];\n                    return [2 /*return*/, contact ? contact.alias : profileOwner];\n            }\n        });\n    });\n}\n/**\n * Returns all contacts from current user addressbook\n *\n * @param {any} runtime\n * @param {boolean} unfiltered default \"false\", if true response containing own contact and test entries, as well.\n */\nfunction getContacts(runtime, unfiltered) {\n    if (unfiltered === void 0) { unfiltered = false; }\n    return __awaiter(this, void 0, void 0, function () {\n        var addressBook, contacts;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, runtime.profile.getAddressBook()];\n                case 1:\n                    addressBook = (_a.sent()).profile;\n                    contacts = Object.keys(addressBook).map(function (key) {\n                        return {\n                            'label': addressBook[key].alias,\n                            'value': key\n                        };\n                    });\n                    if (unfiltered) {\n                        return [2 /*return*/, contacts];\n                    }\n                    return [2 /*return*/, contacts.filter(function (entry) { return entry.value !== runtime.activeAccount && !/\\@/.test(entry.value); })];\n            }\n        });\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL2JjY1V0aWxzLnRzPzkyMGUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBaUJFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFdUQ7QUFDckI7QUFFcEM7Ozs7Ozs7OztHQVNHO0FBQ0ksU0FBZSxZQUFZLENBQUMsT0FBb0IsRUFBRSxjQUFvQixFQUFFLFlBQWtCOzs7Ozs7O29CQUU1RSxxREFBUzswQkFDeEIsd0VBQVU7b0JBQ1YsbUJBQWM7NEJBQWQsd0JBQWM7b0JBQUkscUJBQU0sT0FBTyxDQUFDLGtCQUFrQixDQUFDLGdCQUFnQixDQUFDOzswQkFBbEQsU0FBa0Q7OztvQkFGdEUsY0FBYyxHQUFHLDRCQUVmLE1BQXdFLEVBQUcsR0FDNUUsQ0FBQzs7Ozs7O3lCQUlBLGVBQWMsSUFBSSxjQUFjLENBQUMsV0FBVyxHQUE1Qyx3QkFBNEM7b0JBQzlDLHNCQUFPLGNBQWMsQ0FBQyxXQUFXLEVBQUM7O29CQUU1QixZQUFZLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztvQkFFcEMsU0FBUyxHQUFHLElBQUkseUVBQVcsdUJBQzVCLE9BQU8sQ0FBQyxPQUFPLEtBQ2xCLFlBQVksRUFBRSxPQUFPLENBQUMsYUFBYSxFQUNuQyxTQUFTLEVBQUUsT0FBTyxDQUFDLGFBQWEsSUFDaEMsQ0FBQztvQkFDaUIscUJBQU0sU0FBUyxDQUFDLGNBQWMsRUFBRTs7b0JBQTlDLFdBQVcsR0FBRyxTQUFnQztvQkFDOUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7b0JBRWxELHNCQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsWUFBWSxFQUFDOzs7O0NBRWpEO0FBRUQ7Ozs7O0dBS0c7QUFDSSxTQUFlLFdBQVcsQ0FBQyxPQUFZLEVBQUUsVUFBa0I7SUFBbEIsK0NBQWtCOzs7Ozt3QkFFM0MscUJBQU0sT0FBTyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUU7O29CQUFyRCxXQUFXLEdBQUcsQ0FBQyxTQUFzQyxDQUFDLENBQUMsT0FBTztvQkFFOUQsUUFBUSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQUc7d0JBQy9DLE9BQU87NEJBQ0wsT0FBTyxFQUFFLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLOzRCQUMvQixPQUFPLEVBQUUsR0FBRzt5QkFDYixDQUFDO29CQUNKLENBQUMsQ0FBQyxDQUFDO29CQUVILElBQUksVUFBVSxFQUFFO3dCQUNkLHNCQUFPLFFBQVEsRUFBQztxQkFDakI7b0JBRUQsc0JBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxlQUFLLElBQUksWUFBSyxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQWhFLENBQWdFLENBQUMsRUFBQzs7OztDQUNuRyIsImZpbGUiOiIuL3NyYy9iY2NVdGlscy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIENvcHlyaWdodCAoQykgMjAxOC1wcmVzZW50IGV2YW4gR21iSC5cblxuICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdFxuICB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSwgdmVyc2lvbiAzLFxuICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cblxuICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLlxuICBTZWUgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLyBvclxuICB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsXG4gIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BLCAwMjExMC0xMzAxIFVTQSwgb3IgZG93bmxvYWQgdGhlIGxpY2Vuc2UgZnJvbVxuICB0aGUgZm9sbG93aW5nIFVSTDogaHR0cHM6Ly9ldmFuLm5ldHdvcmsvbGljZW5zZS9cbiovXG5cbmltcG9ydCAqIGFzIGJjYyBmcm9tICdAZXZhbi5uZXR3b3JrL2FwaS1ibG9ja2NoYWluLWNvcmUnO1xuaW1wb3J0IHsgY2xvbmVEZWVwIH0gZnJvbSAnLi91dGlscyc7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdXNlcnMgYWxpYXMsIGRlcGVuZGluZyBvbiBpdCdzIHByb2ZpbGUgdHlwZS4gSWYgaXQncyBhbiBvbGQgcHJvZmlsZSwgcmVzb2x2ZSBhbGlhc1xuICogZnJvbSBhZGRyZXNzIGJvb2suXG4gKlxuICogQHBhcmFtICAgICAge2JjY1Byb2ZpbGV9ICBwcm9maWxlICAgICAgICAgcHJvZmlsZSB0byBsb2FkIHRoZSBkYXRhIGZvclxuICogQHBhcmFtICAgICAge2FueX0gICAgICAgICBhY2NvdW50RGV0YWlscyAgYWxyZWFkeSBsYW9kZWQgYWNjb3VudERldGFpbHMsIHRvIHByZXZlbnQgZHVwbGljYXRlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1xuICogQHBhcmFtICAgICAge2FueX0gICAgICAgICByZWdpc3RyYXRpb24gICAgY29tcGFueSByZWdpc3RyYXRpb24gZGF0YSwgdG8gcHJldmVudCBkdXBsaWNhdGVkIGRhdGFcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJBbGlhcyhwcm9maWxlOiBiY2MuUHJvZmlsZSwgYWNjb3VudERldGFpbHM/OiBhbnksIHJlZ2lzdHJhdGlvbj86IGFueSkge1xuICB0cnkge1xuICAgIGFjY291bnREZXRhaWxzID0gY2xvbmVEZWVwKFxuICAgICAgYmNjLmxvZGFzaCxcbiAgICAgIGFjY291bnREZXRhaWxzIHx8IGF3YWl0IHByb2ZpbGUuZ2V0UHJvZmlsZVByb3BlcnR5KCdhY2NvdW50RGV0YWlscycpIHx8IHsgfVxuICAgICk7XG4gIH0gY2F0Y2ggKGV4KSB7IH1cblxuICAvLyBsb2FkIGFsaWFzIGZyb20gYWRkcmVzc2Jvb2ssIHdoZW4gaXQncyBub3QgYXZhaWxhYmxlXG4gIGlmIChhY2NvdW50RGV0YWlscyAmJiBhY2NvdW50RGV0YWlscy5hY2NvdW50TmFtZSkge1xuICAgIHJldHVybiBhY2NvdW50RGV0YWlscy5hY2NvdW50TmFtZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcm9maWxlT3duZXIgPSBwcm9maWxlLnByb2ZpbGVPd25lcjtcbiAgICAvLyBsb2FkIGFkZHJlc3Nib29rIGluZm9cbiAgICBjb25zdCBteVByb2ZpbGUgPSBuZXcgYmNjLlByb2ZpbGUoe1xuICAgICAgLi4ucHJvZmlsZS5vcHRpb25zLFxuICAgICAgcHJvZmlsZU93bmVyOiBwcm9maWxlLmFjdGl2ZUFjY291bnQsXG4gICAgICBhY2NvdW50SWQ6IHByb2ZpbGUuYWN0aXZlQWNjb3VudCxcbiAgICB9KTtcbiAgICBjb25zdCBhZGRyZXNzQm9vayA9IGF3YWl0IG15UHJvZmlsZS5nZXRBZGRyZXNzQm9vaygpO1xuICAgIGNvbnN0IGNvbnRhY3QgPSBhZGRyZXNzQm9vay5wcm9maWxlW3Byb2ZpbGVPd25lcl07XG5cbiAgICByZXR1cm4gY29udGFjdCA/IGNvbnRhY3QuYWxpYXMgOiBwcm9maWxlT3duZXI7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFsbCBjb250YWN0cyBmcm9tIGN1cnJlbnQgdXNlciBhZGRyZXNzYm9va1xuICpcbiAqIEBwYXJhbSB7YW55fSBydW50aW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVuZmlsdGVyZWQgZGVmYXVsdCBcImZhbHNlXCIsIGlmIHRydWUgcmVzcG9uc2UgY29udGFpbmluZyBvd24gY29udGFjdCBhbmQgdGVzdCBlbnRyaWVzLCBhcyB3ZWxsLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGFjdHMocnVudGltZTogYW55LCB1bmZpbHRlcmVkID0gZmFsc2UpIHtcbiAgLy8gbG9hZCB0aGUgY29udGFjdHMgZm9yIHRoZSBjdXJyZW50IHVzZXIsIHNvIHdlIGNhbiBkaXNwbGF5IGNvcnJlY3QgY29udGFjdCBhbGlhc1xuICBjb25zdCBhZGRyZXNzQm9vayA9IChhd2FpdCBydW50aW1lLnByb2ZpbGUuZ2V0QWRkcmVzc0Jvb2soKSkucHJvZmlsZTtcblxuICBjb25zdCBjb250YWN0cyA9IE9iamVjdC5rZXlzKGFkZHJlc3NCb29rKS5tYXAoa2V5ID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2xhYmVsJzogYWRkcmVzc0Jvb2tba2V5XS5hbGlhcyxcbiAgICAgICd2YWx1ZSc6IGtleVxuICAgIH07XG4gIH0pO1xuXG4gIGlmICh1bmZpbHRlcmVkKSB7XG4gICAgcmV0dXJuIGNvbnRhY3RzO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRhY3RzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS52YWx1ZSAhPT0gcnVudGltZS5hY3RpdmVBY2NvdW50ICYmICEvXFxALy50ZXN0KGVudHJ5LnZhbHVlKSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/bccUtils.ts\n");

/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/*! exports provided: agentUrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"agentUrl\", function() { return agentUrl; });\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\n/**\n * base url of the evan.network smart agents server\n */\nvar agentUrl = 'https://agents.test.evan.network';\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL2NvbmZpZy50cz9kNzBiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFpQkU7QUFFRjs7R0FFRztBQUNJLElBQU0sUUFBUSxHQUFHLGtDQUFrQyxDQUFDIiwiZmlsZSI6Ii4vc3JjL2NvbmZpZy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIENvcHlyaWdodCAoQykgMjAxOC1wcmVzZW50IGV2YW4gR21iSC5cblxuICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdFxuICB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSwgdmVyc2lvbiAzLFxuICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cblxuICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLlxuICBTZWUgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLyBvclxuICB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsXG4gIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BLCAwMjExMC0xMzAxIFVTQSwgb3IgZG93bmxvYWQgdGhlIGxpY2Vuc2UgZnJvbVxuICB0aGUgZm9sbG93aW5nIFVSTDogaHR0cHM6Ly9ldmFuLm5ldHdvcmsvbGljZW5zZS9cbiovXG5cbi8qKlxuICogYmFzZSB1cmwgb2YgdGhlIGV2YW4ubmV0d29yayBzbWFydCBhZ2VudHMgc2VydmVyXG4gKi9cbmV4cG9ydCBjb25zdCBhZ2VudFVybCA9ICdodHRwczovL2FnZW50cy50ZXN0LmV2YW4ubmV0d29yayc7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/config.ts\n");

/***/ }),

/***/ "./src/index.scss":
/*!************************!*\
  !*** ./src/index.scss ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL2luZGV4LnNjc3M/MmEwYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIuL3NyYy9pbmRleC5zY3NzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.scss\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: EvanQueue, Dispatcher, DispatcherInstance, FileHandler, bccUtils, startDApp, agentUrl, deepEqual, cloneDeep */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"startDApp\", function() { return startDApp; });\n/* harmony import */ var _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @evan.network/ui-dapp-browser */ \"@evan.network/ui-dapp-browser\");\n/* harmony import */ var _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Queue */ \"./src/Queue.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"EvanQueue\", function() { return _Queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n/* harmony import */ var _Dispatcher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Dispatcher */ \"./src/Dispatcher.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Dispatcher\", function() { return _Dispatcher__WEBPACK_IMPORTED_MODULE_2__[\"Dispatcher\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DispatcherInstance\", function() { return _Dispatcher__WEBPACK_IMPORTED_MODULE_2__[\"DispatcherInstance\"]; });\n\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.scss */ \"./src/index.scss\");\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_index_scss__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _Files__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Files */ \"./src/Files.ts\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"FileHandler\", function() { return _Files__WEBPACK_IMPORTED_MODULE_4__; });\n/* harmony import */ var _bccUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./bccUtils */ \"./src/bccUtils.ts\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"bccUtils\", function() { return _bccUtils__WEBPACK_IMPORTED_MODULE_5__; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"agentUrl\", function() { return _config__WEBPACK_IMPORTED_MODULE_6__[\"agentUrl\"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"deepEqual\", function() { return _utils__WEBPACK_IMPORTED_MODULE_7__[\"deepEqual\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"cloneDeep\", function() { return _utils__WEBPACK_IMPORTED_MODULE_7__[\"cloneDeep\"]; });\n\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n// map the original ui path to ui.libs\n\n_evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__[\"System\"].map['@evan.network/ui'] = \"ui.libs.\" + _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__[\"getDomainName\"]() + \"!dapp-content\";\n\n\n\n\n\n\n\n\n/**\n * if the ui.evan dapp is loaded as an normal dapp, show the style preview.\n *\n * @param      {any}  container  html container where the dapp should be rendered to\n * @param      {any}  dbcpName   dbcp name of the dapp\n */\nfunction startDApp(container, dbcpName, dappEns, dappBaseUrl) {\n    return __awaiter(this, void 0, void 0, function () {\n        var xmlhttp;\n        return __generator(this, function (_a) {\n            xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() :\n                new window.ActiveXObject('Microsoft.XMLHTTP');\n            xmlhttp.onreadystatechange = function () {\n                if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {\n                    container.innerHTML = xmlhttp.responseText;\n                    // remove the loading screen\n                    _evan_network_ui_dapp_browser__WEBPACK_IMPORTED_MODULE_0__[\"loading\"].finishDAppLoading();\n                }\n            };\n            xmlhttp.open('GET', dappBaseUrl + \"/index.html\", false);\n            xmlhttp.send();\n            return [2 /*return*/];\n        });\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL2luZGV4LnRzP2ZmYjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztFQWlCRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVGLHNDQUFzQztBQUN1QjtBQUM3RCxvRUFBa0IsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsR0FBRyxhQUFZLDJFQUF5QixFQUFFLGtCQUFnQixDQUFDO0FBRXJFO0FBQzhCO0FBQ3hDO0FBQ2lCO0FBQ0E7QUFFZDtBQUNEO0FBQ3FEO0FBRTdFOzs7OztHQUtHO0FBQ0ksU0FBZSxTQUFTLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsV0FBVzs7OztZQUNuRSxPQUFPLEdBQVMsTUFBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxjQUFjLEVBQUUsQ0FBQyxDQUFDO2dCQUNqRSxJQUFVLE1BQU8sQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQztZQUV2RCxPQUFPLENBQUMsa0JBQWtCLEdBQUc7Z0JBQzNCLElBQUksT0FBTyxDQUFDLFVBQVUsS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxHQUFHLEVBQUU7b0JBQ3RELFNBQVMsQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztvQkFDM0MsNEJBQTRCO29CQUM1QixxRUFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2lCQUN6QztZQUNILENBQUMsQ0FBQztZQUVGLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFNLFdBQVcsZ0JBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUMxRCxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7Ozs7Q0FDaEIiLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICBDb3B5cmlnaHQgKEMpIDIwMTgtcHJlc2VudCBldmFuIEdtYkguXG5cbiAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXRcbiAgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UsIHZlcnNpb24gMyxcbiAgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXG5cbiAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS5cbiAgU2VlIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8gb3JcbiAgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgSW5jLiwgNTEgRnJhbmtsaW4gU3RyZWV0LFxuICBGaWZ0aCBGbG9vciwgQm9zdG9uLCBNQSwgMDIxMTAtMTMwMSBVU0EsIG9yIGRvd25sb2FkIHRoZSBsaWNlbnNlIGZyb21cbiAgdGhlIGZvbGxvd2luZyBVUkw6IGh0dHBzOi8vZXZhbi5uZXR3b3JrL2xpY2Vuc2UvXG4qL1xuXG4vLyBtYXAgdGhlIG9yaWdpbmFsIHVpIHBhdGggdG8gdWkubGlic1xuaW1wb3J0ICogYXMgZGFwcEJyb3dzZXIgZnJvbSAnQGV2YW4ubmV0d29yay91aS1kYXBwLWJyb3dzZXInO1xuZGFwcEJyb3dzZXIuU3lzdGVtLm1hcFsnQGV2YW4ubmV0d29yay91aSddID0gYHVpLmxpYnMuJHsgZGFwcEJyb3dzZXIuZ2V0RG9tYWluTmFtZSgpIH0hZGFwcC1jb250ZW50YDtcblxuaW1wb3J0IEV2YW5RdWV1ZSBmcm9tICcuL1F1ZXVlJztcbmltcG9ydCB7IERpc3BhdGNoZXIsIERpc3BhdGNoZXJJbnN0YW5jZSB9IGZyb20gJy4vRGlzcGF0Y2hlcic7XG5pbXBvcnQgJy4vaW5kZXguc2Nzcyc7XG5pbXBvcnQgKiBhcyBGaWxlSGFuZGxlciBmcm9tICcuL0ZpbGVzJztcbmltcG9ydCAqIGFzIGJjY1V0aWxzIGZyb20gJy4vYmNjVXRpbHMnO1xuXG5leHBvcnQgKiBmcm9tICcuL2NvbmZpZyc7XG5leHBvcnQgKiBmcm9tICcuL3V0aWxzJztcbmV4cG9ydCB7IEV2YW5RdWV1ZSwgRGlzcGF0Y2hlciwgRGlzcGF0Y2hlckluc3RhbmNlLCBGaWxlSGFuZGxlciwgYmNjVXRpbHMsIH07XG5cbi8qKlxuICogaWYgdGhlIHVpLmV2YW4gZGFwcCBpcyBsb2FkZWQgYXMgYW4gbm9ybWFsIGRhcHAsIHNob3cgdGhlIHN0eWxlIHByZXZpZXcuXG4gKlxuICogQHBhcmFtICAgICAge2FueX0gIGNvbnRhaW5lciAgaHRtbCBjb250YWluZXIgd2hlcmUgdGhlIGRhcHAgc2hvdWxkIGJlIHJlbmRlcmVkIHRvXG4gKiBAcGFyYW0gICAgICB7YW55fSAgZGJjcE5hbWUgICBkYmNwIG5hbWUgb2YgdGhlIGRhcHBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0REFwcChjb250YWluZXIsIGRiY3BOYW1lLCBkYXBwRW5zLCBkYXBwQmFzZVVybCkge1xuICBsZXQgeG1saHR0cCA9ICg8YW55PndpbmRvdykuWE1MSHR0cFJlcXVlc3QgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6XG4gICAgbmV3ICg8YW55PndpbmRvdykuQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKTtcblxuICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT09IDQgJiYgeG1saHR0cC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IHhtbGh0dHAucmVzcG9uc2VUZXh0O1xuICAgICAgLy8gcmVtb3ZlIHRoZSBsb2FkaW5nIHNjcmVlblxuICAgICAgZGFwcEJyb3dzZXIubG9hZGluZy5maW5pc2hEQXBwTG9hZGluZygpO1xuICAgIH1cbiAgfTtcblxuICB4bWxodHRwLm9wZW4oJ0dFVCcsIGAkeyBkYXBwQmFzZVVybCB9L2luZGV4Lmh0bWxgLCBmYWxzZSk7XG4gIHhtbGh0dHAuc2VuZCgpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: deepEqual, cloneDeep */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepEqual\", function() { return deepEqual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cloneDeep\", function() { return cloneDeep; });\n/*\n  Copyright (C) 2018-present evan GmbH.\n\n  This program is free software: you can redistribute it and/or modify it\n  under the terms of the GNU Affero General Public License, version 3,\n  as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n  See the GNU Affero General Public License for more details.\n\n  You should have received a copy of the GNU Affero General Public License\n  along with this program. If not, see http://www.gnu.org/licenses/ or\n  write to the Free Software Foundation, Inc., 51 Franklin Street,\n  Fifth Floor, Boston, MA, 02110-1301 USA, or download the license from\n  the following URL: https://evan.network/license/\n*/\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n// class names for file types that does not be checked for deep equal check\nvar fileTypes = [\n    Uint8Array,\n    Uint16Array,\n    Uint32Array,\n    Uint8Array,\n    ArrayBuffer\n];\n/**\n * Deep equal for objects (https://github.com/epoberezkin/fast-deep-equal/blob/master/index.js)\n *\n * @param      {any}     a          object a\n * @param      {any}     b          object b\n */\nfunction deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a && b && typeof a === 'object' && typeof b === 'object') {\n        // do not check equality for files, it will cause performance issues\n        if (fileTypes.indexOf(a.constructor) !== -1) {\n            return true;\n        }\n        var arrA = isArray(a), arrB = isArray(b), i = void 0, length_1, key = void 0;\n        if (arrA && arrB) {\n            length_1 = a.length;\n            if (length_1 !== b.length) {\n                return false;\n            }\n            for (i = length_1; i-- !== 0;) {\n                if (!deepEqual(a[i], b[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        if (arrA !== arrB) {\n            return false;\n        }\n        var dateA = a instanceof Date, dateB = b instanceof Date;\n        if (dateA !== dateB) {\n            return false;\n        }\n        if (dateA && dateB) {\n            return a.getTime() === b.getTime();\n        }\n        var regexpA = a instanceof RegExp, regexpB = b instanceof RegExp;\n        if (regexpA !== regexpB) {\n            return false;\n        }\n        if (regexpA && regexpB) {\n            return a.toString() === b.toString();\n        }\n        var keys = keyList(a);\n        length_1 = keys.length;\n        if (length_1 !== keyList(b).length) {\n            return false;\n        }\n        for (i = length_1; i-- !== 0;) {\n            if (!hasProp.call(b, keys[i])) {\n                return false;\n            }\n        }\n        for (i = length_1; i-- !== 0;) {\n            key = keys[i];\n            if (!deepEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n/**\n * Lodash cloneDeep wrapper including ignoreFiles flag.\n *\n * @param      {any}  lodash       lodash instance\n * @param      {any}  obj          object that should be cloned\n * @param      {any}  ignoreFiles  should file entries be ignored?\n */\nfunction cloneDeep(lodash, obj, ignoreFiles) {\n    if (ignoreFiles === void 0) { ignoreFiles = false; }\n    if (ignoreFiles) {\n        return lodash.cloneDeepWith(obj, function (value) {\n            // value.__proto__.constructor.toString().indexOf('Buffer') !== -1\n            if (value && (value._isBuffer || fileTypes.indexOf(value.constructor) !== -1)) {\n                return value;\n            }\n        });\n    }\n    else {\n        return lodash.cloneDeep(obj);\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzLy4vc3JjL3V0aWxzLnRzPzdkZGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBaUJFO0FBQ0YsSUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztBQUM5QixJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQzVCLElBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDO0FBRWhELDJFQUEyRTtBQUMzRSxJQUFNLFNBQVMsR0FBRztJQUNoQixVQUFVO0lBQ1YsV0FBVztJQUNYLFdBQVc7SUFDWCxVQUFVO0lBQ1YsV0FBVztDQUNaLENBQUM7QUFFRjs7Ozs7R0FLRztBQUNJLFNBQVMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUNYLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsRUFBRTtRQUM1RCxvRUFBb0U7UUFDcEUsSUFBSSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUMzQyxPQUFPLElBQUksQ0FBQztTQUNiO1FBRUQsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUNqQixJQUFJLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUNqQixDQUFDLFdBQ0QsUUFBTSxFQUNOLEdBQUcsVUFBQztRQUVSLElBQUksSUFBSSxJQUFJLElBQUksRUFBRTtZQUNoQixRQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUNsQixJQUFJLFFBQU0sS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFO2dCQUN2QixPQUFPLEtBQUssQ0FBQzthQUNkO1lBRUQsS0FBSyxDQUFDLEdBQUcsUUFBTSxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRztnQkFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQzFCLE9BQU8sS0FBSyxDQUFDO2lCQUNkO2FBQ0Y7WUFFRCxPQUFPLElBQUksQ0FBQztTQUNiO1FBRUQsSUFBSSxJQUFJLEtBQUssSUFBSSxFQUFFO1lBQ2pCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxJQUFJLEtBQUssR0FBRyxDQUFDLFlBQVksSUFBSSxFQUN6QixLQUFLLEdBQUcsQ0FBQyxZQUFZLElBQUksQ0FBQztRQUM5QixJQUFJLEtBQUssS0FBSyxLQUFLLEVBQUU7WUFDbkIsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUksS0FBSyxJQUFJLEtBQUssRUFBRTtZQUNsQixPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDcEM7UUFFRCxJQUFJLE9BQU8sR0FBRyxDQUFDLFlBQVksTUFBTSxFQUM3QixPQUFPLEdBQUcsQ0FBQyxZQUFZLE1BQU0sQ0FBQztRQUNsQyxJQUFJLE9BQU8sS0FBSyxPQUFPLEVBQUU7WUFDdkIsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUNELElBQUksT0FBTyxJQUFJLE9BQU8sRUFBRTtZQUN0QixPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDdEM7UUFFRCxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsUUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFFckIsSUFBSSxRQUFNLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUNoQyxPQUFPLEtBQUssQ0FBQztTQUNkO1FBRUQsS0FBSyxDQUFDLEdBQUcsUUFBTSxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRztZQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQzdCLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7U0FDRjtRQUVELEtBQUssQ0FBQyxHQUFHLFFBQU0sRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUc7WUFDM0IsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNkLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUM5QixPQUFPLEtBQUssQ0FBQzthQUNkO1NBQ0Y7UUFFRCxPQUFPLElBQUksQ0FBQztLQUNiO0lBRUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDNUIsQ0FBQztBQUVEOzs7Ozs7R0FNRztBQUNJLFNBQVMsU0FBUyxDQUFDLE1BQVcsRUFBRSxHQUFRLEVBQUUsV0FBbUI7SUFBbkIsaURBQW1CO0lBQ2xFLElBQUksV0FBVyxFQUFFO1FBQ2YsT0FBTyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxVQUFDLEtBQVU7WUFDMUMsa0VBQWtFO1lBQ2xFLElBQUksS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUM3RSxPQUFPLEtBQUssQ0FBQzthQUNkO1FBQ0gsQ0FBQyxDQUFDLENBQUM7S0FDSjtTQUFNO1FBQ0wsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQzlCO0FBQ0gsQ0FBQyIsImZpbGUiOiIuL3NyYy91dGlscy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIENvcHlyaWdodCAoQykgMjAxOC1wcmVzZW50IGV2YW4gR21iSC5cblxuICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdFxuICB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSwgdmVyc2lvbiAzLFxuICBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cblxuICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLlxuICBTZWUgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLyBvclxuICB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsXG4gIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BLCAwMjExMC0xMzAxIFVTQSwgb3IgZG93bmxvYWQgdGhlIGxpY2Vuc2UgZnJvbVxuICB0aGUgZm9sbG93aW5nIFVSTDogaHR0cHM6Ly9ldmFuLm5ldHdvcmsvbGljZW5zZS9cbiovXG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmNvbnN0IGtleUxpc3QgPSBPYmplY3Qua2V5cztcbmNvbnN0IGhhc1Byb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vLyBjbGFzcyBuYW1lcyBmb3IgZmlsZSB0eXBlcyB0aGF0IGRvZXMgbm90IGJlIGNoZWNrZWQgZm9yIGRlZXAgZXF1YWwgY2hlY2tcbmNvbnN0IGZpbGVUeXBlcyA9IFtcbiAgVWludDhBcnJheSxcbiAgVWludDE2QXJyYXksXG4gIFVpbnQzMkFycmF5LFxuICBVaW50OEFycmF5LFxuICBBcnJheUJ1ZmZlclxuXTtcblxuLyoqXG4gKiBEZWVwIGVxdWFsIGZvciBvYmplY3RzIChodHRwczovL2dpdGh1Yi5jb20vZXBvYmVyZXpraW4vZmFzdC1kZWVwLWVxdWFsL2Jsb2IvbWFzdGVyL2luZGV4LmpzKVxuICpcbiAqIEBwYXJhbSAgICAgIHthbnl9ICAgICBhICAgICAgICAgIG9iamVjdCBhXG4gKiBAcGFyYW0gICAgICB7YW55fSAgICAgYiAgICAgICAgICBvYmplY3QgYlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChhICYmIGIgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgIC8vIGRvIG5vdCBjaGVjayBlcXVhbGl0eSBmb3IgZmlsZXMsIGl0IHdpbGwgY2F1c2UgcGVyZm9ybWFuY2UgaXNzdWVzXG4gICAgaWYgKGZpbGVUeXBlcy5pbmRleE9mKGEuY29uc3RydWN0b3IpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGFyckEgPSBpc0FycmF5KGEpXG4gICAgICAsIGFyckIgPSBpc0FycmF5KGIpXG4gICAgICAsIGlcbiAgICAgICwgbGVuZ3RoXG4gICAgICAsIGtleTtcblxuICAgIGlmIChhcnJBICYmIGFyckIpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVtpXSwgYltpXSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGFyckEgIT09IGFyckIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgZGF0ZUEgPSBhIGluc3RhbmNlb2YgRGF0ZVxuICAgICAgLCBkYXRlQiA9IGIgaW5zdGFuY2VvZiBEYXRlO1xuICAgIGlmIChkYXRlQSAhPT0gZGF0ZUIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGF0ZUEgJiYgZGF0ZUIpIHtcbiAgICAgIHJldHVybiBhLmdldFRpbWUoKSA9PT0gYi5nZXRUaW1lKCk7XG4gICAgfVxuXG4gICAgbGV0IHJlZ2V4cEEgPSBhIGluc3RhbmNlb2YgUmVnRXhwXG4gICAgICAsIHJlZ2V4cEIgPSBiIGluc3RhbmNlb2YgUmVnRXhwO1xuICAgIGlmIChyZWdleHBBICE9PSByZWdleHBCKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChyZWdleHBBICYmIHJlZ2V4cEIpIHtcbiAgICAgIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBsZXQga2V5cyA9IGtleUxpc3QoYSk7XG4gICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cbiAgICBpZiAobGVuZ3RoICE9PSBrZXlMaXN0KGIpLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgaWYgKCFoYXNQcm9wLmNhbGwoYiwga2V5c1tpXSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuXG4vKipcbiAqIExvZGFzaCBjbG9uZURlZXAgd3JhcHBlciBpbmNsdWRpbmcgaWdub3JlRmlsZXMgZmxhZy5cbiAqXG4gKiBAcGFyYW0gICAgICB7YW55fSAgbG9kYXNoICAgICAgIGxvZGFzaCBpbnN0YW5jZVxuICogQHBhcmFtICAgICAge2FueX0gIG9iaiAgICAgICAgICBvYmplY3QgdGhhdCBzaG91bGQgYmUgY2xvbmVkXG4gKiBAcGFyYW0gICAgICB7YW55fSAgaWdub3JlRmlsZXMgIHNob3VsZCBmaWxlIGVudHJpZXMgYmUgaWdub3JlZD9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVlcChsb2Rhc2g6IGFueSwgb2JqOiBhbnksIGlnbm9yZUZpbGVzID0gZmFsc2UpIHtcbiAgaWYgKGlnbm9yZUZpbGVzKSB7XG4gICAgcmV0dXJuIGxvZGFzaC5jbG9uZURlZXBXaXRoKG9iaiwgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIC8vIHZhbHVlLl9fcHJvdG9fXy5jb25zdHJ1Y3Rvci50b1N0cmluZygpLmluZGV4T2YoJ0J1ZmZlcicpICE9PSAtMVxuICAgICAgaWYgKHZhbHVlICYmICh2YWx1ZS5faXNCdWZmZXIgfHwgZmlsZVR5cGVzLmluZGV4T2YodmFsdWUuY29uc3RydWN0b3IpICE9PSAtMSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2Rhc2guY2xvbmVEZWVwKG9iaik7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils.ts\n");

/***/ }),

/***/ "@evan.network/api-blockchain-core":
/*!****************************************************!*\
  !*** external "@evan.network/api-blockchain-core" ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE__evan_network_api_blockchain_core__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzL2V4dGVybmFsIFwiQGV2YW4ubmV0d29yay9hcGktYmxvY2tjaGFpbi1jb3JlXCI/MDFmMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiJAZXZhbi5uZXR3b3JrL2FwaS1ibG9ja2NoYWluLWNvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfX2V2YW5fbmV0d29ya19hcGlfYmxvY2tjaGFpbl9jb3JlX187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@evan.network/api-blockchain-core\n");

/***/ }),

/***/ "@evan.network/ui-dapp-browser":
/*!************************************************!*\
  !*** external "@evan.network/ui-dapp-browser" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE__evan_network_ui_dapp_browser__;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91aS5saWJzLmpzL2V4dGVybmFsIFwiQGV2YW4ubmV0d29yay91aS1kYXBwLWJyb3dzZXJcIj9lMDI2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IkBldmFuLm5ldHdvcmsvdWktZGFwcC1icm93c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX19ldmFuX25ldHdvcmtfdWlfZGFwcF9icm93c2VyX187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@evan.network/ui-dapp-browser\n");

/***/ })

/******/ });
});
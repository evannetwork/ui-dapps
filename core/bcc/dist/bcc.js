(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.bcc = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(exports,"__esModule",{value:true});exports.nullAddress='0x0000000000000000000000000000000000000000';exports.nullBytes32='0x0000000000000000000000000000000000000000000000000000000000000000';function getEnvironment(_x){return _getEnvironment.apply(this,arguments);}function _getEnvironment(){_getEnvironment=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(web3){var chainId;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return web3.eth.net.getId();case 2:chainId=_context.sent;return _context.abrupt("return",chainId===49262?'core':'testcore');case 4:case"end":return _context.stop();}}},_callee);}));return _getEnvironment.apply(this,arguments);}exports.getEnvironment=getEnvironment;function getSmartAgentAuthHeaders(_x2,_x3){return _getSmartAgentAuthHeaders.apply(this,arguments);}function _getSmartAgentAuthHeaders(){_getSmartAgentAuthHeaders=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(runtime,message){var messageToSign,hexMessage,paddedMessage,signature;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:messageToSign=message||"".concat(new Date().getTime());hexMessage=runtime.web3.utils.toHex(messageToSign);paddedMessage=hexMessage.length%2===1?hexMessage.replace('0x','0x0'):hexMessage;_context2.next=5;return runtime.signer.signMessage(runtime.activeAccount,paddedMessage);case 5:signature=_context2.sent;return _context2.abrupt("return",["EvanAuth ".concat(runtime.activeAccount),"EvanMessage ".concat(paddedMessage),"EvanSignedMessage ".concat(signature)].join(','));case 7:case"end":return _context2.stop();}}},_callee2);}));return _getSmartAgentAuthHeaders.apply(this,arguments);}exports.getSmartAgentAuthHeaders=getSmartAgentAuthHeaders;function obfuscate(text){return text?"".concat((0,_toConsumableArray2["default"])(Array(text.length-2)).map(function(){return'x';}).join('')).concat(text.substr(text.length-2)):text;}/* common-shake removed: exports.obfuscate = */ void obfuscate;function promisify(_x4,_x5){return _promisify.apply(this,arguments);}function _promisify(){_promisify=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(funThis,functionName){var _len,args,_key,functionArguments,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:for(_len=_args3.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=_args3[_key];}functionArguments=args.slice(0);return _context3.abrupt("return",new Promise(function(resolve,reject){try{functionArguments.push(function(error,result){if(error){reject(error);}else{resolve(result);}});funThis[functionName].apply(funThis,(0,_toConsumableArray2["default"])(functionArguments));}catch(ex){reject(ex.message);}}));case 3:case"end":return _context3.stop();}}},_callee3);}));return _promisify.apply(this,arguments);}/* common-shake removed: exports.promisify = */ void promisify;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67}],67:[function(require,module,exports){
module.exports = require("regenerator-runtime");

},{"regenerator-runtime":534}],65:[function(require,module,exports){
var arrayWithoutHoles = require("./arrayWithoutHoles");

var iterableToArray = require("./iterableToArray");

var nonIterableSpread = require("./nonIterableSpread");

function _toConsumableArray(arr) {
  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();
}

module.exports = _toConsumableArray;
},{"./arrayWithoutHoles":45,"./iterableToArray":56,"./nonIterableSpread":59}],55:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
},{}],47:[function(require,module,exports){
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;
},{}],2:[function(require,module,exports){
(function (process){
Object.defineProperty(exports,"__esModule",{value:true});var configCore={nameResolver:{ensAddress:process.env.ENS_ADDRESS||'0xc913ac6522344187bc9C88C9f9302b005500FfF9',ensResolver:process.env.ENS_RESOLVER||'0xa4cfA55769dc770F33402e3d669dc96c0e46c6c4',labels:{admin:'admin',businessCenterRoot:process.env.BC_ROOT||'testbc.evan',container:'container',dids:'dids',ensRoot:process.env.ENS_ROOT||'evan',eventhub:'eventhub',factory:'factory',index:'index',mailbox:'mailbox',profile:'profile',wallet:'wallet'},domains:{adminFactory:['admin','factory','ensRoot'],businessCenter:['businessCenterRoot'],containerFactory:['container','factory','ensRoot'],didRegistry:['dids','ensRoot'],eventhub:process.env.ENS_EVENTS||['eventhub','ensRoot'],factory:['factory','businessCenterRoot'],indexFactory:['index','factory','ensRoot'],mailbox:process.env.ENS_MAILBOX||['mailbox','ensRoot'],profile:process.env.ENS_PROFILES||['profile','ensRoot'],profileFactory:['profile','factory','ensRoot'],root:['ensRoot']}},smartAgents:{onboarding:{accountId:'0x063fB42cCe4CA5448D69b4418cb89E663E71A139'}},alwaysAutoGasLimit:10,ensRootOwner:'0xBa5384267A175542CB0E98a37875C106decDc3C3',ipfsConfig:{host:'ipfs.evan.network',port:'443',protocol:'https'}};exports.configCore=configCore;

}).call(this,require('_process'))

},{"_process":1221}],1221:[function(require,module,exports){
var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error('setTimeout has not been defined');}function defaultClearTimeout(){throw new Error('clearTimeout has not been defined');}(function(){try{if(typeof setTimeout==='function'){cachedSetTimeout=setTimeout;}else{cachedSetTimeout=defaultSetTimout;}}catch(e){cachedSetTimeout=defaultSetTimout;}try{if(typeof clearTimeout==='function'){cachedClearTimeout=clearTimeout;}else{cachedClearTimeout=defaultClearTimeout;}}catch(e){cachedClearTimeout=defaultClearTimeout;}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0);}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0);}try{return cachedSetTimeout(fun,0);}catch(e){try{return cachedSetTimeout.call(null,fun,0);}catch(e){return cachedSetTimeout.call(this,fun,0);}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker);}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker);}try{return cachedClearTimeout(marker);}catch(e){try{return cachedClearTimeout.call(null,marker);}catch(e){return cachedClearTimeout.call(this,marker);}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return;}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else{queueIndex=-1;}if(queue.length){drainQueue();}}function drainQueue(){if(draining){return;}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}queueIndex=-1;len=queue.length;}currentQueue=null;draining=false;runClearTimeout(timeout);}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue);}};function Item(fun,array){this.fun=fun;this.array=array;}Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[];};process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return'/';};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};

},{}],3:[function(require,module,exports){
(function (process){
Object.defineProperty(exports,"__esModule",{value:true});var configTestcore={nameResolver:{ensAddress:process.env.ENS_ADDRESS||'0x937bbC1d3874961CA38726E9cD07317ba81eD2e1',ensResolver:process.env.ENS_RESOLVER||'0xDC18774FA2E472D26aB91deCC4CDd20D9E82047e',labels:{admin:'admin',businessCenterRoot:process.env.BC_ROOT||'testbc.evan',container:'container',dids:'dids',ensRoot:process.env.ENS_ROOT||'evan',eventhub:'eventhub',factory:'factory',index:'index',mailbox:'mailbox',profile:'profile',wallet:'wallet'},domains:{adminFactory:['admin','factory','ensRoot'],businessCenter:['businessCenterRoot'],containerFactory:['container','factory','ensRoot'],didRegistry:['dids','ensRoot'],eventhub:process.env.ENS_EVENTS||['eventhub','ensRoot'],factory:['factory','businessCenterRoot'],indexFactory:['index','factory','ensRoot'],mailbox:process.env.ENS_MAILBOX||['mailbox','ensRoot'],profile:process.env.ENS_PROFILES||['profile','ensRoot'],profileFactory:['profile','factory','ensRoot'],root:['ensRoot']}},smartAgents:{onboarding:{accountId:'0x063fB42cCe4CA5448D69b4418cb89E663E71A139'}},alwaysAutoGasLimit:10,ensRootOwner:'0x4a6723fC5a926FA150bAeAf04bfD673B056Ba83D',ipfsConfig:{host:'ipfs.test.evan.network',port:'443',protocol:'https'}};exports.configTestcore=configTestcore;

}).call(this,require('_process'))

},{"_process":1221}],4:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var ContractState;(function(ContractState){ContractState[ContractState["Initial"]=0]="Initial";ContractState[ContractState["Error"]=1]="Error";ContractState[ContractState["Draft"]=2]="Draft";ContractState[ContractState["PendingApproval"]=3]="PendingApproval";ContractState[ContractState["Approved"]=4]="Approved";ContractState[ContractState["Active"]=5]="Active";ContractState[ContractState["VerifyTerminated"]=6]="VerifyTerminated";ContractState[ContractState["Terminated"]=7]="Terminated";})(ContractState=exports.ContractState||(exports.ContractState={}));;var ConsumerState;(function(ConsumerState){ConsumerState[ConsumerState["Initial"]=0]="Initial";ConsumerState[ConsumerState["Error"]=1]="Error";ConsumerState[ConsumerState["Draft"]=2]="Draft";ConsumerState[ConsumerState["Rejected"]=3]="Rejected";ConsumerState[ConsumerState["Active"]=4]="Active";ConsumerState[ConsumerState["Terminated"]=5]="Terminated";})(ConsumerState=exports.ConsumerState||(exports.ConsumerState={}));;var BaseContract=function(_dbcp_1$Logger){(0,_inherits2["default"])(BaseContract,_dbcp_1$Logger);function BaseContract(optionsInput){var _this;(0,_classCallCheck2["default"])(this,BaseContract);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(BaseContract).call(this,optionsInput));_this.options=optionsInput;return _this;}(0,_createClass2["default"])(BaseContract,[{key:"createUninitialized",value:function(){var _createUninitialized=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(factoryName,accountId,businessCenterDomain){var descriptionDfsHash,factoryAddress,factoryDomain,factory,businessCenterAddress,businessCenterContract,contractId,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:descriptionDfsHash=_args.length>3&&_args[3]!==undefined?_args[3]:'0x0000000000000000000000000000000000000000000000000000000000000000';if(!factoryName.startsWith('0x')){_context.next=5;break;}factoryAddress=factoryName;_context.next=9;break;case 5:if(factoryName.includes('.')){factoryDomain=factoryName;}else{factoryDomain=this.options.nameResolver.getDomainName(this.options.nameResolver.config.domains.factory,factoryName);}_context.next=8;return this.options.nameResolver.getAddress(factoryDomain);case 8:factoryAddress=_context.sent;case 9:if(factoryAddress){_context.next=11;break;}throw new Error("factory \"".concat(factoryName,"\" not found"));case 11:factory=this.options.loader.loadContract('BaseContractFactoryInterface',factoryAddress);if(!businessCenterDomain){_context.next=30;break;}_context.next=15;return this.options.nameResolver.getAddress(businessCenterDomain);case 15:businessCenterAddress=_context.sent;if(!(businessCenterAddress!=='0x0000000000000000000000000000000000000000')){_context.next=28;break;}_context.next=19;return this.options.loader.loadContract('BusinessCenterInterface',businessCenterAddress);case 19:businessCenterContract=_context.sent;_context.prev=20;_context.next=23;return this.options.executor.executeContractCall(businessCenterContract,'joinSchema');case 23:_context.next=28;break;case 25:_context.prev=25;_context.t0=_context["catch"](20);throw new Error('There is no Business Center domain exisiting');case 28:_context.next=31;break;case 30:businessCenterAddress='0x0000000000000000000000000000000000000000';case 31:_context.next=33;return this.options.executor.executeContractTransaction(factory,'createContract',{from:accountId,autoGas:1.1,event:{target:'BaseContractFactoryInterface',eventName:'ContractCreated'},getEventResult:function getEventResult(event,args){return args.newAddress;}},businessCenterAddress,accountId,descriptionDfsHash,this.options.nameResolver.config.ensAddress);case 33:contractId=_context.sent;return _context.abrupt("return",contractId.toString());case 35:case"end":return _context.stop();}}},_callee,this,[[20,25]]);}));function createUninitialized(_x,_x2,_x3){return _createUninitialized.apply(this,arguments);}return createUninitialized;}()},{key:"inviteToContract",value:function(){var _inviteToContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(businessCenterDomain,contract,inviterId,inviteeId){var baseContractInterface,businessCenterAddress;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:baseContractInterface=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('BaseContractInterface',contract);if(!businessCenterDomain){_context2.next=7;break;}_context2.next=4;return this.options.nameResolver.getAddress(businessCenterDomain);case 4:businessCenterAddress=_context2.sent;_context2.next=8;break;case 7:businessCenterAddress='0x0000000000000000000000000000000000000000';case 8:_context2.next=10;return this.options.executor.executeContractTransaction(baseContractInterface,'inviteConsumer',{from:inviterId,autoGas:1.1},inviteeId,businessCenterAddress);case 10:case"end":return _context2.stop();}}},_callee2,this);}));function inviteToContract(_x4,_x5,_x6,_x7){return _inviteToContract.apply(this,arguments);}return inviteToContract;}()},{key:"changeContractState",value:function(){var _changeContractState=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(contract,accountId,state){var baseContractInterface;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:baseContractInterface=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('BaseContractInterface',contract);_context3.next=3;return this.options.executor.executeContractTransaction(baseContractInterface,'changeContractState',{from:accountId,autoGas:1.1},state);case 3:case"end":return _context3.stop();}}},_callee3,this);}));function changeContractState(_x8,_x9,_x10){return _changeContractState.apply(this,arguments);}return changeContractState;}()},{key:"changeConsumerState",value:function(){var _changeConsumerState=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contract,accountId,consumerId,state){var baseContractInterface;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:baseContractInterface=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('BaseContractInterface',contract);_context4.next=3;return this.options.executor.executeContractTransaction(baseContractInterface,'changeConsumerState',{from:accountId,autoGas:1.1},consumerId,state);case 3:case"end":return _context4.stop();}}},_callee4,this);}));function changeConsumerState(_x11,_x12,_x13,_x14){return _changeConsumerState.apply(this,arguments);}return changeConsumerState;}()},{key:"removeFromContract",value:function(){var _removeFromContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(businessCenterDomain,contract,accountId,idToBeRemoved){var baseContractInterface,businessCenterAddress;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:baseContractInterface=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('BaseContractInterface',contract);if(!businessCenterDomain){_context5.next=7;break;}_context5.next=4;return this.options.nameResolver.getAddress(businessCenterDomain);case 4:businessCenterAddress=_context5.sent;_context5.next=8;break;case 7:businessCenterAddress='0x0000000000000000000000000000000000000000';case 8:_context5.next=10;return this.options.executor.executeContractTransaction(baseContractInterface,'removeConsumer',{from:accountId,autoGas:1.1},idToBeRemoved,businessCenterAddress);case 10:case"end":return _context5.stop();}}},_callee5,this);}));function removeFromContract(_x15,_x16,_x17,_x18){return _removeFromContract.apply(this,arguments);}return removeFromContract;}()}]);return BaseContract;}(dbcp_1.Logger);exports.BaseContract=BaseContract;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726}],726:[function(require,module,exports){
function __export(m){for(var p in m){if(!exports.hasOwnProperty(p))exports[p]=m[p];}}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./account-store"));__export(require("./common/logger"));__export(require("./config"));__export(require("./contracts/contract-loader"));__export(require("./contracts/executor"));__export(require("./contracts/signer-external"));__export(require("./contracts/signer-internal"));__export(require("./description"));__export(require("./dfs/ipfs"));__export(require("./encryption/crypto-provider"));__export(require("./encryption/key-provider"));__export(require("./encryption/unencrypted"));__export(require("./event-hub"));__export(require("./name-resolver"));__export(require("./runtime"));__export(require("./validator"));var utils_1=require("./common/utils");exports.obfuscate=utils_1.obfuscate;

},{"./account-store":711,"./common/logger":712,"./common/utils":713,"./config":714,"./contracts/contract-loader":715,"./contracts/executor":716,"./contracts/signer-external":717,"./contracts/signer-internal":718,"./description":719,"./dfs/ipfs":721,"./encryption/crypto-provider":722,"./encryption/key-provider":723,"./encryption/unencrypted":724,"./event-hub":725,"./name-resolver":727,"./runtime":728,"./validator":729}],66:[function(require,module,exports){
function _typeof(obj) {
  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

module.exports = _typeof;
},{}],48:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;
},{}],50:[function(require,module,exports){
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;
},{}],53:[function(require,module,exports){
function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

module.exports = _getPrototypeOf;
},{}],60:[function(require,module,exports){
var _typeof = require("../helpers/typeof");

var assertThisInitialized = require("./assertThisInitialized");

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return assertThisInitialized(self);
}

module.exports = _possibleConstructorReturn;
},{"../helpers/typeof":66,"./assertThisInitialized":46}],54:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}

module.exports = _inherits;
},{"./setPrototypeOf":62}],5:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _get2=_interopRequireDefault(require("@babel/runtime/helpers/get"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var crypto=require("crypto");var prottle=require("prottle");var dbcp_1=require("@evan.network/dbcp");var index_1=require("../../index");var requestWindowSize=10;var DataContract=function(_index_1$BaseContract){(0,_inherits2["default"])(DataContract,_index_1$BaseContract);function DataContract(optionsInput){var _this;(0,_classCallCheck2["default"])(this,DataContract);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(DataContract).call(this,optionsInput));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.encodingUnencryptedHash='hex';_this.cryptoAlgorithHashes='aesEcb';_this.options=optionsInput;if(!_this.options.defaultCryptoAlgo){_this.options.defaultCryptoAlgo='aes';}return _this;}(0,_createClass2["default"])(DataContract,[{key:"create",value:function(){var _create=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(factoryName,accountId,businessCenterDomain){var _this2=this;var contractDescription,allowConsumerInvite,sharingsHash,contractP,_ref2,_ref3,contract,sharingInfo,_args2=arguments;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:contractDescription=_args2.length>3&&_args2[3]!==undefined?_args2[3]:'0x0000000000000000000000000000000000000000000000000000000000000000';allowConsumerInvite=_args2.length>4&&_args2[4]!==undefined?_args2[4]:true;sharingsHash=_args2.length>5&&_args2[5]!==undefined?_args2[5]:null;contractP=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var descriptionHash,contractId,contractInterface,rootDomain;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:descriptionHash=(0,_typeof2["default"])(contractDescription)==='object'?'0x0000000000000000000000000000000000000000000000000000000000000000':contractDescription;_context.next=3;return(0,_get2["default"])((0,_getPrototypeOf2["default"])(DataContract.prototype),"createUninitialized",_this2).call(_this2,factoryName,accountId,businessCenterDomain,descriptionHash);case 3:contractId=_context.sent;contractInterface=_this2.options.loader.loadContract('DataContractInterface',contractId);rootDomain=_this2.options.nameResolver.namehash(_this2.options.nameResolver.getDomainName(_this2.options.nameResolver.config.domains.root));_context.next=8;return _this2.options.executor.executeContractTransaction(contractInterface,'init',{from:accountId,autoGas:1.1},rootDomain,allowConsumerInvite);case 8:return _context.abrupt("return",contractInterface);case 9:case"end":return _context.stop();}}},_callee);}))();_context2.next=6;return Promise.all([contractP,sharingsHash?{sharingsHash:sharingsHash}:this.createSharing(accountId)]);case 6:_ref2=_context2.sent;_ref3=(0,_slicedToArray2["default"])(_ref2,2);contract=_ref3[0];sharingInfo=_ref3[1];if(!(sharingInfo.sharingsHash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context2.next=13;break;}_context2.next=13;return this.options.executor.executeContractTransaction(contract,'setSharing',{from:accountId,autoGas:1.1},sharingInfo.sharingsHash);case 13:if(!((0,_typeof2["default"])(contractDescription)==='object')){_context2.next=16;break;}_context2.next=16;return this.options.description.setDescriptionToContract(contract.options.address,contractDescription,accountId);case 16:return _context2.abrupt("return",contract);case 17:case"end":return _context2.stop();}}},_callee2,this);}));function create(_x,_x2,_x3){return _create.apply(this,arguments);}return create;}()},{key:"createSharing",value:function(){var _createSharing=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(accountId){var skipUpload,cryptor,hashCryptor,_ref4,_ref5,contentKey,hashKey,blockNr,sharings,sharingsHash,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:skipUpload=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.options.defaultCryptoAlgo);hashCryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context3.next=5;return Promise.all([cryptor.generateKey(),hashCryptor.generateKey(),this.options.web3.eth.getBlockNumber()]);case 5:_ref4=_context3.sent;_ref5=(0,_slicedToArray2["default"])(_ref4,3);contentKey=_ref5[0];hashKey=_ref5[1];blockNr=_ref5[2];sharings={};_context3.next=13;return this.options.sharing.extendSharings(sharings,accountId,accountId,'*',blockNr,contentKey);case 13:_context3.next=15;return this.options.sharing.extendSharings(sharings,accountId,accountId,'*','hashKey',hashKey);case 15:sharingsHash=null;if(skipUpload){_context3.next=20;break;}_context3.next=19;return this.options.dfs.add('sharing',Buffer.from(JSON.stringify(sharings),this.encodingUnencrypted));case 19:sharingsHash=_context3.sent;case 20:return _context3.abrupt("return",{contentKey:contentKey,hashKey:hashKey,sharings:sharings,sharingsHash:sharingsHash});case 21:case"end":return _context3.stop();}}},_callee3,this);}));function createSharing(_x4){return _createSharing.apply(this,arguments);}return createSharing;}()},{key:"addListEntries",value:function(){var _addListEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contract,listName,values,accountId){var _this3=this;var dfsStorage,encryptedHashes,encryption,encryptionContext,dataContract,listNames,hashes,_ref6,_ref7,description,blockNr,keys,groupedKeys,_i,_Object$keys,key,ipfsFiles,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,value,encrypted,stateMd5,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dfsStorage=_args4.length>4&&_args4[4]!==undefined?_args4[4]:true;encryptedHashes=_args4.length>5&&_args4[5]!==undefined?_args4[5]:true;encryption=_args4.length>6&&_args4[6]!==undefined?_args4[6]:this.options.defaultCryptoAlgo;encryptionContext=_args4.length>7&&_args4[7]!==undefined?_args4[7]:accountId;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);listNames=Array.isArray(listName)?listName:[listName];hashes=values;if(dfsStorage){_context4.next=16;break;}if(!encryptedHashes){_context4.next=12;break;}_context4.next=11;return Promise.all(hashes.map(function(hash){return _this3.encryptHash(hash,dataContract,encryptionContext);}));case 11:hashes=_context4.sent;case 12:_context4.next=14;return this.options.executor.executeContractTransaction(dataContract,'addListEntries',{from:accountId,autoGas:1.1},listNames.map(function(name){return _this3.options.web3.utils.sha3(name);}),hashes);case 14:_context4.next=75;break;case 16:_context4.next=18;return Promise.all([this.options.description.getDescriptionFromContract(dataContract.options.address,encryptionContext),this.options.web3.eth.getBlockNumber()]);case 18:_ref6=_context4.sent;_ref7=(0,_slicedToArray2["default"])(_ref6,2);description=_ref7[0];blockNr=_ref7[1];_context4.next=24;return Promise.all(listNames.map(function(name){return _this3.validate(description,name,hashes);}));case 24:_context4.next=26;return Promise.all(listNames.map(function(name){return _this3.options.sharing.getKey(dataContract.options.address,encryptionContext,name,blockNr);}));case 26:keys=_context4.sent;groupedKeys={};keys.forEach(function(key,index){if(groupedKeys[key]){groupedKeys[key].push(listNames[index]);}else{groupedKeys[key]=[listNames[index]];}});_i=0,_Object$keys=Object.keys(groupedKeys);case 30:if(!(_i<_Object$keys.length)){_context4.next=75;break;}key=_Object$keys[_i];ipfsFiles=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context4.prev=36;_iterator=hashes[Symbol.iterator]();case 38:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context4.next=48;break;}value=_step.value;_context4.next=42;return this.encrypt({"private":value},dataContract,encryptionContext,groupedKeys[key][0],blockNr,encryption);case 42:encrypted=_context4.sent;stateMd5=crypto.createHash('md5').update(encrypted).digest('hex');ipfsFiles.push({path:stateMd5,content:Buffer.from(encrypted)});case 45:_iteratorNormalCompletion=true;_context4.next=38;break;case 48:_context4.next=54;break;case 50:_context4.prev=50;_context4.t0=_context4["catch"](36);_didIteratorError=true;_iteratorError=_context4.t0;case 54:_context4.prev=54;_context4.prev=55;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 57:_context4.prev=57;if(!_didIteratorError){_context4.next=60;break;}throw _iteratorError;case 60:return _context4.finish(57);case 61:return _context4.finish(54);case 62:;_context4.next=65;return this.options.dfs.addMultiple(ipfsFiles);case 65:hashes=_context4.sent;if(!encryptedHashes){_context4.next=70;break;}_context4.next=69;return Promise.all(hashes.map(function(hash){return _this3.encryptHash(hash,dataContract,encryptionContext);}));case 69:hashes=_context4.sent;case 70:_context4.next=72;return this.options.executor.executeContractTransaction(dataContract,'addListEntries',{from:accountId,autoGas:1.1},groupedKeys[key].map(function(name){return _this3.options.web3.utils.sha3(name);}),hashes);case 72:_i++;_context4.next=30;break;case 75:case"end":return _context4.stop();}}},_callee4,this,[[36,50,54,62],[55,,57,61]]);}));function addListEntries(_x5,_x6,_x7,_x8){return _addListEntries.apply(this,arguments);}return addListEntries;}()},{key:"clearSharingCache",value:function clearSharingCache(){this.options.sharing.clearCache();}},{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(toDecrypt,contract,accountId,propertyName){var dataContract,envelope,cryptor,contentKey,decryptedBuffer;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);envelope=JSON.parse(toDecrypt);if(!envelope.cryptoInfo){_context5.next=14;break;}cryptor=this.options.cryptoProvider.getCryptorByCryptoInfo(envelope.cryptoInfo);if(!(envelope.cryptoInfo.algorithm!=='unencrypted')){_context5.next=10;break;}_context5.next=7;return this.options.sharing.getKey(dataContract.options.address,accountId,propertyName,envelope.cryptoInfo.block);case 7:contentKey=_context5.sent;if(contentKey){_context5.next=10;break;}throw new Error("no content key found for contract \"".concat(dataContract.options.address,"\" and account \"").concat(accountId,"\""));case 10:_context5.next=12;return cryptor.decrypt(Buffer.from(envelope["private"],this.encodingEncrypted),{key:contentKey});case 12:decryptedBuffer=_context5.sent;envelope["private"]=decryptedBuffer;case 14:return _context5.abrupt("return",envelope);case 15:case"end":return _context5.stop();}}},_callee5,this);}));function decrypt(_x9,_x10,_x11,_x12){return _decrypt.apply(this,arguments);}return decrypt;}()},{key:"decryptHash",value:function(){var _decryptHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(toDecrypt,contract,accountId){var dataContract,cryptor,hashKey,decryptedBuffer;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context6.next=4;return this.options.sharing.getHashKey(dataContract.options.address,accountId);case 4:hashKey=_context6.sent;if(hashKey){_context6.next=7;break;}throw new Error("no hashKey key found for contract \"".concat(dataContract.options.address,"\" and account \"").concat(accountId,"\""));case 7:_context6.next=9;return cryptor.decrypt(Buffer.from(toDecrypt.substr(2),this.encodingEncrypted),{key:hashKey});case 9:decryptedBuffer=_context6.sent;return _context6.abrupt("return","0x".concat(decryptedBuffer.toString(this.encodingUnencryptedHash)));case 11:case"end":return _context6.stop();}}},_callee6,this);}));function decryptHash(_x13,_x14,_x15){return _decryptHash.apply(this,arguments);}return decryptHash;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(toEncrypt,contract,accountId,propertyName,block){var encryption,dataContract,contentKey,cryptor,encryptedBuffer,encrypted,envelope,_args7=arguments;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:encryption=_args7.length>5&&_args7[5]!==undefined?_args7[5]:this.options.defaultCryptoAlgo;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);_context7.next=4;return this.options.sharing.getKey(dataContract.options.address,accountId,propertyName,block);case 4:contentKey=_context7.sent;if(contentKey){_context7.next=7;break;}throw new Error("no content key found for contract \"".concat(dataContract.options.address,"\" and account \"").concat(accountId,"\""));case 7:cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(encryption);_context7.next=10;return cryptor.encrypt(toEncrypt["private"],{key:contentKey});case 10:encryptedBuffer=_context7.sent;encrypted=encryptedBuffer.toString(this.encodingEncrypted);envelope={"private":encrypted,cryptoInfo:cryptor.getCryptoInfo(this.options.nameResolver.soliditySha3(dataContract.options.address))};envelope.cryptoInfo.block=block;if(toEncrypt["public"]){envelope["public"]=toEncrypt["public"];}return _context7.abrupt("return",JSON.stringify(envelope));case 16:case"end":return _context7.stop();}}},_callee7,this);}));function encrypt(_x16,_x17,_x18,_x19,_x20){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"encryptHash",value:function(){var _encryptHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(toEncrypt,contract,accountId){var dataContract,hashKey,cryptor,encryptedBuffer;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);_context8.next=3;return this.options.sharing.getHashKey(dataContract.options.address,accountId);case 3:hashKey=_context8.sent;if(hashKey){_context8.next=6;break;}throw new Error("no hashKey found for contract \"".concat(dataContract.options.address,"\" and account \"").concat(accountId,"\""));case 6:cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context8.next=9;return cryptor.encrypt(Buffer.from(toEncrypt.substr(2),this.encodingUnencryptedHash),{key:hashKey});case 9:encryptedBuffer=_context8.sent;return _context8.abrupt("return","0x".concat(encryptedBuffer.toString(this.encodingEncrypted)));case 11:case"end":return _context8.stop();}}},_callee8,this);}));function encryptHash(_x21,_x22,_x23){return _encryptHash.apply(this,arguments);}return encryptHash;}()},{key:"getEntry",value:function(){var _getEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(contract,entryName,accountId){var dfsStorage,encryptedHashes,dataContract,entryRaw,hash,encryptedContent,decrypted,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:dfsStorage=_args9.length>3&&_args9[3]!==undefined?_args9[3]:true;encryptedHashes=_args9.length>4&&_args9[4]!==undefined?_args9[4]:true;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);_context9.next=5;return this.options.executor.executeContractCall(dataContract,'getEntry',this.options.web3.utils.sha3(entryName));case 5:entryRaw=_context9.sent;if(!(entryRaw==='0x0000000000000000000000000000000000000000000000000000000000000000')){_context9.next=8;break;}return _context9.abrupt("return",entryRaw);case 8:hash=entryRaw;if(!encryptedHashes){_context9.next=13;break;}_context9.next=12;return this.decryptHash(entryRaw,dataContract,accountId);case 12:hash=_context9.sent;case 13:if(dfsStorage){_context9.next=17;break;}return _context9.abrupt("return",hash);case 17:_context9.next=19;return this.options.dfs.get(hash);case 19:encryptedContent=_context9.sent.toString('utf-8');_context9.next=22;return this.decrypt(encryptedContent,dataContract,accountId,entryName);case 22:decrypted=_context9.sent;return _context9.abrupt("return",decrypted["private"]);case 24:case"end":return _context9.stop();}}},_callee9,this);}));function getEntry(_x24,_x25,_x26){return _getEntry.apply(this,arguments);}return getEntry;}()},{key:"getMappingValue",value:function(){var _getMappingValue=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(contract,mappingName,entryName,accountId){var dfsStorage,encryptedHashes,dataContract,entryRaw,hash,encryptedContent,decrypted,_args10=arguments;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:dfsStorage=_args10.length>4&&_args10[4]!==undefined?_args10[4]:true;encryptedHashes=_args10.length>5&&_args10[5]!==undefined?_args10[5]:true;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);_context10.next=5;return this.options.executor.executeContractCall(dataContract,'getMappingValue',this.options.web3.utils.sha3(mappingName),this.options.web3.utils.sha3(entryName));case 5:entryRaw=_context10.sent;if(!(entryRaw==='0x0000000000000000000000000000000000000000000000000000000000000000')){_context10.next=8;break;}return _context10.abrupt("return",entryRaw);case 8:hash=entryRaw;if(!encryptedHashes){_context10.next=13;break;}_context10.next=12;return this.decryptHash(entryRaw,dataContract,accountId);case 12:hash=_context10.sent;case 13:if(dfsStorage){_context10.next=17;break;}return _context10.abrupt("return",entryRaw);case 17:_context10.next=19;return this.options.dfs.get(hash);case 19:encryptedContent=_context10.sent.toString('utf-8');_context10.next=22;return this.decrypt(encryptedContent,dataContract,accountId,mappingName);case 22:decrypted=_context10.sent;return _context10.abrupt("return",decrypted["private"]);case 24:case"end":return _context10.stop();}}},_callee10,this);}));function getMappingValue(_x27,_x28,_x29,_x30){return _getMappingValue.apply(this,arguments);}return getMappingValue;}()},{key:"getListEntries",value:function(){var _getListEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(contract,listName,accountId){var _this4=this;var dfsStorage,encryptedHashes,count,offset,reverse,dataContract,listKey,elements,hashes,envelopes,_args12=arguments;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:dfsStorage=_args12.length>3&&_args12[3]!==undefined?_args12[3]:true;encryptedHashes=_args12.length>4&&_args12[4]!==undefined?_args12[4]:true;count=_args12.length>5&&_args12[5]!==undefined?_args12[5]:10;offset=_args12.length>6&&_args12[6]!==undefined?_args12[6]:0;reverse=_args12.length>7&&_args12[7]!==undefined?_args12[7]:false;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);listKey=this.options.web3.utils.sha3(listName);_context12.next=9;return this.options.nameResolver.getArrayFromUintMapping(dataContract,function(){return _this4.options.executor.executeContractCall(dataContract,'getListEntryCount',listKey);},function(i){return _this4.options.executor.executeContractCall(dataContract,'getListEntry',listKey,i);},count,offset,reverse);case 9:elements=_context12.sent;if(elements.length){_context12.next=12;break;}return _context12.abrupt("return",elements);case 12:hashes=elements;if(!encryptedHashes){_context12.next=17;break;}_context12.next=16;return Promise.all(elements.map(function(element){return _this4.decryptHash(element,dataContract,accountId);}));case 16:hashes=_context12.sent;case 17:if(dfsStorage){_context12.next=21;break;}return _context12.abrupt("return",hashes);case 21:_context12.next=23;return prottle(requestWindowSize,hashes.map(function(hash){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(){var decrypted;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.t0=_this4;_context11.next=3;return _this4.options.dfs.get(hash);case 3:_context11.t1=_context11.sent.toString('utf-8');_context11.t2=dataContract;_context11.t3=accountId;_context11.t4=listName;_context11.next=9;return _context11.t0.decrypt.call(_context11.t0,_context11.t1,_context11.t2,_context11.t3,_context11.t4);case 9:decrypted=_context11.sent;return _context11.abrupt("return",decrypted);case 11:case"end":return _context11.stop();}}},_callee11);}));}));case 23:envelopes=_context12.sent;return _context12.abrupt("return",envelopes.map(function(envelope){return envelope["private"];}));case 25:case"end":return _context12.stop();}}},_callee12,this);}));function getListEntries(_x31,_x32,_x33){return _getListEntries.apply(this,arguments);}return getListEntries;}()},{key:"getListEntry",value:function(){var _getListEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(contract,listName,index,accountId){var dfsStorage,encryptedHashes,dataContract,listKey,entryRaw,hash,decrypted,_args13=arguments;return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:dfsStorage=_args13.length>4&&_args13[4]!==undefined?_args13[4]:true;encryptedHashes=_args13.length>5&&_args13[5]!==undefined?_args13[5]:true;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);listKey=this.options.web3.utils.sha3(listName);_context13.next=6;return this.options.executor.executeContractCall(dataContract,'getListEntry',listKey,index);case 6:entryRaw=_context13.sent;hash=entryRaw;if(!encryptedHashes){_context13.next=12;break;}_context13.next=11;return this.decryptHash(entryRaw,dataContract,accountId);case 11:hash=_context13.sent;case 12:if(dfsStorage){_context13.next=16;break;}return _context13.abrupt("return",hash);case 16:_context13.t0=this;_context13.next=19;return this.options.dfs.get(hash);case 19:_context13.t1=_context13.sent.toString('utf-8');_context13.t2=dataContract;_context13.t3=accountId;_context13.t4=listName;_context13.next=25;return _context13.t0.decrypt.call(_context13.t0,_context13.t1,_context13.t2,_context13.t3,_context13.t4);case 25:decrypted=_context13.sent;return _context13.abrupt("return",decrypted["private"]);case 27:case"end":return _context13.stop();}}},_callee13,this);}));function getListEntry(_x34,_x35,_x36,_x37){return _getListEntry.apply(this,arguments);}return getListEntry;}()},{key:"getListEntryCount",value:function(){var _getListEntryCount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(contract,listName){var dataContract,listKey;return _regenerator["default"].wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);listKey=this.options.web3.utils.sha3(listName);_context14.t0=parseInt;_context14.next=5;return this.options.executor.executeContractCall(dataContract,'getListEntryCount',listKey);case 5:_context14.t1=_context14.sent;return _context14.abrupt("return",(0,_context14.t0)(_context14.t1,10));case 7:case"end":return _context14.stop();}}},_callee14,this);}));function getListEntryCount(_x38,_x39){return _getListEntryCount.apply(this,arguments);}return getListEntryCount;}()},{key:"moveListEntry",value:function(){var _moveListEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(contract,listNameFrom,entryIndex,listNamesTo,accountId){var _this5=this;var dataContract;return _regenerator["default"].wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);_context15.next=3;return this.options.executor.executeContractTransaction(dataContract,'moveListEntry',{from:accountId,gas:2000000},this.options.web3.utils.sha3(listNameFrom),entryIndex,listNamesTo.map(function(name){return _this5.options.web3.utils.sha3(name);}));case 3:case"end":return _context15.stop();}}},_callee15,this);}));function moveListEntry(_x40,_x41,_x42,_x43,_x44){return _moveListEntry.apply(this,arguments);}return moveListEntry;}()},{key:"removeListEntry",value:function(){var _removeListEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(contract,listName,entryIndex,accountId){var dataContract;return _regenerator["default"].wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);_context16.next=3;return this.options.executor.executeContractTransaction(dataContract,'removeListEntry',{from:accountId,gas:2000000},this.options.web3.utils.sha3(listName),entryIndex);case 3:case"end":return _context16.stop();}}},_callee16,this);}));function removeListEntry(_x45,_x46,_x47,_x48){return _removeListEntry.apply(this,arguments);}return removeListEntry;}()},{key:"setEntry",value:function(){var _setEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(contract,entryName,value,accountId){var dfsStorage,encryptedHashes,encryption,encryptionContext,dataContract,toSet,_ref9,_ref10,description,blockNr,encrypted,stateMd5,_args17=arguments;return _regenerator["default"].wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:dfsStorage=_args17.length>4&&_args17[4]!==undefined?_args17[4]:true;encryptedHashes=_args17.length>5&&_args17[5]!==undefined?_args17[5]:true;encryption=_args17.length>6&&_args17[6]!==undefined?_args17[6]:this.options.defaultCryptoAlgo;encryptionContext=_args17.length>7&&_args17[7]!==undefined?_args17[7]:accountId;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);if(dfsStorage){_context17.next=9;break;}toSet=value;_context17.next=24;break;case 9:_context17.next=11;return Promise.all([this.options.description.getDescriptionFromContract(dataContract.options.address,encryptionContext),this.options.web3.eth.getBlockNumber()]);case 11:_ref9=_context17.sent;_ref10=(0,_slicedToArray2["default"])(_ref9,2);description=_ref10[0];blockNr=_ref10[1];_context17.next=17;return this.validate(description,entryName,value);case 17:_context17.next=19;return this.encrypt({"private":value},dataContract,encryptionContext,entryName,blockNr,encryption);case 19:encrypted=_context17.sent;stateMd5=crypto.createHash('md5').update(encrypted).digest('hex');_context17.next=23;return this.options.dfs.add(stateMd5,Buffer.from(encrypted));case 23:toSet=_context17.sent;case 24:if(!encryptedHashes){_context17.next=28;break;}_context17.next=27;return this.encryptHash(toSet,dataContract,encryptionContext);case 27:toSet=_context17.sent;case 28:_context17.next=30;return this.options.executor.executeContractTransaction(dataContract,'setEntry',{from:accountId,autoGas:1.1},this.options.web3.utils.sha3(entryName),toSet);case 30:case"end":return _context17.stop();}}},_callee17,this);}));function setEntry(_x49,_x50,_x51,_x52){return _setEntry.apply(this,arguments);}return setEntry;}()},{key:"setMappingValue",value:function(){var _setMappingValue=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(contract,mappingName,entryName,value,accountId){var dfsStorage,encryptedHashes,encryption,encryptionContext,dataContract,toSet,_ref11,_ref12,description,blockNr,encrypted,stateMd5,_args18=arguments;return _regenerator["default"].wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:dfsStorage=_args18.length>5&&_args18[5]!==undefined?_args18[5]:true;encryptedHashes=_args18.length>6&&_args18[6]!==undefined?_args18[6]:true;encryption=_args18.length>7&&_args18[7]!==undefined?_args18[7]:this.options.defaultCryptoAlgo;encryptionContext=_args18.length>8&&_args18[8]!==undefined?_args18[8]:accountId;dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('DataContractInterface',contract);if(dfsStorage){_context18.next=9;break;}toSet=value;_context18.next=24;break;case 9:_context18.next=11;return Promise.all([this.options.description.getDescriptionFromContract(contract.options.address,encryptionContext),this.options.web3.eth.getBlockNumber()]);case 11:_ref11=_context18.sent;_ref12=(0,_slicedToArray2["default"])(_ref11,2);description=_ref12[0];blockNr=_ref12[1];_context18.next=17;return this.validate(description,mappingName,value);case 17:_context18.next=19;return this.encrypt({"private":value},dataContract,accountId,mappingName,blockNr,encryption);case 19:encrypted=_context18.sent;stateMd5=crypto.createHash('md5').update(encrypted).digest('hex');_context18.next=23;return this.options.dfs.add(stateMd5,Buffer.from(encrypted));case 23:toSet=_context18.sent;case 24:if(!encryptedHashes){_context18.next=28;break;}_context18.next=27;return this.encryptHash(toSet,dataContract,encryptionContext);case 27:toSet=_context18.sent;case 28:_context18.next=30;return this.options.executor.executeContractTransaction(dataContract,'setMappingValue',{from:accountId,autoGas:1.1},this.options.web3.utils.sha3(mappingName),this.options.web3.utils.sha3(entryName),toSet);case 30:case"end":return _context18.stop();}}},_callee18,this);}));function setMappingValue(_x53,_x54,_x55,_x56,_x57){return _setMappingValue.apply(this,arguments);}return setMappingValue;}()},{key:"validate",value:function(){var _validate=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(description,fieldName,toCheck){var merged,schema,validator,values,checkFails;return _regenerator["default"].wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:if(description){_context19.next=2;break;}return _context19.abrupt("return",true);case 2:merged=Object.assign(Object.assign({},description["public"]),description["private"]);if(!(merged.dataSchema&&merged.dataSchema[fieldName])){_context19.next=11;break;}schema=merged.dataSchema[fieldName];if(schema.type==='array'){schema=schema.items;}validator=new dbcp_1.Validator({schema:schema});if(Array.isArray(toCheck)){values=toCheck;}else{values=[toCheck];}checkFails=values.map(function(value){return validator.validate(value);}).filter(function(result){return result!==true;});if(!checkFails.length){_context19.next=11;break;}throw new Error("validation of input values failed with: ".concat(JSON.stringify(checkFails)));case 11:case"end":return _context19.stop();}}},_callee19);}));function validate(_x58,_x59,_x60){return _validate.apply(this,arguments);}return validate;}()}]);return DataContract;}(index_1.BaseContract);exports.DataContract=DataContract;

}).call(this,require("buffer").Buffer)

},{"../../index":24,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"crypto":1142,"prottle":524}],1142:[function(require,module,exports){
arguments[4][177][0].apply(exports,arguments)
},{"browserify-cipher":1122,"browserify-sign":1129,"browserify-sign/algos":1126,"create-ecdh":1137,"create-hash":1138,"create-hmac":1140,"diffie-hellman":1149,"dup":177,"pbkdf2":1215,"public-encrypt":1222,"randombytes":1232,"randomfill":1233}],1133:[function(require,module,exports){
(function (Buffer){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var base64=require('base64-js');var ieee754=require('ieee754');var customInspectSymbol=typeof Symbol==='function'&&typeof Symbol["for"]==='function'?Symbol["for"]('nodejs.util.inspect.custom'):null;exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=0x7fffffff;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=='undefined'&&typeof console.error==='function'){console.error('This browser lacks typed array (Uint8Array) support which is required by '+'`buffer` v5.x. Use `buffer` v4.x if you require old browser support.');}function typedArraySupport(){try{var arr=new Uint8Array(1);var proto={foo:function foo(){return 42;}};Object.setPrototypeOf(proto,Uint8Array.prototype);Object.setPrototypeOf(arr,proto);return arr.foo()===42;}catch(e){return false;}}Object.defineProperty(Buffer.prototype,'parent',{enumerable:true,get:function get(){if(!Buffer.isBuffer(this))return undefined;return this.buffer;}});Object.defineProperty(Buffer.prototype,'offset',{enumerable:true,get:function get(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset;}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"');}var buf=new Uint8Array(length);Object.setPrototypeOf(buf,Buffer.prototype);return buf;}function Buffer(arg,encodingOrOffset,length){if(typeof arg==='number'){if(typeof encodingOrOffset==='string'){throw new TypeError('The "string" argument must be of type string. Received type number');}return allocUnsafe(arg);}return from(arg,encodingOrOffset,length);}if(typeof Symbol!=='undefined'&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false});}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==='string'){return fromString(value,encodingOrOffset);}if(ArrayBuffer.isView(value)){return fromArrayLike(value);}if(value==null){throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, '+'or Array-like Object. Received type '+(0,_typeof2["default"])(value));}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length);}if(typeof value==='number'){throw new TypeError('The "value" argument must not be of type number. Received type number');}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length);}var b=fromObject(value);if(b)return b;if(typeof Symbol!=='undefined'&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==='function'){return Buffer.from(value[Symbol.toPrimitive]('string'),encodingOrOffset,length);}throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, '+'or Array-like Object. Received type '+(0,_typeof2["default"])(value));}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length);};Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(size){if(typeof size!=='number'){throw new TypeError('"size" argument must be of type number');}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"');}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size);}if(fill!==undefined){return typeof encoding==='string'?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill);}return createBuffer(size);}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding);};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0);}Buffer.allocUnsafe=function(size){return allocUnsafe(size);};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size);};function fromString(string,encoding){if(typeof encoding!=='string'||encoding===''){encoding='utf8';}if(!Buffer.isEncoding(encoding)){throw new TypeError('Unknown encoding: '+encoding);}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual);}return buf;}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255;}return buf;}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds');}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds');}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array);}else if(length===undefined){buf=new Uint8Array(array,byteOffset);}else{buf=new Uint8Array(array,byteOffset,length);}Object.setPrototypeOf(buf,Buffer.prototype);return buf;}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf;}obj.copy(buf,0,0,len);return buf;}if(obj.length!==undefined){if(typeof obj.length!=='number'||numberIsNaN(obj.length)){return createBuffer(0);}return fromArrayLike(obj);}if(obj.type==='Buffer'&&Array.isArray(obj.data)){return fromArrayLike(obj.data);}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError('Attempt to allocate Buffer larger than maximum '+'size: 0x'+K_MAX_LENGTH.toString(16)+' bytes');}return length|0;}function SlowBuffer(length){if(+length!=length){length=0;}return Buffer.alloc(+length);}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype;};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break;}}if(x<y)return-1;if(y<x)return 1;return 0;};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return true;default:return false;}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers');}if(list.length===0){return Buffer.alloc(0);}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length;}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf);}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers');}buf.copy(buffer,pos);pos+=buf.length;}return buffer;};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length;}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength;}if(typeof string!=='string'){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+'Received type '+(0,_typeof2["default"])(string));}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case'ascii':case'latin1':case'binary':return len;case'utf8':case'utf-8':return utf8ToBytes(string).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return len*2;case'hex':return len>>>1;case'base64':return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length;}encoding=(''+encoding).toLowerCase();loweredCase=true;}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0;}if(start>this.length){return'';}if(end===undefined||end>this.length){end=this.length;}if(end<=0){return'';}end>>>=0;start>>>=0;if(end<=start){return'';}if(!encoding)encoding='utf8';while(true){switch(encoding){case'hex':return hexSlice(this,start,end);case'utf8':case'utf-8':return utf8Slice(this,start,end);case'ascii':return asciiSlice(this,start,end);case'latin1':case'binary':return latin1Slice(this,start,end);case'base64':return base64Slice(this,start,end);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(encoding+'').toLowerCase();loweredCase=true;}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i;}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError('Buffer size must be a multiple of 16-bits');}for(var i=0;i<len;i+=2){swap(this,i,i+1);}return this;};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError('Buffer size must be a multiple of 32-bits');}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2);}return this;};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError('Buffer size must be a multiple of 64-bits');}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4);}return this;};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return'';if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments);};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError('Argument must be a Buffer');if(this===b)return true;return Buffer.compare(this,b)===0;};Buffer.prototype.inspect=function inspect(){var str='';var max=exports.INSPECT_MAX_BYTES;str=this.toString('hex',0,max).replace(/(.{2})/g,'$1 ').trim();if(this.length>max)str+=' ... ';return'<Buffer '+str+'>';};if(customInspectSymbol){Buffer.prototype[customInspectSymbol]=Buffer.prototype.inspect;}Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength);}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+'Received type '+(0,_typeof2["default"])(target));}if(start===undefined){start=0;}if(end===undefined){end=target?target.length:0;}if(thisStart===undefined){thisStart=0;}if(thisEnd===undefined){thisEnd=this.length;}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError('out of range index');}if(thisStart>=thisEnd&&start>=end){return 0;}if(thisStart>=thisEnd){return-1;}if(start>=end){return 1;}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break;}}if(x<y)return-1;if(y<x)return 1;return 0;};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==='string'){encoding=byteOffset;byteOffset=0;}else if(byteOffset>0x7fffffff){byteOffset=0x7fffffff;}else if(byteOffset<-0x80000000){byteOffset=-0x80000000;}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1;}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1;}else if(byteOffset<0){if(dir)byteOffset=0;else return-1;}if(typeof val==='string'){val=Buffer.from(val,encoding);}if(Buffer.isBuffer(val)){if(val.length===0){return-1;}return arrayIndexOf(buffer,val,byteOffset,encoding,dir);}else if(typeof val==='number'){val=val&0xFF;if(typeof Uint8Array.prototype.indexOf==='function'){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset);}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset);}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir);}throw new TypeError('val must be string, number or Buffer');}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==='ucs2'||encoding==='ucs-2'||encoding==='utf16le'||encoding==='utf-16le'){if(arr.length<2||val.length<2){return-1;}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2;}}function read(buf,i){if(indexSize===1){return buf[i];}else{return buf.readUInt16BE(i*indexSize);}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize;}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1;}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break;}}if(found)return i;}}return-1;}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1;};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true);};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false);};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining;}else{length=Number(length);if(length>remaining){length=remaining;}}var strLen=string.length;if(length>strLen/2){length=strLen/2;}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed;}return i;}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length);}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length);}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length);}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length);}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length);}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding='utf8';length=this.length;offset=0;}else if(length===undefined&&typeof offset==='string'){encoding=offset;length=this.length;offset=0;}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding='utf8';}else{encoding=length;length=undefined;}}else{throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError('Attempt to write outside buffer bounds');}if(!encoding)encoding='utf8';var loweredCase=false;for(;;){switch(encoding){case'hex':return hexWrite(this,string,offset,length);case'utf8':case'utf-8':return utf8Write(this,string,offset,length);case'ascii':return asciiWrite(this,string,offset,length);case'latin1':case'binary':return latin1Write(this,string,offset,length);case'base64':return base64Write(this,string,offset,length);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(''+encoding).toLowerCase();loweredCase=true;}}};Buffer.prototype.toJSON=function toJSON(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)};};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf);}else{return base64.fromByteArray(buf.slice(start,end));}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>0xEF?4:firstByte>0xDF?3:firstByte>0xBF?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<0x80){codePoint=firstByte;}break;case 2:secondByte=buf[i+1];if((secondByte&0xC0)===0x80){tempCodePoint=(firstByte&0x1F)<<0x6|secondByte&0x3F;if(tempCodePoint>0x7F){codePoint=tempCodePoint;}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0xC|(secondByte&0x3F)<<0x6|thirdByte&0x3F;if(tempCodePoint>0x7FF&&(tempCodePoint<0xD800||tempCodePoint>0xDFFF)){codePoint=tempCodePoint;}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80&&(fourthByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0x12|(secondByte&0x3F)<<0xC|(thirdByte&0x3F)<<0x6|fourthByte&0x3F;if(tempCodePoint>0xFFFF&&tempCodePoint<0x110000){codePoint=tempCodePoint;}}}}if(codePoint===null){codePoint=0xFFFD;bytesPerSequence=1;}else if(codePoint>0xFFFF){codePoint-=0x10000;res.push(codePoint>>>10&0x3FF|0xD800);codePoint=0xDC00|codePoint&0x3FF;}res.push(codePoint);i+=bytesPerSequence;}return decodeCodePointsArray(res);}var MAX_ARGUMENTS_LENGTH=0x1000;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints);}var res='';var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));}return res;}function asciiSlice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&0x7F);}return ret;}function latin1Slice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]);}return ret;}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out='';for(var i=start;i<end;++i){out+=hexSliceLookupTable[buf[i]];}return out;}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res='';for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256);}return res;}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0;}else if(start>len){start=len;}if(end<0){end+=len;if(end<0)end=0;}else if(end>len){end=len;}if(end<start)end=start;var newBuf=this.subarray(start,end);Object.setPrototypeOf(newBuf,Buffer.prototype);return newBuf;};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError('offset is not uint');if(offset+ext>length)throw new RangeError('Trying to access beyond buffer length');}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}return val;};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length);}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=0x100)){val+=this[offset+--byteLength]*mul;}return val;};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset];};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8;};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1];};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*0x1000000;};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*0x1000000+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3]);};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=0x100)){val+=this[offset+--i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&0x80))return this[offset];return(0xff-this[offset]+1)*-1;};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24;};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3];};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4);};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4);};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8);};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8);};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError('Index out of range');}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0);}var mul=1;var i=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){this[offset+i]=value/mul&0xFF;}return offset+byteLength;};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0);}var i=byteLength-1;var mul=1;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){this[offset+i]=value/mul&0xFF;}return offset+byteLength;};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,0xff,0);this[offset]=value&0xff;return offset+1;};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);this[offset]=value&0xff;this[offset+1]=value>>>8;return offset+2;};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);this[offset]=value>>>8;this[offset+1]=value&0xff;return offset+2;};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&0xff;return offset+4;};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&0xff;return offset+4;};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit);}var i=0;var mul=1;var sub=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1;}this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit);}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1;}this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,0x7f,-0x80);if(value<0)value=0xff+value+1;this[offset]=value&0xff;return offset+1;};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);this[offset]=value&0xff;this[offset+1]=value>>>8;return offset+2;};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);this[offset]=value>>>8;this[offset+1]=value&0xff;return offset+2;};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);this[offset]=value&0xff;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4;};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(value<0)value=0xffffffff+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&0xff;return offset+4;};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError('Index out of range');if(offset<0)throw new RangeError('Index out of range');}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e+38,-3.4028234663852886e+38);}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4;}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert);};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert);};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157E+308,-1.7976931348623157E+308);}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8;}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert);};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert);};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError('argument should be a Buffer');if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError('targetStart out of bounds');}if(start<0||start>=this.length)throw new RangeError('Index out of range');if(end<0)throw new RangeError('sourceEnd out of bounds');if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start;}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==='function'){this.copyWithin(targetStart,start,end);}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start];}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart);}return len;};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==='string'){if(typeof start==='string'){encoding=start;start=0;end=this.length;}else if(typeof end==='string'){encoding=end;end=this.length;}if(encoding!==undefined&&typeof encoding!=='string'){throw new TypeError('encoding must be a string');}if(typeof encoding==='string'&&!Buffer.isEncoding(encoding)){throw new TypeError('Unknown encoding: '+encoding);}if(val.length===1){var code=val.charCodeAt(0);if(encoding==='utf8'&&code<128||encoding==='latin1'){val=code;}}}else if(typeof val==='number'){val=val&255;}else if(typeof val==='boolean'){val=Number(val);}if(start<0||this.length<start||this.length<end){throw new RangeError('Out of range index');}if(end<=start){return this;}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==='number'){for(i=start;i<end;++i){this[i]=val;}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"');}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len];}}return this;};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split('=')[0];str=str.trim().replace(INVALID_BASE64_RE,'');if(str.length<2)return'';while(str.length%4!==0){str=str+'=';}return str;}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>0xD7FF&&codePoint<0xE000){if(!leadSurrogate){if(codePoint>0xDBFF){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}else if(i+1===length){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}leadSurrogate=codePoint;continue;}if(codePoint<0xDC00){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);leadSurrogate=codePoint;continue;}codePoint=(leadSurrogate-0xD800<<10|codePoint-0xDC00)+0x10000;}else if(leadSurrogate){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);}leadSurrogate=null;if(codePoint<0x80){if((units-=1)<0)break;bytes.push(codePoint);}else if(codePoint<0x800){if((units-=2)<0)break;bytes.push(codePoint>>0x6|0xC0,codePoint&0x3F|0x80);}else if(codePoint<0x10000){if((units-=3)<0)break;bytes.push(codePoint>>0xC|0xE0,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else if(codePoint<0x110000){if((units-=4)<0)break;bytes.push(codePoint>>0x12|0xF0,codePoint>>0xC&0x3F|0x80,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else{throw new Error('Invalid code point');}}return bytes;}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&0xFF);}return byteArray;}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi);}return byteArray;}function base64ToBytes(str){return base64.toByteArray(base64clean(str));}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i];}return i;}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name;}function numberIsNaN(obj){return obj!==obj;}var hexSliceLookupTable=function(){var alphabet='0123456789abcdef';var table=new Array(256);for(var i=0;i<16;++i){var i16=i*16;for(var j=0;j<16;++j){table[i16+j]=alphabet[i]+alphabet[j];}}return table;}();

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"base64-js":1101,"buffer":1133,"ieee754":1186}],24:[function(require,module,exports){
(function (Buffer){
function __export(m){for(var p in m){if(!exports.hasOwnProperty(p))exports[p]=m[p];}}Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");exports.AccountStore=dbcp_1.AccountStore;exports.ContractLoader=dbcp_1.ContractLoader;exports.EventHub=dbcp_1.EventHub;exports.Executor=dbcp_1.Executor;exports.KeyProvider=dbcp_1.KeyProvider;exports.LogLevel=dbcp_1.LogLevel;exports.Logger=dbcp_1.Logger;exports.SignerExternal=dbcp_1.SignerExternal;exports.SignerInternal=dbcp_1.SignerInternal;exports.Unencrypted=dbcp_1.Unencrypted;exports.Validator=dbcp_1.Validator;__export(require("./contracts/base-contract/base-contract"));__export(require("./contracts/data-contract/data-contract"));__export(require("./contracts/digital-twin/container"));__export(require("./contracts/digital-twin/digital-twin"));__export(require("./contracts/executor-agent"));__export(require("./contracts/executor-wallet"));__export(require("./contracts/rights-and-roles"));__export(require("./contracts/service-contract/service-contract"));__export(require("./contracts/sharing"));__export(require("./contracts/signer-identity"));__export(require("./contracts/wallet"));__export(require("./dfs/ipfs"));__export(require("./dfs/ipld"));__export(require("./did/did-resolver"));__export(require("./encryption/aes"));__export(require("./encryption/aes-blob"));__export(require("./encryption/aes-ecb"));__export(require("./encryption/crypto-provider"));__export(require("./encryption/encryption-wrapper"));__export(require("./keyExchange"));__export(require("./mailbox"));__export(require("./name-resolver"));__export(require("./onboarding"));__export(require("./payments"));__export(require("./profile/business-center-profile"));__export(require("./profile/profile"));__export(require("./runtime"));__export(require("./shared-description"));__export(require("./verifications/verifications"));__export(require("./votings/votings"));var utils_1=require("./common/utils");var utils={getSmartAgentAuthHeaders:utils_1.getSmartAgentAuthHeaders};exports.utils=utils;var AccountType=require("./profile/types/types");exports.AccountType=AccountType;var Web3=require("web3");exports.Web3=Web3;var crypto=require("crypto");exports.crypto=crypto;var keystore=require("../libs/eth-lightwallet/keystore.js");exports.keystore=keystore;var lodash=require("lodash");exports.lodash=lodash;var prottle=require("prottle");exports.prottle=prottle;var buffer=Buffer;exports.buffer=buffer;var Mnemonic=require("../libs/bitcore-mnemonic/mnemonic.js");exports.Mnemonic=Mnemonic;var instanceId=Date.now()+Math.random();exports.instanceId=instanceId;var logLog=[];exports.logLog=logLog;var logLogLevel=0;exports.logLogLevel=logLogLevel;

}).call(this,require("buffer").Buffer)

},{"../libs/bitcore-mnemonic/mnemonic.js":41,"../libs/eth-lightwallet/keystore.js":43,"./common/utils":1,"./contracts/base-contract/base-contract":4,"./contracts/data-contract/data-contract":5,"./contracts/digital-twin/container":6,"./contracts/digital-twin/digital-twin":7,"./contracts/executor-agent":8,"./contracts/executor-wallet":9,"./contracts/rights-and-roles":10,"./contracts/service-contract/service-contract":11,"./contracts/sharing":12,"./contracts/signer-identity":13,"./contracts/wallet":14,"./dfs/ipfs":16,"./dfs/ipld":17,"./did/did-resolver":18,"./encryption/aes":21,"./encryption/aes-blob":19,"./encryption/aes-ecb":20,"./encryption/crypto-provider":22,"./encryption/encryption-wrapper":23,"./keyExchange":25,"./mailbox":26,"./name-resolver":27,"./onboarding":28,"./payments":29,"./profile/business-center-profile":30,"./profile/profile":31,"./profile/types/types":34,"./runtime":36,"./shared-description":37,"./verifications/verifications":38,"./votings/votings":39,"@evan.network/dbcp":726,"buffer":1133,"crypto":1142,"lodash":471,"prottle":524,"web3":701}],524:[function(require,module,exports){
'use strict';var EventEmitter=require('events');module.exports=function(limit,arr){limit=parseInt(limit);if(isNaN(limit)||limit<=0){return Promise.reject(Error('Limit must be at least 1'));}if(!Array.isArray(arr)){return Promise.reject(Error('Array of promises required'));}var promises=[].concat(arr),results=[],emitter=new EventEmitter();var run=function run(batch,id){Promise.all(batch.map(function(fn){return Promise.resolve(fn());})).then(function(res){results.push.apply(results,res);emitter.emit("end:".concat(id));})["catch"](function(err){emitter.emit('error',err);});};var add=function add(batch,id){if(id===0){return run(batch,id);}emitter.once("end:".concat(id-1),function(){return run(batch,id);});};var idx=-1;while(promises.length){add(promises.splice(0,limit),++idx);}return new Promise(function(resolve,reject){emitter.once("end:".concat(idx),function(){resolve(results);}).once('error',function(err){emitter.removeAllListeners();reject(err);});});};

},{"events":1169}],63:[function(require,module,exports){
var arrayWithHoles = require("./arrayWithHoles");

var iterableToArrayLimit = require("./iterableToArrayLimit");

var nonIterableRest = require("./nonIterableRest");

function _slicedToArray(arr, i) {
  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();
}

module.exports = _slicedToArray;
},{"./arrayWithHoles":44,"./iterableToArrayLimit":57,"./nonIterableRest":58}],52:[function(require,module,exports){
var superPropBase = require("./superPropBase");

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    module.exports = _get = Reflect.get;
  } else {
    module.exports = _get = function _get(target, property, receiver) {
      var base = superPropBase(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

module.exports = _get;
},{"./superPropBase":64}],6:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var Throttle=require("promise-parallel-throttle");var bignumber_js_1=require("bignumber.js");var async_mutex_1=require("async-mutex");var lodash_1=require("lodash");var dbcp_1=require("@evan.network/dbcp");var rights_and_roles_1=require("../rights-and-roles");var pendingIdentities=[];var Container=function(_dbcp_1$Logger){(0,_inherits2["default"])(Container,_dbcp_1$Logger);function Container(options,config){var _this;(0,_classCallCheck2["default"])(this,Container);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Container).call(this,options));_this.reservedRoles=64;_this.options=options;_this.config=config;_this.mutexes={};return _this;}(0,_createClass2["default"])(Container,[{key:"addListEntries",value:function(){var _addListEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(listName,values){var _this2=this;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.ensureContract();case 2:_context2.next=4;return this.ensureProperty(listName,this.deriveSchema(values),'list');case 4:_context2.next=6;return this.wrapPromise('add list entries to contract',(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var toSet;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this2.encryptFilesIfRequired(listName,values);case 2:toSet=_context.sent;_context.next=5;return _this2.options.dataContract.addListEntries(_this2.contract,listName,toSet,_this2.config.accountId);case 5:case"end":return _context.stop();}}},_callee);}))());case 6:case"end":return _context2.stop();}}},_callee2,this);}));function addListEntries(_x,_x2){return _addListEntries.apply(this,arguments);}return addListEntries;}()},{key:"addVerifications",value:function(){var _addVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(verifications){var _this3=this;var owner,isOwner,tags;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.ensureContract();case 2:_context5.next=4;return this.options.executor.executeContractCall(this.contract,'owner');case 4:owner=_context5.sent;isOwner=owner===this.config.accountId;_context5.next=8;return Throttle.all(verifications.map(function(verification){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){var verificationId;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this3.options.verifications.setVerification(_this3.config.accountId,_this3.contract.options.address,verification.topic,verification.expirationDate,verification.verificationValue,verification.descriptionDomain,verification.disableSubverifications);case 2:verificationId=_context3.sent;if(!isOwner){_context3.next=12;break;}_context3.t0=_this3.options.verifications;_context3.t1=_this3.config.accountId;_context3.next=8;return _this3.getContractAddress();case 8:_context3.t2=_context3.sent;_context3.t3=verificationId;_context3.next=12;return _context3.t0.confirmVerification.call(_context3.t0,_context3.t1,_context3.t2,_context3.t3);case 12:case"end":return _context3.stop();}}},_callee3);}));}));case 8:if(!(owner===this.config.accountId)){_context5.next=12;break;}tags=verifications.map(function(verification){return"verification:".concat(verification.topic);});_context5.next=12;return this.getMutex('description').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){var description,oldTags,toAdd;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this3.getDescription();case 2:description=_context4.sent;oldTags=description.tags||[];toAdd=tags.filter(function(tag){return!oldTags.includes(tag);});if(!toAdd.length){_context4.next=9;break;}description.tags=oldTags.concat(toAdd);_context4.next=9;return _this3.setDescription(description);case 9:case"end":return _context4.stop();}}},_callee4);})));case 12:case"end":return _context5.stop();}}},_callee5,this);}));function addVerifications(_x3){return _addVerifications.apply(this,arguments);}return addVerifications;}()},{key:"ensureProperty",value:function(){var _ensureProperty=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(propertyName,dataSchema){var propertyType,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:propertyType=_args6.length>2&&_args6[2]!==undefined?_args6[2]:dataSchema.type==='array'?'list':'entry';_context6.next=3;return this.ensureContract();case 3:_context6.next=5;return this.ensurePermissionOnField(propertyName,propertyType);case 5:_context6.next=7;return this.ensureKeyInSharing(propertyName);case 7:_context6.next=9;return this.ensureTypeInSchema(propertyName,dataSchema);case 9:case"end":return _context6.stop();}}},_callee6,this);}));function ensureProperty(_x4,_x5){return _ensureProperty.apply(this,arguments);}return ensureProperty;}()},{key:"ensureTypeInSchema",value:function(){var _ensureTypeInSchema=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(name,schema,description){var _this4=this;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.getMutex('schema').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(){var descriptionToEdit,fieldId;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!description){_context7.next=4;break;}descriptionToEdit=description;_context7.next=7;break;case 4:_context7.next=6;return _this4.getDescription();case 6:descriptionToEdit=_context7.sent;case 7:if(!descriptionToEdit.dataSchema){descriptionToEdit.dataSchema={};}if(descriptionToEdit.dataSchema[name]){_context7.next=15;break;}fieldId=name.replace(/[^a-zA-Z0-9]/g,'');descriptionToEdit.dataSchema[name]=lodash_1.cloneDeep(schema);descriptionToEdit.dataSchema[name].$id="".concat(fieldId,"_schema");if(description){_context7.next=15;break;}_context7.next=15;return _this4.setDescription(descriptionToEdit);case 15:case"end":return _context7.stop();}}},_callee7);})));case 2:case"end":return _context8.stop();}}},_callee8,this);}));function ensureTypeInSchema(_x6,_x7,_x8){return _ensureTypeInSchema.apply(this,arguments);}return ensureTypeInSchema;}()},{key:"getContractAddress",value:function(){var _getContractAddress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(){return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.ensureContract();case 2:return _context9.abrupt("return",this.contract.options.address);case 3:case"end":return _context9.stop();}}},_callee9,this);}));function getContractAddress(){return _getContractAddress.apply(this,arguments);}return getContractAddress;}()},{key:"getDescription",value:function(){var _getDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(){return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.ensureContract();case 2:_context10.next=4;return this.options.description.getDescription(this.contract.options.address,this.config.accountId);case 4:return _context10.abrupt("return",_context10.sent["public"]);case 5:case"end":return _context10.stop();}}},_callee10,this);}));function getDescription(){return _getDescription.apply(this,arguments);}return getDescription;}()},{key:"getEntry",value:function(){var _getEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(entryName){var _this5=this;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this.ensureContract();case 2:return _context12.abrupt("return",this.wrapPromise('get entry',(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(){var value;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this5.options.dataContract.getEntry(_this5.contract,entryName,_this5.config.accountId);case 2:value=_context11.sent;if(!(entryName!=='type')){_context11.next=7;break;}_context11.next=6;return _this5.decryptFilesIfRequired(entryName,value);case 6:value=_context11.sent;case 7:return _context11.abrupt("return",value);case 8:case"end":return _context11.stop();}}},_callee11);}))()));case 3:case"end":return _context12.stop();}}},_callee12,this);}));function getEntry(_x9){return _getEntry.apply(this,arguments);}return getEntry;}()},{key:"getListEntries",value:function(){var _getListEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(listName){var _this6=this;var count,offset,reverse,_args14=arguments;return _regenerator["default"].wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:count=_args14.length>1&&_args14[1]!==undefined?_args14[1]:10;offset=_args14.length>2&&_args14[2]!==undefined?_args14[2]:0;reverse=_args14.length>3&&_args14[3]!==undefined?_args14[3]:false;_context14.next=5;return this.ensureContract();case 5:return _context14.abrupt("return",this.wrapPromise('get list entries',(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(){var values;return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return _this6.options.dataContract.getListEntries(_this6.contract,listName,_this6.config.accountId,true,true,count,offset,reverse);case 2:values=_context13.sent;return _context13.abrupt("return",_this6.decryptFilesIfRequired(listName,values));case 4:case"end":return _context13.stop();}}},_callee13);}))()));case 6:case"end":return _context14.stop();}}},_callee14,this);}));function getListEntries(_x10){return _getListEntries.apply(this,arguments);}return getListEntries;}()},{key:"getListEntry",value:function(){var _getListEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(listName,index){var _this7=this;return _regenerator["default"].wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return this.ensureContract();case 2:return _context16.abrupt("return",this.wrapPromise('get list entry',(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(){var value;return _regenerator["default"].wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return _this7.options.dataContract.getListEntry(_this7.contract,listName,index,_this7.config.accountId);case 2:value=_context15.sent;return _context15.abrupt("return",_this7.decryptFilesIfRequired(listName,value));case 4:case"end":return _context15.stop();}}},_callee15);}))()));case 3:case"end":return _context16.stop();}}},_callee16,this);}));function getListEntry(_x11,_x12){return _getListEntry.apply(this,arguments);}return getListEntry;}()},{key:"getListEntryCount",value:function(){var _getListEntryCount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(listName){return _regenerator["default"].wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return this.ensureContract();case 2:return _context17.abrupt("return",this.wrapPromise('get list entry count',this.options.dataContract.getListEntryCount(this.contract,listName)));case 3:case"end":return _context17.stop();}}},_callee17,this);}));function getListEntryCount(_x13){return _getListEntryCount.apply(this,arguments);}return getListEntryCount;}()},{key:"getContainerShareConfigForAccount",value:function(){var _getContainerShareConfigForAccount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee20(accountId){var _this8=this;var result,read,readWrite,sha3,_ref8,_ref9,description,sharings,authority,getCanWrite,tasks;return _regenerator["default"].wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.next=2;return this.ensureContract();case 2:result={accountId:accountId};read=[];readWrite=[];sha3=function sha3(){var _this8$options$nameRe;return(_this8$options$nameRe=_this8.options.nameResolver).soliditySha3.apply(_this8$options$nameRe,arguments);};_context20.next=8;return Promise.all([this.getDescription(),this.options.sharing.getSharingsFromContract(this.contract)]);case 8:_ref8=_context20.sent;_ref9=(0,_slicedToArray2["default"])(_ref8,2);description=_ref9[0];sharings=_ref9[1];if(!description.dataSchema){_context20.next=22;break;}_context20.t0=this.options.contractLoader;_context20.next=16;return this.options.executor.executeContractCall(this.contract,'authority');case 16:_context20.t1=_context20.sent;authority=_context20.t0.loadContract.call(_context20.t0,'DSRolesPerContract',_context20.t1);getCanWrite=function(){var _ref10=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(property,type){var enumType;return _regenerator["default"].wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:enumType=type==='array'?rights_and_roles_1.PropertyType.ListEntry:rights_and_roles_1.PropertyType.Entry;return _context18.abrupt("return",_this8.options.executor.executeContractCall(authority,'canCallOperation',accountId,'0x0000000000000000000000000000000000000000',_this8.options.rightsAndRoles.getOperationCapabilityHash(property,enumType,rights_and_roles_1.ModificationType.Set)));case 2:case"end":return _context18.stop();}}},_callee18);}));return function getCanWrite(_x15,_x16){return _ref10.apply(this,arguments);};}();tasks=Object.keys(description.dataSchema).map(function(property){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(){return _regenerator["default"].wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:if(!(property==='type')){_context19.next=2;break;}return _context19.abrupt("return");case 2:_context19.next=4;return getCanWrite(property,description.dataSchema[property].type);case 4:if(!_context19.sent){_context19.next=8;break;}readWrite.push(property);_context19.next=9;break;case 8:if(sharings[sha3(accountId)]&&sharings[sha3(accountId)][sha3(property)]){read.push(property);}case 9:case"end":return _context19.stop();}}},_callee19);}));});_context20.next=22;return Throttle.all(tasks);case 22:if(read.length){result.read=read;}if(readWrite.length){result.readWrite=readWrite;}return _context20.abrupt("return",result);case 25:case"end":return _context20.stop();}}},_callee20,this);}));function getContainerShareConfigForAccount(_x14){return _getContainerShareConfigForAccount.apply(this,arguments);}return getContainerShareConfigForAccount;}()},{key:"getContainerShareConfigs",value:function(){var _getContainerShareConfigs=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee22(){var _ref12,_this9=this;var roleMap,unique;return _regenerator["default"].wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return this.ensureContract();case 2:_context22.next=4;return this.options.rightsAndRoles.getMembers(this.contract);case 4:roleMap=_context22.sent;unique=Array.from(new Set((_ref12=[]).concat.apply(_ref12,(0,_toConsumableArray2["default"])(Object.values(roleMap)))));return _context22.abrupt("return",Throttle.all(unique.map(function(accountId){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee21(){return _regenerator["default"].wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:return _context21.abrupt("return",_this9.getContainerShareConfigForAccount(accountId));case 1:case"end":return _context21.stop();}}},_callee21);}));})));case 7:case"end":return _context22.stop();}}},_callee22,this);}));function getContainerShareConfigs(){return _getContainerShareConfigs.apply(this,arguments);}return getContainerShareConfigs;}()},{key:"getOwner",value:function(){var _getOwner=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee23(){var authContract;return _regenerator["default"].wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.t0=this.options.contractLoader;_context23.next=3;return this.getContractAddress();case 3:_context23.t1=_context23.sent;authContract=_context23.t0.loadContract.call(_context23.t0,'DSAuth',_context23.t1);_context23.next=7;return this.options.executor.executeContractCall(authContract,'owner');case 7:return _context23.abrupt("return",_context23.sent);case 8:case"end":return _context23.stop();}}},_callee23,this);}));function getOwner(){return _getOwner.apply(this,arguments);}return getOwner;}()},{key:"getVerifications",value:function(){var _getVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee25(){var _this10=this;var description,tags;return _regenerator["default"].wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.next=2;return this.ensureContract();case 2:_context25.next=4;return this.getDescription();case 4:description=_context25.sent;tags=description.tags||[];return _context25.abrupt("return",Throttle.all(tags.filter(function(tag){return tag.startsWith('verification:');}).map(function(tag){return tag.substr(13);}).map(function(topic){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee24(){return _regenerator["default"].wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:return _context24.abrupt("return",_this10.options.verifications.getVerifications(description.identity,topic,true));case 1:case"end":return _context24.stop();}}},_callee24);}));})));case 7:case"end":return _context25.stop();}}},_callee25,this);}));function getVerifications(){return _getVerifications.apply(this,arguments);}return getVerifications;}()},{key:"removeEntries",value:function(){var _removeEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee26(entries){var _ref15;var roleMap,unique,schemaProperties,listEntries;return _regenerator["default"].wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_context26.next=2;return this.ensureContract();case 2:_context26.next=4;return this.options.rightsAndRoles.getMembers(this.contract);case 4:roleMap=_context26.sent;unique=Array.from(new Set((_ref15=[]).concat.apply(_ref15,(0,_toConsumableArray2["default"])(Object.values(roleMap)))));if(!Array.isArray(entries)){entries=[entries];}_context26.next=9;return this.toPlugin(false);case 9:schemaProperties=_context26.sent.template.properties;listEntries=entries.filter(function(entry){return schemaProperties[entry].type==='list';});_context26.next=13;return this.unshareProperties(unique.map(function(accountId){return{accountId:accountId,readWrite:entries,removeListEntries:listEntries,write:entries,force:true};}));case 13:case"end":return _context26.stop();}}},_callee26,this);}));function removeEntries(_x17){return _removeEntries.apply(this,arguments);}return removeEntries;}()},{key:"setContainerShareConfigs",value:function(){var _setContainerShareConfigs=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee28(newConfigs,originalConfigs){var _this11=this;var shareConfigs,unshareConfigs;return _regenerator["default"].wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:shareConfigs=[];unshareConfigs=[];if(!Array.isArray(newConfigs)){newConfigs=[newConfigs];}if(!Array.isArray(originalConfigs)){originalConfigs=originalConfigs?[originalConfigs]:[];}_context28.next=6;return Promise.all(newConfigs.map(function(){var _ref16=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee27(newConfig){var shareConfig,unshareConfig,originalConfig,shareConfigProperties;return _regenerator["default"].wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:shareConfig={accountId:newConfig.accountId};unshareConfig={accountId:newConfig.accountId};originalConfig=originalConfigs.filter(function(orgConf){return orgConf.accountId===newConfig.accountId;})[0];if(originalConfig){_context27.next=7;break;}_context27.next=6;return _this11.getContainerShareConfigForAccount(newConfig.accountId);case 6:originalConfig=_context27.sent;case 7:shareConfigProperties=['read','readWrite','removeListEntries'];shareConfigProperties.forEach(function(type){newConfig[type]=newConfig[type]||[];originalConfig[type]=originalConfig[type]||[];shareConfig[type]=shareConfig[type]||[];unshareConfig[type]=unshareConfig[type]||[];});shareConfigProperties.forEach(function(type){newConfig[type].forEach(function(property){if(originalConfig[type].indexOf(property)===-1){shareConfig[type].push(property);}});originalConfig[type].forEach(function(property){if(newConfig[type].indexOf(property)===-1){unshareConfig[type].push(property);}});});unshareConfig.readWrite=unshareConfig.readWrite.concat(unshareConfig.read);delete unshareConfig.read;shareConfigs.push(shareConfig);unshareConfigs.push(unshareConfig);case 14:case"end":return _context27.stop();}}},_callee27);}));return function(_x20){return _ref16.apply(this,arguments);};}()));case 6:_context28.next=8;return this.shareProperties(shareConfigs);case 8:_context28.next=10;return this.unshareProperties(unshareConfigs);case 10:case"end":return _context28.stop();}}},_callee28,this);}));function setContainerShareConfigs(_x18,_x19){return _setContainerShareConfigs.apply(this,arguments);}return setContainerShareConfigs;}()},{key:"setDescription",value:function(){var _setDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee29(description){return _regenerator["default"].wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.next=2;return this.ensureContract();case 2:_context29.next=4;return this.wrapPromise('set description',this.options.description.setDescription(this.contract.options.address,{"public":description},this.config.accountId));case 4:case"end":return _context29.stop();}}},_callee29,this);}));function setDescription(_x21){return _setDescription.apply(this,arguments);}return setDescription;}()},{key:"setEntry",value:function(){var _setEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee30(entryName,value){var updateDescription,toSet,_args30=arguments;return _regenerator["default"].wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:updateDescription=_args30.length>2&&_args30[2]!==undefined?_args30[2]:true;_context30.next=3;return this.ensureContract();case 3:if(!updateDescription){_context30.next=6;break;}_context30.next=6;return this.ensureProperty(entryName,this.deriveSchema(value),'entry');case 6:_context30.next=8;return this.encryptFilesIfRequired(entryName,value);case 8:toSet=_context30.sent;_context30.next=11;return this.wrapPromise('set entry',this.options.dataContract.setEntry(this.contract,entryName,toSet,this.config.accountId));case 11:case"end":return _context30.stop();}}},_callee30,this);}));function setEntry(_x22,_x23){return _setEntry.apply(this,arguments);}return setEntry;}()},{key:"shareProperties",value:function(){var _shareProperties=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee32(shareConfigs){var _ref17,_this12=this;var authority,localShareConfig,schemaProperties,sharedProperties,missingProperties,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step;return _regenerator["default"].wrap(function _callee32$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_context33.next=2;return this.ensureContract();case 2:_context33.t0=this.options.contractLoader;_context33.next=5;return this.options.executor.executeContractCall(this.contract,'authority');case 5:_context33.t1=_context33.sent;authority=_context33.t0.loadContract.call(_context33.t0,'DSRolesPerContract',_context33.t1);_context33.next=9;return this.options.executor.executeContractCall(authority,'hasUserRole',this.config.accountId,0);case 9:if(_context33.sent){_context33.next=11;break;}throw new Error("current account \"".concat(this.config.accountId,"\" is unable to share properties, ")+"as it isn't owner of the underlying contract \"".concat(this.contract.options.address,"\""));case 11:localShareConfig=lodash_1.cloneDeep(shareConfigs);_context33.next=14;return this.toPlugin(false);case 14:schemaProperties=_context33.sent.template.properties;sharedProperties=Array.from(new Set((_ref17=[]).concat.apply(_ref17,(0,_toConsumableArray2["default"])(localShareConfig.map(function(shareConfig){return[].concat(shareConfig.read,shareConfig.readWrite);}))))).filter(function(property){return property!==undefined;});missingProperties=sharedProperties.filter(function(property){return!schemaProperties.hasOwnProperty(property);});if(!missingProperties.length){_context33.next=19;break;}throw new Error("tried to share properties, but missing one or more in schema: ".concat(missingProperties));case 19:_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context33.prev=22;_loop=_regenerator["default"].mark(function _loop(){var _step$value,accountId,_step$value$read,read,_step$value$readWrite,readWrite,_step$value$removeLis,removeListEntries,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,property,hash,rolesMap,binary,permittedRole,roleCount,hasRole,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,_property,propertyType,_hash,_rolesMap,_binary,_permittedRole,_roleCount,_hasRole;return _regenerator["default"].wrap(function _loop$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_step$value=_step.value,accountId=_step$value.accountId,_step$value$read=_step$value.read,read=_step$value$read===void 0?[]:_step$value$read,_step$value$readWrite=_step$value.readWrite,readWrite=_step$value$readWrite===void 0?[]:_step$value$readWrite,_step$value$removeLis=_step$value.removeListEntries,removeListEntries=_step$value$removeLis===void 0?[]:_step$value$removeLis;_context32.next=3;return _this12.options.executor.executeContractCall(_this12.contract,'isConsumer',accountId);case 3:if(_context32.sent){_context32.next=6;break;}_context32.next=6;return _this12.options.dataContract.inviteToContract(null,_this12.contract.options.address,_this12.config.accountId,accountId);case 6:if(!read.includes('type')){read.push('type');}_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context32.prev=10;_iterator2=readWrite[Symbol.iterator]();case 12:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context32.next=38;break;}property=_step2.value;hash=_this12.options.rightsAndRoles.getOperationCapabilityHash(property,getPropertyType(schemaProperties[property].type),rights_and_roles_1.ModificationType.Set);_context32.next=17;return _this12.options.executor.executeContractCall(authority,'getOperationCapabilityRoles','0x0000000000000000000000000000000000000000',hash);case 17:rolesMap=_context32.sent;binary=new bignumber_js_1["default"](rolesMap).toString(2);permittedRole=(0,_toConsumableArray2["default"])(binary).reverse().join('').indexOf('1');if(!(permittedRole<_this12.reservedRoles)){_context32.next=29;break;}_context32.next=23;return _this12.options.executor.executeContractCall(authority,'roleCount');case 23:roleCount=_context32.sent;if(!(roleCount>=256)){_context32.next=26;break;}throw new Error("could not share property \"".concat(property,"\", maximum role count reached"));case 26:permittedRole=Math.max(_this12.reservedRoles,roleCount);_context32.next=29;return _this12.options.rightsAndRoles.setOperationPermission(authority,_this12.config.accountId,permittedRole,property,getPropertyType(schemaProperties[property].type),rights_and_roles_1.ModificationType.Set,true);case 29:_context32.next=31;return _this12.options.executor.executeContractCall(authority,'hasUserRole',accountId,permittedRole);case 31:hasRole=_context32.sent;if(hasRole){_context32.next=35;break;}_context32.next=35;return _this12.options.rightsAndRoles.addAccountToRole(_this12.contract,_this12.config.accountId,accountId,permittedRole);case 35:_iteratorNormalCompletion2=true;_context32.next=12;break;case 38:_context32.next=44;break;case 40:_context32.prev=40;_context32.t0=_context32["catch"](10);_didIteratorError2=true;_iteratorError2=_context32.t0;case 44:_context32.prev=44;_context32.prev=45;if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}case 47:_context32.prev=47;if(!_didIteratorError2){_context32.next=50;break;}throw _iteratorError2;case 50:return _context32.finish(47);case 51:return _context32.finish(44);case 52:_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context32.prev=55;_iterator3=removeListEntries[Symbol.iterator]();case 57:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context32.next=86;break;}_property=_step3.value;propertyType=getPropertyType(schemaProperties[_property].type);if(!(propertyType!==rights_and_roles_1.PropertyType.ListEntry)){_context32.next=62;break;}throw new Error("property \"".concat(_property,"\" is no list. Can not give remove rights"));case 62:_hash=_this12.options.rightsAndRoles.getOperationCapabilityHash(_property,propertyType,rights_and_roles_1.ModificationType.Remove);_context32.next=65;return _this12.options.executor.executeContractCall(authority,'getOperationCapabilityRoles','0x0000000000000000000000000000000000000000',_hash);case 65:_rolesMap=_context32.sent;_binary=new bignumber_js_1["default"](_rolesMap).toString(2);_permittedRole=(0,_toConsumableArray2["default"])(_binary).reverse().join('').indexOf('1');if(!(_permittedRole<_this12.reservedRoles)){_context32.next=77;break;}_context32.next=71;return _this12.options.executor.executeContractCall(authority,'roleCount');case 71:_roleCount=_context32.sent;if(!(_roleCount>=256)){_context32.next=74;break;}throw new Error("could not share property \"".concat(_property,"\", maximum role count reached"));case 74:_permittedRole=Math.max(_this12.reservedRoles,_roleCount);_context32.next=77;return _this12.options.rightsAndRoles.setOperationPermission(authority,_this12.config.accountId,_permittedRole,_property,propertyType,rights_and_roles_1.ModificationType.Remove,true);case 77:_context32.next=79;return _this12.options.executor.executeContractCall(authority,'hasUserRole',accountId,_permittedRole);case 79:_hasRole=_context32.sent;if(_hasRole){_context32.next=83;break;}_context32.next=83;return _this12.options.rightsAndRoles.addAccountToRole(_this12.contract,_this12.config.accountId,accountId,_permittedRole);case 83:_iteratorNormalCompletion3=true;_context32.next=57;break;case 86:_context32.next=92;break;case 88:_context32.prev=88;_context32.t1=_context32["catch"](55);_didIteratorError3=true;_iteratorError3=_context32.t1;case 92:_context32.prev=92;_context32.prev=93;if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}case 95:_context32.prev=95;if(!_didIteratorError3){_context32.next=98;break;}throw _iteratorError3;case 98:return _context32.finish(95);case 99:return _context32.finish(92);case 100:_context32.next=102;return Promise.all([].concat((0,_toConsumableArray2["default"])(read),(0,_toConsumableArray2["default"])(readWrite)).map(function(property){return _this12.ensureKeyInSharing(property);}));case 102:_context32.next=104;return _this12.getMutex('sharing').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee31(){var sharings,sha3,isShared,modified,hashKeyToShare,blockNr,_i,_arr,property,contentKey;return _regenerator["default"].wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.next=2;return _this12.options.sharing.getSharingsFromContract(_this12.contract);case 2:sharings=_context31.sent;sha3=function sha3(){var _this12$options$nameR;return(_this12$options$nameR=_this12.options.nameResolver).soliditySha3.apply(_this12$options$nameR,arguments);};isShared=function isShared(section,block){if(!sharings[sha3(accountId)]||!sharings[sha3(accountId)][sha3(section)]||typeof block!=='undefined'&&!sharings[sha3(accountId)][sha3(section)][block]){return false;}return true;};modified=false;if(isShared('*','hashKey')){_context31.next=13;break;}_context31.next=9;return _this12.options.sharing.getHashKey(_this12.contract.options.address,_this12.config.accountId);case 9:hashKeyToShare=_context31.sent;_context31.next=12;return _this12.options.sharing.extendSharings(sharings,_this12.config.accountId,accountId,'*','hashKey',hashKeyToShare,null);case 12:modified=true;case 13:_context31.next=15;return _this12.options.web3.eth.getBlockNumber();case 15:blockNr=_context31.sent;_i=0,_arr=[].concat((0,_toConsumableArray2["default"])(read),(0,_toConsumableArray2["default"])(readWrite));case 17:if(!(_i<_arr.length)){_context31.next=29;break;}property=_arr[_i];if(isShared(property)){_context31.next=26;break;}_context31.next=22;return _this12.options.sharing.getKey(_this12.contract.options.address,_this12.config.accountId,property,blockNr);case 22:contentKey=_context31.sent;_context31.next=25;return _this12.options.sharing.extendSharings(sharings,_this12.config.accountId,accountId,property,0,contentKey);case 25:modified=true;case 26:_i++;_context31.next=17;break;case 29:if(!modified){_context31.next=32;break;}_context31.next=32;return _this12.options.sharing.saveSharingsToContract(_this12.contract.options.address,sharings,_this12.config.accountId);case 32:case"end":return _context31.stop();}}},_callee31);})));case 104:case"end":return _context32.stop();}}},_loop,null,[[10,40,44,52],[45,,47,51],[55,88,92,100],[93,,95,99]]);});_iterator=localShareConfig[Symbol.iterator]();case 25:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context33.next=30;break;}return _context33.delegateYield(_loop(),"t2",27);case 27:_iteratorNormalCompletion=true;_context33.next=25;break;case 30:_context33.next=36;break;case 32:_context33.prev=32;_context33.t3=_context33["catch"](22);_didIteratorError=true;_iteratorError=_context33.t3;case 36:_context33.prev=36;_context33.prev=37;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 39:_context33.prev=39;if(!_didIteratorError){_context33.next=42;break;}throw _iteratorError;case 42:return _context33.finish(39);case 43:return _context33.finish(36);case 44:case"end":return _context33.stop();}}},_callee32,this,[[22,32,36,44],[37,,39,43]]);}));function shareProperties(_x24){return _shareProperties.apply(this,arguments);}return shareProperties;}()},{key:"storeData",value:function(){var _storeData=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee34(data){var _this13=this;var description,tasks;return _regenerator["default"].wrap(function _callee34$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.next=2;return this.ensureContract();case 2:_context35.next=4;return this.getDescription();case 4:description=_context35.sent;tasks=Object.keys(data).map(function(property){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee33(){var type;return _regenerator["default"].wrap(function _callee33$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:if(description.dataSchema&&description.dataSchema[property]){type=description.dataSchema[property].type;}else{type=_this13.deriveSchema(data[property]).type;}_context34.next=3;return type==='array'?_this13.addListEntries(property,data[property]):_this13.setEntry(property,data[property]);case 3:case"end":return _context34.stop();}}},_callee33);}));});_context35.next=8;return Throttle.all(tasks);case 8:case"end":return _context35.stop();}}},_callee34,this);}));function storeData(_x25){return _storeData.apply(this,arguments);}return storeData;}()},{key:"toPlugin",value:function(){var _toPlugin=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee35(){var getValues,description,template,plugin,readableEntries,containerShareConfig,authority,_i2,_Object$keys,property,dataSchema,type,value,_args36=arguments;return _regenerator["default"].wrap(function _callee35$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:getValues=_args36.length>0&&_args36[0]!==undefined?_args36[0]:false;_context36.next=3;return this.ensureContract();case 3:_context36.next=5;return this.getDescription();case 5:description=_context36.sent;template={properties:{}};plugin={description:description,template:template};if(!getValues){_context36.next=13;break;}_context36.next=11;return this.getContainerShareConfigForAccount(this.config.accountId);case 11:containerShareConfig=_context36.sent;readableEntries=[].concat(containerShareConfig.read||[],containerShareConfig.readWrite||[]);case 13:if(!description.dataSchema){_context36.next=46;break;}_context36.t0=this.options.contractLoader;_context36.next=17;return this.options.executor.executeContractCall(this.contract,'authority');case 17:_context36.t1=_context36.sent;authority=_context36.t0.loadContract.call(_context36.t0,'DSRolesPerContract',_context36.t1);_i2=0,_Object$keys=Object.keys(description.dataSchema);case 20:if(!(_i2<_Object$keys.length)){_context36.next=46;break;}property=_Object$keys[_i2];if(!(property==='type')){_context36.next=24;break;}return _context36.abrupt("continue",43);case 24:dataSchema=description.dataSchema[property];type=dataSchema.type==='array'?'list':'entry';template.properties[property]={dataSchema:dataSchema,permissions:{},type:type};if(!(getValues&&dataSchema.type!=='array')){_context36.next=40;break;}if(!(readableEntries.indexOf(property)!==-1)){_context36.next=40;break;}value=void 0;_context36.prev=30;_context36.next=33;return this.getEntry(property);case 33:value=_context36.sent;_context36.next=39;break;case 36:_context36.prev=36;_context36.t2=_context36["catch"](30);this.log("Could not load value for entry ".concat(property," in toPlugin:\n                ").concat(_context36.t2.message),'error');case 39:if(value&&value!=='0x0000000000000000000000000000000000000000000000000000000000000000'){template.properties[property].value=value;}case 40:_context36.next=42;return this.getRolePermission(authority,property,type);case 42:template.properties[property].permissions=_context36.sent;case 43:_i2++;_context36.next=20;break;case 46:_context36.next=48;return this.getEntry('type');case 48:template.type=_context36.sent;return _context36.abrupt("return",plugin);case 50:case"end":return _context36.stop();}}},_callee35,this,[[30,36]]);}));function toPlugin(){return _toPlugin.apply(this,arguments);}return toPlugin;}()},{key:"unshareProperties",value:function(){var _unshareProperties=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee38(unshareConfigs){var _this14=this,_ref20;var authority,unpermittedOwnerRemoval,localUnshareConfigs,schemaProperties,sharedProperties,missingProperties,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_iterator4,_step4,_step4$value$removeLi,removeListEntries,_iteratorNormalCompletion6,_didIteratorError6,_iteratorError6,_iterator6,_step6,property,propertyType,permittedRole,_iteratorNormalCompletion5,_didIteratorError5,_iteratorError5,_loop2,_iterator5,_step5;return _regenerator["default"].wrap(function _callee38$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:_context40.next=2;return this.ensureContract();case 2:this.log("unsharing properties",'debug');_context40.t0=this.options.contractLoader;_context40.next=6;return this.options.executor.executeContractCall(this.contract,'authority');case 6:_context40.t1=_context40.sent;authority=_context40.t0.loadContract.call(_context40.t0,'DSRolesPerContract',_context40.t1);_context40.next=10;return this.options.executor.executeContractCall(authority,'hasUserRole',this.config.accountId,0);case 10:if(_context40.sent){_context40.next=12;break;}throw new Error("current account \"".concat(this.config.accountId,"\" is unable to unshare ")+'properties, as it isn\'t owner of the underlying contract '+this.contract.options.address);case 12:unpermittedOwnerRemoval=unshareConfigs.filter(function(unshareConfig){return unshareConfig.accountId===_this14.config.accountId&&!unshareConfig.force;});if(!(unpermittedOwnerRemoval.length!==0)){_context40.next=15;break;}throw new Error("current account \"".concat(this.config.accountId,"\" is owner of the contract ")+'and cannot remove himself from sharing without force attribute'+this.contract.options.address);case 15:localUnshareConfigs=lodash_1.cloneDeep(unshareConfigs);_context40.next=18;return this.toPlugin(false);case 18:schemaProperties=_context40.sent.template.properties;sharedProperties=Array.from(new Set((_ref20=[]).concat.apply(_ref20,(0,_toConsumableArray2["default"])(localUnshareConfigs.map(function(unshareConfig){return[].concat(unshareConfig.write,unshareConfig.readWrite);}))))).filter(function(property){return property!==undefined;});missingProperties=sharedProperties.filter(function(property){return!schemaProperties.hasOwnProperty(property);});if(!missingProperties.length){_context40.next=23;break;}throw new Error("tried to share properties, but missing one or more in schema: ".concat(missingProperties));case 23:_iteratorNormalCompletion4=true;_didIteratorError4=false;_iteratorError4=undefined;_context40.prev=26;_iterator4=localUnshareConfigs[Symbol.iterator]();case 28:if(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done){_context40.next=65;break;}_step4$value$removeLi=_step4.value.removeListEntries,removeListEntries=_step4$value$removeLi===void 0?[]:_step4$value$removeLi;_iteratorNormalCompletion6=true;_didIteratorError6=false;_iteratorError6=undefined;_context40.prev=33;_iterator6=removeListEntries[Symbol.iterator]();case 35:if(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done){_context40.next=48;break;}property=_step6.value;propertyType=getPropertyType(schemaProperties[property].type);if(!(propertyType!==rights_and_roles_1.PropertyType.ListEntry)){_context40.next=40;break;}throw new Error("property \"".concat(property,"\" is no list. Can not give remove rights"));case 40:_context40.next=42;return this.getPermittedRole(authority,property,propertyType,rights_and_roles_1.ModificationType.Remove);case 42:permittedRole=_context40.sent;if(!(permittedRole<this.reservedRoles)){_context40.next=45;break;}throw new Error("can not find a role that has remove permissions for list \"".concat(property,"\""));case 45:_iteratorNormalCompletion6=true;_context40.next=35;break;case 48:_context40.next=54;break;case 50:_context40.prev=50;_context40.t2=_context40["catch"](33);_didIteratorError6=true;_iteratorError6=_context40.t2;case 54:_context40.prev=54;_context40.prev=55;if(!_iteratorNormalCompletion6&&_iterator6["return"]!=null){_iterator6["return"]();}case 57:_context40.prev=57;if(!_didIteratorError6){_context40.next=60;break;}throw _iteratorError6;case 60:return _context40.finish(57);case 61:return _context40.finish(54);case 62:_iteratorNormalCompletion4=true;_context40.next=28;break;case 65:_context40.next=71;break;case 67:_context40.prev=67;_context40.t3=_context40["catch"](26);_didIteratorError4=true;_iteratorError4=_context40.t3;case 71:_context40.prev=71;_context40.prev=72;if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]();}case 74:_context40.prev=74;if(!_didIteratorError4){_context40.next=77;break;}throw _iteratorError4;case 77:return _context40.finish(74);case 78:return _context40.finish(71);case 79:_iteratorNormalCompletion5=true;_didIteratorError5=false;_iteratorError5=undefined;_context40.prev=82;_loop2=_regenerator["default"].mark(function _loop2(){var _step5$value,accountId,_step5$value$readWrit,readWrite,_step5$value$removeLi,removeListEntries,_step5$value$write,write,_i3,_arr2,_property4,_propertyType,_permittedRole3,hasRole,memberCount,shareConfig,remainingFields,_permittedRole2,_iteratorNormalCompletion7,_didIteratorError7,_iteratorError7,_iterator7,_step7,_property5,_propertyType2,_permittedRole4,_hasRole2,_memberCount;return _regenerator["default"].wrap(function _loop2$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:_step5$value=_step5.value,accountId=_step5$value.accountId,_step5$value$readWrit=_step5$value.readWrite,readWrite=_step5$value$readWrit===void 0?[]:_step5$value$readWrit,_step5$value$removeLi=_step5$value.removeListEntries,removeListEntries=_step5$value$removeLi===void 0?[]:_step5$value$removeLi,_step5$value$write=_step5$value.write,write=_step5$value$write===void 0?[]:_step5$value$write;_this14.log("checking unshare configs",'debug');_i3=0,_arr2=[].concat((0,_toConsumableArray2["default"])(readWrite),(0,_toConsumableArray2["default"])(write));case 3:if(!(_i3<_arr2.length)){_context39.next=30;break;}_property4=_arr2[_i3];_this14.log("removing write permissions for ".concat(_property4),'debug');_propertyType=getPropertyType(schemaProperties[_property4].type);_context39.next=9;return _this14.getPermittedRole(authority,_property4,_propertyType,rights_and_roles_1.ModificationType.Set);case 9:_permittedRole3=_context39.sent;if(!(_permittedRole3<_this14.reservedRoles)){_context39.next=14;break;}_this14.log('can not find a role that has write permissions for property '+_property4);_context39.next=27;break;case 14:_context39.next=16;return _this14.options.executor.executeContractCall(authority,'hasUserRole',accountId,_permittedRole3);case 16:hasRole=_context39.sent;if(!hasRole){_context39.next=20;break;}_context39.next=20;return _this14.options.rightsAndRoles.removeAccountFromRole(_this14.contract,_this14.config.accountId,accountId,_permittedRole3);case 20:_context39.next=22;return _this14.options.executor.executeContractCall(authority,'role2userCount',_permittedRole3);case 22:memberCount=_context39.sent;if(!memberCount.eq(0)){_context39.next=27;break;}_this14.log("removing role for property \"".concat(_property4,"\""),'debug');_context39.next=27;return _this14.options.rightsAndRoles.setOperationPermission(authority,_this14.config.accountId,_permittedRole3,_property4,getPropertyType(schemaProperties[_property4].type),rights_and_roles_1.ModificationType.Set,false);case 27:_i3++;_context39.next=3;break;case 30:_context39.next=32;return _this14.getContainerShareConfigForAccount(accountId);case 32:shareConfig=_context39.sent;remainingFields=Array.from(new Set([].concat((0,_toConsumableArray2["default"])(shareConfig.read?shareConfig.read:[]),(0,_toConsumableArray2["default"])(shareConfig.readWrite?shareConfig.readWrite:[]))));if(!(remainingFields.length===1&&remainingFields[0]==='type')){_context39.next=48;break;}_context39.next=37;return _this14.getPermittedRole(authority,'type',rights_and_roles_1.PropertyType.Entry,rights_and_roles_1.ModificationType.Set);case 37:_permittedRole2=_context39.sent;_context39.next=40;return _this14.options.rightsAndRoles.removeAccountFromRole(_this14.contract,_this14.config.accountId,accountId,_permittedRole2);case 40:readWrite.push('type');_context39.t0=_this14.options.dataContract;_context39.next=44;return _this14.getContractAddress();case 44:_context39.t1=_context39.sent;_context39.t2=_this14.config.accountId;_context39.t3=accountId;_context39.t0.removeFromContract.call(_context39.t0,null,_context39.t1,_context39.t2,_context39.t3);case 48:_iteratorNormalCompletion7=true;_didIteratorError7=false;_iteratorError7=undefined;_context39.prev=51;_iterator7=removeListEntries[Symbol.iterator]();case 53:if(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done){_context39.next=74;break;}_property5=_step7.value;_propertyType2=getPropertyType(schemaProperties[_property5].type);_context39.next=58;return _this14.getPermittedRole(authority,_property5,_propertyType2,rights_and_roles_1.ModificationType.Remove);case 58:_permittedRole4=_context39.sent;_context39.next=61;return _this14.options.executor.executeContractCall(authority,'hasUserRole',accountId,_permittedRole4);case 61:_hasRole2=_context39.sent;if(!_hasRole2){_context39.next=65;break;}_context39.next=65;return _this14.options.rightsAndRoles.removeAccountFromRole(_this14.contract,_this14.config.accountId,accountId,_permittedRole4);case 65:_context39.next=67;return _this14.options.executor.executeContractCall(authority,'role2userCount',_permittedRole4);case 67:_memberCount=_context39.sent;if(!_memberCount.eq(0)){_context39.next=71;break;}_context39.next=71;return _this14.options.rightsAndRoles.setOperationPermission(authority,_this14.config.accountId,_permittedRole4,_property5,getPropertyType(schemaProperties[_property5].type),rights_and_roles_1.ModificationType.Set,false);case 71:_iteratorNormalCompletion7=true;_context39.next=53;break;case 74:_context39.next=80;break;case 76:_context39.prev=76;_context39.t4=_context39["catch"](51);_didIteratorError7=true;_iteratorError7=_context39.t4;case 80:_context39.prev=80;_context39.prev=81;if(!_iteratorNormalCompletion7&&_iterator7["return"]!=null){_iterator7["return"]();}case 83:_context39.prev=83;if(!_didIteratorError7){_context39.next=86;break;}throw _iteratorError7;case 86:return _context39.finish(83);case 87:return _context39.finish(80);case 88:_context39.next=90;return _this14.getMutex('sharing').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee37(){var sharings,sha3,isShared,modified,_iteratorNormalCompletion8,_didIteratorError8,_iteratorError8,_iterator8,_step8,_property3;return _regenerator["default"].wrap(function _callee37$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:_this14.log("checking read permisssions",'debug');_context38.next=3;return _this14.options.sharing.getSharingsFromContract(_this14.contract);case 3:sharings=_context38.sent;sha3=function sha3(){var _this14$options$nameR;return(_this14$options$nameR=_this14.options.nameResolver).soliditySha3.apply(_this14$options$nameR,arguments);};isShared=function isShared(section,block){if(!sharings[sha3(accountId)]||!sharings[sha3(accountId)][sha3(section)]||typeof block!=='undefined'&&!sharings[sha3(accountId)][sha3(section)][block]){return false;}return true;};modified=false;_iteratorNormalCompletion8=true;_didIteratorError8=false;_iteratorError8=undefined;_context38.prev=10;_iterator8=readWrite[Symbol.iterator]();case 12:if(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done){_context38.next=23;break;}_property3=_step8.value;_this14.log("checking read permissions for ".concat(_property3),'debug');if(!isShared(_property3)){_context38.next=20;break;}_this14.log("removing key for ".concat(_property3),'debug');_context38.next=19;return _this14.options.sharing.trimSharings(sharings,accountId,_property3);case 19:modified=true;case 20:_iteratorNormalCompletion8=true;_context38.next=12;break;case 23:_context38.next=29;break;case 25:_context38.prev=25;_context38.t0=_context38["catch"](10);_didIteratorError8=true;_iteratorError8=_context38.t0;case 29:_context38.prev=29;_context38.prev=30;if(!_iteratorNormalCompletion8&&_iterator8["return"]!=null){_iterator8["return"]();}case 32:_context38.prev=32;if(!_didIteratorError8){_context38.next=35;break;}throw _iteratorError8;case 35:return _context38.finish(32);case 36:return _context38.finish(29);case 37:if(!(sharings[sha3(accountId)]&&Object.keys(sharings[sha3(accountId)]).length===2&&sharings[sha3(accountId)][sha3('*')]&&Object.keys(sharings[sha3(accountId)][sha3('*')]).length===1&&sharings[sha3(accountId)][sha3('*')].hashKey&&sharings[sha3(accountId)][sha3('type')])){_context38.next=42;break;}_this14.log("account from sharings",'debug');_context38.next=41;return _this14.options.sharing.trimSharings(sharings,accountId);case 41:modified=true;case 42:if(!modified){_context38.next=46;break;}_this14.log("sharings updated, saving sharings",'debug');_context38.next=46;return _this14.options.sharing.saveSharingsToContract(_this14.contract.options.address,sharings,_this14.config.accountId);case 46:_context38.next=48;return _this14.getMutex('description').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee36(){var description,propertyHashes,_i4,_Object$keys2,accountHash,_iteratorNormalCompletion9,_didIteratorError9,_iteratorError9,_iterator9,_step9,_property2;return _regenerator["default"].wrap(function _callee36$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_context37.next=2;return _this14.getDescription();case 2:description=_context37.sent;propertyHashes=[];for(_i4=0,_Object$keys2=Object.keys(sharings);_i4<_Object$keys2.length;_i4++){accountHash=_Object$keys2[_i4];propertyHashes.push.apply(propertyHashes,(0,_toConsumableArray2["default"])(Object.keys(sharings[accountHash])));}modified=false;_iteratorNormalCompletion9=true;_didIteratorError9=false;_iteratorError9=undefined;_context37.prev=9;for(_iterator9=readWrite[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){_property2=_step9.value;if(!propertyHashes.includes(_this14.options.nameResolver.soliditySha3(_property2))){delete description.dataSchema[_property2];modified=true;}}_context37.next=17;break;case 13:_context37.prev=13;_context37.t0=_context37["catch"](9);_didIteratorError9=true;_iteratorError9=_context37.t0;case 17:_context37.prev=17;_context37.prev=18;if(!_iteratorNormalCompletion9&&_iterator9["return"]!=null){_iterator9["return"]();}case 20:_context37.prev=20;if(!_didIteratorError9){_context37.next=23;break;}throw _iteratorError9;case 23:return _context37.finish(20);case 24:return _context37.finish(17);case 25:if(!modified){_context37.next=28;break;}_context37.next=28;return _this14.setDescription(description);case 28:case"end":return _context37.stop();}}},_callee36,null,[[9,13,17,25],[18,,20,24]]);})));case 48:case"end":return _context38.stop();}}},_callee37,null,[[10,25,29,37],[30,,32,36]]);})));case 90:case"end":return _context39.stop();}}},_loop2,null,[[51,76,80,88],[81,,83,87]]);});_iterator5=localUnshareConfigs[Symbol.iterator]();case 85:if(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done){_context40.next=90;break;}return _context40.delegateYield(_loop2(),"t4",87);case 87:_iteratorNormalCompletion5=true;_context40.next=85;break;case 90:_context40.next=96;break;case 92:_context40.prev=92;_context40.t5=_context40["catch"](82);_didIteratorError5=true;_iteratorError5=_context40.t5;case 96:_context40.prev=96;_context40.prev=97;if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]();}case 99:_context40.prev=99;if(!_didIteratorError5){_context40.next=102;break;}throw _iteratorError5;case 102:return _context40.finish(99);case 103:return _context40.finish(96);case 104:case"end":return _context40.stop();}}},_callee38,this,[[26,67,71,79],[33,50,54,62],[55,,57,61],[72,,74,78],[82,92,96,104],[97,,99,103]]);}));function unshareProperties(_x26){return _unshareProperties.apply(this,arguments);}return unshareProperties;}()},{key:"applyIfEncrypted",value:function(){var _applyIfEncrypted=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee39(subSchema,toInspect,toApply){var _this15=this;var transformed,_i5,_Object$keys3,key;return _regenerator["default"].wrap(function _callee39$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:if(!this.isEncryptedFile(subSchema)){_context41.next=4;break;}return _context41.abrupt("return",toApply(toInspect));case 4:if(!(subSchema.type==='array'&&this.isEncryptedFile(subSchema.items))){_context41.next=8;break;}return _context41.abrupt("return",Promise.all(toInspect.map(function(entry){return toApply(entry);})));case 8:if(!(subSchema.type==='array')){_context41.next=12;break;}return _context41.abrupt("return",Promise.all(toInspect.map(function(entry){return _this15.applyIfEncrypted(subSchema.items,entry,toApply);})));case 12:if(!(subSchema.type==='object')){_context41.next=28;break;}transformed={};_i5=0,_Object$keys3=Object.keys(toInspect);case 15:if(!(_i5<_Object$keys3.length)){_context41.next=27;break;}key=_Object$keys3[_i5];if(!(subSchema.properties&&subSchema.properties[key])){_context41.next=23;break;}_context41.next=20;return this.applyIfEncrypted(subSchema.properties[key],toInspect[key],toApply);case 20:transformed[key]=_context41.sent;_context41.next=24;break;case 23:transformed[key]=toInspect[key];case 24:_i5++;_context41.next=15;break;case 27:return _context41.abrupt("return",transformed);case 28:return _context41.abrupt("return",toInspect);case 29:case"end":return _context41.stop();}}},_callee39,this);}));function applyIfEncrypted(_x27,_x28,_x29){return _applyIfEncrypted.apply(this,arguments);}return applyIfEncrypted;}()},{key:"decryptFilesIfRequired",value:function(){var _decryptFilesIfRequired=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee42(propertyName,value){var _this16=this;var description,decrypt;return _regenerator["default"].wrap(function _callee42$(_context44){while(1){switch(_context44.prev=_context44.next){case 0:if(!(value==='0x0000000000000000000000000000000000000000000000000000000000000000')){_context44.next=2;break;}return _context44.abrupt("return",value);case 2:_context44.next=4;return this.getDescription();case 4:description=_context44.sent;if(!(!description.dataSchema||!description.dataSchema[propertyName])){_context44.next=7;break;}throw new Error("could not find description for entry \"".concat(propertyName,"\""));case 7:decrypt=function(){var _ref23=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee41(toEncrypt){var encryptedFiles;return _regenerator["default"].wrap(function _callee41$(_context43){while(1){switch(_context43.prev=_context43.next){case 0:_context43.next=2;return Throttle.all(toEncrypt.files.map(function(file){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee40(){var decrypted;return _regenerator["default"].wrap(function _callee40$(_context42){while(1){switch(_context42.prev=_context42.next){case 0:_context42.prev=0;JSON.parse(file);_context42.next=8;break;case 4:_context42.prev=4;_context42.t0=_context42["catch"](0);_this16.log("can't validate file ".concat(file,", no valid JSON"),'error');return _context42.abrupt("return",null);case 8:_context42.next=10;return _this16.options.dataContract.decrypt(file,_this16.contract,_this16.config.accountId,propertyName);case 10:decrypted=_context42.sent;return _context42.abrupt("return",decrypted["private"]);case 12:case"end":return _context42.stop();}}},_callee40,null,[[0,4]]);}));}));case 2:encryptedFiles=_context43.sent;return _context43.abrupt("return",{files:encryptedFiles.filter(function(f){return f!==null;})});case 4:case"end":return _context43.stop();}}},_callee41);}));return function decrypt(_x32){return _ref23.apply(this,arguments);};}();return _context44.abrupt("return",this.applyIfEncrypted(description.dataSchema[propertyName],value,decrypt));case 9:case"end":return _context44.stop();}}},_callee42,this);}));function decryptFilesIfRequired(_x30,_x31){return _decryptFilesIfRequired.apply(this,arguments);}return decryptFilesIfRequired;}()},{key:"deriveSchema",value:function deriveSchema(value){var visited=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(visited.includes(value)){throw new Error('could not derive type of value; cyclic references detected');}var schema;var type=(0,_typeof2["default"])(value);if(['boolean','number','string'].includes(type)){schema={type:type};}else if(type==='object'){if(Array.isArray(value)){schema={type:'array'};if(value.length){schema.items=this.deriveSchema(value[0],visited.concat([value]));}}else{schema={type:'object'};}}return schema;}},{key:"encryptFilesIfRequired",value:function(){var _encryptFilesIfRequired=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee45(propertyName,value){var _this17=this;var description,blockNr,encrypt;return _regenerator["default"].wrap(function _callee45$(_context47){while(1){switch(_context47.prev=_context47.next){case 0:_context47.next=2;return this.getDescription();case 2:description=_context47.sent;if(!(!description.dataSchema||!description.dataSchema[propertyName])){_context47.next=5;break;}throw new Error("could not find description for entry \"".concat(propertyName,"\""));case 5:_context47.next=7;return this.options.web3.eth.getBlockNumber();case 7:blockNr=_context47.sent;encrypt=function(){var _ref25=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee44(toEncrypt){var encryptedFiles;return _regenerator["default"].wrap(function _callee44$(_context46){while(1){switch(_context46.prev=_context46.next){case 0:_context46.next=2;return Throttle.all(toEncrypt.files.map(function(file){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee43(){return _regenerator["default"].wrap(function _callee43$(_context45){while(1){switch(_context45.prev=_context45.next){case 0:return _context45.abrupt("return",_this17.options.dataContract.encrypt({"private":file},_this17.contract,_this17.config.accountId,propertyName,blockNr,'aesBlob'));case 1:case"end":return _context45.stop();}}},_callee43);}));}));case 2:encryptedFiles=_context46.sent;return _context46.abrupt("return",{files:encryptedFiles});case 4:case"end":return _context46.stop();}}},_callee44);}));return function encrypt(_x35){return _ref25.apply(this,arguments);};}();return _context47.abrupt("return",this.applyIfEncrypted(description.dataSchema[propertyName],value,encrypt));case 10:case"end":return _context47.stop();}}},_callee45,this);}));function encryptFilesIfRequired(_x33,_x34){return _encryptFilesIfRequired.apply(this,arguments);}return encryptFilesIfRequired;}()},{key:"ensureContract",value:function(){var _ensureContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee46(){var address;return _regenerator["default"].wrap(function _callee46$(_context48){while(1){switch(_context48.prev=_context48.next){case 0:if(!this.contract){_context48.next=2;break;}return _context48.abrupt("return");case 2:checkConfigProperties(this.config,['address']);if(!this.config.address.startsWith('0x')){_context48.next=7;break;}_context48.t0=this.config.address;_context48.next=10;break;case 7:_context48.next=9;return this.options.nameResolver.getAddress(this.config.address);case 9:_context48.t0=_context48.sent;case 10:address=_context48.t0;this.contract=this.options.contractLoader.loadContract('DataContract',address);case 12:case"end":return _context48.stop();}}},_callee46,this);}));function ensureContract(){return _ensureContract.apply(this,arguments);}return ensureContract;}()},{key:"ensureKeyInSharing",value:function(){var _ensureKeyInSharing=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee48(entryName){var _this18=this;var key,cryptor;return _regenerator["default"].wrap(function _callee48$(_context50){while(1){switch(_context50.prev=_context50.next){case 0:_context50.next=2;return this.options.sharing.getKey(this.contract.options.address,this.config.accountId,entryName);case 2:key=_context50.sent;if(key){_context50.next=10;break;}cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo('aes');_context50.next=7;return cryptor.generateKey();case 7:key=_context50.sent;_context50.next=10;return this.getMutex('sharing').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee47(){return _regenerator["default"].wrap(function _callee47$(_context49){while(1){switch(_context49.prev=_context49.next){case 0:_this18.options.sharing.clearCache();_this18.options.dataContract.clearSharingCache();_context49.next=4;return _this18.options.sharing.addSharing(_this18.contract.options.address,_this18.config.accountId,_this18.config.accountId,entryName,0,key);case 4:case"end":return _context49.stop();}}},_callee47);})));case 10:case"end":return _context50.stop();}}},_callee48,this);}));function ensureKeyInSharing(_x36){return _ensureKeyInSharing.apply(this,arguments);}return ensureKeyInSharing;}()},{key:"ensurePermissionOnField",value:function(){var _ensurePermissionOnField=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee49(name,type){var accountId,role,authority,enumType,canSetField,_args51=arguments;return _regenerator["default"].wrap(function _callee49$(_context51){while(1){switch(_context51.prev=_context51.next){case 0:accountId=_args51.length>2&&_args51[2]!==undefined?_args51[2]:this.config.accountId;role=_args51.length>3&&_args51[3]!==undefined?_args51[3]:0;_context51.t0=this.options.contractLoader;_context51.next=5;return this.options.executor.executeContractCall(this.contract,'authority');case 5:_context51.t1=_context51.sent;authority=_context51.t0.loadContract.call(_context51.t0,'DSRolesPerContract',_context51.t1);enumType=getPropertyType(type);_context51.next=10;return this.options.executor.executeContractCall(authority,'canCallOperation',accountId,'0x0000000000000000000000000000000000000000',this.options.rightsAndRoles.getOperationCapabilityHash(name,enumType,rights_and_roles_1.ModificationType.Set));case 10:canSetField=_context51.sent;if(canSetField){_context51.next=15;break;}this.log("adding permissions on ".concat(type," \"").concat(name,"\" for role ").concat(role," to enable account ")+"\"".concat(accountId,"\" on container \"").concat(this.contract.address,"\""),'debug');_context51.next=15;return this.options.rightsAndRoles.setOperationPermission(this.contract,this.config.accountId,role,name,enumType,rights_and_roles_1.ModificationType.Set,true);case 15:case"end":return _context51.stop();}}},_callee49,this);}));function ensurePermissionOnField(_x37,_x38){return _ensurePermissionOnField.apply(this,arguments);}return ensurePermissionOnField;}()},{key:"getMutex",value:function getMutex(name){if(!this.mutexes[name]){this.mutexes[name]=new async_mutex_1.Mutex();}return this.mutexes[name];}},{key:"getOperationHash",value:function getOperationHash(name,type){var operation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'set';var keccak256=this.options.web3.utils.soliditySha3;var label=type==='entry'?'0x84f3db82fb6cd291ed32c6f64f7f5eda656bda516d17c6bc146631a1f05a1833':'0x7da2a80303fd8a8b312bb0f3403e22702ece25aa85a5e213371a770a74a50106';var operationHash;if(operation==='set'){operationHash='0xd2f67e6aeaad1ab7487a680eb9d3363a597afa7a3de33fa9bf3ae6edcb88435d';}else if(operation==='remove'){operationHash='0x8dd27a19ebb249760a6490a8d33442a54b5c3c8504068964b74388bfe83458be';}return keccak256(keccak256(label,keccak256(name)),operationHash);}},{key:"getPermittedRole",value:function(){var _getPermittedRole=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee50(authority,property,propertyType,modificationType){var hash,rolesMap,binary,index,permittedRole;return _regenerator["default"].wrap(function _callee50$(_context52){while(1){switch(_context52.prev=_context52.next){case 0:hash=this.options.rightsAndRoles.getOperationCapabilityHash(property,propertyType,modificationType);_context52.next=3;return this.options.executor.executeContractCall(authority,'getOperationCapabilityRoles','0x0000000000000000000000000000000000000000',hash);case 3:rolesMap=_context52.sent;binary=new bignumber_js_1["default"](rolesMap).toString(2);index=(0,_toConsumableArray2["default"])(binary.substr(0,binary.length-this.reservedRoles)).reverse().join('').indexOf('1');permittedRole=index===-1?index:index+this.reservedRoles;return _context52.abrupt("return",permittedRole);case 8:case"end":return _context52.stop();}}},_callee50,this);}));function getPermittedRole(_x39,_x40,_x41,_x42){return _getPermittedRole.apply(this,arguments);}return getPermittedRole;}()},{key:"getRolePermission",value:function(){var _getRolePermission=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee51(authorityContract,property,type){var _this19=this;var permissions,_loop3,_i6,_arr3;return _regenerator["default"].wrap(function _callee51$(_context54){while(1){switch(_context54.prev=_context54.next){case 0:permissions={};_loop3=_regenerator["default"].mark(function _loop3(){var operation,rolesMap,checkNumber,roleMap;return _regenerator["default"].wrap(function _loop3$(_context53){while(1){switch(_context53.prev=_context53.next){case 0:operation=_arr3[_i6];_context53.next=3;return _this19.options.executor.executeContractCall(authorityContract,'getOperationCapabilityRoles',_this19.config.address,_this19.options.rightsAndRoles.getOperationCapabilityHash(property,getPropertyType(type),getModificationType(operation)));case 3:rolesMap=_context53.sent;checkNumber=function checkNumber(bnum){var results=[];for(var i=0;i<256;i++){var divisor=new bignumber_js_1["default"](2).pow(i);if(divisor.gt(bnum)){break;}results.push(parseInt(bnum.dividedToIntegerBy(divisor).mod(2).toString(),10));}return results;};roleMap=checkNumber(new bignumber_js_1["default"](rolesMap));roleMap.forEach(function(value,i){if(value){if(!permissions[i]){permissions[i]=[];}permissions[i].push(operation);}});case 7:case"end":return _context53.stop();}}},_loop3);});_i6=0,_arr3=['set','remove'];case 3:if(!(_i6<_arr3.length)){_context54.next=8;break;}return _context54.delegateYield(_loop3(),"t0",5);case 5:_i6++;_context54.next=3;break;case 8:return _context54.abrupt("return",permissions);case 9:case"end":return _context54.stop();}}},_callee51);}));function getRolePermission(_x43,_x44,_x45){return _getRolePermission.apply(this,arguments);}return getRolePermission;}()},{key:"isEncryptedFile",value:function isEncryptedFile(schema){if(schema.type==='object'&&schema.$comment){try{return!!JSON.parse(schema.$comment).isEncryptedFile;}catch(ex){}}return false;}},{key:"wrapPromise",value:function(){var _wrapPromise=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee52(task,promise){return _regenerator["default"].wrap(function _callee52$(_context55){while(1){switch(_context55.prev=_context55.next){case 0:_context55.prev=0;_context55.next=3;return promise;case 3:return _context55.abrupt("return",_context55.sent);case 6:_context55.prev=6;_context55.t0=_context55["catch"](0);throw new Error("could not ".concat(task,"; ").concat(_context55.t0.message||_context55.t0,"; ").concat(_context55.t0.stack));case 9:case"end":return _context55.stop();}}},_callee52,null,[[0,6]]);}));function wrapPromise(_x46,_x47){return _wrapPromise.apply(this,arguments);}return wrapPromise;}()}],[{key:"clone",value:function(){var _clone=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee53(options,config,source){var copyValues,plugin,_args56=arguments;return _regenerator["default"].wrap(function _callee53$(_context56){while(1){switch(_context56.prev=_context56.next){case 0:copyValues=_args56.length>3&&_args56[3]!==undefined?_args56[3]:false;_context56.next=3;return source.toPlugin(copyValues);case 3:plugin=_context56.sent;return _context56.abrupt("return",Container.create(options,Object.assign(Object.assign({},config),{plugin:plugin})));case 5:case"end":return _context56.stop();}}},_callee53);}));function clone(_x48,_x49,_x50){return _clone.apply(this,arguments);}return clone;}()},{key:"create",value:function(){var _create=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee55(options,config){var instanceConfig,contractIdentities,identitiesSubscription,envelope,validation,contract,contractId,container,identityHolderContract,resolvedIdentities,targetIdentity;return _regenerator["default"].wrap(function _callee55$(_context58){while(1){switch(_context58.prev=_context58.next){case 0:instanceConfig=lodash_1.cloneDeep(config);_context58.next=3;return options.nameResolver.getAddress('contractidentities.evan');case 3:contractIdentities=_context58.sent;_context58.next=6;return options.executor.eventHub.subscribe('IdentityHolder',contractIdentities,'IdentityCreated',function(_ref28){var identity=_ref28.returnValues.identity;if(!pendingIdentities.includes(identity)){pendingIdentities.push(identity);return true;}else{return false;}},function(){});case 6:identitiesSubscription=_context58.sent;if(instanceConfig.plugin&&instanceConfig.plugin.template&&instanceConfig.plugin.template.properties){instanceConfig.description.dataSchema=toJsonSchema(instanceConfig.plugin.template.properties);}envelope={"public":JSON.parse(JSON.stringify(instanceConfig.description||Container.defaultDescription))};if(!envelope["public"].abis){envelope["public"].abis={own:JSON.parse(options.contractLoader.contracts.DataContract["interface"])};}validation=options.description.validateDescription(envelope);if(!(validation!==true)){_context58.next=13;break;}throw new Error("validation of description failed with: ".concat(JSON.stringify(validation)));case 13:_context58.next=15;return options.dataContract.create(instanceConfig.factoryAddress||options.nameResolver.getDomainName(options.nameResolver.config.domains.containerFactory),instanceConfig.accountId,null,'0x0000000000000000000000000000000000000000000000000000000000000000',true,'0x0000000000000000000000000000000000000000000000000000000000000000');case 15:contract=_context58.sent;contractId=contract.options.address;instanceConfig.address=contractId;container=new Container(options,instanceConfig);_context58.next=21;return container.ensureContract();case 21:identityHolderContract=options.contractLoader.loadContract('IdentityHolder',contractIdentities);_context58.next=24;return Promise.all(pendingIdentities.map(function(){var _ref29=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee54(pendingIdentity){return _regenerator["default"].wrap(function _callee54$(_context57){while(1){switch(_context57.prev=_context57.next){case 0:_context57.t0=pendingIdentity;_context57.next=3;return options.executor.executeContractCall(identityHolderContract,'getLink',pendingIdentity);case 3:_context57.t1=_context57.sent;return _context57.abrupt("return",{identity:_context57.t0,contract:_context57.t1});case 5:case"end":return _context57.stop();}}},_callee54);}));return function(_x53){return _ref29.apply(this,arguments);};}()));case 24:resolvedIdentities=_context58.sent;targetIdentity=resolvedIdentities.find(function(resolvedIdentity){return new RegExp("".concat(contractId.substr(2),"$"),'i').test(resolvedIdentity.contract);});options.executor.eventHub.unsubscribe({subscription:identitiesSubscription});pendingIdentities.splice(pendingIdentities.indexOf(targetIdentity.identity),1);envelope["public"].identity=targetIdentity.identity;_context58.next=31;return applyPlugin(options,instanceConfig,container,envelope);case 31:return _context58.abrupt("return",container);case 32:case"end":return _context58.stop();}}},_callee55);}));function create(_x51,_x52){return _create.apply(this,arguments);}return create;}()},{key:"deleteContainerPlugin",value:function(){var _deleteContainerPlugin=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee56(profile,name){var plugins;return _regenerator["default"].wrap(function _callee56$(_context59){while(1){switch(_context59.prev=_context59.next){case 0:_context59.next=2;return profile.loadForAccount(profile.treeLabels.dtContainerPlugins);case 2:_context59.next=4;return this.getContainerPlugins(profile);case 4:plugins=_context59.sent;delete plugins[name];_context59.next=8;return profile.setPlugins(plugins);case 8:_context59.next=10;return profile.storeForAccount(profile.treeLabels.dtContainerPlugins);case 10:_context59.next=12;return profile.loadForAccount(profile.treeLabels.dtContainerPlugins);case 12:case"end":return _context59.stop();}}},_callee56,this);}));function deleteContainerPlugin(_x54,_x55){return _deleteContainerPlugin.apply(this,arguments);}return deleteContainerPlugin;}()},{key:"getContainerPlugin",value:function(){var _getContainerPlugin=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee57(profile,name){return _regenerator["default"].wrap(function _callee57$(_context60){while(1){switch(_context60.prev=_context60.next){case 0:_context60.next=2;return this.getContainerPlugins(profile);case 2:_context60.t0=name;return _context60.abrupt("return",_context60.sent[_context60.t0]);case 4:case"end":return _context60.stop();}}},_callee57,this);}));function getContainerPlugin(_x56,_x57){return _getContainerPlugin.apply(this,arguments);}return getContainerPlugin;}()},{key:"getContainerPlugins",value:function(){var _getContainerPlugins=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee58(profile){return _regenerator["default"].wrap(function _callee58$(_context61){while(1){switch(_context61.prev=_context61.next){case 0:_context61.next=2;return profile.getPlugins();case 2:_context61.t0=_context61.sent;if(_context61.t0){_context61.next=5;break;}_context61.t0={};case 5:return _context61.abrupt("return",_context61.t0);case 6:case"end":return _context61.stop();}}},_callee58);}));function getContainerPlugins(_x58){return _getContainerPlugins.apply(this,arguments);}return getContainerPlugins;}()},{key:"saveContainerPlugin",value:function(){var _saveContainerPlugin=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee59(profile,name,plugin,beforeName){var plugins;return _regenerator["default"].wrap(function _callee59$(_context62){while(1){switch(_context62.prev=_context62.next){case 0:_context62.next=2;return profile.loadForAccount(profile.treeLabels.dtContainerPlugins);case 2:_context62.next=4;return this.getContainerPlugins(profile);case 4:plugins=_context62.sent;if(beforeName&&beforeName!==name){delete plugins[beforeName];}plugins[name]=plugin;_context62.next=9;return profile.setPlugins(plugins);case 9:_context62.next=11;return profile.storeForAccount(profile.treeLabels.dtContainerPlugins);case 11:_context62.next=13;return profile.loadForAccount(profile.treeLabels.dtContainerPlugins);case 13:case"end":return _context62.stop();}}},_callee59,this);}));function saveContainerPlugin(_x59,_x60,_x61,_x62){return _saveContainerPlugin.apply(this,arguments);}return saveContainerPlugin;}()}]);return Container;}(dbcp_1.Logger);exports.Container=Container;Container.defaultDescription={name:'Container Contract (DataContract)',description:'Container for Digital Twin Data',author:'',version:'0.1.0',dbcpVersion:2};Container.defaultSchemas={booleanEntry:{type:'boolean'},booleanList:{type:'array',items:{type:'boolean'}},filesEntry:{type:'object',$comment:'{"isEncryptedFile": true}',properties:{additionalProperties:false,files:{type:'array',items:{type:'string'}}},required:['files']},filesList:{type:'array',items:{type:'object',$comment:'{"isEncryptedFile": true}',properties:{additionalProperties:false,files:{type:'array',items:{type:'string'}}},required:['files']}},numberEntry:{type:'number'},numberList:{type:'array',items:{type:'number'}},objectEntry:{type:'object'},objectList:{type:'array',items:{type:'object'}},stringEntry:{type:'string'},stringList:{type:'array',items:{type:'string'}}};Container.defaultPlugin='metadata';Container.profilePluginsKey='templates.datacontainer.digitaltwin.evan';Container.plugins={metadata:{description:{name:'',description:''},template:{type:'metadata',properties:{}}}};function applyPlugin(_x63,_x64,_x65,_x66){return _applyPlugin.apply(this,arguments);}function _applyPlugin(){_applyPlugin=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee61(options,config,container,envelope){var plugin,properties,permissionUpdates,propertyNames,_i8,_propertyNames,propertyName,property,_i10,_Object$keys5,role,_iteratorNormalCompletion10,_didIteratorError10,_iteratorError10,_iterator10,_step10,modification,dsAuth,dsRolesAddress,dsRolesContract,tasks,_loop4,_i9,_propertyNames2;return _regenerator["default"].wrap(function _callee61$(_context64){while(1){switch(_context64.prev=_context64.next){case 0:if(typeof config.plugin==='undefined'||typeof config.plugin==='string'){plugin=Container.plugins[config.plugin||Container.defaultPlugin];}else{plugin=config.plugin;}properties=lodash_1.cloneDeep(plugin.template.properties);if(!properties.type){properties.type={dataSchema:{$id:'type_schema',type:'string'},type:'entry',permissions:{0:['set']},value:plugin.template.type};}permissionUpdates={roles:[],operations:[]};propertyNames=Object.keys(properties);_i8=0,_propertyNames=propertyNames;case 6:if(!(_i8<_propertyNames.length)){_context64.next=39;break;}propertyName=_propertyNames[_i8];property=properties[propertyName];_i10=0,_Object$keys5=Object.keys(property.permissions);case 10:if(!(_i10<_Object$keys5.length)){_context64.next=34;break;}role=_Object$keys5[_i10];_iteratorNormalCompletion10=true;_didIteratorError10=false;_iteratorError10=undefined;_context64.prev=15;for(_iterator10=property.permissions[role][Symbol.iterator]();!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){modification=_step10.value;permissionUpdates.roles.push(parseInt(role,10));permissionUpdates.operations.push(options.rightsAndRoles.getOperationCapabilityHash(propertyName,getPropertyType(property.type),getModificationType(modification)));}_context64.next=23;break;case 19:_context64.prev=19;_context64.t0=_context64["catch"](15);_didIteratorError10=true;_iteratorError10=_context64.t0;case 23:_context64.prev=23;_context64.prev=24;if(!_iteratorNormalCompletion10&&_iterator10["return"]!=null){_iterator10["return"]();}case 26:_context64.prev=26;if(!_didIteratorError10){_context64.next=29;break;}throw _iteratorError10;case 29:return _context64.finish(26);case 30:return _context64.finish(23);case 31:_i10++;_context64.next=10;break;case 34:_context64.next=36;return container.ensureTypeInSchema(propertyName,property.dataSchema,envelope["public"]);case 36:_i8++;_context64.next=6;break;case 39:_context64.t1=options.contractLoader;_context64.next=42;return container.getContractAddress();case 42:_context64.t2=_context64.sent;dsAuth=_context64.t1.loadContract.call(_context64.t1,'DSAuth',_context64.t2);_context64.next=46;return options.executor.executeContractCall(dsAuth,'authority');case 46:dsRolesAddress=_context64.sent;dsRolesContract=options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);_context64.next=50;return options.executor.executeContractTransaction(dsRolesContract,'setRoleOperationCapabilities',{from:config.accountId},permissionUpdates.roles,permissionUpdates.operations,true);case 50:_context64.t3=options.description;_context64.next=53;return container.getContractAddress();case 53:_context64.t4=_context64.sent;_context64.t5=envelope;_context64.t6=config.accountId;_context64.next=58;return _context64.t3.setDescription.call(_context64.t3,_context64.t4,_context64.t5,_context64.t6);case 58:_context64.t7=generateSharings;_context64.t8=options;_context64.next=62;return container.getContractAddress();case 62:_context64.t9=_context64.sent;_context64.t10=config.accountId;_context64.t11=propertyNames;_context64.next=67;return(0,_context64.t7)(_context64.t8,_context64.t9,_context64.t10,_context64.t11);case 67:tasks=[];_loop4=function _loop4(){var propertyName=_propertyNames2[_i9];var property=properties[propertyName];if(property.hasOwnProperty('value')){tasks.push((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee60(){return _regenerator["default"].wrap(function _callee60$(_context63){while(1){switch(_context63.prev=_context63.next){case 0:return _context63.abrupt("return",container.setEntry(propertyName,property.value,false));case 1:case"end":return _context63.stop();}}},_callee60);})));}};for(_i9=0,_propertyNames2=propertyNames;_i9<_propertyNames2.length;_i9++){_loop4();}_context64.next=72;return Throttle.all(tasks);case 72:return _context64.abrupt("return",envelope);case 73:case"end":return _context64.stop();}}},_callee61,null,[[15,19,23,31],[24,,26,30]]);}));return _applyPlugin.apply(this,arguments);}function checkConfigProperties(config,properties){var missing=properties.filter(function(property){return!config.hasOwnProperty(property);});if(missing.length===1){throw new Error("missing property in config: \"".concat(missing[0],"\""));}else if(missing.length>1){throw new Error("missing properties in config: \"".concat(missing.join(', '),"\""));}}function generateSharings(_x67,_x68,_x69,_x70){return _generateSharings.apply(this,arguments);}function _generateSharings(){_generateSharings=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee65(runtime,contractAddress,accountId,fields){var sharings,cryptor,keys,tasks,_loop5,i;return _regenerator["default"].wrap(function _callee65$(_context68){while(1){switch(_context68.prev=_context68.next){case 0:sharings={};cryptor=runtime.cryptoProvider.getCryptorByCryptoAlgo('aes');_context68.next=4;return Promise.all((0,_toConsumableArray2["default"])((0,_toConsumableArray2["default"])(Array(fields.length+1)).map((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee62(){return _regenerator["default"].wrap(function _callee62$(_context65){while(1){switch(_context65.prev=_context65.next){case 0:return _context65.abrupt("return",cryptor.generateKey());case 1:case"end":return _context65.stop();}}},_callee62);})))));case 4:keys=_context68.sent;tasks=[];tasks.push((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee63(){return _regenerator["default"].wrap(function _callee63$(_context66){while(1){switch(_context66.prev=_context66.next){case 0:return _context66.abrupt("return",runtime.sharing.extendSharings(sharings,accountId,accountId,'*','hashKey',keys[keys.length-1],null));case 1:case"end":return _context66.stop();}}},_callee63);})));_loop5=function _loop5(i){tasks.push((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee64(){return _regenerator["default"].wrap(function _callee64$(_context67){while(1){switch(_context67.prev=_context67.next){case 0:return _context67.abrupt("return",runtime.sharing.extendSharings(sharings,accountId,accountId,fields[i],0,keys[i]));case 1:case"end":return _context67.stop();}}},_callee64);})));};for(i=0;i<fields.length;i++){_loop5(i);}_context68.next=11;return Throttle.all(tasks);case 11:_context68.next=13;return runtime.sharing.saveSharingsToContract(contractAddress,sharings,accountId);case 13:case"end":return _context68.stop();}}},_callee65);}));return _generateSharings.apply(this,arguments);}function getModificationType(typeName){switch(typeName){case'remove':return rights_and_roles_1.ModificationType.Remove;case'set':return rights_and_roles_1.ModificationType.Set;default:throw new Error("unsupported modification type \"".concat(typeName,"\""));}}function getPropertyType(typeName){switch(typeName){case'entry':return rights_and_roles_1.PropertyType.Entry;case'list':return rights_and_roles_1.PropertyType.ListEntry;default:throw new Error("unsupported property type type \"".concat(typeName,"\""));}}function toJsonSchema(properties){var jsonSchema={};for(var _i7=0,_Object$keys4=Object.keys(properties);_i7<_Object$keys4.length;_i7++){var field=_Object$keys4[_i7];var fieldId=field.replace(/[^a-zA-Z0-9]/g,'');jsonSchema[field]=Object.assign({$id:"".concat(fieldId,"_schema")},properties[field].dataSchema);}return jsonSchema;}

},{"../rights-and-roles":10,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"async-mutex":69,"bignumber.js":72,"lodash":471,"promise-parallel-throttle":523}],10:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var prottle=require("prottle");var dbcp_1=require("@evan.network/dbcp");var simultaneousRolesProcessed=2;var ModificationType;(function(ModificationType){ModificationType["Set"]="0xd2f67e6aeaad1ab7487a680eb9d3363a597afa7a3de33fa9bf3ae6edcb88435d";ModificationType["Remove"]="0x8dd27a19ebb249760a6490a8d33442a54b5c3c8504068964b74388bfe83458be";})(ModificationType=exports.ModificationType||(exports.ModificationType={}));var PropertyType;(function(PropertyType){PropertyType["Entry"]="0x84f3db82fb6cd291ed32c6f64f7f5eda656bda516d17c6bc146631a1f05a1833";PropertyType["ListEntry"]="0x7da2a80303fd8a8b312bb0f3403e22702ece25aa85a5e213371a770a74a50106";})(PropertyType=exports.PropertyType||(exports.PropertyType={}));var RightsAndRoles=function(_dbcp_1$Logger){(0,_inherits2["default"])(RightsAndRoles,_dbcp_1$Logger);function RightsAndRoles(options){var _this;(0,_classCallCheck2["default"])(this,RightsAndRoles);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(RightsAndRoles).call(this,options));_this.options=Object.assign({},options);return _this;}(0,_createClass2["default"])(RightsAndRoles,[{key:"canCallOperation",value:function(){var _canCallOperation=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contract,accountId,hash){var contractId,auth,dsRolesAddress,dsRolesContract;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);_context.next=8;return this.options.executor.executeContractCall(dsRolesContract,'canCallOperation',accountId,'0x0000000000000000000000000000000000000000',hash);case 8:return _context.abrupt("return",_context.sent);case 9:case"end":return _context.stop();}}},_callee,this);}));function canCallOperation(_x,_x2,_x3){return _canCallOperation.apply(this,arguments);}return canCallOperation;}()},{key:"getMembers",value:function(){var _getMembers=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(contract){var _this2=this;var result,contractInstance,rolesAddress,rolesContract,roleCount,retrievals;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:result={};contractInstance=(0,_typeof2["default"])(contract)==='object'?contract:this.options.contractLoader.loadContract('BaseContractInterface',contract);_context3.next=4;return this.options.executor.executeContractCall(contractInstance,'authority');case 4:rolesAddress=_context3.sent;rolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',rolesAddress);_context3.next=8;return this.options.executor.executeContractCall(rolesContract,'roleCount');case 8:roleCount=_context3.sent;retrievals=(0,_toConsumableArray2["default"])(Array(parseInt(roleCount,10))).map(function(_,role){return role;}).reverse().map(function(role){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){var count;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=parseInt;_context2.next=3;return _this2.options.executor.executeContractCall(rolesContract,'role2userCount',role);case 3:_context2.t1=_context2.sent;count=(0,_context2.t0)(_context2.t1,10);_context2.next=7;return _this2.options.nameResolver.getArrayFromUintMapping(rolesContract,function(){return _this2.options.executor.executeContractCall(rolesContract,'role2userCount',role);},function(i){return _this2.options.executor.executeContractCall(rolesContract,'role2index2user',role,i+1);},count);case 7:result[role]=_context2.sent;case 8:case"end":return _context2.stop();}}},_callee2);}));});_context3.next=12;return prottle(simultaneousRolesProcessed,retrievals);case 12:return _context3.abrupt("return",result);case 13:case"end":return _context3.stop();}}},_callee3,this);}));function getMembers(_x4){return _getMembers.apply(this,arguments);}return getMembers;}()},{key:"getOperationCapabilityHash",value:function getOperationCapabilityHash(name,propertyType,modificationType){var keccak256=this.options.web3.utils.soliditySha3;return keccak256(keccak256(propertyType,keccak256(name)),modificationType);}},{key:"setFunctionPermission",value:function(){var _setFunctionPermission=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contract,accountId,role,functionSignature,allow){var contractId,auth,dsRolesAddress,dsRolesContract,keccak256,bytes4,permissionHash;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context4.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context4.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);keccak256=this.options.web3.utils.soliditySha3;bytes4=function bytes4(input){return input.substr(0,10);};permissionHash=bytes4(keccak256(functionSignature));_context4.next=11;return this.options.executor.executeContractTransaction(dsRolesContract,'setRoleCapability',{from:accountId,autoGas:1.1},role,'0x0000000000000000000000000000000000000000',permissionHash,allow);case 11:case"end":return _context4.stop();}}},_callee4,this);}));function setFunctionPermission(_x5,_x6,_x7,_x8,_x9){return _setFunctionPermission.apply(this,arguments);}return setFunctionPermission;}()},{key:"setOperationPermission",value:function(){var _setOperationPermission=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(contract,accountId,role,propertyName,propertyType,modificationType,allow){var contractId,auth,dsRolesAddress,dsRolesContract,keccak256,permissionHash;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context5.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context5.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);keccak256=this.options.web3.utils.soliditySha3;permissionHash=keccak256(keccak256(propertyType,keccak256(propertyName)),modificationType);_context5.next=10;return this.options.executor.executeContractTransaction(dsRolesContract,'setRoleOperationCapability',{from:accountId,autoGas:1.1},role,'0x0000000000000000000000000000000000000000',permissionHash,allow);case 10:case"end":return _context5.stop();}}},_callee5,this);}));function setOperationPermission(_x10,_x11,_x12,_x13,_x14,_x15,_x16){return _setOperationPermission.apply(this,arguments);}return setOperationPermission;}()},{key:"addAccountToRole",value:function(){var _addAccountToRole=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(contract,accountId,targetAccountId,role){var contractId,auth,dsRolesAddress,dsRolesContract;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context6.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context6.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);_context6.next=8;return this.options.executor.executeContractTransaction(dsRolesContract,'setUserRole',{from:accountId,autoGas:1.1},targetAccountId,role,true);case 8:case"end":return _context6.stop();}}},_callee6,this);}));function addAccountToRole(_x17,_x18,_x19,_x20){return _addAccountToRole.apply(this,arguments);}return addAccountToRole;}()},{key:"hasUserRole",value:function(){var _hasUserRole=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(contract,accountId,targetAccountId,role){var contractId,auth,dsRolesAddress,dsRolesContract;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context7.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context7.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);return _context7.abrupt("return",this.options.executor.executeContractCall(dsRolesContract,'hasUserRole',targetAccountId,role));case 7:case"end":return _context7.stop();}}},_callee7,this);}));function hasUserRole(_x21,_x22,_x23,_x24){return _hasUserRole.apply(this,arguments);}return hasUserRole;}()},{key:"removeAccountFromRole",value:function(){var _removeAccountFromRole=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(contract,accountId,targetAccountId,role){var contractId,auth,dsRolesAddress,dsRolesContract;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context8.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context8.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);_context8.next=8;return this.options.executor.executeContractTransaction(dsRolesContract,'setUserRole',{from:accountId,autoGas:1.1},targetAccountId,role,false);case 8:case"end":return _context8.stop();}}},_callee8,this);}));function removeAccountFromRole(_x25,_x26,_x27,_x28){return _removeAccountFromRole.apply(this,arguments);}return removeAccountFromRole;}()},{key:"transferOwnership",value:function(){var _transferOwnership=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(contract,accountId,targetAccountId){var contractId,auth,dsRolesAddress,dsRolesContract;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:contractId=typeof contract==='string'?contract:contract.options.address;auth=this.options.contractLoader.loadContract('DSAuth',contractId);_context9.next=4;return this.options.executor.executeContractCall(auth,'authority');case 4:dsRolesAddress=_context9.sent;dsRolesContract=this.options.contractLoader.loadContract('DSRolesPerContract',dsRolesAddress);_context9.next=8;return this.options.executor.executeContractTransaction(auth,'setOwner',{from:accountId,autoGas:1.1},targetAccountId);case 8:_context9.next=10;return this.options.executor.executeContractTransaction(dsRolesContract,'setOwner',{from:accountId,autoGas:1.1},targetAccountId);case 10:case"end":return _context9.stop();}}},_callee9,this);}));function transferOwnership(_x29,_x30,_x31){return _transferOwnership.apply(this,arguments);}return transferOwnership;}()}]);return RightsAndRoles;}(dbcp_1.Logger);exports.RightsAndRoles=RightsAndRoles;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"prottle":524}],72:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(globalObj){'use strict';var BigNumber,parseNumeric,isNumeric=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,notBool=' not a boolean or binary digit',roundingMode='rounding mode',tooManyDigits='number type has more than 15 significant digits',ALPHABET='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_',BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=0x1fffffffffffff,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1E9;function constructorFactory(configObj){var div,id=0,P=BigNumber.prototype,ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,ERRORS=true,isValidInt=intValidatorWithErrors,CRYPTO=false,MODULO_MODE=1,POW_PRECISION=0,FORMAT={decimalSeparator:'.',groupSeparator:',',groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:'\xA0',fractionGroupSize:0};function BigNumber(n,b){var c,e,i,num,len,str,x=this;if(!(x instanceof BigNumber)){if(ERRORS)raise(26,'constructor call without new',n);return new BigNumber(n,b);}if(b==null||!isValidInt(b,2,64,id,'base')){if(n instanceof BigNumber){x.s=n.s;x.e=n.e;x.c=(n=n.c)?n.slice():n;id=0;return;}if((num=typeof n=='number')&&n*0==0){x.s=1/n<0?(n=-n,-1):1;if(n===~~n){for(e=0,i=n;i>=10;i/=10,e++){;}x.e=e;x.c=[n];id=0;return;}str=n+'';}else{if(!isNumeric.test(str=n+''))return parseNumeric(x,str,num);x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1;}}else{b=b|0;str=n+'';if(b==10){x=new BigNumber(n instanceof BigNumber?n:str);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE);}if((num=typeof n=='number')&&n*0!=0||!new RegExp('^-?'+(c='['+ALPHABET.slice(0,b)+']+')+'(?:\\.'+c+')?$',b<37?'i':'').test(str)){return parseNumeric(x,str,num,b);}if(num){x.s=1/n<0?(str=str.slice(1),-1):1;if(ERRORS&&str.replace(/^0\.0*|\./,'').length>15){raise(id,tooManyDigits,n);}num=false;}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1;}str=convertBase(str,10,b,x.s);}if((e=str.indexOf('.'))>-1)str=str.replace('.','');if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i);}else if(e<0){e=str.length;}for(i=0;str.charCodeAt(i)===48;i++){;}for(len=str.length;str.charCodeAt(--len)===48;){;}str=str.slice(i,len+1);if(str){len=str.length;if(num&&ERRORS&&len>15&&(n>MAX_SAFE_INTEGER||n!==mathfloor(n))){raise(id,tooManyDigits,x.s*n);}e=e-i-1;if(e>MAX_EXP){x.c=x.e=null;}else if(e<MIN_EXP){x.c=[x.e=0];}else{x.e=e;x.c=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE));}str=str.slice(i);i=LOG_BASE-str.length;}else{i-=len;}for(;i--;str+='0'){;}x.c.push(+str);}}else{x.c=[x.e=0];}id=0;}BigNumber.another=constructorFactory;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(){var v,p,i=0,r={},a=arguments,o=a[0],has=o&&(0,_typeof2["default"])(o)=='object'?function(){if(o.hasOwnProperty(p))return(v=o[p])!=null;}:function(){if(a.length>i)return(v=a[i++])!=null;};if(has(p='DECIMAL_PLACES')&&isValidInt(v,0,MAX,2,p)){DECIMAL_PLACES=v|0;}r[p]=DECIMAL_PLACES;if(has(p='ROUNDING_MODE')&&isValidInt(v,0,8,2,p)){ROUNDING_MODE=v|0;}r[p]=ROUNDING_MODE;if(has(p='EXPONENTIAL_AT')){if(isArray(v)){if(isValidInt(v[0],-MAX,0,2,p)&&isValidInt(v[1],0,MAX,2,p)){TO_EXP_NEG=v[0]|0;TO_EXP_POS=v[1]|0;}}else if(isValidInt(v,-MAX,MAX,2,p)){TO_EXP_NEG=-(TO_EXP_POS=(v<0?-v:v)|0);}}r[p]=[TO_EXP_NEG,TO_EXP_POS];if(has(p='RANGE')){if(isArray(v)){if(isValidInt(v[0],-MAX,-1,2,p)&&isValidInt(v[1],1,MAX,2,p)){MIN_EXP=v[0]|0;MAX_EXP=v[1]|0;}}else if(isValidInt(v,-MAX,MAX,2,p)){if(v|0)MIN_EXP=-(MAX_EXP=(v<0?-v:v)|0);else if(ERRORS)raise(2,p+' cannot be zero',v);}}r[p]=[MIN_EXP,MAX_EXP];if(has(p='ERRORS')){if(v===!!v||v===1||v===0){id=0;isValidInt=(ERRORS=!!v)?intValidatorWithErrors:intValidatorNoErrors;}else if(ERRORS){raise(2,p+notBool,v);}}r[p]=ERRORS;if(has(p='CRYPTO')){if(v===true||v===false||v===1||v===0){if(v){v=typeof crypto=='undefined';if(!v&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=true;}else if(ERRORS){raise(2,'crypto unavailable',v?void 0:crypto);}else{CRYPTO=false;}}else{CRYPTO=false;}}else if(ERRORS){raise(2,p+notBool,v);}}r[p]=CRYPTO;if(has(p='MODULO_MODE')&&isValidInt(v,0,9,2,p)){MODULO_MODE=v|0;}r[p]=MODULO_MODE;if(has(p='POW_PRECISION')&&isValidInt(v,0,MAX,2,p)){POW_PRECISION=v|0;}r[p]=POW_PRECISION;if(has(p='FORMAT')){if((0,_typeof2["default"])(v)=='object'){FORMAT=v;}else if(ERRORS){raise(2,p+' not an object',v);}}r[p]=FORMAT;return r;};BigNumber.max=function(){return maxOrMin(arguments,P.lt);};BigNumber.min=function(){return maxOrMin(arguments,P.gt);};BigNumber.random=function(){var pow2_53=0x20000000000000;var random53bitInt=Math.random()*pow2_53&0x1fffff?function(){return mathfloor(Math.random()*pow2_53);}:function(){return(Math.random()*0x40000000|0)*0x800000+(Math.random()*0x800000|0);};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);dp=dp==null||!isValidInt(dp,0,MAX,14)?DECIMAL_PLACES:dp|0;k=mathceil(dp/LOG_BASE);if(CRYPTO){if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){v=a[i]*0x20000+(a[i+1]>>>11);if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1];}else{c.push(v%1e14);i+=2;}}i=k/2;}else if(crypto.randomBytes){a=crypto.randomBytes(k*=7);for(;i<k;){v=(a[i]&31)*0x1000000000000+a[i+1]*0x10000000000+a[i+2]*0x100000000+a[i+3]*0x1000000+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i);}else{c.push(v%1e14);i+=7;}}i=k/7;}else{CRYPTO=false;if(ERRORS)raise(14,'crypto unavailable',crypto);}}if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14;}}k=c[--i];dp%=LOG_BASE;if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v;}for(;c[i]===0;c.pop(),i--){;}if(i<0){c=[e=0];}else{for(e=-1;c[0]===0;c.shift(),e-=LOG_BASE){;}for(i=1,v=c[0];v>=10;v/=10,i++){;}if(i<LOG_BASE)e-=LOG_BASE-i;}rand.e=e;rand.c=c;return rand;};}();function convertBase(str,baseOut,baseIn,sign){var d,e,k,r,x,xc,y,i=str.indexOf('.'),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;if(baseIn<37)str=str.toLowerCase();if(i>=0){k=POW_PRECISION;POW_PRECISION=0;str=str.replace('.','');y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e),10,baseOut);y.e=y.c.length;}xc=toBaseOut(str,baseIn,baseOut);e=k=xc.length;for(;xc[--k]==0;xc.pop()){;}if(!xc[0])return'0';if(i<0){--e;}else{x.c=xc;x.e=e;x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e;}d=e+dp+1;i=xc[d];k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));if(d<1||!xc[0]){str=r?toFixedPoint('1',-dp):'0';}else{xc.length=d;if(r){for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc.unshift(1);}}}for(k=xc.length;!xc[--k];){;}for(i=0,str='';i<=k;str+=ALPHABET.charAt(xc[i++])){;}str=toFixedPoint(str,e);}return str;}div=function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+m%SQRT_BASE*SQRT_BASE+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base;}if(carry)x.unshift(carry);return x;}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1;}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break;}}}return cmp;}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL];}for(;!a[0]&&a.length>1;a.shift()){;}}return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0);}q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0;}for(i=0;yc[i]==(xc[i]||0);i++){;}if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true;}else{xL=xc.length;yL=yc.length;i=0;s+=2;n=mathfloor(base/(yc[0]+1));if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length;}xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0){;}yz=yc.slice();yz.unshift(0);yc0=yc[0];if(yc[1]>=base/2)yc0++;do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);n=mathfloor(rem0/yc0);if(n>1){if(n>=base)n=base-1;prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;while(compare(prod,rem,prodL,remL)==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1;}}else{if(n==0){cmp=n=1;}prod=yc.slice();prodL=prod.length;}if(prodL<remL)prod.unshift(0);subtract(rem,prod,remL,base);remL=rem.length;if(cmp==-1){while(compare(yc,rem,yL,remL)<1){n++;subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length;}}}else if(cmp===0){n++;rem=[0];}qc[i++]=n;if(rem[0]){rem[remL++]=xc[xi]||0;}else{rem=[xc[xi]];remL=1;}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;if(!qc[0])qc.shift();}if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++){;}round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more);}else{q.e=e;q.r=+more;}return q;};}();function format(n,i,rm,caller){var c0,e,ne,len,str;rm=rm!=null&&isValidInt(rm,0,8,caller,roundingMode)?rm|0:ROUNDING_MODE;if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=caller==19||caller==24&&ne<=TO_EXP_NEG?toExponential(str,ne):toFixedPoint(str,ne);}else{n=round(new BigNumber(n),i,rm);e=n.e;str=coeffToString(n.c);len=str.length;if(caller==19||caller==24&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+='0',len++){;}str=toExponential(str,e);}else{i-=ne;str=toFixedPoint(str,e);if(e+1>len){if(--i>0)for(str+='.';i--;str+='0'){;}}else{i+=e-len;if(i>0){if(e+1==len)str+='.';for(;i--;str+='0'){;}}}}}return n.s<0&&c0?'-'+str:str;}function maxOrMin(args,method){var m,n,i=0;if(isArray(args[0]))args=args[0];m=new BigNumber(args[0]);for(;++i<args.length;){n=new BigNumber(args[i]);if(!n.s){m=n;break;}else if(method.call(m,n)){m=n;}}return m;}function intValidatorWithErrors(n,min,max,caller,name){if(n<min||n>max||n!=truncate(n)){raise(caller,(name||'decimal places')+(n<min||n>max?' out of range':' not an integer'),n);}return true;}function normalise(n,c,e){var i=1,j=c.length;for(;!c[--j];c.pop()){;}for(j=c[0];j>=10;j/=10,i++){;}if((e=i+e*LOG_BASE-1)>MAX_EXP){n.c=n.e=null;}else if(e<MIN_EXP){n.c=[n.e=0];}else{n.e=e;n.c=c;}return n;}parseNumeric=function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,num,b){var base,s=num?str:str.replace(whitespaceOrPlus,'');if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1;}else{if(!num){s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=='x'?16:p2=='b'?2:8;return!b||b==base?p1:m;});if(b){base=b;s=s.replace(dotAfter,'$1').replace(dotBefore,'0.$1');}if(str!=s)return new BigNumber(s,base);}if(ERRORS)raise(id,'not a'+(b?' base '+b:'')+' number',str);x.s=null;}x.c=x.e=null;id=0;};}();function raise(caller,msg,val){var error=new Error(['new BigNumber','cmp','config','div','divToInt','eq','gt','gte','lt','lte','minus','mod','plus','precision','random','round','shift','times','toDigits','toExponential','toFixed','toFormat','toFraction','pow','toPrecision','toString','BigNumber'][caller]+'() '+msg+': '+val);error.name='BigNumber Error';id=0;throw error;}function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++){;}i=sd-d;if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];rd=n/pows10[d-j-1]%10|0;}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){for(;xc.length<=ni;xc.push(0)){;}n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1;}else{break out;}}else{n=k=xc[ni];for(d=1;k>=10;k/=10,d++){;}i%=LOG_BASE;j=i-LOG_BASE+d;rd=j<0?0:n/pows10[d-j-1]%10|0;}}r=r||sd<0||xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x.e+1;xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0;}else{xc[0]=x.e=0;}return x;}if(i==0){xc.length=ni;k=1;ni--;}else{xc.length=ni+1;k=pows10[LOG_BASE-i];xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0;}if(r){for(;;){if(ni==0){for(i=1,j=xc[0];j>=10;j/=10,i++){;}j=xc[0]+=k;for(k=1;j>=10;j/=10,k++){;}if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1;}break;}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1;}}}for(i=xc.length;xc[--i]===0;xc.pop()){;}}if(x.e>MAX_EXP){x.c=x.e=null;}else if(x.e<MIN_EXP){x.c=[x.e=0];}}return x;}P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x;};P.ceil=function(){return round(new BigNumber(this),this.e+1,2);};P.comparedTo=P.cmp=function(y,b){id=1;return compare(this,new BigNumber(y,b));};P.decimalPlaces=P.dp=function(){var n,v,c=this.c;if(!c)return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;if(v=c[v])for(;v%10==0;v/=10,n--){;}if(n<0)n=0;return n;};P.dividedBy=P.div=function(y,b){id=3;return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE);};P.dividedToIntegerBy=P.divToInt=function(y,b){id=4;return div(this,new BigNumber(y,b),0,1);};P.equals=P.eq=function(y,b){id=5;return compare(this,new BigNumber(y,b))===0;};P.floor=function(){return round(new BigNumber(this),this.e+1,3);};P.greaterThan=P.gt=function(y,b){id=6;return compare(this,new BigNumber(y,b))>0;};P.greaterThanOrEqualTo=P.gte=function(y,b){id=7;return(b=compare(this,new BigNumber(y,b)))===1||b===0;};P.isFinite=function(){return!!this.c;};P.isInteger=P.isInt=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2;};P.isNaN=function(){return!this.s;};P.isNegative=P.isNeg=function(){return this.s<0;};P.isZero=function(){return!!this.c&&this.c[0]==0;};P.lessThan=P.lt=function(y,b){id=8;return compare(this,new BigNumber(y,b))<0;};P.lessThanOrEqualTo=P.lte=function(y,b){id=9;return(b=compare(this,new BigNumber(y,b)))===-1||b===0;};P.minus=P.sub=function(y,b){var i,j,t,xLTy,x=this,a=x.s;id=10;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.plus(y);}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:ROUNDING_MODE==3?-0:0);}}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc;}else{ye=xe;t=yc;}t.reverse();for(b=a;b--;t.push(0)){;}t.reverse();}else{j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break;}}}if(xLTy)t=xc,xc=yc,yc=t,y.s=-y.s;b=(j=yc.length)-(i=xc.length);if(b>0)for(;b--;xc[i++]=0){;}b=BASE-1;for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b){;}--xc[i];xc[j]+=BASE;}xc[j]-=yc[j];}for(;xc[0]==0;xc.shift(),--ye){;}if(!xc[0]){y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y;}return normalise(y,xc,ye);};P.modulo=P.mod=function(y,b){var q,s,x=this;id=11;y=new BigNumber(y,b);if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN);}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x);}if(MODULO_MODE==9){s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s;}else{q=div(x,y,0,MODULO_MODE);}return x.minus(q.times(y));};P.negated=P.neg=function(){var x=new BigNumber(this);x.s=-x.s||null;return x;};P.plus=P.add=function(y,b){var t,x=this,a=x.s;id=12;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.minus(y);}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0);}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc;}else{a=-a;t=xc;}t.reverse();for(;a--;t.push(0)){;}t.reverse();}a=xc.length;b=yc.length;if(a-b<0)t=yc,yc=xc,xc=t,b=a;for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE;}if(a){xc.unshift(a);++ye;}return normalise(y,xc,ye);};P.precision=P.sd=function(z){var n,v,x=this,c=x.c;if(z!=null&&z!==!!z&&z!==1&&z!==0){if(ERRORS)raise(13,'argument'+notBool,z);if(z!=!!z)z=null;}if(!c)return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--){;}for(v=c[0];v>=10;v/=10,n++){;}}if(z&&x.e+1>n)n=x.e+1;return n;};P.round=function(dp,rm){var n=new BigNumber(this);if(dp==null||isValidInt(dp,0,MAX,15)){round(n,~~dp+this.e+1,rm==null||!isValidInt(rm,0,8,15,roundingMode)?ROUNDING_MODE:rm|0);}return n;};P.shift=function(k){var n=this;return isValidInt(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER,16,'argument')?n.times('1e'+truncate(k)):new BigNumber(n.c&&n.c[0]&&(k<-MAX_SAFE_INTEGER||k>MAX_SAFE_INTEGER)?n.s*(k<0?0:1/0):n);};P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber('0.5');if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0);}s=Math.sqrt(+x);if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+='0';s=Math.sqrt(n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n='1e'+e;}else{n=s.toExponential();n=n.slice(0,n.indexOf('e')+1)+e;}r=new BigNumber(n);}else{r=new BigNumber(s+'');}if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e)--s;n=n.slice(s-3,s+1);if(n=='9999'||!rep&&n=='4999'){if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break;}}dp+=4;s+=4;rep=1;}else{if(!+n||!+n.slice(1)&&n.charAt(0)=='5'){round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x);}break;}}}}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m);};P.times=P.mul=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(id=17,y=new BigNumber(y,b)).c;if(!xc||!yc||!xc[0]||!yc[0]){if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null;}else{y.s*=x.s;if(!xc||!yc){y.c=y.e=null;}else{y.c=[0];y.e=0;}}return y;}e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;if(xcL<ycL)zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i;for(i=xcL+ycL,zc=[];i--;zc.push(0)){;}base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+m%sqrtBase*sqrtBase+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base;}zc[j]=c;}if(c){++e;}else{zc.shift();}return normalise(y,zc,e);};P.toDigits=function(sd,rm){var n=new BigNumber(this);sd=sd==null||!isValidInt(sd,1,MAX,18,'precision')?null:sd|0;rm=rm==null||!isValidInt(rm,0,8,18,roundingMode)?ROUNDING_MODE:rm|0;return sd?round(n,sd,rm):n;};P.toExponential=function(dp,rm){return format(this,dp!=null&&isValidInt(dp,0,MAX,19)?~~dp+1:null,rm,19);};P.toFixed=function(dp,rm){return format(this,dp!=null&&isValidInt(dp,0,MAX,20)?~~dp+this.e+1:null,rm,20);};P.toFormat=function(dp,rm){var str=format(this,dp!=null&&isValidInt(dp,0,MAX,21)?~~dp+this.e+1:null,rm,21);if(this.c){var i,arr=str.split('.'),g1=+FORMAT.groupSize,g2=+FORMAT.secondaryGroupSize,groupSeparator=FORMAT.groupSeparator,intPart=arr[0],fractionPart=arr[1],isNeg=this.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2)i=g1,g1=g2,g2=i,len-=i;if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1){intPart+=groupSeparator+intDigits.substr(i,g1);}if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart='-'+intPart;}str=fractionPart?intPart+FORMAT.decimalSeparator+((g2=+FORMAT.fractionGroupSize)?fractionPart.replace(new RegExp('\\d{'+g2+'}\\B','g'),'$&'+FORMAT.fractionGroupSeparator):fractionPart):intPart;}return str;};P.toFraction=function(md){var arr,d0,d2,e,exp,n,n0,q,s,k=ERRORS,x=this,xc=x.c,d=new BigNumber(ONE),n1=d0=new BigNumber(ONE),d1=n0=new BigNumber(ONE);if(md!=null){ERRORS=false;n=new BigNumber(md);ERRORS=k;if(!(k=n.isInt())||n.lt(ONE)){if(ERRORS){raise(22,'max denominator '+(k?'out of range':'not an integer'),md);}md=!k&&n.c&&round(n,n.e+1,1).gte(ONE)?n:null;}}if(!xc)return x.toString();s=coeffToString(xc);e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.cmp(d)>0?e>0?d:n1:n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.cmp(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2;}d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e*=2;arr=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().cmp(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1.toString(),d1.toString()]:[n0.toString(),d0.toString()];MAX_EXP=exp;return arr;};P.toNumber=function(){return+this;};P.toPower=P.pow=function(n,m){var k,y,z,i=mathfloor(n<0?-n:+n),x=this;if(m!=null){id=23;m=new BigNumber(m);}if(!isValidInt(n,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER,23,'exponent')&&(!isFinite(n)||i>MAX_SAFE_INTEGER&&(n/=0)||parseFloat(n)!=n&&!(n=NaN))||n==0){k=Math.pow(+x,n);return new BigNumber(m?k%m:k);}if(m){if(n>1&&x.gt(ONE)&&x.isInt()&&m.gt(ONE)&&m.isInt()){x=x.mod(m);}else{z=m;m=null;}}else if(POW_PRECISION){k=mathceil(POW_PRECISION/LOG_BASE+2);}y=new BigNumber(ONE);for(;;){if(i%2){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k;}else if(m){y=y.mod(m);}}i=mathfloor(i/2);if(!i)break;x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k;}else if(m){x=x.mod(m);}}if(m)return y;if(n<0)y=ONE.div(y);return z?y.mod(z):k?round(y,POW_PRECISION,ROUNDING_MODE):y;};P.toPrecision=function(sd,rm){return format(this,sd!=null&&isValidInt(sd,1,MAX,24,'precision')?sd|0:null,rm,24);};P.toString=function(b){var str,n=this,s=n.s,e=n.e;if(e===null){if(s){str='Infinity';if(s<0)str='-'+str;}else{str='NaN';}}else{str=coeffToString(n.c);if(b==null||!isValidInt(b,2,64,25,'base')){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e);}else{str=convertBase(toFixedPoint(str,e),b|0,10,s);}if(s<0&&n.c[0])str='-'+str;}return str;};P.truncated=P.trunc=function(){return round(new BigNumber(this),this.e+1,1);};P.valueOf=P.toJSON=function(){var str,n=this,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e);return n.s<0?'-'+str:str;};if(configObj!=null)BigNumber.config(configObj);return BigNumber;}function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1;}function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+'';for(;i<j;){s=a[i++]+'';z=LOG_BASE-s.length;for(;z--;s='0'+s){;}r+=s;}for(j=r.length;r.charCodeAt(--j)===48;){;}return r.slice(0,j+1||1);}function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];if(a||b)return a?b?0:-j:i;if(i!=j)return i;a=i<0;b=k==l;if(!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;for(i=0;i<j;i++){if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;}return k==l?0:k>l^a?1:-1;}function intValidatorNoErrors(n,min,max){return(n=truncate(n))>=min&&n<=max;}function isArray(obj){return Object.prototype.toString.call(obj)=='[object Array]';}function toBaseOut(str,baseIn,baseOut){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn){;}arr[j=0]+=ALPHABET.indexOf(str.charAt(i++));for(;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut;}}}return arr.reverse();}function toExponential(str,e){return(str.length>1?str.charAt(0)+'.'+str.slice(1):str)+(e<0?'e':'e+')+e;}function toFixedPoint(str,e){var len,z;if(e<0){for(z='0.';++e;z+='0'){;}str=z+str;}else{len=str.length;if(++e>len){for(z='0',e-=len;--e;z+='0'){;}str+=z;}else if(e<len){str=str.slice(0,e)+'.'+str.slice(e);}}return str;}function truncate(n){n=parseFloat(n);return n<0?mathceil(n):mathfloor(n);}BigNumber=constructorFactory();BigNumber["default"]=BigNumber.BigNumber=BigNumber;if(typeof define=='function'&&define.amd){define(function(){return BigNumber;});}else if(typeof module!='undefined'&&module.exports){module.exports=BigNumber;}else{if(!globalObj)globalObj=typeof self!='undefined'?self:Function('return this')();globalObj.BigNumber=BigNumber;}})(void 0);

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],471:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */;(function(){var undefined;var VERSION='4.17.15';var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT='Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER='__lodash_placeholder__';var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION='...';var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e+308,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[['ary',WRAP_ARY_FLAG],['bind',WRAP_BIND_FLAG],['bindKey',WRAP_BIND_KEY_FLAG],['curry',WRAP_CURRY_FLAG],['curryRight',WRAP_CURRY_RIGHT_FLAG],['flip',WRAP_FLIP_FLAG],['partial',WRAP_PARTIAL_FLAG],['partialRight',WRAP_PARTIAL_RIGHT_FLAG],['rearg',WRAP_REARG_FLAG]];var argsTag='[object Arguments]',arrayTag='[object Array]',asyncTag='[object AsyncFunction]',boolTag='[object Boolean]',dateTag='[object Date]',domExcTag='[object DOMException]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',nullTag='[object Null]',objectTag='[object Object]',promiseTag='[object Promise]',proxyTag='[object Proxy]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',undefinedTag='[object Undefined]',weakMapTag='[object WeakMap]',weakSetTag='[object WeakSet]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange='a-z\\xdf-\\xf6\\xf8-\\xff',rsMathOpRange='\\xac\\xb1\\xd7\\xf7',rsNonCharRange='\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf',rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange='A-Z\\xc0-\\xd6\\xd8-\\xde',rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['\u2019]",rsAstral='['+rsAstralRange+']',rsBreak='['+rsBreakRange+']',rsCombo='['+rsComboRange+']',rsDigits='\\d+',rsDingbat='['+rsDingbatRange+']',rsLower='['+rsLowerRange+']',rsMisc='[^'+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+']',rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier='(?:'+rsCombo+'|'+rsFitz+')',rsNonAstral='[^'+rsAstralRange+']',rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper='['+rsUpperRange+']',rsZWJ="\\u200d";var rsMiscLower='(?:'+rsLower+'|'+rsMisc+')',rsMiscUpper='(?:'+rsUpper+'|'+rsMisc+')',rsOptContrLower='(?:'+rsApos+'(?:d|ll|m|re|s|t|ve))?',rsOptContrUpper='(?:'+rsApos+'(?:D|LL|M|RE|S|T|VE))?',reOptMod=rsModifier+'?',rsOptVar='['+rsVarRange+']?',rsOptJoin='(?:'+rsZWJ+'(?:'+[rsNonAstral,rsRegional,rsSurrPair].join('|')+')'+rsOptVar+reOptMod+')*',rsOrdLower='\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',rsOrdUpper='\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])',rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji='(?:'+[rsDingbat,rsRegional,rsSurrPair].join('|')+')'+rsSeq,rsSymbol='(?:'+[rsNonAstral+rsCombo+'?',rsCombo,rsRegional,rsSurrPair,rsAstral].join('|')+')';var reApos=RegExp(rsApos,'g');var reComboMark=RegExp(rsCombo,'g');var reUnicode=RegExp(rsFitz+'(?='+rsFitz+')|'+rsSymbol+rsSeq,'g');var reUnicodeWord=RegExp([rsUpper+'?'+rsLower+'+'+rsOptContrLower+'(?='+[rsBreak,rsUpper,'$'].join('|')+')',rsMiscUpper+'+'+rsOptContrUpper+'(?='+[rsBreak,rsUpper+rsMiscLower,'$'].join('|')+')',rsUpper+'?'+rsMiscLower+'+'+rsOptContrLower,rsUpper+'+'+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join('|'),'g');var reHasUnicode=RegExp('['+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+']');var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=['Array','Buffer','DataView','Date','Error','Float32Array','Float64Array','Function','Int8Array','Int16Array','Int32Array','Map','Math','Object','Promise','RegExp','Set','String','Symbol','TypeError','Uint8Array','Uint8ClampedArray','Uint16Array','Uint32Array','WeakMap','_','clearTimeout','isFinite','parseInt','setTimeout'];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={'\xc0':'A','\xc1':'A','\xc2':'A','\xc3':'A','\xc4':'A','\xc5':'A','\xe0':'a','\xe1':'a','\xe2':'a','\xe3':'a','\xe4':'a','\xe5':'a','\xc7':'C','\xe7':'c','\xd0':'D','\xf0':'d','\xc8':'E','\xc9':'E','\xca':'E','\xcb':'E','\xe8':'e','\xe9':'e','\xea':'e','\xeb':'e','\xcc':'I','\xcd':'I','\xce':'I','\xcf':'I','\xec':'i','\xed':'i','\xee':'i','\xef':'i','\xd1':'N','\xf1':'n','\xd2':'O','\xd3':'O','\xd4':'O','\xd5':'O','\xd6':'O','\xd8':'O','\xf2':'o','\xf3':'o','\xf4':'o','\xf5':'o','\xf6':'o','\xf8':'o','\xd9':'U','\xda':'U','\xdb':'U','\xdc':'U','\xf9':'u','\xfa':'u','\xfb':'u','\xfc':'u','\xdd':'Y','\xfd':'y','\xff':'y','\xc6':'Ae','\xe6':'ae','\xde':'Th','\xfe':'th','\xdf':'ss',"\u0100":'A',"\u0102":'A',"\u0104":'A',"\u0101":'a',"\u0103":'a',"\u0105":'a',"\u0106":'C',"\u0108":'C',"\u010A":'C',"\u010C":'C',"\u0107":'c',"\u0109":'c',"\u010B":'c',"\u010D":'c',"\u010E":'D',"\u0110":'D',"\u010F":'d',"\u0111":'d',"\u0112":'E',"\u0114":'E',"\u0116":'E',"\u0118":'E',"\u011A":'E',"\u0113":'e',"\u0115":'e',"\u0117":'e',"\u0119":'e',"\u011B":'e',"\u011C":'G',"\u011E":'G',"\u0120":'G',"\u0122":'G',"\u011D":'g',"\u011F":'g',"\u0121":'g',"\u0123":'g',"\u0124":'H',"\u0126":'H',"\u0125":'h',"\u0127":'h',"\u0128":'I',"\u012A":'I',"\u012C":'I',"\u012E":'I',"\u0130":'I',"\u0129":'i',"\u012B":'i',"\u012D":'i',"\u012F":'i',"\u0131":'i',"\u0134":'J',"\u0135":'j',"\u0136":'K',"\u0137":'k',"\u0138":'k',"\u0139":'L',"\u013B":'L',"\u013D":'L',"\u013F":'L',"\u0141":'L',"\u013A":'l',"\u013C":'l',"\u013E":'l',"\u0140":'l',"\u0142":'l',"\u0143":'N',"\u0145":'N',"\u0147":'N',"\u014A":'N',"\u0144":'n',"\u0146":'n',"\u0148":'n',"\u014B":'n',"\u014C":'O',"\u014E":'O',"\u0150":'O',"\u014D":'o',"\u014F":'o',"\u0151":'o',"\u0154":'R',"\u0156":'R',"\u0158":'R',"\u0155":'r',"\u0157":'r',"\u0159":'r',"\u015A":'S',"\u015C":'S',"\u015E":'S',"\u0160":'S',"\u015B":'s',"\u015D":'s',"\u015F":'s',"\u0161":'s',"\u0162":'T',"\u0164":'T',"\u0166":'T',"\u0163":'t',"\u0165":'t',"\u0167":'t',"\u0168":'U',"\u016A":'U',"\u016C":'U',"\u016E":'U',"\u0170":'U',"\u0172":'U',"\u0169":'u',"\u016B":'u',"\u016D":'u',"\u016F":'u',"\u0171":'u',"\u0173":'u',"\u0174":'W',"\u0175":'w',"\u0176":'Y',"\u0177":'y',"\u0178":'Y',"\u0179":'Z',"\u017B":'Z',"\u017D":'Z',"\u017A":'z',"\u017C":'z',"\u017E":'z',"\u0132":'IJ',"\u0133":'ij',"\u0152":'Oe',"\u0153":'oe',"\u0149":"'n","\u017F":'s'};var htmlEscapes={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};var htmlUnescapes={'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'"','&#39;':"'"};var stringEscapes={'\\':'\\',"'":"'",'\n':'n','\r':'r',"\u2028":'u2028',"\u2029":'u2029'};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=(typeof global==="undefined"?"undefined":(0,_typeof2["default"])(global))=='object'&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":(0,_typeof2["default"])(self))=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require('util').types;if(types){return types;}return freeProcess&&freeProcess.binding&&freeProcess.binding('util');}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args);}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array);}return accumulator;}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--){if(iteratee(array[length],length,array)===false){break;}}return array;}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(!predicate(array[index],index,array)){return false;}}return true;}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value;}}return result;}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1;}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true;}}return false;}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index];}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array);}return accumulator;}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length){accumulator=array[--length];}while(length--){accumulator=iteratee(accumulator,array[length],length,array);}return accumulator;}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}var asciiSize=baseProperty('length');function asciiToArray(string){return string.split('');}function asciiWords(string){return string.match(reAsciiWord)||[];}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;return false;}});return result;}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex);}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index;}}return-1;}function baseIsNaN(value){return value!==value;}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN;}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function basePropertyOf(object){return function(key){return object==null?undefined:object[key];};}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection);});return accumulator;}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value;}return array;}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined){result=result===undefined?current:result+current;}}return result;}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]];});}function baseUnary(func){return function(value){return func(value);};}function baseValues(object,props){return arrayMap(props,function(key){return object[key];});}function cacheHas(cache,key){return cache.has(key);}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index;}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index;}function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result;}}return result;}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return'\\'+stringEscapes[chr];}function getValue(object,key){return object==null?undefined:object[key];}function hasUnicode(string){return reHasUnicode.test(string);}function hasUnicodeWord(string){return reHasUnicodeWord.test(string);}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value);}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}function overArg(func,transform){return function(arg){return func(transform(arg));};}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index;}}return result;}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value];});return result;}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--){if(array[index]===value){return index;}}return index;}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string);}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string);}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){++result;}return result;}function unicodeToArray(string){return string.match(reUnicode)||[];}function unicodeWords(string){return string.match(reUnicodeWord)||[];}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context['__core-js_shared__'];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Buffer=moduleExports?context.Buffer:undefined,_Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:undefined,symIterator=_Symbol?_Symbol.iterator:undefined,symToStringTag=_Symbol?_Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,'defineProperty');func({},'',{});return func;}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,'DataView'),Map=getNative(context,'Map'),Promise=getNative(context,'Promise'),Set=getNative(context,'Set'),WeakMap=getNative(context,'WeakMap'),nativeCreate=getNative(Object,'create');var metaMap=WeakMap&&new WeakMap();var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value;}if(hasOwnProperty.call(value,'__wrapped__')){return wrapperClone(value);}}return new LodashWrapper(value);}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{};}if(objectCreate){return objectCreate(proto);}object.prototype=proto;var result=new object();object.prototype=undefined;return result;};}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined;}lodash.templateSettings={'escape':reEscape,'evaluate':reEvaluate,'interpolate':reInterpolate,'variable':'','imports':{'_':lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[];}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=copyArray(this.__views__);return result;}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true;}else{result=this.clone();result.__dir__*=-1;}return result;}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length){return baseWrapperValue(array,this.__actions__);}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed;}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer;}else{break outer;}}}result[resIndex++]=value;}return result;}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0;}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result;}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];this.size=0;}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}--this.size;return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.size=0;this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){var result=getMapData(this,key)['delete'](key);this.size-=result?1:0;return result;}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}function setCacheHas(value){return this.__data__.has(value);}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size;}function stackClear(){this.__data__=new ListCache();this.size=0;}function stackDelete(key){var data=this.__data__,result=data['delete'](key);this.size=data.size;return result;}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this;}data=this.__data__=new MapCache(pairs);}data.set(key,value);this.size=data.size;return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isBuff&&(key=='offset'||key=='parent')||isType&&(key=='buffer'||key=='byteLength'||key=='byteOffset')||isIndex(key,length)))){result.push(key);}}return result;}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined;}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length));}function arrayShuffle(array){return shuffleSelf(copyArray(array));}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection);});return accumulator;}function baseAssign(object,source){return object&&copyObject(source,keys(source),object);}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object);}function baseAssignValue(object,key,value){if(key=='__proto__'&&defineProperty){defineProperty(object,key,{'configurable':true,'enumerable':true,'value':value,'writable':true});}else{object[key]=value;}}function baseAt(object,paths){var index=-1,length=paths.length,result=Array(length),skip=object==null;while(++index<length){result[index]=skip?undefined:get(object,paths[index]);}return result;}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined){number=number<=upper?number:upper;}if(lower!==undefined){number=number>=lower?number:lower;}}return number;}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value);}if(result!==undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result);}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep);}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value));}}else{if(!cloneableTags[tag]){return object?value:{};}result=initCloneByTag(value,tag,isDeep);}}stack||(stack=new Stack());var stacked=stack.get(value);if(stacked){return stacked;}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack));});}else if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack));});}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key];}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack));});return result;}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props);};}function baseConformsTo(object,source,props){var length=props.length;if(object==null){return!length;}object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value)){return false;}}return true;}function baseDelay(func,wait,args){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return setTimeout(function(){func.apply(undefined,args);},wait);}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result;}if(iteratee){values=arrayMap(values,baseUnary(iteratee));}if(comparator){includes=arrayIncludesWith;isCommon=false;}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values);}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer;}}result.push(value);}else if(!includes(values,computed,comparator)){result.push(value);}}return result;}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result;});return result;}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value;}}return result;}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0){start=-start>length?0:length+start;}end=end===undefined||end>length?length:toInteger(end);if(end<0){end+=length;}end=start>end?0:toLength(end);while(start<end){array[start++]=value;}return array;}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result);}else{arrayPush(result,value);}}else if(!isStrict){result[result.length]=value;}}return result;}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys);}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key]);});}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object));}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}function baseGt(value,other){return value>other;}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key);}function baseHasIn(object,key){return object!=null&&key in Object(object);}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end);}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee));}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined;}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer;}}if(seen){seen.push(computed);}result.push(value);}}return result;}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object);});return accumulator;}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:apply(func,object,args);}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag;}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag;}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag;}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true;}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack);}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false;}objIsArr=true;objIsObj=false;}if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,bitmask,customizer,equalFunc,stack);}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag;}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var stack=new Stack();if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack);}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false;}}}return true;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag;}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag;}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];}function baseIteratee(value){if(typeof value=='function'){return value;}if(value==null){return identity;}if((0,_typeof2["default"])(value)=='object'){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object);}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=='constructor'&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key);}}return result;}function baseLt(value,other){return value<other;}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1]);}return function(object){return object===source||baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG);};}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return;}baseFor(source,function(srcValue,key){stack||(stack=new Stack());if(isObject(srcValue)){baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+'',object,source,stack):undefined;if(newValue===undefined){newValue=srcValue;}assignMergeValue(object,key,newValue);}},keysIn);}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return;}var newValue=customizer?customizer(objValue,srcValue,key+'',object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue;}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue);}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true);}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true);}else{newValue=[];}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue);}else if(!isObject(objValue)||isFunction(objValue)){newValue=initCloneObject(srcValue);}}else{isCommon=false;}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack['delete'](srcValue);}assignMergeValue(object,key,newValue);}function baseNth(array,n){var length=array.length;if(!length){return;}n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined;}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return{'criteria':criteria,'index':++index,'value':value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path);});}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value);}}return result;}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values);}if(iteratee){seen=arrayMap(array,baseUnary(iteratee));}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1);}splice.call(array,fromIndex,1);}}return array;}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1);}else{baseUnset(array,index);}}}return array;}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1));}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step;}return result;}function baseRepeat(string,n){var result='';if(!string||n<1||n>MAX_SAFE_INTEGER){return result;}do{if(n%2){result+=string;}n=nativeFloor(n/2);if(n){string+=string;}}while(n);return result;}function baseRest(func,start){return setToString(overRest(func,start,identity),func+'');}function baseSample(collection){return arraySample(values(collection));}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length));}function baseSet(object,path,value,customizer){if(!isObject(object)){return object;}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{};}}assignValue(nested,key,newValue);nested=nested[key];}return object;}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func;};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,'toString',{'configurable':true,'enumerable':false,'value':constant(string),'writable':true});};function baseShuffle(collection){return shuffleSelf(values(collection));}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start;}end=end>length?length:end;if(end<0){end+=length;}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result;});return!!result;}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=='number'&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)){low=mid+1;}else{high=mid;}}return high;}return baseSortedIndexBy(array,value,identity,retHighest);}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array==null?0:array.length,valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN){var setLow=retHighest||othIsReflexive;}else if(valIsUndefined){setLow=othIsReflexive&&(retHighest||othIsDefined);}else if(valIsNull){setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull);}else if(valIsSymbol){setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol);}else if(othIsNull||othIsSymbol){setLow=false;}else{setLow=retHighest?computed<=value:computed<value;}if(setLow){low=mid+1;}else{high=mid;}}return nativeMin(high,MAX_ARRAY_INDEX);}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value;}}return result;}function baseToNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}return+value;}function baseToString(value){if(typeof value=='string'){return value;}if(isArray(value)){return arrayMap(value,baseToString)+'';}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith;}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set);}isCommon=false;includes=cacheHas;seen=new SetCache();}else{seen=iteratee?[]:result;}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed);}result.push(value);}}return result;}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))];}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer);}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index);}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value();}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args));},result);}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2){return length?baseUniq(arrays[0]):[];}var index=-1,result=Array(length);while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length){if(othIndex!=index){result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator);}}}return baseUniq(baseFlatten(result,1),iteratee,comparator);}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value);}return result;}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[];}function castFunction(value){return typeof value=='function'?value:identity;}function castPath(value,object){if(isArray(value)){return value;}return isKey(value,object)?[value]:stringToPath(toString(value));}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end);}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id);};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice();}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result;}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result;}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength);}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result;}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{};}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length);}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1;}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1;}}return 0;}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result;}var order=orders[index];return result*(order=='desc'?-1:1);}}return object.index-other.index;}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex];}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex];}}while(rangeLength--){result[leftIndex++]=args[argsIndex++];}return result;}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex];}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex];}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++];}}return result;}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key];}if(isNew){baseAssignValue(object,key,newValue);}else{assignValue(object,key,newValue);}}return object;}function copySymbols(source,object){return copyObject(source,getSymbols(source),object);}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object);}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator);};}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=='function'?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1;}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer);}}return object;});}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments);}return wrapper;}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(''):string.slice(1);return chr[methodName]()+trailing;};}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,'')),callback,'');};}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor();case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index];}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args);}return wrapper;}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function predicate(key){return iteratee(iterable[key],key,iterable);};}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined;};}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse();}while(index--){var func=funcs[index];if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(prereq&&!wrapper&&getFuncName(func)=='wrapper'){var wrapper=new LodashWrapper([],true);}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=='wrapper'?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result);}return result;};});}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index];}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);}if(partials){args=composeArgs(args,partials,holders,isCurried);}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried);}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length);}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos);}else if(isFlip&&length>1){args.reverse();}if(isAry&&ary<length){args.length=ary;}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn);}return fn.apply(thisBinding,args);}return wrapper;}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{});};}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined){return defaultValue;}if(value!==undefined){result=value;}if(other!==undefined){if(result===undefined){return other;}if(typeof value=='string'||typeof other=='string'){value=baseToString(value);other=baseToString(other);}else{value=baseToNumber(value);other=baseToNumber(other);}result=operator(value,other);}return result;};}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args);});});});}function createPadding(length,chars){chars=chars===undefined?' ':baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars;}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(''):result.slice(0,length);}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex];}while(argsLength--){args[leftIndex++]=arguments[++argsIndex];}return apply(fn,isBind?thisArg:this,args);}return wrapper;}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!='number'&&isIterateeCall(start,end,step)){end=step=undefined;}start=toFinite(start);if(end===undefined){end=start;start=0;}else{end=toFinite(end);}step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight);};}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=='string'&&typeof other=='string')){value=toNumber(value);other=toNumber(other);}return operator(value,other);};}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder=placeholder;return setWrapToString(result,func,bitmask);}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision&&nativeIsFinite(number)){var pair=(toString(number)+'e').split('e'),value=func(pair[0]+'e'+(+pair[1]+precision));pair=(toString(value)+'e').split('e');return+(pair[0]+'e'+(+pair[1]-precision));}return func(number);};}var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values);};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag){return mapToArray(object);}if(tag==setTag){return setToPairs(object);}return baseToPairs(object,keysFunc(object));};}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined;}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined;}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG);}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg);}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity);}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials);}else{result=createHybrid.apply(undefined,newData);}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask);}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue;}return objValue;}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack);stack['delete'](srcValue);}return objValue;}function customOmitClone(value){return isPlainObject(value)?undefined:value;}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+'');}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols);}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn);}var getData=!metaMap?noop:function(func){return metaMap.get(func);};function getFuncName(func){var result=func.name+'',array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name;}}return result;}function getHolder(func){var object=hasOwnProperty.call(lodash,'placeholder')?lodash:func;return object.placeholder;}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result;}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];}return result;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[];}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol);});};var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object);}return result;};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):'';if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case'drop':start+=size;break;case'dropRight':end-=size;break;case'take':end=nativeMin(end,start+size);break;case'takeRight':start=nativeMax(start,end-size);break;}}return{'start':start,'end':end};}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[];}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result||++index!=length){return result;}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=='string'&&hasOwnProperty.call(array,'index')){result.index=array.index;result.input=array.input;}return result;}function initCloneObject(object){return typeof object.constructor=='function'&&!isPrototype(object)?baseCreate(getPrototype(object)):{};}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor();case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor();case symbolTag:return cloneSymbol(object);}}function insertWrapDetails(source,details){var length=details.length;if(!length){return source;}var lastIndex=length-1;details[lastIndex]=(length>1?'& ':'')+details[lastIndex];details=details.join(length>2?', ':' ');return source.replace(reWrapComment,'{\n/* [wrapped with '+details+'] */\n');}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol]);}function isIndex(value,length){var type=(0,_typeof2["default"])(value);length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=(0,_typeof2["default"])(index);if(type=='number'?isArrayLike(object)&&isIndex(index,object.length):type=='string'&&index in object){return eq(object[index],value);}return false;}function isKey(value,object){if(isArray(value)){return false;}var type=(0,_typeof2["default"])(value);if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=(0,_typeof2["default"])(value);return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!='function'||!(funcName in LazyWrapper.prototype)){return false;}if(func===other){return true;}var data=getData(other);return!!data&&func===data[0];}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function isStrictComparable(value){return value===value&&!isObject(value);}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear();}return key;});var cache=result.cache;return result;}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo)){return data;}if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG;}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4];}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6];}value=source[7];if(value){data[7]=value;}if(srcBitmask&WRAP_ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8]);}if(data[9]==null){data[9]=source[9];}data[0]=source[0];data[1]=newBitmask;return data;}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key);}}return result;}function objectToString(value){return nativeObjectToString.call(value);}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index];}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index];}otherArgs[start]=transform(array);return apply(func,this,otherArgs);};}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1));}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}function safeGet(object,key){if(key==='constructor'&&typeof object[key]==='function'){return;}if(key=='__proto__'){return;}return object[key];}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait);};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+'';return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)));}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0];}}else{count=0;}return func.apply(undefined,arguments);};}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index];array[index]=value;}array.length=size;return array;}var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push('');}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value='_.'+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value)){details.push(value);}});return details.sort();}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone();}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result;}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined){size=1;}else{size=nativeMax(toInteger(size),0);}var length=array==null?0:array.length;if(!length||size<1){return[];}var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length){result[resIndex++]=baseSlice(array,index,index+=size);}return result;}function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value;}}return result;}function concat(){var length=arguments.length;if(!length){return[];}var args=Array(length-1),array=arguments[0],index=length;while(index--){args[index-1]=arguments[index];}return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1));}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[];});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee=undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[];});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator=undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined,comparator):[];});function drop(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,n<0?0:n,length);}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n);}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[];}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true):[];}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length){return[];}if(start&&typeof start!='number'&&isIterateeCall(array,value,start)){start=0;end=length;}return baseFill(array,value,start,end);}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0);}return baseFindIndex(array,getIteratee(predicate,3),index);}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=length-1;if(fromIndex!==undefined){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1);}return baseFindIndex(array,getIteratee(predicate,3),index,true);}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[];}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[];}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length){return[];}depth=depth===undefined?1:toInteger(depth);return baseFlatten(array,depth);}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1];}return result;}function head(array){return array&&array.length?array[0]:undefined;}function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0);}return baseIndexOf(array,value,index);}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[];}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[];});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped)){iteratee=undefined;}else{mapped.pop();}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[];});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=='function'?comparator:undefined;if(comparator){mapped.pop();}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[];});function join(array,separator){return array==null?'':nativeJoin.call(array,separator);}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined;}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=length;if(fromIndex!==undefined){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1);}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,true);}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined;}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array;}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array;}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array;}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index;}).sort(compareAscending));return result;});function remove(array,predicate){var result=[];if(!(array&&array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}function reverse(array){return array==null?array:nativeReverse.call(array);}function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[];}if(end&&typeof end!='number'&&isIterateeCall(array,start,end)){start=0;end=length;}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end);}return baseSlice(array,start,end);}function sortedIndex(array,value){return baseSortedIndex(array,value);}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2));}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value)){return index;}}return-1;}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true);}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true);}function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value)){return index;}}return-1;}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[];}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[];}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[];}function take(array,n,guard){if(!(array&&array.length)){return[];}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n);}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length);}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[];}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[];}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true));});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined;}return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2));});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=='function'?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined,comparator);});function uniq(array){return array&&array.length?baseUniq(array):[];}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[];}function uniqWith(array,comparator){comparator=typeof comparator=='function'?comparator:undefined;return array&&array.length?baseUniq(array,undefined,comparator):[];}function unzip(array){if(!(array&&array.length)){return[];}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true;}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index));});}function unzipWith(array,iteratee){if(!(array&&array.length)){return[];}var result=unzip(array);if(iteratee==null){return result;}return arrayMap(result,function(group){return apply(iteratee,undefined,group);});}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[];});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject));});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined;}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2));});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=='function'?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator);});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue);}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet);}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=='function'?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee);});function chain(value){var result=lodash(value);result.__chain__=true;return result;}function tap(value,interceptor){interceptor(value);return value;}function thru(value,interceptor){return interceptor(value);}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function interceptor(object){return baseAt(object,paths);};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)){return this.thru(interceptor);}value=value.slice(start,+start+(length?1:0));value.__actions__.push({'func':thru,'args':[interceptor],'thisArg':undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length&&!array.length){array.push(undefined);}return array;});});function wrapperChain(){return chain(this);}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);}function wrapperNext(){if(this.__values__===undefined){this.__values__=toArray(this.value());}var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{'done':done,'value':value};}function wrapperToIterator(){return this;}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined;if(result){previous.__wrapped__=clone;}else{result=clone;}var previous=clone;parent=parent.__wrapped__;}previous.__wrapped__=value;return result;}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this);}wrapped=wrapped.reverse();wrapped.__actions__.push({'func':thru,'args':[reverse],'thisArg':undefined});return new LodashWrapper(wrapped,this.__chain__);}return this.thru(reverse);}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);}var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){++result[key];}else{baseAssignValue(result,key,1);}});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined;}return func(collection,getIteratee(predicate,3));}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3));}var find=createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1);}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY);}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth);}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3));}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3));}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else{baseAssignValue(result,key,[value]);}});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0);}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1;}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=='function',result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args);});return result;});var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value);});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3));}function orderBy(collection,iteratees,orders,guard){if(collection==null){return[];}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees];}orders=guard?undefined:orders;if(!isArray(orders)){orders=orders==null?[]:[orders];}return baseOrderBy(collection,iteratees,orders);}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return[[],[]];});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach);}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight);}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)));}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection);}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined){n=1;}else{n=toInteger(n);}var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n);}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection);}function size(collection){if(collection==null){return 0;}if(isArrayLike(collection)){return isString(collection)?stringSize(collection):collection.length;}var tag=getTag(collection);if(tag==mapTag||tag==setTag){return collection.size;}return baseKeys(collection).length;}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined;}return func(collection,getIteratee(predicate,3));}var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[];}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[];}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]];}return baseOrderBy(collection,baseFlatten(iteratees,1),[]);});var now=ctxNow||function(){return root.Date.now();};function after(n,func){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}n=toInteger(n);return function(){if(--n<1){return func.apply(this,arguments);}};}function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n);}function before(n,func){var result;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments);}if(n<=1){func=undefined;}return result;};}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG;}return createWrap(func,bitmask,thisArg,partials,holders);});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG;}return createWrap(key,bitmask,object,partials,holders);});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result;}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result;}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing='maxWait'in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing='trailing'in options?!!options.trailing:trailing;}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result;}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result;}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting;}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait;}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time);}timerId=setTimeout(timerExpired,remainingWait(time));}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time);}lastArgs=lastThis=undefined;return result;}function cancel(){if(timerId!==undefined){clearTimeout(timerId);}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined;}function flush(){return timerId===undefined?result:trailingEdge(now());}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime);}if(maxing){clearTimeout(timerId);timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime);}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait);}return result;}debounced.cancel=cancel;debounced.flush=flush;return debounced;}var defer=baseRest(function(func,args){return baseDelay(func,1,args);});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args);});function flip(func){return createWrap(func,WRAP_FLIP_FLAG);}function memoize(func,resolver){if(typeof func!='function'||resolver!=null&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2]);}return!predicate.apply(this,args);};}function once(func){return before(2,func);}var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length){args[index]=transforms[index].call(this,args[index]);}return apply(func,this,args);});});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders);});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders);});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes);});function rest(func,start){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}start=start===undefined?start:toInteger(start);return baseRest(func,start);}function spread(func,start){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array){arrayPush(otherArgs,array);}return apply(func,this,otherArgs);});}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(isObject(options)){leading='leading'in options?!!options.leading:leading;trailing='trailing'in options?!!options.trailing:trailing;}return debounce(func,wait,{'leading':leading,'maxWait':wait,'trailing':trailing});}function unary(func){return ary(func,1);}function wrap(value,wrapper){return partial(castFunction(wrapper),value);}function castArray(){if(!arguments.length){return[];}var value=arguments[0];return isArray(value)?value:[value];}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG);}function cloneWith(value,customizer){customizer=typeof customizer=='function'?customizer:undefined;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer);}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG);}function cloneDeepWith(value,customizer){customizer=typeof customizer=='function'?customizer:undefined;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer);}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source));}function eq(value,other){return value===other||value!==value&&other!==other;}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other;});var isArguments=baseIsArguments(function(){return arguments;}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag;}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value);}function isEmpty(value){if(value==null){return true;}if(isArrayLike(value)&&(isArray(value)||typeof value=='string'||typeof value.splice=='function'||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length;}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size;}if(isPrototype(value)){return!baseKeys(value).length;}for(var key in value){if(hasOwnProperty.call(value,key)){return false;}}return true;}function isEqual(value,other){return baseIsEqual(value,other);}function isEqualWith(value,other,customizer){customizer=typeof customizer=='function'?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result;}function isError(value){if(!isObjectLike(value)){return false;}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=='string'&&typeof value.name=='string'&&!isPlainObject(value);}function isFinite(value){return typeof value=='number'&&nativeIsFinite(value);}function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}function isInteger(value){return typeof value=='number'&&value==toInteger(value);}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=(0,_typeof2["default"])(value);return value!=null&&(type=='object'||type=='function');}function isObjectLike(value){return value!=null&&(0,_typeof2["default"])(value)=='object';}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source));}function isMatchWith(object,source,customizer){customizer=typeof customizer=='function'?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer);}function isNaN(value){return isNumber(value)&&value!=+value;}function isNative(value){if(isMaskable(value)){throw new Error(CORE_ERROR_TEXT);}return baseIsNative(value);}function isNull(value){return value===null;}function isNil(value){return value==null;}function isNumber(value){return typeof value=='number'||isObjectLike(value)&&baseGetTag(value)==numberTag;}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false;}var proto=getPrototype(value);if(proto===null){return true;}var Ctor=hasOwnProperty.call(proto,'constructor')&&proto.constructor;return typeof Ctor=='function'&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString;}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER;}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=='string'||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag;}function isSymbol(value){return(0,_typeof2["default"])(value)=='symbol'||isObjectLike(value)&&baseGetTag(value)==symbolTag;}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined;}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag;}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag;}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other;});function toArray(value){if(!value){return[];}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value);}if(symIterator&&value[symIterator]){return iteratorToArray(value[symIterator]());}var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value);}function toFinite(value){if(!value){return value===0?value:0;}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER;}return value===value?value:0;}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0;}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toPlainObject(value){return copyObject(value,keysIn(value));}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0;}function toString(value){return value==null?'':baseToString(value);}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return;}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key]);}}});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object);});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer);});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer);});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties);}var defaults=baseRest(function(object,sources){object=Object(object);var index=-1;var length=sources.length;var guard=length>2?sources[2]:undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){length=1;}while(++index<length){var source=sources[index];var props=keysIn(source);var propsIndex=-1;var propsLength=props.length;while(++propsIndex<propsLength){var key=props[propsIndex];var value=object[key];if(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key)){object[key]=source[key];}}}return object;});var defaultsDeep=baseRest(function(args){args.push(undefined,customDefaultsMerge);return apply(mergeWith,undefined,args);});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn);}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight);}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn);}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn);}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3));}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3));}function functions(object){return object==null?[]:baseFunctions(object,keys(object));}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object));}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}function has(object,path){return object!=null&&hasPath(object,path,baseHas);}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}var invert=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!='function'){value=nativeObjectToString.call(value);}result[value]=key;},constant(identity));var invertBy=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!='function'){value=nativeObjectToString.call(value);}if(hasOwnProperty.call(result,value)){result[value].push(key);}else{result[value]=[key];}},getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object);}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value);});return result;}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object));});return result;}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex);});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer);});var omit=flatRest(function(object,paths){var result={};if(object==null){return result;}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path;});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone);}var length=paths.length;while(length--){baseUnset(result,paths[length]);}return result;});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)));}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths);});function pickBy(object,predicate){if(object==null){return{};}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop];});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0]);});}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined;}while(++index<length){var value=object==null?undefined:object[toKey(path[index])];if(value===undefined){index=length;value=defaultValue;}object=isFunction(value)?value.call(object):value;}return object;}function set(object,path,value){return object==null?object:baseSet(object,path,value);}function setWith(object,path,value,customizer){customizer=typeof customizer=='function'?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer);}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor():[];}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{};}else{accumulator={};}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}function unset(object,path){return object==null?true:baseUnset(object,path);}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater));}function updateWith(object,path,updater,customizer){customizer=typeof customizer=='function'?customizer:undefined;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer);}function values(object){return object==null?[]:baseValues(object,keys(object));}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object));}function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined;}if(upper!==undefined){upper=toNumber(upper);upper=upper===upper?upper:0;}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0;}return baseClamp(toNumber(number),lower,upper);}function inRange(number,start,end){start=toFinite(start);if(end===undefined){end=start;start=0;}else{end=toFinite(end);}number=toNumber(number);return baseInRange(number,start,end);}function random(lower,upper,floating){if(floating&&typeof floating!='boolean'&&isIterateeCall(lower,upper,floating)){upper=floating=undefined;}if(floating===undefined){if(typeof upper=='boolean'){floating=upper;upper=undefined;}else if(typeof lower=='boolean'){floating=lower;lower=undefined;}}if(lower===undefined&&upper===undefined){lower=0;upper=1;}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0;}else{upper=toFinite(upper);}}if(lower>upper){var temp=lower;lower=upper;upper=temp;}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat('1e-'+((rand+'').length-1))),upper);}return baseRandom(lower,upper);}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word);});function capitalize(string){return upperFirst(toString(string).toLowerCase());}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,'');}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target;}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,'\\$&'):string;}var kebabCase=createCompounder(function(result,word,index){return result+(index?'-':'')+word.toLowerCase();});var lowerCase=createCompounder(function(result,word,index){return result+(index?' ':'')+word.toLowerCase();});var lowerFirst=createCaseFirst('toLowerCase');function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length){return string;}var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars);}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string;}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string;}function parseInt(string,radix,guard){if(guard||radix==null){radix=0;}else if(radix){radix=+radix;}return nativeParseInt(toString(string).replace(reTrimStart,''),radix||0);}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined){n=1;}else{n=toInteger(n);}return baseRepeat(toString(string),n);}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2]);}var snakeCase=createCompounder(function(result,word,index){return result+(index?'_':'')+word.toLowerCase();});function split(string,separator,limit){if(limit&&typeof limit!='number'&&isIterateeCall(string,separator,limit)){separator=limit=undefined;}limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0;if(!limit){return[];}string=toString(string);if(string&&(typeof separator=='string'||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string)){return castSlice(stringToArray(string),0,limit);}}return string.split(separator,limit);}var startCase=createCompounder(function(result,word,index){return result+(index?' ':'')+upperFirst(word);});function startsWith(string,target,position){string=toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target;}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard)){options=undefined;}string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+'|'+interpolate.source+'|'+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+'|'+(options.evaluate||reNoMatch).source+'|$','g');var sourceURL='//# sourceURL='+(hasOwnProperty.call(options,'sourceURL')?(options.sourceURL+'').replace(/[\r\n]/g,' '):'lodash.templateSources['+ ++templateCounter+']')+'\n';string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'";}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '";}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'";}index=offset+match.length;return match;});source+="';\n";var variable=hasOwnProperty.call(options,'variable')&&options.variable;if(!variable){source='with (obj) {\n'+source+'\n}\n';}source=(isEvaluating?source.replace(reEmptyStringLeading,''):source).replace(reEmptyStringMiddle,'$1').replace(reEmptyStringTrailing,'$1;');source='function('+(variable||'obj')+') {\n'+(variable?'':'obj || (obj = {});\n')+"var __t, __p = ''"+(isEscaping?', __e = _.escape':'')+(isEvaluating?', __j = Array.prototype.join;\n'+"function print() { __p += __j.call(arguments, '') }\n":';\n')+source+'return __p\n}';var result=attempt(function(){return Function(importsKeys,sourceURL+'return '+source).apply(undefined,importsValues);});result.source=source;if(isError(result)){throw result;}return result;}function toLower(value){return toString(value).toLowerCase();}function toUpper(value){return toString(value).toUpperCase();}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrim,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join('');}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimEnd,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join('');}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimStart,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join('');}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator='separator'in options?options.separator:separator;length='length'in options?toInteger(options.length):length;omission='omission'in options?baseToString(options.omission):omission;}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length;}if(length>=strLength){return string;}var end=length-stringSize(omission);if(end<1){return omission;}var result=strSymbols?castSlice(strSymbols,0,end).join(''):string.slice(0,end);if(separator===undefined){return result+omission;}if(strSymbols){end+=result.length-end;}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator=RegExp(separator.source,toString(reFlags.exec(separator))+'g');}separator.lastIndex=0;while(match=separator.exec(substring)){var newEnd=match.index;}result=result.slice(0,newEnd===undefined?end:newEnd);}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index);}}return result+omission;}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string;}var upperCase=createCompounder(function(result,word,index){return result+(index?' ':'')+word.toUpperCase();});var upperFirst=createCaseFirst('toUpperCase');function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined){return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string);}return string.match(pattern)||[];}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args);}catch(e){return isError(e)?e:new Error(e);}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object));});return object;});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return[toIteratee(pair[0]),pair[1]];});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args);}}});}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG));}function constant(value){return function(){return value;};}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value;}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value;}function iteratee(func){return baseIteratee(typeof func=='function'?func:baseClone(func,CLONE_DEEP_FLAG));}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG));}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG));}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args);};});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args);};});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source));}var chain=!(isObject(options)&&'chain'in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({'func':func,'args':arguments,'thisArg':object});result.__chain__=chainAll;return result;}return func.apply(object,arrayPush([this.value()],arguments));};}});return object;}function noConflict(){if(root._===this){root._=oldDash;}return this;}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n);});}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path);};}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[];}function stubFalse(){return false;}function stubObject(){return{};}function stubString(){return'';}function stubTrue(){return true;}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER){return[];}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n){iteratee(index);}return result;}function toPath(value){if(isArray(value)){return arrayMap(value,toKey);}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)));}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id;}var add=createMathOperation(function(augend,addend){return augend+addend;},0);var ceil=createRound('ceil');var divide=createMathOperation(function(dividend,divisor){return dividend/divisor;},1);var floor=createRound('floor');function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined;}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined;}function mean(array){return baseMean(array,identity);}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2));}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined;}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined;}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand;},1);var round=createRound('round');var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend;},0);function sum(array){return array&&array.length?baseSum(array,identity):0;}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0;}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName]=func;}});return source;}(),{'chain':false});lodash.VERSION=VERSION;arrayEach(['bind','bindKey','curry','curryRight','partial','partialRight'],function(methodName){lodash[methodName].placeholder=lodash;});arrayEach(['drop','take'],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__){result.__takeCount__=nativeMin(n,result.__takeCount__);}else{result.__views__.push({'size':nativeMin(n,MAX_ARRAY_LENGTH),'type':methodName+(result.__dir__<0?'Right':'')});}return result;};LazyWrapper.prototype[methodName+'Right']=function(n){return this.reverse()[methodName](n).reverse();};});arrayEach(['filter','map','takeWhile'],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({'iteratee':getIteratee(iteratee,3),'type':type});result.__filtered__=result.__filtered__||isFilter;return result;};});arrayEach(['head','last'],function(methodName,index){var takeName='take'+(index?'Right':'');LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0];};});arrayEach(['initial','tail'],function(methodName,index){var dropName='drop'+(index?'':'Right');LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1);};});LazyWrapper.prototype.compact=function(){return this.filter(identity);};LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head();};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate);};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=='function'){return new LazyWrapper(this);}return this.map(function(value){return baseInvoke(value,path,args);});});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)));};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result);}if(start<0){result=result.takeRight(-start);}else if(start){result=result.drop(start);}if(end!==undefined){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start);}return result;};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse();};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH);};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?'take'+(methodName=='last'?'Right':''):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc){return;}lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function interceptor(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result;};if(useLazy&&checkIteratee&&typeof iteratee=='function'&&iteratee.length!=1){isLazy=useLazy=false;}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({'func':thru,'args':[interceptor],'thisArg':undefined});return new LodashWrapper(result,chainAll);}if(isUnwrapped&&onlyLazy){return func.apply(this,args);}result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result;};});arrayEach(['pop','push','shift','sort','splice','unshift'],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?'tap':'thru',retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args);}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args);});};});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+'';if(!hasOwnProperty.call(realNames,key)){realNames[key]=[];}realNames[key].push({'name':methodName,'func':lodashFunc});}});realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{'name':'wrapper','func':undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator){lodash.prototype[symIterator]=wrapperToIterator;}return lodash;};var _=runInContext();if(typeof define=='function'&&(0,_typeof2["default"])(define.amd)=='object'&&define.amd){root._=_;define(function(){return _;});}else if(freeModule){(freeModule.exports=_)._=_;freeExports._=_;}else{root._=_;}}).call(void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],69:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Mutex_1=require("./Mutex");exports.Mutex=Mutex_1["default"];

},{"./Mutex":68}],523:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));!function(e,n){"object"==(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).throttle={});}(void 0,function(e){var n={maxInProgress:5,failFast:!1,nextCheck:function nextCheck(e,n){return Promise.resolve(e.amountStarted<n.length);},ignoreIsFunctionCheck:!1};function t(e,t){return new Promise(function(o,s){var c=Object.assign({},n,t),f={amountDone:0,amountStarted:0,amountResolved:0,amountRejected:0,amountNextCheckFalsey:0,rejectedIndexes:[],resolvedIndexes:[],nextCheckFalseyIndexes:[],taskResults:[]};if(0===e.length)return o(f);for(var u=!1,a=0,i=function i(){if(!0!==u){if(f.amountDone++,"function"==typeof c.progressCallback&&c.progressCallback(f),f.amountDone===e.length)return o(f);a<e.length&&r(a++);}},r=function r(n){c.nextCheck(f,e).then(function(t){!0===t?function(n){if(f.amountStarted++,"function"==typeof e[n])e[n]().then(function(e){f.taskResults[n]=e,f.resolvedIndexes.push(n),f.amountResolved++,i();},function(e){if(f.taskResults[n]=e,f.rejectedIndexes.push(n),f.amountRejected++,!0===c.failFast)return u=!0,s(f);i();});else{if(!0!==c.ignoreIsFunctionCheck)return u=!0,s(new Error("tasks["+n+"]: "+e[n]+", is supposed to be of type function"));f.taskResults[n]=e[n],f.resolvedIndexes.push(n),f.amountResolved++,i();}}(n):(f.amountNextCheckFalsey++,f.nextCheckFalseyIndexes.push(n),i());},s);},h=0;h<Math.min(c.maxInProgress,e.length);h++){r(a++);}});}function o(e,n){return new Promise(function(o,s){t(e,n).then(function(e){o(e.taskResults);},function(e){e instanceof Error?s(e):s(e.taskResults[e.rejectedIndexes[0]]);});});}e.raw=t,e.sync=function(e,n){return o(e,Object.assign({},{maxInProgress:1,failFast:!0},n));},e.all=function(e,n){return o(e,Object.assign({},{failFast:!0},n));},Object.defineProperty(e,"__esModule",{value:!0});});

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],7:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var Throttle=require("promise-parallel-throttle");var async_mutex_1=require("async-mutex");var dbcp_1=require("@evan.network/dbcp");var container_1=require("./container");var nullAddress='0x0000000000000000000000000000000000000000';var DigitalTwinEntryType;(function(DigitalTwinEntryType){DigitalTwinEntryType[DigitalTwinEntryType["AccountId"]=0]="AccountId";DigitalTwinEntryType[DigitalTwinEntryType["Container"]=1]="Container";DigitalTwinEntryType[DigitalTwinEntryType["FileHash"]=2]="FileHash";DigitalTwinEntryType[DigitalTwinEntryType["GenericContract"]=3]="GenericContract";DigitalTwinEntryType[DigitalTwinEntryType["Hash"]=4]="Hash";DigitalTwinEntryType[DigitalTwinEntryType["DigitalTwin"]=5]="DigitalTwin";})(DigitalTwinEntryType=exports.DigitalTwinEntryType||(exports.DigitalTwinEntryType={}));var DigitalTwin=function(_dbcp_1$Logger){(0,_inherits2["default"])(DigitalTwin,_dbcp_1$Logger);function DigitalTwin(options,config){var _this;(0,_classCallCheck2["default"])(this,DigitalTwin);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(DigitalTwin).call(this,options));_this.options=options;_this.config=config;_this.mutexes={};return _this;}(0,_createClass2["default"])(DigitalTwin,[{key:"addAsFavorite",value:function(){var _addAsFavorite=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){var _this2=this;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.getMutex('profile').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this2.options.profile.loadForAccount(_this2.options.profile.treeLabels.contracts);case 2:_context.next=4;return _this2.options.profile.addBcContract('twins.evan',_this2.config.address,{});case 4:_context.next=6;return _this2.options.profile.storeForAccount(_this2.options.profile.treeLabels.contracts);case 6:case"end":return _context.stop();}}},_callee);})));case 2:case"end":return _context2.stop();}}},_callee2,this);}));function addAsFavorite(){return _addAsFavorite.apply(this,arguments);}return addAsFavorite;}()},{key:"addVerifications",value:function(){var _addVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(verifications){var _this3=this;var owner,isOwner,verificationTags,description,oldTags,toAdd;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.ensureContract();case 2:_context4.next=4;return this.options.executor.executeContractCall(this.contract,'owner');case 4:owner=_context4.sent;isOwner=owner===this.config.accountId;_context4.next=8;return Throttle.all(verifications.map(function(verification){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){var verificationId;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this3.options.verifications.setVerification(_this3.config.accountId,_this3.contract.options.address,verification.topic,verification.expirationDate,verification.verificationValue,verification.descriptionDomain,verification.disableSubverifications);case 2:verificationId=_context3.sent;if(!isOwner){_context3.next=12;break;}_context3.t0=_this3.options.verifications;_context3.t1=_this3.config.accountId;_context3.next=8;return _this3.getContractAddress();case 8:_context3.t2=_context3.sent;_context3.t3=verificationId;_context3.next=12;return _context3.t0.confirmVerification.call(_context3.t0,_context3.t1,_context3.t2,_context3.t3);case 12:case"end":return _context3.stop();}}},_callee3);}));}));case 8:if(!(owner===this.config.accountId)){_context4.next=19;break;}verificationTags=verifications.map(function(verification){return"verification:".concat(verification.topic);});_context4.next=12;return this.getDescription();case 12:description=_context4.sent;oldTags=description.tags||[];toAdd=verificationTags.filter(function(tag){return!oldTags.includes(tag);});if(!toAdd.length){_context4.next=19;break;}description.tags=oldTags.concat(toAdd);_context4.next=19;return this.setDescription(description);case 19:case"end":return _context4.stop();}}},_callee4,this);}));function addVerifications(_x){return _addVerifications.apply(this,arguments);}return addVerifications;}()},{key:"createContainers",value:function(){var _createContainers=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(containers){var _this4=this;var result;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.ensureContract();case 2:result={};_context6.next=5;return Throttle.all(Object.keys(containers).map(function(name){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return container_1.Container.create(_this4.options,Object.assign(Object.assign({accountId:_this4.config.accountId},_this4.config.containerConfig),containers[name]));case 2:result[name]=_context5.sent;_context5.next=5;return _this4.setEntry(name,result[name],DigitalTwinEntryType.Container);case 5:case"end":return _context5.stop();}}},_callee5);}));}));case 5:return _context6.abrupt("return",result);case 6:case"end":return _context6.stop();}}},_callee6,this);}));function createContainers(_x2){return _createContainers.apply(this,arguments);}return createContainers;}()},{key:"ensureContract",value:function(){var _ensureContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(){var address,baseError,description;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!this.contract){_context7.next=2;break;}return _context7.abrupt("return");case 2:if(!this.config.address.startsWith('0x')){_context7.next=6;break;}_context7.t0=this.config.address;_context7.next=9;break;case 6:_context7.next=8;return this.options.nameResolver.getAddress(this.config.address);case 8:_context7.t0=_context7.sent;case 9:address=_context7.t0;baseError="ens address ".concat(this.config.address," / contract address ").concat(address,":");if(!(!address||address===nullAddress)){_context7.next=15;break;}throw new Error("".concat(baseError," contract does not exist"));case 15:_context7.prev=15;_context7.next=18;return this.options.description.getDescription(address,nullAddress);case 18:description=_context7.sent["public"];_context7.next=24;break;case 21:_context7.prev=21;_context7.t1=_context7["catch"](15);this.log("".concat(baseError," address ").concat(address,": Could not load dbcp:\n          ").concat(_context7.t1.message),'info');case 24:if(!(!description||!description.tags||description.tags.indexOf('evan-digital-twin')===-1)){_context7.next=26;break;}throw new Error("".concat(baseError," doesn't match the specification (missing ")+'evan-digital-twin\' tag)');case 26:this.contract=this.options.contractLoader.loadContract('DigitalTwin',address);case 27:case"end":return _context7.stop();}}},_callee7,this,[[15,21]]);}));function ensureContract(){return _ensureContract.apply(this,arguments);}return ensureContract;}()},{key:"getContractAddress",value:function(){var _getContractAddress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.ensureContract();case 2:return _context8.abrupt("return",this.contract.options.address);case 3:case"end":return _context8.stop();}}},_callee8,this);}));function getContractAddress(){return _getContractAddress.apply(this,arguments);}return getContractAddress;}()},{key:"getDescription",value:function(){var _getDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(){return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.ensureContract();case 2:_context9.next=4;return this.options.description.getDescription(this.contract.options.address,this.config.accountId);case 4:return _context9.abrupt("return",_context9.sent["public"]);case 5:case"end":return _context9.stop();}}},_callee9,this);}));function getDescription(){return _getDescription.apply(this,arguments);}return getDescription;}()},{key:"getEntries",value:function(){var _getEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(){var _this5=this;var results,itemsRetrieved,resultsPerPage,getResults,_i,_Object$keys,key;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return this.ensureContract();case 2:results={};itemsRetrieved=0;resultsPerPage=10;getResults=function(){var _ref4=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(singleQueryOffset){var queryResult,i;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this5.options.executor.executeContractCall(_this5.contract,'getEntries',singleQueryOffset);case 2:queryResult=_context10.sent;itemsRetrieved+=resultsPerPage;i=0;case 5:if(!(i<queryResult.names.length)){_context10.next=12;break;}if(queryResult.names[i]){_context10.next=8;break;}return _context10.abrupt("break",12);case 8:results[queryResult.names[i]]={raw:{value:queryResult.values[i],entryType:queryResult.entryTypes[i]}};case 9:i++;_context10.next=5;break;case 12:if(!(itemsRetrieved<queryResult.totalCount)){_context10.next=15;break;}_context10.next=15;return getResults(singleQueryOffset+resultsPerPage);case 15:case"end":return _context10.stop();}}},_callee10);}));return function getResults(_x3){return _ref4.apply(this,arguments);};}();_context11.next=8;return getResults(0);case 8:for(_i=0,_Object$keys=Object.keys(results);_i<_Object$keys.length;_i++){key=_Object$keys[_i];this.processEntry(results[key]);}return _context11.abrupt("return",results);case 10:case"end":return _context11.stop();}}},_callee11,this);}));function getEntries(){return _getEntries.apply(this,arguments);}return getEntries;}()},{key:"getEntry",value:function(){var _getEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(name){var _$exec,_$exec2,firstKey,remainder,result;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this.ensureContract();case 2:_$exec=/([^/]+)(?:\/(.+))?/.exec(name),_$exec2=(0,_slicedToArray2["default"])(_$exec,3),firstKey=_$exec2[1],remainder=_$exec2[2];_context12.next=5;return this.options.executor.executeContractCall(this.contract,'getEntry',firstKey);case 5:_context12.t0=_context12.sent;result={raw:_context12.t0};this.processEntry(result);if(!(remainder&&result.entryType===DigitalTwinEntryType.DigitalTwin)){_context12.next=12;break;}return _context12.abrupt("return",result.value.getEntry(remainder));case 12:return _context12.abrupt("return",result);case 13:case"end":return _context12.stop();}}},_callee12,this);}));function getEntry(_x4){return _getEntry.apply(this,arguments);}return getEntry;}()},{key:"getVerifications",value:function(){var _getVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(){var _this6=this;var description,tags;return _regenerator["default"].wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return this.ensureContract();case 2:_context14.next=4;return this.getDescription();case 4:description=_context14.sent;tags=description.tags||[];return _context14.abrupt("return",Throttle.all(tags.filter(function(tag){return tag.startsWith('verification:');}).map(function(tag){return tag.substr(13);}).map(function(topic){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(){return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.abrupt("return",_this6.options.verifications.getVerifications(description.identity,topic,true));case 1:case"end":return _context13.stop();}}},_callee13);}));})));case 7:case"end":return _context14.stop();}}},_callee14,this);}));function getVerifications(){return _getVerifications.apply(this,arguments);}return getVerifications;}()},{key:"isFavorite",value:function(){var _isFavorite=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(){var favorites;return _regenerator["default"].wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return DigitalTwin.getFavorites(this.options);case 2:favorites=_context15.sent;return _context15.abrupt("return",favorites.indexOf(this.config.address)!==-1);case 4:case"end":return _context15.stop();}}},_callee15,this);}));function isFavorite(){return _isFavorite.apply(this,arguments);}return isFavorite;}()},{key:"removeFromFavorites",value:function(){var _removeFromFavorites=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(){var _this7=this;return _regenerator["default"].wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return this.getMutex('profile').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(){return _regenerator["default"].wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return _this7.options.profile.loadForAccount(_this7.options.profile.treeLabels.contracts);case 2:_context16.next=4;return _this7.options.profile.removeBcContract('twins.evan',_this7.config.address);case 4:_context16.next=6;return _this7.options.profile.storeForAccount(_this7.options.profile.treeLabels.contracts);case 6:case"end":return _context16.stop();}}},_callee16);})));case 2:case"end":return _context17.stop();}}},_callee17,this);}));function removeFromFavorites(){return _removeFromFavorites.apply(this,arguments);}return removeFromFavorites;}()},{key:"setDescription",value:function(){var _setDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(description){var _this8=this;return _regenerator["default"].wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return this.ensureContract();case 2:_context19.next=4;return this.getMutex('description').runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(){return _regenerator["default"].wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:description.tags=description.tags||[];if(description.tags.indexOf('evan-digital-twin')===-1){description.tags.push('evan-digital-twin');}_context18.next=4;return _this8.options.description.setDescription(_this8.contract.options.address,{"public":description},_this8.config.accountId);case 4:case"end":return _context18.stop();}}},_callee18);})));case 4:case"end":return _context19.stop();}}},_callee19,this);}));function setDescription(_x5){return _setDescription.apply(this,arguments);}return setDescription;}()},{key:"setEntries",value:function(){var _setEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee21(entries){var _this9=this;return _regenerator["default"].wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return this.ensureContract();case 2:_context21.next=4;return Throttle.all(Object.keys(entries).map(function(name){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee20(){return _regenerator["default"].wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:return _context20.abrupt("return",_this9.setEntry(name,entries[name].value,entries[name].entryType));case 1:case"end":return _context20.stop();}}},_callee20);}));}));case 4:case"end":return _context21.stop();}}},_callee21,this);}));function setEntries(_x6){return _setEntries.apply(this,arguments);}return setEntries;}()},{key:"setEntry",value:function(){var _setEntry=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee22(name,value,entryType){var toSet,contractAddress;return _regenerator["default"].wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return this.ensureContract();case 2:if(!(value instanceof container_1.Container)){_context22.next=9;break;}_context22.next=5;return value.getContractAddress();case 5:contractAddress=_context22.sent;toSet="0x000000000000000000000000".concat(contractAddress.substr(2));_context22.next=10;break;case 9:if(value.length===42){toSet="0x000000000000000000000000".concat(value.substr(2));}else{toSet=value;}case 10:_context22.next=12;return this.options.executor.executeContractTransaction(this.contract,'setEntry',{from:this.config.accountId},name,toSet,entryType);case 12:case"end":return _context22.stop();}}},_callee22,this);}));function setEntry(_x7,_x8,_x9){return _setEntry.apply(this,arguments);}return setEntry;}()},{key:"getMutex",value:function getMutex(name){if(!this.mutexes[name]){this.mutexes[name]=new async_mutex_1.Mutex();}return this.mutexes[name];}},{key:"processEntry",value:function processEntry(entry){var address;entry.entryType=parseInt(entry.raw.entryType,10);switch(entry.entryType){case DigitalTwinEntryType.AccountId:case DigitalTwinEntryType.GenericContract:entry.value=this.options.web3.utils.toChecksumAddress("0x".concat(entry.raw.value.substr(26)));break;case DigitalTwinEntryType.Container:address=this.options.web3.utils.toChecksumAddress("0x".concat(entry.raw.value.substr(26)));entry.value=new container_1.Container(this.options,Object.assign(Object.assign({accountId:this.config.accountId},this.config.containerConfig),{address:address}));break;case DigitalTwinEntryType.DigitalTwin:address=this.options.web3.utils.toChecksumAddress("0x".concat(entry.raw.value.substr(26)));entry.value=new DigitalTwin(this.options,Object.assign(Object.assign({},this.config),{address:address}));break;default:entry.value=entry.raw.value;}}}],[{key:"create",value:function(){var _create=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee23(options,config){var instanceConfig,envelope,validation,splitEns,i,checkAddress,owner,factoryAddress,factory,contractId,twin;return _regenerator["default"].wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:instanceConfig=JSON.parse(JSON.stringify(config));instanceConfig.description.tags=instanceConfig.description.tags||[];if(instanceConfig.description.tags.indexOf('evan-digital-twin')===-1){instanceConfig.description.tags.push('evan-digital-twin');}envelope={"public":instanceConfig.description||DigitalTwin.defaultDescription};validation=options.description.validateDescription(envelope);if(!(validation!==true)){_context23.next=7;break;}throw new Error("validation of description failed with: ".concat(JSON.stringify(validation)));case 7:if(!(instanceConfig.address&&instanceConfig.address.indexOf('0x')!==0)){_context23.next=27;break;}_context23.prev=8;splitEns=config.address.split('.');i=splitEns.length-1;case 11:if(!(i>-1)){_context23.next=22;break;}checkAddress=splitEns.slice(i,splitEns.length).join('.');_context23.next=15;return options.executor.executeContractCall(options.nameResolver.ensContract,'owner',options.nameResolver.namehash(checkAddress));case 15:owner=_context23.sent;if(!(owner===nullAddress)){_context23.next=19;break;}_context23.next=19;return options.nameResolver.setAddress(checkAddress,nullAddress,instanceConfig.accountId);case 19:i--;_context23.next=11;break;case 22:_context23.next=27;break;case 24:_context23.prev=24;_context23.t0=_context23["catch"](8);throw new Error("account is not permitted to create a contract for the ens address\n          ".concat(config.address));case 27:if(!(instanceConfig.factoryAddress&&instanceConfig.factoryAddress.startsWith('0x'))){_context23.next=31;break;}factoryAddress=instanceConfig.factoryAddress;_context23.next=34;break;case 31:_context23.next=33;return options.nameResolver.getAddress(instanceConfig.factoryAddress||options.nameResolver.getDomainName(options.nameResolver.config.domains.indexFactory));case 33:factoryAddress=_context23.sent;case 34:factory=options.contractLoader.loadContract('DigitalTwinFactory',factoryAddress);_context23.next=37;return options.executor.executeContractTransaction(factory,'createContract',{from:instanceConfig.accountId,autoGas:1.1,event:{target:'DigitalTwinFactory',eventName:'ContractCreated'},getEventResult:function getEventResult(event,args){return args.newAddress;}},instanceConfig.accountId);case 37:contractId=_context23.sent;_context23.next=40;return options.description.setDescription(contractId,envelope,instanceConfig.accountId);case 40:if(!(instanceConfig.address&&instanceConfig.address.indexOf('0x')!==0)){_context23.next=43;break;}_context23.next=43;return options.nameResolver.setAddress(config.address,contractId,config.accountId);case 43:instanceConfig.address=contractId;_context23.next=46;return options.verifications.createIdentity(config.accountId,contractId);case 46:twin=new DigitalTwin(options,instanceConfig);_context23.next=49;return twin.ensureContract();case 49:return _context23.abrupt("return",twin);case 50:case"end":return _context23.stop();}}},_callee23,null,[[8,24]]);}));function create(_x10,_x11){return _create.apply(this,arguments);}return create;}()},{key:"getFavorites",value:function(){var _getFavorites=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee24(options){var favorites;return _regenerator["default"].wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.next=2;return options.profile.getBcContracts('twins.evan');case 2:_context24.t0=_context24.sent;if(_context24.t0){_context24.next=5;break;}_context24.t0={};case 5:favorites=_context24.t0;delete favorites.cryptoInfo;return _context24.abrupt("return",Object.keys(favorites));case 8:case"end":return _context24.stop();}}},_callee24);}));function getFavorites(_x12){return _getFavorites.apply(this,arguments);}return getFavorites;}()},{key:"getValidity",value:function(){var _getValidity=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee25(options,ensAddress){var valid,exists,error,twinInstance;return _regenerator["default"].wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:valid=false,exists=false,error=null;twinInstance=new DigitalTwin(options,{accountId:nullAddress,address:ensAddress,containerConfig:{accountId:nullAddress}});_context25.prev=2;_context25.next=5;return twinInstance.ensureContract();case 5:valid=true;_context25.next=11;break;case 8:_context25.prev=8;_context25.t0=_context25["catch"](2);error=_context25.t0;case 11:if(!error||error.message.indexOf('contract does not exist')===-1){exists=true;}return _context25.abrupt("return",{valid:valid,error:error,exists:exists});case 13:case"end":return _context25.stop();}}},_callee25,null,[[2,8]]);}));function getValidity(_x13,_x14){return _getValidity.apply(this,arguments);}return getValidity;}()}]);return DigitalTwin;}(dbcp_1.Logger);exports.DigitalTwin=DigitalTwin;DigitalTwin.defaultDescription={name:'Digital Twin',description:'Digital Twin Contract',author:'',version:'0.1.0',dbcpVersion:2};

},{"./container":6,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"async-mutex":69,"promise-parallel-throttle":523}],8:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var BigNumber=require("bignumber.js");var http=require("http");var https=require("https");var url=require("url");var request=function request(requestOptions){return new Promise(function(resolve,reject){var requestModule=requestOptions.url.startsWith('https')?https:http;var parsed=url.parse(requestOptions.url);var result='';var options={method:requestOptions.method||'POST',headers:requestOptions.header||{'Content-Type':'application/json'},hostname:parsed.hostname,port:parsed.port,path:parsed.path};var req=requestModule.request(options,function(res){res.on('data',function(d){return result+=d;});res.on('end',function(){var resultObj=JSON.parse(result);if(resultObj.error){reject(resultObj.error);}else{resolve(resultObj.result);}});});req.on('error',function(e){return reject(e);});req.write(JSON.stringify(requestOptions.body));req.end();});};var dbcp_1=require("@evan.network/dbcp");var ExecutorAgent=function(_dbcp_1$Executor){(0,_inherits2["default"])(ExecutorAgent,_dbcp_1$Executor);function ExecutorAgent(options){var _this;(0,_classCallCheck2["default"])(this,ExecutorAgent);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(ExecutorAgent).call(this,options));_this.config=options.config;_this.contractLoader=options.contractLoader;_this.defaultOptions=options.defaultOptions;_this.signer=options.signer;_this.token=options.token;_this.web3=options.web3;_this.agentUrl=options.agentUrl||'http://localhost:8080';return _this;}(0,_createClass2["default"])(ExecutorAgent,[{key:"createContract",value:function(){var _createContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contractName,functionArguments,inputOptions){var contractId;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.log("starting contract creation for \"".concat(contractName,"\" via agent"),'debug');if(!(inputOptions.value&&parseInt(inputOptions.value,10))){_context.next=3;break;}throw new Error('sending funds is not supported by the agent based executor; '+"value has been set to ".concat(inputOptions.value," for new contract \"").concat(contractName,"\""));case 3:_context.next=5;return request({url:"".concat(this.agentUrl,"/api/smart-agents/executor/createContract"),method:'POST',body:{contractName:contractName,functionArguments:functionArguments,inputOptions:inputOptions,token:this.token}});case 5:contractId=_context.sent;return _context.abrupt("return",this.contractLoader.loadContract(contractName,contractId));case 7:case"end":return _context.stop();}}},_callee,this);}));function createContract(_x,_x2,_x3){return _createContract.apply(this,arguments);}return createContract;}()},{key:"executeContractCall",value:function(){var _executeContractCall=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(contract,functionName){var functionSignature,_len,args,_key,result,_args2=arguments;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.log("starting contract call \"".concat(functionName,"\" via agent"),'debug');if(contract.options.jsonInterface){functionSignature=contract.options.jsonInterface.filter(function(fun){return fun.name===functionName;})[0];}else{functionSignature=contract.abiModel.abi.methods[functionName].abiItem;}for(_len=_args2.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=_args2[_key];}_context2.next=5;return request({url:"".concat(this.agentUrl,"/api/smart-agents/executor/executeContractCall"),method:'POST',body:{contractId:contract.options.address,functionSignature:functionSignature,functionName:functionName,functionArguments:args}});case 5:result=_context2.sent;if(Array.isArray(result)){result.forEach(function(value,index){if(value&&value.isBigNumber){result[index]=new BigNumber(result[index].value);}});}else{if(result&&result.isBigNumber){result=new BigNumber(result.value);}}return _context2.abrupt("return",result);case 8:case"end":return _context2.stop();}}},_callee2,this);}));function executeContractCall(_x4,_x5){return _executeContractCall.apply(this,arguments);}return executeContractCall;}()},{key:"executeContractTransaction",value:function(){var _executeContractTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(contract,functionName,inputOptions){var functionSignature,_len2,functionArguments,_key2,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.log("starting contract transaction \"".concat(functionName,"\" via agent"),'debug');if(!(inputOptions.value&&parseInt(inputOptions.value,10))){_context3.next=3;break;}throw new Error('sending funds is not supported by the agent based executor; '+"value has been set to ".concat(inputOptions.value," for tx \"").concat(functionName,"\""));case 3:if(contract.options.jsonInterface){functionSignature=contract.options.jsonInterface.filter(function(fun){return fun.name===functionName;})[0];}else{functionSignature=contract.abiModel.abi.methods[functionName].abiItem;}for(_len2=_args3.length,functionArguments=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){functionArguments[_key2-3]=_args3[_key2];}return _context3.abrupt("return",request({url:"".concat(this.agentUrl,"/api/smart-agents/executor/executeContractTransaction"),method:'POST',body:{contractId:contract.options.address,functionSignature:functionSignature,functionName:functionName,options:inputOptions,functionArguments:functionArguments,token:this.token}}));case 6:case"end":return _context3.stop();}}},_callee3,this);}));function executeContractTransaction(_x6,_x7,_x8){return _executeContractTransaction.apply(this,arguments);}return executeContractTransaction;}()},{key:"executeSend",value:function(){var _executeSend=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:throw new Error("sending funds is not supported by the agent based executor");case 1:case"end":return _context4.stop();}}},_callee4);}));function executeSend(){return _executeSend.apply(this,arguments);}return executeSend;}()},{key:"init",value:function init(options){this.eventHub=options.eventHub;}},{key:"generateToken",value:function(){var _generateToken=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(password,functions){var updatedFunctions;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:updatedFunctions=functions.map(function(fun){var newFun={contractId:fun.contractId||'0x0000000000000000000000000000000000000000',signature:fun.signature||null,count:fun.count||1};if(fun.contract){newFun.contractId=fun.contract.options.address;if(fun.functionName){if(fun.contract.options.jsonInterface){newFun.signature=fun.contract.options.jsonInterface.filter(function(ff){return ff.name===fun.functionName;})[0];}else{newFun.signature=fun.contract.abiModel.abi.methods[fun.functionName].abiItem;}}}return newFun;});return _context5.abrupt("return",request({url:"".concat(this.agentUrl,"/api/smart-agents/executor/generateToken"),method:'POST',headers:{'Content-Type':'application/json'},body:{password:password,functions:updatedFunctions}}));case 2:case"end":return _context5.stop();}}},_callee5,this);}));function generateToken(_x9,_x10){return _generateToken.apply(this,arguments);}return generateToken;}()},{key:"handleRequestResult",value:function handleRequestResult(resolve,reject,error,msg,body){if(error){reject(error);}else if(body.error){reject(body.error);}else{resolve(body.result);}}}]);return ExecutorAgent;}(dbcp_1.Executor);exports.ExecutorAgent=ExecutorAgent;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"bignumber.js":72,"http":1260,"https":1185,"url":1281}],1185:[function(require,module,exports){
var http=require('http');var url=require('url');var https=module.exports;for(var key in http){if(http.hasOwnProperty(key))https[key]=http[key];}https.request=function(params,cb){params=validateParams(params);return http.request.call(this,params,cb);};https.get=function(params,cb){params=validateParams(params);return http.get.call(this,params,cb);};function validateParams(params){if(typeof params==='string'){params=url.parse(params);}if(!params.protocol){params.protocol='https:';}if(params.protocol!=='https:'){throw new Error('Protocol "'+params.protocol+'" not supported. Expected "https:"');}return params;}

},{"http":1260,"url":1281}],1281:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var punycode=require('punycode');var util=require('./util');exports.parse=urlParse;exports.resolve=urlResolve;/* common-shake removed: exports.resolveObject = */ void urlResolveObject;/* common-shake removed: exports.format = */ void urlFormat;/* common-shake removed: exports.Url = */ void Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null;}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=['<','>','"','`',' ','\r','\n','\t'],unwise=['{','}','|','\\','^','`'].concat(delims),autoEscape=['\''].concat(unwise),nonHostChars=['%','/','?',';','#'].concat(autoEscape),hostEndingChars=['/','?','#'],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={'javascript':true,'javascript:':true},hostlessProtocol={'javascript':true,'javascript:':true},slashedProtocol={'http':true,'https':true,'ftp':true,'gopher':true,'file':true,'http:':true,'https:':true,'ftp:':true,'gopher:':true,'file:':true},querystring=require('querystring');function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url();u.parse(url,parseQueryString,slashesDenoteHost);return u;}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+(0,_typeof2["default"])(url));}var queryIndex=url.indexOf('?'),splitter=queryIndex!==-1&&queryIndex<url.indexOf('#')?'?':'#',uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,'/');url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split('#').length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1));}else{this.query=this.search.substr(1);}}else if(parseQueryString){this.search='';this.query={};}return this;}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length);}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==='//';if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true;}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec;}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf('@');}else{atSign=rest.lastIndexOf('@',hostEnd);}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth);}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec;}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||'';var ipv6Hostname=this.hostname[0]==='['&&this.hostname[this.hostname.length-1]===']';if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart='';for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+='x';}else{newpart+=part[j];}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2]);}if(notHost.length){rest='/'+notHost.join('.')+rest;}this.hostname=validParts.join('.');break;}}}}if(this.hostname.length>hostnameMaxLen){this.hostname='';}else{this.hostname=this.hostname.toLowerCase();}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname);}var p=this.port?':'+this.port:'';var h=this.hostname||'';this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=='/'){rest='/'+rest;}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae);}rest=rest.split(ae).join(esc);}}var hash=rest.indexOf('#');if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash);}var qm=rest.indexOf('?');if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query);}rest=rest.slice(0,qm);}else if(parseQueryString){this.search='';this.query={};}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname='/';}if(this.pathname||this.search){var p=this.pathname||'';var s=this.search||'';this.path=p+s;}this.href=this.format();return this;};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format();}Url.prototype.format=function(){var auth=this.auth||'';if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,':');auth+='@';}var protocol=this.protocol||'',pathname=this.pathname||'',hash=this.hash||'',host=false,query='';if(this.host){host=auth+this.host;}else if(this.hostname){host=auth+(this.hostname.indexOf(':')===-1?this.hostname:'['+this.hostname+']');if(this.port){host+=':'+this.port;}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query);}var search=this.search||query&&'?'+query||'';if(protocol&&protocol.substr(-1)!==':')protocol+=':';if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host='//'+(host||'');if(pathname&&pathname.charAt(0)!=='/')pathname='/'+pathname;}else if(!host){host='';}if(hash&&hash.charAt(0)!=='#')hash='#'+hash;if(search&&search.charAt(0)!=='?')search='?'+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match);});search=search.replace('#','%23');return protocol+host+pathname+search+hash;};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative);}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format();};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative);}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url();rel.parse(relative,false,true);relative=rel;}var result=new Url();var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey];}result.hash=relative.hash;if(relative.href===''){result.href=result.format();return result;}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=='protocol')result[rkey]=relative[rkey];}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname='/';}result.href=result.format();return result;}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k];}result.href=result.format();return result;}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||'').split('/');while(relPath.length&&!(relative.host=relPath.shift())){;}if(!relative.host)relative.host='';if(!relative.hostname)relative.hostname='';if(relPath[0]!=='')relPath.unshift('');if(relPath.length<2)relPath.unshift('');result.pathname=relPath.join('/');}else{result.pathname=relative.pathname;}result.search=relative.search;result.query=relative.query;result.host=relative.host||'';result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||'';var s=result.search||'';result.path=p+s;}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result;}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==='/',isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==='/',mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split('/')||[],relPath=relative.pathname&&relative.pathname.split('/')||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname='';result.port=null;if(result.host){if(srcPath[0]==='')srcPath[0]=result.host;else srcPath.unshift(result.host);}result.host='';if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==='')relPath[0]=relative.host;else relPath.unshift(relative.host);}relative.host=null;}mustEndAbs=mustEndAbs&&(relPath[0]===''||srcPath[0]==='');}if(isRelAbs){result.host=relative.host||relative.host===''?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===''?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath;}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query;}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf('@')>0?result.host.split('@'):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift();}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:'')+(result.search?result.search:'');}result.href=result.format();return result;}if(!srcPath.length){result.pathname=null;if(result.search){result.path='/'+result.search;}else{result.path=null;}result.href=result.format();return result;}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==='.'||last==='..')||last==='';var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==='.'){srcPath.splice(i,1);}else if(last==='..'){srcPath.splice(i,1);up++;}else if(up){srcPath.splice(i,1);up--;}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift('..');}}if(mustEndAbs&&srcPath[0]!==''&&(!srcPath[0]||srcPath[0].charAt(0)!=='/')){srcPath.unshift('');}if(hasTrailingSlash&&srcPath.join('/').substr(-1)!=='/'){srcPath.push('');}var isAbsolute=srcPath[0]===''||srcPath[0]&&srcPath[0].charAt(0)==='/';if(psychotic){result.hostname=result.host=isAbsolute?'':srcPath.length?srcPath.shift():'';var authInHost=result.host&&result.host.indexOf('@')>0?result.host.split('@'):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift();}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift('');}if(!srcPath.length){result.pathname=null;result.path=null;}else{result.pathname=srcPath.join('/');}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:'')+(result.search?result.search:'');}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result;};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==':'){this.port=port.substr(1);}host=host.substr(0,host.length-port.length);}if(host)this.hostname=host;};

},{"./util":1282,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"punycode":1228,"querystring":1231}],1260:[function(require,module,exports){
(function (global){
var ClientRequest=require('./lib/request');var response=require('./lib/response');var extend=require('xtend');var statusCodes=require('builtin-status-codes');var url=require('url');var http=exports;http.request=function(opts,cb){if(typeof opts==='string')opts=url.parse(opts);else opts=extend(opts);var defaultProtocol=global.location.protocol.search(/^https?:$/)===-1?'http:':'';var protocol=opts.protocol||defaultProtocol;var host=opts.hostname||opts.host;var port=opts.port;var path=opts.path||'/';if(host&&host.indexOf(':')!==-1)host='['+host+']';opts.url=(host?protocol+'//'+host:'')+(port?':'+port:'')+path;opts.method=(opts.method||'GET').toUpperCase();opts.headers=opts.headers||{};var req=new ClientRequest(opts);if(cb)req.on('response',cb);return req;};http.get=function get(opts,cb){var req=http.request(opts,cb);req.end();return req;};http.ClientRequest=ClientRequest;http.IncomingMessage=response.IncomingMessage;http.Agent=function(){};http.Agent.defaultMaxSockets=4;http.globalAgent=new http.Agent();http.STATUS_CODES=statusCodes;http.METHODS=['CHECKOUT','CONNECT','COPY','DELETE','GET','HEAD','LOCK','M-SEARCH','MERGE','MKACTIVITY','MKCOL','MOVE','NOTIFY','OPTIONS','PATCH','POST','PROPFIND','PROPPATCH','PURGE','PUT','REPORT','SEARCH','SUBSCRIBE','TRACE','UNLOCK','UNSUBSCRIBE'];

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./lib/request":1262,"./lib/response":1263,"builtin-status-codes":1134,"url":1281,"xtend":1288}],9:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var web3_eth_abi_1=require("web3-eth-abi");var dbcp_1=require("@evan.network/dbcp");var coder=new web3_eth_abi_1.AbiCoder();var ExecutorWallet=function(_dbcp_1$Executor){(0,_inherits2["default"])(ExecutorWallet,_dbcp_1$Executor);function ExecutorWallet(options){var _this;(0,_classCallCheck2["default"])(this,ExecutorWallet);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(ExecutorWallet).call(this,options));_this.options=options;_this.defaultOptions=options.defaultOptions||{};return _this;}(0,_createClass2["default"])(ExecutorWallet,[{key:"createContract",value:function(){var _createContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contractName,functionArguments,inputOptions){var compiledContract,input,txInfo;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.log("starting creation of contract \"".concat(contractName,"\""),'debug');compiledContract=this.options.contractLoader.getCompiledContract(contractName);if(!(!compiledContract||!compiledContract.bytecode)){_context.next=4;break;}throw new Error("cannot find contract bytecode for contract \"".concat(contractName,"\""));case 4:input="0x".concat(compiledContract.bytecode)+this.encodeConstructorParams(JSON.parse(compiledContract["interface"]),functionArguments);_context.next=7;return this.options.wallet.submitRawTransaction(null,input,Object.assign({},inputOptions,{from:this.options.accountId}));case 7:txInfo=_context.sent;if(txInfo.result){_context.next=12;break;}throw new Error("contract creation failed; txInfo: ".concat(txInfo));case 12:return _context.abrupt("return",this.options.contractLoader.loadContract(contractName,txInfo.result));case 13:case"end":return _context.stop();}}},_callee,this);}));function createContract(_x,_x2,_x3){return _createContract.apply(this,arguments);}return createContract;}()},{key:"executeContractCall",value:function(){var _executeContractCall=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(contract,functionName){var options,_len,args,_key,_contract$methods,_contract$methods2,_contract$methods3,_args2=arguments;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.log("starting contract call \"".concat(functionName,"\""),'debug');if(contract.methods[functionName]){_context2.next=3;break;}throw new Error("contract does not support method \"".concat(functionName,"\", ")+"supported methods are ".concat(Object.keys(contract.methods)));case 3:if(!(!contract||!contract.options||!contract.options.address)){_context2.next=5;break;}throw new Error('contract undefined or contract has no address');case 5:options=this.defaultOptions?Object.assign({},this.defaultOptions):null;for(_len=_args2.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=_args2[_key];}if(!(args.length&&(0,_typeof2["default"])(args[args.length-1])==='object')){_context2.next=12;break;}options=Object.assign(options||{},args[args.length-1],{from:this.options.wallet.walletAddress});return _context2.abrupt("return",(_contract$methods=contract.methods)[functionName].apply(_contract$methods,(0,_toConsumableArray2["default"])(args.slice(0,args.length-1))).call(options));case 12:if(!options){_context2.next=16;break;}return _context2.abrupt("return",(_contract$methods2=contract.methods)[functionName].apply(_contract$methods2,args).call(options));case 16:return _context2.abrupt("return",(_contract$methods3=contract.methods)[functionName].apply(_contract$methods3,args).call());case 17:case"end":return _context2.stop();}}},_callee2,this);}));function executeContractCall(_x4,_x5){return _executeContractCall.apply(this,arguments);}return executeContractCall;}()},{key:"executeContractTransaction",value:function(){var _executeContractTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(contract,functionName,inputOptions){var _this2=this;var _len2,functionArguments,_key2,options,transactionTimeout,initialArguments,logGas,_args8=arguments;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:for(_len2=_args8.length,functionArguments=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){functionArguments[_key2-3]=_args8[_key2];}this.log("starting contract transaction \"".concat(functionName,"\""),'debug');if(inputOptions.value&&parseInt(inputOptions.value,10)){if(typeof inputOptions.value!=='string'){inputOptions.value="0x".concat(inputOptions.value.toString(16));}}if(this.signer){_context8.next=5;break;}throw new Error('signer is undefined');case 5:if(contract.methods[functionName]){_context8.next=7;break;}throw new Error("contract does not support method \"".concat(functionName,"\", ")+"supported methods are ".concat(Object.keys(contract.methods)));case 7:if(!(!contract||!contract.options||!contract.options.address)){_context8.next=9;break;}throw new Error('contract undefined or contract has no address');case 9:options=Object.assign({timeout:300000},this.defaultOptions||{},inputOptions);transactionTimeout=options.eventTimeout||options.timeout;this.scrubOptions(options);initialArguments=functionArguments.slice(0);logGas=function logGas(extraParams){var staticEntries={arguments:initialArguments,contract:contract.address||contract._address,from:inputOptions.from,gasEstimated:null,gasGiven:options.gas,gasUsed:0,status:'unknown',transaction:functionName,transactionHash:null};var level='gasLog';_this2.log(JSON.stringify(Object.assign(staticEntries,extraParams)),level);};return _context8.abrupt("return",new Promise(function(){var _ref=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(resolve,reject){var isPending,transactionHash,eventResults,subscription,stopWatching,_contract$methods4,gasEstimated,executeCallback,estimationCallback,estimateOptions;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:isPending=true;eventResults={};stopWatching=function(){var _ref2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(isError){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",new Promise(function(resolveStop){setTimeout(function(){if(inputOptions.event&&subscription){if(_this2.eventHub){_this2.eventHub.unsubscribe({subscription:subscription})["catch"](function(ex){_this2.log('error occurred while unsubscribing from transaction event; '+"".concat(ex.message||ex).concat(ex.stack||''),'error');});}else{reject('passed an event to a transaction but no event hub registered');}}isPending=false;resolveStop();},isError?1000:0);}));case 1:case"end":return _context3.stop();}}},_callee3);}));return function stopWatching(_x11){return _ref2.apply(this,arguments);};}();_context7.prev=3;setTimeout((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!isPending){_context4.next=5;break;}_context4.next=3;return stopWatching(true);case 3:logGas({status:'error',message:'timeout'});reject(new Error("timeout after ".concat(transactionTimeout,"ms during ").concat(functionName)));case 5:case"end":return _context4.stop();}}},_callee4);})),transactionTimeout);if(inputOptions.event){if(_this2.eventHub){_this2.eventHub.subscribe(inputOptions.event.target,contract.options.address,inputOptions.event.eventName,function(){return true;},function(event){if(transactionHash===event.transactionHash){if(inputOptions.getEventResult){resolve(inputOptions.getEventResult(event,event.args||event.returnValues));}else{resolve(event);}}else{eventResults[event.transactionHash]=event;}}).then(function(result){subscription=result;})["catch"](function(ex){_this2.log('error occurred while subscribing to transaction event; '+"".concat(ex.message||ex,"; ").concat(ex.stack||''),'error');});}else{_this2.log('passed an event to a transaction but no event hub registered','warning');}}functionArguments.push(options);executeCallback=function(){var _ref4=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(err,packedResult){var receipt,optionsGas,errorText;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!err){_context5.next=2;break;}return _context5.abrupt("return",reject("".concat(functionName," failed: ").concat(err)));case 2:receipt=packedResult.receipt;_context5.prev=3;transactionHash=receipt&&receipt.transactionHash?receipt.transactionHash:'';if(typeof options.gas==='string'&&options.gas.startsWith('0x')){optionsGas=parseInt(options.gas,16);}else{optionsGas=parseInt(options.gas,10);}if(!(optionsGas!==receipt.gasUsed)){_context5.next=19;break;}logGas({status:'success',gasUsed:receipt.gasUsed,gasEstimated:gasEstimated,transactionHash:transactionHash});if(!(!inputOptions.event||!_this2.eventHub)){_context5.next=13;break;}isPending=false;resolve();_context5.next=17;break;case 13:if(!eventResults[transactionHash]){_context5.next=17;break;}_context5.next=16;return stopWatching();case 16:if(inputOptions.getEventResult){resolve(inputOptions.getEventResult(eventResults[transactionHash],eventResults[transactionHash].args||eventResults[transactionHash].returnValues));}else{resolve(eventResults[transactionHash]);}case 17:_context5.next=26;break;case 19:errorText='all gas used up';_this2.log("".concat(functionName," failed: ").concat(errorText),'error');if(!(inputOptions.event&&_this2.eventHub)){_context5.next=24;break;}_context5.next=24;return stopWatching(true);case 24:logGas({status:'error',message:'transaction failed',gasUsed:receipt.gasUsed,gasEstimated:gasEstimated,transactionHash:transactionHash});reject(errorText);case 26:_context5.next=31;break;case 28:_context5.prev=28;_context5.t0=_context5["catch"](3);return _context5.abrupt("return",reject("".concat(functionName," failed: ").concat(_context5.t0.message)));case 31:case"end":return _context5.stop();}}},_callee5,null,[[3,28]]);}));return function executeCallback(_x12,_x13){return _ref4.apply(this,arguments);};}();estimationCallback=function(){var _ref5=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(estimationError,gasAmount){return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:gasEstimated=gasAmount;if(!estimationError){_context6.next=8;break;}_context6.next=4;return stopWatching(true);case 4:logGas({status:'error',message:"could not estimate; ".concat(estimationError)});reject("could not estimate gas usage for ".concat(functionName,": ").concat(estimationError,"; ")+estimationError.stack);_context6.next=23;break;case 8:if(!inputOptions.estimate){_context6.next=14;break;}_context6.next=11;return stopWatching();case 11:resolve(gasAmount);_context6.next=23;break;case 14:if(!(!inputOptions.force&&parseInt(inputOptions.gas,10)===parseInt(gasAmount,10))){_context6.next=21;break;}_context6.next=17;return stopWatching(true);case 17:logGas({status:'error',message:'out of gas estimated'});reject("transaction ".concat(functionName," by ").concat(options.from," would most likely fail"));_context6.next=23;break;case 21:if(inputOptions.timeout){options.timeout=inputOptions.timeout;}_this2.signAndExecuteTransactionViaWallet(contract,functionName,functionArguments.slice(0,-1),Object.assign({},options),function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}executeCallback.apply(_this2,args)["catch"](function(ex){reject(ex);});});case 23:case"end":return _context6.stop();}}},_callee6);}));return function estimationCallback(_x14,_x15){return _ref5.apply(this,arguments);};}();estimateOptions=Object.assign({},options,{from:_this2.options.wallet.walletAddress});(_contract$methods4=contract.methods)[functionName].apply(_contract$methods4,(0,_toConsumableArray2["default"])(initialArguments)).estimateGas(estimateOptions,function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}estimationCallback.apply(_this2,args)["catch"](function(ex){reject(ex);});});_context7.next=20;break;case 13:_context7.prev=13;_context7.t0=_context7["catch"](3);_this2.log("".concat(functionName," failed: ").concat(_context7.t0.message),'error');_context7.next=18;return stopWatching(true);case 18:logGas({status:'error',message:'transaction could not be started'});reject(_context7.t0);case 20:case"end":return _context7.stop();}}},_callee7,null,[[3,13]]);}));return function(_x9,_x10){return _ref.apply(this,arguments);};}()));case 15:case"end":return _context8.stop();}}},_callee8,this);}));function executeContractTransaction(_x6,_x7,_x8){return _executeContractTransaction.apply(this,arguments);}return executeContractTransaction;}()},{key:"executeSend",value:function(){var _executeSend=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(){return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:throw new Error("sending funds is not supported by the walled based executor");case 1:case"end":return _context9.stop();}}},_callee9);}));function executeSend(){return _executeSend.apply(this,arguments);}return executeSend;}()},{key:"encodeConstructorParams",value:function encodeConstructorParams(abi,params){if(params.length){return abi.filter(function(json){return json.type==='constructor'&&json.inputs.length===params.length;}).map(function(json){return json.inputs.map(function(input){return input.type;});}).map(function(types){return coder.encodeParameters(types,params);}).map(function(encodedParams){return encodedParams.replace(/^0x/,'');})[0]||'';}else{return'';}}},{key:"signAndExecuteTransactionViaWallet",value:function signAndExecuteTransactionViaWallet(contract,functionName,functionArguments,options,handleTxResult){var _this$options$wallet,_this3=this;this.log("using wallet ".concat(this.options.wallet.walletAddress," ")+"for making transaction \"".concat(functionName,"\""),'debug');(_this$options$wallet=this.options.wallet).submitTransaction.apply(_this$options$wallet,[contract,functionName,Object.assign({},options,{from:this.options.accountId})].concat((0,_toConsumableArray2["default"])(functionArguments))).then(function(result){return Promise.all([_this3.options.web3.eth.getTransactionReceipt(result.event.transactionHash),result]);}).then(function(_ref6){var _ref7=(0,_slicedToArray2["default"])(_ref6,2),receipt=_ref7[0],result=_ref7[1];handleTxResult(null,Object.assign({receipt:receipt},result));})["catch"](function(error){handleTxResult(error);});}}]);return ExecutorWallet;}(dbcp_1.Executor);exports.ExecutorWallet=ExecutorWallet;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"web3-eth-abi":673}],673:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-utils'),require('ethers/utils/abi-coder'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('lodash/isArray'),require('lodash/isObject')):typeof define==='function'&&define.amd?define(['exports','web3-utils','ethers/utils/abi-coder','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','lodash/isArray','lodash/isObject'],factory):(global=global||self,factory(global.Web3EthAbi={},global.Utils,global.abiCoder,global._classCallCheck,global._createClass,global.isArray,global.isObject));})(void 0,function(exports,Utils,abiCoder,_classCallCheck,_createClass,isArray,isObject){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;isArray=isArray&&isArray.hasOwnProperty('default')?isArray['default']:isArray;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;var AbiCoder=function(){function AbiCoder(utils,ethersAbiCoder){_classCallCheck(this,AbiCoder);this.utils=utils;this.ethersAbiCoder=ethersAbiCoder;}_createClass(AbiCoder,[{key:"encodeFunctionSignature",value:function encodeFunctionSignature(functionName){if(isObject(functionName)){functionName=this.utils.jsonInterfaceMethodToString(functionName);}return this.utils.keccak256(functionName).slice(0,10);}},{key:"encodeEventSignature",value:function encodeEventSignature(functionName){if(isObject(functionName)){functionName=this.utils.jsonInterfaceMethodToString(functionName);}return this.utils.keccak256(functionName);}},{key:"encodeParameter",value:function encodeParameter(type,param){return this.encodeParameters([type],[param]);}},{key:"encodeParameters",value:function encodeParameters(types,params){return this.ethersAbiCoder.encode(types,params);}},{key:"encodeFunctionCall",value:function encodeFunctionCall(jsonInterface,params){return this.encodeFunctionSignature(jsonInterface)+this.encodeParameters(jsonInterface.inputs,params).replace('0x','');}},{key:"decodeParameter",value:function decodeParameter(type,bytes){return this.decodeParameters([type],bytes)[0];}},{key:"decodeParameters",value:function decodeParameters(outputs,bytes){if(isArray(outputs)&&outputs.length===0){throw new Error('Empty outputs array given!');}if(!bytes||bytes==='0x'||bytes==='0X'){throw new Error("Invalid bytes string given: ".concat(bytes));}var result=this.ethersAbiCoder.decode(outputs,bytes);var returnValues={};var decodedValue;if(isArray(result)){if(outputs.length>1){outputs.forEach(function(output,i){decodedValue=result[i];if(decodedValue==='0x'){decodedValue=null;}returnValues[i]=decodedValue;if(isObject(output)&&output.name){returnValues[output.name]=decodedValue;}});return returnValues;}return result;}if(isObject(outputs[0])&&outputs[0].name){returnValues[outputs[0].name]=result;}returnValues[0]=result;return returnValues;}},{key:"decodeLog",value:function decodeLog(inputs){var _this=this;var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var topics=arguments.length>2?arguments[2]:undefined;var returnValues={};var topicCount=0;var value;var nonIndexedInputKeys=[];var nonIndexedInputItems=[];if(!isArray(topics)){topics=[topics];}inputs.forEach(function(input,i){if(input.indexed){if(input.type==='string'){return;}value=topics[topicCount];if(_this.isStaticType(input.type)){value=_this.decodeParameter(input.type,topics[topicCount]);}returnValues[i]=value;returnValues[input.name]=value;topicCount++;return;}nonIndexedInputKeys.push(i);nonIndexedInputItems.push(input);});if(data){var values=this.decodeParameters(nonIndexedInputItems,data);var decodedValue;nonIndexedInputKeys.forEach(function(itemKey,index){decodedValue=values[index];returnValues[itemKey]=decodedValue;returnValues[nonIndexedInputItems[index].name]=decodedValue;});}return returnValues;}},{key:"isStaticType",value:function isStaticType(type){if(type==='bytes'){return false;}if(type==='string'){return false;}if(type.indexOf('[')&&type.slice(type.indexOf('[')).length===2){return false;}return true;}}]);return AbiCoder;}();function AbiCoder$1(){return new AbiCoder(Utils,new abiCoder.AbiCoder());}exports.AbiCoder=AbiCoder$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"ethers/utils/abi-coder":278,"lodash/isArray":453,"lodash/isObject":462,"web3-utils":700}],11:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _get2=_interopRequireDefault(require("@babel/runtime/helpers/get"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var _=require("lodash");var crypto=require("crypto");var prottle=require("prottle");var dbcp_1=require("@evan.network/dbcp");var base_contract_1=require("../base-contract/base-contract");var requestWindowSize=10;var uintMax='0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';var serviceSchema={type:'object',additionalProperties:false,properties:{serviceName:{type:'string'},requestParameters:{type:'object'},responseParameters:{type:'object'}}};var ServiceContract=function(_base_contract_1$Base){(0,_inherits2["default"])(ServiceContract,_base_contract_1$Base);function ServiceContract(optionsInput){var _this;(0,_classCallCheck2["default"])(this,ServiceContract);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(ServiceContract).call(this,optionsInput));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.encodingUnencryptedHash='hex';_this.cryptoAlgorithHashes='aesEcb';_this.options=optionsInput;if(!_this.options.defaultCryptoAlgo){_this.options.defaultCryptoAlgo='aes';}return _this;}(0,_createClass2["default"])(ServiceContract,[{key:"addToCallSharing",value:function(){var _addToCallSharing=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contract,accountId,callId,to,hashKey,contentKey){var section,serviceContract,callIdHash,_ref,_ref2,blockNr,hashKeyToShare,contentKeyToShare,sharings,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,target,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:section=_args.length>6&&_args[6]!==undefined?_args[6]:'*';serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);callIdHash=this.numberToBytes32(callId);_context.next=5;return Promise.all([this.options.web3.eth.getBlockNumber(),hashKey||this.options.sharing.getHashKey(serviceContract.options.address,accountId,callIdHash)]);case 5:_ref=_context.sent;_ref2=(0,_slicedToArray2["default"])(_ref,2);blockNr=_ref2[0];hashKeyToShare=_ref2[1];_context.t0=contentKey;if(_context.t0){_context.next=14;break;}_context.next=13;return this.options.sharing.getKey(serviceContract.options.address,accountId,section,blockNr,callIdHash);case 13:_context.t0=_context.sent;case 14:contentKeyToShare=_context.t0;_context.next=17;return this.options.sharing.getSharingsFromContract(serviceContract,callIdHash);case 17:sharings=_context.sent;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=21;_iterator=to[Symbol.iterator]();case 23:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=32;break;}target=_step.value;_context.next=27;return this.options.sharing.extendSharings(sharings,accountId,target,section,0,contentKeyToShare,null);case 27:_context.next=29;return this.options.sharing.extendSharings(sharings,accountId,target,'*','hashKey',hashKeyToShare,null);case 29:_iteratorNormalCompletion=true;_context.next=23;break;case 32:_context.next=38;break;case 34:_context.prev=34;_context.t1=_context["catch"](21);_didIteratorError=true;_iteratorError=_context.t1;case 38:_context.prev=38;_context.prev=39;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 41:_context.prev=41;if(!_didIteratorError){_context.next=44;break;}throw _iteratorError;case 44:return _context.finish(41);case 45:return _context.finish(38);case 46:_context.next=48;return this.options.sharing.saveSharingsToContract(serviceContract.options.address,sharings,accountId,callIdHash);case 48:case"end":return _context.stop();}}},_callee,this,[[21,34,38,46],[39,,41,45]]);}));function addToCallSharing(_x,_x2,_x3,_x4,_x5,_x6){return _addToCallSharing.apply(this,arguments);}return addToCallSharing;}()},{key:"create",value:function(){var _create=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(accountId,businessCenterDomain,service){var _this2=this;var descriptionDfsHash,validator,checkFails,contractP,cryptor,hashCryptor,_ref4,_ref5,contentKey,hashKey,contract,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:descriptionDfsHash=_args3.length>3&&_args3[3]!==undefined?_args3[3]:'0x0000000000000000000000000000000000000000000000000000000000000000';validator=new dbcp_1.Validator({schema:serviceSchema});checkFails=validator.validate(service);if(!(checkFails!==true)){_context3.next=5;break;}throw new Error("validation of service values failed with: ".concat(JSON.stringify(checkFails)));case 5:contractP=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){var contractId;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_get2["default"])((0,_getPrototypeOf2["default"])(ServiceContract.prototype),"createUninitialized",_this2).call(_this2,'service',accountId,businessCenterDomain,descriptionDfsHash);case 2:contractId=_context2.sent;return _context2.abrupt("return",_this2.options.loader.loadContract('ServiceContractInterface',contractId));case 4:case"end":return _context2.stop();}}},_callee2);}))();cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.options.defaultCryptoAlgo);hashCryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context3.next=10;return Promise.all([cryptor.generateKey(),hashCryptor.generateKey(),contractP]);case 10:_ref4=_context3.sent;_ref5=(0,_slicedToArray2["default"])(_ref4,3);contentKey=_ref5[0];hashKey=_ref5[1];contract=_ref5[2];_context3.next=17;return this.options.sharing.addSharing(contract.options.address,accountId,accountId,'*',0,contentKey);case 17:_context3.next=19;return this.options.sharing.ensureHashKey(contract.options.address,accountId,accountId,hashKey);case 19:_context3.next=21;return this.setService(contract,accountId,service,businessCenterDomain,true);case 21:return _context3.abrupt("return",contract);case 22:case"end":return _context3.stop();}}},_callee3,this);}));function create(_x7,_x8,_x9){return _create.apply(this,arguments);}return create;}()},{key:"getAnswer",value:function(){var _getAnswer=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contract,accountId,callId,answerIndex){var serviceContract,queryResult,result,decryptedHash;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context4.next=3;return this.options.executor.executeContractCall(serviceContract,'getAnswers',callId,answerIndex);case 3:queryResult=_context4.sent;result={};['hash','owner','created','parent'].forEach(function(key){result[key]=queryResult[key][0];});_context4.next=8;return this.decryptHash(queryResult.hash[0],serviceContract,accountId,this.numberToBytes32(callId));case 8:decryptedHash=_context4.sent;if(!decryptedHash){_context4.next=19;break;}_context4.t0=this;_context4.next=13;return this.options.dfs.get(decryptedHash);case 13:_context4.t1=_context4.sent.toString('utf-8');_context4.t2=serviceContract;_context4.t3=accountId;_context4.next=18;return _context4.t0.decrypt.call(_context4.t0,_context4.t1,_context4.t2,_context4.t3,'*');case 18:result.data=_context4.sent;case 19:return _context4.abrupt("return",result);case 20:case"end":return _context4.stop();}}},_callee4,this);}));function getAnswer(_x10,_x11,_x12,_x13){return _getAnswer.apply(this,arguments);}return getAnswer;}()},{key:"getAnswerCount",value:function(){var _getAnswerCount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(contract,callId){var serviceContract,_ref6,answerCount;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context5.next=3;return this.options.executor.executeContractCall(serviceContract,'calls',callId);case 3:_ref6=_context5.sent;answerCount=_ref6.answerCount;return _context5.abrupt("return",parseInt(answerCount,10));case 6:case"end":return _context5.stop();}}},_callee5,this);}));function getAnswerCount(_x14,_x15){return _getAnswerCount.apply(this,arguments);}return getAnswerCount;}()},{key:"getAnswers",value:function(){var _getAnswers=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(contract,accountId,callId){var _this3=this;var count,offset,reverse,serviceContract,_ref7,entries,indices,result,callIdString,tasks,_args7=arguments;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:count=_args7.length>3&&_args7[3]!==undefined?_args7[3]:10;offset=_args7.length>4&&_args7[4]!==undefined?_args7[4]:0;reverse=_args7.length>5&&_args7[5]!==undefined?_args7[5]:false;serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context7.next=6;return this.getEntries(serviceContract,'answers',callId,count,offset,reverse);case 6:_ref7=_context7.sent;entries=_ref7.entries;indices=_ref7.indices;result={};callIdString=this.numberToBytes32(callId);tasks=indices.map(function(index){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(){var decryptedHash;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this3.decryptHash(entries[index].hash,serviceContract,accountId,callIdString);case 2:decryptedHash=_context6.sent;result[index]=entries[index];if(!decryptedHash){_context6.next=15;break;}_context6.t0=_this3;_context6.next=8;return _this3.options.dfs.get(decryptedHash);case 8:_context6.t1=_context6.sent.toString('utf-8');_context6.t2=serviceContract;_context6.t3=accountId;_context6.t4=callIdString;_context6.next=14;return _context6.t0.decrypt.call(_context6.t0,_context6.t1,_context6.t2,_context6.t3,'*',_context6.t4);case 14:result[index].data=_context6.sent;case 15:case"end":return _context6.stop();}}},_callee6);}));});if(!tasks.length){_context7.next=15;break;}_context7.next=15;return prottle(requestWindowSize,tasks);case 15:return _context7.abrupt("return",result);case 16:case"end":return _context7.stop();}}},_callee7,this);}));function getAnswers(_x16,_x17,_x18){return _getAnswers.apply(this,arguments);}return getAnswers;}()},{key:"getCall",value:function(){var _getCall=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(contract,accountId,callId){var serviceContract,callIdString,call,decryptedHash;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);callIdString=this.numberToBytes32(callId);_context8.next=4;return this.options.executor.executeContractCall(serviceContract,'calls',callIdString);case 4:call=_context8.sent;_context8.next=7;return this.decryptHash(call.hash,serviceContract,accountId,callIdString);case 7:decryptedHash=_context8.sent;if(!decryptedHash){_context8.next=19;break;}_context8.t0=this;_context8.next=12;return this.options.dfs.get(decryptedHash);case 12:_context8.t1=_context8.sent.toString('utf-8');_context8.t2=serviceContract;_context8.t3=accountId;_context8.t4=callIdString;_context8.next=18;return _context8.t0.decrypt.call(_context8.t0,_context8.t1,_context8.t2,_context8.t3,'*',_context8.t4);case 18:call.data=_context8.sent;case 19:return _context8.abrupt("return",call);case 20:case"end":return _context8.stop();}}},_callee8,this);}));function getCall(_x19,_x20,_x21){return _getCall.apply(this,arguments);}return getCall;}()},{key:"getCalls",value:function(){var _getCalls=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(contract,accountId){var _this4=this;var count,offset,reverse,serviceContract,_ref9,entries,indices,result,tasks,_args11=arguments;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:count=_args11.length>2&&_args11[2]!==undefined?_args11[2]:10;offset=_args11.length>3&&_args11[3]!==undefined?_args11[3]:0;reverse=_args11.length>4&&_args11[4]!==undefined?_args11[4]:false;serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context11.next=6;return this.getEntries(serviceContract,'calls',null,count,offset,reverse);case 6:_ref9=_context11.sent;entries=_ref9.entries;indices=_ref9.indices;_context11.next=11;return Promise.all(indices.map(function(){var _ref10=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(index){var sharings;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _this4.options.dfs.get(entries[index].sharing);case 2:sharings=_context9.sent;_this4.options.sharing.addHashToCache(serviceContract.options.address,JSON.parse(sharings.toString()),_this4.numberToBytes32(index));case 4:case"end":return _context9.stop();}}},_callee9);}));return function(_x24){return _ref10.apply(this,arguments);};}()));case 11:result={};tasks=indices.map(function(index){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(){var callIdString,decryptedHash;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:callIdString=_this4.numberToBytes32(index);_context10.next=3;return _this4.decryptHash(entries[index].hash,serviceContract,accountId,callIdString);case 3:decryptedHash=_context10.sent;result[index]=entries[index];if(!decryptedHash){_context10.next=16;break;}_context10.t0=_this4;_context10.next=9;return _this4.options.dfs.get(decryptedHash);case 9:_context10.t1=_context10.sent.toString('utf-8');_context10.t2=serviceContract;_context10.t3=accountId;_context10.t4=callIdString;_context10.next=15;return _context10.t0.decrypt.call(_context10.t0,_context10.t1,_context10.t2,_context10.t3,'*',_context10.t4);case 15:result[index].data=_context10.sent;case 16:case"end":return _context10.stop();}}},_callee10);}));});if(!tasks.length){_context11.next=16;break;}_context11.next=16;return prottle(requestWindowSize,tasks);case 16:return _context11.abrupt("return",result);case 17:case"end":return _context11.stop();}}},_callee11,this);}));function getCalls(_x22,_x23){return _getCalls.apply(this,arguments);}return getCalls;}()},{key:"getCallCount",value:function(){var _getCallCount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(contract){var serviceContract,count;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context12.next=3;return this.options.executor.executeContractCall(serviceContract,'callCount');case 3:count=_context12.sent;return _context12.abrupt("return",parseInt(count,10));case 5:case"end":return _context12.stop();}}},_callee12,this);}));function getCallCount(_x25){return _getCallCount.apply(this,arguments);}return getCallCount;}()},{key:"getCallOwner",value:function(){var _getCallOwner=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(contract,callId){var serviceContract;return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context13.next=3;return this.options.executor.executeContractCall(serviceContract,'calls',callId);case 3:return _context13.abrupt("return",_context13.sent.owner);case 4:case"end":return _context13.stop();}}},_callee13,this);}));function getCallOwner(_x26,_x27){return _getCallOwner.apply(this,arguments);}return getCallOwner;}()},{key:"getService",value:function(){var _getService=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(contract,accountId){var serviceContract,encryptedHash,decryptedHash,decrypted;return _regenerator["default"].wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context14.next=3;return this.options.executor.executeContractCall(serviceContract,'service');case 3:encryptedHash=_context14.sent;_context14.next=6;return this.decryptHash(encryptedHash,serviceContract,accountId);case 6:decryptedHash=_context14.sent;_context14.t0=this;_context14.next=10;return this.options.dfs.get(decryptedHash);case 10:_context14.t1=_context14.sent.toString('utf-8');_context14.t2=serviceContract;_context14.t3=accountId;_context14.next=15;return _context14.t0.decrypt.call(_context14.t0,_context14.t1,_context14.t2,_context14.t3,'*');case 15:decrypted=_context14.sent;this.serviceDefinition=decrypted;return _context14.abrupt("return",decrypted);case 18:case"end":return _context14.stop();}}},_callee14,this);}));function getService(_x28,_x29){return _getService.apply(this,arguments);}return getService;}()},{key:"sendAnswer",value:function(){var _sendAnswer=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(contract,accountId,answer,callId,callAuthor){var _this5=this;var callParent,serviceContract,validator,checkFails,blockNr,innerEncryptionData,innerPropertiesToEncrpt,genericKey,contentKey,generateKeys,answerKeys,_i2,_answerKeys,key,encrypted,stateMd5,answerHash,hashKey,encryptdHash,answerId,_args16=arguments;return _regenerator["default"].wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:callParent=_args16.length>5&&_args16[5]!==undefined?_args16[5]:uintMax;serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);if(this.serviceDefinition){_context16.next=5;break;}_context16.next=5;return this.getService(serviceContract,accountId);case 5:validator=new dbcp_1.Validator({schema:this.serviceDefinition.responseParameters});checkFails=validator.validate(answer);if(!(checkFails!==true)){_context16.next=9;break;}throw new Error("validation of input values failed with: ".concat(JSON.stringify(checkFails)));case 9:blockNr=0;innerEncryptionData={};innerPropertiesToEncrpt={};genericKey=this.options.nameResolver.soliditySha3('*');_context16.next=15;return this.options.sharing.getKey(serviceContract.options.address,accountId,'*',blockNr,this.numberToBytes32(callId));case 15:contentKey=_context16.sent;generateKeys=function(){var _ref12=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(property){var _i,_Object$keys,key;return _regenerator["default"].wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:innerPropertiesToEncrpt[property]=[];if(answer[property]){for(_i=0,_Object$keys=Object.keys(answer[property]);_i<_Object$keys.length;_i++){key=_Object$keys[_i];if(answer[property][key].hasOwnProperty('private')&&answer[property][key].hasOwnProperty('cryptoInfo')&&!innerPropertiesToEncrpt[property][key]){innerPropertiesToEncrpt[property].push(key);innerEncryptionData[key]={};innerEncryptionData[key].cryptor=_this5.options.cryptoProvider.getCryptorByCryptoInfo(answer[property][key].cryptoInfo);if(answer[property][key].cryptoInfo.originator&&answer[property][key].cryptoInfo.originator===genericKey){innerEncryptionData[key].key=contentKey;}}}}case 2:case"end":return _context15.stop();}}},_callee15);}));return function generateKeys(_x35){return _ref12.apply(this,arguments);};}();answerKeys=Object.keys(answer);_i2=0,_answerKeys=answerKeys;case 19:if(!(_i2<_answerKeys.length)){_context16.next=26;break;}key=_answerKeys[_i2];_context16.next=23;return generateKeys(key);case 23:_i2++;_context16.next=19;break;case 26:_context16.next=28;return this.encrypt(answer,serviceContract,accountId,'*',blockNr,callAuthor,null,innerPropertiesToEncrpt,innerEncryptionData);case 28:encrypted=_context16.sent;stateMd5=crypto.createHash('md5').update(encrypted).digest('hex');_context16.next=32;return this.options.dfs.add(stateMd5,Buffer.from(encrypted));case 32:answerHash=_context16.sent;_context16.next=35;return this.options.sharing.getHashKey(serviceContract.options.address,accountId,this.numberToBytes32(callId));case 35:hashKey=_context16.sent;_context16.next=38;return this.encryptHash(answerHash,serviceContract,accountId,hashKey);case 38:encryptdHash=_context16.sent;_context16.next=41;return this.options.executor.executeContractTransaction(serviceContract,'sendAnswer',{from:accountId,autoGas:1.1,event:{target:'ServiceContractInterface',eventName:'ServiceContractEvent'},getEventResult:function getEventResult(event,args){return args.entryId;}},encryptdHash,callId,callParent);case 41:answerId=_context16.sent;return _context16.abrupt("return",parseInt(answerId,16));case 43:case"end":return _context16.stop();}}},_callee16,this);}));function sendAnswer(_x30,_x31,_x32,_x33,_x34){return _sendAnswer.apply(this,arguments);}return sendAnswer;}()},{key:"sendCall",value:function(){var _sendCall=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(contract,accountId,call){var _this6=this;var to,serviceContract,validator,checkFails,callCopy,innerEncryptionData,innerPropertiesToEncrpt,cryptor,hashCryptor,_ref13,_ref14,contentKey,hashKey,blockNr,genericKey,generateKeys,callKeys,_i4,_callKeys,key,encrypted,stateMd5,serviceHash,encryptdHash,callIdUint256,callId,innerEncryptionKeys,sharings,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,propertyName,_args18=arguments;return _regenerator["default"].wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:to=_args18.length>3&&_args18[3]!==undefined?_args18[3]:[];serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);if(this.serviceDefinition){_context18.next=5;break;}_context18.next=5;return this.getService(serviceContract,accountId);case 5:validator=new dbcp_1.Validator({schema:this.serviceDefinition.requestParameters});checkFails=validator.validate(call);if(!(checkFails!==true)){_context18.next=9;break;}throw new Error("validation of input values failed with: ".concat(JSON.stringify(checkFails)));case 9:callCopy=_.cloneDeep(call);innerEncryptionData={};innerPropertiesToEncrpt={};cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.options.defaultCryptoAlgo);hashCryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context18.next=16;return Promise.all([cryptor.generateKey(),hashCryptor.generateKey(),this.options.web3.eth.getBlockNumber()]);case 16:_ref13=_context18.sent;_ref14=(0,_slicedToArray2["default"])(_ref13,3);contentKey=_ref14[0];hashKey=_ref14[1];blockNr=_ref14[2];genericKey=this.options.nameResolver.soliditySha3('*');generateKeys=function(){var _ref15=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(property){var _i3,_Object$keys2,key;return _regenerator["default"].wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:innerPropertiesToEncrpt[property]=[];if(!callCopy[property]){_context17.next=19;break;}_i3=0,_Object$keys2=Object.keys(callCopy[property]);case 3:if(!(_i3<_Object$keys2.length)){_context17.next=19;break;}key=_Object$keys2[_i3];if(!(callCopy[property][key].hasOwnProperty('private')&&callCopy[property][key].hasOwnProperty('cryptoInfo')&&!innerPropertiesToEncrpt[property][key])){_context17.next=16;break;}innerPropertiesToEncrpt[property].push(key);innerEncryptionData[key]={};innerEncryptionData[key].cryptor=_this6.options.cryptoProvider.getCryptorByCryptoInfo(callCopy[property][key].cryptoInfo);if(!(callCopy[property][key].cryptoInfo.originator&&callCopy[property][key].cryptoInfo.originator===genericKey)){_context17.next=13;break;}innerEncryptionData[key].key=contentKey;_context17.next=16;break;case 13:_context17.next=15;return innerEncryptionData[key].cryptor.generateKey();case 15:innerEncryptionData[key].key=_context17.sent;case 16:_i3++;_context17.next=3;break;case 19:case"end":return _context17.stop();}}},_callee17);}));return function generateKeys(_x39){return _ref15.apply(this,arguments);};}();callKeys=Object.keys(callCopy);_i4=0,_callKeys=callKeys;case 25:if(!(_i4<_callKeys.length)){_context18.next=32;break;}key=_callKeys[_i4];_context18.next=29;return generateKeys(key);case 29:_i4++;_context18.next=25;break;case 32:_context18.next=34;return this.encrypt(callCopy,serviceContract,accountId,'*',blockNr,null,contentKey,innerPropertiesToEncrpt,innerEncryptionData);case 34:encrypted=_context18.sent;stateMd5=crypto.createHash('md5').update(encrypted).digest('hex');_context18.next=38;return this.options.dfs.add(stateMd5,Buffer.from(encrypted));case 38:serviceHash=_context18.sent;_context18.next=41;return this.encryptHash(serviceHash,serviceContract,accountId,hashKey);case 41:encryptdHash=_context18.sent;_context18.t0=parseInt;_context18.next=45;return this.options.executor.executeContractTransaction(serviceContract,'sendCall',{from:accountId,autoGas:1.1,event:{target:'ServiceContractInterface',eventName:'ServiceContractEvent'},getEventResult:function getEventResult(event,args){return args.entryId;}},encryptdHash);case 45:_context18.t1=_context18.sent;callIdUint256=(0,_context18.t0)(_context18.t1,10);callId=this.numberToBytes32(callIdUint256);_context18.next=50;return this.addToCallSharing(serviceContract,accountId,callIdUint256,to.concat(accountId),hashKey,contentKey);case 50:innerEncryptionKeys=Object.keys(innerEncryptionData);if(!innerEncryptionKeys.length){_context18.next=83;break;}_context18.next=54;return this.options.sharing.getSharingsFromContract(serviceContract,callId);case 54:sharings=_context18.sent;_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context18.prev=58;_iterator2=innerEncryptionKeys[Symbol.iterator]();case 60:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context18.next=67;break;}propertyName=_step2.value;_context18.next=64;return this.options.sharing.extendSharings(sharings,accountId,accountId,propertyName,0,innerEncryptionData[propertyName].key);case 64:_iteratorNormalCompletion2=true;_context18.next=60;break;case 67:_context18.next=73;break;case 69:_context18.prev=69;_context18.t2=_context18["catch"](58);_didIteratorError2=true;_iteratorError2=_context18.t2;case 73:_context18.prev=73;_context18.prev=74;if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}case 76:_context18.prev=76;if(!_didIteratorError2){_context18.next=79;break;}throw _iteratorError2;case 79:return _context18.finish(76);case 80:return _context18.finish(73);case 81:_context18.next=83;return this.options.sharing.saveSharingsToContract(serviceContract.options.address,sharings,accountId,callId);case 83:return _context18.abrupt("return",parseInt(callId,16));case 84:case"end":return _context18.stop();}}},_callee18,this,[[58,69,73,81],[74,,76,80]]);}));function sendCall(_x36,_x37,_x38){return _sendCall.apply(this,arguments);}return sendCall;}()},{key:"setService",value:function(){var _setService=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee20(contract,accountId,service,businessCenterDomain,skipValidation){var _this7=this;var serviceContract,validator,checkFails,blockNr,serviceHashP,_ref17,_ref18,businessCenterAddress,encryptdHash;return _regenerator["default"].wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:serviceContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);if(skipValidation){_context20.next=6;break;}validator=new dbcp_1.Validator({schema:serviceSchema});checkFails=validator.validate(service);if(!(checkFails!==true)){_context20.next=6;break;}throw new Error('validation of service definition failed with: '+JSON.stringify(checkFails));case 6:_context20.next=8;return this.options.web3.eth.getBlockNumber();case 8:blockNr=_context20.sent;serviceHashP=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(){var encrypted,stateMd5,serviceHash;return _regenerator["default"].wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return _this7.encrypt(service,serviceContract,accountId,'*',blockNr);case 2:encrypted=_context19.sent;stateMd5=crypto.createHash('md5').update(encrypted).digest('hex');_context19.next=6;return _this7.options.dfs.add(stateMd5,Buffer.from(encrypted));case 6:serviceHash=_context19.sent;_context19.next=9;return _this7.encryptHash(serviceHash,serviceContract,accountId);case 9:return _context19.abrupt("return",_context19.sent);case 10:case"end":return _context19.stop();}}},_callee19);}))();_context20.next=12;return Promise.all([this.options.nameResolver.getAddress(businessCenterDomain),serviceHashP]);case 12:_ref17=_context20.sent;_ref18=(0,_slicedToArray2["default"])(_ref17,2);businessCenterAddress=_ref18[0];encryptdHash=_ref18[1];_context20.next=18;return this.options.executor.executeContractTransaction(serviceContract,'setService',{from:accountId,autoGas:1.1},businessCenterAddress,encryptdHash);case 18:this.serviceDefinition=service;case 19:case"end":return _context20.stop();}}},_callee20,this);}));function setService(_x40,_x41,_x42,_x43,_x44){return _setService.apply(this,arguments);}return setService;}()},{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee23(toDecrypt,contract,accountId,propertyName,callId){var _this8=this;var envelope,cryptor,contentKey,decryptedObject;return _regenerator["default"].wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_context23.prev=0;envelope=JSON.parse(toDecrypt);cryptor=this.options.cryptoProvider.getCryptorByCryptoInfo(envelope.cryptoInfo);_context23.next=5;return this.options.keyProvider.getKey(envelope.cryptoInfo);case 5:contentKey=_context23.sent;if(contentKey){_context23.next=10;break;}_context23.next=9;return this.options.sharing.getKey(contract.options.address,accountId,propertyName,envelope.cryptoInfo.block,callId);case 9:contentKey=_context23.sent;case 10:if(contentKey){_context23.next=12;break;}throw new Error("could not decrypt data, no content key found for contract "+"\"".concat(contract.options.address,"\" and account \"").concat(accountId,"\""));case 12:_context23.next=14;return cryptor.decrypt(Buffer.from(envelope["private"],this.encodingEncrypted),{key:contentKey});case 14:decryptedObject=_context23.sent;_context23.next=17;return Promise.all(Object.keys(decryptedObject).map(function(){var _ref19=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee22(property){return _regenerator["default"].wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return Promise.all(Object.keys(decryptedObject[property]).map(function(){var _ref20=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee21(key){var innerCryptor,envelopeInner,contentKeyInner;return _regenerator["default"].wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:if(!(decryptedObject[property][key].hasOwnProperty('private')&&decryptedObject[property][key].hasOwnProperty('cryptoInfo'))){_context21.next=15;break;}_context21.prev=1;innerCryptor=_this8.options.cryptoProvider.getCryptorByCryptoInfo(decryptedObject[property][key].cryptoInfo);envelopeInner=decryptedObject[property][key];_context21.next=6;return _this8.options.sharing.getKey(contract.options.address,accountId,key,envelopeInner.cryptoInfo.block,callId);case 6:contentKeyInner=_context21.sent;_context21.next=9;return innerCryptor.decrypt(Buffer.from(envelopeInner["private"],_this8.encodingEncrypted),{key:contentKeyInner});case 9:decryptedObject[property][key]=_context21.sent;_context21.next=15;break;case 12:_context21.prev=12;_context21.t0=_context21["catch"](1);_this8.log("could not decrypt inner service message part "+"".concat(property,"/").concat(key,"; ").concat(_context21.t0.message||_context21.t0),'info');case 15:case"end":return _context21.stop();}}},_callee21,null,[[1,12]]);}));return function(_x51){return _ref20.apply(this,arguments);};}()));case 2:case"end":return _context22.stop();}}},_callee22);}));return function(_x50){return _ref19.apply(this,arguments);};}()));case 17:return _context23.abrupt("return",decryptedObject);case 20:_context23.prev=20;_context23.t0=_context23["catch"](0);this.log("could not decrypt service contract message \"".concat(toDecrypt,"\" for contract ")+"\"".concat(contract.options.address,"\" with accountId \"").concat(accountId,"\" in section \"").concat(propertyName,"\"")+callId?' for call '+callId:'','debug');return _context23.abrupt("return",null);case 24:case"end":return _context23.stop();}}},_callee23,this,[[0,20]]);}));function decrypt(_x45,_x46,_x47,_x48,_x49){return _decrypt.apply(this,arguments);}return decrypt;}()},{key:"decryptHash",value:function(){var _decryptHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee24(toDecrypt,contract,accountId,callId){var dataContract,cryptor,hashKey,decryptedBuffer;return _regenerator["default"].wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:dataContract=(0,_typeof2["default"])(contract)==='object'?contract:this.options.loader.loadContract('ServiceContractInterface',contract);_context24.prev=1;cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context24.next=5;return this.options.sharing.getHashKey(dataContract.options.address,accountId,callId);case 5:hashKey=_context24.sent;if(hashKey){_context24.next=8;break;}throw new Error("no hashKey key found for contract \"".concat(dataContract.options.address,"\" ")+"and account \"".concat(accountId,"\""));case 8:_context24.next=10;return cryptor.decrypt(Buffer.from(toDecrypt.substr(2),this.encodingEncrypted),{key:hashKey});case 10:decryptedBuffer=_context24.sent;return _context24.abrupt("return","0x".concat(decryptedBuffer.toString(this.encodingUnencryptedHash)));case 14:_context24.prev=14;_context24.t0=_context24["catch"](1);this.log("could not decrypt service contract hash \"".concat(toDecrypt,"\" for contract ")+"\"".concat(dataContract.options.address,"\" with account id \"").concat(accountId,"\"")+callId?' for call '+callId:'','debug');return _context24.abrupt("return",null);case 18:case"end":return _context24.stop();}}},_callee24,this,[[1,14]]);}));function decryptHash(_x52,_x53,_x54,_x55){return _decryptHash.apply(this,arguments);}return decryptHash;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee28(toEncrypt,contract,from,propertyName,block,to,key,innerPropertiesToEncrpt,innerEncryptionData){var _this9=this;var encryptSubProperties,cryptor,cryptoInfo,contentKey,_this$options$nameRes,fromHash,toHash,combinedHash,encryptedBuffer,encrypted,envelope;return _regenerator["default"].wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:encryptSubProperties=function(){var _ref21=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee26(property){return _regenerator["default"].wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:if(!innerPropertiesToEncrpt[property]){_context26.next=3;break;}_context26.next=3;return Promise.all(innerPropertiesToEncrpt[property].map(function(){var _ref22=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee25(keyInner){var encryptedBufferInner,encryptedProperty,envelopeInner;return _regenerator["default"].wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:if(!(innerPropertiesToEncrpt[property].includes(keyInner)&&toEncrypt[property][keyInner])){_context25.next=8;break;}_context25.next=3;return innerEncryptionData[keyInner].cryptor.encrypt(toEncrypt[property][keyInner]["private"],{key:innerEncryptionData[keyInner].key});case 3:encryptedBufferInner=_context25.sent;encryptedProperty=encryptedBufferInner.toString(_this9.encodingEncrypted);envelopeInner={"private":encryptedProperty,cryptoInfo:toEncrypt[property][keyInner].cryptoInfo};envelopeInner.cryptoInfo.block=block;toEncrypt[property][keyInner]=envelopeInner;case 8:case"end":return _context25.stop();}}},_callee25);}));return function(_x66){return _ref22.apply(this,arguments);};}()));case 3:case"end":return _context26.stop();}}},_callee26);}));return function encryptSubProperties(_x65){return _ref21.apply(this,arguments);};}();if(!innerPropertiesToEncrpt){_context28.next=4;break;}_context28.next=4;return Promise.all(Object.keys(toEncrypt).map(function(){var _ref23=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee27(toEncryptKey){return _regenerator["default"].wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:return _context27.abrupt("return",encryptSubProperties(toEncryptKey));case 1:case"end":return _context27.stop();}}},_callee27);}));return function(_x67){return _ref23.apply(this,arguments);};}()));case 4:cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.options.defaultCryptoAlgo);if(!to){_context28.next=19;break;}fromHash=this.options.nameResolver.soliditySha3(from);toHash=this.options.nameResolver.soliditySha3(to);combinedHash=(_this$options$nameRes=this.options.nameResolver).soliditySha3.apply(_this$options$nameRes,(0,_toConsumableArray2["default"])([fromHash,toHash].sort()));cryptoInfo=cryptor.getCryptoInfo(combinedHash);if(!key){_context28.next=14;break;}contentKey=key;_context28.next=17;break;case 14:_context28.next=16;return this.options.keyProvider.getKey(cryptoInfo);case 16:contentKey=_context28.sent;case 17:_context28.next=27;break;case 19:cryptoInfo=cryptor.getCryptoInfo(this.options.nameResolver.soliditySha3(contract.options.address));if(!key){_context28.next=24;break;}contentKey=key;_context28.next=27;break;case 24:_context28.next=26;return this.options.sharing.getKey(contract.options.address,from,propertyName,block);case 26:contentKey=_context28.sent;case 27:if(contentKey){_context28.next=29;break;}throw new Error("no content key found for contract \"".concat(contract.options.address,"\" ")+"and account \"".concat(from,"\""));case 29:_context28.next=31;return cryptor.encrypt(toEncrypt,{key:contentKey});case 31:encryptedBuffer=_context28.sent;encrypted=encryptedBuffer.toString(this.encodingEncrypted);envelope={"private":encrypted,cryptoInfo:cryptoInfo};envelope.cryptoInfo.block=block;return _context28.abrupt("return",JSON.stringify(envelope));case 36:case"end":return _context28.stop();}}},_callee28,this);}));function encrypt(_x56,_x57,_x58,_x59,_x60,_x61,_x62,_x63,_x64){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"encryptHash",value:function(){var _encryptHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee29(toEncrypt,contract,accountId,key){var hashKey,cryptor,encryptedBuffer;return _regenerator["default"].wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(!key){_context29.next=4;break;}hashKey=key;_context29.next=7;break;case 4:_context29.next=6;return this.options.sharing.getHashKey(contract.options.address,accountId);case 6:hashKey=_context29.sent;case 7:if(hashKey){_context29.next=9;break;}throw new Error("no hashKey found for contract \"".concat(contract.options.address,"\" and account ")+"\"".concat(accountId,"\""));case 9:cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.cryptoAlgorithHashes);_context29.next=12;return cryptor.encrypt(Buffer.from(toEncrypt.substr(2),this.encodingUnencryptedHash),{key:hashKey});case 12:encryptedBuffer=_context29.sent;return _context29.abrupt("return","0x".concat(encryptedBuffer.toString(this.encodingEncrypted)));case 14:case"end":return _context29.stop();}}},_callee29,this);}));function encryptHash(_x68,_x69,_x70,_x71){return _encryptHash.apply(this,arguments);}return encryptHash;}()},{key:"getEntries",value:function(){var _getEntries=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee31(serviceContract){var _this10=this;var type,callId,count,offset,reverse,result,entryCount,queryOffset,itemsRetrieved,resultsPerPage,getResults,limit,_args31=arguments;return _regenerator["default"].wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:type=_args31.length>1&&_args31[1]!==undefined?_args31[1]:'calls'||'answers';callId=_args31.length>2?_args31[2]:undefined;count=_args31.length>3&&_args31[3]!==undefined?_args31[3]:10;offset=_args31.length>4&&_args31[4]!==undefined?_args31[4]:0;reverse=_args31.length>5&&_args31[5]!==undefined?_args31[5]:false;result={entries:{},indices:[]};if(!(type!=='calls'&&type!=='answers')){_context31.next=8;break;}throw new Error("unsupported service contract entry type: ".concat(type));case 8:queryOffset=offset;if(!reverse){_context31.next=14;break;}_context31.next=12;return type==='calls'?this.getCallCount(serviceContract):this.getAnswerCount(serviceContract,callId);case 12:entryCount=_context31.sent;queryOffset=Math.max(entryCount-offset-count,0);case 14:itemsRetrieved=0;resultsPerPage=10;getResults=function(){var _ref24=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee30(singleQueryOffset){var queryResult,_loop,i;return _regenerator["default"].wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:if(!(type==='calls')){_context30.next=6;break;}_context30.next=3;return _this10.options.executor.executeContractCall(serviceContract,'getCalls',singleQueryOffset);case 3:queryResult=_context30.sent;_context30.next=9;break;case 6:_context30.next=8;return _this10.options.executor.executeContractCall(serviceContract,'getAnswers',callId,singleQueryOffset);case 8:queryResult=_context30.sent;case 9:itemsRetrieved+=resultsPerPage;_loop=function _loop(i){var resultId=i+singleQueryOffset;result.indices.push(resultId);result.entries[resultId]={};['hash','owner','created','answerCount','sharing','parent'].forEach(function(key){if(queryResult[key]&&queryResult[key][i]){result.entries[resultId][key]=queryResult[key][i];}});};for(i=0;i<queryResult.hash.length;i++){_loop(i);}if(typeof entryCount==='undefined'){entryCount=parseInt(queryResult.totalCount,10);}if(!(itemsRetrieved<count&&itemsRetrieved<entryCount)){_context30.next=16;break;}_context30.next=16;return getResults(queryOffset+resultsPerPage);case 16:case"end":return _context30.stop();}}},_callee30);}));return function getResults(_x73){return _ref24.apply(this,arguments);};}();_context31.next=19;return getResults(queryOffset);case 19:limit=Math.min(count,entryCount-offset);if(limit<result.indices.length){result.indices=result.indices.slice(0,limit);}if(reverse){result.indices.reverse();}return _context31.abrupt("return",result);case 23:case"end":return _context31.stop();}}},_callee31,this);}));function getEntries(_x72){return _getEntries.apply(this,arguments);}return getEntries;}()},{key:"numberToBytes32",value:function numberToBytes32(number){var hexNumber=(typeof number==='number'?number:parseInt(number,10)).toString(16).padStart(64,'0');return"0x".concat(hexNumber);}}]);return ServiceContract;}(base_contract_1.BaseContract);exports.ServiceContract=ServiceContract;

}).call(this,require("buffer").Buffer)

},{"../base-contract/base-contract":4,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"crypto":1142,"lodash":471,"prottle":524}],12:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var catchAllSection='0x04994f67dc55b09e814ab7ffc8df3686b4afb2bb53e60eae97ef043fe03fb829';var Sharing=function(_dbcp_1$Logger){(0,_inherits2["default"])(Sharing,_dbcp_1$Logger);function Sharing(options){var _this;(0,_classCallCheck2["default"])(this,Sharing);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Sharing).call(this,options));_this.encodingUnencrypted='binary';_this.encodingEncrypted='hex';_this.sharingCache={};_this.hashCache={};_this.options=Object.assign({defaultCryptoAlgo:'aes'},options);return _this;}(0,_createClass2["default"])(Sharing,[{key:"addSharing",value:function(){var _addSharing=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(address,originator,partner,section,block,sharingKey,context){var isHashKey,sharingId,sharings,contract,setHashKey,hashKey,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isHashKey=_args.length>7&&_args[7]!==undefined?_args[7]:false;sharingId=_args.length>8&&_args[8]!==undefined?_args[8]:null;if(!address.startsWith('0x')){_context.next=9;break;}if(sharingId){contract=this.options.contractLoader.loadContract('MultiShared',address);}else{contract=this.options.contractLoader.loadContract('Shared',address);}_context.next=6;return this.getSharingsFromContract(contract,sharingId);case 6:sharings=_context.sent;_context.next=10;break;case 9:throw new Error('setting sharings to ens adresses is not supported');case 10:_context.next=12;return this.extendSharings(sharings,originator,partner,section,block,sharingKey,context);case 12:sharings=_context.sent;if(isHashKey){_context.next=30;break;}_context.next=16;return this.getHashKey(address,partner,sharingId);case 16:setHashKey=_context.sent;if(setHashKey){_context.next=29;break;}_context.next=20;return this.getHashKey(address,originator,sharingId);case 20:hashKey=_context.sent;if(!hashKey){_context.next=26;break;}_context.next=24;return this.extendSharings(sharings,originator,partner,'*','hashKey',hashKey,context);case 24:_context.next=27;break;case 26:this.log('originator does not have access to a hash key, skipping setting it','debug');case 27:_context.next=30;break;case 29:this.log('partners hash key already set, skipping setting it','debug');case 30:_context.next=32;return this.saveSharingsToContract(address,sharings,originator,sharingId);case 32:case"end":return _context.stop();}}},_callee,this);}));function addSharing(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _addSharing.apply(this,arguments);}return addSharing;}()},{key:"addHashToCache",value:function addHashToCache(address,sharings){var sharingId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!this.hashCache[address]){this.hashCache[address]={};}this.hashCache[address][sharingId]=sharings;}},{key:"bumpSharings",value:function(){var _bumpSharings=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(address,originator,partners,section,block,sharingKey){var sharings,contract,description,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,partner;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!address.startsWith('0x')){_context2.next=7;break;}contract=this.options.contractLoader.loadContract('Shared',address);_context2.next=4;return this.getSharingsFromContract(contract);case 4:sharings=_context2.sent;_context2.next=13;break;case 7:_context2.next=9;return this.options.description.getDescriptionFromEns(address);case 9:description=_context2.sent;if(description&&description["public"]&&description["public"].sharings){sharings=description["public"].sharings;}else{sharings={};}if(!description){description={};}if(!description["public"]){description["public"]={};}case 13:_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=16;_iterator=partners[Symbol.iterator]();case 18:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=26;break;}partner=_step.value;_context2.next=22;return this.extendSharings(sharings,originator,partner,section,block,sharingKey);case 22:sharings=_context2.sent;case 23:_iteratorNormalCompletion=true;_context2.next=18;break;case 26:_context2.next=32;break;case 28:_context2.prev=28;_context2.t0=_context2["catch"](16);_didIteratorError=true;_iteratorError=_context2.t0;case 32:_context2.prev=32;_context2.prev=33;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 35:_context2.prev=35;if(!_didIteratorError){_context2.next=38;break;}throw _iteratorError;case 38:return _context2.finish(35);case 39:return _context2.finish(32);case 40:if(!address.startsWith('0x')){_context2.next=45;break;}_context2.next=43;return this.saveSharingsToContract(address,sharings,originator);case 43:_context2.next=48;break;case 45:description["public"].sharings=sharings;_context2.next=48;return this.options.description.setDescriptionToEns(address,description,originator);case 48:case"end":return _context2.stop();}}},_callee2,this,[[16,28,32,40],[33,,35,39]]);}));function bumpSharings(_x8,_x9,_x10,_x11,_x12,_x13){return _bumpSharings.apply(this,arguments);}return bumpSharings;}()},{key:"clearCache",value:function clearCache(){this.sharingCache={};this.hashCache={};}},{key:"ensureHashKey",value:function(){var _ensureHashKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(address,originator,partner,hashKey,context){var sharingId,setHashKey,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:sharingId=_args3.length>5&&_args3[5]!==undefined?_args3[5]:null;_context3.next=3;return this.getHashKey(address,partner,sharingId);case 3:setHashKey=_context3.sent;if(setHashKey){_context3.next=6;break;}return _context3.abrupt("return",this.addSharing(address,originator,partner,'*','hashKey',hashKey,context,true,sharingId));case 6:case"end":return _context3.stop();}}},_callee3,this);}));function ensureHashKey(_x14,_x15,_x16,_x17,_x18){return _ensureHashKey.apply(this,arguments);}return ensureHashKey;}()},{key:"extendSharings",value:function(){var _extendSharings=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(sharings,originator,partner,section,block,sharingKey,context){var _this$options$nameRes;var originatorHash,partnerHash,sectionHash,edgeKey,cryptor,cryptoInfo,encryptionKey,encryptedBuffer;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:originatorHash=this.options.nameResolver.soliditySha3(originator);partnerHash=this.options.nameResolver.soliditySha3(partner);sectionHash=this.options.nameResolver.soliditySha3(section);edgeKey=context?this.options.nameResolver.soliditySha3(context):(_this$options$nameRes=this.options.nameResolver).soliditySha3.apply(_this$options$nameRes,(0,_toConsumableArray2["default"])([originatorHash,partnerHash].sort()));cryptor=this.options.cryptoProvider.getCryptorByCryptoAlgo(this.options.defaultCryptoAlgo);cryptoInfo=cryptor.getCryptoInfo(edgeKey);_context4.next=8;return this.options.keyProvider.getKey(cryptoInfo);case 8:encryptionKey=_context4.sent;if(encryptionKey){_context4.next=11;break;}throw new Error("could not extend sharings, no key found for \"".concat(originatorHash,"\" to \"").concat(partnerHash,"\"")+"".concat(context?' in context "'+context+'"':''));case 11:_context4.next=13;return cryptor.encrypt(sharingKey,{key:encryptionKey});case 13:encryptedBuffer=_context4.sent;sharings[partnerHash]=sharings[partnerHash]?sharings[partnerHash]:{};sharings[partnerHash][sectionHash]=sharings[partnerHash][sectionHash]?sharings[partnerHash][sectionHash]:{};sharings[partnerHash][sectionHash][block]={"private":encryptedBuffer.toString(this.encodingEncrypted),cryptoInfo:cryptoInfo};return _context4.abrupt("return",sharings);case 18:case"end":return _context4.stop();}}},_callee4,this);}));function extendSharings(_x19,_x20,_x21,_x22,_x23,_x24,_x25){return _extendSharings.apply(this,arguments);}return extendSharings;}()},{key:"getHashKey",value:function(){var _getHashKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(address,partner){var sharingId,_args5=arguments;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sharingId=_args5.length>2&&_args5[2]!==undefined?_args5[2]:null;return _context5.abrupt("return",this.getKey(address,partner,'*','hashKey',sharingId));case 2:case"end":return _context5.stop();}}},_callee5,this);}));function getHashKey(_x26,_x27){return _getHashKey.apply(this,arguments);}return getHashKey;}()},{key:"getSharings",value:function(){var _getSharings=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(address,_partner,_section,_block){var sharingId,sharings,contract,description,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:sharingId=_args6.length>4&&_args6[4]!==undefined?_args6[4]:null;if(!address.startsWith('0x')){_context6.next=8;break;}if(sharingId){contract=this.options.contractLoader.loadContract('MultiShared',address);}else{contract=this.options.contractLoader.loadContract('Shared',address);}_context6.next=5;return this.getSharingsFromContract(contract,sharingId);case 5:sharings=_context6.sent;_context6.next=12;break;case 8:_context6.next=10;return this.options.description.getDescriptionFromEns(address);case 10:description=_context6.sent;if(description&&description["public"]&&description["public"].sharings){sharings=description["public"].sharings;}else{sharings={};}case 12:return _context6.abrupt("return",this.decryptSharings(sharings,_partner,_section,_block));case 13:case"end":return _context6.stop();}}},_callee6,this);}));function getSharings(_x28,_x29,_x30,_x31){return _getSharings.apply(this,arguments);}return getSharings;}()},{key:"getSharingsFromContract",value:function(){var _getSharingsFromContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(contract){var sharingId,sharingHash,sharingValue,buffer,_args7=arguments;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:sharingId=_args7.length>1&&_args7[1]!==undefined?_args7[1]:null;if(!(!this.hashCache[contract.options.address]||!this.hashCache[contract.options.address][sharingId]||this.hashCache[contract.options.address][sharingId]==='0x0000000000000000000000000000000000000000000000000000000000000000')){_context7.next=24;break;}if(!this.hashCache[contract.options.address]){this.hashCache[contract.options.address]={};}if(!sharingId){_context7.next=9;break;}_context7.next=6;return this.options.executor.executeContractCall(contract,'multiSharings',sharingId);case 6:sharingHash=_context7.sent;_context7.next=12;break;case 9:_context7.next=11;return this.options.executor.executeContractCall(contract,'sharing');case 11:sharingHash=_context7.sent;case 12:if(!(sharingHash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context7.next=21;break;}_context7.next=15;return this.options.dfs.get(sharingHash);case 15:buffer=_context7.sent;if(buffer){_context7.next=18;break;}throw new Error("could not get sharings from hash ".concat(sharingHash));case 18:sharingValue=JSON.parse(buffer.toString());_context7.next=22;break;case 21:sharingValue={};case 22:if(!this.hashCache[contract.options.address]){this.hashCache[contract.options.address]={};}this.hashCache[contract.options.address][sharingId]=sharingValue;case 24:return _context7.abrupt("return",this.hashCache[contract.options.address][sharingId]);case 25:case"end":return _context7.stop();}}},_callee7,this);}));function getSharingsFromContract(_x32){return _getSharingsFromContract.apply(this,arguments);}return getSharingsFromContract;}()},{key:"getKey",value:function(){var _getKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(address,partner,section){var block,sharingId,partnerHash,sectionHash,sharingsValue,partnerSections,sectionBlocks,blocks,lteBlocks,matchingBlock,_args8=arguments;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:block=_args8.length>3&&_args8[3]!==undefined?_args8[3]:Number.MAX_SAFE_INTEGER;sharingId=_args8.length>4&&_args8[4]!==undefined?_args8[4]:null;partnerHash=this.options.nameResolver.soliditySha3(partner);sectionHash=this.options.nameResolver.soliditySha3(section||'*');if(!(!this.sharingCache[address]||!this.sharingCache[address][sharingId]||!this.sharingCache[address][sharingId][partnerHash]||!this.sharingCache[address][sharingId][partnerHash][sectionHash]||!this.sharingCache[address][sharingId][partnerHash][sectionHash][block])){_context8.next=10;break;}_context8.next=7;return this.getSharings(address,null,null,null,sharingId);case 7:sharingsValue=_context8.sent;if(!this.sharingCache[address]){this.sharingCache[address]={};}this.sharingCache[address][sharingId]=sharingsValue;case 10:partnerSections=this.sharingCache[address][sharingId][partnerHash];if(partnerSections){_context8.next=15;break;}this.log("could not find any keys for \"".concat(address,"\" and partner \"").concat(partner,"\""),'debug');_context8.next=37;break;case 15:if(!partnerSections[sectionHash]){_context8.next=19;break;}sectionBlocks=partnerSections[sectionHash];_context8.next=25;break;case 19:if(!partnerSections[catchAllSection]){_context8.next=23;break;}sectionBlocks=partnerSections[catchAllSection];_context8.next=25;break;case 23:this.log("could not find section keys for contract \"".concat(address,"\" and partner \"").concat(partner,"\" for section \"").concat(section,"\""),'debug');return _context8.abrupt("return",undefined);case 25:if(!(typeof block==='number')){_context8.next=36;break;}blocks=Object.keys(sectionBlocks).map(function(blockNr){return parseInt(blockNr,10);});lteBlocks=blocks.filter(function(blockNr){return blockNr<=block;});if(lteBlocks.length){_context8.next=32;break;}this.log("could not find key for contract \"".concat(address,"\" and partner \"").concat(partner,"\" ")+"for section \"".concat(section,"\", that is new enough"),'debug');_context8.next=34;break;case 32:matchingBlock=lteBlocks[lteBlocks.length-1];return _context8.abrupt("return",sectionBlocks[matchingBlock]);case 34:_context8.next=37;break;case 36:return _context8.abrupt("return",sectionBlocks[block]);case 37:case"end":return _context8.stop();}}},_callee8,this);}));function getKey(_x33,_x34,_x35){return _getKey.apply(this,arguments);}return getKey;}()},{key:"getKeyHistory",value:function(){var _getKeyHistory=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(address,partner,section){var sharingId,sharings,partnetHash,sectiontHash,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:sharingId=_args9.length>3&&_args9[3]!==undefined?_args9[3]:null;_context9.next=3;return this.getSharings(address,partner,section,null,sharingId);case 3:sharings=_context9.sent;partnetHash=this.options.nameResolver.soliditySha3(partner);sectiontHash=this.options.nameResolver.soliditySha3(section);if(!(sharings&&sharings[partnetHash]&&sharings[partnetHash][sectiontHash])){_context9.next=10;break;}return _context9.abrupt("return",sharings[partnetHash][sectiontHash]);case 10:return _context9.abrupt("return",null);case 11:case"end":return _context9.stop();}}},_callee9,this);}));function getKeyHistory(_x36,_x37,_x38){return _getKeyHistory.apply(this,arguments);}return getKeyHistory;}()},{key:"removeSharing",value:function(){var _removeSharing=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(address,originator,partner,section){var sharingId,partnerHash,sectionHash,sharings,contract,description,updatedHash,_args10=arguments;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:sharingId=_args10.length>4&&_args10[4]!==undefined?_args10[4]:null;partnerHash=this.options.nameResolver.soliditySha3(partner);sectionHash=this.options.nameResolver.soliditySha3(section);if(!address.startsWith('0x')){_context10.next=10;break;}if(sharingId){contract=this.options.contractLoader.loadContract('MultiShared',address);}else{contract=this.options.contractLoader.loadContract('Shared',address);}_context10.next=7;return this.getSharingsFromContract(contract,sharingId);case 7:sharings=_context10.sent;_context10.next=16;break;case 10:_context10.next=12;return this.options.description.getDescriptionFromEns(address);case 12:description=_context10.sent;if(description&&description["public"]&&description["public"].sharings){sharings=description["public"].sharings;}else{sharings={};}if(!description){description={};}if(!description["public"]){description["public"]={};}case 16:if(!(sharings[partnerHash]&&sharings[partnerHash][sectionHash])){_context10.next=36;break;}delete sharings[partnerHash][sectionHash];if(this.sharingCache[address]&&this.sharingCache[address][sharingId]&&this.sharingCache[address][sharingId][partnerHash]&&this.sharingCache[address][sharingId][partnerHash][sectionHash]){delete this.sharingCache[address][sharingId][partnerHash][sectionHash];}if(!address.startsWith('0x')){_context10.next=33;break;}_context10.next=22;return this.options.dfs.add('sharing',Buffer.from(JSON.stringify(sharings),this.encodingUnencrypted));case 22:updatedHash=_context10.sent;if(!sharingId){_context10.next=28;break;}_context10.next=26;return this.options.executor.executeContractTransaction(contract,'setMultiSharing',{from:originator,autoGas:1.1},sharingId,updatedHash);case 26:_context10.next=30;break;case 28:_context10.next=30;return this.options.executor.executeContractTransaction(contract,'setSharing',{from:originator,autoGas:1.1},updatedHash);case 30:if(this.hashCache[contract.options.address]&&this.hashCache[contract.options.address][sharingId]){delete this.hashCache[contract.options.address][sharingId];}_context10.next=36;break;case 33:description["public"].sharings=sharings;_context10.next=36;return this.options.description.setDescriptionToEns(address,description,originator);case 36:case"end":return _context10.stop();}}},_callee10,this);}));function removeSharing(_x39,_x40,_x41,_x42){return _removeSharing.apply(this,arguments);}return removeSharing;}()},{key:"saveSharingsToContract",value:function(){var _saveSharingsToContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(contract,sharings,originator,sharingId){var shareContract,oldHash,updatedHash;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(typeof contract==='string'){shareContract=this.options.contractLoader.loadContract(sharingId?'MultiShared':'Shared',contract);}else{shareContract=contract;}if(!sharingId){_context11.next=7;break;}_context11.next=4;return this.options.executor.executeContractCall(shareContract,'multiSharings',sharingId);case 4:oldHash=_context11.sent;_context11.next=10;break;case 7:_context11.next=9;return this.options.executor.executeContractCall(shareContract,'sharing');case 9:oldHash=_context11.sent;case 10:_context11.next=12;return this.options.dfs.add('sharing',Buffer.from(JSON.stringify(sharings),this.encodingUnencrypted));case 12:updatedHash=_context11.sent;if(!sharingId){_context11.next=18;break;}_context11.next=16;return this.options.executor.executeContractTransaction(shareContract,'setMultiSharing',{from:originator,autoGas:1.1},sharingId,updatedHash);case 16:_context11.next=20;break;case 18:_context11.next=20;return this.options.executor.executeContractTransaction(shareContract,'setSharing',{from:originator,autoGas:1.1},updatedHash);case 20:if(!(oldHash&&oldHash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context11.next=29;break;}_context11.prev=21;_context11.next=24;return this.options.dfs.remove(oldHash);case 24:_context11.next=29;break;case 26:_context11.prev=26;_context11.t0=_context11["catch"](21);this.log("could not unpin old sharing hash: ".concat(_context11.t0.message),'warning');case 29:if(this.hashCache[shareContract.options.address]&&this.hashCache[shareContract.options.address][sharingId]){delete this.hashCache[shareContract.options.address][sharingId];}this.clearCache();case 31:case"end":return _context11.stop();}}},_callee11,this,[[21,26]]);}));function saveSharingsToContract(_x43,_x44,_x45,_x46){return _saveSharingsToContract.apply(this,arguments);}return saveSharingsToContract;}()},{key:"trimSharings",value:function(){var _trimSharings=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(sharings,partner,section,block){var partnerHash,sectionHash;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:partnerHash=this.options.nameResolver.soliditySha3(partner);if(!section){delete sharings[partnerHash];}else if(sharings[partnerHash]){sectionHash=this.options.nameResolver.soliditySha3(section);if(!block){delete sharings[partnerHash][sectionHash];}else if(sharings[partnerHash][sectionHash]&&sharings[partnerHash][sectionHash][block]){delete sharings[partnerHash][sectionHash][block];}}return _context12.abrupt("return",sharings);case 3:case"end":return _context12.stop();}}},_callee12,this);}));function trimSharings(_x47,_x48,_x49,_x50){return _trimSharings.apply(this,arguments);}return trimSharings;}()},{key:"decryptSharings",value:function(){var _decryptSharings=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(sharings,_partner,_section,_block){var result,_partnerHash,_i,_Object$keys,partnerHashKey,partner,_sectionHash,_i2,_Object$keys2,sectionHashKey,section,_i3,_Object$keys3,blockKey,block,cryptor,decryptKey,decrypted;return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:result={};_partnerHash=_partner?this.options.nameResolver.soliditySha3(_partner):null;_i=0,_Object$keys=Object.keys(sharings);case 3:if(!(_i<_Object$keys.length)){_context13.next=43;break;}partnerHashKey=_Object$keys[_i];if(!(_partnerHash&&_partnerHash!==partnerHashKey)){_context13.next=7;break;}return _context13.abrupt("continue",40);case 7:result[partnerHashKey]={};partner=sharings[partnerHashKey];_sectionHash=_section?this.options.nameResolver.soliditySha3(_section):null;_i2=0,_Object$keys2=Object.keys(partner);case 11:if(!(_i2<_Object$keys2.length)){_context13.next=39;break;}sectionHashKey=_Object$keys2[_i2];if(!(_sectionHash&&_sectionHash!==sectionHashKey)){_context13.next=15;break;}return _context13.abrupt("continue",36);case 15:result[partnerHashKey][sectionHashKey]={};section=partner[sectionHashKey];_i3=0,_Object$keys3=Object.keys(section);case 18:if(!(_i3<_Object$keys3.length)){_context13.next=35;break;}blockKey=_Object$keys3[_i3];if(!(_block&&_block!==parseInt(blockKey,10))){_context13.next=22;break;}return _context13.abrupt("continue",32);case 22:block=section[blockKey];cryptor=this.options.cryptoProvider.getCryptorByCryptoInfo(block.cryptoInfo);_context13.next=26;return this.options.keyProvider.getKey(block.cryptoInfo);case 26:decryptKey=_context13.sent;if(!decryptKey){_context13.next=32;break;}_context13.next=30;return cryptor.decrypt(Buffer.from(block["private"],this.encodingEncrypted),{key:decryptKey});case 30:decrypted=_context13.sent;result[partnerHashKey][sectionHashKey][blockKey]=decrypted.toString(this.encodingUnencrypted);case 32:_i3++;_context13.next=18;break;case 35:if(!Object.keys(result[partnerHashKey][sectionHashKey]).length){delete result[partnerHashKey][sectionHashKey];}case 36:_i2++;_context13.next=11;break;case 39:if(!Object.keys(result[partnerHashKey]).length){delete result[partnerHashKey];}case 40:_i++;_context13.next=3;break;case 43:return _context13.abrupt("return",result);case 44:case"end":return _context13.stop();}}},_callee13,this);}));function decryptSharings(_x51,_x52,_x53,_x54){return _decryptSharings.apply(this,arguments);}return decryptSharings;}()}]);return Sharing;}(dbcp_1.Logger);exports.Sharing=Sharing;

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133}],13:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var web3_eth_abi_1=require("web3-eth-abi");var SignerIdentity=function(_dbcp_1$Logger){(0,_inherits2["default"])(SignerIdentity,_dbcp_1$Logger);function SignerIdentity(options){var _this;var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;(0,_classCallCheck2["default"])(this,SignerIdentity);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(SignerIdentity).call(this,options));_this.coder=new web3_eth_abi_1.AbiCoder();_this.options=options;if(config){_this.updateConfig(options,config);}return _this;}(0,_createClass2["default"])(SignerIdentity,[{key:"createContract",value:function(){var _createContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contractName,functionArguments,options){var compiledContract,_ref,blockNumber,transactionHash,keyHolderLibrary,events,matches;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(options.from===this.underlyingAccount)){_context.next=2;break;}return _context.abrupt("return",this.config.underlyingSigner.createContract(contractName,functionArguments,options));case 2:compiledContract=this.options.contractLoader.getCompiledContract(contractName);if(!(!compiledContract||!compiledContract.bytecode)){_context.next=5;break;}throw new Error("cannot find contract bytecode for contract \"".concat(contractName,"\""));case 5:options.input="0x".concat(compiledContract.bytecode)+this.encodeConstructorParams(JSON.parse(compiledContract["interface"]),functionArguments);_context.next=8;return this.handleIdentityTransaction(null,null,[],options);case 8:_ref=_context.sent;blockNumber=_ref.blockNumber;transactionHash=_ref.transactionHash;keyHolderLibrary=this.options.contractLoader.loadContract('KeyHolderLibrary',this.activeIdentity);_context.next=14;return keyHolderLibrary.getPastEvents('ContractCreated',{fromBlock:blockNumber,toBlock:blockNumber});case 14:events=_context.sent;matches=events.filter(function(ev){return ev.transactionHash===transactionHash;});if(!(matches.length!==1)){_context.next=18;break;}throw new Error('contract creation failed');case 18:return _context.abrupt("return",this.options.contractLoader.loadContract(contractName,matches[0].returnValues.contractId));case 19:case"end":return _context.stop();}}},_callee,this);}));function createContract(_x,_x2,_x3){return _createContract.apply(this,arguments);}return createContract;}()},{key:"getPublicKey",value:function(){var _getPublicKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(accountId){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(accountId!==this.underlyingAccount)){_context2.next=2;break;}throw new Error('getting public key is only supported for \'underlyingAccount\'');case 2:return _context2.abrupt("return",this.config.underlyingSigner.getPublicKey(accountId));case 3:case"end":return _context2.stop();}}},_callee2,this);}));function getPublicKey(_x4){return _getPublicKey.apply(this,arguments);}return getPublicKey;}()},{key:"signAndExecuteSend",value:function(){var _signAndExecuteSend=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(options,handleTxResult){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(options.from===this.underlyingAccount)){_context3.next=2;break;}return _context3.abrupt("return",this.config.underlyingSigner.signAndExecuteSend(options,handleTxResult));case 2:_context3.prev=2;_context3.t0=handleTxResult;_context3.next=6;return this.handleIdentityTransaction(null,null,[],Object.assign(Object.assign({},options),{input:'0x'}));case 6:_context3.t1=_context3.sent;(0,_context3.t0)(null,_context3.t1);_context3.next=13;break;case 10:_context3.prev=10;_context3.t2=_context3["catch"](2);handleTxResult(_context3.t2);case 13:case"end":return _context3.stop();}}},_callee3,this,[[2,10]]);}));function signAndExecuteSend(_x5,_x6){return _signAndExecuteSend.apply(this,arguments);}return signAndExecuteSend;}()},{key:"signAndExecuteTransaction",value:function(){var _signAndExecuteTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contract,functionName,functionArguments,options,handleTxResult){return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(options.from===this.underlyingAccount)){_context4.next=2;break;}return _context4.abrupt("return",this.config.underlyingSigner.signAndExecuteTransaction(contract,functionName,functionArguments,options,handleTxResult));case 2:_context4.prev=2;_context4.t0=handleTxResult;_context4.next=6;return this.handleIdentityTransaction(contract,functionName,functionArguments,options);case 6:_context4.t1=_context4.sent;(0,_context4.t0)(null,_context4.t1);_context4.next=13;break;case 10:_context4.prev=10;_context4.t2=_context4["catch"](2);handleTxResult(_context4.t2);case 13:case"end":return _context4.stop();}}},_callee4,this,[[2,10]]);}));function signAndExecuteTransaction(_x7,_x8,_x9,_x10,_x11){return _signAndExecuteTransaction.apply(this,arguments);}return signAndExecuteTransaction;}()},{key:"signMessage",value:function(){var _signMessage=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(accountId,message){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(accountId!==this.underlyingAccount)){_context5.next=2;break;}throw new Error('signing messages with identities is only supported for \'underlyingAccount\'');case 2:return _context5.abrupt("return",this.config.underlyingSigner.signMessage(accountId,message));case 3:case"end":return _context5.stop();}}},_callee5,this);}));function signMessage(_x12,_x13){return _signMessage.apply(this,arguments);}return signMessage;}()},{key:"updateConfig",value:function updateConfig(partialOptions,config){this.options.verifications=partialOptions.verifications;this.config=config;this.activeIdentity=this.config.activeIdentity;this.underlyingAccount=this.config.underlyingAccount;}},{key:"encodeConstructorParams",value:function encodeConstructorParams(abi,params){var _this2=this;if(params.length){return abi.filter(function(json){return json.type==='constructor'&&json.inputs.length===params.length;}).map(function(json){return json.inputs.map(function(input){return input.type;});}).map(function(types){return _this2.coder.encodeParameters(types,params);}).map(function(encodedParams){return encodedParams.replace(/^0x/,'');})[0]||'';}else{return'';}}},{key:"handleIdentityTransaction",value:function(){var _handleIdentityTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(contract,functionName,functionArguments,options){var _this$options$verific,_this3=this;var optionsClone,txInfo,txResult;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:optionsClone=Object.assign({},options);optionsClone.from=this.underlyingAccount;_context6.next=4;return(_this$options$verific=this.options.verifications).getTransactionInfo.apply(_this$options$verific,[contract,functionName,optionsClone].concat((0,_toConsumableArray2["default"])(functionArguments)));case 4:txInfo=_context6.sent;_context6.next=7;return this.options.verifications.executeTransaction(this.underlyingAccount,txInfo,{event:{contract:this.options.contractLoader.loadContract('VerificationHolder',this.activeIdentity),eventName:'ExecutionRequested'},getEventResult:function getEventResult(_ref2){var transactionHash=_ref2.transactionHash;return _this3.options.web3.eth.getTransactionReceipt(transactionHash);}});case 7:txResult=_context6.sent;return _context6.abrupt("return",txResult);case 9:case"end":return _context6.stop();}}},_callee6,this);}));function handleIdentityTransaction(_x14,_x15,_x16,_x17){return _handleIdentityTransaction.apply(this,arguments);}return handleIdentityTransaction;}()}]);return SignerIdentity;}(dbcp_1.Logger);exports.SignerIdentity=SignerIdentity;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"web3-eth-abi":673}],14:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var web3_eth_abi_1=require("web3-eth-abi");var dbcp_1=require("@evan.network/dbcp");var coder=new web3_eth_abi_1.AbiCoder();var Wallet=function(_dbcp_1$Logger){(0,_inherits2["default"])(Wallet,_dbcp_1$Logger);function Wallet(options){var _this;(0,_classCallCheck2["default"])(this,Wallet);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Wallet).call(this,options));_this.defaultDescription={'public':{'name':'MultiSigWallet contract','description':'allows multiple accounts to agree on transactions','author':'evan.network GmbH','version':'0.0.1','dbcpVersion':1}};_this.receipts={};_this.options=options;_this.defaultOptions=options.defaultOptions||{};_this.defaultDescription["public"].abis={own:JSON.parse(_this.options.contractLoader.contracts.MultiSigWallet["interface"])};var signAndExecuteTransaction=_this.options.executor.signer.signAndExecuteTransaction;_this.options.executor.signer.signAndExecuteTransaction=function(contract,functionName,functionArguments,innerOptions,handleTxResult){signAndExecuteTransaction.call(_this.options.executor.signer,contract,functionName,functionArguments,innerOptions,function(error,receipt){if(receipt){_this.receipts[receipt.transactionHash]=receipt;}handleTxResult(error,receipt);});};return _this;}(0,_createClass2["default"])(Wallet,[{key:"addOwner",value:function(){var _addOwner=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(accountId,toAdd){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.walletType==='MultiSigWallet')){_context.next=5;break;}_context.next=3;return this.options.executor.executeContractTransaction(this.ensureContract(),'addOwner',{from:accountId},toAdd);case 3:_context.next=11;break;case 5:if(!(this.walletType==='MultiSigWalletSG')){_context.next=10;break;}_context.next=8;return this.submitTransaction(this.walletContract,'addOwner',{from:accountId},toAdd);case 8:_context.next=11;break;case 10:throw new Error("unknown wallet type: ".concat(this.walletType));case 11:case"end":return _context.stop();}}},_callee,this);}));function addOwner(_x,_x2){return _addOwner.apply(this,arguments);}return addOwner;}()},{key:"confirmTransaction",value:function(){var _confirmTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(accountId,transactionId){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this.submitAndHandleConfirmation(null,'confirmTransaction',{from:accountId},transactionId));case 1:case"end":return _context2.stop();}}},_callee2,this);}));function confirmTransaction(_x3,_x4){return _confirmTransaction.apply(this,arguments);}return confirmTransaction;}()},{key:"create",value:function(){var _create=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(accountId,manager,owners){var confirmations,factoryDomain,factoryAddress,factory,contractId,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:confirmations=_args3.length>3&&_args3[3]!==undefined?_args3[3]:1;factoryDomain=[this.options.nameResolver.config.labels.wallet,this.options.nameResolver.config.labels.factory,this.options.nameResolver.config.labels.ensRoot].join('.');_context3.next=4;return this.options.nameResolver.getAddress(factoryDomain);case 4:factoryAddress=_context3.sent;if(factoryAddress){_context3.next=7;break;}throw new Error("factory '".concat(factoryDomain,"' for creating wallets not found in ")+"'".concat(this.options.nameResolver.config.labels.businessCenterRoot,"'"));case 7:factory=this.options.contractLoader.loadContract('MultiSigWalletFactory',factoryAddress);_context3.next=10;return this.options.executor.executeContractTransaction(factory,'createContract',{from:accountId,autoGas:1.1,event:{target:'MultiSigWalletFactory',eventName:'ContractCreated'},getEventResult:function getEventResult(event,args){return args.newAddress;}},manager,owners,confirmations);case 10:contractId=_context3.sent;_context3.next=13;return this.options.description.setDescriptionToContract(contractId,this.defaultDescription,accountId);case 13:this.walletType='MultiSigWallet';this.walletContract=this.options.contractLoader.loadContract(this.walletType,contractId);case 15:case"end":return _context3.stop();}}},_callee3,this);}));function create(_x5,_x6,_x7){return _create.apply(this,arguments);}return create;}()},{key:"getOwners",value:function(){var _getOwners=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",this.options.executor.executeContractCall(this.ensureContract(),'getOwners'));case 1:case"end":return _context4.stop();}}},_callee4,this);}));function getOwners(){return _getOwners.apply(this,arguments);}return getOwners;}()},{key:"load",value:function load(contractId){var walletType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'MultiSigWallet';this.walletType=walletType;this.walletContract=this.options.contractLoader.loadContract(walletType,contractId);}},{key:"removeOwner",value:function(){var _removeOwner=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(accountId,toRemove){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(this.walletType==='MultiSigWallet')){_context5.next=5;break;}_context5.next=3;return this.options.executor.executeContractTransaction(this.ensureContract(),'removeOwner',{from:accountId},toRemove);case 3:_context5.next=11;break;case 5:if(!(this.walletType==='MultiSigWalletSG')){_context5.next=10;break;}_context5.next=8;return this.submitTransaction(this.walletContract,'removeOwner',{from:accountId},toRemove);case 8:_context5.next=11;break;case 10:throw new Error("unknown wallet type: ".concat(this.walletType));case 11:case"end":return _context5.stop();}}},_callee5,this);}));function removeOwner(_x8,_x9){return _removeOwner.apply(this,arguments);}return removeOwner;}()},{key:"submitRawTransaction",value:function(){var _submitRawTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(target,encoded,inputOptions){return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",this.submitAndHandleConfirmation(target,'submitTransaction',inputOptions,encoded));case 1:case"end":return _context6.stop();}}},_callee6,this);}));function submitRawTransaction(_x10,_x11,_x12){return _submitRawTransaction.apply(this,arguments);}return submitRawTransaction;}()},{key:"submitTransaction",value:function(){var _submitTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(target,functionName,inputOptions){var _len,functionArguments,_key,encoded,_args7=arguments;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:for(_len=_args7.length,functionArguments=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){functionArguments[_key-3]=_args7[_key];}encoded=this.encodeFunctionParams(functionName,target,functionArguments);return _context7.abrupt("return",this.submitRawTransaction(target,encoded,inputOptions));case 3:case"end":return _context7.stop();}}},_callee7,this);}));function submitTransaction(_x13,_x14,_x15){return _submitTransaction.apply(this,arguments);}return submitTransaction;}()},{key:"encodeFunctionParams",value:function encodeFunctionParams(functionName,contractInstance,params){var functionAbi;if(contractInstance.abiModel){functionAbi=contractInstance.abiModel.getMethod(functionName).abiItem;}else{functionAbi=contractInstance.options.jsonInterface.filter(function(json){return json.name===functionName&&json.inputs.length===params.length;})[0];}var types=functionAbi.inputs.map(function(input){return input.type;});var signature=this.options.executor.web3.eth.abi.encodeFunctionSignature(functionAbi);return"".concat(signature).concat(coder.encodeParameters(types,params).replace('0x',''));}},{key:"submitAndHandleConfirmation",value:function(){var _submitAndHandleConfirmation=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(target,functionName,inputOptions){var _this2=this;var _len2,functionArguments,_key2,subscriptions,receipt,walletOptions,_args11=arguments;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:for(_len2=_args11.length,functionArguments=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){functionArguments[_key2-3]=_args11[_key2];}subscriptions=[];walletOptions=Object.assign({timeout:300000},this.defaultOptions||{},inputOptions);_context11.prev=3;_context11.next=6;return new Promise(function(){var _ref=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(resolve,reject){var txResolved,transactionTimeout,transactionHash,walletTransactionId,transactionResults,resolveIfPossible,walletInstance,handleConfirmation,options,value,_this2$options$execut,_this2$options$execut2;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;transactionTimeout=walletOptions.eventTimeout||walletOptions.timeout;setTimeout(function(){if(!txResolved){txResolved=true;reject("wallet timeout after ".concat(transactionTimeout,"ms"));}},transactionTimeout);transactionResults={};resolveIfPossible=function resolveIfPossible(){if(transactionHash&&walletTransactionId&&_this2.receipts[transactionHash]&&transactionResults[walletTransactionId].event){txResolved=true;if(transactionResults[walletTransactionId].event.event==='ExecutionFailure'){return reject('ExecutionFailure');}resolve(transactionResults[walletTransactionId]);}};walletInstance=_this2.ensureContract();handleConfirmation=function(){var _ref2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(event){var events,eventNames,eventList,msg;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;events={};eventNames=[];_context8.next=5;return walletInstance.getPastEvents('allEvents',{fromBlock:event.blockNumber,toBlock:event.blockNumber});case 5:eventList=_context8.sent;eventList=eventList.filter(function(ev){return ev.transactionHash===event.transactionHash;});eventList.forEach(function(entry){events[entry.event]=entry;eventNames.push(entry.event);});transactionResults[event.returnValues.transactionId]={event:event};if(eventNames.includes('ContractCreated')){_this2.log('received MultiSigWallet ContractCreated event with txid: '+"".concat(event.returnValues.transactionId," ").concat(event.transactionHash),'debug');transactionResults[event.returnValues.transactionId].result=eventList.filter(function(ev){return ev.event==='ContractCreated';})[0].returnValues.contractId;}else if(eventNames.includes('Execution')){_this2.log('received MultiSigWallet Execution event with txid: '+"".concat(event.returnValues.transactionId," ").concat(event.transactionHash),'debug');}else if(eventNames.includes('ExecutionFailure')){_this2.log('received MultiSigWallet ExecutionFailure event with txid: '+"".concat(event.returnValues.transactionId," ").concat(event.transactionHash),'debug');}else{_this2.log('received MultiSigWallet Confirmation event with hash: '+"".concat(event.transactionHash," and txid: ").concat(event.returnValues.transactionId),'debug');transactionResults[event.returnValues.transactionId].result={status:'pending',transactionId:event.returnValues.transactionId};}_context8.next=17;break;case 12:_context8.prev=12;_context8.t0=_context8["catch"](0);msg='handling of confirmation of '+(target?"transaction to \"".concat(target.options.address,"\""):'constructor')+" with ".concat(_context8.t0.message||_context8.t0);_this2.log(msg,'error');throw new Error(msg);case 17:case"end":return _context8.stop();}}},_callee8,null,[[0,12]]);}));return function handleConfirmation(_x21){return _ref2.apply(this,arguments);};}();options=Object.assign(JSON.parse(JSON.stringify(walletOptions)),{event:{target:'MultiSigWallet',eventName:'Confirmation'},getEventResult:function(){var _getEventResult=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(event,args){return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this2.log('received MultiSigWallet Confirmation event with hash: '+"".concat(event.transactionHash," and txid: ").concat(args.transactionId),'debug');transactionHash=event.transactionHash;walletTransactionId=args.transactionId;_context9.next=5;return handleConfirmation(event);case 5:resolveIfPossible();case 6:case"end":return _context9.stop();}}},_callee9);}));function getEventResult(_x22,_x23){return _getEventResult.apply(this,arguments);}return getEventResult;}()});value=0;if(options.value){_this2.log('wallet transaction has "value" set, removing this from tx options '+'and passing it as argument','debug');value=options.value;delete options.value;}if(!(functionName==='submitTransaction')){_context10.next=15;break;}_context10.next=13;return(_this2$options$execut=_this2.options.executor).executeContractTransaction.apply(_this2$options$execut,[walletInstance,functionName,options,target&&target.options?target.options.address:'0x0000000000000000000000000000000000000000',value].concat(functionArguments));case 13:_context10.next=18;break;case 15:if(!(functionName==='confirmTransaction')){_context10.next=18;break;}_context10.next=18;return(_this2$options$execut2=_this2.options.executor).executeContractTransaction.apply(_this2$options$execut2,[walletInstance,functionName,options].concat(functionArguments));case 18:_context10.next=23;break;case 20:_context10.prev=20;_context10.t0=_context10["catch"](0);reject(_context10.t0);case 23:case"end":return _context10.stop();}}},_callee10,null,[[0,20]]);}));return function(_x19,_x20){return _ref.apply(this,arguments);};}());case 6:receipt=_context11.sent;_context11.next=12;break;case 9:_context11.prev=9;_context11.t0=_context11["catch"](3);throw new Error(_context11.t0.message||_context11.t0);case 12:_context11.prev=12;_context11.next=15;return Promise.all(subscriptions.map(function(s){return _this2.options.eventHub.unsubscribe({subscription:s});}));case 15:return _context11.finish(12);case 16:return _context11.abrupt("return",receipt);case 17:case"end":return _context11.stop();}}},_callee11,this,[[3,9,12,16]]);}));function submitAndHandleConfirmation(_x16,_x17,_x18){return _submitAndHandleConfirmation.apply(this,arguments);}return submitAndHandleConfirmation;}()},{key:"ensureContract",value:function ensureContract(){if(!this.walletContract){throw new Error('no wallet contract specified at wallet helper, load or create one');}return this.walletContract;}},{key:"walletAddress",get:function get(){return this.walletContract?this.walletContract.options.address:null;}}]);return Wallet;}(dbcp_1.Logger);exports.Wallet=Wallet;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"web3-eth-abi":673}],15:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:true});var http=require("http");var https=require("https");var IpfsLib=function(){function IpfsLib(provider){(0,_classCallCheck2["default"])(this,IpfsLib);this.setProvider(provider||{});}(0,_createClass2["default"])(IpfsLib,[{key:"setProvider",value:function setProvider(provider){var data=Object.assign({host:'127.0.0.1',pinning:true,port:'5001',protocol:'http',base:'/api/v0',headers:{}},provider||{});this.provider=data;this.files={add:this.add.bind(this),cat:this.cat.bind(this)};this.pin={add:this.pinAdd.bind(this),rm:this.pinRm.bind(this)};}},{key:"sendAsync",value:function(){var _sendAsync=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(opts){var _this=this;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){var requestLib=_this.provider.protocol==='http'?http:https;var reqOptions={};reqOptions.hostname=_this.provider.host;reqOptions.path="".concat(_this.provider.base).concat(opts.uri);reqOptions.headers=Object.assign({},_this.provider.headers);if(opts.payload){reqOptions.method='POST';reqOptions.headers['Content-Type']="multipart/form-data; boundary=".concat(opts.boundary);}else{reqOptions.method='GET';}if(opts.accept){reqOptions.headers['accept']=opts.accept;}var req=requestLib.request(reqOptions,function(res){var data=[];res.on('data',function(chunk){data.push(chunk);});res.on('end',function(){var binary=Buffer.concat(data);if(res.statusCode>=200&&res.statusCode<400){try{resolve(opts.jsonParse?JSON.parse(binary.toString()):binary);}catch(jsonError){reject(new Error("error while parsing ipfs binary data: '".concat(String(binary),"', error: ").concat(String(jsonError),"'")));}}else{reject(new Error("problem with IPFS request: ".concat(String(binary),"'")));}});});req.on('error',function(e){reject(new Error("problem with request: ".concat(e.message)));});if(opts.payload&&opts.boundary){req.write(opts.payload);}req.end();}));case 1:case"end":return _context.stop();}}},_callee);}));function sendAsync(_x){return _sendAsync.apply(this,arguments);}return sendAsync;}()},{key:"add",value:function(){var _add=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(input){var files,response,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,file,boundary,header,footer,payload;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:files=input;if(!Array.isArray(files)){files=[].concat(files);}response=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=6;_iterator=files[Symbol.iterator]();case 8:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=22;break;}file=_step.value;boundary=this.createBoundary();header=["--".concat(boundary),"Content-Disposition: form-data; name=\"".concat(file.path,"\""),'Content-Type: application/octet-stream','',''].join('\r\n');footer="\r\n--".concat(boundary,"--");payload=Buffer.concat([Buffer.from(header),file.content,Buffer.from(footer)]);_context2.t0=response;_context2.next=17;return this.sendAsync({jsonParse:true,accept:'application/json',uri:'/add',takeHash:true,payload:payload,boundary:boundary});case 17:_context2.t1=_context2.sent;_context2.t0.push.call(_context2.t0,_context2.t1);case 19:_iteratorNormalCompletion=true;_context2.next=8;break;case 22:_context2.next=28;break;case 24:_context2.prev=24;_context2.t2=_context2["catch"](6);_didIteratorError=true;_iteratorError=_context2.t2;case 28:_context2.prev=28;_context2.prev=29;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 31:_context2.prev=31;if(!_didIteratorError){_context2.next=34;break;}throw _iteratorError;case 34:return _context2.finish(31);case 35:return _context2.finish(28);case 36:return _context2.abrupt("return",response);case 37:case"end":return _context2.stop();}}},_callee2,this,[[6,24,28,36],[29,,31,35]]);}));function add(_x2){return _add.apply(this,arguments);}return add;}()},{key:"createBoundary",value:function createBoundary(){var boundary="----EVANipfs".concat(Math.random()*100000,".").concat(Math.random()*100000);return boundary;}},{key:"cat",value:function(){var _cat=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(ipfsHash){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",this.sendAsync({uri:"/cat?arg=".concat(ipfsHash)}));case 1:case"end":return _context3.stop();}}},_callee3,this);}));function cat(_x3){return _cat.apply(this,arguments);}return cat;}()},{key:"pinAdd",value:function(){var _pinAdd=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(ipfsHash){return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",this.sendAsync({uri:"/pin/add?arg=".concat(ipfsHash),jsonParse:true}));case 1:case"end":return _context4.stop();}}},_callee4,this);}));function pinAdd(_x4){return _pinAdd.apply(this,arguments);}return pinAdd;}()},{key:"pinRm",value:function(){var _pinRm=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(ipfsHash){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",this.sendAsync({uri:"/pin/rm?arg=".concat(ipfsHash),jsonParse:true}));case 1:case"end":return _context5.stop();}}},_callee5,this);}));function pinRm(_x5){return _pinRm.apply(this,arguments);}return pinRm;}()}]);return IpfsLib;}();exports.IpfsLib=IpfsLib;

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/regenerator":67,"buffer":1133,"http":1260,"https":1185}],16:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var timers_1=require("timers");var bs58=require("bs58");var prottle=require("prottle");var dbcp_1=require("@evan.network/dbcp");var ipfs_lib_1=require("./ipfs-lib");var utils=require("./../common/utils");var IPFS_TIMEOUT=120000;var requestWindowSize=10;var Ipfs=function(_dbcp_1$Logger){(0,_inherits2["default"])(Ipfs,_dbcp_1$Logger);function Ipfs(options){var _this;(0,_classCallCheck2["default"])(this,Ipfs);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Ipfs).call(this,options));_this.disablePin=options.disablePin||false;if(options.cache){_this.cache=options.cache;}if(options.remoteNode){_this.remoteNode=options.remoteNode;}else if(options.dfsConfig){_this.dfsConfig=options.dfsConfig;_this.remoteNode=new ipfs_lib_1.IpfsLib(options.dfsConfig);}else{_this.log('No IPFS config of ipfs remotenode are given','error');}return _this;}(0,_createClass2["default"])(Ipfs,[{key:"add",value:function(){var _add=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(name,data){var files;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:files=[{path:name,content:data}];_context.next=3;return this.addMultiple(files);case 3:return _context.abrupt("return",_context.sent[0]);case 4:case"end":return _context.stop();}}},_callee,this);}));function add(_x,_x2){return _add.apply(this,arguments);}return add;}()},{key:"addMultiple",value:function(){var _addMultiple=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(files){var _this2=this;var remoteFiles,msg;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:remoteFiles=[];_context2.prev=1;_context2.next=4;return this.checkAuthHeader();case 4:_context2.next=6;return this.remoteNode.files.add(files);case 6:remoteFiles=_context2.sent;if(remoteFiles.length){_context2.next=9;break;}throw new Error('no hash was returned');case 9:remoteFiles=remoteFiles.map(function(fileHash){if(!fileHash.hash){fileHash.hash=fileHash.Hash;}return fileHash;});_context2.next=17;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](1);msg="could not add file to ipfs: ".concat(_context2.t0.message||_context2.t0);this.log(msg);throw new Error(msg);case 17:if(!this.cache){_context2.next=20;break;}_context2.next=20;return Promise.all(remoteFiles.map(function(remoteFile,i){_this2.cache.add(remoteFile.hash,files[i].content);}));case 20:if(this.disablePin){_context2.next=23;break;}_context2.next=23;return prottle(requestWindowSize,remoteFiles.map(function(fileHash){return function(){return _this2.pinFileHash(fileHash);};}));case 23:return _context2.abrupt("return",remoteFiles.map(function(remoteFile){return Ipfs.ipfsHashToBytes32(remoteFile.hash);}));case 24:case"end":return _context2.stop();}}},_callee2,this,[[1,12]]);}));function addMultiple(_x3){return _addMultiple.apply(this,arguments);}return addMultiple;}()},{key:"get",value:function(){var _get=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(hash){var _this3=this;var returnBuffer,ipfsHash,buffer,timeout,getRemoteHash,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:returnBuffer=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;ipfsHash=hash.startsWith('Qm')?hash:Ipfs.bytes32ToIpfsHash(hash);if(!(ipfsHash==='QmNLei78zWmzUdbeRB3CiUfAizWUrbeeZh5K1rhAQKCh51')){_context3.next=4;break;}return _context3.abrupt("return",Buffer.from('{}'));case 4:this.log("Getting IPFS Hash ".concat(ipfsHash),'debug');if(!this.cache){_context3.next=15;break;}_context3.next=8;return this.cache.get(ipfsHash);case 8:buffer=_context3.sent;if(!buffer){_context3.next=15;break;}if(!returnBuffer){_context3.next=14;break;}return _context3.abrupt("return",Buffer.from(buffer));case 14:return _context3.abrupt("return",Buffer.from(buffer).toString('binary'));case 15:timeout=new Promise(function(resolve,reject){var wait=timers_1.setTimeout(function(){timers_1.clearTimeout(wait);reject(new Error("error while getting ipfs hash ".concat(ipfsHash,": rejected after ").concat(IPFS_TIMEOUT,"ms")));},IPFS_TIMEOUT);});getRemoteHash=this.remoteNode.files.cat(ipfsHash).then(function(buffer){var fileBuffer=buffer;var ret=fileBuffer.toString('binary');if(_this3.cache){_this3.cache.add(ipfsHash,fileBuffer);}if(returnBuffer){return fileBuffer;}else{return ret;}})["catch"](function(){throw new Error("error while getting ipfs hash ".concat(ipfsHash));});return _context3.abrupt("return",Promise.race([getRemoteHash,timeout]));case 18:case"end":return _context3.stop();}}},_callee3,this);}));function get(_x4){return _get.apply(this,arguments);}return get;}()},{key:"pinFileHash",value:function(){var _pinFileHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(file){var ipfsHash;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.checkAuthHeader();case 2:ipfsHash=file.hash.startsWith('Qm')?file.hash:Ipfs.bytes32ToIpfsHash(file.hash);_context4.next=5;return this.remoteNode.pin.add(ipfsHash);case 5:case"end":return _context4.stop();}}},_callee4,this);}));function pinFileHash(_x5){return _pinFileHash.apply(this,arguments);}return pinFileHash;}()},{key:"remove",value:function(){var _remove=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(hash){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.unPinFileHash(hash);case 2:case"end":return _context5.stop();}}},_callee5,this);}));function remove(_x6){return _remove.apply(this,arguments);}return remove;}()},{key:"setAccountAndPrivateKey",value:function(){var _setAccountAndPrivateKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(){return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:case"end":return _context6.stop();}}},_callee6);}));function setAccountAndPrivateKey(){return _setAccountAndPrivateKey.apply(this,arguments);}return setAccountAndPrivateKey;}()},{key:"setRuntime",value:function setRuntime(runtime){this.runtime=runtime;}},{key:"unPinFileHash",value:function(){var _unPinFileHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(hash){var ipfsHash;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.checkAuthHeader();case 2:ipfsHash=hash.startsWith('Qm')?hash:Ipfs.bytes32ToIpfsHash(hash);_context7.next=5;return this.remoteNode.pin.rm(ipfsHash);case 5:case"end":return _context7.stop();}}},_callee7,this);}));function unPinFileHash(_x7){return _unPinFileHash.apply(this,arguments);}return unPinFileHash;}()},{key:"checkAuthHeader",value:function(){var _checkAuthHeader=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){var _this4=this;var ipfsAuthHeader;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(this.remoteNode.provider.headers.authorization){_context8.next=6;break;}_context8.next=3;return utils.getSmartAgentAuthHeaders(this.runtime);case 3:ipfsAuthHeader=_context8.sent;this.remoteNode.provider.headers.authorization=ipfsAuthHeader;timers_1.setTimeout(function(){delete _this4.remoteNode.provider.headers.authorization;},60*1000);case 6:case"end":return _context8.stop();}}},_callee8,this);}));function checkAuthHeader(){return _checkAuthHeader.apply(this,arguments);}return checkAuthHeader;}()}],[{key:"ipfsHashToBytes32",value:function ipfsHashToBytes32(hash){var bytes=bs58.decode(hash);var multiHashId=2;return"0x".concat(bytes.slice(multiHashId,bytes.length).toString('hex'));}},{key:"bytes32ToIpfsHash",value:function bytes32ToIpfsHash(str){var remove0x=str.slice(2,str.length);var bytes=Buffer.from("1220".concat(remove0x),'hex');var hash=bs58.encode(bytes);return hash;}}]);return Ipfs;}(dbcp_1.Logger);exports.Ipfs=Ipfs;

}).call(this,require("buffer").Buffer)

},{"./../common/utils":1,"./ipfs-lib":15,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"bs58":163,"buffer":1133,"prottle":524,"timers":1280}],1280:[function(require,module,exports){
(function (setImmediate,clearImmediate){
var nextTick=require('process/browser.js').nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout);};/* common-shake removed: exports.setInterval = */ void function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval);};exports.clearTimeout=/* common-shake removed: exports.clearInterval = */ function(timeout){timeout.close();};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn;}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id);};/* common-shake removed: exports.enroll = */ void function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs;};/* common-shake removed: exports.unenroll = */ void function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1;};/* common-shake removed: exports._unrefActive = */ void 0, /* common-shake removed: exports.active = */ function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout();},msecs);}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args);}else{fn.call(null);}exports.clearImmediate(id);}});return id;};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id];};

}).call(this,require("timers").setImmediate,require("timers").clearImmediate)

},{"process/browser.js":1221,"timers":1280}],163:[function(require,module,exports){
var basex=require('base-x');var ALPHABET='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';module.exports=basex(ALPHABET);

},{"base-x":164}],17:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:true});var Graph=require("ipld-graph-builder");var _=require("lodash");var bs58=require("bs58");var dbcp_1=require("@evan.network/dbcp");var ipfs_1=require("../dfs/ipfs");var IPLD_TIMEOUT=120000;function rebuffer(toBuffer){Object.keys(toBuffer).forEach(function(key){if(key==='/'){toBuffer[key]=Buffer.from(toBuffer[key].data);}else if((0,_typeof2["default"])(toBuffer[key])==='object'&&toBuffer[key]!==null){rebuffer(toBuffer[key]);}});}var Ipld=function(_dbcp_1$Logger){(0,_inherits2["default"])(Ipld,_dbcp_1$Logger);function Ipld(options){var _this;(0,_classCallCheck2["default"])(this,Ipld);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Ipld).call(this,options));_this.hashLog=[];_this.dagOptions={format:'dag-pb'};_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.ipfs=options.ipfs;_this.graph=new Graph({get:null,put:null});_this.keyProvider=options.keyProvider;_this.cryptoProvider=options.cryptoProvider;_this.originator=options.originator;_this.defaultCryptoAlgo=options.defaultCryptoAlgo;_this.nameResolver=options.nameResolver;_this.graph._dag.put=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var _len,args,_key,data,cryptor,cryptoInfo,key,encrypted,envelope,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(_len=_args.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=_args[_key];}data=args[0];if(!(data.cryptoInfo||_this.defaultCryptoAlgo)){_context.next=13;break;}if(data.cryptoInfo){cryptor=_this.cryptoProvider.getCryptorByCryptoInfo(data.cryptoInfo);cryptoInfo=data.cryptoInfo;delete data.cryptoInfo;}else{cryptor=_this.cryptoProvider.getCryptorByCryptoAlgo(_this.defaultCryptoAlgo);cryptoInfo=cryptor.getCryptoInfo(_this.originator);}_context.next=6;return _this.keyProvider.getKey(cryptoInfo);case 6:key=_context.sent;_context.next=9;return cryptor.encrypt(args[0],{key:key});case 9:encrypted=_context.sent;args[0]=encrypted.toString(_this.encodingEncrypted);envelope={"private":encrypted,cryptoInfo:cryptoInfo};args[0]=Buffer.from(JSON.stringify(envelope));case 13:return _context.abrupt("return",_this.ipfs.add('dag',args[0]).then(function(hash){_this.hashLog.push(hash);var bufferHash=bs58.decode(ipfs_1.Ipfs.bytes32ToIpfsHash(hash));return bufferHash;}));case 14:case"end":return _context.stop();}}},_callee);}));_this.graph._dag.get=function(){var timeout=new Promise(function(resolve,reject){var wait=setTimeout(function(){clearTimeout(wait);reject(new Error('timeout reached'));},IPLD_TIMEOUT);});_this.log("Getting IPLD Hash ".concat(bs58.encode(arguments.length<=0?undefined:arguments[0])),'debug');var getHash=_this.ipfs.get(bs58.encode(arguments.length<=0?undefined:arguments[0])).then(function(){var _ref2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(dag){var envelope,cryptor,key,decryptedObject;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!_this.defaultCryptoAlgo){_context2.next=16;break;}envelope=JSON.parse(dag.toString('utf-8'));cryptor=_this.cryptoProvider.getCryptorByCryptoInfo(envelope.cryptoInfo);_context2.next=5;return _this.keyProvider.getKey(envelope.cryptoInfo);case 5:key=_context2.sent;if(key){_context2.next=10;break;}return _context2.abrupt("return",{});case 10:_context2.next=12;return cryptor.decrypt(Buffer.from(envelope["private"],_this.encodingEncrypted),{key:key});case 12:decryptedObject=_context2.sent;rebuffer(decryptedObject);if((0,_typeof2["default"])(decryptedObject)==='object'){decryptedObject.cryptoInfo=envelope.cryptoInfo;}return _context2.abrupt("return",decryptedObject);case 16:case"end":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());return Promise.race([getHash,timeout]);};return _this;}(0,_createClass2["default"])(Ipld,[{key:"getLinkedGraph",value:function(){var _getLinkedGraph=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(graphReference){var path,graphObject,ipfsFile,envelope,cryptor,key,decryptedObject,tree,element,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:path=_args3.length>1&&_args3[1]!==undefined?_args3[1]:'';if(!(typeof graphReference==='string')){_context3.next=22;break;}_context3.next=4;return this.ipfs.get(graphReference);case 4:_context3.t0=this.encodingUnencrypted;ipfsFile=_context3.sent.toString(_context3.t0);envelope=JSON.parse(ipfsFile);if(!envelope.cryptoInfo){_context3.next=19;break;}cryptor=this.cryptoProvider.getCryptorByCryptoInfo(envelope.cryptoInfo);_context3.next=11;return this.keyProvider.getKey(envelope.cryptoInfo);case 11:key=_context3.sent;_context3.next=14;return cryptor.decrypt(Buffer.from(envelope["private"],this.encodingEncrypted),{key:key});case 14:decryptedObject=_context3.sent;rebuffer(decryptedObject);graphObject=decryptedObject;_context3.next=20;break;case 19:graphObject={'/':Buffer.from(ipfsFile,this.encodingUnencrypted)};case 20:_context3.next=23;break;case 22:if(Buffer.isBuffer(graphReference)){graphObject={'/':graphReference};}else{graphObject=graphReference;}case 23:if(path){_context3.next=30;break;}_context3.next=26;return this.graph.tree(graphObject,0);case 26:tree=_context3.sent;return _context3.abrupt("return",tree['/']||tree);case 30:_context3.next=32;return this.graph.get(graphObject,path);case 32:element=_context3.sent;if(element){this.log("Got Linked Graph Path -> ".concat(path," Element"),'debug');}else{this.log("Could not get Linked Graph Path -> ".concat(path," Element"),'debug');}return _context3.abrupt("return",element);case 35:case"end":return _context3.stop();}}},_callee3,this);}));function getLinkedGraph(_x2){return _getLinkedGraph.apply(this,arguments);}return getLinkedGraph;}()},{key:"getResolvedGraph",value:function(){var _getResolvedGraph=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(graphReference){var path,depth,treeNode,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:path=_args4.length>1&&_args4[1]!==undefined?_args4[1]:'';depth=_args4.length>2&&_args4[2]!==undefined?_args4[2]:10;_context4.next=4;return this.getLinkedGraph(graphReference,path);case 4:treeNode=_context4.sent;_context4.next=7;return this.graph.tree(treeNode,depth,true);case 7:return _context4.abrupt("return",_context4.sent);case 8:case"end":return _context4.stop();}}},_callee4,this);}));function getResolvedGraph(_x3){return _getResolvedGraph.apply(this,arguments);}return getResolvedGraph;}()},{key:"store",value:function(){var _store=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(toSet){var cryptoInfo,treeToStore,rootObject,envelope,fileHash;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:cryptoInfo={algorithm:'unencrypted'};treeToStore=_.cloneDeep(toSet);_context5.next=4;return this.graph.flush(treeToStore,Object.assign({},this.dagOptions,{cryptoInfo:cryptoInfo}));case 4:rootObject=_context5.sent;envelope={"private":Buffer.from(JSON.stringify(rootObject),this.encodingUnencrypted).toString(this.encodingEncrypted),cryptoInfo:cryptoInfo};_context5.next=8;return this.ipfs.add('dag',Buffer.from(JSON.stringify(envelope)));case 8:fileHash=_context5.sent;this.hashLog.push(fileHash);return _context5.abrupt("return",fileHash);case 11:case"end":return _context5.stop();}}},_callee5,this);}));function store(_x4){return _store.apply(this,arguments);}return store;}()},{key:"set",value:function(){var _set=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(tree,path,subtree){var plainObject,cryptoInfo,graphTree,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:plainObject=_args6.length>3&&_args6[3]!==undefined?_args6[3]:false;cryptoInfo=_args6.length>4?_args6[4]:undefined;if(cryptoInfo&&(0,_typeof2["default"])(subtree)==='object'){subtree.cryptoInfo=cryptoInfo;}_context6.next=5;return this.graph.set(tree,path,subtree,plainObject);case 5:graphTree=_context6.sent;return _context6.abrupt("return",graphTree);case 7:case"end":return _context6.stop();}}},_callee6,this);}));function set(_x5,_x6,_x7){return _set.apply(this,arguments);}return set;}()},{key:"remove",value:function(){var _remove=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(tree,path){var splitPath,node,toTraverse,currentNode,currentTree,linkedParent,pathInParent,splitPathInParent,nodeInParentPath,nodeNameInParentPath,cryptor,cryptoInfo,flushed;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:splitPath=path.split('/');node=splitPath[splitPath.length-1];toTraverse=splitPath.slice(0,-1);linkedParent=tree;case 4:if(!(currentNode=toTraverse.pop())){_context7.next=21;break;}_context7.next=7;return this.getLinkedGraph(tree,toTraverse.join('/'));case 7:currentTree=_context7.sent;if(!currentTree[currentNode]['/']){_context7.next=19;break;}if(!toTraverse.length){_context7.next=15;break;}_context7.next=12;return this.getLinkedGraph(tree,"".concat(toTraverse.join('/'),"/").concat(currentNode));case 12:linkedParent=_context7.sent;_context7.next=18;break;case 15:_context7.next=17;return this.getLinkedGraph(tree,currentNode);case 17:linkedParent=_context7.sent;case 18:return _context7.abrupt("break",21);case 19:_context7.next=4;break;case 21:if(toTraverse.length){pathInParent=path.replace("".concat(toTraverse.join('/'),"/"),'');splitPathInParent=pathInParent.split('/').slice(1,-1);}else{if(linkedParent===tree){splitPathInParent=path.split('/').slice(0,-1);}else{splitPathInParent=path.split('/').slice(1,-1);}}nodeInParentPath=linkedParent;while(nodeNameInParentPath=splitPathInParent.pop()){nodeInParentPath=nodeInParentPath[nodeNameInParentPath];}delete nodeInParentPath[node];if(!toTraverse.length){_context7.next=31;break;}_context7.next=28;return this.graph.set(tree,"".concat(toTraverse.join('/'),"/").concat(currentNode),linkedParent);case 28:return _context7.abrupt("return",_context7.sent);case 31:cryptor=this.cryptoProvider.getCryptorByCryptoAlgo(this.defaultCryptoAlgo);cryptoInfo=cryptor.getCryptoInfo(this.originator);_context7.next=35;return this.graph.flush(tree,this.dagOptions,this.dagOptions,{cryptoInfo:cryptoInfo});case 35:flushed=_context7.sent;return _context7.abrupt("return",this.getLinkedGraph(flushed));case 37:case"end":return _context7.stop();}}},_callee7,this);}));function remove(_x8,_x9){return _remove.apply(this,arguments);}return remove;}()}],[{key:"purgeCryptoInfo",value:function purgeCryptoInfo(toPurge){var _this2=this;Object.keys(toPurge).forEach(function(key){if(key==='cryptoInfo'){delete toPurge.cryptoInfo;}else if((0,_typeof2["default"])(toPurge[key])==='object'&&toPurge[key]!==null){_this2.purgeCryptoInfo(toPurge[key]);}});}}]);return Ipld;}(dbcp_1.Logger);exports.Ipld=Ipld;

}).call(this,require("buffer").Buffer)

},{"../dfs/ipfs":16,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"bs58":163,"buffer":1133,"ipld-graph-builder":309,"lodash":471}],309:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var assert=require('assert');var LockMap=require('lockmap');var Store=require('./datastore.js');var DEFAULTS={format:'dag-cbor',hashAlg:'sha2-256'};function isObject(obj){return(0,_typeof2["default"])(obj)==='object'&&obj!==null;}function clearObject(myObject){for(var member in myObject){delete myObject[member];}}module.exports=function(){function Graph(dag){(0,_classCallCheck2["default"])(this,Graph);assert(dag,'ipld-graph must have an instance of ipfs.dag');if(!(dag instanceof Store)){dag=new Store(dag);}this._dag=dag;this._loading=new LockMap();}(0,_createClass2["default"])(Graph,[{key:"_loadCID",value:function(){var _loadCID2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(node,link,dropOptions){var loadingOp,resolve,value;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:loadingOp=this._loading.get(link);if(!loadingOp){_context.next=5;break;}return _context.abrupt("return",loadingOp);case 5:resolve=this._loading.lock(link);_context.next=8;return this._dag.get(link,node,dropOptions);case 8:value=_context.sent;node['/']=value;this._loading["delete"](link);resolve();case 12:case"end":return _context.stop();}}},_callee,this);}));function _loadCID(_x,_x2,_x3){return _loadCID2.apply(this,arguments);}return _loadCID;}()},{key:"findUnsavedLeafNodes",value:function findUnsavedLeafNodes(node){var links=[];for(var name in node){var edge=node[name];if(isObject(edge)){if(edge['/']!==undefined&&!this._dag.constructor.isValidLink(edge['/'])){links.push(edge);}else{links=this.findUnsavedLeafNodes(edge).concat(links);}}}return links;}},{key:"set",value:function(){var _set=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(node,path,value,noLink){var last,_ref,foundVal,remainder,parent,pos,name,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_name;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:path=formatPath(path);if(!noLink){value={'/':value};}last=path.pop();_context2.next=5;return this._get(node,path);case 5:_ref=_context2.sent;foundVal=_ref.value;remainder=_ref.remainderPath;parent=_ref.parent;if(!isObject(foundVal)){pos=path.length-remainder.length-1;name=path.slice(pos,pos+1)[0];foundVal=parent[name]={};}_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=13;for(_iterator=remainder[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){_name=_step.value;foundVal=foundVal[_name]={};}_context2.next=21;break;case 17:_context2.prev=17;_context2.t0=_context2["catch"](13);_didIteratorError=true;_iteratorError=_context2.t0;case 21:_context2.prev=21;_context2.prev=22;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 24:_context2.prev=24;if(!_didIteratorError){_context2.next=27;break;}throw _iteratorError;case 27:return _context2.finish(24);case 28:return _context2.finish(21);case 29:foundVal[last]=value;return _context2.abrupt("return",node);case 31:case"end":return _context2.stop();}}},_callee2,this,[[13,17,21,29],[22,,24,28]]);}));function set(_x4,_x5,_x6,_x7){return _set.apply(this,arguments);}return set;}()},{key:"get",value:function(){var _get2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(node,path,dropOptions){var _ref2,value;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:path=formatPath(path);_context3.next=3;return this._get(node,path,dropOptions);case 3:_ref2=_context3.sent;value=_ref2.value;return _context3.abrupt("return",value);case 6:case"end":return _context3.stop();}}},_callee3,this);}));function get(_x8,_x9,_x10){return _get2.apply(this,arguments);}return get;}()},{key:"_get",value:function(){var _get3=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(node,path,dropOptions){var parent,link,name,edge;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:parent=node;path=path.slice(0);case 2:if(!1){_context4.next=22;break;}link=node['/'];if(!this._dag.constructor.isValidLink(link)){_context4.next=9;break;}_context4.next=7;return this._loadCID(node,link,dropOptions);case 7:_context4.next=20;break;case 9:if(link!==undefined){node=link;}if(path.length){_context4.next=12;break;}return _context4.abrupt("break",22);case 12:name=path.shift();edge=node[name];node=edge;if(!isObject(edge)){_context4.next=19;break;}parent=node;_context4.next=20;break;case 19:return _context4.abrupt("break",22);case 20:_context4.next=2;break;case 22:return _context4.abrupt("return",{value:node,remainderPath:path,parent:parent});case 23:case"end":return _context4.stop();}}},_callee4,this);}));function _get(_x11,_x12,_x13){return _get3.apply(this,arguments);}return _get;}()},{key:"tree",value:function(){var _tree=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(node){var levels,dropOptions,orignal,link,promises,name,edge,_args5=arguments;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:levels=_args5.length>1&&_args5[1]!==undefined?_args5[1]:1;dropOptions=_args5.length>2?_args5[2]:undefined;orignal=node;if(!node){_context5.next=15;break;}link=node['/'];if(!this._dag.constructor.isValidLink(link)){_context5.next=9;break;}_context5.next=8;return this._loadCID(node,link,dropOptions);case 8:node=node['/'];case 9:if(!(levels&&isObject(node))){_context5.next=15;break;}levels--;promises=[];for(name in node){edge=node[name];promises.push(this.tree(edge,levels,dropOptions));}_context5.next=15;return Promise.all(promises);case 15:return _context5.abrupt("return",orignal);case 16:case"end":return _context5.stop();}}},_callee5,this);}));function tree(_x14){return _tree.apply(this,arguments);}return tree;}()},{key:"_flush",value:function _flush(node,opts){var _this=this;var links=this.findUnsavedLeafNodes(node);var awaiting=links.map(function(link){return _this._flush(link,opts);});return Promise.all(awaiting).then(function(){var link=node['/'];var options=Object.assign({},opts,node.options);delete node.options;return _this._dag.put(link,options).then(function(buffer){node['/']=buffer;});});}},{key:"flush",value:function(){var _flush2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(node){var opts,mergedOptions,oldRoot,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:opts=_args6.length>1&&_args6[1]!==undefined?_args6[1]:{};if(this._dag.constructor.isValidLink(node['/'])){_context6.next=6;break;}mergedOptions=Object.assign({},DEFAULTS,opts);if(!node['/']){oldRoot=Object.assign({},node);clearObject(node);node['/']=oldRoot;}_context6.next=6;return this._flush(node,mergedOptions);case 6:return _context6.abrupt("return",node);case 7:case"end":return _context6.stop();}}},_callee6,this);}));function flush(_x15){return _flush2.apply(this,arguments);}return flush;}()}]);return Graph;}();function formatPath(path){if(!path.split){path=path.toString();}return path.split('/');}

},{"./datastore.js":308,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"assert":1100,"lockmap":318}],18:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var utils_1=require("../common/utils");var didRegEx=/^did:evan:(?:(testcore|core):)?(0x(?:[0-9a-fA-F]{40}|[0-9a-fA-F]{64}))$/;var DidResolver=function(_dbcp_1$Logger){(0,_inherits2["default"])(DidResolver,_dbcp_1$Logger);function DidResolver(options){var _this;(0,_classCallCheck2["default"])(this,DidResolver);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(DidResolver).call(this,options));_this.options=options;_this.cached={};return _this;}(0,_createClass2["default"])(DidResolver,[{key:"convertDidToIdentity",value:function(){var _convertDidToIdentity=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(did){var groups,_groups,_groups$,didEnvironment,identity,environment;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:groups=didRegEx.exec(did);if(groups){_context.next=3;break;}throw new Error("given did (\"".concat(did,"\") is no valid evan DID"));case 3:_groups=(0,_slicedToArray2["default"])(groups,3),_groups$=_groups[1],didEnvironment=_groups$===void 0?'core':_groups$,identity=_groups[2];_context.next=6;return this.getEnvironment();case 6:environment=_context.sent;if(!(environment==='testcore'&&didEnvironment!=='testcore'||environment==='core'&&didEnvironment!=='core')){_context.next=9;break;}throw new Error("DIDs environment \"".concat(environment," does not match ").concat(didEnvironment));case 9:return _context.abrupt("return",identity);case 10:case"end":return _context.stop();}}},_callee,this);}));function convertDidToIdentity(_x){return _convertDidToIdentity.apply(this,arguments);}return convertDidToIdentity;}()},{key:"convertIdentityToDid",value:function(){var _convertIdentityToDid=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(identity){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0="did:evan:";_context2.next=3;return this.getDidInfix();case 3:_context2.t1=_context2.sent;_context2.t2=identity;return _context2.abrupt("return",_context2.t0.concat.call(_context2.t0,_context2.t1).concat(_context2.t2));case 6:case"end":return _context2.stop();}}},_callee2,this);}));function convertIdentityToDid(_x2){return _convertIdentityToDid.apply(this,arguments);}return convertIdentityToDid;}()},{key:"getDidResolverDocumentTemplate",value:function(){var _getDidResolverDocumentTemplate=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(did,controllerDid,authenticationKey){var identity,_ref,_ref2,didInfix,publicKey;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(did&&controllerDid&&authenticationKey)){_context3.next=4;break;}return _context3.abrupt("return",JSON.parse("{\n        \"@context\": \"https://w3id.org/did/v1\",\n        \"id\": \"".concat(did,"\",\n        \"controller\": \"").concat(controllerDid,"\",\n        \"authentication\": [\n          \"").concat(authenticationKey,"\"\n        ]\n      }")));case 4:if(did||controllerDid||authenticationKey){_context3.next=15;break;}identity=this.options.signerIdentity.activeIdentity;_context3.next=8;return Promise.all([this.getDidInfix(),this.options.signerIdentity.getPublicKey(this.options.signerIdentity.underlyingAccount)]);case 8:_ref=_context3.sent;_ref2=(0,_slicedToArray2["default"])(_ref,2);didInfix=_ref2[0];publicKey=_ref2[1];return _context3.abrupt("return",JSON.parse("{\n        \"@context\": \"https://w3id.org/did/v1\",\n        \"id\": \"did:evan:".concat(didInfix).concat(identity,"\",\n        \"publicKey\": [{\n          \"id\": \"did:evan:").concat(didInfix).concat(identity,"#key-1\",\n          \"type\": [\"Secp256k1SignatureVerificationKey2018\", \"ERC725ManagementKey\"],\n          \"publicKeyHex\": \"").concat(publicKey,"\"\n        }],\n        \"authentication\": [\n          \"did:evan:").concat(didInfix).concat(identity,"#key-1\"\n        ]\n      }")));case 15:throw new Error('invalid config for template document');case 16:case"end":return _context3.stop();}}},_callee3,this);}));function getDidResolverDocumentTemplate(_x3,_x4,_x5){return _getDidResolverDocumentTemplate.apply(this,arguments);}return getDidResolverDocumentTemplate;}()},{key:"getDidDocument",value:function(){var _getDidDocument=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(did){var result,identity,documentHash;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:result=null;_context4.t0=this;if(!did){_context4.next=8;break;}_context4.next=5;return this.convertDidToIdentity(did);case 5:_context4.t1=_context4.sent;_context4.next=9;break;case 8:_context4.t1=this.options.signerIdentity.activeIdentity;case 9:_context4.t2=_context4.t1;identity=_context4.t0.padIdentity.call(_context4.t0,_context4.t2);_context4.t3=this.options.executor;_context4.next=14;return this.getRegistryContract();case 14:_context4.t4=_context4.sent;_context4.t5=identity;_context4.next=18;return _context4.t3.executeContractCall.call(_context4.t3,_context4.t4,'didDocuments',_context4.t5);case 18:documentHash=_context4.sent;if(!(documentHash!==utils_1.nullBytes32)){_context4.next=25;break;}_context4.t6=JSON;_context4.next=23;return this.options.dfs.get(documentHash);case 23:_context4.t7=_context4.sent;result=_context4.t6.parse.call(_context4.t6,_context4.t7);case 25:return _context4.abrupt("return",result);case 26:case"end":return _context4.stop();}}},_callee4,this);}));function getDidDocument(_x6){return _getDidDocument.apply(this,arguments);}return getDidDocument;}()},{key:"getService",value:function(){var _getService=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(did){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.getDidDocument(did);case 2:return _context5.abrupt("return",_context5.sent.service);case 3:case"end":return _context5.stop();}}},_callee5,this);}));function getService(_x7){return _getService.apply(this,arguments);}return getService;}()},{key:"setDidDocument",value:function(){var _setDidDocument=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(did,document){var identity,documentHash;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.t0=this;if(!did){_context6.next=7;break;}_context6.next=4;return this.convertDidToIdentity(did);case 4:_context6.t1=_context6.sent;_context6.next=8;break;case 7:_context6.t1=this.options.signerIdentity.activeIdentity;case 8:_context6.t2=_context6.t1;identity=_context6.t0.padIdentity.call(_context6.t0,_context6.t2);_context6.next=12;return this.options.dfs.add('did-document',Buffer.from(JSON.stringify(document),'utf8'));case 12:documentHash=_context6.sent;_context6.t3=this.options.executor;_context6.next=16;return this.getRegistryContract();case 16:_context6.t4=_context6.sent;_context6.t5={from:this.options.signerIdentity.activeIdentity};_context6.t6=identity;_context6.t7=documentHash;_context6.next=22;return _context6.t3.executeContractTransaction.call(_context6.t3,_context6.t4,'setDidDocument',_context6.t5,_context6.t6,_context6.t7);case 22:case"end":return _context6.stop();}}},_callee6,this);}));function setDidDocument(_x8,_x9){return _setDidDocument.apply(this,arguments);}return setDidDocument;}()},{key:"setService",value:function(){var _setService=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(did,service){return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.t0=this;_context7.t1=did;_context7.t2=Object;_context7.t3=Object;_context7.t4={};_context7.next=7;return this.getDidDocument(did);case 7:_context7.t5=_context7.sent;_context7.t6=_context7.t3.assign.call(_context7.t3,_context7.t4,_context7.t5);_context7.t7={service:service};_context7.t8=_context7.t2.assign.call(_context7.t2,_context7.t6,_context7.t7);_context7.next=13;return _context7.t0.setDidDocument.call(_context7.t0,_context7.t1,_context7.t8);case 13:case"end":return _context7.stop();}}},_callee7,this);}));function setService(_x10,_x11){return _setService.apply(this,arguments);}return setService;}()},{key:"getDidInfix",value:function(){var _getDidInfix=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(typeof this.cached.didInfix==='undefined')){_context8.next=10;break;}_context8.next=3;return this.getEnvironment();case 3:_context8.t0=_context8.sent;if(!(_context8.t0==='testcore')){_context8.next=8;break;}_context8.t1='testcore:';_context8.next=9;break;case 8:_context8.t1='';case 9:this.cached.didInfix=_context8.t1;case 10:return _context8.abrupt("return",this.cached.didInfix);case 11:case"end":return _context8.stop();}}},_callee8,this);}));function getDidInfix(){return _getDidInfix.apply(this,arguments);}return getDidInfix;}()},{key:"getEnvironment",value:function(){var _getEnvironment=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(){return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(this.cached.environment){_context9.next=4;break;}_context9.next=3;return utils_1.getEnvironment(this.options.web3);case 3:this.cached.environment=_context9.sent;case 4:return _context9.abrupt("return",this.cached.environment);case 5:case"end":return _context9.stop();}}},_callee9,this);}));function getEnvironment(){return _getEnvironment.apply(this,arguments);}return getEnvironment;}()},{key:"getRegistryContract",value:function(){var _getRegistryContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(){var didRegistryDomain,didRegistryAddress;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(this.cached.didRegistryContract){_context10.next=6;break;}didRegistryDomain=this.options.nameResolver.getDomainName(this.options.nameResolver.config.domains.didRegistry);_context10.next=4;return this.options.nameResolver.getAddress(didRegistryDomain);case 4:didRegistryAddress=_context10.sent;this.cached.didRegistryContract=this.options.contractLoader.loadContract('DidRegistry',didRegistryAddress);case 6:return _context10.abrupt("return",this.cached.didRegistryContract);case 7:case"end":return _context10.stop();}}},_callee10,this);}));function getRegistryContract(){return _getRegistryContract.apply(this,arguments);}return getRegistryContract;}()},{key:"padIdentity",value:function padIdentity(identity){return identity.length!==66?"0x".concat(identity.replace(/^0x/,'').padStart(64,'0')):identity;}}]);return DidResolver;}(dbcp_1.Logger);exports.DidResolver=DidResolver;

}).call(this,require("buffer").Buffer)

},{"../common/utils":1,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133}],19:[function(require,module,exports){
(function (global,Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var crypto=require("crypto-browserify");var dbcp_1=require("@evan.network/dbcp");function generateInitialVector(){return crypto.randomBytes(16);}var AesBlob=function(_dbcp_1$Logger){(0,_inherits2["default"])(AesBlob,_dbcp_1$Logger);function AesBlob(options){var _this;(0,_classCallCheck2["default"])(this,AesBlob);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(AesBlob).call(this,options));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.algorithm='aes-256-cbc';_this.webCryptoAlgo='AES-CBC';_this.options=Object.assign({},AesBlob.defaultOptions,options||{});return _this;}(0,_createClass2["default"])(AesBlob,[{key:"stringToArrayBuffer",value:function stringToArrayBuffer(str){var len=str.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++){bytes[i]=str.charCodeAt(i);}return bytes.buffer;}},{key:"getCryptoInfo",value:function getCryptoInfo(originator){var ret=Object.assign({originator:originator},this.options);delete ret.dfs;return ret;}},{key:"generateKey",value:function(){var _generateKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var _this2=this;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){crypto.randomBytes(_this2.options.keyLength/8,function(err,buf){if(err){reject(err);}else{var hexString=buf.toString('hex');resolve(hexString);}});}));case 1:case"end":return _context.stop();}}},_callee);}));function generateKey(){return _generateKey.apply(this,arguments);}return generateKey;}()},{key:"decryptBrowser",value:function(){var _decryptBrowser=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(algorithm,buffer,decryptKey,iv){var key,decrypted;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return global.crypto.subtle.importKey('raw',decryptKey,{name:algorithm,length:256},false,['decrypt']);case 2:key=_context2.sent;_context2.next=5;return global.crypto.subtle.decrypt({name:algorithm,iv:iv},key,buffer);case 5:decrypted=_context2.sent;return _context2.abrupt("return",Buffer.from(decrypted));case 7:case"end":return _context2.stop();}}},_callee2);}));function decryptBrowser(_x,_x2,_x3,_x4){return _decryptBrowser.apply(this,arguments);}return decryptBrowser;}()},{key:"encryptBrowser",value:function(){var _encryptBrowser=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(algorithm,buffer,encryptionKey,iv){var key,encrypted;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return global.crypto.subtle.importKey('raw',encryptionKey,{name:algorithm,length:256},false,['encrypt']);case 2:key=_context3.sent;_context3.next=5;return global.crypto.subtle.encrypt({name:algorithm,iv:iv},key,buffer);case 5:encrypted=_context3.sent;return _context3.abrupt("return",Buffer.from(encrypted));case 7:case"end":return _context3.stop();}}},_callee3);}));function encryptBrowser(_x5,_x6,_x7,_x8){return _encryptBrowser.apply(this,arguments);}return encryptBrowser;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(message,options){var encryptedWrapperMessage,initialVector,cipher,files,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,blob,encrypted,encryptedWithIv,stateMd5,hashes,i,_encrypted,_encryptedWithIv,_stateMd,hash,wrapperMessage,wrapperDecipher;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;if(options.key){_context4.next=3;break;}throw new Error('no key given');case 3:initialVector=generateInitialVector();cipher=crypto.createCipheriv(this.algorithm,Buffer.from(options.key,'hex'),initialVector);if(!Array.isArray(message)){_context4.next=48;break;}files=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context4.prev=10;_iterator=message[Symbol.iterator]();case 12:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context4.next=28;break;}blob=_step.value;encrypted=void 0;if(!(global.crypto&&global.crypto.subtle)){_context4.next=21;break;}_context4.next=18;return this.encryptBrowser(this.webCryptoAlgo,Buffer.from(blob.file),Buffer.from(options.key,'hex'),initialVector);case 18:encrypted=_context4.sent;_context4.next=22;break;case 21:encrypted=Buffer.concat([cipher.update(Buffer.from(blob.file)),cipher["final"]()]);case 22:encryptedWithIv=Buffer.concat([initialVector,encrypted]);stateMd5=crypto.createHash('md5').update(encryptedWithIv).digest('hex');files.push({path:stateMd5,content:encryptedWithIv});case 25:_iteratorNormalCompletion=true;_context4.next=12;break;case 28:_context4.next=34;break;case 30:_context4.prev=30;_context4.t0=_context4["catch"](10);_didIteratorError=true;_iteratorError=_context4.t0;case 34:_context4.prev=34;_context4.prev=35;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 37:_context4.prev=37;if(!_didIteratorError){_context4.next=40;break;}throw _iteratorError;case 40:return _context4.finish(37);case 41:return _context4.finish(34);case 42:_context4.next=44;return this.options.dfs.addMultiple(files);case 44:hashes=_context4.sent;for(i=0;i<message.length;i++){message[i].file=hashes[i];}_context4.next=61;break;case 48:if(!(global.crypto&&global.crypto.subtle)){_context4.next=54;break;}_context4.next=51;return this.encryptBrowser(this.webCryptoAlgo,Buffer.from(message.file),Buffer.from(options.key,'hex'),initialVector);case 51:_encrypted=_context4.sent;_context4.next=55;break;case 54:_encrypted=Buffer.concat([cipher.update(Buffer.from(message.file)),cipher["final"]()]);case 55:_encryptedWithIv=Buffer.concat([initialVector,_encrypted]);_stateMd=crypto.createHash('md5').update(_encryptedWithIv).digest('hex');_context4.next=59;return this.options.dfs.add(_stateMd,_encryptedWithIv);case 59:hash=_context4.sent;message.file=hash;case 61:wrapperMessage=Buffer.from(JSON.stringify(message),this.encodingUnencrypted);if(!(global.crypto&&global.crypto.subtle)){_context4.next=68;break;}_context4.next=65;return this.encryptBrowser(this.webCryptoAlgo,Buffer.from(wrapperMessage),Buffer.from(options.key,'hex'),initialVector);case 65:encryptedWrapperMessage=_context4.sent;_context4.next=70;break;case 68:wrapperDecipher=crypto.createCipheriv(this.algorithm,Buffer.from(options.key,'hex'),initialVector);encryptedWrapperMessage=Buffer.concat([wrapperDecipher.update(wrapperMessage),wrapperDecipher["final"]()]);case 70:return _context4.abrupt("return",Promise.resolve(Buffer.concat([initialVector,encryptedWrapperMessage])));case 73:_context4.prev=73;_context4.t1=_context4["catch"](0);this.log("could not encrypt; ".concat(_context4.t1.message||_context4.t1),'error');return _context4.abrupt("return",Promise.reject(_context4.t1));case 77:case"end":return _context4.stop();}}},_callee4,this,[[0,73],[10,30,34,42],[35,,37,41]]);}));function encrypt(_x9,_x10){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(message,options){var initialVector,encrypted,decrypted,decipher,wrapper,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,blob,ipfsFile,file,initialVectorFile,encryptedFile,fileDecipher,_ipfsFile,_initialVectorFile,_encryptedFile,_file,_fileDecipher;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;if(options.key){_context5.next=3;break;}throw new Error('no key given');case 3:initialVector=message.slice(0,16);encrypted=message.slice(16);if(!(global.crypto&&global.crypto.subtle)){_context5.next=11;break;}_context5.next=8;return this.decryptBrowser(this.webCryptoAlgo,encrypted,Buffer.from(options.key,'hex'),initialVector);case 8:decrypted=_context5.sent;_context5.next=13;break;case 11:decipher=crypto.createDecipheriv(this.algorithm,Buffer.from(options.key,'hex'),initialVector);decrypted=Buffer.concat([decipher.update(encrypted),decipher["final"]()]);case 13:wrapper=JSON.parse(decrypted.toString(this.encodingUnencrypted));if(!Array.isArray(wrapper)){_context5.next=57;break;}_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context5.prev=18;_iterator2=wrapper[Symbol.iterator]();case 20:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context5.next=41;break;}blob=_step2.value;_context5.next=24;return this.options.dfs.get(blob.file,true);case 24:ipfsFile=_context5.sent;file=Buffer.from('');initialVectorFile=ipfsFile.slice(0,16);encryptedFile=ipfsFile.slice(16);if(!(global.crypto&&global.crypto.subtle)){_context5.next=34;break;}_context5.next=31;return this.decryptBrowser(this.webCryptoAlgo,encryptedFile,Buffer.from(options.key,'hex'),initialVectorFile);case 31:file=_context5.sent;_context5.next=37;break;case 34:fileDecipher=crypto.createDecipheriv(this.algorithm,Buffer.from(options.key,'hex'),initialVectorFile);file=Buffer.concat([file,fileDecipher.update(encryptedFile)]);file=Buffer.concat([file,fileDecipher["final"]()]);case 37:blob.file=file;case 38:_iteratorNormalCompletion2=true;_context5.next=20;break;case 41:_context5.next=47;break;case 43:_context5.prev=43;_context5.t0=_context5["catch"](18);_didIteratorError2=true;_iteratorError2=_context5.t0;case 47:_context5.prev=47;_context5.prev=48;if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}case 50:_context5.prev=50;if(!_didIteratorError2){_context5.next=53;break;}throw _iteratorError2;case 53:return _context5.finish(50);case 54:return _context5.finish(47);case 55:_context5.next=73;break;case 57:_context5.next=59;return this.options.dfs.get(wrapper.file,true);case 59:_ipfsFile=_context5.sent;_initialVectorFile=_ipfsFile.slice(0,16);_encryptedFile=_ipfsFile.slice(16);_file=Buffer.from('');if(!(global.crypto&&global.crypto.subtle)){_context5.next=69;break;}_context5.next=66;return this.decryptBrowser(this.webCryptoAlgo,_encryptedFile,Buffer.from(options.key,'hex'),_initialVectorFile);case 66:_file=_context5.sent;_context5.next=72;break;case 69:_fileDecipher=crypto.createDecipheriv(this.algorithm,Buffer.from(options.key,'hex'),_initialVectorFile);_file=Buffer.concat([_file,_fileDecipher.update(_encryptedFile)]);_file=Buffer.concat([_file,_fileDecipher["final"]()]);case 72:wrapper.file=_file;case 73:return _context5.abrupt("return",Promise.resolve(wrapper));case 76:_context5.prev=76;_context5.t1=_context5["catch"](0);this.log("could not decrypt; ".concat(_context5.t1.message||_context5.t1),'error');return _context5.abrupt("return",Promise.reject(_context5.t1));case 80:case"end":return _context5.stop();}}},_callee5,this,[[0,76],[18,43,47,55],[48,,50,54]]);}));function decrypt(_x11,_x12){return _decrypt.apply(this,arguments);}return decrypt;}()}]);return AesBlob;}(dbcp_1.Logger);exports.AesBlob=AesBlob;AesBlob.defaultOptions={keyLength:256,algorithm:'aes-blob'};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"crypto-browserify":177}],177:[function(require,module,exports){
'use strict';exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require('randombytes');exports.createHash=exports.Hash=require('create-hash');exports.createHmac=exports.Hmac=require('create-hmac');var algos=require('browserify-sign/algos');var algoKeys=Object.keys(algos);var hashes=['sha1','sha224','sha256','sha384','sha512','md5','rmd160'].concat(algoKeys);exports.getHashes=function(){return hashes;};var p=require('pbkdf2');exports.pbkdf2=p.pbkdf2;exports.pbkdf2Sync=p.pbkdf2Sync;var aes=require('browserify-cipher');exports.Cipher=aes.Cipher;exports.createCipher=aes.createCipher;exports.Cipheriv=aes.Cipheriv;exports.createCipheriv=aes.createCipheriv;exports.Decipher=aes.Decipher;exports.createDecipher=aes.createDecipher;exports.Decipheriv=aes.Decipheriv;exports.createDecipheriv=aes.createDecipheriv;exports.getCiphers=aes.getCiphers;exports.listCiphers=aes.listCiphers;var dh=require('diffie-hellman');exports.DiffieHellmanGroup=dh.DiffieHellmanGroup;exports.createDiffieHellmanGroup=dh.createDiffieHellmanGroup;exports.getDiffieHellman=dh.getDiffieHellman;exports.createDiffieHellman=dh.createDiffieHellman;exports.DiffieHellman=dh.DiffieHellman;var sign=require('browserify-sign');exports.createSign=sign.createSign;exports.Sign=sign.Sign;exports.createVerify=sign.createVerify;exports.Verify=sign.Verify;exports.createECDH=require('create-ecdh');var publicEncrypt=require('public-encrypt');exports.publicEncrypt=publicEncrypt.publicEncrypt;exports.privateEncrypt=publicEncrypt.privateEncrypt;exports.publicDecrypt=publicEncrypt.publicDecrypt;exports.privateDecrypt=publicEncrypt.privateDecrypt;var rf=require('randomfill');exports.randomFill=rf.randomFill;exports.randomFillSync=rf.randomFillSync;exports.createCredentials=function(){throw new Error(['sorry, createCredentials is not implemented yet','we accept pull requests','https://github.com/crypto-browserify/crypto-browserify'].join('\n'));};exports.constants={'DH_CHECK_P_NOT_SAFE_PRIME':2,'DH_CHECK_P_NOT_PRIME':1,'DH_UNABLE_TO_CHECK_GENERATOR':4,'DH_NOT_SUITABLE_GENERATOR':8,'NPN_ENABLED':1,'ALPN_ENABLED':1,'RSA_PKCS1_PADDING':1,'RSA_SSLV23_PADDING':2,'RSA_NO_PADDING':3,'RSA_PKCS1_OAEP_PADDING':4,'RSA_X931_PADDING':5,'RSA_PKCS1_PSS_PADDING':6,'POINT_CONVERSION_COMPRESSED':2,'POINT_CONVERSION_UNCOMPRESSED':4,'POINT_CONVERSION_HYBRID':6};

},{"browserify-cipher":151,"browserify-sign":160,"browserify-sign/algos":157,"create-ecdh":172,"create-hash":173,"create-hmac":175,"diffie-hellman":218,"pbkdf2":518,"public-encrypt":525,"randombytes":532,"randomfill":533}],20:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var crypto=require("crypto-browserify");var dbcp_1=require("@evan.network/dbcp");var AesEcb=function(_dbcp_1$Logger){(0,_inherits2["default"])(AesEcb,_dbcp_1$Logger);function AesEcb(options){var _this;(0,_classCallCheck2["default"])(this,AesEcb);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(AesEcb).call(this,options));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.options=Object.assign({},AesEcb.defaultOptions,options||{});return _this;}(0,_createClass2["default"])(AesEcb,[{key:"stringToArrayBuffer",value:function stringToArrayBuffer(str){var len=str.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++){bytes[i]=str.charCodeAt(i);}return bytes.buffer;}},{key:"getCryptoInfo",value:function getCryptoInfo(originator){return Object.assign({originator:originator},this.options);}},{key:"generateKey",value:function(){var _generateKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var _this2=this;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){crypto.randomBytes(_this2.options.keyLength/8,function(err,buf){if(err){reject(err);}else{var hexString=buf.toString('hex');resolve(hexString);}});}));case 1:case"end":return _context.stop();}}},_callee);}));function generateKey(){return _generateKey.apply(this,arguments);}return generateKey;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(message,options){var computedKey,cipher,encrypted;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(options.key){_context2.next=3;break;}throw new Error('no key given');case 3:computedKey=this.computeSecret(Buffer.from(options.key,'hex'));cipher=crypto.createCipheriv(this.options.algorithm,Buffer.from(computedKey,'hex'),'');cipher.setAutoPadding(false);encrypted=Buffer.concat([cipher.update(message),cipher["final"]()]);return _context2.abrupt("return",Promise.resolve(encrypted));case 10:_context2.prev=10;_context2.t0=_context2["catch"](0);this.log("could not encrypt; ".concat(_context2.t0.message||_context2.t0),'error');return _context2.abrupt("return",Promise.reject(_context2.t0));case 14:case"end":return _context2.stop();}}},_callee2,this,[[0,10]]);}));function encrypt(_x,_x2){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(message,options){var computedKey,decipher,decrypted;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(options.key){_context3.next=3;break;}throw new Error('no key given');case 3:computedKey=this.computeSecret(Buffer.from(options.key,'hex'));decipher=crypto.createDecipheriv(this.options.algorithm,Buffer.from(computedKey,'hex'),'');decipher.setAutoPadding(false);decrypted=Buffer.concat([decipher.update(message),decipher["final"]()]);return _context3.abrupt("return",Promise.resolve(decrypted));case 10:_context3.prev=10;_context3.t0=_context3["catch"](0);this.log("could not decrypt; ".concat(_context3.t0.message||_context3.t0),'error');return _context3.abrupt("return",Promise.reject(_context3.t0));case 14:case"end":return _context3.stop();}}},_callee3,this,[[0,10]]);}));function decrypt(_x3,_x4){return _decrypt.apply(this,arguments);}return decrypt;}()},{key:"computeSecret",value:function computeSecret(passphrase){var nkey=32;var niv=0;for(var key='',iv='',p='';;){var h=crypto.createHash('md5');h.update(p,'hex');h.update(passphrase);p=h.digest('hex');var n=void 0,i=0;n=Math.min(p.length-i,2*nkey);nkey-=n/2,key+=p.slice(i,i+n),i+=n;n=Math.min(p.length-i,2*niv);niv-=n/2,iv+=p.slice(i,i+n),i+=n;if(nkey+niv===0){return key;}}}}]);return AesEcb;}(dbcp_1.Logger);exports.AesEcb=AesEcb;AesEcb.defaultOptions={keyLength:256,algorithm:'aes-256-ecb'};

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"crypto-browserify":177}],21:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var crypto=require("crypto-browserify");var dbcp_1=require("@evan.network/dbcp");function generateInitialVector(){return crypto.randomBytes(16);}var Aes=function(_dbcp_1$Logger){(0,_inherits2["default"])(Aes,_dbcp_1$Logger);function Aes(options){var _this;(0,_classCallCheck2["default"])(this,Aes);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Aes).call(this,options));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.options=Object.assign({},Aes.defaultOptions,options||{});return _this;}(0,_createClass2["default"])(Aes,[{key:"stringToArrayBuffer",value:function stringToArrayBuffer(str){var len=str.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++){bytes[i]=str.charCodeAt(i);}return bytes.buffer;}},{key:"getCryptoInfo",value:function getCryptoInfo(originator){return Object.assign({originator:originator},this.options);}},{key:"generateKey",value:function(){var _generateKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var _this2=this;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){crypto.randomBytes(_this2.options.keyLength/8,function(err,buf){if(err){reject(err);}else{var hexString=buf.toString('hex');resolve(hexString);}});}));case 1:case"end":return _context.stop();}}},_callee);}));function generateKey(){return _generateKey.apply(this,arguments);}return generateKey;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(message,options){var initialVector,bufferedMessage,cipher,encrypted;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(options.key){_context2.next=3;break;}throw new Error('no key given');case 3:initialVector=generateInitialVector();bufferedMessage=Buffer.from(JSON.stringify(message),this.encodingUnencrypted);cipher=crypto.createCipheriv(this.options.algorithm,Buffer.from(options.key,'hex'),initialVector);encrypted=Buffer.concat([cipher.update(bufferedMessage),cipher["final"]()]);return _context2.abrupt("return",Promise.resolve(Buffer.concat([initialVector,encrypted])));case 10:_context2.prev=10;_context2.t0=_context2["catch"](0);this.log("could not encrypt; ".concat(_context2.t0.message||_context2.t0),'error');return _context2.abrupt("return",Promise.reject(_context2.t0));case 14:case"end":return _context2.stop();}}},_callee2,this,[[0,10]]);}));function encrypt(_x,_x2){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(message,options){var initialVector,encrypted,decipher,decrypted,result;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(options.key){_context3.next=3;break;}throw new Error('no key given');case 3:initialVector=message.slice(0,16);encrypted=message.slice(16);decipher=crypto.createDecipheriv(this.options.algorithm,Buffer.from(options.key,'hex'),initialVector);decrypted=Buffer.concat([decipher.update(encrypted),decipher["final"]()]);result=JSON.parse(decrypted.toString(this.encodingUnencrypted));return _context3.abrupt("return",Promise.resolve(result));case 11:_context3.prev=11;_context3.t0=_context3["catch"](0);this.log("could not decrypt; ".concat(_context3.t0.message||_context3.t0),'error');return _context3.abrupt("return",Promise.reject(_context3.t0));case 15:case"end":return _context3.stop();}}},_callee3,this,[[0,11]]);}));function decrypt(_x3,_x4){return _decrypt.apply(this,arguments);}return decrypt;}()}]);return Aes;}(dbcp_1.Logger);exports.Aes=Aes;Aes.defaultOptions={keyLength:256,algorithm:'aes-256-cbc'};

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"crypto-browserify":177}],22:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var Dbcp=require("@evan.network/dbcp");var CryptoProvider=function(_Dbcp$CryptoProvider){(0,_inherits2["default"])(CryptoProvider,_Dbcp$CryptoProvider);function CryptoProvider(cryptors){(0,_classCallCheck2["default"])(this,CryptoProvider);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(CryptoProvider).call(this,cryptors));}(0,_createClass2["default"])(CryptoProvider,[{key:"getCryptorByCryptoInfo",value:function getCryptorByCryptoInfo(info){switch(info.algorithm){case'aes-256-cbc':return this.cryptors.aes;case'unencrypted':return this.cryptors.unencrypted;case'aes-blob':return this.cryptors.aesBlob;default:throw new Error("algorithm unsupported ".concat(info.algorithm));}}}]);return CryptoProvider;}(Dbcp.CryptoProvider);exports.CryptoProvider=CryptoProvider;

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@evan.network/dbcp":726}],23:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var EncryptionWrapperCryptorType;(function(EncryptionWrapperCryptorType){EncryptionWrapperCryptorType["Content"]="aes-256-cbc";EncryptionWrapperCryptorType["File"]="aes-blob";EncryptionWrapperCryptorType["Unencrypted"]="unencrypted";})(EncryptionWrapperCryptorType=exports.EncryptionWrapperCryptorType||(exports.EncryptionWrapperCryptorType={}));var EncryptionWrapperKeyType;(function(EncryptionWrapperKeyType){EncryptionWrapperKeyType["Custom"]="custom";EncryptionWrapperKeyType["Profile"]="profile";EncryptionWrapperKeyType["Sharing"]="sharing";})(EncryptionWrapperKeyType=exports.EncryptionWrapperKeyType||(exports.EncryptionWrapperKeyType={}));var EncryptionWrapper=function(_dbcp_1$Logger){(0,_inherits2["default"])(EncryptionWrapper,_dbcp_1$Logger);function EncryptionWrapper(options){var _this;(0,_classCallCheck2["default"])(this,EncryptionWrapper);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(EncryptionWrapper).call(this,options));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.options=Object.assign({},options);return _this;}(0,_createClass2["default"])(EncryptionWrapper,[{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(toDecrypt,artifacts){var _ref,_ref2,cryptor,key,decrypted;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([this.options.cryptoProvider.getCryptorByCryptoInfo(toDecrypt.cryptoInfo),this.getKey(toDecrypt.cryptoInfo,artifacts)]);case 2:_ref=_context.sent;_ref2=(0,_slicedToArray2["default"])(_ref,2);cryptor=_ref2[0];key=_ref2[1];_context.next=8;return cryptor.decrypt(Buffer.from(toDecrypt["private"],this.encodingEncrypted),{key:key});case 8:decrypted=_context.sent;return _context.abrupt("return",decrypted);case 10:case"end":return _context.stop();}}},_callee,this);}));function decrypt(_x,_x2){return _decrypt.apply(this,arguments);}return decrypt;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(toEncrypt,cryptoInfo,artifacts){var _ref3,_ref4,cryptor,key,encryptedBuffer,encrypted,envelope;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all([this.options.cryptoProvider.getCryptorByCryptoInfo(cryptoInfo),this.getKey(cryptoInfo,artifacts)]);case 2:_ref3=_context2.sent;_ref4=(0,_slicedToArray2["default"])(_ref3,2);cryptor=_ref4[0];key=_ref4[1];if(cryptor){_context2.next=8;break;}throw new Error("no cryptor found for cryptoInfo \"".concat(cryptoInfo,"\""));case 8:if(key){_context2.next=10;break;}throw new Error("no key found for cryptoInfo \"".concat(cryptoInfo,"\""));case 10:_context2.next=12;return cryptor.encrypt(toEncrypt,{key:key});case 12:encryptedBuffer=_context2.sent;encrypted=encryptedBuffer.toString(this.encodingEncrypted);envelope={"private":encrypted,cryptoInfo:Object.assign({},cryptoInfo)};return _context2.abrupt("return",envelope);case 16:case"end":return _context2.stop();}}},_callee2,this);}));function encrypt(_x3,_x4,_x5){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"generateKey",value:function(){var _generateKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(cryptoInfo){var cryptor;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cryptor=this.options.cryptoProvider.getCryptorByCryptoInfo(cryptoInfo);return _context3.abrupt("return",cryptor.generateKey());case 2:case"end":return _context3.stop();}}},_callee3,this);}));function generateKey(_x6){return _generateKey.apply(this,arguments);}return generateKey;}()},{key:"getCryptoInfo",value:function(){var _getCryptoInfo=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(keyContext,keyType){var cryptorType,artifacts,sharingContractId,sharingId,originator,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cryptorType=_args4.length>2&&_args4[2]!==undefined?_args4[2]:EncryptionWrapperCryptorType.Content;artifacts=_args4.length>3?_args4[3]:undefined;_context4.t0=keyType;_context4.next=_context4.t0===EncryptionWrapperKeyType.Custom?5:_context4.t0===EncryptionWrapperKeyType.Profile?5:_context4.t0===EncryptionWrapperKeyType.Sharing?11:20;break;case 5:_context4.t1=cryptorType;_context4.next=8;return this.options.web3.eth.getBlockNumber();case 8:_context4.t2=_context4.sent;_context4.t3="".concat(keyType,":").concat(keyContext);return _context4.abrupt("return",{algorithm:_context4.t1,block:_context4.t2,originator:_context4.t3});case 11:this.checkProperties(artifacts,['sharingContractId']);sharingContractId=artifacts.sharingContractId,sharingId=artifacts.sharingId;originator=typeof sharingId!=='undefined'?"".concat(keyType,":").concat(sharingContractId,":").concat(sharingId):"".concat(keyType,":").concat(sharingContractId);_context4.t4=cryptorType;_context4.next=17;return this.options.web3.eth.getBlockNumber();case 17:_context4.t5=_context4.sent;_context4.t6=originator;return _context4.abrupt("return",{algorithm:_context4.t4,block:_context4.t5,originator:_context4.t6});case 20:throw new Error("unknown key type \"".concat(keyType,"\""));case 21:case"end":return _context4.stop();}}},_callee4,this);}));function getCryptoInfo(_x7,_x8){return _getCryptoInfo.apply(this,arguments);}return getCryptoInfo;}()},{key:"getKey",value:function(){var _getKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(cryptoInfo,artifacts){var result,split,_split$slice,_split$slice2,contractid,_split$slice2$,sharingId,accountId,_artifacts$propertyNa,propertyName,key;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:split=cryptoInfo.originator.split(':');if(!(split.length<2)){_context5.next=3;break;}throw new Error("unsupported originator \"".concat(cryptoInfo.originator,"\" at crypto info"));case 3:_context5.t0=split[0];_context5.next=_context5.t0==='profile'?6:_context5.t0==='sharing'?10:_context5.t0==='custom'?17:21;break;case 6:_context5.next=8;return this.options.profile.getEncryptionKey(split[1]);case 8:result=_context5.sent;return _context5.abrupt("break",22);case 10:this.checkProperties(artifacts,['accountId']);_split$slice=split.slice(1),_split$slice2=(0,_slicedToArray2["default"])(_split$slice,2),contractid=_split$slice2[0],_split$slice2$=_split$slice2[1],sharingId=_split$slice2$===void 0?null:_split$slice2$;accountId=artifacts.accountId,_artifacts$propertyNa=artifacts.propertyName,propertyName=_artifacts$propertyNa===void 0?'*':_artifacts$propertyNa;_context5.next=15;return this.options.sharing.getKey(contractid,accountId,propertyName,cryptoInfo.block||0,sharingId);case 15:result=_context5.sent;return _context5.abrupt("break",22);case 17:this.checkProperties(artifacts,['key']);key=artifacts.key;result=key;return _context5.abrupt("break",22);case 21:throw new Error("unknown key type \"".concat(split[0],"\""));case 22:if(result){_context5.next=24;break;}throw new Error("missing key for cryptoInfo \"".concat(JSON.stringify(cryptoInfo),"\""));case 24:return _context5.abrupt("return",result);case 25:case"end":return _context5.stop();}}},_callee5,this);}));function getKey(_x9,_x10){return _getKey.apply(this,arguments);}return getKey;}()},{key:"storeKey",value:function(){var _storeKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(cryptoInfo,key,artifacts){var split,context,_split$slice3,_split$slice4,contractid,_split$slice4$,sharingId;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:split=cryptoInfo.originator.split(':');if(!(split.length<2)){_context6.next=3;break;}throw new Error("unsupported originator \"".concat(cryptoInfo.originator,"\" at crypto info"));case 3:_context6.t0=split[0];_context6.next=_context6.t0==='profile'?6:_context6.t0==='sharing'?14:19;break;case 6:context=split[1];_context6.next=9;return this.options.profile.loadForAccount(this.options.profile.treeLabels.encryptionKeys);case 9:_context6.next=11;return this.options.profile.setEncryptionKey(context,key);case 11:_context6.next=13;return this.options.profile.storeForAccount(this.options.profile.treeLabels.encryptionKeys);case 13:return _context6.abrupt("break",20);case 14:this.checkProperties(artifacts,['accountId']);_split$slice3=split.slice(1),_split$slice4=(0,_slicedToArray2["default"])(_split$slice3,2),contractid=_split$slice4[0],_split$slice4$=_split$slice4[1],sharingId=_split$slice4$===void 0?null:_split$slice4$;_context6.next=18;return this.options.sharing.addSharing(contractid,artifacts.accountId,artifacts.receiver||artifacts.accountId,'*',0,key,null,false,sharingId);case 18:return _context6.abrupt("break",20);case 19:throw new Error("unknown key type \"".concat(split[0],"\""));case 20:case"end":return _context6.stop();}}},_callee6,this);}));function storeKey(_x11,_x12,_x13){return _storeKey.apply(this,arguments);}return storeKey;}()},{key:"checkProperties",value:function checkProperties(artifacts,properties){if(artifacts){var missing=properties.filter(function(property){return!artifacts.hasOwnProperty(property);});if(missing.length){throw new Error(['artifacts is missing ',missing.length===1?'property: ':'properties: ',missing.join(', ')].join(''));}}}}]);return EncryptionWrapper;}(dbcp_1.Logger);exports.EncryptionWrapper=EncryptionWrapper;EncryptionWrapper.defaultOptions={keyLength:256,algorithm:'aes-blob'};

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133}],34:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var company_1=require("./company");exports.company=company_1["default"];var device_1=require("./device");exports.device=device_1["default"];var user_1=require("./user");exports.user=user_1["default"];

},{"./company":32,"./device":33,"./user":35}],37:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var Dbcp=require("@evan.network/dbcp");var Description=function(_Dbcp$Description){(0,_inherits2["default"])(Description,_Dbcp$Description);function Description(options){var _this;(0,_classCallCheck2["default"])(this,Description);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Description).call(this,options));_this.sharing=options.sharing;return _this;}(0,_createClass2["default"])(Description,[{key:"getDescriptionFromContract",value:function(){var _getDescriptionFromContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contractAddress,accountId){var result,contract,hash,content,cryptor,sharingKey,key,privateData;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:result=null;contract=this.contractLoader.loadContract('Described',contractAddress);_context.next=4;return this.executor.executeContractCall(contract,'contractDescription');case 4:hash=_context.sent;if(!(hash&&hash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context.next=31;break;}_context.next=8;return this.dfs.get(hash);case 8:_context.t0=this.encodingEnvelope;content=_context.sent.toString(_context.t0);result=JSON.parse(content);if(!(result["private"]&&result.cryptoInfo)){_context.next=31;break;}if(!this.sharing){_context.next=30;break;}_context.prev=13;cryptor=this.cryptoProvider.getCryptorByCryptoInfo(result.cryptoInfo);_context.next=17;return this.sharing.getKey(contractAddress,accountId,'*',result.cryptoInfo.block);case 17:sharingKey=_context.sent;key=sharingKey;_context.next=21;return cryptor.decrypt(Buffer.from(result["private"],this.encodingEncrypted),{key:key});case 21:privateData=_context.sent;result["private"]=privateData;_context.next=28;break;case 25:_context.prev=25;_context.t1=_context["catch"](13);result["private"]=new Error('wrong_key');case 28:_context.next=31;break;case 30:result["private"]=new Error('profile_sharing_missing');case 31:return _context.abrupt("return",result);case 32:case"end":return _context.stop();}}},_callee,this,[[13,25]]);}));function getDescriptionFromContract(_x,_x2){return _getDescriptionFromContract.apply(this,arguments);}return getDescriptionFromContract;}()},{key:"setDescriptionToContract",value:function(){var _setDescriptionToContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(contractAddress,envelope,accountId){var hash,content,validation,cryptor,blockNr,sharingKey,key,encrypted,contract;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeof envelope==='string')){_context2.next=4;break;}hash=envelope;_context2.next=26;break;case 4:content=Object.assign({},envelope);if(!content["public"].dbcpVersion){this.log('dbcpVersion not set, using fallback of version 1','warning');content["public"].dbcpVersion=content["public"].dbcpVersion||1;}validation=this.validateDescription(content);if(!(validation!==true)){_context2.next=9;break;}throw new Error("description invalid: ".concat(JSON.stringify(validation)));case 9:if(!(content["private"]&&content.cryptoInfo)){_context2.next=23;break;}cryptor=this.cryptoProvider.getCryptorByCryptoInfo(content.cryptoInfo);_context2.next=13;return this.web3.eth.getBlockNumber();case 13:blockNr=_context2.sent;_context2.next=16;return this.sharing.getKey(contractAddress,accountId,'*',blockNr);case 16:sharingKey=_context2.sent;key=sharingKey;_context2.next=20;return cryptor.encrypt(content["private"],{key:key});case 20:encrypted=_context2.sent;content["private"]=encrypted.toString(this.encodingEncrypted);content.cryptoInfo.block=blockNr;case 23:_context2.next=25;return this.dfs.add('description',Buffer.from(JSON.stringify(content),this.encodingEnvelope));case 25:hash=_context2.sent;case 26:contract=this.contractLoader.loadContract('Described',contractAddress);_context2.next=29;return this.executor.executeContractTransaction(contract,'setContractDescription',{from:accountId,gas:200000},hash);case 29:case"end":return _context2.stop();}}},_callee2,this);}));function setDescriptionToContract(_x3,_x4,_x5){return _setDescriptionToContract.apply(this,arguments);}return setDescriptionToContract;}()}]);return Description;}(Dbcp.Description);exports.Description=Description;

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133}],28:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var KeyStore=require("../libs/eth-lightwallet/keystore");var https=require("https");var lodash_1=require("lodash");var dbcp_1=require("@evan.network/dbcp");var runtime_1=require("./runtime");var profile_1=require("./profile/profile");var AccountType=require("./profile/types/types");var Onboarding=function(_dbcp_1$Logger){(0,_inherits2["default"])(Onboarding,_dbcp_1$Logger);function Onboarding(optionsInput){var _this;(0,_classCallCheck2["default"])(this,Onboarding);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Onboarding).call(this,optionsInput));_this.options=optionsInput;return _this;}(0,_createClass2["default"])(Onboarding,[{key:"sendInvitation",value:function(){var _sendInvitation=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(invitation,weiToSend){var mail;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mail={content:{attachments:[{type:'onboardingEmail',data:JSON.stringify(invitation)}]}};_context.next=3;return this.options.mailbox.sendMail(mail,this.options.mailbox.mailboxOwner,this.options.smartAgentId,weiToSend);case 3:case"end":return _context.stop();}}},_callee,this);}));function sendInvitation(_x,_x2){return _sendInvitation.apply(this,arguments);}return sendInvitation;}()}],[{key:"createMnemonic",value:function createMnemonic(){return KeyStore.generateRandomSeed();}},{key:"createNewProfile",value:function(){var _createNewProfile=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(runtime,mnemonic,password,profileProperties){var runtimeConfig,runtimeNew,profileCost,runtimeFunds,BN;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(mnemonic){_context2.next=2;break;}throw new Error("mnemonic is a required parameter!");case 2:if(password){_context2.next=4;break;}throw new Error("password is a required parameter!");case 4:_context2.next=6;return Onboarding.generateRuntimeConfig(mnemonic,password,runtime.web3);case 6:runtimeConfig=_context2.sent;_context2.next=9;return runtime_1.createDefaultRuntime(runtime.web3,runtime.dfs,runtimeConfig);case 9:runtimeNew=_context2.sent;profileCost=runtime.web3.utils.toWei('1.0097');_context2.next=13;return runtime.web3.eth.getBalance(runtime.activeAccount);case 13:runtimeFunds=_context2.sent;BN=runtime.web3.utils.BN;if(!new BN(runtimeFunds).lt(new BN(profileCost))){_context2.next=17;break;}throw new Error("The account ".concat(runtime.activeAccount," has less than 1.0097 EVE to create a new profile"));case 17:_context2.prev=17;_context2.next=20;return profile_1.Profile.checkCorrectProfileData(profileProperties,profileProperties.accountDetails.profileType);case 20:_context2.next=25;break;case 22:_context2.prev=22;_context2.t0=_context2["catch"](17);throw new Error('The parameters passed are incorrect, profile properties need to be reconfigured');case 25:_context2.next=27;return runtime.executor.executeSend({from:runtime.activeAccount,to:runtimeNew.activeAccount,value:profileCost});case 27:_context2.next=29;return Onboarding.createProfile(runtimeNew,profileProperties);case 29:return _context2.abrupt("return",{mnemonic:mnemonic,password:password,runtimeConfig:runtimeConfig});case 30:case"end":return _context2.stop();}}},_callee2,null,[[17,22]]);}));function createNewProfile(_x3,_x4,_x5,_x6){return _createNewProfile.apply(this,arguments);}return createNewProfile;}()},{key:"createProfile",value:function(){var _createProfile=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(runtime,profileData){var factoryDomain,factoryAddress,combinedDataSchema,properties,ajvProperties,_i,_Object$keys,key,dataSchemaEntries,dataSchemaLists,description,descriptionHash,factory,contractId,contractInterface,rootDomain,encodingUnencrypted,cryptoAlgorithHashes,cryptorAes,hashCryptor,_ref,_ref2,hashKey,blockNr,sharings,profileKeys,dataContentKeys,i,sharingsHash,dhKeys;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:factoryDomain=runtime.nameResolver.getDomainName(runtime.nameResolver.config.domains.profileFactory);_context5.next=3;return runtime.nameResolver.getAddress(factoryDomain);case 3:factoryAddress=_context5.sent;combinedDataSchema=lodash_1.merge.apply(lodash_1,(0,_toConsumableArray2["default"])(Object.keys(AccountType).map(function(accountType){return lodash_1.cloneDeep(AccountType[accountType]);})));properties=combinedDataSchema.template.properties;ajvProperties={};for(_i=0,_Object$keys=Object.keys(properties);_i<_Object$keys.length;_i++){key=_Object$keys[_i];ajvProperties[key]=properties[key].dataSchema;}dataSchemaEntries=Object.keys(ajvProperties).filter(function(property){return ajvProperties[property].type!=='array';});dataSchemaLists=Object.keys(ajvProperties).filter(function(property){return ajvProperties[property].type==='array';});description={"public":{name:'Profile Container',description:'Container contract for storing and sharing profile related information '+'(account type, company information, device detail, ...)',author:'',version:'0.1.0',dbcpVersion:2,abis:{own:JSON.parse(runtime.contractLoader.contracts.DataContract["interface"])},dataSchema:ajvProperties}};_context5.next=13;return runtime.dfs.add('description',Buffer.from(JSON.stringify(description),'binary'));case 13:descriptionHash=_context5.sent;factory=runtime.contractLoader.loadContract('ProfileDataContractFactoryInterface',factoryAddress);_context5.next=17;return runtime.executor.executeContractTransaction(factory,'createContract',{from:runtime.activeAccount,autoGas:1.1,event:{target:'BaseContractFactoryInterface',eventName:'ContractCreated'},getEventResult:function getEventResult(event,args){return args.newAddress;}},'0x'.padEnd(42,'0'),runtime.activeAccount,descriptionHash,runtime.nameResolver.config.ensAddress,[].concat((0,_toConsumableArray2["default"])(Object.values(runtime.profile.treeLabels)),(0,_toConsumableArray2["default"])(dataSchemaEntries)).map(function(name){return runtime.nameResolver.soliditySha3(name);}),dataSchemaLists.map(function(name){return runtime.nameResolver.soliditySha3(name);}));case 17:contractId=_context5.sent;contractInterface=runtime.contractLoader.loadContract('DataContractInterface',contractId);rootDomain=runtime.nameResolver.namehash(runtime.nameResolver.getDomainName(runtime.nameResolver.config.domains.root));_context5.next=22;return runtime.executor.executeContractTransaction(contractInterface,'init',{from:runtime.activeAccount,autoGas:1.1},rootDomain,false);case 22:encodingUnencrypted='utf-8';cryptoAlgorithHashes='aesEcb';cryptorAes=runtime.cryptoProvider.getCryptorByCryptoAlgo('aes');hashCryptor=runtime.cryptoProvider.getCryptorByCryptoAlgo(cryptoAlgorithHashes);_context5.next=28;return Promise.all([hashCryptor.generateKey(),runtime.web3.eth.getBlockNumber()]);case 28:_ref=_context5.sent;_ref2=(0,_slicedToArray2["default"])(_ref,2);hashKey=_ref2[0];blockNr=_ref2[1];sharings={};profileKeys=Object.keys(profileData);_context5.next=36;return runtime.sharing.extendSharings(sharings,runtime.activeAccount,runtime.activeAccount,'*','hashKey',hashKey);case 36:_context5.next=38;return Promise.all(profileKeys.map(function(){return cryptorAes.generateKey();}));case 38:dataContentKeys=_context5.sent;i=0;case 40:if(!(i<profileKeys.length)){_context5.next=46;break;}_context5.next=43;return runtime.sharing.extendSharings(sharings,runtime.activeAccount,runtime.activeAccount,profileKeys[i],blockNr,dataContentKeys[i]);case 43:i++;_context5.next=40;break;case 46:_context5.next=48;return runtime.dfs.add('sharing',Buffer.from(JSON.stringify(sharings),encodingUnencrypted));case 48:sharingsHash=_context5.sent;runtime.profile.profileOwner=runtime.activeAccount;runtime.profile.profileContract=runtime.contractLoader.loadContract('DataContract',contractId);_context5.next=53;return runtime.executor.executeContractTransaction(runtime.profile.profileContract,'setSharing',{from:runtime.activeAccount,autoGas:1.1},sharingsHash);case 53:dhKeys=runtime.keyExchange.getDiffieHellmanKeys();_context5.next=56;return Promise.all([].concat((0,_toConsumableArray2["default"])((profileData?Object.keys(profileData):[]).map(function(entry){return runtime.dataContract.setEntry(runtime.profile.profileContract,entry,profileData[entry],runtime.activeAccount);})),[(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return runtime.profile.addContactKey(runtime.activeAccount,'dataKey',dhKeys.privateKey.toString('hex'));case 2:_context3.next=4;return runtime.profile.addProfileKey(runtime.activeAccount,'alias',profileData.accountDetails.accountName);case 4:_context3.next=6;return runtime.profile.addPublicKey(dhKeys.publicKey.toString('hex'));case 6:_context3.next=8;return runtime.profile.storeForAccount(runtime.profile.treeLabels.addressBook);case 8:_context3.next=10;return runtime.profile.storeForAccount(runtime.profile.treeLabels.publicKey);case 10:case"end":return _context3.stop();}}},_callee3);}))(),(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){var profileIndexDomain,profileIndexAddress,profileIndexContract;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:profileIndexDomain=runtime.nameResolver.getDomainName(runtime.nameResolver.config.domains.profile);_context4.next=3;return runtime.nameResolver.getAddress(profileIndexDomain);case 3:profileIndexAddress=_context4.sent;profileIndexContract=runtime.contractLoader.loadContract('ProfileIndexInterface',profileIndexAddress);_context4.next=7;return runtime.executor.executeContractTransaction(profileIndexContract,'setMyProfile',{from:runtime.activeAccount,autoGas:1.1},runtime.profile.profileContract.options.address);case 7:case"end":return _context4.stop();}}},_callee4);}))()]));case 56:case"end":return _context5.stop();}}},_callee5);}));function createProfile(_x7,_x8){return _createProfile.apply(this,arguments);}return createProfile;}()},{key:"generateRuntimeConfig",value:function(){var _generateRuntimeConfig=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(mnemonic,password,web3){var _keyConfig;var vault,pwDerivedKey,accountId,pKey,sha9Account,sha3Account,dataKey,runtimeConfig;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return new Promise(function(res){KeyStore.createVault({seedPhrase:mnemonic,password:password,hdPathString:'m/45\'/62\'/13\'/7'},function(err,result){res(result);});});case 2:vault=_context6.sent;_context6.next=5;return new Promise(function(res){vault.keyFromPassword(password,function(err,result){return res(result);});});case 5:pwDerivedKey=_context6.sent;vault.generateNewAddress(pwDerivedKey,1);accountId=web3.utils.toChecksumAddress(vault.getAddresses()[0]);pKey=vault.exportPrivateKey(accountId.toLowerCase(),pwDerivedKey);sha9Account=web3.utils.soliditySha3.apply(web3.utils.soliditySha3,[web3.utils.soliditySha3(accountId),web3.utils.soliditySha3(accountId)].sort());sha3Account=web3.utils.soliditySha3(accountId);dataKey=web3.utils.keccak256(accountId+password).replace(/0x/g,'');runtimeConfig={accountMap:(0,_defineProperty2["default"])({},accountId,pKey),keyConfig:(_keyConfig={},(0,_defineProperty2["default"])(_keyConfig,sha9Account,dataKey),(0,_defineProperty2["default"])(_keyConfig,sha3Account,dataKey),_keyConfig)};return _context6.abrupt("return",runtimeConfig);case 14:case"end":return _context6.stop();}}},_callee6);}));function generateRuntimeConfig(_x9,_x10,_x11){return _generateRuntimeConfig.apply(this,arguments);}return generateRuntimeConfig;}()},{key:"createOfflineProfile",value:function(){var _createOfflineProfile=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(runtime,profileData,accountId,pKey,recaptchaToken){var network,profile,pk,signature,requestedProfile,dhKeys,cryptor,fileHashes,cryptorAes,hashCryptor,_ref5,_ref6,hashKey,blockNr,sharings,profileKeys,dataContentKeys,i,sharingsHash,ipfsExcludeHashes,data,options,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:network=_args9.length>5&&_args9[5]!==undefined?_args9[5]:'testcore';if(!(!profileData||!profileData.accountDetails||!profileData.accountDetails.accountName)){_context9.next=3;break;}throw new Error('No profile data specified or accountDetails missing');case 3:profileData.accountDetails.profileType=profileData.accountDetails.profileType||'user';if(!profileData.type){profileData.type='profile';}profile_1.Profile.checkCorrectProfileData(profileData,profileData.accountDetails.profileType);profile=runtime.profile;profile.ipld.ipfs.disablePin=true;profile.ipld.hashLog=[];pk='0x'+pKey;signature=runtime.web3.eth.accounts.sign('Gimme Gimme Gimme!',pk).signature;_context9.next=13;return new Promise(function(resolve){var requestProfilePayload=JSON.stringify({accountId:accountId,signature:signature,captchaToken:recaptchaToken});var reqOptions={hostname:"agents".concat(network==='testcore'?'.test':'',".evan.network"),port:443,path:'/api/smart-agents/profile/create',method:'POST',headers:{'Content-Type':'application/json','Content-Length':requestProfilePayload.length}};var reqProfileReq=https.request(reqOptions,function(res){var chunks=[];res.on('data',function(chunk){chunks.push(chunk);});res.on('end',function(){var body=Buffer.concat(chunks);resolve(JSON.parse(body.toString()));});});reqProfileReq.write(requestProfilePayload);reqProfileReq.end();});case 13:requestedProfile=_context9.sent;dhKeys=runtime.keyExchange.getDiffieHellmanKeys();_context9.next=17;return profile.addContactKey(runtime.activeAccount,'dataKey',dhKeys.privateKey.toString('hex'));case 17:_context9.next=19;return profile.addProfileKey(runtime.activeAccount,'alias',profileData.accountDetails.accountName);case 19:_context9.next=21;return profile.addPublicKey(dhKeys.publicKey.toString('hex'));case 21:cryptor=runtime.cryptoProvider.getCryptorByCryptoAlgo('aesEcb');fileHashes={};cryptorAes=runtime.cryptoProvider.getCryptorByCryptoAlgo(runtime.dataContract.options.defaultCryptoAlgo);hashCryptor=runtime.cryptoProvider.getCryptorByCryptoAlgo(runtime.dataContract.cryptoAlgorithHashes);_context9.next=27;return Promise.all([hashCryptor.generateKey(),runtime.web3.eth.getBlockNumber()]);case 27:_ref5=_context9.sent;_ref6=(0,_slicedToArray2["default"])(_ref5,2);hashKey=_ref6[0];blockNr=_ref6[1];sharings={};profileKeys=Object.keys(profileData);_context9.next=35;return runtime.sharing.extendSharings(sharings,accountId,accountId,'*','hashKey',hashKey);case 35:_context9.next=37;return Promise.all(profileKeys.map(function(){return cryptorAes.generateKey();}));case 37:dataContentKeys=_context9.sent;i=0;case 39:if(!(i<profileKeys.length)){_context9.next=45;break;}_context9.next=42;return runtime.sharing.extendSharings(sharings,accountId,accountId,profileKeys[i],blockNr,dataContentKeys[i]);case 42:i++;_context9.next=39;break;case 45:_context9.next=47;return runtime.dfs.add('sharing',Buffer.from(JSON.stringify(sharings),runtime.dataContract.encodingUnencrypted));case 47:sharingsHash=_context9.sent;ipfsExcludeHashes=[];fileHashes.properties={entries:{}};_context9.next=52;return Promise.all(Object.keys(profileData).map(function(){var _ref7=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(key,index){var encrypted,envelope,ipfsHash;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return cryptorAes.encrypt(profileData[key],{key:dataContentKeys[index]});case 2:encrypted=_context7.sent;envelope={"private":encrypted.toString('hex'),cryptoInfo:cryptorAes.getCryptoInfo(runtime.nameResolver.soliditySha3(requestedProfile.contractId))};_context7.next=6;return runtime.dfs.add(key,Buffer.from(JSON.stringify(envelope)));case 6:ipfsHash=_context7.sent;profile.ipld.hashLog.push("".concat(ipfsHash.toString('hex')));_context7.next=10;return cryptor.encrypt(Buffer.from(ipfsHash.substr(2),'hex'),{key:hashKey});case 10:fileHashes.properties.entries[key]=_context7.sent;fileHashes.properties.entries[key]="0x".concat(fileHashes.properties.entries[key].toString('hex'));ipfsExcludeHashes.push(fileHashes.properties.entries[key]);case 13:case"end":return _context7.stop();}}},_callee7);}));return function(_x17,_x18){return _ref7.apply(this,arguments);};}()));case 52:_context9.next=54;return profile.storeToIpld(profile.treeLabels.addressBook);case 54:fileHashes.properties.entries[profile.treeLabels.addressBook]=_context9.sent;_context9.next=57;return profile.storeToIpld(profile.treeLabels.publicKey);case 57:fileHashes.properties.entries[profile.treeLabels.publicKey]=_context9.sent;fileHashes.sharingsHash=sharingsHash;_context9.next=61;return cryptor.encrypt(Buffer.from(fileHashes.properties.entries[profile.treeLabels.addressBook].substr(2),'hex'),{key:hashKey});case 61:fileHashes.properties.entries[profile.treeLabels.addressBook]=_context9.sent;fileHashes.properties.entries[profile.treeLabels.addressBook]="0x".concat(fileHashes.properties.entries[profile.treeLabels.addressBook].toString('hex'));fileHashes.ipfsHashes=[].concat((0,_toConsumableArray2["default"])(profile.ipld.hashLog),(0,_toConsumableArray2["default"])(Object.keys(fileHashes.properties.entries).map(function(key){return fileHashes.properties.entries[key];})));fileHashes.ipfsHashes=function(arrArg){return arrArg.filter(function(elem,pos,arr){return arr.indexOf(elem)===pos&&elem!==fileHashes.properties.entries[profile.treeLabels.addressBook]&&ipfsExcludeHashes.indexOf(elem)===-1;});}(fileHashes.ipfsHashes);profile.ipld.hashLog=[];profile.ipld.ipfs.disablePin=false;data=JSON.stringify({accountId:accountId,signature:signature,profileInfo:fileHashes,accessToken:requestedProfile.accessToken,contractId:requestedProfile.contractId});options={hostname:"agents".concat(network==='testcore'?'.test':'',".evan.network"),port:443,path:'/api/smart-agents/profile/fill',method:'POST',headers:{'Content-Type':'application/json','Content-Length':data.length}};_context9.next=71;return new Promise(function(){var _ref8=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(resolve,reject){var req;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:req=https.request(options,function(res){res.on('data',function(){resolve();});});req.on('error',function(error){reject(error);});req.write(data);req.end();case 4:case"end":return _context8.stop();}}},_callee8);}));return function(_x19,_x20){return _ref8.apply(this,arguments);};}());case 71:case"end":return _context9.stop();}}},_callee9);}));function createOfflineProfile(_x12,_x13,_x14,_x15,_x16){return _createOfflineProfile.apply(this,arguments);}return createOfflineProfile;}()}]);return Onboarding;}(dbcp_1.Logger);exports.Onboarding=Onboarding;

}).call(this,require("buffer").Buffer)

},{"../libs/eth-lightwallet/keystore":43,"./profile/profile":31,"./profile/types/types":34,"./runtime":36,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/defineProperty":51,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"https":1185,"lodash":471}],30:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var index_1=require("../index");var BusinessCenterProfile=function(_index_1$Logger){(0,_inherits2["default"])(BusinessCenterProfile,_index_1$Logger);function BusinessCenterProfile(options){var _this;(0,_classCallCheck2["default"])(this,BusinessCenterProfile);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(BusinessCenterProfile).call(this,options));_this.ipld=options.ipld;_this.ipldData=options.ipldData||{};_this.nameResolver=options.nameResolver;_this.bcAddress=options.bcAddress;_this.cryptoProvider=options.cryptoProvider;_this.defaultCryptoAlgo=options.defaultCryptoAlgo;return _this;}(0,_createClass2["default"])(BusinessCenterProfile,[{key:"storeToIpld",value:function(){var _storeToIpld=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var stored;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.ipld.store(this.ipldData);case 2:stored=_context.sent;return _context.abrupt("return",stored);case 4:case"end":return _context.stop();}}},_callee,this);}));function storeToIpld(){return _storeToIpld.apply(this,arguments);}return storeToIpld;}()},{key:"loadFromIpld",value:function(){var _loadFromIpld=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(ipldIpfsHash){var loaded;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return this.ipld.getLinkedGraph(ipldIpfsHash);case 3:loaded=_context2.sent;_context2.next=10;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);this.log("Error getting BC Profile ".concat(_context2.t0),'debug');loaded={alias:{}};case 10:this.ipldData=loaded;return _context2.abrupt("return",this);case 12:case"end":return _context2.stop();}}},_callee2,this,[[0,6]]);}));function loadFromIpld(_x){return _loadFromIpld.apply(this,arguments);}return loadFromIpld;}()},{key:"getContactCard",value:function(){var _getContactCard=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",this.ipld.getLinkedGraph(this.ipldData,'contactCard'));case 1:case"end":return _context3.stop();}}},_callee3,this);}));function getContactCard(){return _getContactCard.apply(this,arguments);}return getContactCard;}()},{key:"setContactCard",value:function(){var _setContactCard=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contactCard){var cryptor,cryptoInfo;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cryptor=this.cryptoProvider.getCryptorByCryptoAlgo(this.defaultCryptoAlgo);cryptoInfo=cryptor.getCryptoInfo(this.nameResolver.soliditySha3(this.bcAddress));return _context4.abrupt("return",this.ipld.set(this.ipldData,'contactCard',contactCard,false,cryptoInfo));case 3:case"end":return _context4.stop();}}},_callee4,this);}));function setContactCard(_x2){return _setContactCard.apply(this,arguments);}return setContactCard;}()},{key:"storeForBusinessCenter",value:function(){var _storeForBusinessCenter=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(businessCenterDomain,account){var _ref,_ref2,stored,address,contract;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Promise.all([this.storeToIpld(),this.nameResolver.getAddress(businessCenterDomain)]);case 2:_ref=_context5.sent;_ref2=(0,_slicedToArray2["default"])(_ref,2);stored=_ref2[0];address=_ref2[1];contract=this.nameResolver.contractLoader.loadContract('BusinessCenterInterface',address);_context5.next=9;return this.nameResolver.executor.executeContractTransaction(contract,'setMyProfile',{from:account,autoGas:1.1},stored);case 9:case"end":return _context5.stop();}}},_callee5,this);}));function storeForBusinessCenter(_x3,_x4){return _storeForBusinessCenter.apply(this,arguments);}return storeForBusinessCenter;}()},{key:"loadForBusinessCenter",value:function(){var _loadForBusinessCenter=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(businessCenterDomain,account){var address,contract,hash;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.nameResolver.getAddress(businessCenterDomain);case 2:address=_context6.sent;contract=this.nameResolver.contractLoader.loadContract('BusinessCenterInterface',address);_context6.next=6;return this.nameResolver.executor.executeContractCall(contract,'getProfile',account);case 6:hash=_context6.sent;if(!(hash==='0x0000000000000000000000000000000000000000000000000000000000000000')){_context6.next=12;break;}this.ipldData={alias:''};return _context6.abrupt("return",Promise.resolve());case 12:_context6.next=14;return this.loadFromIpld(hash);case 14:case"end":return _context6.stop();}}},_callee6,this);}));function loadForBusinessCenter(_x5,_x6){return _loadForBusinessCenter.apply(this,arguments);}return loadForBusinessCenter;}()},{key:"getMyBusinessCenterContracts",value:function(){var _getMyBusinessCenterContracts=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(businessCenterDomain,contractType,account){var address,contract,bcIndex,indexContract,contracts;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.nameResolver.getAddress(businessCenterDomain);case 2:address=_context7.sent;contract=this.nameResolver.contractLoader.loadContract('BusinessCenterInterface',address);_context7.next=6;return this.nameResolver.executor.executeContractCall(contract,'getMyIndex',{from:account});case 6:bcIndex=_context7.sent;indexContract=this.nameResolver.contractLoader.loadContract('DataStoreIndexInterface',bcIndex);_context7.next=10;return this.nameResolver.getArrayFromIndexContract(indexContract,this.nameResolver.soliditySha3(contractType));case 10:contracts=_context7.sent;return _context7.abrupt("return",contracts);case 12:case"end":return _context7.stop();}}},_callee7,this);}));function getMyBusinessCenterContracts(_x7,_x8,_x9){return _getMyBusinessCenterContracts.apply(this,arguments);}return getMyBusinessCenterContracts;}()}]);return BusinessCenterProfile;}(index_1.Logger);exports.BusinessCenterProfile=BusinessCenterProfile;

},{"../index":24,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/regenerator":67}],31:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var accountTypes=require("./types/types");var container_1=require("../contracts/digital-twin/container");var rights_and_roles_1=require("../contracts/rights-and-roles");var Profile=function(_dbcp_1$Logger){(0,_inherits2["default"])(Profile,_dbcp_1$Logger);function Profile(options){var _this;(0,_classCallCheck2["default"])(this,Profile);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Profile).call(this,options));_this.treeLabels={activeVerifications:'activeVerifications',addressBook:'addressBook',bookmarkedDapps:'bookmarkedDapps',contacts:'contacts',contracts:'contracts',dtContainerPlugins:'dtContainerPlugins',encryptionKeys:'encryptionKeys',profileOptions:'profileOptions',publicKey:'publicKey',templates:'templates'};_this.accountTypes=accountTypes;_this.activeAccount=options.accountId;_this.contractLoader=options.contractLoader;_this.dataContract=options.dataContract;_this.defaultCryptoAlgo=options.defaultCryptoAlgo;_this.executor=options.executor;_this.ipld=options.ipld;_this.nameResolver=options.nameResolver;_this.options=options;_this.profileOwner=options.profileOwner||_this.activeAccount;_this.trees={};return _this;}(0,_createClass2["default"])(Profile,[{key:"addBcContract",value:function(){var _addBcContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(bc,address,data){var bcSet;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.throwIfNotOwner('add a contract to a specific scope');this.ensureTree('contracts');_context.next=4;return this.ipld.getLinkedGraph(this.trees['contracts'],bc);case 4:bcSet=_context.sent;if(bcSet){_context.next=8;break;}_context.next=8;return this.ipld.set(this.trees['contracts'],bc,{},false);case 8:_context.next=10;return this.ipld.set(this.trees['contracts'],"".concat(bc,"/").concat(address),data,false);case 10:case"end":return _context.stop();}}},_callee,this);}));function addBcContract(_x,_x2,_x3){return _addBcContract.apply(this,arguments);}return addBcContract;}()},{key:"addContactKey",value:function(){var _addContactKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(address,context,key){var addressHash,_this$nameResolver,keysSet,contactSet;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.log("add contact key: account \"".concat(address,"\", context \"").concat(context,"\", key \"").concat(dbcp_1.obfuscate(key),"\""),'debug');this.throwIfNotOwner('add a key for a contact to address book');this.ensureTree('addressBook');if(address.length===42){addressHash=(_this$nameResolver=this.nameResolver).soliditySha3.apply(_this$nameResolver,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(address),this.nameResolver.soliditySha3(this.activeAccount)].sort()));}else{addressHash=address;}_context2.next=6;return this.ipld.getLinkedGraph(this.trees['addressBook'],"keys");case 6:keysSet=_context2.sent;if(keysSet){_context2.next=10;break;}_context2.next=10;return this.ipld.set(this.trees['addressBook'],'keys',{},true);case 10:_context2.next=12;return this.ipld.getLinkedGraph(this.trees['addressBook'],"keys/".concat(addressHash));case 12:contactSet=_context2.sent;if(contactSet){_context2.next=16;break;}_context2.next=16;return this.ipld.set(this.trees['addressBook'],"keys/".concat(addressHash),{},true);case 16:_context2.next=18;return this.ipld.set(this.trees['addressBook'],"keys/".concat(addressHash,"/").concat(context),key,true);case 18:case"end":return _context2.stop();}}},_callee2,this);}));function addContactKey(_x4,_x5,_x6){return _addContactKey.apply(this,arguments);}return addContactKey;}()},{key:"addContract",value:function(){var _addContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(address,data){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.throwIfNotOwner('add a contract');this.ensureTree('contracts');_context3.next=4;return this.ipld.set(this.trees['contracts'],address,data,false);case 4:case"end":return _context3.stop();}}},_callee3,this);}));function addContract(_x7,_x8){return _addContract.apply(this,arguments);}return addContract;}()},{key:"addDappBookmark",value:function(){var _addDappBookmark=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(address,description){var descriptionKeys,_i,_descriptionKeys,key;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.throwIfNotOwner('add a dapp bookmark');this.ensureTree('bookmarkedDapps');if(!(!address||!description)){_context4.next=4;break;}throw new Error('no valid description or address given!');case 4:_context4.next=6;return this.ipld.set(this.trees['bookmarkedDapps'],"bookmarkedDapps/".concat(address),{},true);case 6:descriptionKeys=Object.keys(description);_i=0,_descriptionKeys=descriptionKeys;case 8:if(!(_i<_descriptionKeys.length)){_context4.next=15;break;}key=_descriptionKeys[_i];_context4.next=12;return this.ipld.set(this.trees['bookmarkedDapps'],"bookmarkedDapps/".concat(address,"/").concat(key),description[key],true);case 12:_i++;_context4.next=8;break;case 15:case"end":return _context4.stop();}}},_callee4,this);}));function addDappBookmark(_x9,_x10){return _addDappBookmark.apply(this,arguments);}return addDappBookmark;}()},{key:"addProfileKey",value:function(){var _addProfileKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(address,key,value){var profileSet,addressSet;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.throwIfNotOwner('add a profile value to an account');this.ensureTree('addressBook');_context5.next=4;return this.ipld.getLinkedGraph(this.trees['addressBook'],"profile");case 4:profileSet=_context5.sent;if(profileSet){_context5.next=8;break;}_context5.next=8;return this.ipld.set(this.trees['addressBook'],"profile",{},true);case 8:_context5.next=10;return this.ipld.getLinkedGraph(this.trees['addressBook'],"profile/".concat(address));case 10:addressSet=_context5.sent;if(addressSet){_context5.next=14;break;}_context5.next=14;return this.ipld.set(this.trees['addressBook'],"profile/".concat(address),{},true);case 14:_context5.next=16;return this.ipld.set(this.trees['addressBook'],"profile/".concat(address,"/").concat(key),value,true);case 16:case"end":return _context5.stop();}}},_callee5,this);}));function addProfileKey(_x11,_x12,_x13){return _addProfileKey.apply(this,arguments);}return addProfileKey;}()},{key:"addPublicKey",value:function(){var _addPublicKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(key){return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:this.throwIfNotOwner('set public key');this.ensureTree('publicKey');_context6.next=4;return this.ipld.set(this.trees['publicKey'],'publicKey',key,true);case 4:case"end":return _context6.stop();}}},_callee6,this);}));function addPublicKey(_x14){return _addPublicKey.apply(this,arguments);}return addPublicKey;}()},{key:"exists",value:function(){var _exists=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(){var ensName,address,indexContract,profileContractAddress;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;ensName=this.nameResolver.getDomainName(this.nameResolver.config.domains.profile);_context7.next=4;return this.nameResolver.getAddress(ensName);case 4:address=_context7.sent;indexContract=this.nameResolver.contractLoader.loadContract('ProfileIndexInterface',address);_context7.next=8;return this.executor.executeContractCall(indexContract,'getProfile',this.profileOwner,{from:this.activeAccount});case 8:profileContractAddress=_context7.sent;return _context7.abrupt("return",profileContractAddress!=='0x0000000000000000000000000000000000000000');case 12:_context7.prev=12;_context7.t0=_context7["catch"](0);this.log("error occurred while checking if profile exists; ".concat(_context7.t0.message||_context7.t0),'debug');return _context7.abrupt("return",false);case 16:case"end":return _context7.stop();}}},_callee7,this,[[0,12]]);}));function exists(){return _exists.apply(this,arguments);}return exists;}()},{key:"getAddressBook",value:function(){var _getAddressBook=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(this.trees[this.treeLabels.addressBook]){_context8.next=3;break;}_context8.next=3;return this.loadForAccount(this.treeLabels.addressBook);case 3:return _context8.abrupt("return",this.trees[this.treeLabels.addressBook]);case 4:case"end":return _context8.stop();}}},_callee8,this);}));function getAddressBook(){return _getAddressBook.apply(this,arguments);}return getAddressBook;}()},{key:"getAddressBookAddress",value:function(){var _getAddressBookAddress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(address){return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(this.trees[this.treeLabels.addressBook]){_context9.next=3;break;}_context9.next=3;return this.loadForAccount(this.treeLabels.addressBook);case 3:return _context9.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.addressBook],"profile/".concat(address)));case 4:case"end":return _context9.stop();}}},_callee9,this);}));function getAddressBookAddress(_x15){return _getAddressBookAddress.apply(this,arguments);}return getAddressBookAddress;}()},{key:"getBcContract",value:function(){var _getBcContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(bc,address){return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(this.trees[this.treeLabels.contracts]){_context10.next=3;break;}_context10.next=3;return this.loadForAccount(this.treeLabels.contracts);case 3:return _context10.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.contracts],"".concat(bc,"/").concat(address)));case 4:case"end":return _context10.stop();}}},_callee10,this);}));function getBcContract(_x16,_x17){return _getBcContract.apply(this,arguments);}return getBcContract;}()},{key:"getBcContracts",value:function(){var _getBcContracts=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(bc){return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(this.trees[this.treeLabels.contracts]){_context11.next=3;break;}_context11.next=3;return this.loadForAccount(this.treeLabels.contracts);case 3:return _context11.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.contracts],bc));case 4:case"end":return _context11.stop();}}},_callee11,this);}));function getBcContracts(_x18){return _getBcContracts.apply(this,arguments);}return getBcContracts;}()},{key:"getBookmarkDefinitions",value:function(){var _getBookmarkDefinitions=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(){return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(this.trees[this.treeLabels.bookmarkedDapps]){_context12.next=3;break;}_context12.next=3;return this.loadForAccount(this.treeLabels.bookmarkedDapps);case 3:return _context12.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.bookmarkedDapps],"bookmarkedDapps"));case 4:case"end":return _context12.stop();}}},_callee12,this);}));function getBookmarkDefinitions(){return _getBookmarkDefinitions.apply(this,arguments);}return getBookmarkDefinitions;}()},{key:"getContactKey",value:function(){var _getContactKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(address,context){var addressHash,_this$nameResolver2;return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:this.throwIfNotOwner('read a contact key');if(address.length===42){addressHash=(_this$nameResolver2=this.nameResolver).soliditySha3.apply(_this$nameResolver2,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(address),this.nameResolver.soliditySha3(this.activeAccount)].sort()));}else{addressHash=address;}if(this.trees[this.treeLabels.addressBook]){_context13.next=5;break;}_context13.next=5;return this.loadForAccount(this.treeLabels.addressBook);case 5:return _context13.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.addressBook],"keys/".concat(addressHash,"/").concat(context)));case 6:case"end":return _context13.stop();}}},_callee13,this);}));function getContactKey(_x19,_x20){return _getContactKey.apply(this,arguments);}return getContactKey;}()},{key:"getContract",value:function(){var _getContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(address){return _regenerator["default"].wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:this.throwIfNotOwner('get a contract');if(this.trees[this.treeLabels.contracts]){_context14.next=4;break;}_context14.next=4;return this.loadForAccount(this.treeLabels.contracts);case 4:return _context14.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.contracts],address));case 5:case"end":return _context14.stop();}}},_callee14,this);}));function getContract(_x21){return _getContract.apply(this,arguments);}return getContract;}()},{key:"getContracts",value:function(){var _getContracts=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(){return _regenerator["default"].wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:this.throwIfNotOwner('get all contracts');if(this.trees[this.treeLabels.contracts]){_context15.next=4;break;}_context15.next=4;return this.loadForAccount(this.treeLabels.contracts);case 4:return _context15.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.contracts],this.treeLabels.contracts));case 5:case"end":return _context15.stop();}}},_callee15,this);}));function getContracts(){return _getContracts.apply(this,arguments);}return getContracts;}()},{key:"getDappBookmark",value:function(){var _getDappBookmark=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(address){return _regenerator["default"].wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:this.throwIfNotOwner('get dapp bookmarks');if(this.trees[this.treeLabels.bookmarkedDapps]){_context16.next=4;break;}_context16.next=4;return this.loadForAccount(this.treeLabels.bookmarkedDapps);case 4:return _context16.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.bookmarkedDapps],"bookmarkedDapps/".concat(address)));case 5:case"end":return _context16.stop();}}},_callee16,this);}));function getDappBookmark(_x22){return _getDappBookmark.apply(this,arguments);}return getDappBookmark;}()},{key:"getContactKnownState",value:function(){var _getContactKnownState=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(accountId){var value;return _regenerator["default"].wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return this.dataContract.getMappingValue(this.profileContract,'contacts',accountId,this.profileOwner,false,false);case 2:value=_context17.sent;return _context17.abrupt("return",value.substr(-1)==='0'?false:true);case 4:case"end":return _context17.stop();}}},_callee17,this);}));function getContactKnownState(_x23){return _getContactKnownState.apply(this,arguments);}return getContactKnownState;}()},{key:"getEncryptionKey",value:function(){var _getEncryptionKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(context){return _regenerator["default"].wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:this.throwIfNotOwner('get an encryption key');if(this.trees[this.treeLabels.encryptionKeys]){_context18.next=4;break;}_context18.next=4;return this.loadForAccount(this.treeLabels.encryptionKeys);case 4:return _context18.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.encryptionKeys],"".concat(this.treeLabels.encryptionKeys,"/").concat(context)));case 5:case"end":return _context18.stop();}}},_callee18,this);}));function getEncryptionKey(_x24){return _getEncryptionKey.apply(this,arguments);}return getEncryptionKey;}()},{key:"getProfileProperty",value:function(){var _getProfileProperty=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(property){var description,value;return _regenerator["default"].wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:if(this.profileContainer){_context19.next=3;break;}_context19.next=3;return this.loadForAccount();case 3:_context19.next=5;return this.profileContainer.getDescription();case 5:description=_context19.sent;if(!(!description.dataSchema||!description.dataSchema[property])){_context19.next=8;break;}throw new Error("property \"".concat(property,"\" not found in description of profile"));case 8:if(!(description.dataSchema[property].type==='array')){_context19.next=10;break;}throw new Error("property \"".concat(property,"\" is type \"array\", which is not supported"));case 10:_context19.next=12;return this.profileContainer.getEntry(property);case 12:value=_context19.sent;return _context19.abrupt("return",value!=='0x0000000000000000000000000000000000000000000000000000000000000000'?value:null);case 14:case"end":return _context19.stop();}}},_callee19,this);}));function getProfileProperty(_x25){return _getProfileProperty.apply(this,arguments);}return getProfileProperty;}()},{key:"getProfileKey",value:function(){var _getProfileKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee20(address,key){return _regenerator["default"].wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:this.throwIfNotOwner('get a profile value');if(this.trees[this.treeLabels.addressBook]){_context20.next=4;break;}_context20.next=4;return this.loadForAccount(this.treeLabels.addressBook);case 4:return _context20.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.addressBook],"profile/".concat(address,"/").concat(key)));case 5:case"end":return _context20.stop();}}},_callee20,this);}));function getProfileKey(_x26,_x27){return _getProfileKey.apply(this,arguments);}return getProfileKey;}()},{key:"getPublicKey",value:function(){var _getPublicKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee21(){return _regenerator["default"].wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:if(this.trees[this.treeLabels.publicKey]){_context21.next=3;break;}_context21.next=3;return this.loadForAccount(this.treeLabels.publicKey);case 3:return _context21.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.publicKey],'publicKey'));case 4:case"end":return _context21.stop();}}},_callee21,this);}));function getPublicKey(){return _getPublicKey.apply(this,arguments);}return getPublicKey;}()},{key:"getPlugins",value:function(){var _getPlugins=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee22(){return _regenerator["default"].wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:this.throwIfNotOwner('get plugins');if(this.trees[this.treeLabels.dtContainerPlugins]){_context22.next=4;break;}_context22.next=4;return this.loadForAccount(this.treeLabels.dtContainerPlugins);case 4:return _context22.abrupt("return",this.ipld.getLinkedGraph(this.trees[this.treeLabels.dtContainerPlugins],this.treeLabels.dtContainerPlugins));case 5:case"end":return _context22.stop();}}},_callee22,this);}));function getPlugins(){return _getPlugins.apply(this,arguments);}return getPlugins;}()},{key:"loadForAccount",value:function(){var _loadForAccount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee23(tree){var ensName,address,indexContract,profileContractAddress,contractAddress,hash;return _regenerator["default"].wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(this.profileContract){_context23.next=16;break;}ensName=this.nameResolver.getDomainName(this.nameResolver.config.domains.profile);_context23.next=4;return this.nameResolver.getAddress(ensName);case 4:address=_context23.sent;indexContract=this.nameResolver.contractLoader.loadContract('ProfileIndexInterface',address);_context23.next=8;return this.executor.executeContractCall(indexContract,'getProfile',this.profileOwner,{from:this.activeAccount});case 8:profileContractAddress=_context23.sent;if(!(profileContractAddress==='0x0000000000000000000000000000000000000000')){_context23.next=13;break;}throw new Error("no profile found for account \"".concat(this.profileOwner,"\""));case 13:contractAddress=profileContractAddress.length===66?this.executor.web3.utils.toChecksumAddress(profileContractAddress.substr(0,42)):profileContractAddress;this.profileContract=this.contractLoader.loadContract('DataContractInterface',contractAddress);this.profileContainer=new container_1.Container(Object.assign(Object.assign({},this.options),{verifications:null,web3:this.options.executor.web3}),{accountId:this.activeAccount,address:this.profileContract.address});case 16:if(!tree){_context23.next=34;break;}this.throwIfNotOwner('load secured profile data');if(!(tree===this.treeLabels.publicKey)){_context23.next=24;break;}_context23.next=21;return this.dataContract.getEntry(this.profileContract,tree,this.activeAccount,false,false);case 21:hash=_context23.sent;_context23.next=27;break;case 24:_context23.next=26;return this.dataContract.getEntry(this.profileContract,tree,this.activeAccount,false,true);case 26:hash=_context23.sent;case 27:if(!(hash==='0x0000000000000000000000000000000000000000000000000000000000000000')){_context23.next=32;break;}this.trees[tree]={bookmarkedDapps:{},addressBook:{},contracts:{}};return _context23.abrupt("return",Promise.resolve());case 32:_context23.next=34;return this.loadFromIpld(tree,hash);case 34:case"end":return _context23.stop();}}},_callee23,this);}));function loadForAccount(_x28){return _loadForAccount.apply(this,arguments);}return loadForAccount;}()},{key:"loadFromIpld",value:function(){var _loadFromIpld=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee24(tree,ipldIpfsHash){var loaded;return _regenerator["default"].wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:this.throwIfNotOwner('load secured profile data');_context24.prev=1;_context24.next=4;return this.ipld.getLinkedGraph(ipldIpfsHash);case 4:loaded=_context24.sent;_context24.next=11;break;case 7:_context24.prev=7;_context24.t0=_context24["catch"](1);this.log("could not load profile from ipld ".concat(_context24.t0.message||_context24.t0),'error');loaded={bookmarkedDapps:{},addressBook:{},contracts:{}};case 11:this.trees[tree]=loaded;return _context24.abrupt("return",this);case 13:case"end":return _context24.stop();}}},_callee24,this,[[1,7]]);}));function loadFromIpld(_x29,_x30){return _loadFromIpld.apply(this,arguments);}return loadFromIpld;}()},{key:"removeBcContract",value:function(){var _removeBcContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee25(bc,address){var bcSet;return _regenerator["default"].wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:this.throwIfNotOwner('remove a contract from a specific scope');this.ensureTree('contracts');_context25.next=4;return this.ipld.getLinkedGraph(this.trees['contracts'],bc);case 4:bcSet=_context25.sent;if(!bcSet){_context25.next=8;break;}_context25.next=8;return this.ipld.remove(this.trees['contracts'],"".concat(bc,"/").concat(address));case 8:case"end":return _context25.stop();}}},_callee25,this);}));function removeBcContract(_x31,_x32){return _removeBcContract.apply(this,arguments);}return removeBcContract;}()},{key:"removeContact",value:function(){var _removeContact=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee26(address){var _this$nameResolver3;var addressHash,addressBook;return _regenerator["default"].wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:this.throwIfNotOwner('remove a contract');addressHash=(_this$nameResolver3=this.nameResolver).soliditySha3.apply(_this$nameResolver3,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(address),this.nameResolver.soliditySha3(this.activeAccount)].sort()));_context26.next=4;return this.getAddressBook();case 4:addressBook=_context26.sent;delete addressBook.keys[addressHash];delete addressBook.profile[address];case 7:case"end":return _context26.stop();}}},_callee26,this);}));function removeContact(_x33){return _removeContact.apply(this,arguments);}return removeContact;}()},{key:"removeDappBookmark",value:function(){var _removeDappBookmark=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee27(address){return _regenerator["default"].wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:this.throwIfNotOwner('remove a dapp bookmark');if(address){_context27.next=3;break;}throw new Error('no valid address given!');case 3:this.ensureTree('bookmarkedDapps');_context27.next=6;return this.ipld.remove(this.trees['bookmarkedDapps'],"bookmarkedDapps/".concat(address));case 6:case"end":return _context27.stop();}}},_callee27,this);}));function removeDappBookmark(_x34){return _removeDappBookmark.apply(this,arguments);}return removeDappBookmark;}()},{key:"setDappBookmarks",value:function(){var _setDappBookmarks=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee28(bookmarks){return _regenerator["default"].wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:this.throwIfNotOwner('update a dapp bookmark');if(bookmarks){_context28.next=3;break;}throw new Error('no valid bookmarks are given');case 3:this.ensureTree(this.treeLabels.bookmarkedDapps);_context28.next=6;return this.ipld.set(this.trees[this.treeLabels.bookmarkedDapps],this.treeLabels.bookmarkedDapps,bookmarks,true);case 6:case"end":return _context28.stop();}}},_callee28,this);}));function setDappBookmarks(_x35){return _setDappBookmarks.apply(this,arguments);}return setDappBookmarks;}()},{key:"loadActiveVerifications",value:function(){var _loadActiveVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee29(){var defaultVerifications;return _regenerator["default"].wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:this.throwIfNotOwner('get verifications');defaultVerifications=['/evan/onboarding/termsofuse'];if(this.trees[this.treeLabels.activeVerifications]){_context29.next=5;break;}_context29.next=5;return this.loadForAccount(this.treeLabels.activeVerifications);case 5:_context29.next=7;return this.ipld.getLinkedGraph(this.trees[this.treeLabels.activeVerifications],this.treeLabels.activeVerifications);case 7:_context29.t0=_context29.sent;if(_context29.t0){_context29.next=10;break;}_context29.t0=defaultVerifications;case 10:return _context29.abrupt("return",_context29.t0);case 11:case"end":return _context29.stop();}}},_callee29,this);}));function loadActiveVerifications(){return _loadActiveVerifications.apply(this,arguments);}return loadActiveVerifications;}()},{key:"setActiveVerifications",value:function(){var _setActiveVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee30(verifications){return _regenerator["default"].wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:this.throwIfNotOwner('set verifications');if(verifications){_context30.next=3;break;}throw new Error('no verifications are given');case 3:this.ensureTree(this.treeLabels.activeVerifications);_context30.next=6;return this.ipld.set(this.trees[this.treeLabels.activeVerifications],this.treeLabels.activeVerifications,verifications,true);case 6:case"end":return _context30.stop();}}},_callee30,this);}));function setActiveVerifications(_x36){return _setActiveVerifications.apply(this,arguments);}return setActiveVerifications;}()},{key:"setContactKnownState",value:function(){var _setContactKnownState=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee31(accountId,contactKnown){return _regenerator["default"].wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:this.throwIfNotOwner('set a contact known state');_context31.next=3;return this.dataContract.setMappingValue(this.profileContract,'contacts',accountId,"0x".concat((contactKnown?'1':'0').padStart(64,'0')),this.activeAccount,false,false);case 3:case"end":return _context31.stop();}}},_callee31,this);}));function setContactKnownState(_x37,_x38){return _setContactKnownState.apply(this,arguments);}return setContactKnownState;}()},{key:"setEncryptionKey",value:function(){var _setEncryptionKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee32(context,key){return _regenerator["default"].wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:this.throwIfNotOwner('set an encryption key');this.ensureTree(this.treeLabels.encryptionKeys);_context32.next=4;return this.ipld.set(this.trees[this.treeLabels.encryptionKeys],"".concat(this.treeLabels.encryptionKeys,"/").concat(context),key,true);case 4:case"end":return _context32.stop();}}},_callee32,this);}));function setEncryptionKey(_x39,_x40){return _setEncryptionKey.apply(this,arguments);}return setEncryptionKey;}()},{key:"setPlugins",value:function(){var _setPlugins=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee33(plugins){return _regenerator["default"].wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:this.throwIfNotOwner('set plugins value');this.ensureTree(this.treeLabels.dtContainerPlugins);_context33.next=4;return this.ipld.set(this.trees[this.treeLabels.dtContainerPlugins],this.treeLabels.dtContainerPlugins,plugins,true);case 4:case"end":return _context33.stop();}}},_callee33,this);}));function setPlugins(_x41){return _setPlugins.apply(this,arguments);}return setPlugins;}()},{key:"setProfileProperties",value:function(){var _setProfileProperties=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee34(data){var accountDetails,profileType;return _regenerator["default"].wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_context34.next=2;return this.loadForAccount();case 2:_context34.prev=2;_context34.next=5;return this.getProfileProperty('accountDetails');case 5:accountDetails=_context34.sent;_context34.next=11;break;case 8:_context34.prev=8;_context34.t0=_context34["catch"](2);this.log('could not get account details, will use this profile as user; '+_context34.t0.message||_context34.t0,'warning');case 11:profileType=accountDetails&&accountDetails.profileType?accountDetails.profileType:'user';if(!(data.accountDetails&&data.accountDetails.profileType&&data.accountDetails.profileType!==profileType&&profileType!=='user')){_context34.next=14;break;}throw new Error("invalid profile type change ".concat(accountDetails.profileType," ")+"--> ".concat(data.accountDetails.profileType,", change not allowed"));case 14:if(!(data.accountDetails&&data.accountDetails.profileType&&!Object.keys(accountTypes).includes(data.accountDetails.profileType))){_context34.next=16;break;}throw new Error("invalid profile type change ".concat(accountDetails.profileType," ")+"--> ".concat(data.accountDetails.profileType,", target type not supported"));case 16:if(data.accountDetails&&data.accountDetails.profileType&&data.accountDetails.profileType!==profileType){profileType=data.accountDetails.profileType;}Profile.checkCorrectProfileData(data,profileType);_context34.next=20;return this.profileContainer.storeData(data);case 20:case"end":return _context34.stop();}}},_callee34,this,[[2,8]]);}));function setProfileProperties(_x42){return _setProfileProperties.apply(this,arguments);}return setProfileProperties;}()},{key:"storeForAccount",value:function(){var _storeForAccount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee35(tree,ipldHash){var stored;return _regenerator["default"].wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:this.throwIfNotOwner('store secured profile data');_context35.next=3;return this.ensurePropertyInProfile(tree);case 3:if(!ipldHash){_context35.next=14;break;}this.log("store tree \"".concat(tree,"\" with given hash to profile contract for account ")+"\"".concat(this.activeAccount,"\""));if(!(tree===this.treeLabels.publicKey)){_context35.next=10;break;}_context35.next=8;return this.dataContract.setEntry(this.profileContract,tree,ipldHash,this.activeAccount,false,false);case 8:_context35.next=12;break;case 10:_context35.next=12;return this.dataContract.setEntry(this.profileContract,tree,ipldHash,this.activeAccount,false,false);case 12:_context35.next=27;break;case 14:this.log("store tree \"".concat(tree,"\" to ipld and then to profile contract for account ")+"\"".concat(this.activeAccount,"\""));_context35.next=17;return this.storeToIpld(tree);case 17:stored=_context35.sent;if(!(tree===this.treeLabels.publicKey)){_context35.next=23;break;}_context35.next=21;return this.dataContract.setEntry(this.profileContract,tree,stored,this.activeAccount,false,false);case 21:_context35.next=25;break;case 23:_context35.next=25;return this.dataContract.setEntry(this.profileContract,tree,stored,this.activeAccount,false,true);case 25:_context35.next=27;return this.loadForAccount(tree);case 27:case"end":return _context35.stop();}}},_callee35,this);}));function storeForAccount(_x43,_x44){return _storeForAccount.apply(this,arguments);}return storeForAccount;}()},{key:"storeToIpld",value:function(){var _storeToIpld=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee36(tree){return _regenerator["default"].wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:_context36.next=2;return this.ipld.store(this.trees[tree]);case 2:return _context36.abrupt("return",_context36.sent);case 3:case"end":return _context36.stop();}}},_callee36,this);}));function storeToIpld(_x45){return _storeToIpld.apply(this,arguments);}return storeToIpld;}()},{key:"throwIfNotOwner",value:function throwIfNotOwner(action){if(this.activeAccount!==this.profileOwner){throw new Error("tried to ".concat(action," on \"").concat(this.profileOwner,"\"s profile with ")+"\"".concat(this.activeAccount,"\", this is only supported for the owner of a profile"));}}},{key:"ensurePropertyInProfile",value:function(){var _ensurePropertyInProfile=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee37(tree){var hash;return _regenerator["default"].wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:hash=this.options.rightsAndRoles.getOperationCapabilityHash(tree,rights_and_roles_1.PropertyType.Entry,rights_and_roles_1.ModificationType.Set);_context37.next=3;return this.options.rightsAndRoles.canCallOperation(this.profileContract.options.address,this.activeAccount,hash);case 3:if(_context37.sent){_context37.next=6;break;}_context37.next=6;return this.options.rightsAndRoles.setOperationPermission(this.profileContract,this.activeAccount,0,tree,rights_and_roles_1.PropertyType.Entry,rights_and_roles_1.ModificationType.Set,true);case 6:case"end":return _context37.stop();}}},_callee37,this);}));function ensurePropertyInProfile(_x46){return _ensurePropertyInProfile.apply(this,arguments);}return ensurePropertyInProfile;}()},{key:"ensureTree",value:function ensureTree(tree){if(!this.trees[tree]&&tree==='publicKey'){this.trees[tree]={cryptoInfo:{algorithm:'unencrypted'}};}else if(!this.trees[tree]){this.trees[tree]={};}}}],[{key:"checkCorrectProfileData",value:function checkCorrectProfileData(data,type){var allowedFields=[].concat((0,_toConsumableArray2["default"])(Object.keys(accountTypes.user.template.properties)),(0,_toConsumableArray2["default"])(Object.keys(accountTypes[type].template.properties)));var notAllowed=Object.keys(data).filter(function(key){return!allowedFields.includes(key);});if(notAllowed.length){throw new Error("one or more fields are not allowed in profile: ".concat(notAllowed));}return true;}}]);return Profile;}(dbcp_1.Logger);exports.Profile=Profile;

},{"../contracts/digital-twin/container":6,"../contracts/rights-and-roles":10,"./types/types":34,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726}],39:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var nullAddress='0x0000000000000000000000000000000000000000';var defaultProposalOptions={data:'0x',to:nullAddress,value:'0'};var Votings=function(_dbcp_1$Logger){(0,_inherits2["default"])(Votings,_dbcp_1$Logger);function Votings(options){var _this;(0,_classCallCheck2["default"])(this,Votings);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Votings).call(this,options));_this.options=options;return _this;}(0,_createClass2["default"])(Votings,[{key:"addMember",value:function(){var _addMember=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contract,accountId,targetAccount,memberOptions){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.options.executor.executeContractTransaction(this.ensureContract(contract),'addMember',{from:accountId},targetAccount,memberOptions.name);case 2:case"end":return _context.stop();}}},_callee,this);}));function addMember(_x,_x2,_x3,_x4){return _addMember.apply(this,arguments);}return addMember;}()},{key:"createContract",value:function(){var _createContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(accountId,votingsContractOptions){var congressOptions;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:congressOptions=[votingsContractOptions.minimumQuorumForProposals,votingsContractOptions.minutesForDebate,votingsContractOptions.marginOfVotesForMajority];_context2.next=3;return this.options.executor.createContract('Congress',congressOptions,{from:accountId,gas:2000000});case 3:return _context2.abrupt("return",_context2.sent);case 4:case"end":return _context2.stop();}}},_callee2,this);}));function createContract(_x5,_x6){return _createContract.apply(this,arguments);}return createContract;}()},{key:"createProposal",value:function(){var _createProposal=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(contract,accountId,proposalOptions){var options;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.log("creating proposal in congress \"".concat(contract.options.address,"\" ")+"with account ".concat(accountId),'info');options=Object.assign({},defaultProposalOptions,proposalOptions);_context3.next=4;return this.options.executor.executeContractTransaction(this.ensureContract(contract),'newProposal',{from:accountId,event:{target:'Congress',eventName:'ProposalAdded'},getEventResult:function getEventResult(_,args){return args.proposalID.toString();}},options.to,options.value,options.description,options.data);case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop();}}},_callee3,this);}));function createProposal(_x7,_x8,_x9){return _createProposal.apply(this,arguments);}return createProposal;}()},{key:"execute",value:function(){var _execute=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contract,accountId,proposal){var data,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=_args4.length>3&&_args4[3]!==undefined?_args4[3]:'0x';this.log("executing proposal in congress \"".concat(contract.options.address,"\", ")+"proposal \"".concat(proposal,"\" with account ").concat(accountId),'info');_context4.next=4;return this.options.executor.executeContractTransaction(this.ensureContract(contract),'executeProposal',{from:accountId,force:true},proposal,data);case 4:case"end":return _context4.stop();}}},_callee4,this);}));function execute(_x10,_x11,_x12){return _execute.apply(this,arguments);}return execute;}()},{key:"getMemberInfo",value:function(){var _getMemberInfo=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(contract,targetAccount){var memberId,fromContract;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.options.executor.executeContractCall(this.ensureContract(contract),'memberId',targetAccount);case 2:memberId=_context5.sent;if(!(memberId.toString()!=='0')){_context5.next=9;break;}_context5.next=6;return this.options.executor.executeContractCall(this.ensureContract(contract),'members',memberId.toString());case 6:fromContract=_context5.sent;if(!(fromContract.member===targetAccount)){_context5.next=9;break;}return _context5.abrupt("return",Object.assign(Object.assign({},fromContract),{memberSince:parseInt("".concat(fromContract.fromContract,"000"),10)}));case 9:return _context5.abrupt("return",null);case 10:case"end":return _context5.stop();}}},_callee5,this);}));function getMemberInfo(_x13,_x14){return _getMemberInfo.apply(this,arguments);}return getMemberInfo;}()},{key:"getProposalCount",value:function(){var _getProposalCount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(contract){return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.t0=parseInt;_context6.next=3;return this.options.executor.executeContractCall(this.ensureContract(contract),'numProposals');case 3:_context6.t1=_context6.sent;return _context6.abrupt("return",(0,_context6.t0)(_context6.t1,10));case 5:case"end":return _context6.stop();}}},_callee6,this);}));function getProposalCount(_x15){return _getProposalCount.apply(this,arguments);}return getProposalCount;}()},{key:"getProposalInfo",value:function(){var _getProposalInfo=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(contract,proposal){var fromContract;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.options.executor.executeContractCall(this.ensureContract(contract),'proposals',proposal);case 2:fromContract=_context7.sent;return _context7.abrupt("return",{currentResult:parseInt(fromContract.currentResult,10),description:fromContract.description,executed:fromContract.executed,minExecutionDate:parseInt("".concat(fromContract.minExecutionDate,"000"),10),numberOfVotes:parseInt(fromContract.numberOfVotes,10),proposalHash:fromContract.proposalHash,proposalPassed:fromContract.proposalPassed,to:fromContract.recipient,value:fromContract.amount});case 4:case"end":return _context7.stop();}}},_callee7,this);}));function getProposalInfo(_x16,_x17){return _getProposalInfo.apply(this,arguments);}return getProposalInfo;}()},{key:"getProposalInfos",value:function(){var _getProposalInfos=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(contract){var _this2=this;var count,offset,reverse,totalCountString,votingsContract,results,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:count=_args9.length>1&&_args9[1]!==undefined?_args9[1]:10;offset=_args9.length>2&&_args9[2]!==undefined?_args9[2]:0;reverse=_args9.length>3&&_args9[3]!==undefined?_args9[3]:true;votingsContract=this.ensureContract(contract);_context9.next=6;return this.options.nameResolver.getArrayFromUintMapping(votingsContract,(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _this2.options.executor.executeContractCall(votingsContract,'numProposals');case 2:totalCountString=_context8.sent;return _context8.abrupt("return",totalCountString);case 4:case"end":return _context8.stop();}}},_callee8);})),function(i){return _this2.getProposalInfo(votingsContract,i);},count,offset,reverse);case 6:results=_context9.sent;return _context9.abrupt("return",{results:results.filter(function(result){return!!result.minExecutionDate;}),totalCount:parseInt(totalCountString,10)});case 8:case"end":return _context9.stop();}}},_callee9,this);}));function getProposalInfos(_x18){return _getProposalInfos.apply(this,arguments);}return getProposalInfos;}()},{key:"isMember",value:function(){var _isMember=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(contract,targetAccount){var memberInfo;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.getMemberInfo(contract,targetAccount);case 2:memberInfo=_context10.sent;return _context10.abrupt("return",!!memberInfo);case 4:case"end":return _context10.stop();}}},_callee10,this);}));function isMember(_x19,_x20){return _isMember.apply(this,arguments);}return isMember;}()},{key:"removeMember",value:function(){var _removeMember=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(contract,accountId,targetAccount){return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return this.options.executor.executeContractTransaction(this.ensureContract(contract),'removeMember',{from:accountId},targetAccount);case 2:case"end":return _context11.stop();}}},_callee11,this);}));function removeMember(_x21,_x22,_x23){return _removeMember.apply(this,arguments);}return removeMember;}()},{key:"vote",value:function(){var _vote=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(contract,accountId,proposal,accept){var comment,_args12=arguments;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:comment=_args12.length>4&&_args12[4]!==undefined?_args12[4]:'';this.log("voting for proposal in congress \"".concat(contract.options.address,"\", ")+"proposal \"".concat(proposal,"\" with account ").concat(accountId,", responst is \"").concat(accept,"\""),'info');_context12.next=4;return this.options.executor.executeContractTransaction(this.ensureContract(contract),'vote',{from:accountId},proposal,accept,comment);case 4:case"end":return _context12.stop();}}},_callee12,this);}));function vote(_x24,_x25,_x26,_x27){return _vote.apply(this,arguments);}return vote;}()},{key:"ensureContract",value:function ensureContract(contract){return typeof contract==='string'?this.options.contractLoader.loadContract('Congress',contract):contract;}}]);return Votings;}(dbcp_1.Logger);exports.Votings=Votings;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726}],38:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var crypto=require("crypto");var prottle=require("prottle");var bignumber_js_1=require("bignumber.js");var dbcp_1=require("@evan.network/dbcp");var utils_1=require("../common/utils");var index_1=require("../index");var VerificationsStatus;(function(VerificationsStatus){VerificationsStatus[VerificationsStatus["Issued"]=0]="Issued";VerificationsStatus[VerificationsStatus["Confirmed"]=1]="Confirmed";VerificationsStatus[VerificationsStatus["Rejected"]=2]="Rejected";})(VerificationsStatus=exports.VerificationsStatus||(exports.VerificationsStatus={}));var VerificationsStatusFlagsV2;(function(VerificationsStatusFlagsV2){VerificationsStatusFlagsV2["disableSubVerifications"]="disableSubVerifications";VerificationsStatusFlagsV2["expired"]="expired";VerificationsStatusFlagsV2["invalid"]="invalid";VerificationsStatusFlagsV2["issued"]="issued";VerificationsStatusFlagsV2["missing"]="missing";VerificationsStatusFlagsV2["noIdentity"]="noIdentity";VerificationsStatusFlagsV2["notEnsRootOwner"]="notEnsRootOwner";VerificationsStatusFlagsV2["parentMissing"]="parentMissing";VerificationsStatusFlagsV2["parentUntrusted"]="parentUntrusted";VerificationsStatusFlagsV2["rejected"]="rejected";VerificationsStatusFlagsV2["selfIssued"]="selfIssued";})(VerificationsStatusFlagsV2=exports.VerificationsStatusFlagsV2||(exports.VerificationsStatusFlagsV2={}));var VerificationsStatusV2;(function(VerificationsStatusV2){VerificationsStatusV2["Green"]="green";VerificationsStatusV2["Yellow"]="yellow";VerificationsStatusV2["Red"]="red";})(VerificationsStatusV2=exports.VerificationsStatusV2||(exports.VerificationsStatusV2={}));var Verifications=function(_dbcp_1$Logger){(0,_inherits2["default"])(Verifications,_dbcp_1$Logger);function Verifications(options){var _this;(0,_classCallCheck2["default"])(this,Verifications);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Verifications).call(this,options));_this.defaultValidationOptions={disableSubVerifications:VerificationsStatusV2.Red,expired:VerificationsStatusV2.Red,invalid:VerificationsStatusV2.Red,issued:VerificationsStatusV2.Red,missing:VerificationsStatusV2.Red,noIdentity:VerificationsStatusV2.Red,notEnsRootOwner:VerificationsStatusV2.Red,parentMissing:VerificationsStatusV2.Red,parentUntrusted:VerificationsStatusV2.Red,rejected:VerificationsStatusV2.Red,selfIssued:VerificationsStatusV2.Red};_this.defaultQueryOptions={validationOptions:_this.defaultValidationOptions};_this.cachedIdentities={};_this.contracts={};_this.encodingEnvelope='binary';_this.ensOwners={};_this.subjectTypes={};_this.verificationCache={};_this.verificationDescriptions={};_this.options=options;if(options.storage){_this.contracts.storage=_this.options.contractLoader.loadContract('V00_UserRegistry',options.storage);}if(options.registry){_this.contracts.registry=_this.options.contractLoader.loadContract('VerificationsRegistry',options.registry);}return _this;}(0,_createClass2["default"])(Verifications,[{key:"computeVerifications",value:function(){var _computeVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(topic,verifications){var computed,creationDates,expirationDates,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,verification,curExpiration;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:computed={creationDate:null,disableSubVerifications:verifications.filter(function(verification){return verification.disableSubVerifications;}).length>0,displayName:topic.split('/').pop()||'evan',loading:verifications.filter(function(verification){return verification.loading;}).length>0,name:topic,status:-1,subjects:[],verifications:verifications,warnings:[]};_context.next=3;return this.ensureVerificationDescription(computed);case 3:creationDates={'-1':[],'0':[],'1':[],'2':[]};expirationDates={'-1':[],'0':[],'1':[],'2':[]};_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=8;for(_iterator=verifications[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){verification=_step.value;computed.warnings=computed.warnings.concat(verification.warnings);if(verification.status===2){if(computed.status===-1){computed.status=2;}}else{if(computed.status===2){computed.status=verification.status;}else{computed.status=computed.status<verification.status?verification.status:computed.status;}}if(computed.subjects.indexOf(verification.subject)===-1){computed.subjects.push(verification.subject);}if(typeof verification.creationDate!=='undefined'){creationDates[verification.status].push(verification.creationDate);}if(typeof verification.expirationDate!=='undefined'){expirationDates[verification.status].push(verification.expirationDate);}}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](8);_didIteratorError=true;_iteratorError=_context.t0;case 16:_context.prev=16;_context.prev=17;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 19:_context.prev=19;if(!_didIteratorError){_context.next=22;break;}throw _iteratorError;case 22:return _context.finish(19);case 23:return _context.finish(16);case 24:if(creationDates[computed.status].length>0){computed.creationDate=creationDates[computed.status].sort()[0];}if(expirationDates[computed.status].length>0){curExpiration=expirationDates[computed.status].sort();computed.expirationDate=curExpiration[curExpiration.length-1];}return _context.abrupt("return",computed);case 27:case"end":return _context.stop();}}},_callee,this,[[8,12,16,24],[17,,19,23]]);}));function computeVerifications(_x,_x2){return _computeVerifications.apply(this,arguments);}return computeVerifications;}()},{key:"confirmVerification",value:function(){var _confirmVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(accountId,subject,verificationId){var isIdentity,_args2=arguments;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isIdentity=_args2.length>3&&_args2[3]!==undefined?_args2[3]:false;_context2.next=3;return this.executeOnIdentity(subject,isIdentity,'approveVerification',{from:accountId},verificationId);case 3:this.deleteFromVerificationCache(subject,'/');case 4:case"end":return _context2.stop();}}},_callee2,this);}));function confirmVerification(_x3,_x4,_x5){return _confirmVerification.apply(this,arguments);}return confirmVerification;}()},{key:"createIdentity",value:function(){var _createIdentity=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(accountId,contractId){var updateDescription,linkContract,identity,identityContract,identityStorage,description,link,_args3=arguments;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:updateDescription=_args3.length>2&&_args3[2]!==undefined?_args3[2]:true;linkContract=_args3.length>3&&_args3[3]!==undefined?_args3[3]:true;_context3.next=4;return this.ensureStorage();case 4:if(!(!contractId&&linkContract)){_context3.next=14;break;}_context3.next=7;return this.options.executor.createContract('VerificationHolder',[accountId],{from:accountId,gas:3000000});case 7:identityContract=_context3.sent;identityStorage=this.contracts.storage.options.address!==utils_1.nullAddress?this.options.contractLoader.loadContract('V00_UserRegistry',this.contracts.storage.options.address):null;_context3.next=11;return this.options.executor.executeContractTransaction(identityStorage,'registerUser',{from:accountId},identityContract.options.address);case 11:identity=identityContract.options.address;_context3.next=29;break;case 14:_context3.next=16;return this.executeAndHandleEventResult(accountId,this.contracts.registry.methods.createIdentity().encodeABI(),{contract:this.contracts.registry,eventName:'IdentityCreated'},function(_,args){return args.identity;});case 16:identity=_context3.sent;if(!updateDescription){_context3.next=25;break;}_context3.next=20;return this.options.description.getDescription(contractId,accountId);case 20:description=_context3.sent;description["public"].identity=identity;if(!description["public"].dbcpVersion||description["public"].dbcpVersion===1){description["public"].dbcpVersion=2;}_context3.next=25;return this.options.description.setDescriptionToContract(contractId,description,accountId);case 25:if(!linkContract){_context3.next=29;break;}link="0x".concat(contractId.substr(2).toLowerCase().padStart(64,'0'));_context3.next=29;return this.executeAndHandleEventResult(accountId,this.contracts.registry.methods.linkIdentity(identity,link).encodeABI());case 29:this.deleteFromVerificationCache(accountId,'/');return _context3.abrupt("return",identity);case 31:case"end":return _context3.stop();}}},_callee3,this);}));function createIdentity(_x6,_x7){return _createIdentity.apply(this,arguments);}return createIdentity;}()},{key:"deleteFromVerificationCache",value:function deleteFromVerificationCache(subject,topic){var _this2=this;if(topic.indexOf('/')!==0){topic='/'+topic;}Object.keys(this.verificationCache).forEach(function(key){if(key===topic){if(_this2.verificationCache[topic]&&(_this2.verificationCache[topic][subject]||subject==='*')){delete _this2.verificationCache[topic][subject];}return;}else if(key.indexOf(topic)!==-1){delete _this2.verificationCache[key];}});}},{key:"deleteVerification",value:function(){var _deleteVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(accountId,subject,verificationId){var isIdentity,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:isIdentity=_args4.length>3&&_args4[3]!==undefined?_args4[3]:false;_context4.next=3;return this.executeOnIdentity(subject,isIdentity,'removeVerification',{from:accountId},verificationId);case 3:this.deleteFromVerificationCache(subject,'/');case 4:case"end":return _context4.stop();}}},_callee4,this);}));function deleteVerification(_x8,_x9,_x10){return _deleteVerification.apply(this,arguments);}return deleteVerification;}()},{key:"ensureVerificationDescription",value:function(){var _ensureVerificationDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(verification){var _this3=this;var fullDomain,topLevelDomain,ensAddress;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:fullDomain=this.getVerificationEnsAddress(verification.name);topLevelDomain=fullDomain.replace('.verifications.evan','').split('.').reverse()[0];ensAddress=this.getFullDescriptionDomainWithHash(verification.name,topLevelDomain);if(verification.description){_context7.next=8;break;}if(!this.verificationDescriptions[ensAddress]&&this.verificationDescriptions[ensAddress]!==false){this.verificationDescriptions[ensAddress]=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return _this3.options.description.getDescriptionFromEns(ensAddress);case 3:return _context5.abrupt("return",_context5.sent);case 6:_context5.prev=6;_context5.t0=_context5["catch"](0);return _context5.abrupt("return",false);case 9:case"end":return _context5.stop();}}},_callee5,null,[[0,6]]);}))();}_context7.next=7;return this.verificationDescriptions[ensAddress];case 7:verification.description=_context7.sent;case 8:if(verification.description){if(verification.description["public"]){verification.description=verification.description["public"];}if(verification.description.imgSquare){verification.icon=verification.description.imgSquare;}}else{verification.description={author:utils_1.nullAddress,dbcpVersion:1,description:verification.name,name:verification.name,version:'1.0.0'};}verification.description.i18n=verification.description.i18n||{};verification.description.i18n.name=verification.description.i18n.name||{};verification.description.i18n.name.en=verification.description.i18n.name.en||verification.name.split('/').pop();try{verification.displayName=verification.description.i18n.name.en;}catch(ex){}if(!this.ensOwners[topLevelDomain]){this.ensOwners[topLevelDomain]=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(){var namehash;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:namehash=_this3.options.nameResolver.namehash(topLevelDomain+'.verifications.evan');_context6.next=3;return _this3.options.executor.executeContractCall(_this3.options.nameResolver.ensContract,'owner',namehash);case 3:return _context6.abrupt("return",_context6.sent);case 4:case"end":return _context6.stop();}}},_callee6);}))();}verification.ensAddress=ensAddress;_context7.next=17;return this.ensOwners[topLevelDomain];case 17:verification.topLevelEnsOwner=_context7.sent;case 18:case"end":return _context7.stop();}}},_callee7,this);}));function ensureVerificationDescription(_x11){return _ensureVerificationDescription.apply(this,arguments);}return ensureVerificationDescription;}()},{key:"executeVerification",value:function(){var _executeVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(accountId,txInfo){return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.executeTransaction(accountId,txInfo,{event:{target:'VerificationHolderLibrary',targetAddress:txInfo.targetIdentity,eventName:'VerificationAdded',contract:this.options.contractLoader.loadContract('VerificationHolderLibrary',txInfo.targetIdentity)},getEventResult:function getEventResult(_,args){return args.verificationId;}});case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop();}}},_callee8,this);}));function executeVerification(_x12,_x13){return _executeVerification.apply(this,arguments);}return executeVerification;}()},{key:"executeTransaction",value:function(){var _executeTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(accountId,txInfo){var _ref3,_ref3$event,event,_ref3$getEventResult,getEventResult,sourceIdentity,to,value,input,signedTransactionInfo,targetIdentity,transactionTarget,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_ref3=_args9.length>2&&_args9[2]!==undefined?_args9[2]:{},_ref3$event=_ref3.event,event=_ref3$event===void 0?null:_ref3$event,_ref3$getEventResult=_ref3.getEventResult,getEventResult=_ref3$getEventResult===void 0?null:_ref3$getEventResult;sourceIdentity=txInfo.sourceIdentity,to=txInfo.to,value=txInfo.value,input=txInfo.input,signedTransactionInfo=txInfo.signedTransactionInfo,targetIdentity=txInfo.targetIdentity;transactionTarget=to?to:targetIdentity.length===42?targetIdentity:this.contracts.registry.options.address;return _context9.abrupt("return",this.executeAndHandleEventResult(accountId,input,event,getEventResult,sourceIdentity,value,transactionTarget,signedTransactionInfo));case 4:case"end":return _context9.stop();}}},_callee9,this);}));function executeTransaction(_x14,_x15){return _executeTransaction.apply(this,arguments);}return executeTransaction;}()},{key:"getComputedVerification",value:function(){var _getComputedVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(subject,topic,isIdentity){return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.t0=this;_context10.t1=topic;_context10.next=4;return this.getNestedVerifications(subject,topic,isIdentity);case 4:_context10.t2=_context10.sent;_context10.next=7;return _context10.t0.computeVerifications.call(_context10.t0,_context10.t1,_context10.t2);case 7:return _context10.abrupt("return",_context10.sent);case 8:case"end":return _context10.stop();}}},_callee10,this);}));function getComputedVerification(_x16,_x17,_x18){return _getComputedVerification.apply(this,arguments);}return getComputedVerification;}()},{key:"getExecutionNonce",value:function(){var _getExecutionNonce=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(issuer){var isIdentity,identity,identityContract,_args11=arguments;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:isIdentity=_args11.length>1&&_args11[1]!==undefined?_args11[1]:false;_context11.next=3;return this.ensureStorage();case 3:if(!isIdentity){_context11.next=7;break;}_context11.t0=issuer;_context11.next=10;break;case 7:_context11.next=9;return this.getIdentityForAccount(issuer,true);case 9:_context11.t0=_context11.sent;case 10:identity=_context11.t0;identityContract=this.options.contractLoader.loadContract('VerificationHolder',identity);return _context11.abrupt("return",this.options.executor.executeContractCall(identityContract,'getExecutionNonce'));case 13:case"end":return _context11.stop();}}},_callee11,this);}));function getExecutionNonce(_x19){return _getExecutionNonce.apply(this,arguments);}return getExecutionNonce;}()},{key:"getIdentityForAccount",value:function(){var _getIdentityForAccount=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(subject,onlyAddress){var targetIdentity,description,linked,msg,_msg;return _regenerator["default"].wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(this.cachedIdentities[subject]){_context12.next=35;break;}_context12.next=3;return this.ensureStorage();case 3:_context12.next=5;return this.options.executor.executeContractCall(this.contracts.storage,'users',subject);case 5:targetIdentity=_context12.sent;if(!(targetIdentity!==utils_1.nullAddress)){_context12.next=11;break;}this.subjectTypes[subject]='account';this.cachedIdentities[subject]=this.options.contractLoader.loadContract('VerificationHolder',targetIdentity);_context12.next=35;break;case 11:_context12.prev=11;_context12.next=14;return this.options.description.getDescription(subject,null);case 14:description=_context12.sent;_context12.next=20;break;case 17:_context12.prev=17;_context12.t0=_context12["catch"](11);throw new Error("could not get identity for \"".concat(subject,"\" use either an account with an identity, ")+'a contract with a description or work with the 32Bytes identity instead of contractId');case 20:if(!(description&&description["public"])){_context12.next=31;break;}this.subjectTypes[subject]='contract';if(!description["public"].identity){_context12.next=31;break;}_context12.next=25;return this.options.executor.executeContractCall(this.contracts.registry,'getLink',description["public"].identity);case 25:linked=_context12.sent;if(new RegExp("".concat(subject.substr(2),"$"),'i').test(linked)){_context12.next=30;break;}msg="subject description of \"".concat(subject,"\" points to identity ")+"\"".concat(description["public"].identity,"\", but this identity is linked to address ")+"\"".concat(linked,"\"");this.log(msg,'error');throw new Error(msg);case 30:this.cachedIdentities[subject]=description["public"].identity;case 31:if(description&&description["public"]&&description["public"].identity){_context12.next=35;break;}_msg="could not find identity for \"".concat(subject,"\"");this.log(_msg,'error');throw new Error(_msg);case 35:if(!(onlyAddress&&this.cachedIdentities[subject].options)){_context12.next=39;break;}return _context12.abrupt("return",this.cachedIdentities[subject].options.address);case 39:return _context12.abrupt("return",this.cachedIdentities[subject]);case 40:case"end":return _context12.stop();}}},_callee12,this,[[11,17]]);}));function getIdentityForAccount(_x20,_x21){return _getIdentityForAccount.apply(this,arguments);}return getIdentityForAccount;}()},{key:"getNestedVerifications",value:function(){var _getNestedVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(subject,topic,isIdentity){var _this4=this;return _regenerator["default"].wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(topic.indexOf('/')!==0){topic='/'+topic;}_context15.next=3;return this.ensureStorage();case 3:this.verificationCache[topic]=this.verificationCache[topic]||{};if(!this.verificationCache[topic][subject]){this.verificationCache[topic][subject]=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(){var verifications,subjectIdentity,computed;return _regenerator["default"].wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:verifications=[];if(!isIdentity){_context14.next=5;break;}subjectIdentity=subject;_context14.next=14;break;case 5:_context14.prev=5;_context14.next=8;return _this4.getIdentityForAccount(subject,true);case 8:subjectIdentity=_context14.sent;_context14.next=14;break;case 11:_context14.prev=11;_context14.t0=_context14["catch"](5);verifications=[];case 14:if(!(subjectIdentity!==utils_1.nullAddress)){_context14.next=18;break;}_context14.next=17;return _this4.getVerifications(subject,topic,isIdentity);case 17:verifications=_context14.sent;case 18:if(!(verifications.length>0)){_context14.next=25;break;}_context14.next=21;return prottle(10,verifications.map(function(verification){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(){var splitName,dataHash,whitelistWarnings;return _regenerator["default"].wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:splitName=verification.name.split('/');verification.displayName=splitName.pop();verification.parent=splitName.join('/');verification.warnings=[];verification.creationDate=verification.creationDate*1000;if(verification.expirationDate){verification.expirationDate=verification.expirationDate*1000;}verification.subjectIdentity=subjectIdentity;if(!(_this4.subjectTypes[subject]==='contract')){_context13.next=18;break;}verification.subjectType='contract';_context13.t0=_this4.options.executor;_context13.next=12;return _this4.options.contractLoader.loadContract('BaseContract',subject);case 12:_context13.t1=_context13.sent;_context13.next=15;return _context13.t0.executeContractCall.call(_context13.t0,_context13.t1,'owner');case 15:verification.subjectOwner=_context13.sent;_context13.next=19;break;case 18:verification.subjectType='account';case 19:dataHash=_this4.options.nameResolver.soliditySha3(verification.subjectIdentity,verification.topic,verification.data).replace('0x','');verification.issuerAccount=_this4.options.executor.web3.eth.accounts.recover(dataHash,verification.signature);_context13.next=23;return _this4.ensureVerificationDescription(verification);case 23:if(verification.status===0){verification.warnings.push('issued');}if(verification.status===2){verification.warnings.unshift('rejected');}if(!verification.valid){verification.warnings.push('invalid');}if(verification.issuerAccount===verification.subject&&verification.parent&&verification.issuerAccount!==_this4.options.config.ensRootOwner){verification.warnings.push('selfIssued');}if(verification.expirationDate&&verification.expirationDate<Date.now()){verification.warnings.push('expired');}if(!verification.parent){_context13.next=39;break;}_context13.next=31;return _this4.getNestedVerifications(verification.issuerAccount,verification.parent,false);case 31:verification.parents=_context13.sent;_context13.next=34;return _this4.computeVerifications(verification.parent,verification.parents);case 34:verification.parentComputed=_context13.sent;if(verification.parentComputed.status===-1){verification.warnings.push('parentMissing');}else if(verification.parentComputed.status===0){verification.warnings.push('parentUntrusted');}if(verification.parentComputed.disableSubVerifications||verification.parentComputed.warnings.indexOf('disableSubVerifications')!==-1){verification.warnings.push('disableSubVerifications');}_context13.next=41;break;case 39:verification.parents=[];if(verification.name==='/evan'&&verification.issuerAccount!==_this4.options.config.ensRootOwner){verification.warnings=['notEnsRootOwner'];}else{whitelistWarnings=['expired','rejected','invalid','noIdentity','issued'];verification.warnings=verification.warnings.filter(function(warning){return whitelistWarnings.indexOf(warning)!==-1;});}case 41:if(verification.status!==2){verification.status=verification.warnings.length>0?0:1;}case 42:case"end":return _context13.stop();}}},_callee13);}));}));case 21:_context14.next=23;return _this4.computeVerifications(topic,verifications);case 23:computed=_context14.sent;verifications.forEach(function(verification){return verification.levelComputed=computed;});case 25:if(!(verifications.length===0)){_context14.next=42;break;}verifications.push({displayName:topic.split('/').pop()||'evan',name:topic,parents:[],status:-1,subject:subject,tree:[],warnings:['missing'],subjectIdentity:subjectIdentity||utils_1.nullAddress});if(!(_this4.subjectTypes[subject]==='contract')){_context14.next=38;break;}verifications[0].subjectType='contract';_context14.t1=_this4.options.executor;_context14.next=32;return _this4.options.contractLoader.loadContract('BaseContract',subject);case 32:_context14.t2=_context14.sent;_context14.next=35;return _context14.t1.executeContractCall.call(_context14.t1,_context14.t2,'owner');case 35:verifications[0].subjectOwner=_context14.sent;_context14.next=39;break;case 38:verifications[0].subjectType='account';case 39:if(!subjectIdentity){verifications[0].warnings.unshift('noIdentity');}_context14.next=42;return _this4.ensureVerificationDescription(verifications[0]);case 42:return _context14.abrupt("return",verifications);case 43:case"end":return _context14.stop();}}},_callee14,null,[[5,11]]);}))();}_context15.next=7;return this.verificationCache[topic][subject];case 7:return _context15.abrupt("return",_context15.sent);case 8:case"end":return _context15.stop();}}},_callee15,this);}));function getNestedVerifications(_x22,_x23,_x24){return _getNestedVerifications.apply(this,arguments);}return getNestedVerifications;}()},{key:"getNestedVerificationsV2",value:function(){var _getNestedVerificationsV=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(subject,topic,isIdentity,queryOptions){var nested;return _regenerator["default"].wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return this.getNestedVerifications(subject,topic,isIdentity);case 2:nested=_context16.sent;return _context16.abrupt("return",this.formatToV2(nested,queryOptions||this.defaultQueryOptions));case 4:case"end":return _context16.stop();}}},_callee16,this);}));function getNestedVerificationsV2(_x25,_x26,_x27,_x28){return _getNestedVerificationsV.apply(this,arguments);}return getNestedVerificationsV2;}()},{key:"getTransactionInfo",value:function(){var _getTransactionInfo=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(){var _contract$methods;var contract,functionName,options,sourceIdentity,nonce,_len,args,_key,input,to,value,_args17=arguments;return _regenerator["default"].wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:contract=_args17.length>0&&_args17[0]!==undefined?_args17[0]:null;functionName=_args17.length>1&&_args17[1]!==undefined?_args17[1]:null;options=_args17.length>2?_args17[2]:undefined;_context17.next=5;return this.getIdentityForAccount(options.from,true);case 5:sourceIdentity=_context17.sent;if(!(typeof options.nonce!=='undefined'&&options.nonce!==-1)){_context17.next=10;break;}_context17.t0="".concat(options.nonce);_context17.next=13;break;case 10:_context17.next=12;return this.getExecutionNonce(sourceIdentity,true);case 12:_context17.t0=_context17.sent;case 13:nonce=_context17.t0;for(_len=_args17.length,args=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){args[_key-3]=_args17[_key];}input=contract?(_contract$methods=contract.methods)[functionName].apply(_contract$methods,args).encodeABI():options.input;to=contract?contract.options.address:options.to||utils_1.nullAddress;value=options.value||0;return _context17.abrupt("return",{sourceIdentity:sourceIdentity,to:to,value:value,input:input,nonce:nonce});case 19:case"end":return _context17.stop();}}},_callee17,this);}));function getTransactionInfo(){return _getTransactionInfo.apply(this,arguments);}return getTransactionInfo;}()},{key:"getVerificationEnsAddress",value:function getVerificationEnsAddress(topic){var clearedTopic=topic.replace(/^(?:(?:\/)?(?:evan)?)(?:\/)?/gm,'');var domain='verifications.evan';if(clearedTopic.length>0){domain="".concat(clearedTopic.split('/').reverse().join('.'),".").concat(domain);}else if(topic.indexOf('/evan')===0||topic.indexOf('evan')===0){domain="evan.".concat(domain);}return domain;}},{key:"getVerifications",value:function(){var _getVerifications=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee20(subject,topic,isIdentity){var _this5=this;var sha3VerificationName,uint256VerificationName,verificationsForTopic,verifications;return _regenerator["default"].wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:sha3VerificationName=this.options.nameResolver.soliditySha3(topic);uint256VerificationName=new bignumber_js_1.BigNumber(sha3VerificationName).toString(10);_context20.next=4;return this.callOnIdentity(subject,isIdentity,'getVerificationIdsByTopic',uint256VerificationName);case 4:verificationsForTopic=_context20.sent;_context20.next=7;return Promise.all(verificationsForTopic.map(function(){var _ref6=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(verificationId){var verificationDetails,_ref8,_ref9,verification,verificationStatus,creationBlockRaw,creationDateRaw,disableSubVerifications,expirationDateRaw,rejected,description,expirationDate,creationBlock,creationDate,verificationFlag,rejectReason,ipfsResponse,msg;return _regenerator["default"].wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:verificationDetails=['getVerification','isVerificationApproved','verificationCreationBlock','verificationCreationDate','getDisableSubVerifications','getVerificationExpirationDate','isVerificationRejected'].map(function(fun){return _this5.callOnIdentity(subject,isIdentity,fun,verificationId);});verificationDetails.push((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(){var descriptionNodeHash,resolverAddress,resolver,descriptionHash,envelope;return _regenerator["default"].wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.next=2;return _this5.callOnIdentity(subject,isIdentity,'getVerificationDescription',verificationId);case 2:descriptionNodeHash=_context18.sent;if(!(descriptionNodeHash===utils_1.nullBytes32)){_context18.next=7;break;}return _context18.abrupt("return",null);case 7:_context18.next=9;return _this5.options.executor.executeContractCall(_this5.options.nameResolver.ensContract,'resolver',descriptionNodeHash);case 9:resolverAddress=_context18.sent;if(!(resolverAddress===utils_1.nullAddress)){_context18.next=14;break;}return _context18.abrupt("return",null);case 14:resolver=_this5.options.contractLoader.loadContract('PublicResolver',resolverAddress);_context18.next=17;return _this5.options.executor.executeContractCall(resolver,'content',descriptionNodeHash);case 17:descriptionHash=_context18.sent;_context18.next=20;return _this5.options.dfs.get(descriptionHash);case 20:_context18.t0=_this5.encodingEnvelope;envelope=_context18.sent.toString(_context18.t0);return _context18.abrupt("return",JSON.parse(envelope)["public"]);case 23:case"end":return _context18.stop();}}},_callee18);}))());_context19.next=4;return Promise.all(verificationDetails);case 4:_ref8=_context19.sent;_ref9=(0,_slicedToArray2["default"])(_ref8,8);verification=_ref9[0];verificationStatus=_ref9[1];creationBlockRaw=_ref9[2];creationDateRaw=_ref9[3];disableSubVerifications=_ref9[4];expirationDateRaw=_ref9[5];rejected=_ref9[6];description=_ref9[7];expirationDate=expirationDateRaw.toString?expirationDateRaw.toString():expirationDateRaw;creationBlock=creationBlockRaw.toNumber?creationBlockRaw.toNumber():creationBlockRaw;creationDate=creationDateRaw.toString?creationDateRaw.toString():creationDateRaw;if(!(verification.issuer===utils_1.nullAddress)){_context19.next=19;break;}return _context19.abrupt("return",false);case 19:verificationFlag=verificationStatus?VerificationsStatus.Confirmed:VerificationsStatus.Issued;if(rejected.rejected){verificationFlag=VerificationsStatus.Rejected;}if(!(rejected.rejectReason!==utils_1.nullBytes32)){_context19.next=33;break;}_context19.prev=22;_context19.next=25;return _this5.options.dfs.get(rejected.rejectReason);case 25:ipfsResponse=_context19.sent;rejectReason=JSON.parse(ipfsResponse.toString());_context19.next=33;break;case 29:_context19.prev=29;_context19.t0=_context19["catch"](22);msg="error parsing rejectReason -> ".concat(_context19.t0.message);_this5.log(msg,'info');case 33:_context19.t1=creationBlock;_context19.t2=creationDate;_context19.t3=verification.data;_context19.t4=description;_context19.t5=disableSubVerifications;_context19.t6="".concat(expirationDate)==='0'?null:expirationDate;_context19.t7="".concat(expirationDate)==='0'?false:expirationDate*1000<Date.now();_context19.t8=verificationId;_context19.t9=verification.issuer;_context19.t10=topic;_context19.t11=rejectReason;_context19.t12=verification.signature;_context19.t13=verificationFlag;_context19.t14=subject;_context19.t15=verification.topic.toString();_context19.t16=verification.uri;_context19.next=51;return _this5.validateVerification(subject,verificationId,isIdentity);case 51:_context19.t17=_context19.sent;return _context19.abrupt("return",{creationBlock:_context19.t1,creationDate:_context19.t2,data:_context19.t3,description:_context19.t4,disableSubVerifications:_context19.t5,expirationDate:_context19.t6,expired:_context19.t7,id:_context19.t8,issuer:_context19.t9,name:_context19.t10,rejectReason:_context19.t11,signature:_context19.t12,status:_context19.t13,subject:_context19.t14,topic:_context19.t15,uri:_context19.t16,valid:_context19.t17});case 53:case"end":return _context19.stop();}}},_callee19,null,[[22,29]]);}));return function(_x32){return _ref6.apply(this,arguments);};}()));case 7:verifications=_context20.sent;return _context20.abrupt("return",verifications.filter(function(el){return el;}));case 9:case"end":return _context20.stop();}}},_callee20,this);}));function getVerifications(_x29,_x30,_x31){return _getVerifications.apply(this,arguments);}return getVerifications;}()},{key:"identityAvailable",value:function(){var _identityAvailable=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee21(subject){var identity;return _regenerator["default"].wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return this.ensureStorage();case 2:_context21.next=4;return this.options.executor.executeContractCall(this.contracts.storage,'users',subject);case 4:identity=_context21.sent;if(!(!identity||identity===utils_1.nullAddress)){_context21.next=9;break;}return _context21.abrupt("return",false);case 9:return _context21.abrupt("return",true);case 10:case"end":return _context21.stop();}}},_callee21,this);}));function identityAvailable(_x33){return _identityAvailable.apply(this,arguments);}return identityAvailable;}()},{key:"rejectVerification",value:function(){var _rejectVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee22(accountId,subject,verificationId,rejectReason){var isIdentity,stringified,stateMd5,msg,_args22=arguments;return _regenerator["default"].wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:isIdentity=_args22.length>4&&_args22[4]!==undefined?_args22[4]:false;if(!rejectReason){_context22.next=16;break;}_context22.prev=2;stringified=JSON.stringify(rejectReason);stateMd5=crypto.createHash('md5').update(stringified).digest('hex');_context22.next=7;return this.options.dfs.add(stateMd5,Buffer.from(stringified));case 7:rejectReason=_context22.sent;_context22.next=14;break;case 10:_context22.prev=10;_context22.t0=_context22["catch"](2);msg="error parsing verificationValue -> ".concat(_context22.t0.message);this.log(msg,'info');case 14:_context22.next=17;break;case 16:rejectReason=utils_1.nullBytes32;case 17:_context22.next=19;return this.executeOnIdentity(subject,isIdentity,'rejectVerification',{from:accountId},verificationId,rejectReason);case 19:this.deleteFromVerificationCache(subject,'/');case 20:case"end":return _context22.stop();}}},_callee22,this,[[2,10]]);}));function rejectVerification(_x34,_x35,_x36,_x37){return _rejectVerification.apply(this,arguments);}return rejectVerification;}()},{key:"setVerification",value:function(){var _setVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee23(issuer,subject,topic){var expirationDate,verificationValue,descriptionDomain,disableSubVerifications,isIdentity,uri,_ref10,targetIdentity,subjectType,uint256VerificationName,sourceIdentity,signature,verificationData,verificationDataUrl,ensFullNodeHash,_args23=arguments;return _regenerator["default"].wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:expirationDate=_args23.length>3&&_args23[3]!==undefined?_args23[3]:0;verificationValue=_args23.length>4?_args23[4]:undefined;descriptionDomain=_args23.length>5?_args23[5]:undefined;disableSubVerifications=_args23.length>6&&_args23[6]!==undefined?_args23[6]:false;isIdentity=_args23.length>7&&_args23[7]!==undefined?_args23[7]:false;uri=_args23.length>8&&_args23[8]!==undefined?_args23[8]:'';_context23.next=8;return this.ensureStorage();case 8:_context23.next=10;return this.getSetVerificationData(issuer,subject,topic,verificationValue,descriptionDomain,isIdentity,uri);case 10:_ref10=_context23.sent;targetIdentity=_ref10.targetIdentity;subjectType=_ref10.subjectType;uint256VerificationName=_ref10.uint256VerificationName;sourceIdentity=_ref10.sourceIdentity;signature=_ref10.signature;verificationData=_ref10.verificationData;verificationDataUrl=_ref10.verificationDataUrl;ensFullNodeHash=_ref10.ensFullNodeHash;this.deleteFromVerificationCache(subject,topic);_context23.next=22;return this.executeOnIdentity(targetIdentity,true,'addVerificationWithMetadata',{from:issuer,event:{target:subjectType==='contract'?'VerificationsRegistryLibrary':'VerificationHolderLibrary',eventName:'VerificationAdded'},getEventResult:function getEventResult(_,args){return args.verificationId;}},uint256VerificationName,'1',sourceIdentity,signature,verificationData,verificationDataUrl,expirationDate,ensFullNodeHash,disableSubVerifications);case 22:return _context23.abrupt("return",_context23.sent);case 23:case"end":return _context23.stop();}}},_callee23,this);}));function setVerification(_x38,_x39,_x40){return _setVerification.apply(this,arguments);}return setVerification;}()},{key:"setVerificationDescription",value:function(){var _setVerificationDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee24(accountId,topic,domain,description){var toSet,domainWithHash;return _regenerator["default"].wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:toSet=JSON.parse(JSON.stringify(description));if(!toSet.hasOwnProperty('public')){toSet={"public":toSet};}domainWithHash=this.getFullDescriptionDomainWithHash(topic,domain);_context24.next=5;return this.options.description.setDescription(domainWithHash,toSet,accountId);case 5:this.deleteFromVerificationCache('*',topic);case 6:case"end":return _context24.stop();}}},_callee24,this);}));function setVerificationDescription(_x41,_x42,_x43,_x44){return _setVerificationDescription.apply(this,arguments);}return setVerificationDescription;}()},{key:"signTransaction",value:function(){var _signTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee25(){var contract,functionName,options,_len2,args,_key2,_ref11,sourceIdentity,to,value,input,nonce,signedTransactionInfo,_args25=arguments;return _regenerator["default"].wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:contract=_args25.length>0&&_args25[0]!==undefined?_args25[0]:null;functionName=_args25.length>1&&_args25[1]!==undefined?_args25[1]:null;options=_args25.length>2?_args25[2]:undefined;for(_len2=_args25.length,args=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){args[_key2-3]=_args25[_key2];}_context25.next=6;return this.getTransactionInfo.apply(this,[contract,functionName,options].concat(args));case 6:_ref11=_context25.sent;sourceIdentity=_ref11.sourceIdentity;to=_ref11.to;value=_ref11.value;input=_ref11.input;nonce=_ref11.nonce;_context25.next=14;return this.signPackedHash(options.from,[sourceIdentity,nonce,to,value,input]);case 14:signedTransactionInfo=_context25.sent;return _context25.abrupt("return",{sourceIdentity:sourceIdentity,to:to,value:value,input:input,signedTransactionInfo:signedTransactionInfo,nonce:nonce});case 16:case"end":return _context25.stop();}}},_callee25,this);}));function signTransaction(){return _signTransaction.apply(this,arguments);}return signTransaction;}()},{key:"signSetVerificationTransaction",value:function(){var _signSetVerificationTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee26(issuer,subject,topic){var expirationDate,verificationValue,descriptionDomain,disableSubVerifications,isIdentity,executionNonce,uri,_ref12,targetIdentity,uint256VerificationName,sourceIdentity,signature,verificationData,verificationDataUrl,ensFullNodeHash,targetIdentityContract,txInfo,_args26=arguments;return _regenerator["default"].wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:expirationDate=_args26.length>3&&_args26[3]!==undefined?_args26[3]:0;verificationValue=_args26.length>4?_args26[4]:undefined;descriptionDomain=_args26.length>5?_args26[5]:undefined;disableSubVerifications=_args26.length>6&&_args26[6]!==undefined?_args26[6]:false;isIdentity=_args26.length>7&&_args26[7]!==undefined?_args26[7]:false;executionNonce=_args26.length>8&&_args26[8]!==undefined?_args26[8]:-1;uri=_args26.length>9&&_args26[9]!==undefined?_args26[9]:'';_context26.next=9;return this.ensureStorage();case 9:_context26.next=11;return this.getSetVerificationData(issuer,subject,topic,verificationValue,descriptionDomain,isIdentity,uri);case 11:_ref12=_context26.sent;targetIdentity=_ref12.targetIdentity;uint256VerificationName=_ref12.uint256VerificationName;sourceIdentity=_ref12.sourceIdentity;signature=_ref12.signature;verificationData=_ref12.verificationData;verificationDataUrl=_ref12.verificationDataUrl;ensFullNodeHash=_ref12.ensFullNodeHash;targetIdentityContract=this.options.contractLoader.loadContract('VerificationHolder',targetIdentity);_context26.next=22;return this.signTransaction(targetIdentityContract,'addVerificationWithMetadata',{from:issuer,nonce:executionNonce},uint256VerificationName,'1',sourceIdentity,signature,verificationData,verificationDataUrl,expirationDate,ensFullNodeHash,disableSubVerifications);case 22:txInfo=_context26.sent;return _context26.abrupt("return",{sourceIdentity:txInfo.sourceIdentity,targetIdentity:txInfo.to,value:txInfo.value,input:txInfo.input,signedTransactionInfo:txInfo.signedTransactionInfo,nonce:txInfo.nonce});case 24:case"end":return _context26.stop();}}},_callee26,this);}));function signSetVerificationTransaction(_x45,_x46,_x47){return _signSetVerificationTransaction.apply(this,arguments);}return signSetVerificationTransaction;}()},{key:"trimToStatusTree",value:function trimToStatusTree(inputResult){var trimmed={status:inputResult.status,verifications:inputResult.verifications.map(function(v){return{details:{status:v.details.status,topic:inputResult.levelComputed.topic},statusFlags:v.statusFlags};})};if(inputResult.levelComputed&&inputResult.levelComputed.parents){trimmed.levelComputed={parents:this.trimToStatusTree(inputResult.levelComputed.parents)};}return trimmed;}},{key:"validateVerification",value:function(){var _validateVerification=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee27(subject,verificationId,isIdentity){var subjectIdentity,verification,dataHash,recoveredAddress,issuerContract,keyHasPurpose;return _regenerator["default"].wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.next=2;return this.ensureStorage();case 2:if(!isIdentity){_context27.next=6;break;}_context27.t0=subject;_context27.next=9;break;case 6:_context27.next=8;return this.getIdentityForAccount(subject,true);case 8:_context27.t0=_context27.sent;case 9:subjectIdentity=_context27.t0;_context27.next=12;return this.callOnIdentity(subject,isIdentity,'getVerification',verificationId);case 12:verification=_context27.sent;dataHash=this.options.nameResolver.soliditySha3(subjectIdentity,verification.topic.toString(),verification.data).replace('0x','');recoveredAddress=this.options.executor.web3.eth.accounts.recover(dataHash,verification.signature);issuerContract=this.options.contractLoader.loadContract('VerificationHolder',verification.issuer);_context27.next=18;return this.options.executor.executeContractCall(issuerContract,'keyHasPurpose',this.options.nameResolver.soliditySha3(recoveredAddress),'1');case 18:keyHasPurpose=_context27.sent;return _context27.abrupt("return",keyHasPurpose);case 20:case"end":return _context27.stop();}}},_callee27,this);}));function validateVerification(_x48,_x49,_x50){return _validateVerification.apply(this,arguments);}return validateVerification;}()},{key:"callOnIdentity",value:function(){var _callOnIdentity=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee28(subject,isIdentity,fun){var subjectType,_len3,args,_key3,_this$options$executo,_this$options$executo2,_args28=arguments;return _regenerator["default"].wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_context28.next=2;return this.getSubjectType(subject,isIdentity);case 2:subjectType=_context28.sent;for(_len3=_args28.length,args=new Array(_len3>3?_len3-3:0),_key3=3;_key3<_len3;_key3++){args[_key3-3]=_args28[_key3];}if(!(subjectType==='contract')){_context28.next=22;break;}_context28.t0=(_this$options$executo=this.options.executor).executeContractCall;_context28.t1=_this$options$executo;_context28.t2=this.contracts.registry;_context28.t3=fun;if(!isIdentity){_context28.next=13;break;}_context28.t4=subject;_context28.next=16;break;case 13:_context28.next=15;return this.getIdentityForAccount(subject);case 15:_context28.t4=_context28.sent;case 16:_context28.t5=_context28.t4;_context28.t6=args;_context28.t7=[_context28.t2,_context28.t3,_context28.t5].concat(_context28.t6);return _context28.abrupt("return",_context28.t0.apply.call(_context28.t0,_context28.t1,_context28.t7));case 22:if(!(subjectType==='account')){_context28.next=37;break;}_context28.t8=(_this$options$executo2=this.options.executor).executeContractCall;_context28.t9=_this$options$executo2;if(!isIdentity){_context28.next=29;break;}_context28.t10=this.options.contractLoader.loadContract('VerificationHolder',subject);_context28.next=32;break;case 29:_context28.next=31;return this.getIdentityForAccount(subject);case 31:_context28.t10=_context28.sent;case 32:_context28.t11=_context28.t10;_context28.t12=fun;_context28.t13=args;_context28.t14=[_context28.t11,_context28.t12].concat(_context28.t13);return _context28.abrupt("return",_context28.t8.apply.call(_context28.t8,_context28.t9,_context28.t14));case 37:case"end":return _context28.stop();}}},_callee28,this);}));function callOnIdentity(_x51,_x52,_x53){return _callOnIdentity.apply(this,arguments);}return callOnIdentity;}()},{key:"computeStatus",value:function(){var _computeStatus=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee29(partialResult,queryOptions){var status,bestReachableStatus,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,verification,currentVerificationStatus,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,statusFlag,tempStatus;return _regenerator["default"].wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:bestReachableStatus=VerificationsStatusV2.Green;if(partialResult.levelComputed.parents&&partialResult.levelComputed.parents.verifications.length){bestReachableStatus=partialResult.levelComputed.parents.status;}_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context29.prev=5;_iterator2=partialResult.verifications[Symbol.iterator]();case 7:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context29.next=67;break;}verification=_step2.value;currentVerificationStatus=void 0;if(!(verification.statusFlags&&verification.statusFlags.length)){_context29.next=63;break;}currentVerificationStatus=VerificationsStatusV2.Red;_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context29.prev=15;_iterator3=verification.statusFlags[Symbol.iterator]();case 17:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context29.next=46;break;}statusFlag=_step3.value;tempStatus=VerificationsStatusV2.Red;if(!(typeof queryOptions.validationOptions[statusFlag]==='function')){_context29.next=26;break;}_context29.next=23;return queryOptions.validationOptions[statusFlag](verification,partialResult);case 23:tempStatus=_context29.sent;_context29.next=37;break;case 26:if(!(typeof queryOptions.validationOptions[statusFlag]==='string')){_context29.next=30;break;}tempStatus=queryOptions.validationOptions[statusFlag];_context29.next=37;break;case 30:if(!(typeof this.defaultValidationOptions[statusFlag]==='function')){_context29.next=36;break;}_context29.next=33;return this.defaultValidationOptions[statusFlag](verification,partialResult);case 33:tempStatus=_context29.sent;_context29.next=37;break;case 36:if(typeof this.defaultValidationOptions[statusFlag]==='string'){tempStatus=this.defaultValidationOptions[statusFlag];}case 37:if(!(tempStatus===VerificationsStatusV2.Red||bestReachableStatus===VerificationsStatusV2.Red)){_context29.next=42;break;}currentVerificationStatus=VerificationsStatusV2.Red;return _context29.abrupt("break",46);case 42:if(tempStatus===VerificationsStatusV2.Yellow){currentVerificationStatus=VerificationsStatusV2.Yellow;}else if(currentVerificationStatus!==VerificationsStatusV2.Yellow){currentVerificationStatus=bestReachableStatus;}case 43:_iteratorNormalCompletion3=true;_context29.next=17;break;case 46:_context29.next=52;break;case 48:_context29.prev=48;_context29.t0=_context29["catch"](15);_didIteratorError3=true;_iteratorError3=_context29.t0;case 52:_context29.prev=52;_context29.prev=53;if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}case 55:_context29.prev=55;if(!_didIteratorError3){_context29.next=58;break;}throw _iteratorError3;case 58:return _context29.finish(55);case 59:return _context29.finish(52);case 60:verification.details.status=currentVerificationStatus;_context29.next=64;break;case 63:verification.details.status=bestReachableStatus;case 64:_iteratorNormalCompletion2=true;_context29.next=7;break;case 67:_context29.next=73;break;case 69:_context29.prev=69;_context29.t1=_context29["catch"](5);_didIteratorError2=true;_iteratorError2=_context29.t1;case 73:_context29.prev=73;_context29.prev=74;if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}case 76:_context29.prev=76;if(!_didIteratorError2){_context29.next=79;break;}throw _iteratorError2;case 79:return _context29.finish(76);case 80:return _context29.finish(73);case 81:if(partialResult.verifications.filter(function(v){return v.details.status===VerificationsStatusV2.Green;}).length){status=VerificationsStatusV2.Green;}else if(partialResult.verifications.filter(function(v){return v.details.status===VerificationsStatusV2.Yellow;}).length){status=VerificationsStatusV2.Yellow;}else{status=VerificationsStatusV2.Red;}if(!queryOptions.statusComputer){_context29.next=86;break;}_context29.next=85;return queryOptions.statusComputer(partialResult,queryOptions,status);case 85:status=_context29.sent;case 86:return _context29.abrupt("return",status);case 87:case"end":return _context29.stop();}}},_callee29,this,[[5,69,73,81],[15,48,52,60],[53,,55,59],[74,,76,80]]);}));function computeStatus(_x54,_x55){return _computeStatus.apply(this,arguments);}return computeStatus;}()},{key:"ensureStorage",value:function(){var _ensureStorage=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee30(){var _ref13,_ref14,identityStorage,contractIdentityStorage;return _regenerator["default"].wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:if(!(!this.contracts.storage||!this.contracts.registry)){_context30.next=10;break;}if(!this.storageEnsuring){this.storageEnsuring=Promise.all([this.options.storage||this.options.nameResolver.getAddress("identities.".concat(this.options.nameResolver.config.labels.ensRoot)),this.options.registry||this.options.nameResolver.getAddress("contractidentities.".concat(this.options.nameResolver.config.labels.ensRoot))]);}_context30.next=4;return this.storageEnsuring;case 4:_ref13=_context30.sent;_ref14=(0,_slicedToArray2["default"])(_ref13,2);identityStorage=_ref14[0];contractIdentityStorage=_ref14[1];if(!this.contracts.storage){this.contracts.storage=this.options.contractLoader.loadContract('V00_UserRegistry',identityStorage);}if(!this.contracts.registry){this.contracts.registry=this.options.contractLoader.loadContract('VerificationsRegistry',contractIdentityStorage);}case 10:case"end":return _context30.stop();}}},_callee30,this);}));function ensureStorage(){return _ensureStorage.apply(this,arguments);}return ensureStorage;}()},{key:"executeAndHandleEventResult",value:function(){var _executeAndHandleEventResult=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee31(accountId,data,eventInfo,getEventResults,sourceIdentity){var _this$options$executo3;var value,to,signedTransactionInfo,userIdentity,options,_ref15,_ref16,executionId,blockNumber,keyHolderLibrary,_ref17,_ref18,executed,failed,filtered,targetIdentityEvents,values,_args31=arguments;return _regenerator["default"].wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:value=_args31.length>5&&_args31[5]!==undefined?_args31[5]:0;to=_args31.length>6?_args31[6]:undefined;signedTransactionInfo=_args31.length>7?_args31[7]:undefined;if(!sourceIdentity){_context31.next=7;break;}_context31.t0=this.options.contractLoader.loadContract('VerificationHolder',sourceIdentity);_context31.next=10;break;case 7:_context31.next=9;return this.getIdentityForAccount(accountId);case 9:_context31.t0=_context31.sent;case 10:userIdentity=_context31.t0;options={event:{eventName:'Approved',target:'KeyHolderLibrary'},from:accountId,getEventResult:function getEventResult(event,eventArgs){return[eventArgs.executionId,event.blockNumber];},value:value};_context31.next=14;return(_this$options$executo3=this.options.executor).executeContractTransaction.apply(_this$options$executo3,(0,_toConsumableArray2["default"])([userIdentity,signedTransactionInfo?'executeDelegated':'execute',options,to||this.contracts.registry.options.address,value,data].concat(signedTransactionInfo?[signedTransactionInfo]:[])));case 14:_ref15=_context31.sent;_ref16=(0,_slicedToArray2["default"])(_ref15,2);executionId=_ref16[0];blockNumber=_ref16[1];keyHolderLibrary=this.options.contractLoader.loadContract('KeyHolderLibrary',userIdentity.options.address);_context31.next=21;return Promise.all([keyHolderLibrary.getPastEvents('Executed',{fromBlock:blockNumber,toBlock:blockNumber}),keyHolderLibrary.getPastEvents('ExecutionFailed',{fromBlock:blockNumber,toBlock:blockNumber})]);case 21:_ref17=_context31.sent;_ref18=(0,_slicedToArray2["default"])(_ref17,2);executed=_ref18[0];failed=_ref18[1];filtered=[].concat((0,_toConsumableArray2["default"])(executed),(0,_toConsumableArray2["default"])(failed)).filter(function(event){if(event.returnValues&&event.returnValues.executionId){if(event.returnValues.executionId.eq){return event.returnValues.executionId.eq(executionId);}else{return event.returnValues.executionId===executionId;}}return false;});if(!(filtered.length&&filtered[0].event==='Executed')){_context31.next=36;break;}if(!eventInfo){_context31.next=34;break;}_context31.next=30;return eventInfo.contract.getPastEvents(eventInfo.eventName,{fromBlock:blockNumber,toBlock:blockNumber});case 30:targetIdentityEvents=_context31.sent;targetIdentityEvents=targetIdentityEvents.filter(function(event){return event.transactionHash===filtered[0].transactionHash;});if(!targetIdentityEvents.length){_context31.next=34;break;}return _context31.abrupt("return",getEventResults(targetIdentityEvents[0],targetIdentityEvents[0].returnValues));case 34:_context31.next=42;break;case 36:if(!(filtered.length&&filtered[0].event==='ExecutionFailed')){_context31.next=41;break;}values=filtered[0].returnValues;throw new Error('executeOnIdentity failed; ExecutionFailed event was triggered: '+"executionId: \"".concat(values.executionId,"\", to: \"").concat(values.to,"\", value: \"").concat(values.value,"\""));case 41:throw new Error('executeOnIdentity failed; subject type was \'account\', '+'but no proper identity tx status event could be retrieved');case 42:case"end":return _context31.stop();}}},_callee31,this);}));function executeAndHandleEventResult(_x56,_x57,_x58,_x59,_x60){return _executeAndHandleEventResult.apply(this,arguments);}return executeAndHandleEventResult;}()},{key:"executeOnIdentity",value:function(){var _executeOnIdentity=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee32(subject,isIdentity,fun,options){var subjectType,_len4,args,_key4,_this$contracts$regis,targetIdentity,abiOnRegistry,targetIdentityAddress,_targetIdentity,abi,originalEvent,originalGetEventResult,identity,_ref19,_ref20,executionId,blockNumber,keyHolderLibrary,_ref21,_ref22,executed,failed,filtered,targetIdentityEvents,values,_args32=arguments;return _regenerator["default"].wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_context32.next=2;return this.getSubjectType(subject,isIdentity);case 2:subjectType=_context32.sent;for(_len4=_args32.length,args=new Array(_len4>4?_len4-4:0),_key4=4;_key4<_len4;_key4++){args[_key4-4]=_args32[_key4];}if(!(subjectType==='contract')){_context32.next=21;break;}if(!isIdentity){_context32.next=9;break;}_context32.t0=subject;_context32.next=12;break;case 9:_context32.next=11;return this.getIdentityForAccount(subject);case 11:_context32.t0=_context32.sent;case 12:targetIdentity=_context32.t0;abiOnRegistry=(_this$contracts$regis=this.contracts.registry.methods)[fun].apply(_this$contracts$regis,[targetIdentity].concat(args)).encodeABI();if(!options.event){_context32.next=18;break;}return _context32.abrupt("return",this.executeAndHandleEventResult(options.from,abiOnRegistry,{contract:this.options.contractLoader.loadContract('VerificationsRegistryLibrary',this.contracts.registry.options.address),eventName:options.event.eventName},options.getEventResult));case 18:return _context32.abrupt("return",this.executeAndHandleEventResult(options.from,abiOnRegistry));case 19:_context32.next=67;break;case 21:if(!(subjectType==='account')){_context32.next=67;break;}if(!isIdentity){_context32.next=26;break;}targetIdentityAddress=subject;_context32.next=29;break;case 26:_context32.next=28;return this.getIdentityForAccount(subject);case 28:targetIdentityAddress=_context32.sent.options.address;case 29:_targetIdentity=this.options.contractLoader.loadContract('VerificationHolder',targetIdentityAddress);abi=_targetIdentity.methods[fun].apply(_targetIdentity.methods[fun],args).encodeABI();originalEvent=options.event;originalGetEventResult=options.getEventResult;options.event={eventName:'Approved',target:'KeyHolderLibrary'};options.getEventResult=function(event,eventArgs){return[eventArgs.executionId,event.blockNumber];};_context32.next=37;return this.getIdentityForAccount(options.from);case 37:identity=_context32.sent;_context32.next=40;return this.options.executor.executeContractTransaction(identity,'execute',options,_targetIdentity.options.address,0,abi);case 40:_ref19=_context32.sent;_ref20=(0,_slicedToArray2["default"])(_ref19,2);executionId=_ref20[0];blockNumber=_ref20[1];keyHolderLibrary=this.options.contractLoader.loadContract('KeyHolderLibrary',identity.options.address);_context32.next=47;return Promise.all([keyHolderLibrary.getPastEvents('Executed',{fromBlock:blockNumber,toBlock:blockNumber}),keyHolderLibrary.getPastEvents('ExecutionFailed',{fromBlock:blockNumber,toBlock:blockNumber})]);case 47:_ref21=_context32.sent;_ref22=(0,_slicedToArray2["default"])(_ref21,2);executed=_ref22[0];failed=_ref22[1];filtered=[].concat((0,_toConsumableArray2["default"])(executed),(0,_toConsumableArray2["default"])(failed)).filter(function(event){if(event.returnValues&&event.returnValues.executionId){if(event.returnValues.executionId.eq){return event.returnValues.executionId.eq(executionId);}else{return event.returnValues.executionId===executionId;}}return false;});if(!(filtered.length&&filtered[0].event==='Executed')){_context32.next=61;break;}if(!originalEvent){_context32.next=59;break;}_context32.next=56;return _targetIdentity.getPastEvents(originalEvent.eventName,{fromBlock:blockNumber,toBlock:blockNumber});case 56:targetIdentityEvents=_context32.sent;if(!targetIdentityEvents.length){_context32.next=59;break;}return _context32.abrupt("return",originalGetEventResult(targetIdentityEvents[0],targetIdentityEvents[0].returnValues));case 59:_context32.next=67;break;case 61:if(!(filtered.length&&filtered[0].event==='ExecutionFailed')){_context32.next=66;break;}values=filtered[0].returnValues;throw new Error('executeOnIdentity failed; ExecutionFailed event was triggered: '+"executionId: \"".concat(values.executionId,"\", to: \"").concat(values.to,"\", value: \"").concat(values.value,"\""));case 66:throw new Error('executeOnIdentity failed; subject type was \'account\', '+'but no proper identity tx status event could be retrieved');case 67:case"end":return _context32.stop();}}},_callee32,this);}));function executeOnIdentity(_x61,_x62,_x63,_x64){return _executeOnIdentity.apply(this,arguments);}return executeOnIdentity;}()},{key:"formatToV2",value:function(){var _formatToV=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee33(nestedVerificationsInput,queryOptions){var _this6=this;var nestedVerifications,verifications,levelComputed,parents,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_loop,_iterator4,_step4,result;return _regenerator["default"].wrap(function _callee33$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:nestedVerifications=nestedVerificationsInput.filter(function(verification){return verification.status!==-1;});if(nestedVerifications.length){_context34.next=3;break;}return _context34.abrupt("return",{status:VerificationsStatusV2.Red,verifications:[]});case 3:verifications=[];if(!nestedVerifications.length){_context34.next=13;break;}if(!(nestedVerifications[0].parents&&nestedVerifications[0].parents.length)){_context34.next=9;break;}_context34.next=8;return this.formatToV2(nestedVerifications[0].parents,queryOptions);case 8:parents=_context34.sent;case 9:levelComputed={subjectIdentity:nestedVerifications[0].subjectIdentity,subjectType:nestedVerifications[0].subjectType,topic:nestedVerifications[0].levelComputed.name};if(nestedVerifications[0].subjectIdentity!==nestedVerifications[0].subject){levelComputed.subject=nestedVerifications[0].subject;}if(nestedVerifications[0].levelComputed.expirationDate){levelComputed.expirationDate=nestedVerifications[0].levelComputed.expirationDate;}if(parents){levelComputed.parents=parents;}case 13:_iteratorNormalCompletion4=true;_didIteratorError4=false;_iteratorError4=undefined;_context34.prev=16;_loop=_regenerator["default"].mark(function _loop(){var nestedVerification,verification;return _regenerator["default"].wrap(function _loop$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:nestedVerification=_step4.value;verification={details:{creationDate:nestedVerification.creationDate,ensAddress:nestedVerification.ensAddress,id:nestedVerification.id,issuer:nestedVerification.issuerAccount,issuerIdentity:nestedVerification.issuer,subject:nestedVerification.subject,subjectIdentity:nestedVerification.subjectIdentity,subjectType:nestedVerification.subjectIdentity,topic:nestedVerification.name},raw:{creationBlock:nestedVerification.creationBlock,creationDate:typeof nestedVerification.creationDate==='number'?"".concat(nestedVerification.creationDate).replace(/...$/,''):nestedVerification.creationDate,data:nestedVerification.data,disableSubVerifications:nestedVerification.disableSubVerifications,signature:nestedVerification.signature,status:nestedVerification.status,topic:nestedVerification.topic}};if(nestedVerification.subjectIdentity!==nestedVerification.subject){levelComputed.subject=nestedVerification.subject;}if(nestedVerification.warnings){verification.statusFlags=nestedVerification.warnings;}if(nestedVerification.description&&nestedVerification.description.author!==utils_1.nullAddress){verification.details.description=nestedVerification.description;}if(!(nestedVerification.data&&nestedVerification.data!==utils_1.nullBytes32)){_context33.next=9;break;}_context33.next=8;return _this6.options.dfs.get(index_1.Ipfs.bytes32ToIpfsHash(nestedVerification.data));case 8:verification.details.data=_context33.sent;case 9:['expirationDate','rejectReason'].map(function(property){if(nestedVerification[property]){verification.details[property]=nestedVerification[property];}});verifications.push(verification);case 11:case"end":return _context33.stop();}}},_loop);});_iterator4=nestedVerifications[Symbol.iterator]();case 19:if(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done){_context34.next=24;break;}return _context34.delegateYield(_loop(),"t0",21);case 21:_iteratorNormalCompletion4=true;_context34.next=19;break;case 24:_context34.next=30;break;case 26:_context34.prev=26;_context34.t1=_context34["catch"](16);_didIteratorError4=true;_iteratorError4=_context34.t1;case 30:_context34.prev=30;_context34.prev=31;if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]();}case 33:_context34.prev=33;if(!_didIteratorError4){_context34.next=36;break;}throw _iteratorError4;case 36:return _context34.finish(33);case 37:return _context34.finish(30);case 38:result={verifications:verifications};if(levelComputed){result.levelComputed=levelComputed;}_context34.next=42;return this.computeStatus(result,queryOptions);case 42:result.status=_context34.sent;return _context34.abrupt("return",result);case 44:case"end":return _context34.stop();}}},_callee33,this,[[16,26,30,38],[31,,33,37]]);}));function formatToV2(_x65,_x66){return _formatToV.apply(this,arguments);}return formatToV2;}()},{key:"getFullDescriptionDomainWithHash",value:function getFullDescriptionDomainWithHash(topic,descriptionDomain){var hash=this.options.nameResolver.soliditySha3(topic);return"".concat(hash.substr(2),".").concat(descriptionDomain,".verifications.evan");}},{key:"getSetVerificationData",value:function(){var _getSetVerificationData=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee34(issuer,subject,topic,verificationValue,descriptionDomain){var isIdentity,uri,subjectType,targetIdentity,sourceIdentity,msg,sha3VerificationName,uint256VerificationName,verificationData,verificationDataUrl,stringified,stateMd5,_msg2,signedSignature,ensFullNodeHash,_args35=arguments;return _regenerator["default"].wrap(function _callee34$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:isIdentity=_args35.length>5&&_args35[5]!==undefined?_args35[5]:false;uri=_args35.length>6&&_args35[6]!==undefined?_args35[6]:'';_context35.next=4;return this.ensureStorage();case 4:_context35.next=6;return this.getSubjectType(subject,isIdentity);case 6:subjectType=_context35.sent;if(!isIdentity){_context35.next=11;break;}targetIdentity=subject;_context35.next=20;break;case 11:if(!(subjectType==='contract')){_context35.next=17;break;}_context35.next=14;return this.options.description.getDescription(subject,issuer);case 14:targetIdentity=_context35.sent["public"].identity;_context35.next=20;break;case 17:_context35.next=19;return this.options.executor.executeContractCall(this.contracts.storage,'users',subject);case 19:targetIdentity=_context35.sent;case 20:_context35.next=22;return this.options.executor.executeContractCall(this.contracts.storage,'users',issuer);case 22:sourceIdentity=_context35.sent;if(!(!targetIdentity||targetIdentity===utils_1.nullAddress)){_context35.next=27;break;}msg="trying to set verification ".concat(topic," with account ").concat(issuer,", ")+"but target identity for account ".concat(subject," does not exist");this.log(msg,'error');throw new Error(msg);case 27:sha3VerificationName=this.options.nameResolver.soliditySha3(topic);uint256VerificationName=new bignumber_js_1.BigNumber(sha3VerificationName).toString(10);verificationData=utils_1.nullBytes32;verificationDataUrl=uri;if(!verificationValue){_context35.next=44;break;}_context35.prev=32;stringified=JSON.stringify(verificationValue);stateMd5=crypto.createHash('md5').update(stringified).digest('hex');_context35.next=37;return this.options.dfs.add(stateMd5,Buffer.from(stringified));case 37:verificationData=_context35.sent;_context35.next=44;break;case 40:_context35.prev=40;_context35.t0=_context35["catch"](32);_msg2="error parsing verificationValue -> ".concat(_context35.t0.message);this.log(_msg2,'info');case 44:_context35.t1=this.options.executor.web3.eth.accounts;_context35.t2=this.options.nameResolver.soliditySha3(targetIdentity,uint256VerificationName,verificationData).replace('0x','');_context35.next=48;return this.options.accountStore.getPrivateKey(issuer);case 48:_context35.t3=_context35.sent;_context35.t4='0x'+_context35.t3;_context35.next=52;return _context35.t1.sign.call(_context35.t1,_context35.t2,_context35.t4);case 52:signedSignature=_context35.sent;if(descriptionDomain){ensFullNodeHash=this.options.nameResolver.namehash(this.getFullDescriptionDomainWithHash(topic,descriptionDomain));}return _context35.abrupt("return",{targetIdentity:targetIdentity,subjectType:subjectType,uint256VerificationName:uint256VerificationName,sourceIdentity:sourceIdentity,signature:signedSignature.signature,verificationData:verificationData,verificationDataUrl:verificationDataUrl,ensFullNodeHash:ensFullNodeHash||utils_1.nullBytes32});case 55:case"end":return _context35.stop();}}},_callee34,this,[[32,40]]);}));function getSetVerificationData(_x67,_x68,_x69,_x70,_x71){return _getSetVerificationData.apply(this,arguments);}return getSetVerificationData;}()},{key:"getSubjectType",value:function(){var _getSubjectType=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee35(subject,isIdentity){return _regenerator["default"].wrap(function _callee35$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:if(!(subject.length===66)){_context36.next=4;break;}return _context36.abrupt("return",'contract');case 4:if(!(isIdentity&&subject.length===42)){_context36.next=8;break;}return _context36.abrupt("return",'account');case 8:if(this.subjectTypes[subject]){_context36.next=11;break;}_context36.next=11;return this.getIdentityForAccount(subject);case 11:return _context36.abrupt("return",this.subjectTypes[subject]);case 12:case"end":return _context36.stop();}}},_callee35,this);}));function getSubjectType(_x72,_x73){return _getSubjectType.apply(this,arguments);}return getSubjectType;}()},{key:"signPackedHash",value:function(){var _signPackedHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee36(accountId,toSign){var _this$options$nameRes;return _regenerator["default"].wrap(function _callee36$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:return _context37.abrupt("return",this.options.executor.signer.signMessage(accountId,(_this$options$nameRes=this.options.nameResolver).soliditySha3.apply(_this$options$nameRes,(0,_toConsumableArray2["default"])(toSign))));case 1:case"end":return _context37.stop();}}},_callee36,this);}));function signPackedHash(_x74,_x75){return _signPackedHash.apply(this,arguments);}return signPackedHash;}()}]);return Verifications;}(dbcp_1.Logger);exports.Verifications=Verifications;

}).call(this,require("buffer").Buffer)

},{"../common/utils":1,"../index":24,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"bignumber.js":72,"buffer":1133,"crypto":1142,"prottle":524}],26:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var index_1=require("./index");var Mailbox=function(_dbcp_1$Logger){(0,_inherits2["default"])(Mailbox,_dbcp_1$Logger);function Mailbox(options){var _this;(0,_classCallCheck2["default"])(this,Mailbox);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Mailbox).call(this,options));_this.contractLoader=options.contractLoader;_this.cryptoProvider=options.cryptoProvider;_this.defaultCryptoAlgo=options.defaultCryptoAlgo;_this.ipfs=options.ipfs;_this.keyProvider=options.keyProvider;_this.mailboxOwner=options.mailboxOwner;_this.nameResolver=options.nameResolver;_this.executor=options.executor||options.nameResolver.executor;return _this;}(0,_createClass2["default"])(Mailbox,[{key:"getAnswersForMail",value:function(){var _getAnswersForMail=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(mailId){var count,offset,results,listAddressHash,listAddress,listContract,listLength,_this$nameResolver,mailIds,originator,ipld,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,answerId,mailResult,mail,hashedSender,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:count=_args.length>1&&_args[1]!==undefined?_args[1]:5;offset=_args.length>2&&_args[2]!==undefined?_args[2]:0;_context.next=4;return this.init();case 4:results={mails:{},totalResultCount:0};_context.next=7;return this.executor.executeContractCall(this.mailboxContract,'getAnswersForMail',mailId,{from:this.mailboxOwner});case 7:listAddressHash=_context.sent;if(!(listAddressHash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context.next=64;break;}listAddress=this.nameResolver.bytes32ToAddress(listAddressHash);listContract=this.contractLoader.loadContract('DataStoreList',listAddress);_context.next=13;return this.executor.executeContractCall(listContract,'length');case 13:listLength=_context.sent;results.totalResultCount=parseInt(listLength,10);if(!results.totalResultCount){_context.next=64;break;}_context.next=18;return this.nameResolver.getArrayFromListContract(listContract,count,offset,true);case 18:mailIds=_context.sent;originator=(_this$nameResolver=this.nameResolver).soliditySha3.apply(_this$nameResolver,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(this.mailboxOwner),this.nameResolver.soliditySha3(this.mailboxOwner)].sort()));ipld=new index_1.Ipld({ipfs:this.ipfs,keyProvider:this.keyProvider,cryptoProvider:this.cryptoProvider,defaultCryptoAlgo:this.defaultCryptoAlgo,originator:originator,nameResolver:this.nameResolver});_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=24;_iterator=mailIds[Symbol.iterator]();case 26:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=50;break;}answerId=_step.value;_context.prev=28;_context.next=31;return this.executor.executeContractCall(this.mailboxContract,'getMail',answerId);case 31:mailResult=_context.sent;_context.next=34;return ipld.getLinkedGraph(mailResult.data);case 34:mail=_context.sent;hashedSender=this.nameResolver.soliditySha3(mail.content.from);if(!(hashedSender!==mailResult.sender)){_context.next=40;break;}throw new Error("mail claims to be sent from ".concat(hashedSender,", ")+"but was sent from ".concat(mailResult.sender));case 40:results.mails[answerId]=mail;case 41:_context.next=47;break;case 43:_context.prev=43;_context.t0=_context["catch"](28);this.log("could not unpack answer: \"".concat(answerId,"\"; ").concat(_context.t0.message||_context.t0),'warning');results.mails[answerId]=null;case 47:_iteratorNormalCompletion=true;_context.next=26;break;case 50:_context.next=56;break;case 52:_context.prev=52;_context.t1=_context["catch"](24);_didIteratorError=true;_iteratorError=_context.t1;case 56:_context.prev=56;_context.prev=57;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}case 59:_context.prev=59;if(!_didIteratorError){_context.next=62;break;}throw _iteratorError;case 62:return _context.finish(59);case 63:return _context.finish(56);case 64:return _context.abrupt("return",results);case 65:case"end":return _context.stop();}}},_callee,this,[[24,52,56,64],[28,43],[57,,59,63]]);}));function getAnswersForMail(_x){return _getAnswersForMail.apply(this,arguments);}return getAnswersForMail;}()},{key:"getBalanceFromMail",value:function(){var _getBalanceFromMail=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(mailId){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.init();case 2:return _context2.abrupt("return",this.executor.executeContractCall(this.mailboxContract,'getBalanceFromMail',mailId,{from:this.mailboxOwner}));case 3:case"end":return _context2.stop();}}},_callee2,this);}));function getBalanceFromMail(_x2){return _getBalanceFromMail.apply(this,arguments);}return getBalanceFromMail;}()},{key:"getMail",value:function(){var _getMail=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(mail){var _this$nameResolver2;var originator,ipld,mailResult,mailItem,hashedSender;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.init();case 2:originator=(_this$nameResolver2=this.nameResolver).soliditySha3.apply(_this$nameResolver2,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(this.mailboxOwner),this.nameResolver.soliditySha3(this.mailboxOwner)].sort()));ipld=new index_1.Ipld({ipfs:this.ipfs,keyProvider:this.keyProvider,cryptoProvider:this.cryptoProvider,defaultCryptoAlgo:this.defaultCryptoAlgo,originator:originator,nameResolver:this.nameResolver});_context3.prev=4;if(!mail.startsWith('Qm')){_context3.next=11;break;}_context3.next=8;return ipld.getLinkedGraph(mail);case 8:return _context3.abrupt("return",_context3.sent);case 11:_context3.next=13;return this.executor.executeContractCall(this.mailboxContract,'getMail',mail);case 13:mailResult=_context3.sent;_context3.next=16;return ipld.getLinkedGraph(mailResult.data);case 16:mailItem=_context3.sent;hashedSender=this.nameResolver.soliditySha3(mailItem.content.from);if(!(hashedSender!==mailResult.sender)){_context3.next=22;break;}throw new Error("mail claims to be sent from ".concat(hashedSender,", but was sent from ").concat(mailResult.sender));case 22:return _context3.abrupt("return",mailItem);case 23:_context3.next=29;break;case 25:_context3.prev=25;_context3.t0=_context3["catch"](4);this.log("could not decrypt mail: \"".concat(mail,"\"; ").concat(_context3.t0.message||_context3.t0),'warning');return _context3.abrupt("return",null);case 29:case"end":return _context3.stop();}}},_callee3,this,[[4,25]]);}));function getMail(_x3){return _getMail.apply(this,arguments);}return getMail;}()},{key:"getMails",value:function(){var _getMails=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){var count,offset,type,results,listAddressHash,listAddress,listContract,listLength,_this$nameResolver3,mailIds,originator,ipld,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,mailId,mailResult,mail,hashedSender,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:count=_args4.length>0&&_args4[0]!==undefined?_args4[0]:10;offset=_args4.length>1&&_args4[1]!==undefined?_args4[1]:0;type=_args4.length>2&&_args4[2]!==undefined?_args4[2]:'Received';_context4.next=5;return this.init();case 5:results={mails:{},totalResultCount:0};_context4.next=8;return this.executor.executeContractCall(this.mailboxContract,"getMy".concat(type,"Mails"),{from:this.mailboxOwner});case 8:listAddressHash=_context4.sent;if(!(listAddressHash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context4.next=65;break;}listAddress=this.nameResolver.bytes32ToAddress(listAddressHash);listContract=this.contractLoader.loadContract('DataStoreList',listAddress);_context4.next=14;return this.executor.executeContractCall(listContract,'length');case 14:listLength=_context4.sent;results.totalResultCount=parseInt(listLength.toString(),10);if(!results.totalResultCount){_context4.next=65;break;}_context4.next=19;return this.nameResolver.getArrayFromListContract(listContract,count,offset,true);case 19:mailIds=_context4.sent;originator=(_this$nameResolver3=this.nameResolver).soliditySha3.apply(_this$nameResolver3,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(this.mailboxOwner),this.nameResolver.soliditySha3(this.mailboxOwner)].sort()));ipld=new index_1.Ipld({ipfs:this.ipfs,keyProvider:this.keyProvider,cryptoProvider:this.cryptoProvider,defaultCryptoAlgo:this.defaultCryptoAlgo,originator:originator,nameResolver:this.nameResolver});_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context4.prev=25;_iterator2=mailIds[Symbol.iterator]();case 27:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context4.next=51;break;}mailId=_step2.value;_context4.prev=29;_context4.next=32;return this.executor.executeContractCall(this.mailboxContract,'getMail',mailId);case 32:mailResult=_context4.sent;_context4.next=35;return ipld.getLinkedGraph(mailResult.data);case 35:mail=_context4.sent;hashedSender=this.nameResolver.soliditySha3(mail.content.from);if(!(hashedSender!==mailResult.sender)){_context4.next=41;break;}throw new Error("mail claims to be sent from ".concat(hashedSender,", but was sent from ").concat(mailResult.sender));case 41:results.mails[mailId]=mail;case 42:_context4.next=48;break;case 44:_context4.prev=44;_context4.t0=_context4["catch"](29);this.log("could not unpack mail: \"".concat(mailId,"\"; ").concat(_context4.t0.message||_context4.t0),'warning');results.mails[mailId]=null;case 48:_iteratorNormalCompletion2=true;_context4.next=27;break;case 51:_context4.next=57;break;case 53:_context4.prev=53;_context4.t1=_context4["catch"](25);_didIteratorError2=true;_iteratorError2=_context4.t1;case 57:_context4.prev=57;_context4.prev=58;if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}case 60:_context4.prev=60;if(!_didIteratorError2){_context4.next=63;break;}throw _iteratorError2;case 63:return _context4.finish(60);case 64:return _context4.finish(57);case 65:return _context4.abrupt("return",results);case 66:case"end":return _context4.stop();}}},_callee4,this,[[25,53,57,65],[29,44],[58,,60,64]]);}));function getMails(){return _getMails.apply(this,arguments);}return getMails;}()},{key:"getReceivedMails",value:function(){var _getReceivedMails=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(){var count,offset,_args5=arguments;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:count=_args5.length>0&&_args5[0]!==undefined?_args5[0]:10;offset=_args5.length>1&&_args5[1]!==undefined?_args5[1]:0;_context5.next=4;return this.getMails(count,offset,'Received');case 4:return _context5.abrupt("return",_context5.sent);case 5:case"end":return _context5.stop();}}},_callee5,this);}));function getReceivedMails(){return _getReceivedMails.apply(this,arguments);}return getReceivedMails;}()},{key:"getSentMails",value:function(){var _getSentMails=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(){var count,offset,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:count=_args6.length>0&&_args6[0]!==undefined?_args6[0]:10;offset=_args6.length>1&&_args6[1]!==undefined?_args6[1]:0;_context6.next=4;return this.getMails(count,offset,'Sent');case 4:return _context6.abrupt("return",_context6.sent);case 5:case"end":return _context6.stop();}}},_callee6,this);}));function getSentMails(){return _getSentMails.apply(this,arguments);}return getSentMails;}()},{key:"init",value:function(){var _init=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(){var domain,address;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!this.initialized){_context7.next=4;break;}return _context7.abrupt("return");case 4:domain=this.nameResolver.getDomainName(this.nameResolver.config.domains.mailbox);_context7.next=7;return this.nameResolver.getAddress(domain);case 7:address=_context7.sent;this.mailboxContract=this.contractLoader.loadContract('MailBoxInterface',address);this.initialized=true;case 10:case"end":return _context7.stop();}}},_callee7,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:"sendAnswer",value:function(){var _sendAnswer=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(mail,from,to){var _this$nameResolver4;var value,combinedHash,ipld,parentId,hash,_args8=arguments;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:value=_args8.length>3&&_args8[3]!==undefined?_args8[3]:'0';_context8.next=3;return this.init();case 3:mail.content.sent=new Date().getTime();combinedHash=(_this$nameResolver4=this.nameResolver).soliditySha3.apply(_this$nameResolver4,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(to),this.nameResolver.soliditySha3(this.mailboxOwner)].sort()));ipld=new index_1.Ipld({ipfs:this.ipfs,keyProvider:this.keyProvider,cryptoProvider:this.cryptoProvider,originator:combinedHash,defaultCryptoAlgo:this.defaultCryptoAlgo,nameResolver:this.nameResolver});parentId=mail.parentId;_context8.next=9;return ipld.store(mail);case 9:hash=_context8.sent;_context8.next=12;return this.executor.executeContractTransaction(this.mailboxContract,'sendAnswer',{from:from,autoGas:1.1,value:value},[to],hash,parentId);case 12:case"end":return _context8.stop();}}},_callee8,this);}));function sendAnswer(_x4,_x5,_x6){return _sendAnswer.apply(this,arguments);}return sendAnswer;}()},{key:"sendMail",value:function(){var _sendMail=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(mail,from,to){var _this$nameResolver5;var value,context,combinedHash,ipld,hash,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:value=_args9.length>3&&_args9[3]!==undefined?_args9[3]:'0';context=_args9.length>4?_args9[4]:undefined;_context9.next=4;return this.init();case 4:mail.content.from=from;mail.content.sent=new Date().getTime();mail.content.to=to;combinedHash=(_this$nameResolver5=this.nameResolver).soliditySha3.apply(_this$nameResolver5,(0,_toConsumableArray2["default"])([this.nameResolver.soliditySha3(to),this.nameResolver.soliditySha3(this.mailboxOwner)].sort()));ipld=new index_1.Ipld({ipfs:this.ipfs,keyProvider:this.keyProvider,cryptoProvider:this.cryptoProvider,originator:context?this.nameResolver.soliditySha3(context):combinedHash,defaultCryptoAlgo:this.defaultCryptoAlgo,nameResolver:this.nameResolver});_context9.next=11;return ipld.store(mail);case 11:hash=_context9.sent;_context9.next=14;return this.executor.executeContractTransaction(this.mailboxContract,'sendMail',{from:from,autoGas:1.1,value:value},[to],hash);case 14:case"end":return _context9.stop();}}},_callee9,this);}));function sendMail(_x7,_x8,_x9){return _sendMail.apply(this,arguments);}return sendMail;}()},{key:"withdrawFromMail",value:function(){var _withdrawFromMail=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(mailId,recipient){return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.init();case 2:_context10.next=4;return this.executor.executeContractTransaction(this.mailboxContract,'withdrawFromMail',{from:this.mailboxOwner,autoGas:1.1},mailId,recipient);case 4:case"end":return _context10.stop();}}},_callee10,this);}));function withdrawFromMail(_x10,_x11){return _withdrawFromMail.apply(this,arguments);}return withdrawFromMail;}()}]);return Mailbox;}(dbcp_1.Logger);exports.Mailbox=Mailbox;

},{"./index":24,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726}],27:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var Dbcp=require("@evan.network/dbcp");var NameResolver=function(_Dbcp$NameResolver){(0,_inherits2["default"])(NameResolver,_Dbcp$NameResolver);function NameResolver(options){(0,_classCallCheck2["default"])(this,NameResolver);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(NameResolver).call(this,options));}(0,_createClass2["default"])(NameResolver,[{key:"claimAddress",value:function(){var _claimAddress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(name,accountId){var domainOwnerId,value,namehash,nodeOwner,msg,_$exec,_$exec2,node,parentName,parentOnwer,_msg,_msg2,registrar,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:domainOwnerId=_args.length>2&&_args[2]!==undefined?_args[2]:accountId;value=_args.length>3&&_args[3]!==undefined?_args[3]:'0';namehash=this.namehash(name);_context.next=5;return this.executor.executeContractCall(this.ensContract,'owner',namehash);case 5:nodeOwner=_context.sent;if(!(nodeOwner!==domainOwnerId&&nodeOwner!=='0x0000000000000000000000000000000000000000'&&value==='0')){_context.next=10;break;}msg="cannot claim address \"".concat(name,"\", it's' already claimed by \"").concat(nodeOwner,"\"");this.log(msg,'error');throw new Error(msg);case 10:_$exec=/^([^.]+)\.(.*)$/.exec(name),_$exec2=(0,_slicedToArray2["default"])(_$exec,3),node=_$exec2[1],parentName=_$exec2[2];_context.next=13;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(parentName));case 13:parentOnwer=_context.sent;if(!(parentOnwer==='0x0000000000000000000000000000000000000000')){_context.next=18;break;}_msg="cannot claim address \"".concat(name,"\", parent node is not owned");this.log(_msg,'error');throw new Error(_msg);case 18:_context.next=20;return this.web3.eth.getCode(parentOnwer);case 20:_context.t0=_context.sent;if(!(_context.t0==='0x')){_context.next=25;break;}_msg2="cannot claim address \"".concat(name,"\", ")+"parent node owner \"".concat(parentOnwer,"\" does not seem to be a contract");this.log(_msg2,'error');throw new Error(_msg2);case 25:registrar=this.contractLoader.loadContract(value?'PayableRegistrar':'FIFSRegistrar',parentOnwer);_context.next=28;return this.executor.executeContractTransaction(registrar,'register',{from:accountId,value:value},this.web3.utils.sha3("".concat(node)),domainOwnerId);case 28:case"end":return _context.stop();}}},_callee,this);}));function claimAddress(_x,_x2){return _claimAddress.apply(this,arguments);}return claimAddress;}()},{key:"claimPermanentAddress",value:function(){var _claimPermanentAddress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(name,accountId){var domainOwnerId,_$exec3,_$exec4,node,parentName,parentOnwer,msg,_msg3,registrar,_args2=arguments;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:domainOwnerId=_args2.length>2&&_args2[2]!==undefined?_args2[2]:accountId;_$exec3=/^([^.]+)\.(.*)$/.exec(name),_$exec4=(0,_slicedToArray2["default"])(_$exec3,3),node=_$exec4[1],parentName=_$exec4[2];_context2.next=4;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(parentName));case 4:parentOnwer=_context2.sent;if(!(parentOnwer==='0x0000000000000000000000000000000000000000')){_context2.next=9;break;}msg="cannot claim address \"".concat(name,"\", parent node is not owned");this.log(msg,'error');throw new Error(msg);case 9:_context2.next=11;return this.web3.eth.getCode(parentOnwer);case 11:_context2.t0=_context2.sent;if(!(_context2.t0==='0x')){_context2.next=16;break;}_msg3="cannot claim address \"".concat(name,"\", ")+"parent node owner \"".concat(parentOnwer,"\" does not seem to be a contract");this.log(_msg3,'error');throw new Error(_msg3);case 16:registrar=this.contractLoader.loadContract('PayableRegistrar',parentOnwer);_context2.next=19;return this.executor.executeContractTransaction(registrar,'registerPermanent',{from:accountId},this.soliditySha3(node),domainOwnerId);case 19:case"end":return _context2.stop();}}},_callee2,this);}));function claimPermanentAddress(_x3,_x4){return _claimPermanentAddress.apply(this,arguments);}return claimPermanentAddress;}()},{key:"claimFunds",value:function(){var _claimFunds=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(name,accountId){var parentOnwer,msg,_msg4,registrar;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(name));case 2:parentOnwer=_context3.sent;if(!(parentOnwer==='0x0000000000000000000000000000000000000000')){_context3.next=7;break;}msg="cannot claim funds for \"".concat(name,"\", node is not owned");this.log(msg,'error');throw new Error(msg);case 7:_context3.next=9;return this.web3.eth.getCode(parentOnwer);case 9:_context3.t0=_context3.sent;if(!(_context3.t0==='0x')){_context3.next=14;break;}_msg4="cannot claim funds for \"".concat(name,"\", ")+"node owner \"".concat(parentOnwer,"\" does not seem to be a contract");this.log(_msg4,'error');throw new Error(_msg4);case 14:registrar=this.contractLoader.loadContract('PayableRegistrar',parentOnwer);_context3.next=17;return this.executor.executeContractTransaction(registrar,'claimFunds',{from:accountId});case 17:case"end":return _context3.stop();}}},_callee3,this);}));function claimFunds(_x5,_x6){return _claimFunds.apply(this,arguments);}return claimFunds;}()},{key:"getPrice",value:function(){var _getPrice=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(name){var _$exec5,_$exec6,parentName,parentOnwer,msg,_msg5,registrar,price;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_$exec5=/^([^.]+)\.(.*)$/.exec(name),_$exec6=(0,_slicedToArray2["default"])(_$exec5,3),parentName=_$exec6[2];_context4.next=3;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(parentName));case 3:parentOnwer=_context4.sent;if(!(parentOnwer==='0x0000000000000000000000000000000000000000')){_context4.next=8;break;}msg="cannot get price for \"".concat(name,"\", parent node is not owned");this.log(msg,'error');throw new Error(msg);case 8:_context4.next=10;return this.web3.eth.getCode(parentOnwer);case 10:_context4.t0=_context4.sent;if(!(_context4.t0==='0x')){_context4.next=15;break;}_msg5="cannot get price for \"".concat(name,"\", ")+"parent node owner \"".concat(parentOnwer,"\" does not seem to be a contract");this.log(_msg5,'error');throw new Error(_msg5);case 15:registrar=this.contractLoader.loadContract('PayableRegistrar',parentOnwer);_context4.next=18;return this.executor.executeContractCall(registrar,'price');case 18:price=_context4.sent;return _context4.abrupt("return",price.toString());case 20:case"end":return _context4.stop();}}},_callee4,this);}));function getPrice(_x7){return _getPrice.apply(this,arguments);}return getPrice;}()},{key:"getValidUntil",value:function(){var _getValidUntil=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(name){var solTimestamp;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.executor.executeContractCall(this.ensContract,'validUntil',this.namehash(name));case 2:solTimestamp=_context5.sent;return _context5.abrupt("return",parseInt("".concat(solTimestamp.toString(),"000"),10));case 4:case"end":return _context5.stop();}}},_callee5,this);}));function getValidUntil(_x8){return _getValidUntil.apply(this,arguments);}return getValidUntil;}()},{key:"setPrice",value:function(){var _setPrice=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(name,accountId,newPrice){var parentOnwer,msg,_msg6,registrar;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(name));case 2:parentOnwer=_context6.sent;if(!(parentOnwer==='0x0000000000000000000000000000000000000000')){_context6.next=7;break;}msg="cannot set price for \"".concat(name,"\", node is not owned");this.log(msg,'error');throw new Error(msg);case 7:_context6.next=9;return this.web3.eth.getCode(parentOnwer);case 9:_context6.t0=_context6.sent;if(!(_context6.t0==='0x')){_context6.next=14;break;}_msg6="cannot set price for \"".concat(name,"\", ")+"node owner \"".concat(parentOnwer,"\" does not seem to be a contract");this.log(_msg6,'error');throw new Error(_msg6);case 14:registrar=this.contractLoader.loadContract('PayableRegistrar',parentOnwer);_context6.next=17;return this.executor.executeContractTransaction(registrar,'setPrice',{from:accountId},newPrice);case 17:case"end":return _context6.stop();}}},_callee6,this);}));function setPrice(_x9,_x10,_x11){return _setPrice.apply(this,arguments);}return setPrice;}()},{key:"setValidUntil",value:function(){var _setValidUntil=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(name,accountId,validUntil){var numberString;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:numberString="".concat(validUntil);_context7.next=3;return this.executor.executeContractTransaction(this.ensContract,'setValidUntil',{from:accountId},this.namehash(name),numberString.substr(0,numberString.length-3));case 3:case"end":return _context7.stop();}}},_callee7,this);}));function setValidUntil(_x12,_x13,_x14){return _setValidUntil.apply(this,arguments);}return setValidUntil;}()}]);return NameResolver;}(Dbcp.NameResolver);exports.NameResolver=NameResolver;

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726}],36:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(exports,"__esModule",{value:true});var ipfs_lib_1=require("./dfs/ipfs-lib");var config_core_1=require("./config-core");var config_testcore_1=require("./config-testcore");var utils_1=require("./common/utils");var index_1=require("./index");;function createDefaultRuntime(_x,_x2,_x3){return _createDefaultRuntime.apply(this,arguments);}function _createDefaultRuntime(){_createDefaultRuntime=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(web3,dfs,runtimeConfig){var options,environment,config,logger,log,contracts,solcCfg,smartContract,solc,originalContracts,contractLoader,tempConfig,activeAccount,accountStore,signerConfig,signerInternal,signer,executor,nameResolver,eventHub,cryptoConfig,cryptoProvider,accountId,sha9Account,sha3Account,dataKey,keyProvider,description,sharing,baseContract,dataContract,ipld,rightsAndRoles,keyProviderOwn,ipldOwn,sharingOwn,dataContractOwn,profile,serviceContract,mailbox,keyExchange,verifications,activeIdentity,underlyingAccount,didResolver,onboarding,votings,payments,encryptionWrapper,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>3&&_args[3]!==undefined?_args[3]:{};_context.next=3;return utils_1.getEnvironment(web3);case 3:environment=_context.sent;config=environment==='core'?config_core_1.configCore:config_testcore_1.configTestcore;logger=options.logger||new index_1.Logger();log=logger.logFunction;contracts=options.contracts;if(contracts){_context.next=22;break;}if(!(typeof global==='undefined'||!global.localStorage)){_context.next=19;break;}solcCfg={compileContracts:false};if(runtimeConfig.contractsLoadPath){solcCfg['destinationPath']=runtimeConfig.contractsLoadPath;}smartContract=require('@evan.network/smart-contracts-core');solc=new smartContract.Solc({config:solcCfg,log:log});_context.next=16;return solc.ensureCompiled(runtimeConfig.additionalContractsPaths||[],solcCfg['destinationPath']);case 16:contracts=solc.getContracts();_context.next=22;break;case 19:originalContracts=require('@evan.network/smart-contracts-core');contracts={};Object.keys(originalContracts).forEach(function(key){var contractKey=key.indexOf(':')!==-1?key.split(':')[1]:key;contracts[contractKey]=originalContracts[key];});case 22:contractLoader=options.contractLoader||new index_1.ContractLoader({contracts:contracts,log:log,web3:web3});if(!(runtimeConfig.mnemonic&&runtimeConfig.password)){_context.next=33;break;}_context.next=26;return index_1.Onboarding.generateRuntimeConfig(runtimeConfig.mnemonic,runtimeConfig.password,web3);case 26:tempConfig=_context.sent;if(!runtimeConfig.accountMap){runtimeConfig.accountMap={};}if(!runtimeConfig.keyConfig){runtimeConfig.keyConfig={};}Object.assign(runtimeConfig.accountMap,tempConfig.accountMap);Object.assign(runtimeConfig.keyConfig,tempConfig.keyConfig);_context.next=35;break;case 33:if(!(!runtimeConfig.accountMap||!Object.keys(runtimeConfig.accountMap).length)){_context.next=35;break;}throw new Error('accountMap invalid');case 35:activeAccount=Object.keys(runtimeConfig.accountMap)[0];accountStore=options.accountStore||new index_1.AccountStore({accounts:runtimeConfig.accountMap,log:log});signerConfig={};if(runtimeConfig.hasOwnProperty('gasPrice')){signerConfig.gasPrice=runtimeConfig.gasPrice;}else{signerConfig.gasPrice="".concat(200e9);}signerInternal=options.signer||new index_1.SignerInternal({accountStore:accountStore,contractLoader:contractLoader,config:signerConfig,log:log,web3:web3});if(runtimeConfig.useIdentity){signer=new index_1.SignerIdentity({contractLoader:contractLoader,verifications:null,web3:web3});}else{signer=signerInternal;}executor=options.executor||new index_1.Executor(Object.assign({config:config,log:log,signer:signer,web3:web3},runtimeConfig.options?runtimeConfig.options.Executor:{}));_context.next=44;return executor.init({});case 44:nameResolver=options.nameResolver||new index_1.NameResolver({config:runtimeConfig.nameResolver||config.nameResolver,executor:executor,contractLoader:contractLoader,log:log,web3:web3});eventHub=options.eventHub||new index_1.EventHub({config:runtimeConfig.nameResolver||config.nameResolver,contractLoader:contractLoader,log:log,nameResolver:nameResolver});executor.eventHub=eventHub;if(!(dfs.remoteNode instanceof ipfs_lib_1.IpfsLib)){dfs.remoteNode=new ipfs_lib_1.IpfsLib(config.ipfsConfig);}dfs.setRuntime({signer:signer,activeAccount:activeAccount,web3:web3});cryptoConfig={};cryptoConfig['aes']=new index_1.Aes({log:log});cryptoConfig['unencrypted']=new index_1.Unencrypted({log:log});cryptoConfig['aesBlob']=new index_1.AesBlob({dfs:dfs,log:log});cryptoConfig['aesEcb']=new index_1.AesEcb({log:log});cryptoProvider=new index_1.CryptoProvider(cryptoConfig);if(runtimeConfig.keyConfig){for(accountId in runtimeConfig.keyConfig){if(accountId.length===42){sha9Account=web3.utils.soliditySha3.apply(web3.utils.soliditySha3,[web3.utils.soliditySha3(accountId),web3.utils.soliditySha3(accountId)].sort());sha3Account=web3.utils.soliditySha3(accountId);dataKey=web3.utils.keccak256(accountId+runtimeConfig.keyConfig[accountId]).replace(/0x/g,'');runtimeConfig.keyConfig[sha3Account]=dataKey;runtimeConfig.keyConfig[sha9Account]=dataKey;delete runtimeConfig.keyConfig[accountId];}}}keyProvider=options.keyProvider||new index_1.KeyProvider({keys:runtimeConfig.keyConfig,log:log});description=options.description||new index_1.Description({contractLoader:contractLoader,cryptoProvider:cryptoProvider,dfs:dfs,executor:executor,keyProvider:keyProvider,log:log,nameResolver:nameResolver,sharing:null,web3:web3});sharing=options.sharing||new index_1.Sharing({contractLoader:contractLoader,cryptoProvider:cryptoProvider,description:description,executor:executor,dfs:dfs,keyProvider:keyProvider,log:log,nameResolver:nameResolver,defaultCryptoAlgo:'aes'});description.sharing=sharing;baseContract=options.baseContract||new index_1.BaseContract({executor:executor,loader:contractLoader,log:log,nameResolver:nameResolver});dataContract=options.dataContract||new index_1.DataContract({cryptoProvider:cryptoProvider,dfs:dfs,executor:executor,loader:contractLoader,log:log,nameResolver:nameResolver,sharing:sharing,web3:web3,description:description});ipld=options.ipld||new index_1.Ipld({ipfs:dfs,keyProvider:keyProvider,cryptoProvider:cryptoProvider,defaultCryptoAlgo:'aes',log:log,originator:nameResolver.soliditySha3(activeAccount),nameResolver:nameResolver});rightsAndRoles=options.rightsAndRoles||new index_1.RightsAndRoles({contractLoader:contractLoader,executor:executor,log:log,nameResolver:nameResolver,web3:web3});keyProviderOwn=new index_1.KeyProvider({keys:runtimeConfig.keyConfig,log:log});ipldOwn=new index_1.Ipld({ipfs:dfs,keyProvider:keyProviderOwn,cryptoProvider:cryptoProvider,defaultCryptoAlgo:'aes',log:log,originator:nameResolver.soliditySha3(activeAccount),nameResolver:nameResolver});sharingOwn=new index_1.Sharing({contractLoader:contractLoader,cryptoProvider:cryptoProvider,description:description,executor:executor,dfs:dfs,keyProvider:keyProviderOwn,log:log,nameResolver:nameResolver,defaultCryptoAlgo:'aes'});dataContractOwn=new index_1.DataContract({cryptoProvider:cryptoProvider,dfs:dfs,executor:executor,loader:contractLoader,log:log,nameResolver:nameResolver,sharing:sharingOwn,web3:web3,description:description});profile=options.profile||new index_1.Profile({accountId:activeAccount,contractLoader:contractLoader,cryptoProvider:cryptoProvider,dataContract:dataContractOwn,defaultCryptoAlgo:'aes',description:description,dfs:dfs,executor:executor,ipld:ipldOwn,log:log,nameResolver:nameResolver,rightsAndRoles:rightsAndRoles,sharing:sharing});keyProvider.init(profile);serviceContract=options.serviceContract||new index_1.ServiceContract({cryptoProvider:cryptoProvider,dfs:dfs,executor:executor,keyProvider:keyProvider,loader:contractLoader,log:log,nameResolver:nameResolver,sharing:sharing,web3:web3});mailbox=options.mailbox||new index_1.Mailbox({mailboxOwner:activeAccount,nameResolver:nameResolver,ipfs:dfs,contractLoader:contractLoader,cryptoProvider:cryptoProvider,keyProvider:keyProvider,log:log,defaultCryptoAlgo:'aes'});keyExchange=options.keyExchange||new index_1.KeyExchange({mailbox:mailbox,cryptoProvider:cryptoProvider,defaultCryptoAlgo:'aes',account:activeAccount,keyProvider:keyProvider,log:log});verifications=options.verifications||new index_1.Verifications({accountStore:accountStore,contractLoader:contractLoader,config:config,description:description,dfs:dfs,executor:executor,log:log,nameResolver:nameResolver});if(!runtimeConfig.useIdentity){_context.next=80;break;}_context.next=77;return verifications.getIdentityForAccount(activeAccount,true);case 77:activeIdentity=_context.sent;underlyingAccount=activeAccount;signer.updateConfig({verifications:verifications},{activeIdentity:activeIdentity,underlyingAccount:underlyingAccount,underlyingSigner:signerInternal});case 80:if(runtimeConfig.useIdentity){didResolver=new index_1.DidResolver({contractLoader:contractLoader,dfs:dfs,executor:executor,nameResolver:nameResolver,signerIdentity:signer,web3:web3});}_context.next=83;return profile.exists();case 83:if(!_context.sent){_context.next=103;break;}logger.log("profile for ".concat(activeAccount," exists, fetching keys"),'debug');_context.prev=85;_context.t0=keyExchange;_context.next=89;return profile.getPublicKey();case 89:_context.t1=_context.sent;_context.next=92;return profile.getContactKey(activeAccount,'dataKey');case 92:_context.t2=_context.sent;_context.t0.setPublicKey.call(_context.t0,_context.t1,_context.t2);_context.next=101;break;case 96:_context.prev=96;_context.t3=_context["catch"](85);logger.log("fetching keys for ".concat(activeAccount," failed with \"").concat(_context.t3.msg||_context.t3,"\", ")+"removing profile from runtime",'warning');profile=null;keyProvider.profile=null;case 101:_context.next=104;break;case 103:logger.log("profile for ".concat(activeAccount," doesn't exist"),'debug');case 104:onboarding=options.onboarding||new index_1.Onboarding({mailbox:mailbox,smartAgentId:'0x063fB42cCe4CA5448D69b4418cb89E663E71A139',executor:executor,log:log});votings=options.votings||new index_1.Votings({contractLoader:contractLoader,executor:executor,log:log,nameResolver:nameResolver});payments=options.payments||new index_1.Payments({accountStore:accountStore,contractLoader:contractLoader,executor:executor,log:log,web3:web3});encryptionWrapper=options.encryptionWrapper||new index_1.EncryptionWrapper({cryptoProvider:cryptoProvider,nameResolver:nameResolver,profile:profile,sharing:sharing,web3:web3});return _context.abrupt("return",Object.assign(Object.assign(Object.assign({accountStore:accountStore,activeAccount:activeAccount,baseContract:baseContract,contractLoader:contractLoader,contracts:contracts,cryptoProvider:cryptoProvider,dataContract:dataContract,description:description,dfs:dfs,encryptionWrapper:encryptionWrapper,environment:environment,eventHub:eventHub,executor:executor,ipld:ipld,keyExchange:keyExchange,keyProvider:keyProvider,logger:logger,mailbox:mailbox,nameResolver:nameResolver,onboarding:onboarding,payments:payments,profile:profile,rightsAndRoles:rightsAndRoles,serviceContract:serviceContract,sharing:sharing,signer:signer,verifications:verifications,votings:votings,web3:web3},activeIdentity&&{activeIdentity:activeIdentity}),didResolver&&{didResolver:didResolver}),underlyingAccount&&{underlyingAccount:underlyingAccount}));case 109:case"end":return _context.stop();}}},_callee,null,[[85,96]]);}));return _createDefaultRuntime.apply(this,arguments);}exports.createDefaultRuntime=createDefaultRuntime;;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./common/utils":1,"./config-core":2,"./config-testcore":3,"./dfs/ipfs-lib":15,"./index":24,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/regenerator":67,"@evan.network/smart-contracts-core":undefined}],41:[function(require,module,exports){
(function (Buffer){
'use strict';var pbkdf2=require('./pbkdf2');var BN=require('bitcore-lib/lib/crypto/bn.js');var Hash=require('bitcore-lib/lib/crypto/hash.js');var Random=require('bitcore-lib/lib/crypto/random.js');var HDPrivateKey=require('bitcore-lib/lib/hdprivatekey.js');var Mnemonic=function Mnemonic(data,wordlist){if(!(this instanceof Mnemonic)){return new Mnemonic(data,wordlist);}if(Array.isArray(data)){wordlist=data;data=null;}var ent,phrase,seed;if(Buffer.isBuffer(data)){seed=data;ent=seed.length*8;}else if(typeof data==='string'){phrase=data;}else if(!isNaN(data)){ent=data;}else if(data){throw new Errror('Must be a Buffer, a string or an integer');}ent=ent||128;wordlist=wordlist||Mnemonic._getDictionary(phrase);if(phrase&&!wordlist){throw new Error('Could not detect the used word list: '+phrase);}wordlist=wordlist||Mnemonic.Words.ENGLISH;if(seed){phrase=Mnemonic._entropy2mnemonic(seed,wordlist);}if(phrase&&!Mnemonic.isValid(phrase,wordlist)){throw new Error('Mnemonic string is invalid: '+phrase);}if(ent%32!==0||ent<128||ent>256){throw new Error('Values must be ENT > 128 and ENT < 256 and ENT % 32 == 0');}phrase=phrase||Mnemonic._mnemonic(ent,wordlist);Object.defineProperty(this,'wordlist',{configurable:false,value:wordlist});Object.defineProperty(this,'phrase',{configurable:false,value:phrase});};Mnemonic._mnemonic=function(ENT,wordlist){var buf=Random.getRandomBuffer(ENT/8);return Mnemonic._entropy2mnemonic(buf,wordlist);};Mnemonic.Words={ENGLISH:require('./lib/words/english.js')};Mnemonic.isValid=function(mnemonic,wordlist){wordlist=wordlist||Mnemonic._getDictionary(mnemonic);if(!wordlist){return false;}var words=mnemonic.split(' ');var bin='';for(var i=0;i<words.length;i++){var ind=wordlist.indexOf(words[i]);if(ind<0)return false;bin=bin+('00000000000'+ind.toString(2)).slice(-11);}var cs=bin.length/33;var hash_bits=bin.slice(-cs);var nonhash_bits=bin.slice(0,bin.length-cs);var buf=new Buffer(nonhash_bits.length/8);for(i=0;i<nonhash_bits.length/8;i++){buf.writeUInt8(parseInt(bin.slice(i*8,(i+1)*8),2),i);}var expected_hash_bits=Mnemonic._entropyChecksum(buf);return expected_hash_bits===hash_bits;};Mnemonic._belongsToWordlist=function(mnemonic,wordlist){var words=mnemonic.split(' ');for(var i=0;i<words.length;i++){var ind=wordlist.indexOf(words[i]);if(ind<0)return false;}return true;};Mnemonic._getDictionary=function(mnemonic){if(!mnemonic)return null;var dicts=Object.keys(Mnemonic.Words);for(var i=0;i<dicts.length;i++){var key=dicts[i];if(Mnemonic._belongsToWordlist(mnemonic,Mnemonic.Words[key])){return Mnemonic.Words[key];}}return null;};Mnemonic.prototype.toHDPrivateKey=function(passphrase,network){var seed=this.toSeed(passphrase);return HDPrivateKey.fromSeed(seed,network);};Mnemonic.prototype.toSeed=function(passphrase){passphrase=passphrase||'';return pbkdf2(this.phrase,'mnemonic'+passphrase,2048,64);};Mnemonic.prototype.toString=function(){return this.phrase;};Mnemonic._entropy2mnemonic=function(entropy,wordlist){var bin='';for(var i=0;i<entropy.length;i++){bin=bin+('00000000'+entropy[i].toString(2)).slice(-8);}bin=bin+Mnemonic._entropyChecksum(entropy);if(bin.length%11!==0){throw new errors.InvalidEntropy(bin);}var mnemonic=[];for(i=0;i<bin.length/11;i++){var wi=parseInt(bin.slice(i*11,(i+1)*11),2);mnemonic.push(wordlist[wi]);}var ret;if(wordlist===Mnemonic.Words.JAPANESE){ret=mnemonic.join("\u3000");}else{ret=mnemonic.join(' ');}return ret;};Mnemonic._entropyChecksum=function(entropy){var hash=Hash.sha256(entropy);var bits=entropy.length*8;var cs=bits/32;var hashbits=new BN(hash.toString('hex'),16).toString(2);while(hashbits.length%256!==0){hashbits='0'+hashbits;}var checksum=hashbits.slice(0,cs);return checksum;};module.exports=Mnemonic;

}).call(this,require("buffer").Buffer)

},{"./lib/words/english.js":40,"./pbkdf2":42,"bitcore-lib/lib/crypto/bn.js":75,"bitcore-lib/lib/crypto/hash.js":77,"bitcore-lib/lib/crypto/random.js":79,"bitcore-lib/lib/hdprivatekey.js":88,"buffer":1133}],43:[function(require,module,exports){
(function (Buffer){
var CryptoJS=require('crypto-js');var EC=require('elliptic').ec;var ec=new EC('secp256k1');var Hash=require('bitcore-lib/lib/crypto/hash.js');var Random=require('bitcore-lib/lib/crypto/random.js');var HDPrivateKey=require('bitcore-lib/lib/hdprivatekey.js');var Mnemonic=require('../bitcore-mnemonic/mnemonic');var nacl=require('tweetnacl');var scrypt=require('scrypt-async');var Transaction=require('ethereumjs-tx/index.js');var util=require('ethereumjs-util');var signTx=function signTx(keystore,pwDerivedKey,rawTx,signingAddress){if(!keystore.isDerivedKeyCorrect(pwDerivedKey)){throw new Error("Incorrect derived key!");}rawTx=util.stripHexPrefix(rawTx);signingAddress=util.stripHexPrefix(signingAddress);var txCopy=new Transaction(Buffer.from(rawTx,'hex'));var privKey=keystore.exportPrivateKey(signingAddress,pwDerivedKey);txCopy.sign(Buffer.from(privKey,'hex'));privKey='';return txCopy.serialize().toString('hex');};function strip0x(input){if(typeof input!=='string'){return input;}else if(input.length>=2&&input.slice(0,2)==='0x'){return input.slice(2);}else{return input;}}function add0x(input){if(typeof input!=='string'){return input;}else if(input.length<2||input.slice(0,2)!=='0x'){return'0x'+input;}else{return input;}}function leftPadString(stringToPad,padChar,length){var repreatedPadChar='';for(var i=0;i<length;i++){repreatedPadChar+=padChar;}return(repreatedPadChar+stringToPad).slice(-length);}function nacl_encodeHex(msgUInt8Arr){var msgBase64=nacl.util.encodeBase64(msgUInt8Arr);return Buffer.from(msgBase64,'base64').toString('hex');}function nacl_decodeHex(msgHex){var msgBase64=Buffer.from(msgHex,'hex').toString('base64');return nacl.util.decodeBase64(msgBase64);}var KeyStore=function KeyStore(){};KeyStore.prototype.init=function(mnemonic,pwDerivedKey,hdPathString,salt){this.salt=salt;this.hdPathString=hdPathString;this.encSeed=undefined;this.encHdRootPriv=undefined;this.version=3;this.hdIndex=0;this.encPrivKeys={};this.addresses=[];if(typeof pwDerivedKey!=='undefined'&&typeof mnemonic!=='undefined'){var words=mnemonic.split(' ');if(!Mnemonic.isValid(mnemonic,Mnemonic.Words.ENGLISH)||words.length!==12){throw new Error('KeyStore: Invalid mnemonic');}var paddedSeed=leftPadString(mnemonic,' ',120);this.encSeed=encryptString(paddedSeed,pwDerivedKey);var hdRoot=new Mnemonic(mnemonic).toHDPrivateKey().xprivkey;var hdRootKey=new HDPrivateKey(hdRoot);var hdPathKey=hdRootKey.derive(hdPathString).xprivkey;this.encHdRootPriv=encryptString(hdPathKey,pwDerivedKey);}};KeyStore.createVault=function(opts,cb){if(!('hdPathString'in opts)){var err=new Error("Keystore: Must include hdPathString in createVault inputs. Suggested alternatives are m/0'/0'/0' for previous lightwallet default, or m/44'/60'/0'/0 for BIP44 (used by Jaxx & MetaMask)");return cb(err);}if(!('seedPhrase'in opts)){var err=new Error('Keystore: Must include seedPhrase in createVault inputs.');return cb(err);}if(!('salt'in opts)){opts.salt=generateSalt(32);}KeyStore.deriveKeyFromPasswordAndSalt(opts.password,opts.salt,function(err,pwDerivedKey){if(err)return cb(err);var ks=new KeyStore();ks.init(opts.seedPhrase,pwDerivedKey,opts.hdPathString,opts.salt);cb(null,ks);});};KeyStore.generateSalt=generateSalt;function generateSalt(byteCount){return Random.getRandomBuffer(byteCount||32).toString('base64');}KeyStore.prototype.isDerivedKeyCorrect=function(pwDerivedKey){var paddedSeed=KeyStore._decryptString(this.encSeed,pwDerivedKey);if(paddedSeed.length>0){return true;}return false;};function encryptString(string,pwDerivedKey){var nonce=nacl.randomBytes(nacl.secretbox.nonceLength);var encObj=nacl.secretbox(nacl.util.decodeUTF8(string),nonce,pwDerivedKey);var encString={'encStr':nacl.util.encodeBase64(encObj),'nonce':nacl.util.encodeBase64(nonce)};return encString;};KeyStore._encryptString=encryptString;KeyStore._decryptString=function(encryptedStr,pwDerivedKey){var secretbox=nacl.util.decodeBase64(encryptedStr.encStr);var nonce=nacl.util.decodeBase64(encryptedStr.nonce);var decryptedStr=nacl.secretbox.open(secretbox,nonce,pwDerivedKey);if(decryptedStr===undefined){throw new Error("Decryption failed!");}return nacl.util.encodeUTF8(decryptedStr);};KeyStore._encryptKey=function(privKey,pwDerivedKey){var privKeyArray=nacl_decodeHex(privKey);var nonce=nacl.randomBytes(nacl.secretbox.nonceLength);var encKey=nacl.secretbox(privKeyArray,nonce,pwDerivedKey);encKey={'key':nacl.util.encodeBase64(encKey),'nonce':nacl.util.encodeBase64(nonce)};return encKey;};KeyStore._decryptKey=function(encryptedKey,pwDerivedKey){var secretbox=nacl.util.decodeBase64(encryptedKey.key);var nonce=nacl.util.decodeBase64(encryptedKey.nonce);var decryptedKey=nacl.secretbox.open(secretbox,nonce,pwDerivedKey);if(decryptedKey===undefined){throw new Error("Decryption failed!");}return nacl_encodeHex(decryptedKey);};KeyStore._computeAddressFromPrivKey=function(privKey){var keyPair=ec.genKeyPair();keyPair._importPrivate(privKey,'hex');var compact=false;var pubKey=keyPair.getPublic(compact,'hex').slice(2);var pubKeyWordArray=CryptoJS.enc.Hex.parse(pubKey);var hash=CryptoJS.SHA3(pubKeyWordArray,{outputLength:256});var address=hash.toString(CryptoJS.enc.Hex).slice(24);return address;};KeyStore._computePubkeyFromPrivKey=function(privKey,curve){if(curve!=='curve25519'){throw new Error('KeyStore._computePubkeyFromPrivKey: Only "curve25519" supported.');}var privKeyBase64=Buffer.from(privKey,'hex').toString('base64');var privKeyUInt8Array=nacl.util.decodeBase64(privKeyBase64);var pubKey=nacl.box.keyPair.fromSecretKey(privKeyUInt8Array).publicKey;var pubKeyBase64=nacl.util.encodeBase64(pubKey);var pubKeyHex=Buffer.from(pubKeyBase64,'base64').toString('hex');return pubKeyHex;};KeyStore.prototype._generatePrivKeys=function(pwDerivedKey,n){if(!this.isDerivedKeyCorrect(pwDerivedKey)){throw new Error("Incorrect derived key!");}var hdRoot=KeyStore._decryptString(this.encHdRootPriv,pwDerivedKey);if(hdRoot.length===0){throw new Error('Provided password derived key is wrong');}var keys=[];for(var i=0;i<n;i++){var hdprivkey=new HDPrivateKey(hdRoot).derive(this.hdIndex++);var privkeyBuf=hdprivkey.privateKey.toBuffer();var privkeyHex=privkeyBuf.toString('hex');if(privkeyBuf.length<16){throw new Error('Private key suspiciously small: < 16 bytes. Aborting!');}else if(privkeyBuf.length<32){privkeyHex=leftPadString(privkeyBuf.toString('hex'),'0',64);}else if(privkeyBuf.length>32){throw new Error('Private key larger than 32 bytes. Aborting!');}var encPrivKey=KeyStore._encryptKey(privkeyHex,pwDerivedKey);keys[i]={privKey:privkeyHex,encPrivKey:encPrivKey};}return keys;};KeyStore._concatAndSha256=function(entropyBuf0,entropyBuf1){var totalEnt=Buffer.concat([entropyBuf0,entropyBuf1]);if(totalEnt.length!==entropyBuf0.length+entropyBuf1.length){throw new Error('generateRandomSeed: Logic error! Concatenation of entropy sources failed.');}var hashedEnt=Hash.sha256(totalEnt);return hashedEnt;};KeyStore.generateRandomSeed=function(extraEntropy){var seed='';if(extraEntropy===undefined){seed=new Mnemonic(Mnemonic.Words.ENGLISH);}else if(typeof extraEntropy==='string'){var entBuf=Buffer.from(extraEntropy);var randBuf=Random.getRandomBuffer(256/8);var hashedEnt=this._concatAndSha256(randBuf,entBuf).slice(0,128/8);seed=new Mnemonic(hashedEnt,Mnemonic.Words.ENGLISH);}else{throw new Error('generateRandomSeed: extraEntropy is set but not a string.');}return seed.toString();};KeyStore.isSeedValid=function(seed){return Mnemonic.isValid(seed,Mnemonic.Words.ENGLISH);};KeyStore.deserialize=function(keystore){var jsonKS=JSON.parse(keystore);if(jsonKS.version===undefined||jsonKS.version!==3){throw new Error('Old version of serialized keystore. Please use KeyStore.upgradeOldSerialized() to convert it to the latest version.');}var keystoreX=new KeyStore();keystoreX.salt=jsonKS.salt;keystoreX.hdPathString=jsonKS.hdPathString;keystoreX.encSeed=jsonKS.encSeed;keystoreX.encHdRootPriv=jsonKS.encHdRootPriv;keystoreX.version=jsonKS.version;keystoreX.hdIndex=jsonKS.hdIndex;keystoreX.encPrivKeys=jsonKS.encPrivKeys;keystoreX.addresses=jsonKS.addresses;return keystoreX;};KeyStore.deriveKeyFromPasswordAndSalt=function(password,salt,callback){if(!callback&&typeof salt==='function'){callback=salt;salt='lightwalletSalt';}else if(!salt&&typeof callback==='function'){salt='lightwalletSalt';}var logN=14;var r=8;var dkLen=32;var interruptStep=200;var cb=function cb(derKey){var err=null;var ui8arr=null;try{ui8arr=new Uint8Array(derKey);}catch(e){err=e;}callback(err,ui8arr);};scrypt(password,salt,logN,r,dkLen,interruptStep,cb,null);};KeyStore.prototype.serialize=function(){var jsonKS={'encSeed':this.encSeed,'encHdRootPriv':this.encHdRootPriv,'addresses':this.addresses,'encPrivKeys':this.encPrivKeys,'hdPathString':this.hdPathString,'salt':this.salt,'hdIndex':this.hdIndex,'version':this.version};return JSON.stringify(jsonKS);};KeyStore.prototype.getAddresses=function(){var prefixedAddresses=this.addresses.map(function(addr){return add0x(addr);});return prefixedAddresses;};KeyStore.prototype.getSeed=function(pwDerivedKey){if(!this.isDerivedKeyCorrect(pwDerivedKey)){throw new Error("Incorrect derived key!");}var paddedSeed=KeyStore._decryptString(this.encSeed,pwDerivedKey);return paddedSeed.trim();};KeyStore.prototype.exportPrivateKey=function(address,pwDerivedKey){if(!this.isDerivedKeyCorrect(pwDerivedKey)){throw new Error("Incorrect derived key!");}var address=strip0x(address);if(this.encPrivKeys[address]===undefined){throw new Error('KeyStore.exportPrivateKey: Address not found in KeyStore');}var encPrivKey=this.encPrivKeys[address];var privKey=KeyStore._decryptKey(encPrivKey,pwDerivedKey);return privKey;};KeyStore.prototype.generateNewAddress=function(pwDerivedKey,n){if(!this.isDerivedKeyCorrect(pwDerivedKey)){throw new Error("Incorrect derived key!");}if(!this.encSeed){throw new Error('KeyStore.generateNewAddress: No seed set');}n=n||1;var keys=this._generatePrivKeys(pwDerivedKey,n);for(var i=0;i<n;i++){var keyObj=keys[i];var address=KeyStore._computeAddressFromPrivKey(keyObj.privKey);this.encPrivKeys[address]=keyObj.encPrivKey;this.addresses.push(address);}};KeyStore.prototype.keyFromPassword=function(password,callback){KeyStore.deriveKeyFromPasswordAndSalt(password,this.salt,callback);};KeyStore.prototype.passwordProvider=function(callback){var password=prompt("Enter password to continue","Enter password");callback(null,password);};KeyStore.prototype.hasAddress=function(address,callback){var addrToCheck=strip0x(address);if(this.encPrivKeys[addrToCheck]===undefined){callback('Address not found!',false);}else{callback(null,true);}};KeyStore.prototype.signTransaction=function(txParams,callback){var _this=this;var ethjsTxParams={};ethjsTxParams.from=add0x(txParams.from);ethjsTxParams.to=add0x(txParams.to);ethjsTxParams.gasLimit=add0x(txParams.gas);ethjsTxParams.gasPrice=add0x(txParams.gasPrice);ethjsTxParams.nonce=add0x(txParams.nonce);ethjsTxParams.value=add0x(txParams.value);ethjsTxParams.data=add0x(txParams.data);var txObj=new Transaction(ethjsTxParams);var rawTx=txObj.serialize().toString('hex');var signingAddress=strip0x(txParams.from);var salt=this.salt;var self=this;this.passwordProvider(function(err,password,salt){if(err)return callback(err);if(!salt){salt=_this.salt;}_this.keyFromPassword(password,function(err,pwDerivedKey){if(err)return callback(err);var signedTx=signing.signTx(self,pwDerivedKey,rawTx,signingAddress,self.defaultHdPathString);callback(null,'0x'+signedTx);});});};module.exports=KeyStore;

}).call(this,require("buffer").Buffer)

},{"../bitcore-mnemonic/mnemonic":41,"bitcore-lib/lib/crypto/hash.js":77,"bitcore-lib/lib/crypto/random.js":79,"bitcore-lib/lib/hdprivatekey.js":88,"buffer":1133,"crypto-js":186,"elliptic":222,"ethereumjs-tx/index.js":259,"ethereumjs-util":271,"scrypt-async":640,"tweetnacl":661}],29:[function(require,module,exports){
(function (global,Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var dbcp_1=require("@evan.network/dbcp");var BigNumber=require("bignumber.js");var eth_sig_util_1=require("eth-sig-util");var Payments=function(_dbcp_1$Logger){(0,_inherits2["default"])(Payments,_dbcp_1$Logger);function Payments(options){var _this;(0,_classCallCheck2["default"])(this,Payments);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Payments).call(this,options));_this.options=options;_this.startBlock=0;if(options.channelManager){_this.channelManager=_this.options.contractLoader.loadContract('RaidenMicroTransferChannels',options.channelManager);}return _this;}(0,_createClass2["default"])(Payments,[{key:"closeChannel",value:function(){var _closeChannel=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(closingSig){var info,proof;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.isChannelValid()){_context.next=2;break;}throw new Error('No valid channelInfo');case 2:_context.next=4;return this.getChannelInfo();case 4:info=_context.sent;if(!(info.state!=='opened')){_context.next=7;break;}throw new Error('Tried closing already closed channel');case 7:if(this.channel.closing_sig){closingSig=this.channel.closing_sig;}else if(closingSig){this.setChannel(Object.assign({},this.channel,{closing_sig:closingSig}));}this.log("Closing channel. Cooperative = ".concat(closingSig),'debug');if(!(closingSig&&!this.channel.proof.sig)){_context.next=15;break;}_context.next=12;return this.signNewProof(this.channel.proof);case 12:proof=_context.sent;_context.next=16;break;case 15:proof=this.channel.proof;case 16:if(!closingSig){_context.next=21;break;}_context.next=19;return this.options.executor.executeContractTransaction(this.channelManager,'cooperativeClose',{from:this.channel.account},this.channel.receiver,this.channel.block,this.options.web3.utils.toHex(proof.balance),proof.sig,closingSig);case 19:_context.next=23;break;case 21:_context.next=23;return this.options.executor.executeContractTransaction(this.channelManager,'uncooperativeClose',{from:this.channel.account},this.channel.receiver,this.channel.block,this.options.web3.utils.toHex(proof.balance));case 23:case"end":return _context.stop();}}},_callee,this);}));function closeChannel(_x){return _closeChannel.apply(this,arguments);}return closeChannel;}()},{key:"confirmPayment",value:function confirmPayment(proof){if(!this.channel.next_proof||!this.channel.next_proof.sig||this.channel.next_proof.sig!==proof.sig){throw new Error('Invalid provided or stored next signature');}var channel=Object.assign({},this.channel,{proof:this.channel.next_proof});delete channel.next_proof;this.setChannel(channel);}},{key:"getChannelInfo",value:function(){var _getChannelInfo=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(channel){var closeEvents,closed,settleEvents,settled,info;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!channel){channel=this.channel;}if(this.isChannelValid(channel)){_context2.next=3;break;}throw new Error('No valid channelInfo');case 3:_context2.next=5;return this.channelManager.getPastEvents('ChannelCloseRequested',{filter:{_sender_address:channel.account,_receiver_address:channel.receiver,_open_block_number:channel.block},fromBlock:channel.block,toBlock:'latest'});case 5:closeEvents=_context2.sent;if(!closeEvents||closeEvents.length===0){closed=0;}else{closed=closeEvents[0].blockNumber;}_context2.next=9;return this.channelManager.getPastEvents('ChannelSettled',{filter:{_sender_address:channel.account,_receiver_address:channel.receiver,_open_block_number:channel.block},fromBlock:closed||channel.block,toBlock:'latest'});case 9:settleEvents=_context2.sent;if(!settleEvents||settleEvents.length===0){settled=0;}else{settled=settleEvents[0].blockNumber;}if(!settled){_context2.next=13;break;}return _context2.abrupt("return",{'state':'settled','block':settled,'deposit':new BigNumber(0),'withdrawn':new BigNumber(0)});case 13:_context2.next=15;return this.options.executor.executeContractCall(this.channelManager,'getChannelInfo',channel.account,channel.receiver,channel.block);case 15:info=_context2.sent;if(new BigNumber(info[1]).gt(0)){_context2.next=18;break;}throw new Error('Invalid channel deposit: '+JSON.stringify(info));case 18:return _context2.abrupt("return",{'state':closed?'closed':'opened','block':closed||channel.block,'deposit':new BigNumber(info[1]),'withdrawn':new BigNumber(info[4])});case 19:case"end":return _context2.stop();}}},_callee2,this);}));function getChannelInfo(_x2){return _getChannelInfo.apply(this,arguments);}return getChannelInfo;}()},{key:"getChallengePeriod",value:function(){var _getChallengePeriod=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.options.executor.executeContractCall(this.channelManager,'challenge_period');case 2:this.challenge=_context3.sent;if(this.challenge>0){_context3.next=5;break;}throw new Error('Invalid challenge');case 5:return _context3.abrupt("return",this.challenge);case 6:case"end":return _context3.stop();}}},_callee3,this);}));function getChallengePeriod(){return _getChallengePeriod.apply(this,arguments);}return getChallengePeriod;}()},{key:"getClosingSig",value:function(){var _getClosingSig=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(account){var params,sig,privKey,result,recovered;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(this.isChannelValid()){_context4.next=2;break;}throw new Error('No valid channelInfo');case 2:params=this.getClosingProofSignatureParams();_context4.next=5;return this.options.accountStore.getPrivateKey(account);case 5:privKey=_context4.sent;_context4.prev=6;_context4.next=9;return eth_sig_util_1.signTypedDataLegacy(Buffer.from(privKey,'hex'),{data:params});case 9:result=_context4.sent;if(!result.error){_context4.next=12;break;}throw result.error;case 12:sig=result;_context4.next=19;break;case 15:_context4.prev=15;_context4.t0=_context4["catch"](6);if(!(_context4.t0.message&&_context4.t0.message.includes('User denied'))){_context4.next=19;break;}throw _context4.t0;case 19:recovered=this.options.web3.utils.toChecksumAddress(eth_sig_util_1.recoverTypedSignatureLegacy({data:params,sig:sig}));this.log("signTypedData = ".concat(sig," , ").concat(recovered),'debug');if(!(recovered!==account)){_context4.next=23;break;}throw new Error("Invalid recovered signature: ".concat(recovered," != ").concat(account,". Do your provider support eth_signTypedData?"));case 23:return _context4.abrupt("return",sig);case 24:case"end":return _context4.stop();}}},_callee4,this,[[6,15]]);}));function getClosingSig(_x3){return _getClosingSig.apply(this,arguments);}return getClosingSig;}()},{key:"isChannelValid",value:function isChannelValid(channel){if(!channel){channel=this.channel;}if(!channel||!channel.receiver||!channel.block||!channel.proof||!channel.account){return false;}return true;}},{key:"incrementBalanceAndSign",value:function(){var _incrementBalanceAndSign=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(amount){var proof,info,err;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(amount instanceof BigNumber)){amount=new BigNumber(amount);}if(this.isChannelValid()){_context5.next=3;break;}throw new Error('No valid channelInfo');case 3:proof={balance:this.channel.proof.balance.plus(amount)};_context5.next=6;return this.getChannelInfo();case 6:info=_context5.sent;if(!(info.state!=='opened')){_context5.next=11;break;}throw new Error('Tried signing on closed channel');case 11:if(!proof.balance.gt(info.deposit)){_context5.next=16;break;}err=new Error("Insuficient funds: current = ".concat(info.deposit," , required = ").concat(proof.balance));err['current']=info.deposit;err['required']=proof.balance;throw err;case 16:_context5.next=18;return this.signNewProof(proof);case 18:return _context5.abrupt("return",_context5.sent);case 19:case"end":return _context5.stop();}}},_callee5,this);}));function incrementBalanceAndSign(_x4){return _incrementBalanceAndSign.apply(this,arguments);}return incrementBalanceAndSign;}()},{key:"loadChannelFromBlockchain",value:function(){var _loadChannelFromBlockchain=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(account,receiver){var openEvents,minBlock,_ref,_ref2,closeEvents,settleEvents,currentBlock,challenge,stillOpen,openChannel,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,ev,channel;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.channelManager.getPastEvents('ChannelCreated',{filter:{_sender_address:account,_receiver_address:receiver},fromBlock:this.startBlock,toBlock:'latest'});case 2:openEvents=_context6.sent;if(!(!openEvents||openEvents.length===0)){_context6.next=5;break;}throw new Error('No channel found for this account');case 5:minBlock=Math.min.apply(null,openEvents.map(function(ev){return ev.blockNumber;}));_context6.next=8;return Promise.all([this.channelManager.getPastEvents('ChannelCloseRequested',{filter:{_sender_address:account,_receiver_address:receiver},fromBlock:minBlock,toBlock:'latest'}),this.channelManager.getPastEvents('ChannelSettled',{filter:{_sender_address:account,_receiver_address:receiver},fromBlock:minBlock,toBlock:'latest'}),this.options.web3.eth.getBlockNumber(),this.getChallengePeriod()]);case 8:_ref=_context6.sent;_ref2=(0,_slicedToArray2["default"])(_ref,4);closeEvents=_ref2[0];settleEvents=_ref2[1];currentBlock=_ref2[2];challenge=_ref2[3];stillOpen=openEvents.filter(function(ev){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=settleEvents[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var sev=_step.value;if(sev.args._open_block_number.eq(ev.blockNumber)){return false;}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=closeEvents[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var cev=_step2.value;if(cev.args._open_block_number.eq(ev.blockNumber)&&cev.blockNumber+challenge>currentBlock){}return false;}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return true;});_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context6.prev=18;_iterator3=stillOpen[Symbol.iterator]();case 20:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context6.next=37;break;}ev=_step3.value;channel={account:account,receiver:receiver,block:ev.blockNumber,proof:{balance:new BigNumber(0)}};_context6.prev=23;_context6.next=26;return this.getChannelInfo(channel);case 26:openChannel=channel;return _context6.abrupt("break",37);case 30:_context6.prev=30;_context6.t0=_context6["catch"](23);this.log("Invalid channel ".concat(channel,", ").concat(_context6.t0),'error');return _context6.abrupt("continue",34);case 34:_iteratorNormalCompletion3=true;_context6.next=20;break;case 37:_context6.next=43;break;case 39:_context6.prev=39;_context6.t1=_context6["catch"](18);_didIteratorError3=true;_iteratorError3=_context6.t1;case 43:_context6.prev=43;_context6.prev=44;if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}case 46:_context6.prev=46;if(!_didIteratorError3){_context6.next=49;break;}throw _iteratorError3;case 49:return _context6.finish(46);case 50:return _context6.finish(43);case 51:if(openChannel){_context6.next=53;break;}throw new Error('No open and valid channels found from '+stillOpen.length);case 53:this.setChannel(openChannel);return _context6.abrupt("return",this.channel);case 55:case"end":return _context6.stop();}}},_callee6,this,[[18,39,43,51],[23,30],[44,,46,50]]);}));function loadChannelFromBlockchain(_x5,_x6){return _loadChannelFromBlockchain.apply(this,arguments);}return loadChannelFromBlockchain;}()},{key:"openChannel",value:function(){var _openChannel=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(account,receiver,deposit){var balance,createdBlockNumber,info;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(deposit instanceof BigNumber)){deposit=new BigNumber(deposit);}if(this.isChannelValid()){this.log("Already valid channel will be forgotten: ".concat(this.channel),'warning');}_context7.next=4;return this.options.web3.eth.getBalance(account);case 4:balance=_context7.sent;if(!new BigNumber(balance).lt(new BigNumber(deposit))){_context7.next=7;break;}throw new Error("Not enough tokens.\n        Token balance = ".concat(balance,", required = ").concat(deposit));case 7:_context7.next=9;return this.options.executor.executeContractTransaction(this.channelManager,'createChannel',{from:account,value:deposit,event:{target:'RaidenMicroTransferChannels',eventName:'ChannelCreated'},getEventResult:function getEventResult(event){return event.blockNumber;}},receiver);case 9:createdBlockNumber=_context7.sent;_context7.next=12;return this.options.executor.executeContractCall(this.channelManager,'getChannelInfo',account,receiver,createdBlockNumber);case 12:info=_context7.sent;if(info[1]>0){_context7.next=15;break;}throw new Error('No deposit found!');case 15:this.setChannel({account:account,receiver:receiver,block:createdBlockNumber,proof:{balance:new BigNumber(0)}});return _context7.abrupt("return",this.channel);case 17:case"end":return _context7.stop();}}},_callee7,this);}));function openChannel(_x7,_x8,_x9){return _openChannel.apply(this,arguments);}return openChannel;}()},{key:"setChannelManager",value:function setChannelManager(channelManager){this.channelManager=this.options.contractLoader.loadContract('RaidenMicroTransferChannels',channelManager);}},{key:"setChannel",value:function setChannel(channel){this.channel=channel;if(typeof global.localStorage!=='undefined'){var key=[this.channel.account,this.channel.receiver].join('|');global.localStorage.setItem(key,JSON.stringify(this.channel));}}},{key:"settleChannel",value:function(){var _settleChannel=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){var _ref3,_ref4,info,currentBlock;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(this.isChannelValid()){_context8.next=2;break;}throw new Error('No valid channelInfo');case 2:_context8.t0=Promise;_context8.t1=this.getChannelInfo();_context8.next=6;return this.options.web3.eth.getBlockNumber();case 6:_context8.t2=_context8.sent;_context8.t3=[_context8.t1,_context8.t2];_context8.next=10;return _context8.t0.all.call(_context8.t0,_context8.t3);case 10:_ref3=_context8.sent;_ref4=(0,_slicedToArray2["default"])(_ref3,2);info=_ref4[0];currentBlock=_ref4[1];if(!(info.state!=='closed')){_context8.next=18;break;}throw new Error("Tried settling opened or settled channel: ".concat(info.state));case 18:if(!(this.challenge&&currentBlock<info.block+this.challenge)){_context8.next=20;break;}throw new Error("Tried settling inside challenge period: ".concat(currentBlock," < ").concat(info.block," + ").concat(this.challenge));case 20:_context8.next=22;return this.options.executor.executeContractTransaction(this.channelManager,'settle',{from:this.channel.account},this.channel.receiver,this.channel.block);case 22:case"end":return _context8.stop();}}},_callee8,this);}));function settleChannel(){return _settleChannel.apply(this,arguments);}return settleChannel;}()},{key:"signNewProof",value:function(){var _signNewProof=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(proof){var params,sig,privKey,result,hash,recovered;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(this.isChannelValid()){_context9.next=2;break;}throw new Error('No valid channelInfo');case 2:this.log("signNewProof, balance: ".concat(proof.balance.toString(),", sig: ").concat(proof.sig),'debug');if(!proof){proof=this.channel.proof;}if(!proof.sig){_context9.next=6;break;}return _context9.abrupt("return",proof);case 6:params=this.getBalanceProofSignatureParams(proof);_context9.next=9;return this.options.accountStore.getPrivateKey(this.channel.account);case 9:privKey=_context9.sent;_context9.prev=10;_context9.next=13;return eth_sig_util_1.signTypedDataLegacy(Buffer.from(privKey,'hex'),{data:params});case 13:result=_context9.sent;if(!result.error){_context9.next=16;break;}throw result.error;case 16:sig=result;_context9.next=28;break;case 19:_context9.prev=19;_context9.t0=_context9["catch"](10);if(!(_context9.t0.message&&_context9.t0.message.includes('User denied'))){_context9.next=23;break;}throw _context9.t0;case 23:this.log("Error on signTypedData ".concat(_context9.t0),'error');hash=eth_sig_util_1.typedSignatureHash(params);_context9.next=27;return this.signMessage(hash);case 27:sig=_context9.sent;case 28:recovered=this.options.web3.utils.toChecksumAddress(eth_sig_util_1.recoverTypedSignatureLegacy({data:params,sig:sig}));this.log("signTypedData = ".concat(sig,", ").concat(recovered),'debug');if(!(recovered!==this.channel.account)){_context9.next=32;break;}throw new Error("Invalid recovered signature: ".concat(recovered," != ").concat(this.channel.account,". ")+'Does your provider support eth_signTypedData?');case 32:proof.sig=sig;if(proof.balance.equals(this.channel.proof.balance)){this.setChannel(Object.assign({},this.channel,{proof:proof,next_proof:proof}));}else{this.setChannel(Object.assign({},this.channel,{next_proof:proof}));}return _context9.abrupt("return",proof);case 35:case"end":return _context9.stop();}}},_callee9,this,[[10,19]]);}));function signNewProof(_x10){return _signNewProof.apply(this,arguments);}return signNewProof;}()},{key:"signMessage",value:function(){var _signMessage=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(msg){var hex,privKey,sig;return _regenerator["default"].wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(this.isChannelValid()){_context10.next=2;break;}throw new Error('No valid channelInfo');case 2:hex=msg.startsWith('0x')?msg:this.options.web3.utils.toHex(msg);this.log("Signing \"".concat(msg,"\" => ").concat(hex,", account: ").concat(this.channel.account),'debug');_context10.next=6;return this.options.accountStore.getPrivateKey(this.channel.account);case 6:privKey=_context10.sent;_context10.next=9;return this.options.web3.eth.accounts.sign(hex,Buffer.from('0x'+privKey,'hex'));case 9:sig=_context10.sent;return _context10.abrupt("return",sig);case 11:case"end":return _context10.stop();}}},_callee10,this);}));function signMessage(_x11){return _signMessage.apply(this,arguments);}return signMessage;}()},{key:"topUpChannel",value:function(){var _topUpChannel=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(deposit){var account,balance;return _regenerator["default"].wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!(deposit instanceof BigNumber)){deposit=new BigNumber(deposit);}if(this.isChannelValid()){_context11.next=3;break;}throw new Error('No valid channelInfo');case 3:account=this.channel.account;_context11.t0=BigNumber;_context11.next=7;return this.options.web3.eth.getBalance(account);case 7:_context11.t1=_context11.sent;balance=new _context11.t0(_context11.t1);if(balance.gte(deposit)){_context11.next=11;break;}throw new Error("Not enough EVE.\n        EVE balance = ".concat(balance,", required = ").concat(deposit));case 11:_context11.next=13;return this.options.executor.executeContractTransaction(this.channelManager,'topUp',{from:account,value:deposit},this.channel.receiver,this.channel.block);case 13:case"end":return _context11.stop();}}},_callee11,this);}));function topUpChannel(_x12){return _topUpChannel.apply(this,arguments);}return topUpChannel;}()},{key:"toBigNumber",value:function toBigNumber(input){return new BigNumber(input);}},{key:"getClosingProofSignatureParams",value:function getClosingProofSignatureParams(){return[{type:'string',name:'message_id',value:'Receiver closing signature'},{type:'address',name:'sender',value:this.channel.account},{type:'uint32',name:'block_created',value:''+this.channel.block},{type:'uint256',name:'balance',value:this.channel.proof.balance.toString()},{type:'address',name:'contract',value:this.channelManager.options.address}];}},{key:"getBalanceProofSignatureParams",value:function getBalanceProofSignatureParams(proof){return[{type:'string',name:'message_id',value:'Sender balance proof signature'},{type:'address',name:'receiver',value:this.channel.receiver},{type:'uint32',name:'block_created',value:''+this.channel.block},{type:'uint256',name:'balance',value:proof.balance.toString()},{type:'address',name:'contract',value:this.channelManager.options.address}];}}]);return Payments;}(dbcp_1.Logger);exports.Payments=Payments;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/slicedToArray":63,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"bignumber.js":72,"buffer":1133,"eth-sig-util":247}],701:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?module.exports=factory(require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/get'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/set'),require('@babel/runtime/helpers/inherits'),require('web3-core'),require('web3-providers'),require('web3-utils'),require('web3-eth'),require('web3-shh'),require('web3-net'),require('web3-eth-personal')):typeof define==='function'&&define.amd?define(['@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/get','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/set','@babel/runtime/helpers/inherits','web3-core','web3-providers','web3-utils','web3-eth','web3-shh','web3-net','web3-eth-personal'],factory):(global=global||self,global.Web3=factory(global._classCallCheck,global._createClass,global._possibleConstructorReturn,global._get,global._getPrototypeOf,global._set,global._inherits,global['web3-core'],global['web3-providers'],global['web3-utils'],global['web3-eth'],global['web3-shh'],global['web3-net'],global['web3-eth-personal']));})(void 0,function(_classCallCheck,_createClass,_possibleConstructorReturn,_get,_getPrototypeOf,_set,_inherits,web3Core,web3Providers,Utils,web3Eth,web3Shh,web3Net,web3EthPersonal){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_set=_set&&_set.hasOwnProperty('default')?_set['default']:_set;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;var version="2.0.0-alpha";var Web3=function(_AbstractWeb3Module){_inherits(Web3,_AbstractWeb3Module);function Web3(provider,net){var _this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Web3);_this=_possibleConstructorReturn(this,_getPrototypeOf(Web3).call(this,provider,options,null,net));_this.eth=new web3Eth.Eth(_this.currentProvider,net,options);_this.shh=new web3Shh.Shh(_this.currentProvider,net,options);_this.utils=Utils;_this.version=version;return _this;}_createClass(Web3,[{key:"setProvider",value:function setProvider(provider,net){return _get(_getPrototypeOf(Web3.prototype),"setProvider",this).call(this,provider,net)&&this.eth.setProvider(provider,net)&&this.shh.setProvider(provider,net);}},{key:"accounts",get:function get(){return this.eth.accounts;}},{key:"defaultGasPrice",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"defaultGasPrice",value,this,true);this.eth.defaultGasPrice=value;this.shh.defaultGasPrice=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"defaultGasPrice",this);}},{key:"defaultGas",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"defaultGas",value,this,true);this.eth.defaultGas=value;this.shh.defaultGas=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"defaultGas",this);}},{key:"transactionBlockTimeout",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"transactionBlockTimeout",value,this,true);this.eth.transactionBlockTimeout=value;this.shh.transactionBlockTimeout=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"transactionBlockTimeout",this);}},{key:"transactionConfirmationBlocks",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"transactionConfirmationBlocks",value,this,true);this.eth.transactionConfirmationBlocks=value;this.shh.transactionConfirmationBlocks=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"transactionConfirmationBlocks",this);}},{key:"transactionPollingTimeout",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"transactionPollingTimeout",value,this,true);this.eth.transactionPollingTimeout=value;this.shh.transactionPollingTimeout=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"transactionPollingTimeout",this);}},{key:"defaultAccount",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"defaultAccount",value,this,true);this.eth.defaultAccount=value;this.shh.defaultAccount=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"defaultAccount",this);}},{key:"defaultBlock",set:function set(value){_set(_getPrototypeOf(Web3.prototype),"defaultBlock",value,this,true);this.eth.defaultBlock=value;this.shh.defaultBlock=value;},get:function get(){return _get(_getPrototypeOf(Web3.prototype),"defaultBlock",this);}}],[{key:"givenProvider",get:function get(){return web3Providers.ProviderDetector.detect();}},{key:"modules",get:function get(){var providerResolver=new web3Providers.ProvidersModuleFactory().createProviderResolver();return{Eth:function Eth(provider,options,net){return new web3Eth.Eth(providerResolver.resolve(provider,net),options);},Net:function Net(provider,options,net){return new web3Net.Network(providerResolver.resolve(provider,net),options);},Personal:function Personal(provider,options,net){return new web3EthPersonal.Personal(providerResolver.resolve(provider,net),options);},Shh:function Shh(provider,options,net){return new web3Shh.Shh(providerResolver.resolve(provider,net),options);}};}}]);return Web3;}(web3Core.AbstractWeb3Module);return Web3;});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/set":61,"@babel/runtime/helpers/typeof":66,"web3-core":672,"web3-eth":687,"web3-eth-personal":686,"web3-net":697,"web3-providers":698,"web3-shh":699,"web3-utils":700}],25:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var crypto=require("crypto-browserify");var dbcp_1=require("@evan.network/dbcp");var aes_1=require("./encryption/aes");var KeyExchange=function(_dbcp_1$Logger){(0,_inherits2["default"])(KeyExchange,_dbcp_1$Logger);function KeyExchange(options){var _this;(0,_classCallCheck2["default"])(this,KeyExchange);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(KeyExchange).call(this,options));_this.SHARED_SECRET=Buffer.from('a832d7a4c60473d4fcddabf5c31f5b64dcb2382bbebbeb7c49b6cfc2f08fe9c3','hex');_this.COMM_KEY_CONTEXT='mailboxKeyExchange';_this.getExchangeMail=function(from,mailContent,encryptedCommKey){var ret={content:{from:from,fromAlias:mailContent.fromAlias,fromMail:mailContent.fromMail,title:mailContent.title,body:mailContent.body,attachments:mailContent.attachments||[]}};ret.content.title=ret.content.title||'Contact request';ret.content.body=ret.content.body||"Hi,\n\nI'd like to add you as a contact. Do you accept my invitation?\n\nWith kind regards,\n\n".concat(mailContent&&mailContent.fromAlias||from);ret.content.attachments.push({type:'commKey',key:encryptedCommKey});return ret;};_this.aes=new aes_1.Aes();_this.mailbox=options.mailbox;_this.diffieHellman=crypto.createDiffieHellman(_this.SHARED_SECRET);if(options.publicKey&&options.privateKey){_this.diffieHellman.setPublicKey(options.publicKey);_this.diffieHellman.setPrivateKey(options.privateKey);}else{_this.diffieHellman.generateKeys('hex');}_this.cryptoProvider=options.cryptoProvider;_this.defaultCryptoAlgo=options.defaultCryptoAlgo;_this.account=options.account;_this.keyProvider=options.keyProvider;return _this;}(0,_createClass2["default"])(KeyExchange,[{key:"computeSecretKey",value:function computeSecretKey(partialKey){var secret=this.diffieHellman.computeSecret(Buffer.from(partialKey,'hex'),'hex');return secret;}},{key:"decryptCommKey",value:function(){var _decryptCommKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(encryptedCommKey,exchangeKey){var cryptor;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cryptor=this.cryptoProvider.getCryptorByCryptoAlgo(this.defaultCryptoAlgo);_context.next=3;return cryptor.decrypt(Buffer.from(encryptedCommKey,'hex'),{key:exchangeKey});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop();}}},_callee,this);}));function decryptCommKey(_x,_x2){return _decryptCommKey.apply(this,arguments);}return decryptCommKey;}()},{key:"getDiffieHellmanKeys",value:function getDiffieHellmanKeys(){return{publicKey:this.diffieHellman.getPublicKey(),privateKey:this.diffieHellman.getPrivateKey()};}},{key:"generateCommKey",value:function(){var _generateCommKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this.aes.generateKey());case 1:case"end":return _context2.stop();}}},_callee2,this);}));function generateCommKey(){return _generateCommKey.apply(this,arguments);}return generateCommKey;}()},{key:"sendInvite",value:function(){var _sendInvite=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(targetAccount,targetPublicKey,commKey,mailContent){var secret,cryptor,encryptedCommKey;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:secret=this.computeSecretKey(targetPublicKey).toString('hex');cryptor=this.cryptoProvider.getCryptorByCryptoAlgo(this.defaultCryptoAlgo);_context3.next=4;return cryptor.encrypt(commKey,{key:secret});case 4:encryptedCommKey=_context3.sent;_context3.next=7;return this.mailbox.sendMail(this.getExchangeMail(this.account,mailContent,encryptedCommKey.toString('hex')),this.account,targetAccount,'0','mailboxKeyExchange');case 7:case"end":return _context3.stop();}}},_callee3,this);}));function sendInvite(_x3,_x4,_x5,_x6){return _sendInvite.apply(this,arguments);}return sendInvite;}()},{key:"setPublicKey",value:function setPublicKey(publicKey,privateKey){this.diffieHellman.setPrivateKey(Buffer.from(privateKey,'hex'));this.diffieHellman.setPublicKey(Buffer.from(publicKey,'hex'));}}]);return KeyExchange;}(dbcp_1.Logger);exports.KeyExchange=KeyExchange;

}).call(this,require("buffer").Buffer)

},{"./encryption/aes":21,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/regenerator":67,"@evan.network/dbcp":726,"buffer":1133,"crypto-browserify":177}],51:[function(require,module,exports){
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty;
},{}],247:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _require=require('buffer'),Buffer=_require.Buffer;var ethUtil=require('ethereumjs-util');var ethAbi=require('ethereumjs-abi');var nacl=require('tweetnacl');nacl.util=require('tweetnacl-util');var TYPED_MESSAGE_SCHEMA={type:'object',properties:{types:{type:'object',additionalProperties:{type:'array',items:{type:'object',properties:{name:{type:'string'},type:{type:'string'}},required:['name','type']}}},primaryType:{type:'string'},domain:{type:'object'},message:{type:'object'}},required:['types','primaryType','domain','message']};var TypedDataUtils={encodeData:function encodeData(primaryType,data,types){var encodedTypes=['bytes32'];var encodedValues=[this.hashType(primaryType,types)];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=types[primaryType][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var field=_step.value;var value=data[field.name];if(value!==undefined){if(field.type==='string'||field.type==='bytes'){encodedTypes.push('bytes32');value=ethUtil.sha3(value);encodedValues.push(value);}else if(types[field.type]!==undefined){encodedTypes.push('bytes32');value=ethUtil.sha3(this.encodeData(field.type,value,types));encodedValues.push(value);}else if(field.type.lastIndexOf(']')===field.type.length-1){throw new Error('Arrays currently unimplemented in encodeData');}else{encodedTypes.push(field.type);encodedValues.push(value);}}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}return ethAbi.rawEncode(encodedTypes,encodedValues);},encodeType:function encodeType(primaryType,types){var result='';var deps=this.findTypeDependencies(primaryType,types).filter(function(dep){return dep!==primaryType;});deps=[primaryType].concat(deps.sort());var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=deps[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var type=_step2.value;var children=types[type];if(!children){throw new Error("No type definition specified: ".concat(type));}result+="".concat(type,"(").concat(types[type].map(function(_ref){var name=_ref.name,type=_ref.type;return"".concat(type," ").concat(name);}).join(','),")");}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return result;},findTypeDependencies:function findTypeDependencies(primaryType,types){var results=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(results.includes(primaryType)||types[primaryType]===undefined){return results;}results.push(primaryType);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=types[primaryType][Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var field=_step3.value;var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.findTypeDependencies(field.type,types,results)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var dep=_step4.value;!results.includes(dep)&&results.push(dep);}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return results;},hashStruct:function hashStruct(primaryType,data,types){return ethUtil.sha3(this.encodeData(primaryType,data,types));},hashType:function hashType(primaryType,types){return ethUtil.sha3(this.encodeType(primaryType,types));},sanitizeData:function sanitizeData(data){var sanitizedData={};for(var key in TYPED_MESSAGE_SCHEMA.properties){data[key]&&(sanitizedData[key]=data[key]);}return sanitizedData;},sign:function sign(typedData){sanitizedData=this.sanitizeData(typedData);var parts=[Buffer.from('1901','hex')];parts.push(this.hashStruct('EIP712Domain',sanitizedData.domain,sanitizedData.types));parts.push(this.hashStruct(sanitizedData.primaryType,sanitizedData.message,sanitizedData.types));return ethUtil.sha3(Buffer.concat(parts));}};module.exports={/* common-shake removed: TYPED_MESSAGE_SCHEMA:TYPED_MESSAGE_SCHEMA *//* common-shake removed: TypedDataUtils:TypedDataUtils *//* common-shake removed: concatSig:function concatSig(v,r,s){var rSig=ethUtil.fromSigned(r);var sSig=ethUtil.fromSigned(s);var vSig=ethUtil.bufferToInt(v);var rStr=padWithZeroes(ethUtil.toUnsigned(rSig).toString('hex'),64);var sStr=padWithZeroes(ethUtil.toUnsigned(sSig).toString('hex'),64);var vStr=ethUtil.stripHexPrefix(ethUtil.intToHex(vSig));return ethUtil.addHexPrefix(rStr.concat(sStr,vStr)).toString('hex');} *//* common-shake removed: normalize:function normalize(input){if(!input)return;if(typeof input==='number'){var buffer=ethUtil.toBuffer(input);input=ethUtil.bufferToHex(buffer);}if(typeof input!=='string'){var msg='eth-sig-util.normalize() requires hex string or integer input.';msg+=' received '+(0,_typeof2["default"])(input)+': '+input;throw new Error(msg);}return ethUtil.addHexPrefix(input.toLowerCase());} *//* common-shake removed: personalSign:function personalSign(privateKey,msgParams){var message=ethUtil.toBuffer(msgParams.data);var msgHash=ethUtil.hashPersonalMessage(message);var sig=ethUtil.ecsign(msgHash,privateKey);var serialized=ethUtil.bufferToHex(this.concatSig(sig.v,sig.r,sig.s));return serialized;} *//* common-shake removed: recoverPersonalSignature:function recoverPersonalSignature(msgParams){var publicKey=getPublicKeyFor(msgParams);var sender=ethUtil.publicToAddress(publicKey);var senderHex=ethUtil.bufferToHex(sender);return senderHex;} *//* common-shake removed: extractPublicKey:function extractPublicKey(msgParams){var publicKey=getPublicKeyFor(msgParams);return'0x'+publicKey.toString('hex');} */typedSignatureHash:function typedSignatureHash(typedData){var hashBuffer=_typedSignatureHash(typedData);return ethUtil.bufferToHex(hashBuffer);},signTypedDataLegacy:function signTypedDataLegacy(privateKey,msgParams){var msgHash=_typedSignatureHash(msgParams.data);var sig=ethUtil.ecsign(msgHash,privateKey);return ethUtil.bufferToHex(this.concatSig(sig.v,sig.r,sig.s));},recoverTypedSignatureLegacy:function recoverTypedSignatureLegacy(msgParams){var msgHash=_typedSignatureHash(msgParams.data);var publicKey=recoverPublicKey(msgHash,msgParams.sig);var sender=ethUtil.publicToAddress(publicKey);return ethUtil.bufferToHex(sender);},/* common-shake removed: encrypt:function encrypt(receiverPublicKey,msgParams,version){switch(version){case'x25519-xsalsa20-poly1305':console.log((0,_typeof2["default"])(msgParams.data));if(typeof msgParams.data=='undefined'){throw new Error('Cannot detect secret message, message params should be of the form {data: "secret message"} ');}var ephemeralKeyPair=nacl.box.keyPair();try{var pubKeyUInt8Array=nacl.util.decodeBase64(receiverPublicKey);}catch(err){throw new Error('Bad public key');}var msgParamsUInt8Array=nacl.util.decodeUTF8(msgParams.data);var nonce=nacl.randomBytes(nacl.box.nonceLength);var encryptedMessage=nacl.box(msgParamsUInt8Array,nonce,pubKeyUInt8Array,ephemeralKeyPair.secretKey);var output={version:'x25519-xsalsa20-poly1305',nonce:nacl.util.encodeBase64(nonce),ephemPublicKey:nacl.util.encodeBase64(ephemeralKeyPair.publicKey),ciphertext:nacl.util.encodeBase64(encryptedMessage)};return output;default:throw new Error('Encryption type/version not supported');}} *//* common-shake removed: encryptSafely:function encryptSafely(receiverPublicKey,msgParams,version){var DEFAULT_PADDING_LENGTH=Math.pow(2,11);var NACL_EXTRA_BYTES=16;var data=msgParams.data;if(!data){throw new Error('Cannot encrypt empty msg.data');}if((0,_typeof2["default"])(data)==='object'&&data.toJSON){throw new Error('Cannot encrypt with toJSON property.  Please remove toJSON property');}var dataWithPadding={data:data,padding:''};var dataLength=Buffer.byteLength(JSON.stringify(dataWithPadding),'utf-8');var modVal=dataLength%DEFAULT_PADDING_LENGTH;var padLength=0;if(modVal>0){padLength=DEFAULT_PADDING_LENGTH-modVal-NACL_EXTRA_BYTES;}dataWithPadding.padding='0'.repeat(padLength);var paddedMsgParams={data:JSON.stringify(dataWithPadding)};return this.encrypt(receiverPublicKey,paddedMsgParams,version);} *//* common-shake removed: decrypt:function decrypt(encryptedData,receiverPrivateKey){switch(encryptedData.version){case'x25519-xsalsa20-poly1305':var recieverPrivateKeyUint8Array=nacl_decodeHex(receiverPrivateKey);var recieverEncryptionPrivateKey=nacl.box.keyPair.fromSecretKey(recieverPrivateKeyUint8Array).secretKey;var nonce=nacl.util.decodeBase64(encryptedData.nonce);var ciphertext=nacl.util.decodeBase64(encryptedData.ciphertext);var ephemPublicKey=nacl.util.decodeBase64(encryptedData.ephemPublicKey);var decryptedMessage=nacl.box.open(ciphertext,nonce,ephemPublicKey,recieverEncryptionPrivateKey);try{var output=nacl.util.encodeUTF8(decryptedMessage);}catch(err){throw new Error('Decryption failed.');}if(output){return output;}else{throw new Error('Decryption failed.');}default:throw new Error('Encryption type/version not supported.');}} *//* common-shake removed: decryptSafely:function decryptSafely(encryptedData,receiverPrivateKey){var dataWithPadding=JSON.parse(this.decrypt(encryptedData,receiverPrivateKey));return dataWithPadding.data;} *//* common-shake removed: getEncryptionPublicKey:function getEncryptionPublicKey(privateKey){var privateKeyUint8Array=nacl_decodeHex(privateKey);var encryptionPublicKey=nacl.box.keyPair.fromSecretKey(privateKeyUint8Array).publicKey;return nacl.util.encodeBase64(encryptionPublicKey);} *//* common-shake removed: signTypedData:function signTypedData(privateKey,msgParams){var message=TypedDataUtils.sign(msgParams.data);var sig=ethUtil.ecsign(message,privateKey);return ethUtil.bufferToHex(this.concatSig(sig.v,sig.r,sig.s));} *//* common-shake removed: recoverTypedSignature:function recoverTypedSignature(msgParams){var message=TypedDataUtils.sign(msgParams.data);var publicKey=recoverPublicKey(message,msgParams.sig);var sender=ethUtil.publicToAddress(publicKey);return ethUtil.bufferToHex(sender);} */};function _typedSignatureHash(typedData){var error=new Error('Expect argument to be non-empty array');if((0,_typeof2["default"])(typedData)!=='object'||!typedData.length)throw error;var data=typedData.map(function(e){return e.type==='bytes'?ethUtil.toBuffer(e.value):e.value;});var types=typedData.map(function(e){return e.type;});var schema=typedData.map(function(e){if(!e.name)throw error;return e.type+' '+e.name;});return ethAbi.soliditySHA3(['bytes32','bytes32'],[ethAbi.soliditySHA3(new Array(typedData.length).fill('string'),schema),ethAbi.soliditySHA3(types,data)]);}function recoverPublicKey(hash,sig){var signature=ethUtil.toBuffer(sig);var sigParams=ethUtil.fromRpcSig(signature);return ethUtil.ecrecover(hash,sigParams.v,sigParams.r,sigParams.s);}function getPublicKeyFor(msgParams){var message=ethUtil.toBuffer(msgParams.data);var msgHash=ethUtil.hashPersonalMessage(message);return recoverPublicKey(msgHash,msgParams.sig);}function padWithZeroes(number,length){var myString=''+number;while(myString.length<length){myString='0'+myString;}return myString;}function nacl_decodeHex(msgHex){var msgBase64=new Buffer(msgHex,'hex').toString('base64');return nacl.util.decodeBase64(msgBase64);}

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1133,"ethereumjs-abi":256,"ethereumjs-util":248,"tweetnacl":661,"tweetnacl-util":660}],32:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=JSON.parse("{\n  \"description\": {\n    \"description\": \"\",\n    \"imgSquare\": \"\",\n    \"name\": \"Company\"\n  },\n  \"permissions\": [\n    \"contact\",\n    \"registration\"\n  ],\n  \"template\": {\n    \"properties\": {\n      \"contact\": {\n        \"dataSchema\": {\n          \"properties\": {\n            \"country\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"streetAndNumber\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"postalCode\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"city\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"website\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            }\n          },\n          \"type\": \"object\"\n        },\n        \"permissions\": {\n          \"0\": [\n            \"set\"\n          ]\n        },\n        \"type\": \"entry\"\n      },\n      \"registration\": {\n        \"dataSchema\": {\n          \"properties\": {\n            \"court\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"register\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"registerNumber\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"salesTaxID\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            }\n          },\n          \"type\": \"object\"\n        },\n        \"permissions\": {\n          \"0\": [\n            \"set\"\n          ]\n        },\n        \"type\": \"entry\"\n      }\n    },\n    \"type\": \"metadata\"\n  }\n}");

},{}],33:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=JSON.parse("{\n  \"description\": {\n    \"description\": \"\",\n    \"imgSquare\": \"\",\n    \"name\": \"Device\"\n  },\n  \"permissions\": [\n    \"deviceDetails\"\n  ],\n  \"template\": {\n    \"properties\": {\n      \"deviceDetails\": {\n        \"dataSchema\": {\n          \"properties\": {\n            \"type\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"location\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"manufacturer\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"owner\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"serialNumber\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"settings\": {\n              \"$comment\": \"{\\\"isEncryptedFile\\\": true}\",\n              \"default\": {\n                \"files\": []\n              },\n              \"properties\": {\n                \"additionalProperties\": false,\n                \"files\": {\n                  \"items\": {\n                    \"type\": \"string\"\n                  },\n                  \"type\": \"array\"\n                }\n              },\n              \"required\": [\n                \"files\"\n              ],\n              \"type\": \"object\"\n            },\n            \"dataStreamSettings\": {\n              \"$comment\": \"{\\\"isEncryptedFile\\\": true}\",\n              \"default\": {\n                \"files\": []\n              },\n              \"properties\": {\n                \"additionalProperties\": false,\n                \"files\": {\n                  \"items\": {\n                    \"type\": \"string\"\n                  },\n                  \"type\": \"array\"\n                }\n              },\n              \"required\": [\n                \"files\"\n              ],\n              \"type\": \"object\"\n            }\n          },\n          \"type\": \"object\"\n        },\n        \"permissions\": {\n          \"0\": [\n            \"set\"\n          ]\n        },\n        \"type\": \"entry\"\n      }\n    },\n    \"type\": \"metadata\"\n  }\n}");

},{}],35:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=JSON.parse("{\n  \"description\": {\n    \"description\": \"\",\n    \"imgSquare\": \"\",\n    \"name\": \"user\"\n  },\n  \"permissions\": [\n    \"accountDetails\"\n  ],\n  \"template\": {\n    \"properties\": {\n      \"accountDetails\": {\n        \"dataSchema\": {\n          \"properties\": {\n            \"accountName\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            },\n            \"picture\": {\n              \"$comment\": \"{\\\"isEncryptedFile\\\": true}\",\n              \"default\": {\n                \"files\": []\n              },\n              \"properties\": {\n                \"additionalProperties\": false,\n                \"files\": {\n                  \"items\": {\n                    \"type\": \"string\"\n                  },\n                  \"type\": \"array\"\n                }\n              },\n              \"required\": [\n                \"files\"\n              ],\n              \"type\": \"object\"\n            },\n            \"profileType\": {\n              \"default\": \"\",\n              \"type\": \"string\"\n            }\n          },\n          \"type\": \"object\"\n        },\n        \"permissions\": {\n          \"0\": [\n            \"set\"\n          ]\n        },\n        \"type\": \"entry\"\n      },\n      \"type\": {\n        \"dataSchema\": {\n          \"type\": \"string\"\n        },\n        \"permissions\": {\n          \"0\": [\n            \"set\"\n          ]\n        },\n        \"type\": \"entry\"\n      }\n    },\n    \"type\": \"metadata\"\n  }\n}");

},{}],40:[function(require,module,exports){
'use strict';var english=['abandon','ability','able','about','above','absent','absorb','abstract','absurd','abuse','access','accident','account','accuse','achieve','acid','acoustic','acquire','across','act','action','actor','actress','actual','adapt','add','addict','address','adjust','admit','adult','advance','advice','aerobic','affair','afford','afraid','again','age','agent','agree','ahead','aim','air','airport','aisle','alarm','album','alcohol','alert','alien','all','alley','allow','almost','alone','alpha','already','also','alter','always','amateur','amazing','among','amount','amused','analyst','anchor','ancient','anger','angle','angry','animal','ankle','announce','annual','another','answer','antenna','antique','anxiety','any','apart','apology','appear','apple','approve','april','arch','arctic','area','arena','argue','arm','armed','armor','army','around','arrange','arrest','arrive','arrow','art','artefact','artist','artwork','ask','aspect','assault','asset','assist','assume','asthma','athlete','atom','attack','attend','attitude','attract','auction','audit','august','aunt','author','auto','autumn','average','avocado','avoid','awake','aware','away','awesome','awful','awkward','axis','baby','bachelor','bacon','badge','bag','balance','balcony','ball','bamboo','banana','banner','bar','barely','bargain','barrel','base','basic','basket','battle','beach','bean','beauty','because','become','beef','before','begin','behave','behind','believe','below','belt','bench','benefit','best','betray','better','between','beyond','bicycle','bid','bike','bind','biology','bird','birth','bitter','black','blade','blame','blanket','blast','bleak','bless','blind','blood','blossom','blouse','blue','blur','blush','board','boat','body','boil','bomb','bone','bonus','book','boost','border','boring','borrow','boss','bottom','bounce','box','boy','bracket','brain','brand','brass','brave','bread','breeze','brick','bridge','brief','bright','bring','brisk','broccoli','broken','bronze','broom','brother','brown','brush','bubble','buddy','budget','buffalo','build','bulb','bulk','bullet','bundle','bunker','burden','burger','burst','bus','business','busy','butter','buyer','buzz','cabbage','cabin','cable','cactus','cage','cake','call','calm','camera','camp','can','canal','cancel','candy','cannon','canoe','canvas','canyon','capable','capital','captain','car','carbon','card','cargo','carpet','carry','cart','case','cash','casino','castle','casual','cat','catalog','catch','category','cattle','caught','cause','caution','cave','ceiling','celery','cement','census','century','cereal','certain','chair','chalk','champion','change','chaos','chapter','charge','chase','chat','cheap','check','cheese','chef','cherry','chest','chicken','chief','child','chimney','choice','choose','chronic','chuckle','chunk','churn','cigar','cinnamon','circle','citizen','city','civil','claim','clap','clarify','claw','clay','clean','clerk','clever','click','client','cliff','climb','clinic','clip','clock','clog','close','cloth','cloud','clown','club','clump','cluster','clutch','coach','coast','coconut','code','coffee','coil','coin','collect','color','column','combine','come','comfort','comic','common','company','concert','conduct','confirm','congress','connect','consider','control','convince','cook','cool','copper','copy','coral','core','corn','correct','cost','cotton','couch','country','couple','course','cousin','cover','coyote','crack','cradle','craft','cram','crane','crash','crater','crawl','crazy','cream','credit','creek','crew','cricket','crime','crisp','critic','crop','cross','crouch','crowd','crucial','cruel','cruise','crumble','crunch','crush','cry','crystal','cube','culture','cup','cupboard','curious','current','curtain','curve','cushion','custom','cute','cycle','dad','damage','damp','dance','danger','daring','dash','daughter','dawn','day','deal','debate','debris','decade','december','decide','decline','decorate','decrease','deer','defense','define','defy','degree','delay','deliver','demand','demise','denial','dentist','deny','depart','depend','deposit','depth','deputy','derive','describe','desert','design','desk','despair','destroy','detail','detect','develop','device','devote','diagram','dial','diamond','diary','dice','diesel','diet','differ','digital','dignity','dilemma','dinner','dinosaur','direct','dirt','disagree','discover','disease','dish','dismiss','disorder','display','distance','divert','divide','divorce','dizzy','doctor','document','dog','doll','dolphin','domain','donate','donkey','donor','door','dose','double','dove','draft','dragon','drama','drastic','draw','dream','dress','drift','drill','drink','drip','drive','drop','drum','dry','duck','dumb','dune','during','dust','dutch','duty','dwarf','dynamic','eager','eagle','early','earn','earth','easily','east','easy','echo','ecology','economy','edge','edit','educate','effort','egg','eight','either','elbow','elder','electric','elegant','element','elephant','elevator','elite','else','embark','embody','embrace','emerge','emotion','employ','empower','empty','enable','enact','end','endless','endorse','enemy','energy','enforce','engage','engine','enhance','enjoy','enlist','enough','enrich','enroll','ensure','enter','entire','entry','envelope','episode','equal','equip','era','erase','erode','erosion','error','erupt','escape','essay','essence','estate','eternal','ethics','evidence','evil','evoke','evolve','exact','example','excess','exchange','excite','exclude','excuse','execute','exercise','exhaust','exhibit','exile','exist','exit','exotic','expand','expect','expire','explain','expose','express','extend','extra','eye','eyebrow','fabric','face','faculty','fade','faint','faith','fall','false','fame','family','famous','fan','fancy','fantasy','farm','fashion','fat','fatal','father','fatigue','fault','favorite','feature','february','federal','fee','feed','feel','female','fence','festival','fetch','fever','few','fiber','fiction','field','figure','file','film','filter','final','find','fine','finger','finish','fire','firm','first','fiscal','fish','fit','fitness','fix','flag','flame','flash','flat','flavor','flee','flight','flip','float','flock','floor','flower','fluid','flush','fly','foam','focus','fog','foil','fold','follow','food','foot','force','forest','forget','fork','fortune','forum','forward','fossil','foster','found','fox','fragile','frame','frequent','fresh','friend','fringe','frog','front','frost','frown','frozen','fruit','fuel','fun','funny','furnace','fury','future','gadget','gain','galaxy','gallery','game','gap','garage','garbage','garden','garlic','garment','gas','gasp','gate','gather','gauge','gaze','general','genius','genre','gentle','genuine','gesture','ghost','giant','gift','giggle','ginger','giraffe','girl','give','glad','glance','glare','glass','glide','glimpse','globe','gloom','glory','glove','glow','glue','goat','goddess','gold','good','goose','gorilla','gospel','gossip','govern','gown','grab','grace','grain','grant','grape','grass','gravity','great','green','grid','grief','grit','grocery','group','grow','grunt','guard','guess','guide','guilt','guitar','gun','gym','habit','hair','half','hammer','hamster','hand','happy','harbor','hard','harsh','harvest','hat','have','hawk','hazard','head','health','heart','heavy','hedgehog','height','hello','helmet','help','hen','hero','hidden','high','hill','hint','hip','hire','history','hobby','hockey','hold','hole','holiday','hollow','home','honey','hood','hope','horn','horror','horse','hospital','host','hotel','hour','hover','hub','huge','human','humble','humor','hundred','hungry','hunt','hurdle','hurry','hurt','husband','hybrid','ice','icon','idea','identify','idle','ignore','ill','illegal','illness','image','imitate','immense','immune','impact','impose','improve','impulse','inch','include','income','increase','index','indicate','indoor','industry','infant','inflict','inform','inhale','inherit','initial','inject','injury','inmate','inner','innocent','input','inquiry','insane','insect','inside','inspire','install','intact','interest','into','invest','invite','involve','iron','island','isolate','issue','item','ivory','jacket','jaguar','jar','jazz','jealous','jeans','jelly','jewel','job','join','joke','journey','joy','judge','juice','jump','jungle','junior','junk','just','kangaroo','keen','keep','ketchup','key','kick','kid','kidney','kind','kingdom','kiss','kit','kitchen','kite','kitten','kiwi','knee','knife','knock','know','lab','label','labor','ladder','lady','lake','lamp','language','laptop','large','later','latin','laugh','laundry','lava','law','lawn','lawsuit','layer','lazy','leader','leaf','learn','leave','lecture','left','leg','legal','legend','leisure','lemon','lend','length','lens','leopard','lesson','letter','level','liar','liberty','library','license','life','lift','light','like','limb','limit','link','lion','liquid','list','little','live','lizard','load','loan','lobster','local','lock','logic','lonely','long','loop','lottery','loud','lounge','love','loyal','lucky','luggage','lumber','lunar','lunch','luxury','lyrics','machine','mad','magic','magnet','maid','mail','main','major','make','mammal','man','manage','mandate','mango','mansion','manual','maple','marble','march','margin','marine','market','marriage','mask','mass','master','match','material','math','matrix','matter','maximum','maze','meadow','mean','measure','meat','mechanic','medal','media','melody','melt','member','memory','mention','menu','mercy','merge','merit','merry','mesh','message','metal','method','middle','midnight','milk','million','mimic','mind','minimum','minor','minute','miracle','mirror','misery','miss','mistake','mix','mixed','mixture','mobile','model','modify','mom','moment','monitor','monkey','monster','month','moon','moral','more','morning','mosquito','mother','motion','motor','mountain','mouse','move','movie','much','muffin','mule','multiply','muscle','museum','mushroom','music','must','mutual','myself','mystery','myth','naive','name','napkin','narrow','nasty','nation','nature','near','neck','need','negative','neglect','neither','nephew','nerve','nest','net','network','neutral','never','news','next','nice','night','noble','noise','nominee','noodle','normal','north','nose','notable','note','nothing','notice','novel','now','nuclear','number','nurse','nut','oak','obey','object','oblige','obscure','observe','obtain','obvious','occur','ocean','october','odor','off','offer','office','often','oil','okay','old','olive','olympic','omit','once','one','onion','online','only','open','opera','opinion','oppose','option','orange','orbit','orchard','order','ordinary','organ','orient','original','orphan','ostrich','other','outdoor','outer','output','outside','oval','oven','over','own','owner','oxygen','oyster','ozone','pact','paddle','page','pair','palace','palm','panda','panel','panic','panther','paper','parade','parent','park','parrot','party','pass','patch','path','patient','patrol','pattern','pause','pave','payment','peace','peanut','pear','peasant','pelican','pen','penalty','pencil','people','pepper','perfect','permit','person','pet','phone','photo','phrase','physical','piano','picnic','picture','piece','pig','pigeon','pill','pilot','pink','pioneer','pipe','pistol','pitch','pizza','place','planet','plastic','plate','play','please','pledge','pluck','plug','plunge','poem','poet','point','polar','pole','police','pond','pony','pool','popular','portion','position','possible','post','potato','pottery','poverty','powder','power','practice','praise','predict','prefer','prepare','present','pretty','prevent','price','pride','primary','print','priority','prison','private','prize','problem','process','produce','profit','program','project','promote','proof','property','prosper','protect','proud','provide','public','pudding','pull','pulp','pulse','pumpkin','punch','pupil','puppy','purchase','purity','purpose','purse','push','put','puzzle','pyramid','quality','quantum','quarter','question','quick','quit','quiz','quote','rabbit','raccoon','race','rack','radar','radio','rail','rain','raise','rally','ramp','ranch','random','range','rapid','rare','rate','rather','raven','raw','razor','ready','real','reason','rebel','rebuild','recall','receive','recipe','record','recycle','reduce','reflect','reform','refuse','region','regret','regular','reject','relax','release','relief','rely','remain','remember','remind','remove','render','renew','rent','reopen','repair','repeat','replace','report','require','rescue','resemble','resist','resource','response','result','retire','retreat','return','reunion','reveal','review','reward','rhythm','rib','ribbon','rice','rich','ride','ridge','rifle','right','rigid','ring','riot','ripple','risk','ritual','rival','river','road','roast','robot','robust','rocket','romance','roof','rookie','room','rose','rotate','rough','round','route','royal','rubber','rude','rug','rule','run','runway','rural','sad','saddle','sadness','safe','sail','salad','salmon','salon','salt','salute','same','sample','sand','satisfy','satoshi','sauce','sausage','save','say','scale','scan','scare','scatter','scene','scheme','school','science','scissors','scorpion','scout','scrap','screen','script','scrub','sea','search','season','seat','second','secret','section','security','seed','seek','segment','select','sell','seminar','senior','sense','sentence','series','service','session','settle','setup','seven','shadow','shaft','shallow','share','shed','shell','sheriff','shield','shift','shine','ship','shiver','shock','shoe','shoot','shop','short','shoulder','shove','shrimp','shrug','shuffle','shy','sibling','sick','side','siege','sight','sign','silent','silk','silly','silver','similar','simple','since','sing','siren','sister','situate','six','size','skate','sketch','ski','skill','skin','skirt','skull','slab','slam','sleep','slender','slice','slide','slight','slim','slogan','slot','slow','slush','small','smart','smile','smoke','smooth','snack','snake','snap','sniff','snow','soap','soccer','social','sock','soda','soft','solar','soldier','solid','solution','solve','someone','song','soon','sorry','sort','soul','sound','soup','source','south','space','spare','spatial','spawn','speak','special','speed','spell','spend','sphere','spice','spider','spike','spin','spirit','split','spoil','sponsor','spoon','sport','spot','spray','spread','spring','spy','square','squeeze','squirrel','stable','stadium','staff','stage','stairs','stamp','stand','start','state','stay','steak','steel','stem','step','stereo','stick','still','sting','stock','stomach','stone','stool','story','stove','strategy','street','strike','strong','struggle','student','stuff','stumble','style','subject','submit','subway','success','such','sudden','suffer','sugar','suggest','suit','summer','sun','sunny','sunset','super','supply','supreme','sure','surface','surge','surprise','surround','survey','suspect','sustain','swallow','swamp','swap','swarm','swear','sweet','swift','swim','swing','switch','sword','symbol','symptom','syrup','system','table','tackle','tag','tail','talent','talk','tank','tape','target','task','taste','tattoo','taxi','teach','team','tell','ten','tenant','tennis','tent','term','test','text','thank','that','theme','then','theory','there','they','thing','this','thought','three','thrive','throw','thumb','thunder','ticket','tide','tiger','tilt','timber','time','tiny','tip','tired','tissue','title','toast','tobacco','today','toddler','toe','together','toilet','token','tomato','tomorrow','tone','tongue','tonight','tool','tooth','top','topic','topple','torch','tornado','tortoise','toss','total','tourist','toward','tower','town','toy','track','trade','traffic','tragic','train','transfer','trap','trash','travel','tray','treat','tree','trend','trial','tribe','trick','trigger','trim','trip','trophy','trouble','truck','true','truly','trumpet','trust','truth','try','tube','tuition','tumble','tuna','tunnel','turkey','turn','turtle','twelve','twenty','twice','twin','twist','two','type','typical','ugly','umbrella','unable','unaware','uncle','uncover','under','undo','unfair','unfold','unhappy','uniform','unique','unit','universe','unknown','unlock','until','unusual','unveil','update','upgrade','uphold','upon','upper','upset','urban','urge','usage','use','used','useful','useless','usual','utility','vacant','vacuum','vague','valid','valley','valve','van','vanish','vapor','various','vast','vault','vehicle','velvet','vendor','venture','venue','verb','verify','version','very','vessel','veteran','viable','vibrant','vicious','victory','video','view','village','vintage','violin','virtual','virus','visa','visit','visual','vital','vivid','vocal','voice','void','volcano','volume','vote','voyage','wage','wagon','wait','walk','wall','walnut','want','warfare','warm','warrior','wash','wasp','waste','water','wave','way','wealth','weapon','wear','weasel','weather','web','wedding','weekend','weird','welcome','west','wet','whale','what','wheat','wheel','when','where','whip','whisper','wide','width','wife','wild','will','win','window','wine','wing','wink','winner','winter','wire','wisdom','wise','wish','witness','wolf','woman','wonder','wood','wool','word','work','world','worry','worth','wrap','wreck','wrestle','wrist','write','wrong','yard','year','yellow','you','young','youth','zebra','zero','zone','zoo'];module.exports=english;

},{}],42:[function(require,module,exports){
(function (Buffer){
'use strict';var crypto=require("crypto");function pbkdf2(key,salt,iterations,dkLen){var hLen=64;if(dkLen>(Math.pow(2,32)-1)*hLen){throw Error('Requested key length too long');}if(typeof key!=='string'&&!Buffer.isBuffer(key)){throw new TypeError('key must a string or Buffer');}if(typeof salt!=='string'&&!Buffer.isBuffer(salt)){throw new TypeError('salt must a string or Buffer');}if(typeof key==='string'){key=Buffer.from(key);}if(typeof salt==='string'){salt=Buffer.from(salt);}var DK=new Buffer(dkLen);var U=new Buffer(hLen);var T=new Buffer(hLen);var block1=new Buffer(salt.length+4);var l=Math.ceil(dkLen/hLen);var r=dkLen-(l-1)*hLen;salt.copy(block1,0,0,salt.length);for(var i=1;i<=l;i++){block1[salt.length+0]=i>>24&0xff;block1[salt.length+1]=i>>16&0xff;block1[salt.length+2]=i>>8&0xff;block1[salt.length+3]=i>>0&0xff;U=crypto.createHmac('sha512',key).update(block1).digest();U.copy(T,0,0,hLen);for(var j=1;j<iterations;j++){U=crypto.createHmac('sha512',key).update(U).digest();for(var k=0;k<hLen;k++){T[k]^=U[k];}}var destPos=(i-1)*hLen;var len=i===l?r:hLen;T.copy(DK,destPos,0,len);}return DK;}module.exports=pbkdf2;

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"crypto":1142}],88:[function(require,module,exports){
(function (Buffer){
'use strict';var assert=require('assert');var buffer=require('buffer');var _=require('lodash');var $=require('./util/preconditions');var BN=require('./crypto/bn');var Base58=require('./encoding/base58');var Base58Check=require('./encoding/base58check');var Hash=require('./crypto/hash');var Network=require('./networks');var Point=require('./crypto/point');var PrivateKey=require('./privatekey');var Random=require('./crypto/random');var errors=require('./errors');var hdErrors=errors.HDPrivateKey;var BufferUtil=require('./util/buffer');var JSUtil=require('./util/js');var MINIMUM_ENTROPY_BITS=128;var BITS_TO_BYTES=1/8;var MAXIMUM_ENTROPY_BITS=512;function HDPrivateKey(arg){if(arg instanceof HDPrivateKey){return arg;}if(!(this instanceof HDPrivateKey)){return new HDPrivateKey(arg);}if(!arg){return this._generateRandomly();}if(Network.get(arg)){return this._generateRandomly(arg);}else if(_.isString(arg)||BufferUtil.isBuffer(arg)){if(HDPrivateKey.isValidSerialized(arg)){this._buildFromSerialized(arg);}else if(JSUtil.isValidJSON(arg)){this._buildFromJSON(arg);}else if(BufferUtil.isBuffer(arg)&&HDPrivateKey.isValidSerialized(arg.toString())){this._buildFromSerialized(arg.toString());}else{throw HDPrivateKey.getSerializedError(arg);}}else if(_.isObject(arg)){this._buildFromObject(arg);}else{throw new hdErrors.UnrecognizedArgument(arg);}}HDPrivateKey.isValidPath=function(arg,hardened){if(_.isString(arg)){var indexes=HDPrivateKey._getDerivationIndexes(arg);return indexes!==null&&_.every(indexes,HDPrivateKey.isValidPath);}if(_.isNumber(arg)){if(arg<HDPrivateKey.Hardened&&hardened===true){arg+=HDPrivateKey.Hardened;}return arg>=0&&arg<HDPrivateKey.MaxIndex;}return false;};HDPrivateKey._getDerivationIndexes=function(path){var steps=path.split('/');if(_.includes(HDPrivateKey.RootElementAlias,path)){return[];}if(!_.includes(HDPrivateKey.RootElementAlias,steps[0])){return null;}var indexes=steps.slice(1).map(function(step){var isHardened=step.slice(-1)==='\'';if(isHardened){step=step.slice(0,-1);}if(!step||step[0]==='-'){return NaN;}var index=+step;if(isHardened){index+=HDPrivateKey.Hardened;}return index;});return _.some(indexes,isNaN)?null:indexes;};HDPrivateKey.prototype.derive=function(arg,hardened){return this.deriveNonCompliantChild(arg,hardened);};HDPrivateKey.prototype.deriveChild=function(arg,hardened){if(_.isNumber(arg)){return this._deriveWithNumber(arg,hardened);}else if(_.isString(arg)){return this._deriveFromString(arg);}else{throw new hdErrors.InvalidDerivationArgument(arg);}};HDPrivateKey.prototype.deriveNonCompliantChild=function(arg,hardened){if(_.isNumber(arg)){return this._deriveWithNumber(arg,hardened,true);}else if(_.isString(arg)){return this._deriveFromString(arg,true);}else{throw new hdErrors.InvalidDerivationArgument(arg);}};HDPrivateKey.prototype._deriveWithNumber=function(index,hardened,nonCompliant){if(!HDPrivateKey.isValidPath(index,hardened)){throw new hdErrors.InvalidPath(index);}hardened=index>=HDPrivateKey.Hardened?true:hardened;if(index<HDPrivateKey.Hardened&&hardened===true){index+=HDPrivateKey.Hardened;}var indexBuffer=BufferUtil.integerAsBuffer(index);var data;if(hardened&&nonCompliant){var nonZeroPadded=this.privateKey.bn.toBuffer();data=BufferUtil.concat([Buffer.from([0]),nonZeroPadded,indexBuffer]);}else if(hardened){var privateKeyBuffer=this.privateKey.bn.toBuffer({size:32});assert(privateKeyBuffer.length===32,'length of private key buffer is expected to be 32 bytes');data=BufferUtil.concat([Buffer.from([0]),privateKeyBuffer,indexBuffer]);}else{data=BufferUtil.concat([this.publicKey.toBuffer(),indexBuffer]);}var hash=Hash.sha512hmac(data,this._buffers.chainCode);var leftPart=BN.fromBuffer(hash.slice(0,32),{size:32});var chainCode=hash.slice(32,64);var privateKey=leftPart.add(this.privateKey.toBigNumber()).umod(Point.getN()).toBuffer({size:32});if(!PrivateKey.isValid(privateKey)){return this._deriveWithNumber(index+1,null,nonCompliant);}var derived=new HDPrivateKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:index,chainCode:chainCode,privateKey:privateKey});return derived;};HDPrivateKey.prototype._deriveFromString=function(path,nonCompliant){if(!HDPrivateKey.isValidPath(path)){throw new hdErrors.InvalidPath(path);}var indexes=HDPrivateKey._getDerivationIndexes(path);var derived=indexes.reduce(function(prev,index){return prev._deriveWithNumber(index,null,nonCompliant);},this);return derived;};HDPrivateKey.isValidSerialized=function(data,network){return!HDPrivateKey.getSerializedError(data,network);};HDPrivateKey.getSerializedError=function(data,network){if(!(_.isString(data)||BufferUtil.isBuffer(data))){return new hdErrors.UnrecognizedArgument('Expected string or buffer');}if(!Base58.validCharacters(data)){return new errors.InvalidB58Char('(unknown)',data);}try{data=Base58Check.decode(data);}catch(e){return new errors.InvalidB58Checksum(data);}if(data.length!==HDPrivateKey.DataLength){return new hdErrors.InvalidLength(data);}if(!_.isUndefined(network)){var error=HDPrivateKey._validateNetwork(data,network);if(error){return error;}}return null;};HDPrivateKey._validateNetwork=function(data,networkArg){var network=Network.get(networkArg);if(!network){return new errors.InvalidNetworkArgument(networkArg);}var version=data.slice(0,4);if(BufferUtil.integerFromBuffer(version)!==network.xprivkey){return new errors.InvalidNetwork(version);}return null;};HDPrivateKey.fromString=function(arg){$.checkArgument(_.isString(arg),'No valid string was provided');return new HDPrivateKey(arg);};HDPrivateKey.fromObject=function(arg){$.checkArgument(_.isObject(arg),'No valid argument was provided');return new HDPrivateKey(arg);};HDPrivateKey.prototype._buildFromJSON=function(arg){return this._buildFromObject(JSON.parse(arg));};HDPrivateKey.prototype._buildFromObject=function(arg){var buffers={version:arg.network?BufferUtil.integerAsBuffer(Network.get(arg.network).xprivkey):arg.version,depth:_.isNumber(arg.depth)?BufferUtil.integerAsSingleByteBuffer(arg.depth):arg.depth,parentFingerPrint:_.isNumber(arg.parentFingerPrint)?BufferUtil.integerAsBuffer(arg.parentFingerPrint):arg.parentFingerPrint,childIndex:_.isNumber(arg.childIndex)?BufferUtil.integerAsBuffer(arg.childIndex):arg.childIndex,chainCode:_.isString(arg.chainCode)?Buffer.from(arg.chainCode,'hex'):arg.chainCode,privateKey:_.isString(arg.privateKey)&&JSUtil.isHexa(arg.privateKey)?Buffer.from(arg.privateKey,'hex'):arg.privateKey,checksum:arg.checksum?arg.checksum.length?arg.checksum:BufferUtil.integerAsBuffer(arg.checksum):undefined};return this._buildFromBuffers(buffers);};HDPrivateKey.prototype._buildFromSerialized=function(arg){var decoded=Base58Check.decode(arg);var buffers={version:decoded.slice(HDPrivateKey.VersionStart,HDPrivateKey.VersionEnd),depth:decoded.slice(HDPrivateKey.DepthStart,HDPrivateKey.DepthEnd),parentFingerPrint:decoded.slice(HDPrivateKey.ParentFingerPrintStart,HDPrivateKey.ParentFingerPrintEnd),childIndex:decoded.slice(HDPrivateKey.ChildIndexStart,HDPrivateKey.ChildIndexEnd),chainCode:decoded.slice(HDPrivateKey.ChainCodeStart,HDPrivateKey.ChainCodeEnd),privateKey:decoded.slice(HDPrivateKey.PrivateKeyStart,HDPrivateKey.PrivateKeyEnd),checksum:decoded.slice(HDPrivateKey.ChecksumStart,HDPrivateKey.ChecksumEnd),xprivkey:arg};return this._buildFromBuffers(buffers);};HDPrivateKey.prototype._generateRandomly=function(network){return HDPrivateKey.fromSeed(Random.getRandomBuffer(64),network);};HDPrivateKey.fromSeed=function(hexa,network){if(JSUtil.isHexaString(hexa)){hexa=Buffer.from(hexa,'hex');}if(!Buffer.isBuffer(hexa)){throw new hdErrors.InvalidEntropyArgument(hexa);}if(hexa.length<MINIMUM_ENTROPY_BITS*BITS_TO_BYTES){throw new hdErrors.InvalidEntropyArgument.NotEnoughEntropy(hexa);}if(hexa.length>MAXIMUM_ENTROPY_BITS*BITS_TO_BYTES){throw new hdErrors.InvalidEntropyArgument.TooMuchEntropy(hexa);}var hash=Hash.sha512hmac(hexa,Buffer.from('Bitcoin seed'));return new HDPrivateKey({network:Network.get(network)||Network.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:hash.slice(0,32),chainCode:hash.slice(32,64)});};HDPrivateKey.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var HDPublicKey=require('./hdpublickey');this._hdPublicKey=new HDPublicKey(this);}};HDPrivateKey.prototype._buildFromBuffers=function(arg){HDPrivateKey._validateBufferArguments(arg);JSUtil.defineImmutable(this,{_buffers:arg});var sequence=[arg.version,arg.depth,arg.parentFingerPrint,arg.childIndex,arg.chainCode,BufferUtil.emptyBuffer(1),arg.privateKey];var concat=buffer.Buffer.concat(sequence);if(!arg.checksum||!arg.checksum.length){arg.checksum=Base58Check.checksum(concat);}else{if(arg.checksum.toString()!==Base58Check.checksum(concat).toString()){throw new errors.InvalidB58Checksum(concat);}}var network=Network.get(BufferUtil.integerFromBuffer(arg.version));var xprivkey;xprivkey=Base58Check.encode(buffer.Buffer.concat(sequence));arg.xprivkey=Buffer.from(xprivkey);var privateKey=new PrivateKey(BN.fromBuffer(arg.privateKey),network);var publicKey=privateKey.toPublicKey();var size=HDPrivateKey.ParentFingerPrintSize;var fingerPrint=Hash.sha256ripemd160(publicKey.toBuffer()).slice(0,size);JSUtil.defineImmutable(this,{xprivkey:xprivkey,network:network,depth:BufferUtil.integerFromSingleByteBuffer(arg.depth),privateKey:privateKey,publicKey:publicKey,fingerPrint:fingerPrint});this._hdPublicKey=null;Object.defineProperty(this,'hdPublicKey',{configurable:false,enumerable:true,get:function get(){this._calcHDPublicKey();return this._hdPublicKey;}});Object.defineProperty(this,'xpubkey',{configurable:false,enumerable:true,get:function get(){this._calcHDPublicKey();return this._hdPublicKey.xpubkey;}});return this;};HDPrivateKey._validateBufferArguments=function(arg){var checkBuffer=function checkBuffer(name,size){var buff=arg[name];assert(BufferUtil.isBuffer(buff),name+' argument is not a buffer');assert(buff.length===size,name+' has not the expected size: found '+buff.length+', expected '+size);};checkBuffer('version',HDPrivateKey.VersionSize);checkBuffer('depth',HDPrivateKey.DepthSize);checkBuffer('parentFingerPrint',HDPrivateKey.ParentFingerPrintSize);checkBuffer('childIndex',HDPrivateKey.ChildIndexSize);checkBuffer('chainCode',HDPrivateKey.ChainCodeSize);checkBuffer('privateKey',HDPrivateKey.PrivateKeySize);if(arg.checksum&&arg.checksum.length){checkBuffer('checksum',HDPrivateKey.CheckSumSize);}};HDPrivateKey.prototype.toString=function(){return this.xprivkey;};HDPrivateKey.prototype.inspect=function(){return'<HDPrivateKey: '+this.xprivkey+'>';};HDPrivateKey.prototype.toObject=HDPrivateKey.prototype.toJSON=function toObject(){return{network:Network.get(BufferUtil.integerFromBuffer(this._buffers.version),'xprivkey').name,depth:BufferUtil.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:BufferUtil.integerFromBuffer(this.fingerPrint),parentFingerPrint:BufferUtil.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:BufferUtil.integerFromBuffer(this._buffers.childIndex),chainCode:BufferUtil.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString('hex'),checksum:BufferUtil.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey};};HDPrivateKey.fromBuffer=function(arg){return new HDPrivateKey(arg.toString());};HDPrivateKey.prototype.toBuffer=function(){return BufferUtil.copy(this._buffers.xprivkey);};HDPrivateKey.DefaultDepth=0;HDPrivateKey.DefaultFingerprint=0;HDPrivateKey.DefaultChildIndex=0;HDPrivateKey.Hardened=0x80000000;HDPrivateKey.MaxIndex=2*HDPrivateKey.Hardened;HDPrivateKey.RootElementAlias=['m','M','m\'','M\''];HDPrivateKey.VersionSize=4;HDPrivateKey.DepthSize=1;HDPrivateKey.ParentFingerPrintSize=4;HDPrivateKey.ChildIndexSize=4;HDPrivateKey.ChainCodeSize=32;HDPrivateKey.PrivateKeySize=32;HDPrivateKey.CheckSumSize=4;HDPrivateKey.DataLength=78;HDPrivateKey.SerializedByteSize=82;HDPrivateKey.VersionStart=0;HDPrivateKey.VersionEnd=HDPrivateKey.VersionStart+HDPrivateKey.VersionSize;HDPrivateKey.DepthStart=HDPrivateKey.VersionEnd;HDPrivateKey.DepthEnd=HDPrivateKey.DepthStart+HDPrivateKey.DepthSize;HDPrivateKey.ParentFingerPrintStart=HDPrivateKey.DepthEnd;HDPrivateKey.ParentFingerPrintEnd=HDPrivateKey.ParentFingerPrintStart+HDPrivateKey.ParentFingerPrintSize;HDPrivateKey.ChildIndexStart=HDPrivateKey.ParentFingerPrintEnd;HDPrivateKey.ChildIndexEnd=HDPrivateKey.ChildIndexStart+HDPrivateKey.ChildIndexSize;HDPrivateKey.ChainCodeStart=HDPrivateKey.ChildIndexEnd;HDPrivateKey.ChainCodeEnd=HDPrivateKey.ChainCodeStart+HDPrivateKey.ChainCodeSize;HDPrivateKey.PrivateKeyStart=HDPrivateKey.ChainCodeEnd+1;HDPrivateKey.PrivateKeyEnd=HDPrivateKey.PrivateKeyStart+HDPrivateKey.PrivateKeySize;HDPrivateKey.ChecksumStart=HDPrivateKey.PrivateKeyEnd;HDPrivateKey.ChecksumEnd=HDPrivateKey.ChecksumStart+HDPrivateKey.CheckSumSize;assert(HDPrivateKey.ChecksumEnd===HDPrivateKey.SerializedByteSize);module.exports=HDPrivateKey;

}).call(this,require("buffer").Buffer)

},{"./crypto/bn":75,"./crypto/hash":77,"./crypto/point":78,"./crypto/random":79,"./encoding/base58":81,"./encoding/base58check":82,"./errors":86,"./hdpublickey":89,"./networks":90,"./privatekey":92,"./util/buffer":111,"./util/js":112,"./util/preconditions":113,"assert":1100,"buffer":1133,"lodash":471}],77:[function(require,module,exports){
(function (Buffer){
'use strict';var crypto=require('crypto');var BufferUtil=require('../util/buffer');var $=require('../util/preconditions');var Hash=module.exports;Hash.sha1=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('sha1').update(buf).digest();};Hash.sha1.blocksize=512;Hash.sha256=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('sha256').update(buf).digest();};Hash.sha256.blocksize=512;Hash.sha256sha256=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return Hash.sha256(Hash.sha256(buf));};Hash.ripemd160=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('ripemd160').update(buf).digest();};Hash.sha256ripemd160=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return Hash.ripemd160(Hash.sha256(buf));};Hash.sha512=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('sha512').update(buf).digest();};Hash.sha512.blocksize=1024;Hash.hmac=function(hashf,data,key){$.checkArgument(BufferUtil.isBuffer(data));$.checkArgument(BufferUtil.isBuffer(key));$.checkArgument(hashf.blocksize);var blocksize=hashf.blocksize/8;if(key.length>blocksize){key=hashf(key);}else if(key<blocksize){var fill=Buffer.alloc(blocksize);fill.fill(0);key.copy(fill);key=fill;}var o_key=Buffer.alloc(blocksize);o_key.fill(0x5c);var i_key=Buffer.alloc(blocksize);i_key.fill(0x36);var o_key_pad=Buffer.alloc(blocksize);var i_key_pad=Buffer.alloc(blocksize);for(var i=0;i<blocksize;i++){o_key_pad[i]=o_key[i]^key[i];i_key_pad[i]=i_key[i]^key[i];}return hashf(Buffer.concat([o_key_pad,hashf(Buffer.concat([i_key_pad,data]))]));};Hash.sha256hmac=function(data,key){return Hash.hmac(Hash.sha256,data,key);};Hash.sha512hmac=function(data,key){return Hash.hmac(Hash.sha512,data,key);};

}).call(this,require("buffer").Buffer)

},{"../util/buffer":111,"../util/preconditions":113,"buffer":1133,"crypto":1142}],79:[function(require,module,exports){
(function (process,Buffer){
'use strict';function Random(){}Random.getRandomBuffer=function(size){if(process.browser)return Random.getRandomBufferBrowser(size);else return Random.getRandomBufferNode(size);};Random.getRandomBufferNode=function(size){var crypto=require('crypto');return crypto.randomBytes(size);};Random.getRandomBufferBrowser=function(size){if(!window.crypto&&!window.msCrypto)throw new Error('window.crypto not available');if(window.crypto&&window.crypto.getRandomValues)var crypto=window.crypto;else if(window.msCrypto&&window.msCrypto.getRandomValues)var crypto=window.msCrypto;else throw new Error('window.crypto.getRandomValues not available');var bbuf=new Uint8Array(size);crypto.getRandomValues(bbuf);var buf=Buffer.from(bbuf);return buf;};Random.getPseudoRandomBuffer=function(size){var b32=0x100000000;var b=Buffer.alloc(size);var r;for(var i=0;i<=size;i++){var j=Math.floor(i/4);var k=i-j*4;if(k===0){r=Math.random()*b32;b[i]=r&0xff;}else{b[i]=(r=r>>>8)&0xff;}}return b;};module.exports=Random;

}).call(this,require('_process'),require("buffer").Buffer)

},{"_process":1221,"buffer":1133,"crypto":1142}],75:[function(require,module,exports){
(function (Buffer){
'use strict';var BN=require('bn.js');var $=require('../util/preconditions');var _=require('lodash');var reversebuf=function reversebuf(buf){var buf2=Buffer.alloc(buf.length);for(var i=0;i<buf.length;i++){buf2[i]=buf[buf.length-1-i];}return buf2;};BN.Zero=new BN(0);BN.One=new BN(1);BN.Minus1=new BN(-1);BN.fromNumber=function(n){$.checkArgument(_.isNumber(n));return new BN(n);};BN.fromString=function(str,base){$.checkArgument(_.isString(str));return new BN(str,base);};BN.fromBuffer=function(buf,opts){if(typeof opts!=='undefined'&&opts.endian==='little'){buf=reversebuf(buf);}var hex=buf.toString('hex');var bn=new BN(hex,16);return bn;};BN.fromSM=function(buf,opts){var ret;if(buf.length===0){return BN.fromBuffer(Buffer.from([0]));}var endian='big';if(opts){endian=opts.endian;}if(endian==='little'){buf=reversebuf(buf);}if(buf[0]&0x80){buf[0]=buf[0]&0x7f;ret=BN.fromBuffer(buf);ret.neg().copy(ret);}else{ret=BN.fromBuffer(buf);}return ret;};BN.prototype.toNumber=function(){return parseInt(this.toString(10),10);};BN.prototype.toBuffer=function(opts){var buf,hex;if(opts&&opts.size){hex=this.toString(16,2);var natlen=hex.length/2;buf=Buffer.from(hex,'hex');if(natlen===opts.size){buf=buf;}else if(natlen>opts.size){buf=BN.trim(buf,natlen);}else if(natlen<opts.size){buf=BN.pad(buf,natlen,opts.size);}}else{hex=this.toString(16,2);buf=Buffer.from(hex,'hex');}if(typeof opts!=='undefined'&&opts.endian==='little'){buf=reversebuf(buf);}return buf;};BN.prototype.toSMBigEndian=function(){var buf;if(this.cmp(BN.Zero)===-1){buf=this.neg().toBuffer();if(buf[0]&0x80){buf=Buffer.concat([Buffer.from([0x80]),buf]);}else{buf[0]=buf[0]|0x80;}}else{buf=this.toBuffer();if(buf[0]&0x80){buf=Buffer.concat([Buffer.from([0x00]),buf]);}}if(buf.length===1&buf[0]===0){buf=Buffer.from([]);}return buf;};BN.prototype.toSM=function(opts){var endian=opts?opts.endian:'big';var buf=this.toSMBigEndian();if(endian==='little'){buf=reversebuf(buf);}return buf;};BN.fromScriptNumBuffer=function(buf,fRequireMinimal,size){var nMaxNumSize=size||4;$.checkArgument(buf.length<=nMaxNumSize,new Error('script number overflow'));if(fRequireMinimal&&buf.length>0){if((buf[buf.length-1]&0x7f)===0){if(buf.length<=1||(buf[buf.length-2]&0x80)===0){throw new Error('non-minimally encoded script number');}}}return BN.fromSM(buf,{endian:'little'});};BN.prototype.toScriptNumBuffer=function(){return this.toSM({endian:'little'});};BN.trim=function(buf,natlen){return buf.slice(natlen-buf.length,buf.length);};BN.pad=function(buf,natlen,size){var rbuf=Buffer.alloc(size);for(var i=0;i<buf.length;i++){rbuf[rbuf.length-1-i]=buf[buf.length-1-i];}for(i=0;i<size-natlen;i++){rbuf[i]=0;}return rbuf;};module.exports=BN;

}).call(this,require("buffer").Buffer)

},{"../util/preconditions":113,"bn.js":132,"buffer":1133,"lodash":471}],661:[function(require,module,exports){
(function(nacl){'use strict';var gf=function gf(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++){r[i]=init[i];}return r;};var randombytes=function randombytes(){throw new Error('no PRNG');};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([0xdb41,1]),D=gf([0x78a3,0x1359,0x4dca,0x75eb,0xd8ab,0x4141,0x0a4d,0x0070,0xe898,0x7779,0x4079,0x8cc7,0xfe73,0x2b6f,0x6cee,0x5203]),D2=gf([0xf159,0x26b2,0x9b94,0xebd6,0xb156,0x8283,0x149a,0x00e0,0xd130,0xeef3,0x80f2,0x198e,0xfce7,0x56df,0xd9dc,0x2406]),X=gf([0xd51a,0x8f25,0x2d60,0xc956,0xa7b2,0x9525,0xc760,0x692c,0xdc5c,0xfdd6,0xe231,0xc0a4,0x53fe,0xcd6e,0x36d3,0x2169]),Y=gf([0x6658,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666]),I=gf([0xa0b0,0x4a0e,0x1b27,0xc4ee,0xe478,0xad2f,0x1806,0x2f43,0xd7a7,0x3dfb,0x0099,0x2b4d,0xdf0b,0x4fc1,0x2480,0x2b83]);function ts64(x,i,h,l){x[i]=h>>24&0xff;x[i+1]=h>>16&0xff;x[i+2]=h>>8&0xff;x[i+3]=h&0xff;x[i+4]=l>>24&0xff;x[i+5]=l>>16&0xff;x[i+6]=l>>8&0xff;x[i+7]=l&0xff;}function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++){d|=x[xi+i]^y[yi+i];}return(1&d-1>>>8)-1;}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16);}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32);}function core_salsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18;}x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x1>>>0&0xff;o[5]=x1>>>8&0xff;o[6]=x1>>>16&0xff;o[7]=x1>>>24&0xff;o[8]=x2>>>0&0xff;o[9]=x2>>>8&0xff;o[10]=x2>>>16&0xff;o[11]=x2>>>24&0xff;o[12]=x3>>>0&0xff;o[13]=x3>>>8&0xff;o[14]=x3>>>16&0xff;o[15]=x3>>>24&0xff;o[16]=x4>>>0&0xff;o[17]=x4>>>8&0xff;o[18]=x4>>>16&0xff;o[19]=x4>>>24&0xff;o[20]=x5>>>0&0xff;o[21]=x5>>>8&0xff;o[22]=x5>>>16&0xff;o[23]=x5>>>24&0xff;o[24]=x6>>>0&0xff;o[25]=x6>>>8&0xff;o[26]=x6>>>16&0xff;o[27]=x6>>>24&0xff;o[28]=x7>>>0&0xff;o[29]=x7>>>8&0xff;o[30]=x7>>>16&0xff;o[31]=x7>>>24&0xff;o[32]=x8>>>0&0xff;o[33]=x8>>>8&0xff;o[34]=x8>>>16&0xff;o[35]=x8>>>24&0xff;o[36]=x9>>>0&0xff;o[37]=x9>>>8&0xff;o[38]=x9>>>16&0xff;o[39]=x9>>>24&0xff;o[40]=x10>>>0&0xff;o[41]=x10>>>8&0xff;o[42]=x10>>>16&0xff;o[43]=x10>>>24&0xff;o[44]=x11>>>0&0xff;o[45]=x11>>>8&0xff;o[46]=x11>>>16&0xff;o[47]=x11>>>24&0xff;o[48]=x12>>>0&0xff;o[49]=x12>>>8&0xff;o[50]=x12>>>16&0xff;o[51]=x12>>>24&0xff;o[52]=x13>>>0&0xff;o[53]=x13>>>8&0xff;o[54]=x13>>>16&0xff;o[55]=x13>>>24&0xff;o[56]=x14>>>0&0xff;o[57]=x14>>>8&0xff;o[58]=x14>>>16&0xff;o[59]=x14>>>24&0xff;o[60]=x15>>>0&0xff;o[61]=x15>>>8&0xff;o[62]=x15>>>16&0xff;o[63]=x15>>>24&0xff;}function core_hsalsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18;}o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x5>>>0&0xff;o[5]=x5>>>8&0xff;o[6]=x5>>>16&0xff;o[7]=x5>>>24&0xff;o[8]=x10>>>0&0xff;o[9]=x10>>>8&0xff;o[10]=x10>>>16&0xff;o[11]=x10>>>24&0xff;o[12]=x15>>>0&0xff;o[13]=x15>>>8&0xff;o[14]=x15>>>16&0xff;o[15]=x15>>>24&0xff;o[16]=x6>>>0&0xff;o[17]=x6>>>8&0xff;o[18]=x6>>>16&0xff;o[19]=x6>>>24&0xff;o[20]=x7>>>0&0xff;o[21]=x7>>>8&0xff;o[22]=x7>>>16&0xff;o[23]=x7>>>24&0xff;o[24]=x8>>>0&0xff;o[25]=x8>>>8&0xff;o[26]=x8>>>16&0xff;o[27]=x8>>>24&0xff;o[28]=x9>>>0&0xff;o[29]=x9>>>8&0xff;o[30]=x9>>>16&0xff;o[31]=x9>>>24&0xff;}function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c);}function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c);}var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++){z[i]=0;}for(i=0;i<8;i++){z[i]=n[i];}while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++){c[cpos+i]=m[mpos+i]^x[i];}u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}b-=64;cpos+=64;mpos+=64;}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++){c[cpos+i]=m[mpos+i]^x[i];}}return 0;}function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++){z[i]=0;}for(i=0;i<8;i++){z[i]=n[i];}while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++){c[cpos+i]=x[i];}u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}b-=64;cpos+=64;}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++){c[cpos+i]=x[i];}}return 0;}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++){sn[i]=n[i+16];}return crypto_stream_salsa20(c,cpos,d,sn,s);}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++){sn[i]=n[i+16];}return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);}var poly1305=function poly1305(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&0xff|(key[1]&0xff)<<8;this.r[0]=t0&0x1fff;t1=key[2]&0xff|(key[3]&0xff)<<8;this.r[1]=(t0>>>13|t1<<3)&0x1fff;t2=key[4]&0xff|(key[5]&0xff)<<8;this.r[2]=(t1>>>10|t2<<6)&0x1f03;t3=key[6]&0xff|(key[7]&0xff)<<8;this.r[3]=(t2>>>7|t3<<9)&0x1fff;t4=key[8]&0xff|(key[9]&0xff)<<8;this.r[4]=(t3>>>4|t4<<12)&0x00ff;this.r[5]=t4>>>1&0x1ffe;t5=key[10]&0xff|(key[11]&0xff)<<8;this.r[6]=(t4>>>14|t5<<2)&0x1fff;t6=key[12]&0xff|(key[13]&0xff)<<8;this.r[7]=(t5>>>11|t6<<5)&0x1f81;t7=key[14]&0xff|(key[15]&0xff)<<8;this.r[8]=(t6>>>8|t7<<8)&0x1fff;this.r[9]=t7>>>5&0x007f;this.pad[0]=key[16]&0xff|(key[17]&0xff)<<8;this.pad[1]=key[18]&0xff|(key[19]&0xff)<<8;this.pad[2]=key[20]&0xff|(key[21]&0xff)<<8;this.pad[3]=key[22]&0xff|(key[23]&0xff)<<8;this.pad[4]=key[24]&0xff|(key[25]&0xff)<<8;this.pad[5]=key[26]&0xff|(key[27]&0xff)<<8;this.pad[6]=key[28]&0xff|(key[29]&0xff)<<8;this.pad[7]=key[30]&0xff|(key[31]&0xff)<<8;};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:1<<11;var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&0xff|(m[mpos+1]&0xff)<<8;h0+=t0&0x1fff;t1=m[mpos+2]&0xff|(m[mpos+3]&0xff)<<8;h1+=(t0>>>13|t1<<3)&0x1fff;t2=m[mpos+4]&0xff|(m[mpos+5]&0xff)<<8;h2+=(t1>>>10|t2<<6)&0x1fff;t3=m[mpos+6]&0xff|(m[mpos+7]&0xff)<<8;h3+=(t2>>>7|t3<<9)&0x1fff;t4=m[mpos+8]&0xff|(m[mpos+9]&0xff)<<8;h4+=(t3>>>4|t4<<12)&0x1fff;h5+=t4>>>1&0x1fff;t5=m[mpos+10]&0xff|(m[mpos+11]&0xff)<<8;h6+=(t4>>>14|t5<<2)&0x1fff;t6=m[mpos+12]&0xff|(m[mpos+13]&0xff)<<8;h7+=(t5>>>11|t6<<5)&0x1fff;t7=m[mpos+14]&0xff|(m[mpos+15]&0xff)<<8;h8+=(t6>>>8|t7<<8)&0x1fff;h9+=t7>>>5|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=d0>>>13;d0&=0x1fff;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=d0>>>13;d0&=0x1fff;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=d1>>>13;d1&=0x1fff;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=d1>>>13;d1&=0x1fff;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=d2>>>13;d2&=0x1fff;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=d2>>>13;d2&=0x1fff;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=d3>>>13;d3&=0x1fff;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=d3>>>13;d3&=0x1fff;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=d4>>>13;d4&=0x1fff;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=d4>>>13;d4&=0x1fff;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=d5>>>13;d5&=0x1fff;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=d5>>>13;d5&=0x1fff;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=d6>>>13;d6&=0x1fff;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=d6>>>13;d6&=0x1fff;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=d7>>>13;d7&=0x1fff;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=d7>>>13;d7&=0x1fff;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=d8>>>13;d8&=0x1fff;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=d8>>>13;d8&=0x1fff;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=d9>>>13;d9&=0x1fff;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=d9>>>13;d9&=0x1fff;c=(c<<2)+c|0;c=c+d0|0;d0=c&0x1fff;c=c>>>13;d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16;}this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9;};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++){this.buffer[i]=0;}this.fin=1;this.blocks(this.buffer,0,16);}c=this.h[1]>>>13;this.h[1]&=0x1fff;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=0x1fff;}this.h[0]+=c*5;c=this.h[0]>>>13;this.h[0]&=0x1fff;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=0x1fff;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=0x1fff;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=0x1fff;}g[9]-=1<<13;mask=(c^1)-1;for(i=0;i<10;i++){g[i]&=mask;}mask=~mask;for(i=0;i<10;i++){this.h[i]=this.h[i]&mask|g[i];}this.h[0]=(this.h[0]|this.h[1]<<13)&0xffff;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&0xffff;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&0xffff;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&0xffff;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&0xffff;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&0xffff;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&0xffff;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&0xffff;f=this.h[0]+this.pad[0];this.h[0]=f&0xffff;for(i=1;i<8;i++){f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0;this.h[i]=f&0xffff;}mac[macpos+0]=this.h[0]>>>0&0xff;mac[macpos+1]=this.h[0]>>>8&0xff;mac[macpos+2]=this.h[1]>>>0&0xff;mac[macpos+3]=this.h[1]>>>8&0xff;mac[macpos+4]=this.h[2]>>>0&0xff;mac[macpos+5]=this.h[2]>>>8&0xff;mac[macpos+6]=this.h[3]>>>0&0xff;mac[macpos+7]=this.h[3]>>>8&0xff;mac[macpos+8]=this.h[4]>>>0&0xff;mac[macpos+9]=this.h[4]>>>8&0xff;mac[macpos+10]=this.h[5]>>>0&0xff;mac[macpos+11]=this.h[5]>>>8&0xff;mac[macpos+12]=this.h[6]>>>0&0xff;mac[macpos+13]=this.h[6]>>>8&0xff;mac[macpos+14]=this.h[7]>>>0&0xff;mac[macpos+15]=this.h[7]>>>8&0xff;};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=16-this.leftover;if(want>bytes)want=bytes;for(i=0;i<want;i++){this.buffer[this.leftover+i]=m[mpos+i];}bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0;}if(bytes>=16){want=bytes-bytes%16;this.blocks(m,mpos,want);mpos+=want;bytes-=want;}if(bytes){for(i=0;i<bytes;i++){this.buffer[this.leftover+i]=m[mpos+i];}this.leftover+=bytes;}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0;}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0);}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++){c[i]=0;}return 0;}function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++){m[i]=0;}return 0;}function set25519(r,a){var i;for(i=0;i<16;i++){r[i]=a[i]|0;}}function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536;}o[0]+=c-1+37*(c-1);}function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t;}}function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++){t[i]=n[i];}car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-0xffed;for(i=1;i<15;i++){m[i]=t[i]-0xffff-(m[i-1]>>16&1);m[i-1]&=0xffff;}m[15]=t[15]-0x7fff-(m[14]>>16&1);b=m[15]>>16&1;m[14]&=0xffff;sel25519(t,m,1-b);}for(i=0;i<16;i++){o[2*i]=t[i]&0xff;o[2*i+1]=t[i]>>8;}}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0);}function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1;}function unpack25519(o,n){var i;for(i=0;i<16;i++){o[i]=n[2*i]+(n[2*i+1]<<8);}o[15]&=0x7fff;}function A(o,a,b){for(var i=0;i<16;i++){o[i]=a[i]+b[i];}}function Z(o,a,b){for(var i=0;i<16;i++){o[i]=a[i]-b[i];}}function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15;}function S(o,a){M(o,a,a);}function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++){c[a]=i[a];}for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i);}for(a=0;a<16;a++){o[a]=c[a];}}function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++){c[a]=i[a];}for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i);}for(a=0;a<16;a++){o[a]=c[a];}}function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++){z[i]=n[i];}z[31]=n[31]&127|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0;}a[0]=d[0]=1;for(i=254;i>=0;--i){r=z[i>>>3]>>>(i&7)&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r);}for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i];}var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0;}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9);}function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x);}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma);}var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k);}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k);}var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3];wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7];}for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=(ah4>>>14|al4<<32-14)^(ah4>>>18|al4<<32-18)^(al4>>>41-32|ah4<<32-(41-32));l=(al4>>>14|ah4<<32-14)^(al4>>>18|ah4<<32-18)^(ah4>>>41-32|al4<<32-(41-32));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=ah4&ah5^~ah4&ah6;l=al4&al5^~al4&al6;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&0xffff|d<<16;tl=a&0xffff|b<<16;h=th;l=tl;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=(ah0>>>28|al0<<32-28)^(al0>>>34-32|ah0<<32-(34-32))^(al0>>>39-32|ah0<<32-(39-32));l=(al0>>>28|ah0<<32-28)^(ah0>>>34-32|al0<<32-(34-32))^(ah0>>>39-32|al0<<32-(39-32));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=ah0&ah1^ah0&ah2^ah1&ah2;l=al0&al1^al0&al2^al1&al2;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=c&0xffff|d<<16;bl7=a&0xffff|b<<16;h=bh3;l=bl3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=th;l=tl;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=c&0xffff|d<<16;bl3=a&0xffff|b<<16;ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=(th>>>1|tl<<32-1)^(th>>>8|tl<<32-8)^th>>>7;l=(tl>>>1|th<<32-1)^(tl>>>8|th<<32-8)^(tl>>>7|th<<32-7);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=(th>>>19|tl<<32-19)^(tl>>>61-32|th<<32-(61-32))^th>>>6;l=(tl>>>19|th<<32-19)^(th>>>61-32|tl<<32-(61-32))^(tl>>>6|th<<32-6);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=c&0xffff|d<<16;wl[j]=a&0xffff|b<<16;}}}h=ah0;l=al0;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[0];l=hl[0];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=c&0xffff|d<<16;hl[0]=al0=a&0xffff|b<<16;h=ah1;l=al1;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[1];l=hl[1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=c&0xffff|d<<16;hl[1]=al1=a&0xffff|b<<16;h=ah2;l=al2;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[2];l=hl[2];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=c&0xffff|d<<16;hl[2]=al2=a&0xffff|b<<16;h=ah3;l=al3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[3];l=hl[3];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=c&0xffff|d<<16;hl[3]=al3=a&0xffff|b<<16;h=ah4;l=al4;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[4];l=hl[4];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=c&0xffff|d<<16;hl[4]=al4=a&0xffff|b<<16;h=ah5;l=al5;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[5];l=hl[5];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=c&0xffff|d<<16;hl[5]=al5=a&0xffff|b<<16;h=ah6;l=al6;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[6];l=hl[6];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=c&0xffff|d<<16;hl[6]=al6=a&0xffff|b<<16;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[7];l=hl[7];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=c&0xffff|d<<16;hl[7]=al7=a&0xffff|b<<16;pos+=128;n-=128;}return n;}function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=0x6a09e667;hh[1]=0xbb67ae85;hh[2]=0x3c6ef372;hh[3]=0xa54ff53a;hh[4]=0x510e527f;hh[5]=0x9b05688c;hh[6]=0x1f83d9ab;hh[7]=0x5be0cd19;hl[0]=0xf3bcc908;hl[1]=0x84caa73b;hl[2]=0xfe94f82b;hl[3]=0x5f1d36f1;hl[4]=0xade682d1;hl[5]=0x2b3e6c1f;hl[6]=0xfb41bd6b;hl[7]=0x137e2179;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++){x[i]=m[b-n+i];}x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,b/0x20000000|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++){ts64(out,8*i,hh[i],hl[i]);}return 0;}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h);}function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b);}}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7;}function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=s[i/8|0]>>(i&7)&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b);}}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s);}function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++){sk[i+32]=pk[i];}return 0;}var L=new Float64Array([0xed,0xd3,0xf5,0x5c,0x1a,0x63,0x12,0x58,0xd6,0x9c,0xf7,0xa2,0xde,0xf9,0xde,0x14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x10]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=x[j]+128>>8;x[j]-=carry*256;}x[j]+=carry;x[i]=0;}carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255;}for(j=0;j<32;j++){x[j]-=carry*L[j];}for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255;}}function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++){x[i]=r[i];}for(i=0;i<64;i++){r[i]=0;}modL(r,x);}function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++){sm[64+i]=m[i];}for(i=0;i<32;i++){sm[32+i]=d[32+i];}crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++){sm[i]=sk[i];}crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++){x[i]=0;}for(i=0;i<32;i++){x[i]=r[i];}for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j];}}modL(sm.subarray(32),x);return smlen;}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===p[31]>>7)Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0;}function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];mlen=-1;if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++){m[i]=sm[i];}for(i=0;i<32;i++){m[i+32]=pk[i];}crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++){m[i]=0;}return-1;}for(i=0;i<n;i++){m[i]=sm[i+64];}mlen=n;return mlen;}var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size');}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');}function checkArrayTypes(){for(var i=0;i<arguments.length;i++){if(!(arguments[i]instanceof Uint8Array))throw new TypeError('unexpected type, use Uint8Array');}}function cleanup(arr){for(var i=0;i<arr.length;i++){arr[i]=0;}}nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b;};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++){m[i+crypto_secretbox_ZEROBYTES]=msg[i];}crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES);};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++){c[i+crypto_secretbox_BOXZEROBYTES]=box[i];}if(c.length<32)return null;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return null;return m.subarray(crypto_secretbox_ZEROBYTES);};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q;};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q;};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k);};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k;};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k);};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg;};nacl.sign.open=function(signedMsg,publicKey){checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++){m[i]=tmp[i];}return m;};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++){sig[i]=signedMsg[i];}return sig;};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++){sm[i]=sig[i];}for(i=0;i<msg.length;i++){sm[i+crypto_sign_BYTES]=msg[i];}return crypto_sign_open(m,sm,sm.length,publicKey)>=0;};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++){pk[i]=secretKey[32+i];}return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++){sk[i]=seed[i];}crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk};};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h;};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return vn(x,0,y,0,x.length)===0?true:false;};nacl.setPRNG=function(fn){randombytes=fn;};(function(){var crypto=typeof self!=='undefined'?self.crypto||self.msCrypto:null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)));}for(i=0;i<n;i++){x[i]=v[i];}cleanup(v);});}else if(typeof require!=='undefined'){crypto=require('crypto');if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++){x[i]=v[i];}cleanup(v);});}}})();})(typeof module!=='undefined'&&module.exports?module.exports:self.nacl=self.nacl||{});

},{"crypto":1104}],640:[function(require,module,exports){
(function (setImmediate){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function scrypt(password,salt,logN,r,dkLen,interruptStep,callback,encoding){'use strict';function SHA256(m){var K=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];var h0=0x6a09e667,h1=0xbb67ae85,h2=0x3c6ef372,h3=0xa54ff53a,h4=0x510e527f,h5=0x9b05688c,h6=0x1f83d9ab,h7=0x5be0cd19,w=new Array(64);function blocks(p){var off=0,len=p.length;while(len>=64){var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7,u,i,j,t1,t2;for(i=0;i<16;i++){j=off+i*4;w[i]=(p[j]&0xff)<<24|(p[j+1]&0xff)<<16|(p[j+2]&0xff)<<8|p[j+3]&0xff;}for(i=16;i<64;i++){u=w[i-2];t1=(u>>>17|u<<32-17)^(u>>>19|u<<32-19)^u>>>10;u=w[i-15];t2=(u>>>7|u<<32-7)^(u>>>18|u<<32-18)^u>>>3;w[i]=(t1+w[i-7]|0)+(t2+w[i-16]|0)|0;}for(i=0;i<64;i++){t1=(((e>>>6|e<<32-6)^(e>>>11|e<<32-11)^(e>>>25|e<<32-25))+(e&f^~e&g)|0)+(h+(K[i]+w[i]|0)|0)|0;t2=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&b^a&c^b&c)|0;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0;}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;h4=h4+e|0;h5=h5+f|0;h6=h6+g|0;h7=h7+h|0;off+=64;len-=64;}}blocks(m);var i,bytesLeft=m.length%64,bitLenHi=m.length/0x20000000|0,bitLenLo=m.length<<3,numZeros=bytesLeft<56?56:120,p=m.slice(m.length-bytesLeft,m.length);p.push(0x80);for(i=bytesLeft+1;i<numZeros;i++){p.push(0);}p.push(bitLenHi>>>24&0xff);p.push(bitLenHi>>>16&0xff);p.push(bitLenHi>>>8&0xff);p.push(bitLenHi>>>0&0xff);p.push(bitLenLo>>>24&0xff);p.push(bitLenLo>>>16&0xff);p.push(bitLenLo>>>8&0xff);p.push(bitLenLo>>>0&0xff);blocks(p);return[h0>>>24&0xff,h0>>>16&0xff,h0>>>8&0xff,h0>>>0&0xff,h1>>>24&0xff,h1>>>16&0xff,h1>>>8&0xff,h1>>>0&0xff,h2>>>24&0xff,h2>>>16&0xff,h2>>>8&0xff,h2>>>0&0xff,h3>>>24&0xff,h3>>>16&0xff,h3>>>8&0xff,h3>>>0&0xff,h4>>>24&0xff,h4>>>16&0xff,h4>>>8&0xff,h4>>>0&0xff,h5>>>24&0xff,h5>>>16&0xff,h5>>>8&0xff,h5>>>0&0xff,h6>>>24&0xff,h6>>>16&0xff,h6>>>8&0xff,h6>>>0&0xff,h7>>>24&0xff,h7>>>16&0xff,h7>>>8&0xff,h7>>>0&0xff];}function PBKDF2_HMAC_SHA256_OneIter(password,salt,dkLen){if(password.length>64){password=SHA256(password.push?password:Array.prototype.slice.call(password,0));}var i,innerLen=64+salt.length+4,inner=new Array(innerLen),outerKey=new Array(64),dk=[];for(i=0;i<64;i++){inner[i]=0x36;}for(i=0;i<password.length;i++){inner[i]^=password[i];}for(i=0;i<salt.length;i++){inner[64+i]=salt[i];}for(i=innerLen-4;i<innerLen;i++){inner[i]=0;}for(i=0;i<64;i++){outerKey[i]=0x5c;}for(i=0;i<password.length;i++){outerKey[i]^=password[i];}function incrementCounter(){for(var i=innerLen-1;i>=innerLen-4;i--){inner[i]++;if(inner[i]<=0xff)return;inner[i]=0;}}while(dkLen>=32){incrementCounter();dk=dk.concat(SHA256(outerKey.concat(SHA256(inner))));dkLen-=32;}if(dkLen>0){incrementCounter();dk=dk.concat(SHA256(outerKey.concat(SHA256(inner))).slice(0,dkLen));}return dk;}function salsaXOR(tmp,B,bin,bout){var j0=tmp[0]^B[bin++],j1=tmp[1]^B[bin++],j2=tmp[2]^B[bin++],j3=tmp[3]^B[bin++],j4=tmp[4]^B[bin++],j5=tmp[5]^B[bin++],j6=tmp[6]^B[bin++],j7=tmp[7]^B[bin++],j8=tmp[8]^B[bin++],j9=tmp[9]^B[bin++],j10=tmp[10]^B[bin++],j11=tmp[11]^B[bin++],j12=tmp[12]^B[bin++],j13=tmp[13]^B[bin++],j14=tmp[14]^B[bin++],j15=tmp[15]^B[bin++],u,i;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15;for(i=0;i<8;i+=2){u=x0+x12;x4^=u<<7|u>>>32-7;u=x4+x0;x8^=u<<9|u>>>32-9;u=x8+x4;x12^=u<<13|u>>>32-13;u=x12+x8;x0^=u<<18|u>>>32-18;u=x5+x1;x9^=u<<7|u>>>32-7;u=x9+x5;x13^=u<<9|u>>>32-9;u=x13+x9;x1^=u<<13|u>>>32-13;u=x1+x13;x5^=u<<18|u>>>32-18;u=x10+x6;x14^=u<<7|u>>>32-7;u=x14+x10;x2^=u<<9|u>>>32-9;u=x2+x14;x6^=u<<13|u>>>32-13;u=x6+x2;x10^=u<<18|u>>>32-18;u=x15+x11;x3^=u<<7|u>>>32-7;u=x3+x15;x7^=u<<9|u>>>32-9;u=x7+x3;x11^=u<<13|u>>>32-13;u=x11+x7;x15^=u<<18|u>>>32-18;u=x0+x3;x1^=u<<7|u>>>32-7;u=x1+x0;x2^=u<<9|u>>>32-9;u=x2+x1;x3^=u<<13|u>>>32-13;u=x3+x2;x0^=u<<18|u>>>32-18;u=x5+x4;x6^=u<<7|u>>>32-7;u=x6+x5;x7^=u<<9|u>>>32-9;u=x7+x6;x4^=u<<13|u>>>32-13;u=x4+x7;x5^=u<<18|u>>>32-18;u=x10+x9;x11^=u<<7|u>>>32-7;u=x11+x10;x8^=u<<9|u>>>32-9;u=x8+x11;x9^=u<<13|u>>>32-13;u=x9+x8;x10^=u<<18|u>>>32-18;u=x15+x14;x12^=u<<7|u>>>32-7;u=x12+x15;x13^=u<<9|u>>>32-9;u=x13+x12;x14^=u<<13|u>>>32-13;u=x14+x13;x15^=u<<18|u>>>32-18;}B[bout++]=tmp[0]=x0+j0|0;B[bout++]=tmp[1]=x1+j1|0;B[bout++]=tmp[2]=x2+j2|0;B[bout++]=tmp[3]=x3+j3|0;B[bout++]=tmp[4]=x4+j4|0;B[bout++]=tmp[5]=x5+j5|0;B[bout++]=tmp[6]=x6+j6|0;B[bout++]=tmp[7]=x7+j7|0;B[bout++]=tmp[8]=x8+j8|0;B[bout++]=tmp[9]=x9+j9|0;B[bout++]=tmp[10]=x10+j10|0;B[bout++]=tmp[11]=x11+j11|0;B[bout++]=tmp[12]=x12+j12|0;B[bout++]=tmp[13]=x13+j13|0;B[bout++]=tmp[14]=x14+j14|0;B[bout++]=tmp[15]=x15+j15|0;}function blockCopy(dst,di,src,si,len){while(len--){dst[di++]=src[si++];}}function blockXOR(dst,di,src,si,len){while(len--){dst[di++]^=src[si++];}}function blockMix(tmp,B,bin,bout,r){blockCopy(tmp,0,B,bin+(2*r-1)*16,16);for(var i=0;i<2*r;i+=2){salsaXOR(tmp,B,bin+i*16,bout+i*8);salsaXOR(tmp,B,bin+i*16+16,bout+i*8+r*16);}}function integerify(B,bi,r){return B[bi+(2*r-1)*16];}function stringToUTF8Bytes(s){var arr=[];for(var i=0;i<s.length;i++){var c=s.charCodeAt(i);if(c<0x80){arr.push(c);}else if(c<0x800){arr.push(0xc0|c>>6);arr.push(0x80|c&0x3f);}else if(c<0xd800){arr.push(0xe0|c>>12);arr.push(0x80|c>>6&0x3f);arr.push(0x80|c&0x3f);}else{if(i>=s.length-1){throw new Error('invalid string');}i++;c=(c&0x3ff)<<10;c|=s.charCodeAt(i)&0x3ff;c+=0x10000;arr.push(0xf0|c>>18);arr.push(0x80|c>>12&0x3f);arr.push(0x80|c>>6&0x3f);arr.push(0x80|c&0x3f);}}return arr;}function bytesToHex(p){var enc='0123456789abcdef'.split('');var len=p.length,arr=[],i=0;for(;i<len;i++){arr.push(enc[p[i]>>>4&15]);arr.push(enc[p[i]>>>0&15]);}return arr.join('');}function bytesToBase64(p){var enc=('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'+'0123456789+/').split('');var len=p.length,arr=[],i=0,a,b,c,t;while(i<len){a=i<len?p[i++]:0;b=i<len?p[i++]:0;c=i<len?p[i++]:0;t=(a<<16)+(b<<8)+c;arr.push(enc[t>>>3*6&63]);arr.push(enc[t>>>2*6&63]);arr.push(enc[t>>>1*6&63]);arr.push(enc[t>>>0*6&63]);}if(len%3>0){arr[arr.length-1]='=';if(len%3===1)arr[arr.length-2]='=';}return arr.join('');}var MAX_UINT=-1>>>0,p=1;if((0,_typeof2["default"])(logN)==="object"){if(arguments.length>4){throw new Error('scrypt: incorrect number of arguments');}var opts=logN;callback=r;logN=opts.logN;if(typeof logN==='undefined'){if(typeof opts.N!=='undefined'){if(opts.N<2||opts.N>MAX_UINT)throw new Error('scrypt: N is out of range');if((opts.N&opts.N-1)!==0)throw new Error('scrypt: N is not a power of 2');logN=Math.log(opts.N)/Math.LN2;}else{throw new Error('scrypt: missing N parameter');}}p=opts.p||1;r=opts.r;dkLen=opts.dkLen||32;interruptStep=opts.interruptStep||0;encoding=opts.encoding;}if(p<1)throw new Error('scrypt: invalid p');if(r<=0)throw new Error('scrypt: invalid r');if(logN<1||logN>31)throw new Error('scrypt: logN must be between 1 and 31');var N=1<<logN>>>0,XY,V,B,tmp;if(r*p>=1<<30||r>MAX_UINT/128/p||r>MAX_UINT/256||N>MAX_UINT/128/r)throw new Error('scrypt: parameters are too large');if(typeof password==='string')password=stringToUTF8Bytes(password);if(typeof salt==='string')salt=stringToUTF8Bytes(salt);if(typeof Int32Array!=='undefined'){XY=new Int32Array(64*r);V=new Int32Array(32*N*r);tmp=new Int32Array(16);}else{XY=[];V=[];tmp=new Array(16);}B=PBKDF2_HMAC_SHA256_OneIter(password,salt,p*128*r);var xi=0,yi=32*r;function smixStart(pos){for(var i=0;i<32*r;i++){var j=pos+i*4;XY[xi+i]=(B[j+3]&0xff)<<24|(B[j+2]&0xff)<<16|(B[j+1]&0xff)<<8|(B[j+0]&0xff)<<0;}}function smixStep1(start,end){for(var i=start;i<end;i+=2){blockCopy(V,i*(32*r),XY,xi,32*r);blockMix(tmp,XY,xi,yi,r);blockCopy(V,(i+1)*(32*r),XY,yi,32*r);blockMix(tmp,XY,yi,xi,r);}}function smixStep2(start,end){for(var i=start;i<end;i+=2){var j=integerify(XY,xi,r)&N-1;blockXOR(XY,xi,V,j*(32*r),32*r);blockMix(tmp,XY,xi,yi,r);j=integerify(XY,yi,r)&N-1;blockXOR(XY,yi,V,j*(32*r),32*r);blockMix(tmp,XY,yi,xi,r);}}function smixFinish(pos){for(var i=0;i<32*r;i++){var j=XY[xi+i];B[pos+i*4+0]=j>>>0&0xff;B[pos+i*4+1]=j>>>8&0xff;B[pos+i*4+2]=j>>>16&0xff;B[pos+i*4+3]=j>>>24&0xff;}}var nextTick=typeof setImmediate!=='undefined'?setImmediate:setTimeout;function interruptedFor(start,end,step,fn,donefn){(function performStep(){nextTick(function(){fn(start,start+step<end?start+step:end);start+=step;if(start<end)performStep();else donefn();});})();}function getResult(enc){var result=PBKDF2_HMAC_SHA256_OneIter(password,B,dkLen);if(enc==='base64')return bytesToBase64(result);else if(enc==='hex')return bytesToHex(result);else if(enc==='binary')return new Uint8Array(result);else return result;}function calculateSync(){for(var i=0;i<p;i++){smixStart(i*128*r);smixStep1(0,N);smixStep2(0,N);smixFinish(i*128*r);}callback(getResult(encoding));}function calculateAsync(i){smixStart(i*128*r);interruptedFor(0,N,interruptStep*2,smixStep1,function(){interruptedFor(0,N,interruptStep*2,smixStep2,function(){smixFinish(i*128*r);if(i+1<p){nextTick(function(){calculateAsync(i+1);});}else{callback(getResult(encoding));}});});}if(typeof interruptStep==='function'){encoding=callback;callback=interruptStep;interruptStep=1000;}if(interruptStep<=0){calculateSync();}else{calculateAsync(0);}}if(typeof module!=='undefined')module.exports=scrypt;

}).call(this,require("timers").setImmediate)

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"timers":1280}],186:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"),require("./lib-typedarrays"),require("./enc-utf16"),require("./enc-base64"),require("./md5"),require("./sha1"),require("./sha256"),require("./sha224"),require("./sha512"),require("./sha384"),require("./sha3"),require("./ripemd160"),require("./hmac"),require("./pbkdf2"),require("./evpkdf"),require("./cipher-core"),require("./mode-cfb"),require("./mode-ctr"),require("./mode-ctr-gladman"),require("./mode-ofb"),require("./mode-ecb"),require("./pad-ansix923"),require("./pad-iso10126"),require("./pad-iso97971"),require("./pad-zeropadding"),require("./pad-nopadding"),require("./format-hex"),require("./aes"),require("./tripledes"),require("./rc4"),require("./rabbit"),require("./rabbit-legacy"));}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],factory);}else{root.CryptoJS=factory(root.CryptoJS);}})(void 0,function(CryptoJS){return CryptoJS;});

},{"./aes":178,"./cipher-core":179,"./core":180,"./enc-base64":181,"./enc-utf16":182,"./evpkdf":183,"./format-hex":184,"./hmac":185,"./lib-typedarrays":187,"./md5":188,"./mode-cfb":189,"./mode-ctr":191,"./mode-ctr-gladman":190,"./mode-ecb":192,"./mode-ofb":193,"./pad-ansix923":194,"./pad-iso10126":195,"./pad-iso97971":196,"./pad-nopadding":197,"./pad-zeropadding":198,"./pbkdf2":199,"./rabbit":201,"./rabbit-legacy":200,"./rc4":202,"./ripemd160":203,"./sha1":204,"./sha224":205,"./sha256":206,"./sha3":207,"./sha384":208,"./sha512":209,"./tripledes":210,"./x64-core":211,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],271:[function(require,module,exports){
function __export(m){for(var p in m){if(!exports.hasOwnProperty(p))exports[p]=m[p];}}Object.defineProperty(exports,"__esModule",{value:true});var secp256k1=require('secp256k1');exports.secp256k1=secp256k1;var ethjsUtil=require('ethjs-util');var BN=require("bn.js");exports.BN=BN;var rlp=require("rlp");exports.rlp=rlp;Object.assign(exports,ethjsUtil);__export(require("./constants"));__export(require("./account"));__export(require("./hash"));__export(require("./signature"));__export(require("./bytes"));__export(require("./object"));

},{"./account":267,"./bytes":268,"./constants":269,"./hash":270,"./object":272,"./signature":273,"bn.js":132,"ethjs-util":288,"rlp":537,"secp256k1":645}],222:[function(require,module,exports){
arguments[4][114][0].apply(exports,arguments)
},{"../package.json":237,"./elliptic/curve":225,"./elliptic/curves":228,"./elliptic/ec":229,"./elliptic/eddsa":232,"./elliptic/utils":236,"brorand":133,"dup":114}],259:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var ethUtil=require('ethereumjs-util');var fees=require('ethereum-common/params.json');var BN=ethUtil.BN;var N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var Transaction=function(){function Transaction(data){(0,_classCallCheck2["default"])(this,Transaction);data=data||{};var fields=[{name:'nonce',length:32,allowLess:true,"default":new Buffer([])},{name:'gasPrice',length:32,allowLess:true,"default":new Buffer([])},{name:'gasLimit',alias:'gas',length:32,allowLess:true,"default":new Buffer([])},{name:'to',allowZero:true,length:20,"default":new Buffer([])},{name:'value',length:32,allowLess:true,"default":new Buffer([])},{name:'data',alias:'input',allowZero:true,"default":new Buffer([])},{name:'v',allowZero:true,"default":new Buffer([0x1c])},{name:'r',length:32,allowZero:true,allowLess:true,"default":new Buffer([])},{name:'s',length:32,allowZero:true,allowLess:true,"default":new Buffer([])}];ethUtil.defineProperties(this,fields,data);Object.defineProperty(this,'from',{enumerable:true,configurable:true,get:this.getSenderAddress.bind(this)});var sigV=ethUtil.bufferToInt(this.v);var chainId=Math.floor((sigV-35)/2);if(chainId<0)chainId=0;this._chainId=chainId||data.chainId||0;this._homestead=true;}(0,_createClass2["default"])(Transaction,[{key:"toCreationAddress",value:function toCreationAddress(){return this.to.toString('hex')==='';}},{key:"hash",value:function hash(includeSignature){if(includeSignature===undefined)includeSignature=true;var items;if(includeSignature){items=this.raw;}else{if(this._chainId>0){var raw=this.raw.slice();this.v=this._chainId;this.r=0;this.s=0;items=this.raw;this.raw=raw;}else{items=this.raw.slice(0,6);}}return ethUtil.rlphash(items);}},{key:"getChainId",value:function getChainId(){return this._chainId;}},{key:"getSenderAddress",value:function getSenderAddress(){if(this._from){return this._from;}var pubkey=this.getSenderPublicKey();this._from=ethUtil.publicToAddress(pubkey);return this._from;}},{key:"getSenderPublicKey",value:function getSenderPublicKey(){if(!this._senderPubKey||!this._senderPubKey.length){if(!this.verifySignature())throw new Error('Invalid Signature');}return this._senderPubKey;}},{key:"verifySignature",value:function verifySignature(){var msgHash=this.hash(false);if(this._homestead&&new BN(this.s).cmp(N_DIV_2)===1){return false;}try{var v=ethUtil.bufferToInt(this.v);if(this._chainId>0){v-=this._chainId*2+8;}this._senderPubKey=ethUtil.ecrecover(msgHash,v,this.r,this.s);}catch(e){return false;}return!!this._senderPubKey;}},{key:"sign",value:function sign(privateKey){var msgHash=this.hash(false);var sig=ethUtil.ecsign(msgHash,privateKey);if(this._chainId>0){sig.v+=this._chainId*2+8;}Object.assign(this,sig);}},{key:"getDataFee",value:function getDataFee(){var data=this.raw[5];var cost=new BN(0);for(var i=0;i<data.length;i++){data[i]===0?cost.iaddn(fees.txDataZeroGas.v):cost.iaddn(fees.txDataNonZeroGas.v);}return cost;}},{key:"getBaseFee",value:function getBaseFee(){var fee=this.getDataFee().iaddn(fees.txGas.v);if(this._homestead&&this.toCreationAddress()){fee.iaddn(fees.txCreation.v);}return fee;}},{key:"getUpfrontCost",value:function getUpfrontCost(){return new BN(this.gasLimit).imul(new BN(this.gasPrice)).iadd(new BN(this.value));}},{key:"validate",value:function validate(stringError){var errors=[];if(!this.verifySignature()){errors.push('Invalid Signature');}if(this.getBaseFee().cmp(new BN(this.gasLimit))>0){errors.push(["gas limit is too low. Need at least ".concat(this.getBaseFee())]);}if(stringError===undefined||stringError===false){return errors.length===0;}else{return errors.join(' ');}}}]);return Transaction;}();module.exports=Transaction;

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"buffer":1133,"ethereum-common/params.json":255,"ethereumjs-util":260}],44:[function(require,module,exports){
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

module.exports = _arrayWithHoles;
},{}],45:[function(require,module,exports){
function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

module.exports = _arrayWithoutHoles;
},{}],46:[function(require,module,exports){
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

module.exports = _assertThisInitialized;
},{}],49:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf");

function isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _construct(Parent, args, Class) {
  if (isNativeReflectConstruct()) {
    module.exports = _construct = Reflect.construct;
  } else {
    module.exports = _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) setPrototypeOf(instance, Class.prototype);
      return instance;
    };
  }

  return _construct.apply(null, arguments);
}

module.exports = _construct;
},{"./setPrototypeOf":62}],62:[function(require,module,exports){
function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

module.exports = _setPrototypeOf;
},{}],64:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf");

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

module.exports = _superPropBase;
},{"./getPrototypeOf":53}],56:[function(require,module,exports){
function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

module.exports = _iterableToArray;
},{}],57:[function(require,module,exports){
function _iterableToArrayLimit(arr, i) {
  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) {
    return;
  }

  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

module.exports = _iterableToArrayLimit;
},{}],58:[function(require,module,exports){
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance");
}

module.exports = _nonIterableRest;
},{}],59:[function(require,module,exports){
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

module.exports = _nonIterableSpread;
},{}],61:[function(require,module,exports){
var superPropBase = require("./superPropBase");

var defineProperty = require("./defineProperty");

function set(target, property, value, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.set) {
    set = Reflect.set;
  } else {
    set = function set(target, property, value, receiver) {
      var base = superPropBase(target, property);
      var desc;

      if (base) {
        desc = Object.getOwnPropertyDescriptor(base, property);

        if (desc.set) {
          desc.set.call(receiver, value);
          return true;
        } else if (!desc.writable) {
          return false;
        }
      }

      desc = Object.getOwnPropertyDescriptor(receiver, property);

      if (desc) {
        if (!desc.writable) {
          return false;
        }

        desc.value = value;
        Object.defineProperty(receiver, property, desc);
      } else {
        defineProperty(receiver, property, value);
      }

      return true;
    };
  }

  return set(target, property, value, receiver);
}

function _set(target, property, value, receiver, isStrict) {
  var s = set(target, property, value, receiver || target);

  if (!s && isStrict) {
    throw new Error('failed to set property');
  }

  return value;
}

module.exports = _set;
},{"./defineProperty":51,"./superPropBase":64}],534:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var runtime=function(exports){var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator;}exports.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this;};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype;}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg);};});}exports.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false;};exports.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype);}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction";}}genFun.prototype=Object.create(Gp);return genFun;};exports.awrap=function(arg){return{__await:arg};};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg);}else{var result=record.arg;var value=result.value;if(value&&(0,_typeof2["default"])(value)==="object"&&hasOwn.call(value,"__await")){return Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);});}return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}this._invoke=enqueue;}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this;};exports.AsyncIterator=AsyncIterator;exports.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running");}if(state===GenStateCompleted){if(method==="throw"){throw arg;}return doneResult();}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(context.method==="next"){context.sent=context._sent=context.arg;}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg;}context.dispatchException(context.arg);}else if(context.method==="return"){context.abrupt("return",context.arg);}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue;}return{value:record.arg,done:context.done};}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg;}}};}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator["return"]){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel;}}context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method");}return ContinueSentinel;}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel;}var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel;}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined;}}else{return info;}context.delegate=null;return ContinueSentinel;}defineIteratorMethods(Gp);Gp[toStringTagSymbol]="Generator";Gp[iteratorSymbol]=function(){return this;};Gp.toString=function(){return"[object Generator]";};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1];}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3];}this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true);}exports.keys=function(object){var keys=[];for(var key in object){keys.push(key);}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next;}}next.done=true;return next;};};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable);}if(typeof iterable.next==="function"){return iterable;}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next;}}next.value=undefined;next.done=true;return next;};return next.next=next;}}return{next:doneResult};}exports.values=values;function doneResult(){return{value:undefined,done:true};}Context.prototype={constructor:Context,reset:function reset(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined;}}}},stop:function stop(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg;}return this.rval;},dispatchException:function dispatchException(exception){if(this.done){throw exception;}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined;}return!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end");}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else{throw new Error("try statement without catch or finally");}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null;}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel;}return this.complete(record);},complete:function complete(record,afterLoc){if(record.type==="throw"){throw record.arg;}if(record.type==="break"||record.type==="continue"){this.next=record.arg;}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end";}else if(record.type==="normal"&&afterLoc){this.next=afterLoc;}return ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel;}}},"catch":function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined;}return ContinueSentinel;}};return exports;}((typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))==="object"?module.exports:{});try{regeneratorRuntime=runtime;}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime);}

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],68:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Mutex=function(){function Mutex(){this._queue=[];this._pending=false;}Mutex.prototype.isLocked=function(){return this._pending;};Mutex.prototype.acquire=function(){var _this=this;var ticket=new Promise(function(resolve){return _this._queue.push(resolve);});if(!this._pending){this._dispatchNext();}return ticket;};Mutex.prototype.runExclusive=function(callback){return this.acquire().then(function(release){var result;try{result=callback();}catch(e){release();throw e;}return Promise.resolve(result).then(function(x){return release(),x;},function(e){release();throw e;});});};Mutex.prototype._dispatchNext=function(){if(this._queue.length>0){this._pending=true;this._queue.shift()(this._dispatchNext.bind(this));}else{this._pending=false;}};return Mutex;}();exports["default"]=Mutex;

},{}],70:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;module.exports=function base(ALPHABET){var ALPHABET_MAP={};var BASE=ALPHABET.length;var LEADER=ALPHABET.charAt(0);for(var z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z);if(ALPHABET_MAP[x]!==undefined)throw new TypeError(x+' is ambiguous');ALPHABET_MAP[x]=z;}function encode(source){if(source.length===0)return'';var digits=[0];for(var i=0;i<source.length;++i){for(var j=0,carry=source[i];j<digits.length;++j){carry+=digits[j]<<8;digits[j]=carry%BASE;carry=carry/BASE|0;}while(carry>0){digits.push(carry%BASE);carry=carry/BASE|0;}}var string='';for(var k=0;source[k]===0&&k<source.length-1;++k){string+=LEADER;}for(var q=digits.length-1;q>=0;--q){string+=ALPHABET[digits[q]];}return string;}function decodeUnsafe(string){if(typeof string!=='string')throw new TypeError('Expected String');if(string.length===0)return Buffer.allocUnsafe(0);var bytes=[0];for(var i=0;i<string.length;i++){var value=ALPHABET_MAP[string[i]];if(value===undefined)return;for(var j=0,carry=value;j<bytes.length;++j){carry+=bytes[j]*BASE;bytes[j]=carry&0xff;carry>>=8;}while(carry>0){bytes.push(carry&0xff);carry>>=8;}}for(var k=0;string[k]===LEADER&&k<string.length-1;++k){bytes.push(0);}return Buffer.from(bytes.reverse());}function decode(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error('Non-base'+BASE+' character');}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode};};

},{"safe-buffer":639}],639:[function(require,module,exports){
var buffer=require('buffer');var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key];}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer;}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer;}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length);}SafeBuffer.prototype=Object.create(Buffer.prototype);copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==='number'){throw new TypeError('Argument must not be a number');}return Buffer(arg,encodingOrOffset,length);};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==='string'){buf.fill(fill,encoding);}else{buf.fill(fill);}}else{buf.fill(0);}return buf;};SafeBuffer.allocUnsafe=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}return Buffer(size);};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}return buffer.SlowBuffer(size);};

},{"buffer":1133}],71:[function(require,module,exports){
'use strict';var ALPHABET='qpzry9x8gf2tvdw0s3jn54khce6mua7l';var ALPHABET_MAP={};for(var z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z);if(ALPHABET_MAP[x]!==undefined)throw new TypeError(x+' is ambiguous');ALPHABET_MAP[x]=z;}function polymodStep(pre){var b=pre>>25;return(pre&0x1FFFFFF)<<5^-(b>>0&1)&0x3b6a57b2^-(b>>1&1)&0x26508e6d^-(b>>2&1)&0x1ea119fa^-(b>>3&1)&0x3d4233dd^-(b>>4&1)&0x2a1462b3;}function prefixChk(prefix){var chk=1;for(var i=0;i<prefix.length;++i){var c=prefix.charCodeAt(i);if(c<33||c>126)throw new Error('Invalid prefix ('+prefix+')');chk=polymodStep(chk)^c>>5;}chk=polymodStep(chk);for(i=0;i<prefix.length;++i){var v=prefix.charCodeAt(i);chk=polymodStep(chk)^v&0x1f;}return chk;}function encode(prefix,words,LIMIT){LIMIT=LIMIT||90;if(prefix.length+7+words.length>LIMIT)throw new TypeError('Exceeds length limit');prefix=prefix.toLowerCase();var chk=prefixChk(prefix);var result=prefix+'1';for(var i=0;i<words.length;++i){var x=words[i];if(x>>5!==0)throw new Error('Non 5-bit word');chk=polymodStep(chk)^x;result+=ALPHABET.charAt(x);}for(i=0;i<6;++i){chk=polymodStep(chk);}chk^=1;for(i=0;i<6;++i){var v=chk>>(5-i)*5&0x1f;result+=ALPHABET.charAt(v);}return result;}function decode(str,LIMIT){LIMIT=LIMIT||90;if(str.length<8)throw new TypeError(str+' too short');if(str.length>LIMIT)throw new TypeError('Exceeds length limit');var lowered=str.toLowerCase();var uppered=str.toUpperCase();if(str!==lowered&&str!==uppered)throw new Error('Mixed-case string '+str);str=lowered;var split=str.lastIndexOf('1');if(split===-1)throw new Error('No separator character for '+str);if(split===0)throw new Error('Missing prefix for '+str);var prefix=str.slice(0,split);var wordChars=str.slice(split+1);if(wordChars.length<6)throw new Error('Data too short');var chk=prefixChk(prefix);var words=[];for(var i=0;i<wordChars.length;++i){var c=wordChars.charAt(i);var v=ALPHABET_MAP[c];if(v===undefined)throw new Error('Unknown character '+c);chk=polymodStep(chk)^v;if(i+6>=wordChars.length)continue;words.push(v);}if(chk!==1)throw new Error('Invalid checksum for '+str);return{prefix:prefix,words:words};}function convert(data,inBits,outBits,pad){var value=0;var bits=0;var maxV=(1<<outBits)-1;var result=[];for(var i=0;i<data.length;++i){value=value<<inBits|data[i];bits+=inBits;while(bits>=outBits){bits-=outBits;result.push(value>>bits&maxV);}}if(pad){if(bits>0){result.push(value<<outBits-bits&maxV);}}else{if(bits>=inBits)throw new Error('Excess padding');if(value<<outBits-bits&maxV)throw new Error('Non-zero padding');}return result;}function toWords(bytes){return convert(bytes,8,5,true);}function fromWords(words){return convert(words,5,8,false);}module.exports={decode:decode,encode:encode,toWords:toWords,fromWords:fromWords};

},{}],73:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;function check(buffer){if(buffer.length<8)return false;if(buffer.length>72)return false;if(buffer[0]!==0x30)return false;if(buffer[1]!==buffer.length-2)return false;if(buffer[2]!==0x02)return false;var lenR=buffer[3];if(lenR===0)return false;if(5+lenR>=buffer.length)return false;if(buffer[4+lenR]!==0x02)return false;var lenS=buffer[5+lenR];if(lenS===0)return false;if(6+lenR+lenS!==buffer.length)return false;if(buffer[4]&0x80)return false;if(lenR>1&&buffer[4]===0x00&&!(buffer[5]&0x80))return false;if(buffer[lenR+6]&0x80)return false;if(lenS>1&&buffer[lenR+6]===0x00&&!(buffer[lenR+7]&0x80))return false;return true;}function decode(buffer){if(buffer.length<8)throw new Error('DER sequence length is too short');if(buffer.length>72)throw new Error('DER sequence length is too long');if(buffer[0]!==0x30)throw new Error('Expected DER sequence');if(buffer[1]!==buffer.length-2)throw new Error('DER sequence length is invalid');if(buffer[2]!==0x02)throw new Error('Expected DER integer');var lenR=buffer[3];if(lenR===0)throw new Error('R length is zero');if(5+lenR>=buffer.length)throw new Error('R length is too long');if(buffer[4+lenR]!==0x02)throw new Error('Expected DER integer (2)');var lenS=buffer[5+lenR];if(lenS===0)throw new Error('S length is zero');if(6+lenR+lenS!==buffer.length)throw new Error('S length is invalid');if(buffer[4]&0x80)throw new Error('R value is negative');if(lenR>1&&buffer[4]===0x00&&!(buffer[5]&0x80))throw new Error('R value excessively padded');if(buffer[lenR+6]&0x80)throw new Error('S value is negative');if(lenS>1&&buffer[lenR+6]===0x00&&!(buffer[lenR+7]&0x80))throw new Error('S value excessively padded');return{r:buffer.slice(4,4+lenR),s:buffer.slice(6+lenR)};}function encode(r,s){var lenR=r.length;var lenS=s.length;if(lenR===0)throw new Error('R length is zero');if(lenS===0)throw new Error('S length is zero');if(lenR>33)throw new Error('R length is too long');if(lenS>33)throw new Error('S length is too long');if(r[0]&0x80)throw new Error('R value is negative');if(s[0]&0x80)throw new Error('S value is negative');if(lenR>1&&r[0]===0x00&&!(r[1]&0x80))throw new Error('R value excessively padded');if(lenS>1&&s[0]===0x00&&!(s[1]&0x80))throw new Error('S value excessively padded');var signature=Buffer.allocUnsafe(6+lenR+lenS);signature[0]=0x30;signature[1]=signature.length-2;signature[2]=0x02;signature[3]=r.length;r.copy(signature,4);signature[4+lenR]=0x02;signature[5+lenR]=s.length;s.copy(signature,6+lenR);return signature;}module.exports={/* common-shake removed: check:check */decode:decode,encode:encode};

},{"safe-buffer":639}],74:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var $=require('./util/preconditions');var errors=require('./errors');var Base58Check=require('./encoding/base58check');var Bech32=require('./encoding/bech32');var Networks=require('./networks');var Hash=require('./crypto/hash');var JSUtil=require('./util/js');var PublicKey=require('./publickey');function Address(data,network,type){if(!(this instanceof Address)){return new Address(data,network,type);}if(_.isArray(data)&&_.isNumber(network)){return Address.createMultisig(data,network,type);}if(data instanceof Address){return data;}$.checkArgument(data,'First argument is required, please include address data.','guide/address.html');if(network&&!Networks.get(network)){throw new TypeError('Second argument must be "livenet" or "testnet".');}if(type&&type!==Address.PayToPublicKeyHash&&type!==Address.PayToScriptHash&&type!==Address.PayToWitnessPublicKeyHash&&type!==Address.PayToWitnessScriptHash){throw new TypeError('Third argument must be "pubkeyhash", "scripthash", "witnesspubkeyhash", or "witnessscripthash".');}var info=this._classifyArguments(data,network,type);info.network=info.network||Networks.get(network)||Networks.defaultNetwork;info.type=info.type||type||Address.PayToPublicKeyHash;JSUtil.defineImmutable(this,{hashBuffer:info.hashBuffer,network:info.network,type:info.type});return this;}Address.prototype._classifyArguments=function(data,network,type){if((data instanceof Buffer||data instanceof Uint8Array)&&(data.length===20||data.length===32)){return Address._transformHash(data,network,type);}else if((data instanceof Buffer||data instanceof Uint8Array)&&data.length>=21){return Address._transformBuffer(data,network,type);}else if(data instanceof PublicKey){return Address._transformPublicKey(data);}else if(data instanceof Script){return Address._transformScript(data,network);}else if(typeof data==='string'){return Address._transformString(data,network,type);}else if(_.isObject(data)){return Address._transformObject(data);}else{throw new TypeError('First argument is an unrecognized data format.');}};Address.PayToPublicKeyHash='pubkeyhash';Address.PayToScriptHash='scripthash';Address.PayToWitnessPublicKeyHash='witnesspubkeyhash';Address.PayToWitnessScriptHash='witnessscripthash';Address._transformHash=function(hash,network,type){var info={};if(!(hash instanceof Buffer)&&!(hash instanceof Uint8Array)){throw new TypeError('Address supplied is not a buffer.');}if(hash.length!==20&&hash.length!==32){throw new TypeError('Address hashbuffers must be either 20 or 32 bytes.');}info.hashBuffer=hash;info.network=Networks.get(network)||Networks.defaultNetwork;info.type=type;return info;};Address._transformObject=function(data){$.checkArgument(data.hash||data.hashBuffer,'Must provide a `hash` or `hashBuffer` property');$.checkArgument(data.type,'Must provide a `type` property');return{hashBuffer:data.hash?Buffer.from(data.hash,'hex'):data.hashBuffer,network:Networks.get(data.network)||Networks.defaultNetwork,type:data.type};};Address._classifyFromVersion=function(buffer){var version={};if(buffer.length>21){var info=Bech32.decode(buffer.toString('utf8'));if(info.version!==0){throw new TypeError('Only witness v0 addresses are supported.');}if(info.data.length===20){version.type=Address.PayToWitnessPublicKeyHash;}else if(info.data.length===32){version.type=Address.PayToWitnessScriptHash;}else{throw new TypeError('Witness data must be either 20 or 32 bytes.');}version.network=Networks.get(info.prefix,'bech32prefix');}else{var pubkeyhashNetwork=Networks.get(buffer[0],'pubkeyhash');var scripthashNetwork=Networks.get(buffer[0],'scripthash');if(pubkeyhashNetwork){version.network=pubkeyhashNetwork;version.type=Address.PayToPublicKeyHash;}else if(scripthashNetwork){version.network=scripthashNetwork;version.type=Address.PayToScriptHash;}}return version;};Address._transformBuffer=function(buffer,network,type){var info={};if(!(buffer instanceof Buffer)&&!(buffer instanceof Uint8Array)){throw new TypeError('Address supplied is not a buffer.');}if(buffer.length<21){throw new TypeError('Address buffer is incorrect length.');}var networkObj=Networks.get(network);var bufferVersion=Address._classifyFromVersion(buffer);if(network&&!networkObj){throw new TypeError('Unknown network');}if(!bufferVersion.network||networkObj&&networkObj.xpubkey!==bufferVersion.network.xpubkey){throw new TypeError('Address has mismatched network type.');}if(!bufferVersion.type||type&&type!==bufferVersion.type){throw new TypeError('Address has mismatched type.');}if(buffer.length>21){info.hashBuffer=Bech32.decode(buffer.toString('utf8')).data;}else{info.hashBuffer=buffer.slice(1);}info.network=bufferVersion.network;info.type=bufferVersion.type;return info;};Address._transformPublicKey=function(pubkey){var info={};if(!(pubkey instanceof PublicKey)){throw new TypeError('Address must be an instance of PublicKey.');}info.hashBuffer=Hash.sha256ripemd160(pubkey.toBuffer());info.type=Address.PayToPublicKeyHash;return info;};Address._transformScript=function(script,network){$.checkArgument(script instanceof Script,'script must be a Script instance');var info=script.getAddressInfo(network);if(!info){throw new errors.Script.CantDeriveAddress(script);}return info;};Address.createMultisig=function(publicKeys,threshold,network,nestedWitness){network=network||publicKeys[0].network||Networks.defaultNetwork;var redeemScript=Script.buildMultisigOut(publicKeys,threshold);if(nestedWitness){return Address.payingTo(Script.buildWitnessMultisigOutFromScript(redeemScript),network);}return Address.payingTo(redeemScript,network);};Address._transformString=function(data,network,type){if(typeof data!=='string'){throw new TypeError('data parameter supplied is not a string.');}if(data.length>100){throw new TypeError('address string is too long');}if(network&&!Networks.get(network)){throw new TypeError('Unknown network');}data=data.trim();try{var info=Address._transformBuffer(Buffer.from(data,'utf8'),network,type);return info;}catch(e){if(type===Address.PayToWitnessPublicKeyHash||type===Address.PayToWitnessScriptHash){throw e;}}var addressBuffer=Base58Check.decode(data);var info=Address._transformBuffer(addressBuffer,network,type);return info;};Address.fromPublicKey=function(data,network){var info=Address._transformPublicKey(data);network=network||Networks.defaultNetwork;return new Address(info.hashBuffer,network,info.type);};Address.fromPublicKeyHash=function(hash,network){var info=Address._transformHash(hash);return new Address(info.hashBuffer,network,Address.PayToPublicKeyHash);};Address.fromScriptHash=function(hash,network){$.checkArgument(hash,'hash parameter is required');var info=Address._transformHash(hash);return new Address(info.hashBuffer,network,Address.PayToScriptHash);};Address.payingTo=function(script,network){$.checkArgument(script,'script is required');$.checkArgument(script instanceof Script,'script must be instance of Script');return Address.fromScriptHash(Hash.sha256ripemd160(script.toBuffer()),network);};Address.fromScript=function(script,network){$.checkArgument(script instanceof Script,'script must be a Script instance');var info=Address._transformScript(script,network);return new Address(info.hashBuffer,network,info.type);};Address.fromBuffer=function(buffer,network,type){var info=Address._transformBuffer(buffer,network,type);return new Address(info.hashBuffer,info.network,info.type);};Address.fromString=function(str,network,type){var info=Address._transformString(str,network,type);return new Address(info.hashBuffer,info.network,info.type);};Address.fromObject=function fromObject(obj){$.checkState(JSUtil.isHexa(obj.hash),'Unexpected hash property, "'+obj.hash+'", expected to be hex.');var hashBuffer=Buffer.from(obj.hash,'hex');return new Address(hashBuffer,obj.network,obj.type);};Address.getValidationError=function(data,network,type){var error;try{new Address(data,network,type);}catch(e){error=e;}return error;};Address.isValid=function(data,network,type){return!Address.getValidationError(data,network,type);};Address.prototype.isPayToPublicKeyHash=function(){return this.type===Address.PayToPublicKeyHash;};Address.prototype.isPayToScriptHash=function(){return this.type===Address.PayToScriptHash;};Address.prototype.isPayToWitnessPublicKeyHash=function(){return this.type===Address.PayToWitnessPublicKeyHash;};Address.prototype.isPayToWitnessScriptHash=function(){return this.type===Address.PayToWitnessScriptHash;};Address.prototype.toBuffer=function(){if(this.isPayToWitnessPublicKeyHash()||this.isPayToWitnessScriptHash()){return Buffer.from(this.toString(),'utf8');}var version=Buffer.from([this.network[this.type]]);return Buffer.concat([version,this.hashBuffer]);};Address.prototype.toObject=Address.prototype.toJSON=function toObject(){return{hash:this.hashBuffer.toString('hex'),type:this.type,network:this.network.toString()};};Address.prototype.toString=function(){if(this.isPayToWitnessPublicKeyHash()||this.isPayToWitnessScriptHash()){var prefix=this.network.bech32prefix;var version=0;return Bech32.encode(prefix,version,this.hashBuffer);}return Base58Check.encode(this.toBuffer());};Address.prototype.inspect=function(){return'<Address: '+this.toString()+', type: '+this.type+', network: '+this.network+'>';};module.exports=Address;var Script=require('./script');

}).call(this,require("buffer").Buffer)

},{"./crypto/hash":77,"./encoding/base58check":82,"./encoding/bech32":83,"./errors":86,"./networks":90,"./publickey":93,"./script":94,"./util/js":112,"./util/preconditions":113,"buffer":1133,"lodash":471}],90:[function(require,module,exports){
'use strict';var _=require('lodash');var BufferUtil=require('./util/buffer');var JSUtil=require('./util/js');var networks=[];var networkMaps={};function Network(){}Network.prototype.toString=function toString(){return this.name;};function get(arg,keys){if(~networks.indexOf(arg)){return arg;}if(keys){if(!_.isArray(keys)){keys=[keys];}var containsArg=function containsArg(key){return networks[index][key]===arg;};for(var index in networks){if(_.some(keys,containsArg)){return networks[index];}}return undefined;}if(networkMaps[arg]&&networkMaps[arg].length>=1){return networkMaps[arg][0];}else{return networkMaps[arg];}}function addNetwork(data){var network=new Network();JSUtil.defineImmutable(network,{name:data.name,alias:data.alias,pubkeyhash:data.pubkeyhash,privatekey:data.privatekey,scripthash:data.scripthash,bech32prefix:data.bech32prefix,xpubkey:data.xpubkey,xprivkey:data.xprivkey});if(data.networkMagic){JSUtil.defineImmutable(network,{networkMagic:BufferUtil.integerAsBuffer(data.networkMagic)});}if(data.port){JSUtil.defineImmutable(network,{port:data.port});}if(data.dnsSeeds){JSUtil.defineImmutable(network,{dnsSeeds:data.dnsSeeds});}_.each(network,function(value){if(!_.isUndefined(value)&&!_.isObject(value)){if(!networkMaps[value]){networkMaps[value]=[];}networkMaps[value].push(network);}});networks.push(network);return network;}function removeNetwork(network){for(var i=0;i<networks.length;i++){if(networks[i]===network){networks.splice(i,1);}}for(var key in networkMaps){var index=networkMaps[key].indexOf(network);if(index>=0){delete networkMaps[key][index];}}}addNetwork({name:'livenet',alias:'mainnet',pubkeyhash:0x00,privatekey:0x80,scripthash:0x05,bech32prefix:'bc',xpubkey:0x0488b21e,xprivkey:0x0488ade4,networkMagic:0xf9beb4d9,port:8333,dnsSeeds:['seed.bitcoin.sipa.be','dnsseed.bluematt.me','dnsseed.bitcoin.dashjr.org','seed.bitcoinstats.com','seed.bitnodes.io','bitseed.xf2.org']});var livenet=get('livenet');addNetwork({name:'testnet',alias:'test',pubkeyhash:0x6f,privatekey:0xef,scripthash:0xc4,bech32prefix:'tb',xpubkey:0x043587cf,xprivkey:0x04358394,networkMagic:0x0b110907,port:18333,dnsSeeds:['testnet-seed.bitcoin.petertodd.org','testnet-seed.bluematt.me','testnet-seed.alexykot.me','testnet-seed.bitcoin.schildbach.de']});var testnet=get('testnet');addNetwork({name:'regtest',alias:'dev',pubkeyhash:0x6f,privatekey:0xef,scripthash:0xc4,bech32prefix:'bcrt',xpubkey:0x043587cf,xprivkey:0x04358394,networkMagic:0xfabfb5da,port:18444,dnsSeeds:[]});var regtest=get('regtest');function enableRegtest(){testnet.regtestEnabled=true;}function disableRegtest(){testnet.regtestEnabled=false;}module.exports={/* common-shake removed: add:addNetwork *//* common-shake removed: remove:removeNetwork */defaultNetwork:livenet,livenet:livenet,/* common-shake removed: mainnet:livenet */testnet:testnet,/* common-shake removed: regtest:regtest */get:get,/* common-shake removed: enableRegtest:enableRegtest *//* common-shake removed: disableRegtest:disableRegtest */};

},{"./util/buffer":111,"./util/js":112,"lodash":471}],93:[function(require,module,exports){
(function (Buffer){
'use strict';var BN=require('./crypto/bn');var Point=require('./crypto/point');var Hash=require('./crypto/hash');var JSUtil=require('./util/js');var Network=require('./networks');var _=require('lodash');var $=require('./util/preconditions');function PublicKey(data,extra){if(!(this instanceof PublicKey)){return new PublicKey(data,extra);}$.checkArgument(data,'First argument is required, please include public key data.');if(data instanceof PublicKey){return data;}extra=extra||{};var info=this._classifyArgs(data,extra);info.point.validate();JSUtil.defineImmutable(this,{point:info.point,compressed:info.compressed,network:info.network||Network.defaultNetwork});return this;};PublicKey.prototype._classifyArgs=function(data,extra){var info={compressed:_.isUndefined(extra.compressed)||extra.compressed};if(data instanceof Point){info.point=data;}else if(data.x&&data.y){info=PublicKey._transformObject(data);}else if(typeof data==='string'){info=PublicKey._transformDER(Buffer.from(data,'hex'));}else if(PublicKey._isBuffer(data)){info=PublicKey._transformDER(data);}else if(PublicKey._isPrivateKey(data)){info=PublicKey._transformPrivateKey(data);}else{throw new TypeError('First argument is an unrecognized data format.');}if(!info.network){info.network=_.isUndefined(extra.network)?undefined:Network.get(extra.network);}return info;};PublicKey._isPrivateKey=function(param){var PrivateKey=require('./privatekey');return param instanceof PrivateKey;};PublicKey._isBuffer=function(param){return param instanceof Buffer||param instanceof Uint8Array;};PublicKey._transformPrivateKey=function(privkey){$.checkArgument(PublicKey._isPrivateKey(privkey),'Must be an instance of PrivateKey');var info={};info.point=Point.getG().mul(privkey.bn);info.compressed=privkey.compressed;info.network=privkey.network;return info;};PublicKey._transformDER=function(buf,strict){$.checkArgument(PublicKey._isBuffer(buf),'Must be a hex buffer of DER encoded public key');var info={};strict=_.isUndefined(strict)?true:strict;var x;var y;var xbuf;var ybuf;if(buf[0]===0x04||!strict&&(buf[0]===0x06||buf[0]===0x07)){xbuf=buf.slice(1,33);ybuf=buf.slice(33,65);if(xbuf.length!==32||ybuf.length!==32||buf.length!==65){throw new TypeError('Length of x and y must be 32 bytes');}x=new BN(xbuf);y=new BN(ybuf);info.point=new Point(x,y);info.compressed=false;}else if(buf[0]===0x03){xbuf=buf.slice(1);x=new BN(xbuf);info=PublicKey._transformX(true,x);info.compressed=true;}else if(buf[0]===0x02){xbuf=buf.slice(1);x=new BN(xbuf);info=PublicKey._transformX(false,x);info.compressed=true;}else{throw new TypeError('Invalid DER format public key');}return info;};PublicKey._transformX=function(odd,x){$.checkArgument(typeof odd==='boolean','Must specify whether y is odd or not (true or false)');var info={};info.point=Point.fromX(odd,x);return info;};PublicKey._transformObject=function(json){var x=new BN(json.x,'hex');var y=new BN(json.y,'hex');var point=new Point(x,y);return new PublicKey(point,{compressed:json.compressed});};PublicKey.fromPrivateKey=function(privkey){$.checkArgument(PublicKey._isPrivateKey(privkey),'Must be an instance of PrivateKey');var info=PublicKey._transformPrivateKey(privkey);return new PublicKey(info.point,{compressed:info.compressed,network:info.network});};PublicKey.fromDER=PublicKey.fromBuffer=function(buf,strict){$.checkArgument(PublicKey._isBuffer(buf),'Must be a hex buffer of DER encoded public key');var info=PublicKey._transformDER(buf,strict);return new PublicKey(info.point,{compressed:info.compressed});};PublicKey.fromPoint=function(point,compressed){$.checkArgument(point instanceof Point,'First argument must be an instance of Point.');return new PublicKey(point,{compressed:compressed});};PublicKey.fromString=function(str,encoding){var buf=Buffer.from(str,encoding||'hex');var info=PublicKey._transformDER(buf);return new PublicKey(info.point,{compressed:info.compressed});};PublicKey.fromX=function(odd,x){var info=PublicKey._transformX(odd,x);return new PublicKey(info.point,{compressed:info.compressed});};PublicKey.getValidationError=function(data){var error;try{new PublicKey(data);}catch(e){error=e;}return error;};PublicKey.isValid=function(data){return!PublicKey.getValidationError(data);};PublicKey.prototype.toObject=PublicKey.prototype.toJSON=function toObject(){return{x:this.point.getX().toString('hex',2),y:this.point.getY().toString('hex',2),compressed:this.compressed};};PublicKey.prototype.toBuffer=PublicKey.prototype.toDER=function(){var x=this.point.getX();var y=this.point.getY();var xbuf=x.toBuffer({size:32});var ybuf=y.toBuffer({size:32});var prefix;if(!this.compressed){prefix=Buffer.from([0x04]);return Buffer.concat([prefix,xbuf,ybuf]);}else{var odd=ybuf[ybuf.length-1]%2;if(odd){prefix=Buffer.from([0x03]);}else{prefix=Buffer.from([0x02]);}return Buffer.concat([prefix,xbuf]);}};PublicKey.prototype._getID=function _getID(){return Hash.sha256ripemd160(this.toBuffer());};PublicKey.prototype.toAddress=function(network){var Address=require('./address');return Address.fromPublicKey(this,network||this.network);};PublicKey.prototype.toString=function(){return this.toDER().toString('hex');};PublicKey.prototype.inspect=function(){return'<PublicKey: '+this.toString()+(this.compressed?'':', uncompressed')+'>';};module.exports=PublicKey;

}).call(this,require("buffer").Buffer)

},{"./address":74,"./crypto/bn":75,"./crypto/hash":77,"./crypto/point":78,"./networks":90,"./privatekey":92,"./util/js":112,"./util/preconditions":113,"buffer":1133,"lodash":471}],113:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var errors=require('../errors');var _=require('lodash');module.exports={checkState:function checkState(condition,message){if(!condition){throw new errors.InvalidState(message);}},checkArgument:function checkArgument(condition,argumentName,message,docsPath){if(!condition){throw new errors.InvalidArgument(argumentName,message,docsPath);}},checkArgumentType:function checkArgumentType(argument,type,argumentName){argumentName=argumentName||'(unknown name)';if(_.isString(type)){if(type==='Buffer'){var buffer=require('buffer');if(!buffer.Buffer.isBuffer(argument)){throw new errors.InvalidArgumentType(argument,type,argumentName);}}else if((0,_typeof2["default"])(argument)!==type){throw new errors.InvalidArgumentType(argument,type,argumentName);}}else{if(!(argument instanceof type)){throw new errors.InvalidArgumentType(argument,type.name,argumentName);}}}};

},{"../errors":86,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1133,"lodash":471}],82:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var Base58=require('./base58');var buffer=require('buffer');var sha256sha256=require('../crypto/hash').sha256sha256;var Base58Check=function Base58Check(obj){if(!(this instanceof Base58Check))return new Base58Check(obj);if(Buffer.isBuffer(obj)){var buf=obj;this.fromBuffer(buf);}else if(typeof obj==='string'){var str=obj;this.fromString(str);}else if(obj){this.set(obj);}};Base58Check.prototype.set=function(obj){this.buf=obj.buf||this.buf||undefined;return this;};Base58Check.validChecksum=function validChecksum(data,checksum){if(_.isString(data)){data=Buffer.from(Base58.decode(data));}if(_.isString(checksum)){checksum=Buffer.from(Base58.decode(checksum));}if(!checksum){checksum=data.slice(-4);data=data.slice(0,-4);}return Base58Check.checksum(data).toString('hex')===checksum.toString('hex');};Base58Check.decode=function(s){if(typeof s!=='string')throw new Error('Input must be a string');var buf=Buffer.from(Base58.decode(s));if(buf.length<4)throw new Error("Input string too short");var data=buf.slice(0,-4);var csum=buf.slice(-4);var hash=sha256sha256(data);var hash4=hash.slice(0,4);if(csum.toString('hex')!==hash4.toString('hex'))throw new Error("Checksum mismatch");return data;};Base58Check.checksum=function(buffer){return sha256sha256(buffer).slice(0,4);};Base58Check.encode=function(buf){if(!Buffer.isBuffer(buf))throw new Error('Input must be a buffer');var checkedBuf=Buffer.alloc(buf.length+4);var hash=Base58Check.checksum(buf);buf.copy(checkedBuf);hash.copy(checkedBuf,buf.length);return Base58.encode(checkedBuf);};Base58Check.prototype.fromBuffer=function(buf){this.buf=buf;return this;};Base58Check.prototype.fromString=function(str){var buf=Base58Check.decode(str);this.buf=buf;return this;};Base58Check.prototype.toBuffer=function(){return this.buf;};Base58Check.prototype.toString=function(){return Base58Check.encode(this.buf);};module.exports=Base58Check;

}).call(this,require("buffer").Buffer)

},{"../crypto/hash":77,"./base58":81,"buffer":1133,"lodash":471}],112:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _=require('lodash');var isHexa=function isHexa(value){if(!_.isString(value)){return false;}return /^[0-9a-fA-F]+$/.test(value);};module.exports={isValidJSON:function isValidJSON(arg){var parsed;if(!_.isString(arg)){return false;}try{parsed=JSON.parse(arg);}catch(e){return false;}if((0,_typeof2["default"])(parsed)==='object'){return true;}return false;},isHexa:isHexa,isHexaString:isHexa,/* common-shake removed: cloneArray:function cloneArray(array){return[].concat(array);} */defineImmutable:function defineImmutable(target,values){Object.keys(values).forEach(function(key){Object.defineProperty(target,key,{configurable:false,enumerable:true,value:values[key]});});return target;},isNaturalNumber:function isNaturalNumber(value){return typeof value==='number'&&isFinite(value)&&Math.floor(value)===value&&value>=0;}};

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"lodash":471}],86:[function(require,module,exports){
'use strict';var _=require('lodash');function format(message,args){return message.replace('{0}',args[0]).replace('{1}',args[1]).replace('{2}',args[2]);}var traverseNode=function traverseNode(parent,errorDefinition){var NodeError=function NodeError(){if(_.isString(errorDefinition.message)){this.message=format(errorDefinition.message,arguments);}else if(_.isFunction(errorDefinition.message)){this.message=errorDefinition.message.apply(null,arguments);}else{throw new Error('Invalid error definition for '+errorDefinition.name);}this.stack=this.message+'\n'+new Error().stack;};NodeError.prototype=Object.create(parent.prototype);NodeError.prototype.name=parent.prototype.name+errorDefinition.name;parent[errorDefinition.name]=NodeError;if(errorDefinition.errors){childDefinitions(NodeError,errorDefinition.errors);}return NodeError;};var childDefinitions=function childDefinitions(parent,_childDefinitions){_.each(_childDefinitions,function(childDefinition){traverseNode(parent,childDefinition);});};var traverseRoot=function traverseRoot(parent,errorsDefinition){childDefinitions(parent,errorsDefinition);return parent;};var bitcore={};bitcore.Error=function(){this.message='Internal error';this.stack=this.message+'\n'+new Error().stack;};bitcore.Error.prototype=Object.create(Error.prototype);bitcore.Error.prototype.name='bitcore.Error';var data=require('./spec');traverseRoot(bitcore.Error,data);module.exports=bitcore.Error;module.exports.extend=function(spec){return traverseNode(bitcore.Error,spec);};

},{"./spec":87,"lodash":471}],83:[function(require,module,exports){
(function (Buffer){
'use strict';var bech32=require('bech32');var decode=function decode(str){if(typeof str!=='string'){throw new Error('Input should be a string');}var decoded=bech32.decode(str);return{prefix:decoded.prefix,data:Buffer.from(bech32.fromWords(decoded.words.slice(1))),version:decoded.words[0]};};var encode=function encode(prefix,version,data){if(typeof prefix!=='string'){throw new Error('Prefix should be a string');}if(typeof version!=='number'){throw new Error('version should be a number');}var words=bech32.toWords(data);words.unshift(version);return bech32.encode(prefix,words);};module.exports={decode:decode,encode:encode};

}).call(this,require("buffer").Buffer)

},{"bech32":71,"buffer":1133}],94:[function(require,module,exports){
module.exports=require('./script');module.exports.Interpreter=require('./interpreter');

},{"./interpreter":95,"./script":96}],132:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(module,exports){'use strict';function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function TempCtor(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;}function BN(number,base,endian){if(BN.isBN(number)){return number;}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==='le'||base==='be'){endian=base;base=10;}this._init(number||0,base||10,endian||'be');}}if((0,_typeof2["default"])(module)==='object'){module.exports=BN;}else{exports.BN=BN;}BN.BN=BN;BN.wordSize=26;var Buffer;try{Buffer=require('buffer').Buffer;}catch(e){}BN.isBN=function isBN(num){if(num instanceof BN){return true;}return num!==null&&(0,_typeof2["default"])(num)==='object'&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words);};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right;};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right;};BN.prototype._init=function init(number,base,endian){if(typeof number==='number'){return this._initNumber(number,base,endian);}if((0,_typeof2["default"])(number)==='object'){return this._initArray(number,base,endian);}if(base==='hex'){base=16;}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,'');var start=0;if(number[0]==='-'){start++;}if(base===16){this._parseHex(number,start);}else{this._parseBase(number,base,start);}if(number[0]==='-'){this.negative=1;}this.strip();if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number;}if(number<0x4000000){this.words=[number&0x3ffffff];this.length=1;}else if(number<0x10000000000000){this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff];this.length=2;}else{assert(number<0x20000000000000);this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff,1];this.length=3;}if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==='number');if(number.length<=0){this.words=[0];this.length=1;return this;}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}var j,w;var off=0;if(endian==='be'){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}else if(endian==='le'){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}return this.strip();};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54){r|=c-49+0xa;}else if(c>=17&&c<=22){r|=c-17+0xa;}else{r|=c&0xf;}}return r;}BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6){w=parseHex(number,i,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;off+=24;if(off>=26){off-=26;j++;}}if(i+6!==start){w=parseHex(number,start,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;}this.strip();};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+0xa;}else if(c>=17){r+=c-17+0xa;}else{r+=c;}}return r;}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=0x3ffffff;limbPow*=base){limbLen++;}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base;}this.imuln(pow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i];}dest.length=this.length;dest.negative=this.negative;dest.red=this.red;};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r;};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0;}return this;};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--;}return this._normSign();};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0;}return this;};BN.prototype.inspect=function inspect(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>';};var zeros=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==='hex'){out='';var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&0xffffff).toString(16);carry=w>>>24-off&0xffffff;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out;}else{out=word+out;}off+=2;if(off>=26){off-=26;i--;}}if(carry!==0){out=carry.toString(16)+out;}while(out.length%padding!==0){out='0'+out;}if(this.negative!==0){out='-'+out;}return out;}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out='';var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out;}else{out=r+out;}}if(this.isZero()){out='0'+out;}while(out.length%padding!==0){out='0'+out;}if(this.negative!==0){out='-'+out;}return out;}assert(false,'Base should be between 2 and 36');};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*0x4000000;}else if(this.length===3&&this.words[2]===0x01){ret+=0x10000000000000+this.words[1]*0x4000000;}else if(this.length>2){assert(false,'Number can only safely store up to 53 bits');}return this.negative!==0?-ret:ret;};BN.prototype.toJSON=function toJSON(){return this.toString(16);};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=='undefined');return this.toArrayLike(Buffer,endian,length);};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length);};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,'byte array longer than desired length');assert(reqLength>0,'Requested array length <= 0');this.strip();var littleEndian=endian==='le';var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0;}for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[reqLength-i-1]=b;}}else{for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[i]=b;}for(;i<reqLength;i++){res[i]=0;}}return res;};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w);};}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=0x1000){r+=13;t>>>=13;}if(t>=0x40){r+=7;t>>>=7;}if(t>=0x8){r+=4;t>>>=4;}if(t>=0x02){r+=2;t>>>=2;}return r+t;};}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&0x1fff)===0){r+=13;t>>>=13;}if((t&0x7f)===0){r+=7;t>>>=7;}if((t&0xf)===0){r+=4;t>>>=4;}if((t&0x3)===0){r+=2;t>>>=2;}if((t&0x1)===0){r++;}return r;};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi;};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit;}return w;}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break;}return r;};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8);};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1);}return this.clone();};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg();}return this.clone();};BN.prototype.isNeg=function isNeg(){return this.negative!==0;};BN.prototype.neg=function neg(){return this.clone().ineg();};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1;}return this;};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0;}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i];}return this.strip();};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num);};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this);};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this);};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num;}else{b=this;}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i];}this.length=b.length;return this.strip();};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num);};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this);};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this);};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i];}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i];}}this.length=a.length;return this.strip();};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num);};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this);};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this);};BN.prototype.inotn=function inotn(width){assert(typeof width==='number'&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--;}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&0x3ffffff;}if(bitsLeft>0){this.words[i]=~this.words[i]&0x3ffffff>>26-bitsLeft;}return this.strip();};BN.prototype.notn=function notn(width){return this.clone().inotn(width);};BN.prototype.setn=function setn(bit,val){assert(typeof bit==='number'&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit;}else{this.words[off]=this.words[off]&~(1<<wbit);}return this.strip();};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign();}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign();}var a,b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++;}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}return this;};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res;}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res;}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this);};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign();}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign();}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this;}var a,b;if(cmp>0){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1;}return this.strip();};BN.prototype.sub=function sub(num){return this.clone().isub(num);};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&0x3ffffff;var carry=r/0x4000000|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/0x4000000|0;rword=r&0x3ffffff;}out.words[k]=rword|0;carry=ncarry|0;}if(carry!==0){out.words[k]=carry|0;}else{out.length--;}return out.strip();}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&0x1fff;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&0x1fff;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&0x1fff;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&0x1fff;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&0x1fff;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&0x1fff;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&0x1fff;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&0x1fff;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&0x1fff;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&0x1fff;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&0x1fff;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&0x1fff;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&0x1fff;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&0x1fff;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&0x1fff;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&0x1fff;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&0x1fff;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&0x1fff;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&0x1fff;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&0x1fff;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=mid+Math.imul(ah0,bl0)|0;hi=Math.imul(ah0,bh0);var w0=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0;w0&=0x3ffffff;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=mid+Math.imul(ah1,bl0)|0;hi=Math.imul(ah1,bh0);lo=lo+Math.imul(al0,bl1)|0;mid=mid+Math.imul(al0,bh1)|0;mid=mid+Math.imul(ah0,bl1)|0;hi=hi+Math.imul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0;w1&=0x3ffffff;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=mid+Math.imul(ah2,bl0)|0;hi=Math.imul(ah2,bh0);lo=lo+Math.imul(al1,bl1)|0;mid=mid+Math.imul(al1,bh1)|0;mid=mid+Math.imul(ah1,bl1)|0;hi=hi+Math.imul(ah1,bh1)|0;lo=lo+Math.imul(al0,bl2)|0;mid=mid+Math.imul(al0,bh2)|0;mid=mid+Math.imul(ah0,bl2)|0;hi=hi+Math.imul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0;w2&=0x3ffffff;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=mid+Math.imul(ah3,bl0)|0;hi=Math.imul(ah3,bh0);lo=lo+Math.imul(al2,bl1)|0;mid=mid+Math.imul(al2,bh1)|0;mid=mid+Math.imul(ah2,bl1)|0;hi=hi+Math.imul(ah2,bh1)|0;lo=lo+Math.imul(al1,bl2)|0;mid=mid+Math.imul(al1,bh2)|0;mid=mid+Math.imul(ah1,bl2)|0;hi=hi+Math.imul(ah1,bh2)|0;lo=lo+Math.imul(al0,bl3)|0;mid=mid+Math.imul(al0,bh3)|0;mid=mid+Math.imul(ah0,bl3)|0;hi=hi+Math.imul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0;w3&=0x3ffffff;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=mid+Math.imul(ah4,bl0)|0;hi=Math.imul(ah4,bh0);lo=lo+Math.imul(al3,bl1)|0;mid=mid+Math.imul(al3,bh1)|0;mid=mid+Math.imul(ah3,bl1)|0;hi=hi+Math.imul(ah3,bh1)|0;lo=lo+Math.imul(al2,bl2)|0;mid=mid+Math.imul(al2,bh2)|0;mid=mid+Math.imul(ah2,bl2)|0;hi=hi+Math.imul(ah2,bh2)|0;lo=lo+Math.imul(al1,bl3)|0;mid=mid+Math.imul(al1,bh3)|0;mid=mid+Math.imul(ah1,bl3)|0;hi=hi+Math.imul(ah1,bh3)|0;lo=lo+Math.imul(al0,bl4)|0;mid=mid+Math.imul(al0,bh4)|0;mid=mid+Math.imul(ah0,bl4)|0;hi=hi+Math.imul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0;w4&=0x3ffffff;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=mid+Math.imul(ah5,bl0)|0;hi=Math.imul(ah5,bh0);lo=lo+Math.imul(al4,bl1)|0;mid=mid+Math.imul(al4,bh1)|0;mid=mid+Math.imul(ah4,bl1)|0;hi=hi+Math.imul(ah4,bh1)|0;lo=lo+Math.imul(al3,bl2)|0;mid=mid+Math.imul(al3,bh2)|0;mid=mid+Math.imul(ah3,bl2)|0;hi=hi+Math.imul(ah3,bh2)|0;lo=lo+Math.imul(al2,bl3)|0;mid=mid+Math.imul(al2,bh3)|0;mid=mid+Math.imul(ah2,bl3)|0;hi=hi+Math.imul(ah2,bh3)|0;lo=lo+Math.imul(al1,bl4)|0;mid=mid+Math.imul(al1,bh4)|0;mid=mid+Math.imul(ah1,bl4)|0;hi=hi+Math.imul(ah1,bh4)|0;lo=lo+Math.imul(al0,bl5)|0;mid=mid+Math.imul(al0,bh5)|0;mid=mid+Math.imul(ah0,bl5)|0;hi=hi+Math.imul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0;w5&=0x3ffffff;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=mid+Math.imul(ah6,bl0)|0;hi=Math.imul(ah6,bh0);lo=lo+Math.imul(al5,bl1)|0;mid=mid+Math.imul(al5,bh1)|0;mid=mid+Math.imul(ah5,bl1)|0;hi=hi+Math.imul(ah5,bh1)|0;lo=lo+Math.imul(al4,bl2)|0;mid=mid+Math.imul(al4,bh2)|0;mid=mid+Math.imul(ah4,bl2)|0;hi=hi+Math.imul(ah4,bh2)|0;lo=lo+Math.imul(al3,bl3)|0;mid=mid+Math.imul(al3,bh3)|0;mid=mid+Math.imul(ah3,bl3)|0;hi=hi+Math.imul(ah3,bh3)|0;lo=lo+Math.imul(al2,bl4)|0;mid=mid+Math.imul(al2,bh4)|0;mid=mid+Math.imul(ah2,bl4)|0;hi=hi+Math.imul(ah2,bh4)|0;lo=lo+Math.imul(al1,bl5)|0;mid=mid+Math.imul(al1,bh5)|0;mid=mid+Math.imul(ah1,bl5)|0;hi=hi+Math.imul(ah1,bh5)|0;lo=lo+Math.imul(al0,bl6)|0;mid=mid+Math.imul(al0,bh6)|0;mid=mid+Math.imul(ah0,bl6)|0;hi=hi+Math.imul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0;w6&=0x3ffffff;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=mid+Math.imul(ah7,bl0)|0;hi=Math.imul(ah7,bh0);lo=lo+Math.imul(al6,bl1)|0;mid=mid+Math.imul(al6,bh1)|0;mid=mid+Math.imul(ah6,bl1)|0;hi=hi+Math.imul(ah6,bh1)|0;lo=lo+Math.imul(al5,bl2)|0;mid=mid+Math.imul(al5,bh2)|0;mid=mid+Math.imul(ah5,bl2)|0;hi=hi+Math.imul(ah5,bh2)|0;lo=lo+Math.imul(al4,bl3)|0;mid=mid+Math.imul(al4,bh3)|0;mid=mid+Math.imul(ah4,bl3)|0;hi=hi+Math.imul(ah4,bh3)|0;lo=lo+Math.imul(al3,bl4)|0;mid=mid+Math.imul(al3,bh4)|0;mid=mid+Math.imul(ah3,bl4)|0;hi=hi+Math.imul(ah3,bh4)|0;lo=lo+Math.imul(al2,bl5)|0;mid=mid+Math.imul(al2,bh5)|0;mid=mid+Math.imul(ah2,bl5)|0;hi=hi+Math.imul(ah2,bh5)|0;lo=lo+Math.imul(al1,bl6)|0;mid=mid+Math.imul(al1,bh6)|0;mid=mid+Math.imul(ah1,bl6)|0;hi=hi+Math.imul(ah1,bh6)|0;lo=lo+Math.imul(al0,bl7)|0;mid=mid+Math.imul(al0,bh7)|0;mid=mid+Math.imul(ah0,bl7)|0;hi=hi+Math.imul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0;w7&=0x3ffffff;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=mid+Math.imul(ah8,bl0)|0;hi=Math.imul(ah8,bh0);lo=lo+Math.imul(al7,bl1)|0;mid=mid+Math.imul(al7,bh1)|0;mid=mid+Math.imul(ah7,bl1)|0;hi=hi+Math.imul(ah7,bh1)|0;lo=lo+Math.imul(al6,bl2)|0;mid=mid+Math.imul(al6,bh2)|0;mid=mid+Math.imul(ah6,bl2)|0;hi=hi+Math.imul(ah6,bh2)|0;lo=lo+Math.imul(al5,bl3)|0;mid=mid+Math.imul(al5,bh3)|0;mid=mid+Math.imul(ah5,bl3)|0;hi=hi+Math.imul(ah5,bh3)|0;lo=lo+Math.imul(al4,bl4)|0;mid=mid+Math.imul(al4,bh4)|0;mid=mid+Math.imul(ah4,bl4)|0;hi=hi+Math.imul(ah4,bh4)|0;lo=lo+Math.imul(al3,bl5)|0;mid=mid+Math.imul(al3,bh5)|0;mid=mid+Math.imul(ah3,bl5)|0;hi=hi+Math.imul(ah3,bh5)|0;lo=lo+Math.imul(al2,bl6)|0;mid=mid+Math.imul(al2,bh6)|0;mid=mid+Math.imul(ah2,bl6)|0;hi=hi+Math.imul(ah2,bh6)|0;lo=lo+Math.imul(al1,bl7)|0;mid=mid+Math.imul(al1,bh7)|0;mid=mid+Math.imul(ah1,bl7)|0;hi=hi+Math.imul(ah1,bh7)|0;lo=lo+Math.imul(al0,bl8)|0;mid=mid+Math.imul(al0,bh8)|0;mid=mid+Math.imul(ah0,bl8)|0;hi=hi+Math.imul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0;w8&=0x3ffffff;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=mid+Math.imul(ah9,bl0)|0;hi=Math.imul(ah9,bh0);lo=lo+Math.imul(al8,bl1)|0;mid=mid+Math.imul(al8,bh1)|0;mid=mid+Math.imul(ah8,bl1)|0;hi=hi+Math.imul(ah8,bh1)|0;lo=lo+Math.imul(al7,bl2)|0;mid=mid+Math.imul(al7,bh2)|0;mid=mid+Math.imul(ah7,bl2)|0;hi=hi+Math.imul(ah7,bh2)|0;lo=lo+Math.imul(al6,bl3)|0;mid=mid+Math.imul(al6,bh3)|0;mid=mid+Math.imul(ah6,bl3)|0;hi=hi+Math.imul(ah6,bh3)|0;lo=lo+Math.imul(al5,bl4)|0;mid=mid+Math.imul(al5,bh4)|0;mid=mid+Math.imul(ah5,bl4)|0;hi=hi+Math.imul(ah5,bh4)|0;lo=lo+Math.imul(al4,bl5)|0;mid=mid+Math.imul(al4,bh5)|0;mid=mid+Math.imul(ah4,bl5)|0;hi=hi+Math.imul(ah4,bh5)|0;lo=lo+Math.imul(al3,bl6)|0;mid=mid+Math.imul(al3,bh6)|0;mid=mid+Math.imul(ah3,bl6)|0;hi=hi+Math.imul(ah3,bh6)|0;lo=lo+Math.imul(al2,bl7)|0;mid=mid+Math.imul(al2,bh7)|0;mid=mid+Math.imul(ah2,bl7)|0;hi=hi+Math.imul(ah2,bh7)|0;lo=lo+Math.imul(al1,bl8)|0;mid=mid+Math.imul(al1,bh8)|0;mid=mid+Math.imul(ah1,bl8)|0;hi=hi+Math.imul(ah1,bh8)|0;lo=lo+Math.imul(al0,bl9)|0;mid=mid+Math.imul(al0,bh9)|0;mid=mid+Math.imul(ah0,bl9)|0;hi=hi+Math.imul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0;w9&=0x3ffffff;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=mid+Math.imul(ah9,bl1)|0;hi=Math.imul(ah9,bh1);lo=lo+Math.imul(al8,bl2)|0;mid=mid+Math.imul(al8,bh2)|0;mid=mid+Math.imul(ah8,bl2)|0;hi=hi+Math.imul(ah8,bh2)|0;lo=lo+Math.imul(al7,bl3)|0;mid=mid+Math.imul(al7,bh3)|0;mid=mid+Math.imul(ah7,bl3)|0;hi=hi+Math.imul(ah7,bh3)|0;lo=lo+Math.imul(al6,bl4)|0;mid=mid+Math.imul(al6,bh4)|0;mid=mid+Math.imul(ah6,bl4)|0;hi=hi+Math.imul(ah6,bh4)|0;lo=lo+Math.imul(al5,bl5)|0;mid=mid+Math.imul(al5,bh5)|0;mid=mid+Math.imul(ah5,bl5)|0;hi=hi+Math.imul(ah5,bh5)|0;lo=lo+Math.imul(al4,bl6)|0;mid=mid+Math.imul(al4,bh6)|0;mid=mid+Math.imul(ah4,bl6)|0;hi=hi+Math.imul(ah4,bh6)|0;lo=lo+Math.imul(al3,bl7)|0;mid=mid+Math.imul(al3,bh7)|0;mid=mid+Math.imul(ah3,bl7)|0;hi=hi+Math.imul(ah3,bh7)|0;lo=lo+Math.imul(al2,bl8)|0;mid=mid+Math.imul(al2,bh8)|0;mid=mid+Math.imul(ah2,bl8)|0;hi=hi+Math.imul(ah2,bh8)|0;lo=lo+Math.imul(al1,bl9)|0;mid=mid+Math.imul(al1,bh9)|0;mid=mid+Math.imul(ah1,bl9)|0;hi=hi+Math.imul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0;w10&=0x3ffffff;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=mid+Math.imul(ah9,bl2)|0;hi=Math.imul(ah9,bh2);lo=lo+Math.imul(al8,bl3)|0;mid=mid+Math.imul(al8,bh3)|0;mid=mid+Math.imul(ah8,bl3)|0;hi=hi+Math.imul(ah8,bh3)|0;lo=lo+Math.imul(al7,bl4)|0;mid=mid+Math.imul(al7,bh4)|0;mid=mid+Math.imul(ah7,bl4)|0;hi=hi+Math.imul(ah7,bh4)|0;lo=lo+Math.imul(al6,bl5)|0;mid=mid+Math.imul(al6,bh5)|0;mid=mid+Math.imul(ah6,bl5)|0;hi=hi+Math.imul(ah6,bh5)|0;lo=lo+Math.imul(al5,bl6)|0;mid=mid+Math.imul(al5,bh6)|0;mid=mid+Math.imul(ah5,bl6)|0;hi=hi+Math.imul(ah5,bh6)|0;lo=lo+Math.imul(al4,bl7)|0;mid=mid+Math.imul(al4,bh7)|0;mid=mid+Math.imul(ah4,bl7)|0;hi=hi+Math.imul(ah4,bh7)|0;lo=lo+Math.imul(al3,bl8)|0;mid=mid+Math.imul(al3,bh8)|0;mid=mid+Math.imul(ah3,bl8)|0;hi=hi+Math.imul(ah3,bh8)|0;lo=lo+Math.imul(al2,bl9)|0;mid=mid+Math.imul(al2,bh9)|0;mid=mid+Math.imul(ah2,bl9)|0;hi=hi+Math.imul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0;w11&=0x3ffffff;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=mid+Math.imul(ah9,bl3)|0;hi=Math.imul(ah9,bh3);lo=lo+Math.imul(al8,bl4)|0;mid=mid+Math.imul(al8,bh4)|0;mid=mid+Math.imul(ah8,bl4)|0;hi=hi+Math.imul(ah8,bh4)|0;lo=lo+Math.imul(al7,bl5)|0;mid=mid+Math.imul(al7,bh5)|0;mid=mid+Math.imul(ah7,bl5)|0;hi=hi+Math.imul(ah7,bh5)|0;lo=lo+Math.imul(al6,bl6)|0;mid=mid+Math.imul(al6,bh6)|0;mid=mid+Math.imul(ah6,bl6)|0;hi=hi+Math.imul(ah6,bh6)|0;lo=lo+Math.imul(al5,bl7)|0;mid=mid+Math.imul(al5,bh7)|0;mid=mid+Math.imul(ah5,bl7)|0;hi=hi+Math.imul(ah5,bh7)|0;lo=lo+Math.imul(al4,bl8)|0;mid=mid+Math.imul(al4,bh8)|0;mid=mid+Math.imul(ah4,bl8)|0;hi=hi+Math.imul(ah4,bh8)|0;lo=lo+Math.imul(al3,bl9)|0;mid=mid+Math.imul(al3,bh9)|0;mid=mid+Math.imul(ah3,bl9)|0;hi=hi+Math.imul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0;w12&=0x3ffffff;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=mid+Math.imul(ah9,bl4)|0;hi=Math.imul(ah9,bh4);lo=lo+Math.imul(al8,bl5)|0;mid=mid+Math.imul(al8,bh5)|0;mid=mid+Math.imul(ah8,bl5)|0;hi=hi+Math.imul(ah8,bh5)|0;lo=lo+Math.imul(al7,bl6)|0;mid=mid+Math.imul(al7,bh6)|0;mid=mid+Math.imul(ah7,bl6)|0;hi=hi+Math.imul(ah7,bh6)|0;lo=lo+Math.imul(al6,bl7)|0;mid=mid+Math.imul(al6,bh7)|0;mid=mid+Math.imul(ah6,bl7)|0;hi=hi+Math.imul(ah6,bh7)|0;lo=lo+Math.imul(al5,bl8)|0;mid=mid+Math.imul(al5,bh8)|0;mid=mid+Math.imul(ah5,bl8)|0;hi=hi+Math.imul(ah5,bh8)|0;lo=lo+Math.imul(al4,bl9)|0;mid=mid+Math.imul(al4,bh9)|0;mid=mid+Math.imul(ah4,bl9)|0;hi=hi+Math.imul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0;w13&=0x3ffffff;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=mid+Math.imul(ah9,bl5)|0;hi=Math.imul(ah9,bh5);lo=lo+Math.imul(al8,bl6)|0;mid=mid+Math.imul(al8,bh6)|0;mid=mid+Math.imul(ah8,bl6)|0;hi=hi+Math.imul(ah8,bh6)|0;lo=lo+Math.imul(al7,bl7)|0;mid=mid+Math.imul(al7,bh7)|0;mid=mid+Math.imul(ah7,bl7)|0;hi=hi+Math.imul(ah7,bh7)|0;lo=lo+Math.imul(al6,bl8)|0;mid=mid+Math.imul(al6,bh8)|0;mid=mid+Math.imul(ah6,bl8)|0;hi=hi+Math.imul(ah6,bh8)|0;lo=lo+Math.imul(al5,bl9)|0;mid=mid+Math.imul(al5,bh9)|0;mid=mid+Math.imul(ah5,bl9)|0;hi=hi+Math.imul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0;w14&=0x3ffffff;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=mid+Math.imul(ah9,bl6)|0;hi=Math.imul(ah9,bh6);lo=lo+Math.imul(al8,bl7)|0;mid=mid+Math.imul(al8,bh7)|0;mid=mid+Math.imul(ah8,bl7)|0;hi=hi+Math.imul(ah8,bh7)|0;lo=lo+Math.imul(al7,bl8)|0;mid=mid+Math.imul(al7,bh8)|0;mid=mid+Math.imul(ah7,bl8)|0;hi=hi+Math.imul(ah7,bh8)|0;lo=lo+Math.imul(al6,bl9)|0;mid=mid+Math.imul(al6,bh9)|0;mid=mid+Math.imul(ah6,bl9)|0;hi=hi+Math.imul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0;w15&=0x3ffffff;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=mid+Math.imul(ah9,bl7)|0;hi=Math.imul(ah9,bh7);lo=lo+Math.imul(al8,bl8)|0;mid=mid+Math.imul(al8,bh8)|0;mid=mid+Math.imul(ah8,bl8)|0;hi=hi+Math.imul(ah8,bh8)|0;lo=lo+Math.imul(al7,bl9)|0;mid=mid+Math.imul(al7,bh9)|0;mid=mid+Math.imul(ah7,bl9)|0;hi=hi+Math.imul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0;w16&=0x3ffffff;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=mid+Math.imul(ah9,bl8)|0;hi=Math.imul(ah9,bh8);lo=lo+Math.imul(al8,bl9)|0;mid=mid+Math.imul(al8,bh9)|0;mid=mid+Math.imul(ah8,bl9)|0;hi=hi+Math.imul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0;w17&=0x3ffffff;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=mid+Math.imul(ah9,bl9)|0;hi=Math.imul(ah9,bh9);var w18=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w18>>>26)|0;w18&=0x3ffffff;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++;}return out;};if(!Math.imul){comb10MulTo=smallMulTo;}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&0x3ffffff;ncarry=ncarry+(r/0x4000000|0)|0;lo=lo+rword|0;rword=lo&0x3ffffff;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=0x3ffffff;}out.words[k]=rword;carry=ncarry;ncarry=hncarry;}if(carry!==0){out.words[k]=carry;}else{out.length--;}return out.strip();}function jumboMulTo(self,num,out){var fftm=new FFTM();return fftm.mulp(self,num,out);}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out);}else if(len<63){res=smallMulTo(this,num,out);}else if(len<1024){res=bigMulTo(this,num,out);}else{res=jumboMulTo(this,num,out);}return res;};function FFTM(x,y){this.x=x;this.y=y;}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N);}return t;};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1;}return rb;};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]];}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx;}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++;}return 1<<i+1+odd;};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t;}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*0x2000+Math.round(ws[2*i]/N)+carry;ws[i]=w&0x3ffffff;if(w<0x4000000){carry=0;}else{carry=w/0x4000000|0;}}return ws;};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&0x1fff;carry=carry>>>13;rws[2*i+1]=carry&0x1fff;carry=carry>>>13;}for(i=2*len;i<N;++i){rws[i]=0;}assert(carry===0);assert((carry&~0x1fff)===0);};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0;}return ph;};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx;}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip();};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out);};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out);};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this);};BN.prototype.imuln=function imuln(num){assert(typeof num==='number');assert(num<0x4000000);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&0x3ffffff)+(carry&0x3ffffff);carry>>=26;carry+=w/0x4000000|0;carry+=lo>>>26;this.words[i]=lo&0x3ffffff;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.muln=function muln(num){return this.clone().imuln(num);};BN.prototype.sqr=function sqr(){return this.mul(this);};BN.prototype.isqr=function isqr(){return this.imul(this.clone());};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break;}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q);}}return res;};BN.prototype.iushln=function iushln(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=0x3ffffff>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r;}if(carry){this.words[i]=carry;this.length++;}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i];}for(i=0;i<s;i++){this.words[i]=0;}this.length+=s;}return this.strip();};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits);};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==='number'&&bits>=0);var h;if(hint){h=(hint-hint%26)/26;}else{h=0;}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=0x3ffffff^0x3ffffff>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i];}maskedWords.length=s;}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s];}}else{this.words[0]=0;this.length=1;}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask;}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry;}if(this.length===0){this.words[0]=0;this.length=1;}return this.strip();};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended);};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits);};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits);};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits);};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits);};BN.prototype.testn=function testn(bit){assert(typeof bit==='number'&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q);};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,'imaskn works only with positive numbers');if(this.length<=s){return this;}if(r!==0){s++;}this.length=Math.min(s,this.length);if(r!==0){var mask=0x3ffffff^0x3ffffff>>>r<<r;this.words[this.length-1]&=mask;}return this.strip();};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits);};BN.prototype.iaddn=function iaddn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this;}this.negative=0;this.isubn(num);this.negative=1;return this;}return this._iaddn(num);};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=0x4000000;i++){this.words[i]-=0x4000000;if(i===this.length-1){this.words[i+1]=1;}else{this.words[i+1]++;}}this.length=Math.max(this.length,i+1);return this;};BN.prototype.isubn=function isubn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this;}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1;}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=0x4000000;this.words[i+1]-=1;}}return this.strip();};BN.prototype.addn=function addn(num){return this.clone().iaddn(num);};BN.prototype.subn=function subn(num){return this.clone().isubn(num);};BN.prototype.iabs=function iabs(){this.negative=0;return this;};BN.prototype.abs=function abs(){return this.clone().iabs();};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&0x3ffffff;carry=(w>>26)-(right/0x4000000|0);this.words[i+shift]=w&0x3ffffff;}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&0x3ffffff;}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&0x3ffffff;}this.negative=1;return this.strip();};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0;}var m=a.length-b.length;var q;if(mode!=='mod'){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0;}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1;}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*0x4000000+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,0x3ffffff);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1;}}if(q){q.words[j]=qj;}}if(q){q.strip();}a.strip();if(mode!=='div'&&shift!==0){a.iushrn(shift);}return{div:q||null,mod:a};};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)};}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=='mod'){div=res.div.neg();}if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num);}}return{div:div,mod:mod};}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=='mod'){div=res.div.neg();}return{div:div,mod:res.mod};}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num);}}return{div:res.div,mod:mod};}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this};}if(num.length===1){if(mode==='div'){return{div:this.divn(num.words[0]),mod:null};}if(mode==='mod'){return{div:null,mod:new BN(this.modn(num.words[0]))};}return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))};}return this._wordDiv(num,mode);};BN.prototype.div=function div(num){return this.divmod(num,'div',false).div;};BN.prototype.mod=function mod(num){return this.divmod(num,'mod',false).mod;};BN.prototype.umod=function umod(num){return this.divmod(num,'mod',true).mod;};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1);};BN.prototype.modn=function modn(num){assert(num<=0x3ffffff);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num;}return acc;};BN.prototype.idivn=function idivn(num){assert(num<=0x3ffffff);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*0x4000000;this.words[i]=w/num|0;carry=w%num;}return this.strip();};BN.prototype.divn=function divn(num){return this.clone().idivn(num);};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p);}else{x=x.clone();}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g;}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1){;}if(i>0){x.iushrn(i);while(i-->0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp);}A.iushrn(1);B.iushrn(1);}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1){;}if(j>0){y.iushrn(j);while(j-->0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp);}C.iushrn(1);D.iushrn(1);}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D);}else{y.isub(x);C.isub(A);D.isub(B);}}return{a:C,b:D,gcd:y.iushln(g)};};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p);}else{a=a.clone();}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1){;}if(i>0){a.iushrn(i);while(i-->0){if(x1.isOdd()){x1.iadd(delta);}x1.iushrn(1);}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1){;}if(j>0){b.iushrn(j);while(j-->0){if(x2.isOdd()){x2.iadd(delta);}x2.iushrn(1);}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2);}else{b.isub(a);x2.isub(x1);}}var res;if(a.cmpn(1)===0){res=x1;}else{res=x2;}if(res.cmpn(0)<0){res.iadd(p);}return res;};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1);}do{while(a.isEven()){a.iushrn(1);}while(b.isEven()){b.iushrn(1);}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t;}else if(r===0||b.cmpn(1)===0){break;}a.isub(b);}while(true);return b.iushln(shift);};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num);};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0;};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1;};BN.prototype.andln=function andln(num){return this.words[0]&num;};BN.prototype.bincn=function bincn(bit){assert(typeof bit==='number');var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this;}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=0x3ffffff;this.words[i]=w;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0;};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1;}else{if(negative){num=-num;}assert(num<=0x3ffffff,'Number is too big');var w=this.words[0]|0;res=w===num?0:w<num?-1:1;}if(this.negative!==0)return-res|0;return res;};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res;};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1;}else if(a>b){res=1;}break;}return res;};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1;};BN.prototype.gt=function gt(num){return this.cmp(num)===1;};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0;};BN.prototype.gte=function gte(num){return this.cmp(num)>=0;};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1;};BN.prototype.lt=function lt(num){return this.cmp(num)===-1;};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0;};BN.prototype.lte=function lte(num){return this.cmp(num)<=0;};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0;};BN.prototype.eq=function eq(num){return this.cmp(num)===0;};BN.red=function red(num){return new Red(num);};BN.prototype.toRed=function toRed(ctx){assert(!this.red,'Already a number in reduction context');assert(this.negative===0,'red works only with positives');return ctx.convertTo(this)._forceRed(ctx);};BN.prototype.fromRed=function fromRed(){assert(this.red,'fromRed works only with numbers in reduction context');return this.red.convertFrom(this);};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this;};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,'Already a number in reduction context');return this._forceRed(ctx);};BN.prototype.redAdd=function redAdd(num){assert(this.red,'redAdd works only with red numbers');return this.red.add(this,num);};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,'redIAdd works only with red numbers');return this.red.iadd(this,num);};BN.prototype.redSub=function redSub(num){assert(this.red,'redSub works only with red numbers');return this.red.sub(this,num);};BN.prototype.redISub=function redISub(num){assert(this.red,'redISub works only with red numbers');return this.red.isub(this,num);};BN.prototype.redShl=function redShl(num){assert(this.red,'redShl works only with red numbers');return this.red.shl(this,num);};BN.prototype.redMul=function redMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.mul(this,num);};BN.prototype.redIMul=function redIMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.imul(this,num);};BN.prototype.redSqr=function redSqr(){assert(this.red,'redSqr works only with red numbers');this.red._verify1(this);return this.red.sqr(this);};BN.prototype.redISqr=function redISqr(){assert(this.red,'redISqr works only with red numbers');this.red._verify1(this);return this.red.isqr(this);};BN.prototype.redSqrt=function redSqrt(){assert(this.red,'redSqrt works only with red numbers');this.red._verify1(this);return this.red.sqrt(this);};BN.prototype.redInvm=function redInvm(){assert(this.red,'redInvm works only with red numbers');this.red._verify1(this);return this.red.invm(this);};BN.prototype.redNeg=function redNeg(){assert(this.red,'redNeg works only with red numbers');this.red._verify1(this);return this.red.neg(this);};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,'redPow(normalNum)');this.red._verify1(this);return this.red.pow(this,num);};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp();}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp;};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength();}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1;}else if(cmp>0){r.isub(this.p);}else{r.strip();}return r;};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out);};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k);};function K256(){MPrime.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=0x3fffff;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i];}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return;}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next;}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10;}else{input.length-=9;}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*0x3d1;num.words[i]=lo&0x3ffffff;lo=w*0x40+(lo/0x4000000|0);}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--;}}return num;};function P224(){MPrime.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');}inherits(P224,MPrime);function P192(){MPrime.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');}inherits(P192,MPrime);function P25519(){MPrime.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*0x13+carry;var lo=hi&0x3ffffff;hi>>>=26;num.words[i]=lo;carry=hi;}if(carry!==0){num.words[num.length++]=carry;}return num;};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==='k256'){prime=new K256();}else if(name==='p224'){prime=new P224();}else if(name==='p192'){prime=new P192();}else if(name==='p25519'){prime=new P25519();}else{throw new Error('Unknown prime '+name);}primes[name]=prime;return prime;};function Red(m){if(typeof m==='string'){var prime=BN._prime(m);this.m=prime.p;this.prime=prime;}else{assert(m.gtn(1),'modulus must be greater than 1');this.m=m;this.prime=null;}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,'red works only with positives');assert(a.red,'red works only with red numbers');};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,'red works only with positives');assert(a.red&&a.red===b.red,'red works only with red numbers');};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this);};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone();}return this.m.sub(a)._forceRed(this);};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m);}return res._forceRed(this);};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m);}return res;};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m);}return res._forceRed(this);};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m);}return res;};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num));};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b));};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b));};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone());};Red.prototype.sqr=function sqr(a){return this.mul(a,a);};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow);}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1);}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne);}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr();}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i;}return r;};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg();}else{return this.imod(inv);}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a);}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26;}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res);}if(bit===0&&current===0){currentLen=0;continue;}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0;}start=26;}return res;};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r;};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res;};BN.mont=function mont(num){return new Mont(num);};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26;}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv);}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift));};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r;};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a;}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}return res._forceRed(this);};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}return res._forceRed(this);};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this);};})(typeof module==='undefined'||module,void 0);

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1104}],76:[function(require,module,exports){
(function (Buffer){
'use strict';var BN=require('./bn');var Point=require('./point');var Signature=require('./signature');var PublicKey=require('../publickey');var Random=require('./random');var Hash=require('./hash');var BufferUtil=require('../util/buffer');var _=require('lodash');var $=require('../util/preconditions');var ECDSA=function ECDSA(obj){if(!(this instanceof ECDSA)){return new ECDSA(obj);}if(obj){this.set(obj);}};ECDSA.prototype.set=function(obj){this.hashbuf=obj.hashbuf||this.hashbuf;this.endian=obj.endian||this.endian;this.privkey=obj.privkey||this.privkey;this.pubkey=obj.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey);this.sig=obj.sig||this.sig;this.k=obj.k||this.k;this.verified=obj.verified||this.verified;return this;};ECDSA.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey();};ECDSA.prototype.calci=function(){for(var i=0;i<4;i++){this.sig.i=i;var Qprime;try{Qprime=this.toPublicKey();}catch(e){console.error(e);continue;}if(Qprime.point.eq(this.pubkey.point)){this.sig.compressed=this.pubkey.compressed;return this;}}this.sig.i=undefined;throw new Error('Unable to find valid recovery factor');};ECDSA.fromString=function(str){var obj=JSON.parse(str);return new ECDSA(obj);};ECDSA.prototype.randomK=function(){var N=Point.getN();var k;do{k=BN.fromBuffer(Random.getRandomBuffer(32));}while(!(k.lt(N)&&k.gt(BN.Zero)));this.k=k;return this;};ECDSA.prototype.deterministicK=function(badrs){if(_.isUndefined(badrs)){badrs=0;}var v=Buffer.alloc(32);v.fill(0x01);var k=Buffer.alloc(32);k.fill(0x00);var x=this.privkey.bn.toBuffer({size:32});var hashbuf=this.endian==='little'?BufferUtil.reverse(this.hashbuf):this.hashbuf;k=Hash.sha256hmac(Buffer.concat([v,Buffer.from([0x00]),x,hashbuf]),k);v=Hash.sha256hmac(v,k);k=Hash.sha256hmac(Buffer.concat([v,Buffer.from([0x01]),x,hashbuf]),k);v=Hash.sha256hmac(v,k);v=Hash.sha256hmac(v,k);var T=BN.fromBuffer(v);var N=Point.getN();for(var i=0;i<badrs||!(T.lt(N)&&T.gt(BN.Zero));i++){k=Hash.sha256hmac(Buffer.concat([v,Buffer.from([0x00])]),k);v=Hash.sha256hmac(v,k);v=Hash.sha256hmac(v,k);T=BN.fromBuffer(v);}this.k=T;return this;};ECDSA.prototype.toPublicKey=function(){var i=this.sig.i;$.checkArgument(i===0||i===1||i===2||i===3,new Error('i must be equal to 0, 1, 2, or 3'));var e=BN.fromBuffer(this.hashbuf);var r=this.sig.r;var s=this.sig.s;var isYOdd=i&1;var isSecondKey=i>>1;var n=Point.getN();var G=Point.getG();var x=isSecondKey?r.add(n):r;var R=Point.fromX(isYOdd,x);var nR=R.mul(n);if(!nR.isInfinity()){throw new Error('nR is not a valid curve point');}var eNeg=e.neg().umod(n);var rInv=r.invm(n);var Q=R.mul(s).add(G.mul(eNeg)).mul(rInv);var pubkey=PublicKey.fromPoint(Q,this.sig.compressed);return pubkey;};ECDSA.prototype.sigError=function(){if(!BufferUtil.isBuffer(this.hashbuf)||this.hashbuf.length!==32){return'hashbuf must be a 32 byte buffer';}var r=this.sig.r;var s=this.sig.s;if(!(r.gt(BN.Zero)&&r.lt(Point.getN()))||!(s.gt(BN.Zero)&&s.lt(Point.getN()))){return'r and s not in range';}var e=BN.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:undefined);var n=Point.getN();var sinv=s.invm(n);var u1=sinv.mul(e).umod(n);var u2=sinv.mul(r).umod(n);var p=Point.getG().mulAdd(u1,this.pubkey.point,u2);if(p.isInfinity()){return'p is infinity';}if(p.getX().umod(n).cmp(r)!==0){return'Invalid signature';}else{return false;}};ECDSA.toLowS=function(s){if(s.gt(BN.fromBuffer(Buffer.from('7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0','hex')))){s=Point.getN().sub(s);}return s;};ECDSA.prototype._findSignature=function(d,e){var N=Point.getN();var G=Point.getG();var badrs=0;var k,Q,r,s;do{if(!this.k||badrs>0){this.deterministicK(badrs);}badrs++;k=this.k;Q=G.mul(k);r=Q.x.umod(N);s=k.invm(N).mul(e.add(d.mul(r))).umod(N);}while(r.cmp(BN.Zero)<=0||s.cmp(BN.Zero)<=0);s=ECDSA.toLowS(s);return{s:s,r:r};};ECDSA.prototype.sign=function(){var hashbuf=this.hashbuf;var privkey=this.privkey;var d=privkey.bn;$.checkState(hashbuf&&privkey&&d,new Error('invalid parameters'));$.checkState(BufferUtil.isBuffer(hashbuf)&&hashbuf.length===32,new Error('hashbuf must be a 32 byte buffer'));var e=BN.fromBuffer(hashbuf,this.endian?{endian:this.endian}:undefined);var obj=this._findSignature(d,e);obj.compressed=this.pubkey.compressed;this.sig=new Signature(obj);return this;};ECDSA.prototype.signRandomK=function(){this.randomK();return this.sign();};ECDSA.prototype.toString=function(){var obj={};if(this.hashbuf){obj.hashbuf=this.hashbuf.toString('hex');}if(this.privkey){obj.privkey=this.privkey.toString();}if(this.pubkey){obj.pubkey=this.pubkey.toString();}if(this.sig){obj.sig=this.sig.toString();}if(this.k){obj.k=this.k.toString();}return JSON.stringify(obj);};ECDSA.prototype.verify=function(){if(!this.sigError()){this.verified=true;}else{this.verified=false;}return this;};ECDSA.sign=function(hashbuf,privkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,privkey:privkey}).sign().sig;};ECDSA.verify=function(hashbuf,sig,pubkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,sig:sig,pubkey:pubkey}).verify().verified;};module.exports=ECDSA;

}).call(this,require("buffer").Buffer)

},{"../publickey":93,"../util/buffer":111,"../util/preconditions":113,"./bn":75,"./hash":77,"./point":78,"./random":79,"./signature":80,"buffer":1133,"lodash":471}],80:[function(require,module,exports){
(function (Buffer){
'use strict';var BN=require('./bn');var _=require('lodash');var $=require('../util/preconditions');var BufferUtil=require('../util/buffer');var JSUtil=require('../util/js');var Signature=function Signature(r,s){if(!(this instanceof Signature)){return new Signature(r,s);}if(r instanceof BN){this.set({r:r,s:s});}else if(r){var obj=r;this.set(obj);}};Signature.prototype.set=function(obj){this.r=obj.r||this.r||undefined;this.s=obj.s||this.s||undefined;this.i=typeof obj.i!=='undefined'?obj.i:this.i;this.compressed=typeof obj.compressed!=='undefined'?obj.compressed:this.compressed;this.nhashtype=obj.nhashtype||this.nhashtype||undefined;return this;};Signature.fromCompact=function(buf){$.checkArgument(BufferUtil.isBuffer(buf),'Argument is expected to be a Buffer');var sig=new Signature();var compressed=true;var i=buf.slice(0,1)[0]-27-4;if(i<0){compressed=false;i=i+4;}var b2=buf.slice(1,33);var b3=buf.slice(33,65);$.checkArgument(i===0||i===1||i===2||i===3,new Error('i must be 0, 1, 2, or 3'));$.checkArgument(b2.length===32,new Error('r must be 32 bytes'));$.checkArgument(b3.length===32,new Error('s must be 32 bytes'));sig.compressed=compressed;sig.i=i;sig.r=BN.fromBuffer(b2);sig.s=BN.fromBuffer(b3);return sig;};Signature.fromDER=Signature.fromBuffer=function(buf,strict){var obj=Signature.parseDER(buf,strict);var sig=new Signature();sig.r=obj.r;sig.s=obj.s;return sig;};Signature.fromTxFormat=function(buf){var nhashtype=buf.readUInt8(buf.length-1);var derbuf=buf.slice(0,buf.length-1);var sig=new Signature.fromDER(derbuf,false);sig.nhashtype=nhashtype;return sig;};Signature.fromString=function(str){var buf=Buffer.from(str,'hex');return Signature.fromDER(buf);};Signature.parseDER=function(buf,strict){$.checkArgument(BufferUtil.isBuffer(buf),new Error('DER formatted signature should be a buffer'));if(_.isUndefined(strict)){strict=true;}var header=buf[0];$.checkArgument(header===0x30,new Error('Header byte should be 0x30'));var length=buf[1];var buflength=buf.slice(2).length;$.checkArgument(!strict||length===buflength,new Error('Length byte should length of what follows'));length=length<buflength?length:buflength;var rheader=buf[2+0];$.checkArgument(rheader===0x02,new Error('Integer byte for r should be 0x02'));var rlength=buf[2+1];var rbuf=buf.slice(2+2,2+2+rlength);var r=BN.fromBuffer(rbuf);var rneg=buf[2+1+1]===0x00?true:false;$.checkArgument(rlength===rbuf.length,new Error('Length of r incorrect'));var sheader=buf[2+2+rlength+0];$.checkArgument(sheader===0x02,new Error('Integer byte for s should be 0x02'));var slength=buf[2+2+rlength+1];var sbuf=buf.slice(2+2+rlength+2,2+2+rlength+2+slength);var s=BN.fromBuffer(sbuf);var sneg=buf[2+2+rlength+2+2]===0x00?true:false;$.checkArgument(slength===sbuf.length,new Error('Length of s incorrect'));var sumlength=2+2+rlength+2+slength;$.checkArgument(length===sumlength-2,new Error('Length of signature incorrect'));var obj={header:header,length:length,rheader:rheader,rlength:rlength,rneg:rneg,rbuf:rbuf,r:r,sheader:sheader,slength:slength,sneg:sneg,sbuf:sbuf,s:s};return obj;};Signature.prototype.toCompact=function(i,compressed){i=typeof i==='number'?i:this.i;compressed=typeof compressed==='boolean'?compressed:this.compressed;if(!(i===0||i===1||i===2||i===3)){throw new Error('i must be equal to 0, 1, 2, or 3');}var val=i+27+4;if(compressed===false){val=val-4;}var b1=Buffer.from([val]);var b2=this.r.toBuffer({size:32});var b3=this.s.toBuffer({size:32});return Buffer.concat([b1,b2,b3]);};Signature.prototype.toBuffer=Signature.prototype.toDER=function(){var rnbuf=this.r.toBuffer();var snbuf=this.s.toBuffer();var rneg=rnbuf[0]&0x80?true:false;var sneg=snbuf[0]&0x80?true:false;var rbuf=rneg?Buffer.concat([Buffer.from([0x00]),rnbuf]):rnbuf;var sbuf=sneg?Buffer.concat([Buffer.from([0x00]),snbuf]):snbuf;var rlength=rbuf.length;var slength=sbuf.length;var length=2+rlength+2+slength;var rheader=0x02;var sheader=0x02;var header=0x30;var der=Buffer.concat([Buffer.from([header,length,rheader,rlength]),rbuf,Buffer.from([sheader,slength]),sbuf]);return der;};Signature.prototype.toString=function(){var buf=this.toDER();return buf.toString('hex');};Signature.isTxDER=function(buf){if(buf.length<9){return false;}if(buf.length>73){return false;}if(buf[0]!==0x30){return false;}if(buf[1]!==buf.length-3){return false;}var nLenR=buf[3];if(5+nLenR>=buf.length){return false;}var nLenS=buf[5+nLenR];if(nLenR+nLenS+7!==buf.length){return false;}var R=buf.slice(4);if(buf[4-2]!==0x02){return false;}if(nLenR===0){return false;}if(R[0]&0x80){return false;}if(nLenR>1&&R[0]===0x00&&!(R[1]&0x80)){return false;}var S=buf.slice(6+nLenR);if(buf[6+nLenR-2]!==0x02){return false;}if(nLenS===0){return false;}if(S[0]&0x80){return false;}if(nLenS>1&&S[0]===0x00&&!(S[1]&0x80)){return false;}return true;};Signature.prototype.hasLowS=function(){if(this.s.lt(new BN(1))||this.s.gt(new BN('7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0','hex'))){return false;}return true;};Signature.prototype.hasDefinedHashtype=function(){if(!JSUtil.isNaturalNumber(this.nhashtype)){return false;}var temp=this.nhashtype&~Signature.SIGHASH_ANYONECANPAY;if(temp<Signature.SIGHASH_ALL||temp>Signature.SIGHASH_SINGLE){return false;}return true;};Signature.prototype.toTxFormat=function(){var derbuf=this.toDER();var buf=Buffer.alloc(1);buf.writeUInt8(this.nhashtype,0);return Buffer.concat([derbuf,buf]);};Signature.SIGHASH_ALL=0x01;Signature.SIGHASH_NONE=0x02;Signature.SIGHASH_SINGLE=0x03;Signature.SIGHASH_ANYONECANPAY=0x80;module.exports=Signature;

}).call(this,require("buffer").Buffer)

},{"../util/buffer":111,"../util/js":112,"../util/preconditions":113,"./bn":75,"buffer":1133,"lodash":471}],78:[function(require,module,exports){
(function (Buffer){
'use strict';var BN=require('./bn');var BufferUtil=require('../util/buffer');var EC=require('elliptic').ec;var ec=new EC('secp256k1');var ecPoint=ec.curve.point.bind(ec.curve);var ecPointFromX=ec.curve.pointFromX.bind(ec.curve);var Point=function Point(x,y,isRed){try{var point=ecPoint(x,y,isRed);}catch(e){throw new Error('Invalid Point');}point.validate();return point;};Point.prototype=Object.getPrototypeOf(ec.curve.point());Point.fromX=function fromX(odd,x){try{var point=ecPointFromX(x,odd);}catch(e){throw new Error('Invalid X');}point.validate();return point;};Point.getG=function getG(){return ec.curve.g;};Point.getN=function getN(){return new BN(ec.curve.n.toArray());};Point.prototype._getX=Point.prototype.getX;Point.prototype.getX=function getX(){return new BN(this._getX().toArray());};Point.prototype._getY=Point.prototype.getY;Point.prototype.getY=function getY(){return new BN(this._getY().toArray());};Point.prototype.validate=function validate(){if(this.isInfinity()){throw new Error('Point cannot be equal to Infinity');}var p2;try{p2=ecPointFromX(this.getX(),this.getY().isOdd());}catch(e){throw new Error('Point does not lie on the curve');}if(p2.y.cmp(this.y)!==0){throw new Error('Invalid y value for curve.');}if(!this.mul(Point.getN()).isInfinity()){throw new Error('Point times N must be infinity');}return this;};Point.pointToCompressed=function pointToCompressed(point){var xbuf=point.getX().toBuffer({size:32});var ybuf=point.getY().toBuffer({size:32});var prefix;var odd=ybuf[ybuf.length-1]%2;if(odd){prefix=Buffer.from([0x03]);}else{prefix=Buffer.from([0x02]);}return BufferUtil.concat([prefix,xbuf]);};module.exports=Point;

}).call(this,require("buffer").Buffer)

},{"../util/buffer":111,"./bn":75,"buffer":1133,"elliptic":114}],111:[function(require,module,exports){
(function (Buffer){
'use strict';var buffer=require('buffer');var assert=require('assert');var js=require('./js');var $=require('./preconditions');function equals(a,b){if(a.length!==b.length){return false;}var length=a.length;for(var i=0;i<length;i++){if(a[i]!==b[i]){return false;}}return true;}module.exports={fill:function fill(buffer,value){$.checkArgumentType(buffer,'Buffer','buffer');$.checkArgumentType(value,'number','value');var length=buffer.length;for(var i=0;i<length;i++){buffer[i]=value;}return buffer;},copy:function copy(original){var buffer=Buffer.alloc(original.length);original.copy(buffer);return buffer;},isBuffer:function isBuffer(arg){return buffer.Buffer.isBuffer(arg)||arg instanceof Uint8Array;},emptyBuffer:function emptyBuffer(bytes){$.checkArgumentType(bytes,'number','bytes');var result=Buffer.alloc(bytes);for(var i=0;i<bytes;i++){result.write('\0',i);}return result;},concat:buffer.Buffer.concat,equals:equals,equal:equals,integerAsSingleByteBuffer:function integerAsSingleByteBuffer(integer){$.checkArgumentType(integer,'number','integer');return Buffer.from([integer&0xff]);},integerAsBuffer:function integerAsBuffer(integer){$.checkArgumentType(integer,'number','integer');var bytes=[];bytes.push(integer>>24&0xff);bytes.push(integer>>16&0xff);bytes.push(integer>>8&0xff);bytes.push(integer&0xff);return Buffer.from(bytes);},integerFromBuffer:function integerFromBuffer(buffer){$.checkArgumentType(buffer,'Buffer','buffer');return buffer[0]<<24|buffer[1]<<16|buffer[2]<<8|buffer[3];},integerFromSingleByteBuffer:function integerFromBuffer(buffer){$.checkArgumentType(buffer,'Buffer','buffer');return buffer[0];},bufferToHex:function bufferToHex(buffer){$.checkArgumentType(buffer,'Buffer','buffer');return buffer.toString('hex');},reverse:function reverse(param){return Buffer.from(param).reverse();}};module.exports.NULL_HASH=module.exports.fill(Buffer.alloc(32),0);module.exports.EMPTY_BUFFER=Buffer.alloc(0);

}).call(this,require("buffer").Buffer)

},{"./js":112,"./preconditions":113,"assert":1100,"buffer":1133}],114:[function(require,module,exports){
'use strict';var elliptic=exports;elliptic.version=require('../package.json').version;elliptic.utils=require('./elliptic/utils');elliptic.rand=require('brorand');elliptic.curve=require('./elliptic/curve');elliptic.curves=require('./elliptic/curves');elliptic.ec=require('./elliptic/ec');elliptic.eddsa=require('./elliptic/eddsa');

},{"../package.json":130,"./elliptic/curve":117,"./elliptic/curves":120,"./elliptic/ec":121,"./elliptic/eddsa":124,"./elliptic/utils":128,"brorand":133}],81:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var bs58=require('bs58');var buffer=require('buffer');var ALPHABET='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'.split('');var Base58=function Base58(obj){if(!(this instanceof Base58)){return new Base58(obj);}if(Buffer.isBuffer(obj)){var buf=obj;this.fromBuffer(buf);}else if(typeof obj==='string'){var str=obj;this.fromString(str);}else if(obj){this.set(obj);}};Base58.validCharacters=function validCharacters(chars){if(buffer.Buffer.isBuffer(chars)){chars=chars.toString();}return _.every(_.map(chars,function(_char){return _.includes(ALPHABET,_char);}));};Base58.prototype.set=function(obj){this.buf=obj.buf||this.buf||undefined;return this;};Base58.encode=function(buf){if(!buffer.Buffer.isBuffer(buf)){throw new Error('Input should be a buffer');}return bs58.encode(buf);};Base58.decode=function(str){if(typeof str!=='string'){throw new Error('Input should be a string');}return Buffer.from(bs58.decode(str));};Base58.prototype.fromBuffer=function(buf){this.buf=buf;return this;};Base58.prototype.fromString=function(str){var buf=Base58.decode(str);this.buf=buf;return this;};Base58.prototype.toBuffer=function(){return this.buf;};Base58.prototype.toString=function(){return Base58.encode(this.buf);};module.exports=Base58;

}).call(this,require("buffer").Buffer)

},{"bs58":163,"buffer":1133,"lodash":471}],84:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var $=require('../util/preconditions');var BufferUtil=require('../util/buffer');var BN=require('../crypto/bn');var BufferReader=function BufferReader(buf){if(!(this instanceof BufferReader)){return new BufferReader(buf);}if(_.isUndefined(buf)){return;}if(Buffer.isBuffer(buf)){this.set({buf:buf});}else if(_.isString(buf)){this.set({buf:Buffer.from(buf,'hex')});}else if(_.isObject(buf)){var obj=buf;this.set(obj);}else{throw new TypeError('Unrecognized argument for BufferReader');}};BufferReader.prototype.set=function(obj){this.buf=obj.buf||this.buf||undefined;this.pos=obj.pos||this.pos||0;return this;};BufferReader.prototype.eof=function(){if(this.buf){return this.pos>=this.buf.length;}else{return true;}};BufferReader.prototype.finished=BufferReader.prototype.eof;BufferReader.prototype.read=function(len){$.checkArgument(!_.isUndefined(len),'Must specify a length');var buf=this.buf.slice(this.pos,this.pos+len);this.pos=this.pos+len;return buf;};BufferReader.prototype.readAll=function(){var buf=this.buf.slice(this.pos,this.buf.length);this.pos=this.buf.length;return buf;};BufferReader.prototype.readUInt8=function(){var val=this.buf.readUInt8(this.pos);this.pos=this.pos+1;return val;};BufferReader.prototype.readUInt16BE=function(){var val=this.buf.readUInt16BE(this.pos);this.pos=this.pos+2;return val;};BufferReader.prototype.readUInt16LE=function(){var val=this.buf.readUInt16LE(this.pos);this.pos=this.pos+2;return val;};BufferReader.prototype.readUInt32BE=function(){var val=this.buf.readUInt32BE(this.pos);this.pos=this.pos+4;return val;};BufferReader.prototype.readUInt32LE=function(){var val=this.buf.readUInt32LE(this.pos);this.pos=this.pos+4;return val;};BufferReader.prototype.readInt32LE=function(){var val=this.buf.readInt32LE(this.pos);this.pos=this.pos+4;return val;};BufferReader.prototype.readUInt64BEBN=function(){var buf=this.buf.slice(this.pos,this.pos+8);var bn=BN.fromBuffer(buf);this.pos=this.pos+8;return bn;};BufferReader.prototype.readUInt64LEBN=function(){var second=this.buf.readUInt32LE(this.pos);var first=this.buf.readUInt32LE(this.pos+4);var combined=first*0x100000000+second;var bn;if(combined<=0x1fffffffffffff){bn=new BN(combined);}else{var data=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);bn=new BN(data,10,'le');}this.pos=this.pos+8;return bn;};BufferReader.prototype.readVarintNum=function(){var first=this.readUInt8();switch(first){case 0xFD:return this.readUInt16LE();case 0xFE:return this.readUInt32LE();case 0xFF:var bn=this.readUInt64LEBN();var n=bn.toNumber();if(n<=Math.pow(2,53)){return n;}else{throw new Error('number too large to retain precision - use readVarintBN');}break;default:return first;}};BufferReader.prototype.readVarLengthBuffer=function(){var len=this.readVarintNum();var buf=this.read(len);$.checkState(buf.length===len,'Invalid length while reading varlength buffer. '+'Expected to read: '+len+' and read '+buf.length);return buf;};BufferReader.prototype.readVarintBuf=function(){var first=this.buf.readUInt8(this.pos);switch(first){case 0xFD:return this.read(1+2);case 0xFE:return this.read(1+4);case 0xFF:return this.read(1+8);default:return this.read(1);}};BufferReader.prototype.readVarintBN=function(){var first=this.readUInt8();switch(first){case 0xFD:return new BN(this.readUInt16LE());case 0xFE:return new BN(this.readUInt32LE());case 0xFF:return this.readUInt64LEBN();default:return new BN(first);}};BufferReader.prototype.reverse=function(){var buf=Buffer.alloc(this.buf.length);for(var i=0;i<buf.length;i++){buf[i]=this.buf[this.buf.length-1-i];}this.buf=buf;return this;};BufferReader.prototype.readReverse=function(len){if(_.isUndefined(len)){len=this.buf.length;}var buf=this.buf.slice(this.pos,this.pos+len);this.pos=this.pos+len;return BufferUtil.reverse(buf);};module.exports=BufferReader;

}).call(this,require("buffer").Buffer)

},{"../crypto/bn":75,"../util/buffer":111,"../util/preconditions":113,"buffer":1133,"lodash":471}],85:[function(require,module,exports){
(function (Buffer){
'use strict';var bufferUtil=require('../util/buffer');var assert=require('assert');var BufferWriter=function BufferWriter(obj){if(!(this instanceof BufferWriter))return new BufferWriter(obj);this.bufLen=0;if(obj)this.set(obj);else this.bufs=[];};BufferWriter.prototype.set=function(obj){this.bufs=obj.bufs||this.bufs||[];this.bufLen=this.bufs.reduce(function(prev,buf){return prev+buf.length;},0);return this;};BufferWriter.prototype.toBuffer=function(){return this.concat();};BufferWriter.prototype.concat=function(){return Buffer.concat(this.bufs,this.bufLen);};BufferWriter.prototype.write=function(buf){assert(bufferUtil.isBuffer(buf));this.bufs.push(buf);this.bufLen+=buf.length;return this;};BufferWriter.prototype.writeReverse=function(buf){assert(bufferUtil.isBuffer(buf));this.bufs.push(bufferUtil.reverse(buf));this.bufLen+=buf.length;return this;};BufferWriter.prototype.writeUInt8=function(n){var buf=Buffer.alloc(1);buf.writeUInt8(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt16BE=function(n){var buf=Buffer.alloc(2);buf.writeUInt16BE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt16LE=function(n){var buf=Buffer.alloc(2);buf.writeUInt16LE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt32BE=function(n){var buf=Buffer.alloc(4);buf.writeUInt32BE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeInt32LE=function(n){var buf=Buffer.alloc(4);buf.writeInt32LE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt32LE=function(n){var buf=Buffer.alloc(4);buf.writeUInt32LE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt64BEBN=function(bn){var buf=bn.toBuffer({size:8});this.write(buf);return this;};BufferWriter.prototype.writeUInt64LEBN=function(bn){var buf=bn.toBuffer({size:8});this.writeReverse(buf);return this;};BufferWriter.prototype.writeVarintNum=function(n){var buf=BufferWriter.varintBufNum(n);this.write(buf);return this;};BufferWriter.prototype.writeVarintBN=function(bn){var buf=BufferWriter.varintBufBN(bn);this.write(buf);return this;};BufferWriter.varintBufNum=function(n){var buf=undefined;if(n<253){buf=Buffer.alloc(1);buf.writeUInt8(n,0);}else if(n<0x10000){buf=Buffer.alloc(1+2);buf.writeUInt8(253,0);buf.writeUInt16LE(n,1);}else if(n<0x100000000){buf=Buffer.alloc(1+4);buf.writeUInt8(254,0);buf.writeUInt32LE(n,1);}else{buf=Buffer.alloc(1+8);buf.writeUInt8(255,0);buf.writeInt32LE(n&-1,1);buf.writeUInt32LE(Math.floor(n/0x100000000),5);}return buf;};BufferWriter.varintBufBN=function(bn){var buf=undefined;var n=bn.toNumber();if(n<253){buf=Buffer.alloc(1);buf.writeUInt8(n,0);}else if(n<0x10000){buf=Buffer.alloc(1+2);buf.writeUInt8(253,0);buf.writeUInt16LE(n,1);}else if(n<0x100000000){buf=Buffer.alloc(1+4);buf.writeUInt8(254,0);buf.writeUInt32LE(n,1);}else{var bw=new BufferWriter();bw.writeUInt8(255);bw.writeUInt64LEBN(bn);var buf=bw.concat();}return buf;};module.exports=BufferWriter;

}).call(this,require("buffer").Buffer)

},{"../util/buffer":111,"assert":1100,"buffer":1133}],1100:[function(require,module,exports){
(function (global){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var objectAssign=require('object-assign');/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function compare(a,b){if(a===b){return 0;}var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break;}}if(x<y){return-1;}if(y<x){return 1;}return 0;}function isBuffer(b){if(global.Buffer&&typeof global.Buffer.isBuffer==='function'){return global.Buffer.isBuffer(b);}return!!(b!=null&&b._isBuffer);}var util=require('util/');var hasOwn=Object.prototype.hasOwnProperty;var pSlice=Array.prototype.slice;var functionsHaveNames=function(){return function foo(){}.name==='foo';}();function pToString(obj){return Object.prototype.toString.call(obj);}function isView(arrbuf){if(isBuffer(arrbuf)){return false;}if(typeof global.ArrayBuffer!=='function'){return false;}if(typeof ArrayBuffer.isView==='function'){return ArrayBuffer.isView(arrbuf);}if(!arrbuf){return false;}if(arrbuf instanceof DataView){return true;}if(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer){return true;}return false;}var assert=module.exports=ok;var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(!util.isFunction(func)){return;}if(functionsHaveNames){return func.name;}var str=func.toString();var match=str.match(regex);return match&&match[1];}assert.AssertionError=function AssertionError(options){this.name='AssertionError';this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false;}else{this.message=getMessage(this);this.generatedMessage=true;}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction);}else{var err=new Error();if(err.stack){var out=err.stack;var fn_name=getName(stackStartFunction);var idx=out.indexOf('\n'+fn_name);if(idx>=0){var next_line=out.indexOf('\n',idx+1);out=out.substring(next_line+1);}this.stack=out;}}};util.inherits(assert.AssertionError,Error);function truncate(s,n){if(typeof s==='string'){return s.length<n?s:s.slice(0,n);}else{return s;}}function inspect(something){if(functionsHaveNames||!util.isFunction(something)){return util.inspect(something);}var rawname=getName(something);var name=rawname?': '+rawname:'';return'[Function'+name+']';}function getMessage(self){return truncate(inspect(self.actual),128)+' '+self.operator+' '+truncate(inspect(self.expected),128);}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction});}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,'==',assert.ok);}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,'==',assert.equal);};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,'!=',assert.notEqual);}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected,false)){fail(actual,expected,message,'deepEqual',assert.deepEqual);}};assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(!_deepEqual(actual,expected,true)){fail(actual,expected,message,'deepStrictEqual',assert.deepStrictEqual);}};function _deepEqual(actual,expected,strict,memos){if(actual===expected){return true;}else if(isBuffer(actual)&&isBuffer(expected)){return compare(actual,expected)===0;}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime();}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase;}else if((actual===null||(0,_typeof2["default"])(actual)!=='object')&&(expected===null||(0,_typeof2["default"])(expected)!=='object')){return strict?actual===expected:actual==expected;}else if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array)){return compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer))===0;}else if(isBuffer(actual)!==isBuffer(expected)){return false;}else{memos=memos||{actual:[],expected:[]};var actualIndex=memos.actual.indexOf(actual);if(actualIndex!==-1){if(actualIndex===memos.expected.indexOf(expected)){return true;}}memos.actual.push(actual);memos.expected.push(expected);return objEquiv(actual,expected,strict,memos);}}function isArguments(object){return Object.prototype.toString.call(object)=='[object Arguments]';}function objEquiv(a,b,strict,actualVisitedObjects){if(a===null||a===undefined||b===null||b===undefined)return false;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return false;var aIsArgs=isArguments(a);var bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b,strict);}var ka=objectKeys(a);var kb=objectKeys(b);var key,i;if(ka.length!==kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!==kb[i])return false;}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key],strict,actualVisitedObjects))return false;}return true;}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected,false)){fail(actual,expected,message,'notDeepEqual',assert.notDeepEqual);}};assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(actual,expected,message){if(_deepEqual(actual,expected,true)){fail(actual,expected,message,'notDeepStrictEqual',notDeepStrictEqual);}}assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,'===',assert.strictEqual);}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,'!==',assert.notStrictEqual);}};function expectedException(actual,expected){if(!actual||!expected){return false;}if(Object.prototype.toString.call(expected)=='[object RegExp]'){return expected.test(actual);}try{if(actual instanceof expected){return true;}}catch(e){}if(Error.isPrototypeOf(expected)){return false;}return expected.call({},actual)===true;}function _tryBlock(block){var error;try{block();}catch(e){error=e;}return error;}function _throws(shouldThrow,block,expected,message){var actual;if(typeof block!=='function'){throw new TypeError('"block" argument must be a function');}if(typeof expected==='string'){message=expected;expected=null;}actual=_tryBlock(block);message=(expected&&expected.name?' ('+expected.name+').':'.')+(message?' '+message:'.');if(shouldThrow&&!actual){fail(actual,expected,'Missing expected exception'+message);}var userProvidedMessage=typeof message==='string';var isUnwantedException=!shouldThrow&&util.isError(actual);var isUnexpectedException=!shouldThrow&&actual&&!expected;if(isUnwantedException&&userProvidedMessage&&expectedException(actual,expected)||isUnexpectedException){fail(actual,expected,'Got unwanted exception'+message);}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual;}}assert["throws"]=function(block,error,message){_throws(true,block,error,message);};assert.doesNotThrow=function(block,error,message){_throws(false,block,error,message);};assert.ifError=function(err){if(err)throw err;};function strict(value,message){if(!value)fail(value,true,message,'==',strict);}assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual});assert.strict.strict=assert.strict;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key);}return keys;};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"object-assign":1194,"util/":1286}],87:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var docsURL='http://bitcore.io/';module.exports=[{name:'InvalidB58Char',message:'Invalid Base58 character: {0} in {1}'},{name:'InvalidB58Checksum',message:'Invalid Base58 checksum for {0}'},{name:'InvalidNetwork',message:'Invalid version for network: got {0}'},{name:'InvalidState',message:'Invalid state: {0}'},{name:'NotImplemented',message:'Function {0} was not implemented yet'},{name:'InvalidNetworkArgument',message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:'InvalidArgument',message:function message(){return'Invalid Argument'+(arguments[0]?': '+arguments[0]:'')+(arguments[1]?' Documentation: '+docsURL+arguments[1]:'');}},{name:'AbstractMethodInvoked',message:'Abstract Method Invocation: {0}'},{name:'InvalidArgumentType',message:function message(){return'Invalid Argument for '+arguments[2]+', expected '+arguments[1]+' but got '+(0,_typeof2["default"])(arguments[0]);}},{name:'Unit',message:'Internal Error on Unit {0}',errors:[{'name':'UnknownCode','message':'Unrecognized unit code: {0}'},{'name':'InvalidRate','message':'Invalid exchange rate: {0}'}]},{name:'MerkleBlock',message:'Internal Error on MerkleBlock {0}',errors:[{'name':'InvalidMerkleTree','message':'This MerkleBlock contain an invalid Merkle Tree'}]},{name:'Transaction',message:'Internal Error on Transaction {0}',errors:[{name:'Input',message:'Internal Error on Input {0}',errors:[{name:'MissingScript',message:'Need a script to create an input'},{name:'UnsupportedScript',message:'Unsupported input script type: {0}'},{name:'MissingPreviousOutput',message:'No previous output information.'}]},{name:'NeedMoreInfo',message:'{0}'},{name:'InvalidSorting',message:'The sorting function provided did not return the change output as one of the array elements'},{name:'InvalidOutputAmountSum',message:'{0}'},{name:'MissingSignatures',message:'Some inputs have not been fully signed'},{name:'InvalidIndex',message:'Invalid index: {0} is not between 0, {1}'},{name:'UnableToVerifySignature',message:'Unable to verify signature: {0}'},{name:'DustOutputs',message:'Dust amount detected in one output'},{name:'InvalidSatoshis',message:'Output satoshis are invalid'},{name:'FeeError',message:'Internal Error on Fee {0}',errors:[{name:'TooSmall',message:'Fee is too small: {0}'},{name:'TooLarge',message:'Fee is too large: {0}'},{name:'Different',message:'Unspent value is different from specified fee: {0}'}]},{name:'ChangeAddressMissing',message:'Change address is missing'},{name:'BlockHeightTooHigh',message:'Block Height can be at most 2^32 -1'},{name:'NLockTimeOutOfRange',message:'Block Height can only be between 0 and 499 999 999'},{name:'LockTimeTooEarly',message:'Lock Time can\'t be earlier than UNIX date 500 000 000'}]},{name:'Script',message:'Internal Error on Script {0}',errors:[{name:'UnrecognizedAddress',message:'Expected argument {0} to be an address'},{name:'CantDeriveAddress',message:'Can\'t derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out.'},{name:'InvalidBuffer',message:'Invalid script buffer: can\'t parse valid script from given buffer {0}'}]},{name:'HDPrivateKey',message:'Internal Error on HDPrivateKey {0}',errors:[{name:'InvalidDerivationArgument',message:'Invalid derivation argument {0}, expected string, or number and boolean'},{name:'InvalidEntropyArgument',message:'Invalid entropy: must be an hexa string or binary buffer, got {0}',errors:[{name:'TooMuchEntropy',message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:'NotEnoughEntropy',message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:'InvalidLength',message:'Invalid length for xprivkey string in {0}'},{name:'InvalidPath',message:'Invalid derivation path: {0}'},{name:'UnrecognizedArgument',message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:'HDPublicKey',message:'Internal Error on HDPublicKey {0}',errors:[{name:'ArgumentIsPrivateExtended',message:'Argument is an extended private key: {0}'},{name:'InvalidDerivationArgument',message:'Invalid derivation argument: got {0}'},{name:'InvalidLength',message:'Invalid length for xpubkey: got "{0}"'},{name:'InvalidPath',message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:'InvalidIndexCantDeriveHardened',message:'Invalid argument: creating a hardened path requires an HDPrivateKey'},{name:'MustSupplyArgument',message:'Must supply an argument to create a HDPublicKey'},{name:'UnrecognizedArgument',message:'Invalid argument for creation, must be string, json, buffer, or object'}]}];

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],89:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _=require('lodash');var $=require('./util/preconditions');var BN=require('./crypto/bn');var Base58=require('./encoding/base58');var Base58Check=require('./encoding/base58check');var Hash=require('./crypto/hash');var HDPrivateKey=require('./hdprivatekey');var Network=require('./networks');var Point=require('./crypto/point');var PublicKey=require('./publickey');var bitcoreErrors=require('./errors');var errors=bitcoreErrors;var hdErrors=bitcoreErrors.HDPublicKey;var assert=require('assert');var JSUtil=require('./util/js');var BufferUtil=require('./util/buffer');function HDPublicKey(arg){if(arg instanceof HDPublicKey){return arg;}if(!(this instanceof HDPublicKey)){return new HDPublicKey(arg);}if(arg){if(_.isString(arg)||BufferUtil.isBuffer(arg)){var error=HDPublicKey.getSerializedError(arg);if(!error){return this._buildFromSerialized(arg);}else if(BufferUtil.isBuffer(arg)&&!HDPublicKey.getSerializedError(arg.toString())){return this._buildFromSerialized(arg.toString());}else{if(error instanceof hdErrors.ArgumentIsPrivateExtended){return new HDPrivateKey(arg).hdPublicKey;}throw error;}}else{if(_.isObject(arg)){if(arg instanceof HDPrivateKey){return this._buildFromPrivate(arg);}else{return this._buildFromObject(arg);}}else{throw new hdErrors.UnrecognizedArgument(arg);}}}else{throw new hdErrors.MustSupplyArgument();}}HDPublicKey.isValidPath=function(arg){if(_.isString(arg)){var indexes=HDPrivateKey._getDerivationIndexes(arg);return indexes!==null&&_.every(indexes,HDPublicKey.isValidPath);}if(_.isNumber(arg)){return arg>=0&&arg<HDPublicKey.Hardened;}return false;};HDPublicKey.prototype.derive=function(arg,hardened){return this.deriveChild(arg,hardened);};HDPublicKey.prototype.deriveChild=function(arg,hardened){if(_.isNumber(arg)){return this._deriveWithNumber(arg,hardened);}else if(_.isString(arg)){return this._deriveFromString(arg);}else{throw new hdErrors.InvalidDerivationArgument(arg);}};HDPublicKey.prototype._deriveWithNumber=function(index,hardened){if(index>=HDPublicKey.Hardened||hardened){throw new hdErrors.InvalidIndexCantDeriveHardened();}if(index<0){throw new hdErrors.InvalidPath(index);}var indexBuffer=BufferUtil.integerAsBuffer(index);var data=BufferUtil.concat([this.publicKey.toBuffer(),indexBuffer]);var hash=Hash.sha512hmac(data,this._buffers.chainCode);var leftPart=BN.fromBuffer(hash.slice(0,32),{size:32});var chainCode=hash.slice(32,64);var publicKey;try{publicKey=PublicKey.fromPoint(Point.getG().mul(leftPart).add(this.publicKey.point));}catch(e){return this._deriveWithNumber(index+1);}var derived=new HDPublicKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:index,chainCode:chainCode,publicKey:publicKey});return derived;};HDPublicKey.prototype._deriveFromString=function(path){if(_.includes(path,"'")){throw new hdErrors.InvalidIndexCantDeriveHardened();}else if(!HDPublicKey.isValidPath(path)){throw new hdErrors.InvalidPath(path);}var indexes=HDPrivateKey._getDerivationIndexes(path);var derived=indexes.reduce(function(prev,index){return prev._deriveWithNumber(index);},this);return derived;};HDPublicKey.isValidSerialized=function(data,network){return _.isNull(HDPublicKey.getSerializedError(data,network));};HDPublicKey.getSerializedError=function(data,network){if(!(_.isString(data)||BufferUtil.isBuffer(data))){return new hdErrors.UnrecognizedArgument('expected buffer or string');}if(!Base58.validCharacters(data)){return new errors.InvalidB58Char('(unknown)',data);}try{data=Base58Check.decode(data);}catch(e){return new errors.InvalidB58Checksum(data);}if(data.length!==HDPublicKey.DataSize){return new hdErrors.InvalidLength(data);}if(!_.isUndefined(network)){var error=HDPublicKey._validateNetwork(data,network);if(error){return error;}}var version=BufferUtil.integerFromBuffer(data.slice(0,4));if(version===Network.livenet.xprivkey||version===Network.testnet.xprivkey){return new hdErrors.ArgumentIsPrivateExtended();}return null;};HDPublicKey._validateNetwork=function(data,networkArg){var network=Network.get(networkArg);if(!network){return new errors.InvalidNetworkArgument(networkArg);}var version=data.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd);if(BufferUtil.integerFromBuffer(version)!==network.xpubkey){return new errors.InvalidNetwork(version);}return null;};HDPublicKey.prototype._buildFromPrivate=function(arg){var args=_.clone(arg._buffers);var point=Point.getG().mul(BN.fromBuffer(args.privateKey));args.publicKey=Point.pointToCompressed(point);args.version=BufferUtil.integerAsBuffer(Network.get(BufferUtil.integerFromBuffer(args.version)).xpubkey);args.privateKey=undefined;args.checksum=undefined;args.xprivkey=undefined;return this._buildFromBuffers(args);};HDPublicKey.prototype._buildFromObject=function(arg){var buffers={version:arg.network?BufferUtil.integerAsBuffer(Network.get(arg.network).xpubkey):arg.version,depth:_.isNumber(arg.depth)?BufferUtil.integerAsSingleByteBuffer(arg.depth):arg.depth,parentFingerPrint:_.isNumber(arg.parentFingerPrint)?BufferUtil.integerAsBuffer(arg.parentFingerPrint):arg.parentFingerPrint,childIndex:_.isNumber(arg.childIndex)?BufferUtil.integerAsBuffer(arg.childIndex):arg.childIndex,chainCode:_.isString(arg.chainCode)?Buffer.from(arg.chainCode,'hex'):arg.chainCode,publicKey:_.isString(arg.publicKey)?Buffer.from(arg.publicKey,'hex'):BufferUtil.isBuffer(arg.publicKey)?arg.publicKey:arg.publicKey.toBuffer(),checksum:_.isNumber(arg.checksum)?BufferUtil.integerAsBuffer(arg.checksum):arg.checksum};return this._buildFromBuffers(buffers);};HDPublicKey.prototype._buildFromSerialized=function(arg){var decoded=Base58Check.decode(arg);var buffers={version:decoded.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd),depth:decoded.slice(HDPublicKey.DepthStart,HDPublicKey.DepthEnd),parentFingerPrint:decoded.slice(HDPublicKey.ParentFingerPrintStart,HDPublicKey.ParentFingerPrintEnd),childIndex:decoded.slice(HDPublicKey.ChildIndexStart,HDPublicKey.ChildIndexEnd),chainCode:decoded.slice(HDPublicKey.ChainCodeStart,HDPublicKey.ChainCodeEnd),publicKey:decoded.slice(HDPublicKey.PublicKeyStart,HDPublicKey.PublicKeyEnd),checksum:decoded.slice(HDPublicKey.ChecksumStart,HDPublicKey.ChecksumEnd),xpubkey:arg};return this._buildFromBuffers(buffers);};HDPublicKey.prototype._buildFromBuffers=function(arg){HDPublicKey._validateBufferArguments(arg);JSUtil.defineImmutable(this,{_buffers:arg});var sequence=[arg.version,arg.depth,arg.parentFingerPrint,arg.childIndex,arg.chainCode,arg.publicKey];var concat=BufferUtil.concat(sequence);var checksum=Base58Check.checksum(concat);if(!arg.checksum||!arg.checksum.length){arg.checksum=checksum;}else{if(arg.checksum.toString('hex')!==checksum.toString('hex')){throw new errors.InvalidB58Checksum(concat,checksum);}}var network=Network.get(BufferUtil.integerFromBuffer(arg.version));var xpubkey;xpubkey=Base58Check.encode(BufferUtil.concat(sequence));arg.xpubkey=Buffer.from(xpubkey);var publicKey=new PublicKey(arg.publicKey,{network:network});var size=HDPublicKey.ParentFingerPrintSize;var fingerPrint=Hash.sha256ripemd160(publicKey.toBuffer()).slice(0,size);JSUtil.defineImmutable(this,{xpubkey:xpubkey,network:network,depth:BufferUtil.integerFromSingleByteBuffer(arg.depth),publicKey:publicKey,fingerPrint:fingerPrint});return this;};HDPublicKey._validateBufferArguments=function(arg){var checkBuffer=function checkBuffer(name,size){var buff=arg[name];assert(BufferUtil.isBuffer(buff),name+' argument is not a buffer, it\'s '+(0,_typeof2["default"])(buff));assert(buff.length===size,name+' has not the expected size: found '+buff.length+', expected '+size);};checkBuffer('version',HDPublicKey.VersionSize);checkBuffer('depth',HDPublicKey.DepthSize);checkBuffer('parentFingerPrint',HDPublicKey.ParentFingerPrintSize);checkBuffer('childIndex',HDPublicKey.ChildIndexSize);checkBuffer('chainCode',HDPublicKey.ChainCodeSize);checkBuffer('publicKey',HDPublicKey.PublicKeySize);if(arg.checksum&&arg.checksum.length){checkBuffer('checksum',HDPublicKey.CheckSumSize);}};HDPublicKey.fromString=function(arg){$.checkArgument(_.isString(arg),'No valid string was provided');return new HDPublicKey(arg);};HDPublicKey.fromObject=function(arg){$.checkArgument(_.isObject(arg),'No valid argument was provided');return new HDPublicKey(arg);};HDPublicKey.prototype.toString=function(){return this.xpubkey;};HDPublicKey.prototype.inspect=function(){return'<HDPublicKey: '+this.xpubkey+'>';};HDPublicKey.prototype.toObject=HDPublicKey.prototype.toJSON=function toObject(){return{network:Network.get(BufferUtil.integerFromBuffer(this._buffers.version)).name,depth:BufferUtil.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:BufferUtil.integerFromBuffer(this.fingerPrint),parentFingerPrint:BufferUtil.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:BufferUtil.integerFromBuffer(this._buffers.childIndex),chainCode:BufferUtil.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:BufferUtil.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey};};HDPublicKey.fromBuffer=function(arg){return new HDPublicKey(arg);};HDPublicKey.prototype.toBuffer=function(){return BufferUtil.copy(this._buffers.xpubkey);};HDPublicKey.Hardened=0x80000000;HDPublicKey.RootElementAlias=['m','M'];HDPublicKey.VersionSize=4;HDPublicKey.DepthSize=1;HDPublicKey.ParentFingerPrintSize=4;HDPublicKey.ChildIndexSize=4;HDPublicKey.ChainCodeSize=32;HDPublicKey.PublicKeySize=33;HDPublicKey.CheckSumSize=4;HDPublicKey.DataSize=78;HDPublicKey.SerializedByteSize=82;HDPublicKey.VersionStart=0;HDPublicKey.VersionEnd=HDPublicKey.VersionStart+HDPublicKey.VersionSize;HDPublicKey.DepthStart=HDPublicKey.VersionEnd;HDPublicKey.DepthEnd=HDPublicKey.DepthStart+HDPublicKey.DepthSize;HDPublicKey.ParentFingerPrintStart=HDPublicKey.DepthEnd;HDPublicKey.ParentFingerPrintEnd=HDPublicKey.ParentFingerPrintStart+HDPublicKey.ParentFingerPrintSize;HDPublicKey.ChildIndexStart=HDPublicKey.ParentFingerPrintEnd;HDPublicKey.ChildIndexEnd=HDPublicKey.ChildIndexStart+HDPublicKey.ChildIndexSize;HDPublicKey.ChainCodeStart=HDPublicKey.ChildIndexEnd;HDPublicKey.ChainCodeEnd=HDPublicKey.ChainCodeStart+HDPublicKey.ChainCodeSize;HDPublicKey.PublicKeyStart=HDPublicKey.ChainCodeEnd;HDPublicKey.PublicKeyEnd=HDPublicKey.PublicKeyStart+HDPublicKey.PublicKeySize;HDPublicKey.ChecksumStart=HDPublicKey.PublicKeyEnd;HDPublicKey.ChecksumEnd=HDPublicKey.ChecksumStart+HDPublicKey.CheckSumSize;assert(HDPublicKey.PublicKeyEnd===HDPublicKey.DataSize);assert(HDPublicKey.ChecksumEnd===HDPublicKey.SerializedByteSize);module.exports=HDPublicKey;

}).call(this,require("buffer").Buffer)

},{"./crypto/bn":75,"./crypto/hash":77,"./crypto/point":78,"./encoding/base58":81,"./encoding/base58check":82,"./errors":86,"./hdprivatekey":88,"./networks":90,"./publickey":93,"./util/buffer":111,"./util/js":112,"./util/preconditions":113,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"assert":1100,"buffer":1133,"lodash":471}],92:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var Address=require('./address');var Base58Check=require('./encoding/base58check');var BN=require('./crypto/bn');var JSUtil=require('./util/js');var Networks=require('./networks');var Point=require('./crypto/point');var PublicKey=require('./publickey');var Random=require('./crypto/random');var $=require('./util/preconditions');function PrivateKey(data,network){if(!(this instanceof PrivateKey)){return new PrivateKey(data,network);}if(data instanceof PrivateKey){return data;}var info=this._classifyArguments(data,network);if(!info.bn||info.bn.cmp(new BN(0))===0){throw new TypeError('Number can not be equal to zero, undefined, null or false');}if(!info.bn.lt(Point.getN())){throw new TypeError('Number must be less than N');}if(typeof info.network==='undefined'){throw new TypeError('Must specify the network ("livenet" or "testnet")');}JSUtil.defineImmutable(this,{bn:info.bn,compressed:info.compressed,network:info.network});Object.defineProperty(this,'publicKey',{configurable:false,enumerable:true,get:this.toPublicKey.bind(this)});return this;};PrivateKey.prototype._classifyArguments=function(data,network){var info={compressed:true,network:network?Networks.get(network):Networks.defaultNetwork};if(_.isUndefined(data)||_.isNull(data)){info.bn=PrivateKey._getRandomBN();}else if(data instanceof BN){info.bn=data;}else if(data instanceof Buffer||data instanceof Uint8Array){info=PrivateKey._transformBuffer(data,network);}else if(data.bn&&data.network){info=PrivateKey._transformObject(data);}else if(!network&&Networks.get(data)){info.bn=PrivateKey._getRandomBN();info.network=Networks.get(data);}else if(typeof data==='string'){if(JSUtil.isHexa(data)){info.bn=new BN(Buffer.from(data,'hex'));}else{info=PrivateKey._transformWIF(data,network);}}else{throw new TypeError('First argument is an unrecognized data type.');}return info;};PrivateKey._getRandomBN=function(){var condition;var bn;do{var privbuf=Random.getRandomBuffer(32);bn=BN.fromBuffer(privbuf);condition=bn.lt(Point.getN());}while(!condition);return bn;};PrivateKey._transformBuffer=function(buf,network){var info={};if(buf.length===32){return PrivateKey._transformBNBuffer(buf,network);}info.network=Networks.get(buf[0],'privatekey');if(!info.network){throw new Error('Invalid network');}if(network&&info.network!==Networks.get(network)){throw new TypeError('Private key network mismatch');}if(buf.length===1+32+1&&buf[1+32+1-1]===1){info.compressed=true;}else if(buf.length===1+32){info.compressed=false;}else{throw new Error('Length of buffer must be 33 (uncompressed) or 34 (compressed)');}info.bn=BN.fromBuffer(buf.slice(1,32+1));return info;};PrivateKey._transformBNBuffer=function(buf,network){var info={};info.network=Networks.get(network)||Networks.defaultNetwork;info.bn=BN.fromBuffer(buf);info.compressed=false;return info;};PrivateKey._transformWIF=function(str,network){return PrivateKey._transformBuffer(Base58Check.decode(str),network);};PrivateKey.fromBuffer=function(arg,network){return new PrivateKey(arg,network);};PrivateKey._transformObject=function(json){var bn=new BN(json.bn,'hex');var network=Networks.get(json.network);return{bn:bn,network:network,compressed:json.compressed};};PrivateKey.fromString=PrivateKey.fromWIF=function(str){$.checkArgument(_.isString(str),'First argument is expected to be a string.');return new PrivateKey(str);};PrivateKey.fromObject=function(obj){$.checkArgument(_.isObject(obj),'First argument is expected to be an object.');return new PrivateKey(obj);};PrivateKey.fromRandom=function(network){var bn=PrivateKey._getRandomBN();return new PrivateKey(bn,network);};PrivateKey.getValidationError=function(data,network){var error;try{new PrivateKey(data,network);}catch(e){error=e;}return error;};PrivateKey.isValid=function(data,network){if(!data){return false;}return!PrivateKey.getValidationError(data,network);};PrivateKey.prototype.toString=function(){return this.toBuffer().toString('hex');};PrivateKey.prototype.toWIF=function(){var network=this.network;var compressed=this.compressed;var buf;if(compressed){buf=Buffer.concat([Buffer.from([network.privatekey]),this.bn.toBuffer({size:32}),Buffer.from([0x01])]);}else{buf=Buffer.concat([Buffer.from([network.privatekey]),this.bn.toBuffer({size:32})]);}return Base58Check.encode(buf);};PrivateKey.prototype.toBigNumber=function(){return this.bn;};PrivateKey.prototype.toBuffer=function(){return this.bn.toBuffer({size:32});};PrivateKey.prototype.toBufferNoPadding=function(){return this.bn.toBuffer();};PrivateKey.prototype.toPublicKey=function(){if(!this._pubkey){this._pubkey=PublicKey.fromPrivateKey(this);}return this._pubkey;};PrivateKey.prototype.toAddress=function(network){var pubkey=this.toPublicKey();return Address.fromPublicKey(pubkey,network||this.network);};PrivateKey.prototype.toObject=PrivateKey.prototype.toJSON=function toObject(){return{bn:this.bn.toString('hex'),compressed:this.compressed,network:this.network.toString()};};PrivateKey.prototype.inspect=function(){var uncompressed=!this.compressed?', uncompressed':'';return'<PrivateKey: '+this.toString()+', network: '+this.network+uncompressed+'>';};module.exports=PrivateKey;

}).call(this,require("buffer").Buffer)

},{"./address":74,"./crypto/bn":75,"./crypto/point":78,"./crypto/random":79,"./encoding/base58check":82,"./networks":90,"./publickey":93,"./util/js":112,"./util/preconditions":113,"buffer":1133,"lodash":471}],91:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _=require('lodash');var $=require('./util/preconditions');var BufferUtil=require('./util/buffer');var JSUtil=require('./util/js');function Opcode(num){if(!(this instanceof Opcode)){return new Opcode(num);}var value;if(_.isNumber(num)){value=num;}else if(_.isString(num)){value=Opcode.map[num];}else{throw new TypeError('Unrecognized num type: "'+(0,_typeof2["default"])(num)+'" for Opcode');}JSUtil.defineImmutable(this,{num:value});return this;}Opcode.fromBuffer=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return new Opcode(Number('0x'+buf.toString('hex')));};Opcode.fromNumber=function(num){$.checkArgument(_.isNumber(num));return new Opcode(num);};Opcode.fromString=function(str){$.checkArgument(_.isString(str));var value=Opcode.map[str];if(typeof value==='undefined'){throw new TypeError('Invalid opcodestr');}return new Opcode(value);};Opcode.prototype.toHex=function(){return this.num.toString(16);};Opcode.prototype.toBuffer=function(){return Buffer.from(this.toHex(),'hex');};Opcode.prototype.toNumber=function(){return this.num;};Opcode.prototype.toString=function(){var str=Opcode.reverseMap[this.num];if(typeof str==='undefined'){throw new Error('Opcode does not have a string representation');}return str;};Opcode.smallInt=function(n){$.checkArgument(_.isNumber(n),'Invalid Argument: n should be number');$.checkArgument(n>=0&&n<=16,'Invalid Argument: n must be between 0 and 16');if(n===0){return Opcode('OP_0');}return new Opcode(Opcode.map.OP_1+n-1);};Opcode.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};Opcode.reverseMap=[];for(var k in Opcode.map){Opcode.reverseMap[Opcode.map[k]]=k;}_.extend(Opcode,Opcode.map);Opcode.isSmallIntOp=function(opcode){if(opcode instanceof Opcode){opcode=opcode.toNumber();}return opcode===Opcode.map.OP_0||opcode>=Opcode.map.OP_1&&opcode<=Opcode.map.OP_16;};Opcode.prototype.inspect=function(){return'<Opcode: '+this.toString()+', hex: '+this.toHex()+', decimal: '+this.num+'>';};module.exports=Opcode;

}).call(this,require("buffer").Buffer)

},{"./util/buffer":111,"./util/js":112,"./util/preconditions":113,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1133,"lodash":471}],96:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var Address=require('../address');var BufferReader=require('../encoding/bufferreader');var BufferWriter=require('../encoding/bufferwriter');var Hash=require('../crypto/hash');var Opcode=require('../opcode');var PublicKey=require('../publickey');var Signature=require('../crypto/signature');var Networks=require('../networks');var $=require('../util/preconditions');var _=require('lodash');var errors=require('../errors');var buffer=require('buffer');var BufferUtil=require('../util/buffer');var JSUtil=require('../util/js');var Script=function Script(from){if(!(this instanceof Script)){return new Script(from);}this.chunks=[];if(BufferUtil.isBuffer(from)){return Script.fromBuffer(from);}else if(from instanceof Address){return Script.fromAddress(from);}else if(from instanceof Script){return Script.fromBuffer(from.toBuffer());}else if(_.isString(from)){return Script.fromString(from);}else if(_.isObject(from)&&_.isArray(from.chunks)){this.set(from);}};Script.prototype.set=function(obj){$.checkArgument(_.isObject(obj));$.checkArgument(_.isArray(obj.chunks));this.chunks=obj.chunks;return this;};Script.fromBuffer=function(buffer){var script=new Script();script.chunks=[];var br=new BufferReader(buffer);while(!br.finished()){try{var opcodenum=br.readUInt8();var len,buf;if(opcodenum>0&&opcodenum<Opcode.OP_PUSHDATA1){len=opcodenum;script.chunks.push({buf:br.read(len),len:len,opcodenum:opcodenum});}else if(opcodenum===Opcode.OP_PUSHDATA1){len=br.readUInt8();buf=br.read(len);script.chunks.push({buf:buf,len:len,opcodenum:opcodenum});}else if(opcodenum===Opcode.OP_PUSHDATA2){len=br.readUInt16LE();buf=br.read(len);script.chunks.push({buf:buf,len:len,opcodenum:opcodenum});}else if(opcodenum===Opcode.OP_PUSHDATA4){len=br.readUInt32LE();buf=br.read(len);script.chunks.push({buf:buf,len:len,opcodenum:opcodenum});}else{script.chunks.push({opcodenum:opcodenum});}}catch(e){if(e instanceof RangeError){throw new errors.Script.InvalidBuffer(buffer.toString('hex'));}throw e;}}return script;};Script.prototype.toBuffer=function(){var bw=new BufferWriter();for(var i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];var opcodenum=chunk.opcodenum;bw.writeUInt8(chunk.opcodenum);if(chunk.buf){if(opcodenum<Opcode.OP_PUSHDATA1){bw.write(chunk.buf);}else if(opcodenum===Opcode.OP_PUSHDATA1){bw.writeUInt8(chunk.len);bw.write(chunk.buf);}else if(opcodenum===Opcode.OP_PUSHDATA2){bw.writeUInt16LE(chunk.len);bw.write(chunk.buf);}else if(opcodenum===Opcode.OP_PUSHDATA4){bw.writeUInt32LE(chunk.len);bw.write(chunk.buf);}}}return bw.concat();};Script.fromASM=function(str){var script=new Script();script.chunks=[];var tokens=str.split(' ');var i=0;while(i<tokens.length){var token=tokens[i];var opcode=Opcode(token);var opcodenum=opcode.toNumber();if(_.isUndefined(opcodenum)){var buf=Buffer.from(tokens[i],'hex');script.chunks.push({buf:buf,len:buf.length,opcodenum:buf.length});i=i+1;}else if(opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){script.chunks.push({buf:Buffer.from(tokens[i+2],'hex'),len:parseInt(tokens[i+1]),opcodenum:opcodenum});i=i+3;}else{script.chunks.push({opcodenum:opcodenum});i=i+1;}}return script;};Script.fromHex=function(str){return new Script(Buffer.from(str,'hex'));};Script.fromString=function(str){if(JSUtil.isHexa(str)||str.length===0){return new Script(Buffer.from(str,'hex'));}var script=new Script();script.chunks=[];var tokens=str.split(' ');var i=0;while(i<tokens.length){var token=tokens[i];var opcode=Opcode(token);var opcodenum=opcode.toNumber();if(_.isUndefined(opcodenum)){opcodenum=parseInt(token);if(opcodenum>0&&opcodenum<Opcode.OP_PUSHDATA1){script.chunks.push({buf:Buffer.from(tokens[i+1].slice(2),'hex'),len:opcodenum,opcodenum:opcodenum});i=i+2;}else{throw new Error('Invalid script: '+JSON.stringify(str));}}else if(opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){if(tokens[i+2].slice(0,2)!=='0x'){throw new Error('Pushdata data must start with 0x');}script.chunks.push({buf:Buffer.from(tokens[i+2].slice(2),'hex'),len:parseInt(tokens[i+1]),opcodenum:opcodenum});i=i+3;}else{script.chunks.push({opcodenum:opcodenum});i=i+1;}}return script;};Script.prototype._chunkToString=function(chunk,type){var opcodenum=chunk.opcodenum;var asm=type==='asm';var str='';if(!chunk.buf){if(typeof Opcode.reverseMap[opcodenum]!=='undefined'){if(asm){if(opcodenum===0){str=str+' 0';}else if(opcodenum===79){str=str+' -1';}else{str=str+' '+Opcode(opcodenum).toString();}}else{str=str+' '+Opcode(opcodenum).toString();}}else{var numstr=opcodenum.toString(16);if(numstr.length%2!==0){numstr='0'+numstr;}if(asm){str=str+' '+numstr;}else{str=str+' '+'0x'+numstr;}}}else{if(!asm&&opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){str=str+' '+Opcode(opcodenum).toString();}if(chunk.len>0){if(asm){str=str+' '+chunk.buf.toString('hex');}else{str=str+' '+chunk.len+' '+'0x'+chunk.buf.toString('hex');}}}return str;};Script.prototype.toASM=function(){var str='';for(var i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];str+=this._chunkToString(chunk,'asm');}return str.substr(1);};Script.prototype.toString=function(){var str='';for(var i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];str+=this._chunkToString(chunk);}return str.substr(1);};Script.prototype.toHex=function(){return this.toBuffer().toString('hex');};Script.prototype.inspect=function(){return'<Script: '+this.toString()+'>';};Script.prototype.isPublicKeyHashOut=function(){return!!(this.chunks.length===5&&this.chunks[0].opcodenum===Opcode.OP_DUP&&this.chunks[1].opcodenum===Opcode.OP_HASH160&&this.chunks[2].buf&&this.chunks[2].buf.length===20&&this.chunks[3].opcodenum===Opcode.OP_EQUALVERIFY&&this.chunks[4].opcodenum===Opcode.OP_CHECKSIG);};Script.prototype.isPublicKeyHashIn=function(){if(this.chunks.length===2){var signatureBuf=this.chunks[0].buf;var pubkeyBuf=this.chunks[1].buf;if(signatureBuf&&signatureBuf.length&&signatureBuf[0]===0x30&&pubkeyBuf&&pubkeyBuf.length){var version=pubkeyBuf[0];if((version===0x04||version===0x06||version===0x07)&&pubkeyBuf.length===65){return true;}else if((version===0x03||version===0x02)&&pubkeyBuf.length===33){return true;}}}return false;};Script.prototype.getPublicKey=function(){$.checkState(this.isPublicKeyOut(),'Can\'t retrieve PublicKey from a non-PK output');return this.chunks[0].buf;};Script.prototype.getPublicKeyHash=function(){$.checkState(this.isPublicKeyHashOut(),'Can\'t retrieve PublicKeyHash from a non-PKH output');return this.chunks[2].buf;};Script.prototype.isPublicKeyOut=function(){if(this.chunks.length===2&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===Opcode.OP_CHECKSIG){var pubkeyBuf=this.chunks[0].buf;var version=pubkeyBuf[0];var isVersion=false;if((version===0x04||version===0x06||version===0x07)&&pubkeyBuf.length===65){isVersion=true;}else if((version===0x03||version===0x02)&&pubkeyBuf.length===33){isVersion=true;}if(isVersion){return PublicKey.isValid(pubkeyBuf);}}return false;};Script.prototype.isPublicKeyIn=function(){if(this.chunks.length===1){var signatureBuf=this.chunks[0].buf;if(signatureBuf&&signatureBuf.length&&signatureBuf[0]===0x30){return true;}}return false;};Script.prototype.isScriptHashOut=function(){var buf=this.toBuffer();return buf.length===23&&buf[0]===Opcode.OP_HASH160&&buf[1]===0x14&&buf[buf.length-1]===Opcode.OP_EQUAL;};Script.prototype.isWitnessScriptHashOut=function(){var buf=this.toBuffer();return buf.length===34&&buf[0]===0&&buf[1]===32;};Script.prototype.isWitnessPublicKeyHashOut=function(){var buf=this.toBuffer();return buf.length===22&&buf[0]===0&&buf[1]===20;};Script.prototype.isWitnessProgram=function(values){if(!values){values={};}var buf=this.toBuffer();if(buf.length<4||buf.length>42){return false;}if(buf[0]!==Opcode.OP_0&&!(buf[0]>=Opcode.OP_1&&buf[0]<=Opcode.OP_16)){return false;}if(buf.length===buf[1]+2){values.version=buf[0];values.program=buf.slice(2,buf.length);return true;}return false;};Script.prototype.isScriptHashIn=function(){if(this.chunks.length<=1){return false;}var redeemChunk=this.chunks[this.chunks.length-1];var redeemBuf=redeemChunk.buf;if(!redeemBuf){return false;}var redeemScript;try{redeemScript=Script.fromBuffer(redeemBuf);}catch(e){if(e instanceof errors.Script.InvalidBuffer){return false;}throw e;}var type=redeemScript.classify();return type!==Script.types.UNKNOWN;};Script.prototype.isMultisigOut=function(){return this.chunks.length>3&&Opcode.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(function(obj){return obj.buf&&BufferUtil.isBuffer(obj.buf);})&&Opcode.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===Opcode.OP_CHECKMULTISIG;};Script.prototype.isMultisigIn=function(){return this.chunks.length>=2&&this.chunks[0].opcodenum===0&&this.chunks.slice(1,this.chunks.length).every(function(obj){return obj.buf&&BufferUtil.isBuffer(obj.buf)&&Signature.isTxDER(obj.buf);});};Script.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===Opcode.OP_RETURN&&(this.chunks.length===1||this.chunks.length===2&&this.chunks[1].buf&&this.chunks[1].buf.length<=Script.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len);};Script.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut()||this.isWitnessScriptHashOut()||this.isWitnessPublicKeyHashOut()){if(_.isUndefined(this.chunks[1])){return Buffer.alloc(0);}else{return Buffer.from(this.chunks[1].buf);}}if(this.isPublicKeyHashOut()){return Buffer.from(this.chunks[2].buf);}throw new Error('Unrecognized script type to get data from');};Script.prototype.isPushOnly=function(){return _.every(this.chunks,function(chunk){return chunk.opcodenum<=Opcode.OP_16;});};Script.types={};Script.types.UNKNOWN='Unknown';Script.types.PUBKEY_OUT='Pay to public key';Script.types.PUBKEY_IN='Spend from public key';Script.types.PUBKEYHASH_OUT='Pay to public key hash';Script.types.PUBKEYHASH_IN='Spend from public key hash';Script.types.SCRIPTHASH_OUT='Pay to script hash';Script.types.SCRIPTHASH_IN='Spend from script hash';Script.types.MULTISIG_OUT='Pay to multisig';Script.types.MULTISIG_IN='Spend from multisig';Script.types.DATA_OUT='Data push';Script.OP_RETURN_STANDARD_SIZE=80;Script.prototype.classify=function(){if(this._isInput){return this.classifyInput();}else if(this._isOutput){return this.classifyOutput();}else{var outputType=this.classifyOutput();return outputType!=Script.types.UNKNOWN?outputType:this.classifyInput();}};Script.outputIdentifiers={};Script.outputIdentifiers.PUBKEY_OUT=Script.prototype.isPublicKeyOut;Script.outputIdentifiers.PUBKEYHASH_OUT=Script.prototype.isPublicKeyHashOut;Script.outputIdentifiers.MULTISIG_OUT=Script.prototype.isMultisigOut;Script.outputIdentifiers.SCRIPTHASH_OUT=Script.prototype.isScriptHashOut;Script.outputIdentifiers.DATA_OUT=Script.prototype.isDataOut;Script.prototype.classifyOutput=function(){for(var type in Script.outputIdentifiers){if(Script.outputIdentifiers[type].bind(this)()){return Script.types[type];}}return Script.types.UNKNOWN;};Script.inputIdentifiers={};Script.inputIdentifiers.PUBKEY_IN=Script.prototype.isPublicKeyIn;Script.inputIdentifiers.PUBKEYHASH_IN=Script.prototype.isPublicKeyHashIn;Script.inputIdentifiers.MULTISIG_IN=Script.prototype.isMultisigIn;Script.inputIdentifiers.SCRIPTHASH_IN=Script.prototype.isScriptHashIn;Script.prototype.classifyInput=function(){for(var type in Script.inputIdentifiers){if(Script.inputIdentifiers[type].bind(this)()){return Script.types[type];}}return Script.types.UNKNOWN;};Script.prototype.isStandard=function(){return this.classify()!==Script.types.UNKNOWN;};Script.prototype.prepend=function(obj){this._addByType(obj,true);return this;};Script.prototype.equals=function(script){$.checkState(script instanceof Script,'Must provide another script');if(this.chunks.length!==script.chunks.length){return false;}var i;for(i=0;i<this.chunks.length;i++){if(BufferUtil.isBuffer(this.chunks[i].buf)&&!BufferUtil.isBuffer(script.chunks[i].buf)){return false;}if(BufferUtil.isBuffer(this.chunks[i].buf)&&!BufferUtil.equals(this.chunks[i].buf,script.chunks[i].buf)){return false;}else if(this.chunks[i].opcodenum!==script.chunks[i].opcodenum){return false;}}return true;};Script.prototype.add=function(obj){this._addByType(obj,false);return this;};Script.prototype._addByType=function(obj,prepend){if(typeof obj==='string'){this._addOpcode(obj,prepend);}else if(typeof obj==='number'){this._addOpcode(obj,prepend);}else if(obj instanceof Opcode){this._addOpcode(obj,prepend);}else if(BufferUtil.isBuffer(obj)){this._addBuffer(obj,prepend);}else if(obj instanceof Script){this.chunks=this.chunks.concat(obj.chunks);}else if((0,_typeof2["default"])(obj)==='object'){this._insertAtPosition(obj,prepend);}else{throw new Error('Invalid script chunk');}};Script.prototype._insertAtPosition=function(op,prepend){if(prepend){this.chunks.unshift(op);}else{this.chunks.push(op);}};Script.prototype._addOpcode=function(opcode,prepend){var op;if(typeof opcode==='number'){op=opcode;}else if(opcode instanceof Opcode){op=opcode.toNumber();}else{op=Opcode(opcode).toNumber();}this._insertAtPosition({opcodenum:op},prepend);return this;};Script.prototype._addBuffer=function(buf,prepend){var opcodenum;var len=buf.length;if(len>=0&&len<Opcode.OP_PUSHDATA1){opcodenum=len;}else if(len<Math.pow(2,8)){opcodenum=Opcode.OP_PUSHDATA1;}else if(len<Math.pow(2,16)){opcodenum=Opcode.OP_PUSHDATA2;}else if(len<Math.pow(2,32)){opcodenum=Opcode.OP_PUSHDATA4;}else{throw new Error('You can\'t push that much data');}this._insertAtPosition({buf:buf,len:len,opcodenum:opcodenum},prepend);return this;};Script.prototype.hasCodeseparators=function(){for(var i=0;i<this.chunks.length;i++){if(this.chunks[i].opcodenum===Opcode.OP_CODESEPARATOR){return true;}}return false;};Script.prototype.removeCodeseparators=function(){var chunks=[];for(var i=0;i<this.chunks.length;i++){if(this.chunks[i].opcodenum!==Opcode.OP_CODESEPARATOR){chunks.push(this.chunks[i]);}}this.chunks=chunks;return this;};Script.buildMultisigOut=function(publicKeys,threshold,opts){$.checkArgument(threshold<=publicKeys.length,'Number of required signatures must be less than or equal to the number of public keys');opts=opts||{};var script=new Script();script.add(Opcode.smallInt(threshold));publicKeys=_.map(publicKeys,PublicKey);var sorted=publicKeys;if(!opts.noSorting){sorted=_.sortBy(publicKeys,function(publicKey){return publicKey.toString('hex');});}for(var i=0;i<sorted.length;i++){var publicKey=sorted[i];script.add(publicKey.toBuffer());}script.add(Opcode.smallInt(publicKeys.length));script.add(Opcode.OP_CHECKMULTISIG);return script;};Script.buildWitnessMultisigOutFromScript=function(script){if(script instanceof Script){var s=new Script();s.add(Opcode.OP_0);s.add(Hash.sha256(script.toBuffer()));return s;}else{throw new TypeError('First argument is expected to be a p2sh script');}};Script.buildMultisigIn=function(pubkeys,threshold,signatures,opts){$.checkArgument(_.isArray(pubkeys));$.checkArgument(_.isNumber(threshold));$.checkArgument(_.isArray(signatures));opts=opts||{};var s=new Script();s.add(Opcode.OP_0);_.each(signatures,function(signature){$.checkArgument(BufferUtil.isBuffer(signature),'Signatures must be an array of Buffers');s.add(signature);});return s;};Script.buildP2SHMultisigIn=function(pubkeys,threshold,signatures,opts){$.checkArgument(_.isArray(pubkeys));$.checkArgument(_.isNumber(threshold));$.checkArgument(_.isArray(signatures));opts=opts||{};var s=new Script();s.add(Opcode.OP_0);_.each(signatures,function(signature){$.checkArgument(BufferUtil.isBuffer(signature),'Signatures must be an array of Buffers');s.add(signature);});s.add((opts.cachedMultisig||Script.buildMultisigOut(pubkeys,threshold,opts)).toBuffer());return s;};Script.buildPublicKeyHashOut=function(to){$.checkArgument(!_.isUndefined(to));$.checkArgument(to instanceof PublicKey||to instanceof Address||_.isString(to));if(to instanceof PublicKey){to=to.toAddress();}else if(_.isString(to)){to=new Address(to);}var s=new Script();s.add(Opcode.OP_DUP).add(Opcode.OP_HASH160).add(to.hashBuffer).add(Opcode.OP_EQUALVERIFY).add(Opcode.OP_CHECKSIG);s._network=to.network;return s;};Script.buildWitnessV0Out=function(to){$.checkArgument(!_.isUndefined(to));$.checkArgument(to instanceof Address||_.isString(to));if(_.isString(to)){to=new Address(to);}var s=new Script();s.add(Opcode.OP_0).add(to.hashBuffer);s._network=to.network;return s;};Script.buildPublicKeyOut=function(pubkey){$.checkArgument(pubkey instanceof PublicKey);var s=new Script();s.add(pubkey.toBuffer()).add(Opcode.OP_CHECKSIG);return s;};Script.buildDataOut=function(data,encoding){$.checkArgument(_.isUndefined(data)||_.isString(data)||BufferUtil.isBuffer(data));if(_.isString(data)){data=Buffer.from(data,encoding);}var s=new Script();s.add(Opcode.OP_RETURN);if(!_.isUndefined(data)){s.add(data);}return s;};Script.buildScriptHashOut=function(script){$.checkArgument(script instanceof Script||script instanceof Address&&script.isPayToScriptHash());var s=new Script();s.add(Opcode.OP_HASH160).add(script instanceof Address?script.hashBuffer:Hash.sha256ripemd160(script.toBuffer())).add(Opcode.OP_EQUAL);s._network=script._network||script.network;return s;};Script.buildPublicKeyIn=function(signature,sigtype){$.checkArgument(signature instanceof Signature||BufferUtil.isBuffer(signature));$.checkArgument(_.isUndefined(sigtype)||_.isNumber(sigtype));if(signature instanceof Signature){signature=signature.toBuffer();}var script=new Script();script.add(BufferUtil.concat([signature,BufferUtil.integerAsSingleByteBuffer(sigtype||Signature.SIGHASH_ALL)]));return script;};Script.buildPublicKeyHashIn=function(publicKey,signature,sigtype){$.checkArgument(signature instanceof Signature||BufferUtil.isBuffer(signature));$.checkArgument(_.isUndefined(sigtype)||_.isNumber(sigtype));if(signature instanceof Signature){signature=signature.toBuffer();}var script=new Script().add(BufferUtil.concat([signature,BufferUtil.integerAsSingleByteBuffer(sigtype||Signature.SIGHASH_ALL)])).add(new PublicKey(publicKey).toBuffer());return script;};Script.empty=function(){return new Script();};Script.prototype.toScriptHashOut=function(){return Script.buildScriptHashOut(this);};Script.fromAddress=function(address){address=Address(address);if(address.isPayToScriptHash()){return Script.buildScriptHashOut(address);}else if(address.isPayToPublicKeyHash()){return Script.buildPublicKeyHashOut(address);}else if(address.isPayToWitnessPublicKeyHash()){return Script.buildWitnessV0Out(address);}else if(address.isPayToWitnessScriptHash()){return Script.buildWitnessV0Out(address);}throw new errors.Script.UnrecognizedAddress(address);};Script.prototype.getAddressInfo=function(opts){if(this._isInput){return this._getInputAddressInfo();}else if(this._isOutput){return this._getOutputAddressInfo();}else{var info=this._getOutputAddressInfo();if(!info){return this._getInputAddressInfo();}return info;}};Script.prototype._getOutputAddressInfo=function(){var info={};if(this.isScriptHashOut()){info.hashBuffer=this.getData();info.type=Address.PayToScriptHash;}else if(this.isPublicKeyHashOut()){info.hashBuffer=this.getData();info.type=Address.PayToPublicKeyHash;}else if(this.isWitnessScriptHashOut()){info.hashBuffer=this.getData();info.type=Address.PayToWitnessScriptHash;}else if(this.isWitnessPublicKeyHashOut()){info.hashBuffer=this.getData();info.type=Address.PayToWitnessPublicKeyHash;}else{return false;}return info;};Script.prototype._getInputAddressInfo=function(){var info={};if(this.isPublicKeyHashIn()){info.hashBuffer=Hash.sha256ripemd160(this.chunks[1].buf);info.type=Address.PayToPublicKeyHash;}else if(this.isScriptHashIn()){info.hashBuffer=Hash.sha256ripemd160(this.chunks[this.chunks.length-1].buf);info.type=Address.PayToScriptHash;}else{return false;}return info;};Script.prototype.toAddress=function(network){var info=this.getAddressInfo();if(!info){return false;}info.network=Networks.get(network)||this._network||Networks.defaultNetwork;return new Address(info);};Script.prototype.findAndDelete=function(script){var buf=script.toBuffer();var hex=buf.toString('hex');for(var i=0;i<this.chunks.length;i++){var script2=Script({chunks:[this.chunks[i]]});var buf2=script2.toBuffer();var hex2=buf2.toString('hex');if(hex===hex2){this.chunks.splice(i,1);}}return this;};Script.prototype.checkMinimalPush=function(i){var chunk=this.chunks[i];var buf=chunk.buf;var opcodenum=chunk.opcodenum;if(!buf){return true;}if(buf.length===0){return opcodenum===Opcode.OP_0;}else if(buf.length===1&&buf[0]>=1&&buf[0]<=16){return opcodenum===Opcode.OP_1+(buf[0]-1);}else if(buf.length===1&&buf[0]===0x81){return opcodenum===Opcode.OP_1NEGATE;}else if(buf.length<=75){return opcodenum===buf.length;}else if(buf.length<=255){return opcodenum===Opcode.OP_PUSHDATA1;}else if(buf.length<=65535){return opcodenum===Opcode.OP_PUSHDATA2;}return true;};Script.prototype._decodeOP_N=function(opcode){if(opcode===Opcode.OP_0){return 0;}else if(opcode>=Opcode.OP_1&&opcode<=Opcode.OP_16){return opcode-(Opcode.OP_1-1);}else{throw new Error('Invalid opcode: '+JSON.stringify(opcode));}};Script.prototype.getSignatureOperationsCount=function(accurate){accurate=_.isUndefined(accurate)?true:accurate;var self=this;var n=0;var lastOpcode=Opcode.OP_INVALIDOPCODE;_.each(self.chunks,function getChunk(chunk){var opcode=chunk.opcodenum;if(opcode==Opcode.OP_CHECKSIG||opcode==Opcode.OP_CHECKSIGVERIFY){n++;}else if(opcode==Opcode.OP_CHECKMULTISIG||opcode==Opcode.OP_CHECKMULTISIGVERIFY){if(accurate&&lastOpcode>=Opcode.OP_1&&lastOpcode<=Opcode.OP_16){n+=self._decodeOP_N(lastOpcode);}else{n+=20;}}lastOpcode=opcode;});return n;};module.exports=Script;

}).call(this,require("buffer").Buffer)

},{"../address":74,"../crypto/hash":77,"../crypto/signature":80,"../encoding/bufferreader":84,"../encoding/bufferwriter":85,"../errors":86,"../networks":90,"../opcode":91,"../publickey":93,"../util/buffer":111,"../util/js":112,"../util/preconditions":113,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1133,"lodash":471}],95:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var Script=require('./script');var Opcode=require('../opcode');var BN=require('../crypto/bn');var Hash=require('../crypto/hash');var Signature=require('../crypto/signature');var PublicKey=require('../publickey');var Interpreter=function Interpreter(obj){if(!(this instanceof Interpreter)){return new Interpreter(obj);}if(obj){this.initialize();this.set(obj);}else{this.initialize();}};Interpreter.prototype.verifyWitnessProgram=function(version,program,witness,satoshis,flags){var scriptPubKey=new Script();var stack=[];if(version===0){if(program.length===32){if(witness.length===0){this.errstr='SCRIPT_ERR_WITNESS_PROGRAM_WITNESS_EMPTY';return false;}var scriptPubKeyBuffer=witness[witness.length-1];scriptPubKey=new Script(scriptPubKeyBuffer);var hash=Hash.sha256(scriptPubKeyBuffer);if(hash.toString('hex')!==program.toString('hex')){this.errstr='SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH';return false;}stack=witness.slice(0,-1);}else if(program.length===20){if(witness.length!==2){this.errstr='SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH';return false;}scriptPubKey.add(Opcode.OP_DUP);scriptPubKey.add(Opcode.OP_HASH160);scriptPubKey.add(program);scriptPubKey.add(Opcode.OP_EQUALVERIFY);scriptPubKey.add(Opcode.OP_CHECKSIG);stack=witness;}else{this.errstr='SCRIPT_ERR_WITNESS_PROGRAM_WRONG_LENGTH';return false;}}else if(flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM){this.errstr='SCRIPT_ERR_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM';return false;}else{return true;}this.initialize();this.set({script:scriptPubKey,stack:stack,sigversion:1,satoshis:satoshis,flags:flags});if(!this.evaluate()){return false;}if(this.stack.length!==1){this.errstr='SCRIPT_ERR_EVAL_FALSE';return false;}var buf=this.stack[this.stack.length-1];if(!Interpreter.castToBool(buf)){this.errstr='SCRIPT_ERR_EVAL_FALSE_IN_STACK';return false;}return true;};Interpreter.prototype.verify=function(scriptSig,scriptPubkey,tx,nin,flags,witness,satoshis){var Transaction=require('../transaction');if(_.isUndefined(tx)){tx=new Transaction();}if(_.isUndefined(nin)){nin=0;}if(_.isUndefined(flags)){flags=0;}if(_.isUndefined(witness)){witness=null;}if(_.isUndefined(satoshis)){satoshis=0;}this.set({script:scriptSig,tx:tx,nin:nin,sigversion:0,satoshis:0,flags:flags});var stackCopy;if((flags&Interpreter.SCRIPT_VERIFY_SIGPUSHONLY)!==0&&!scriptSig.isPushOnly()){this.errstr='SCRIPT_ERR_SIG_PUSHONLY';return false;}if(!this.evaluate()){return false;}if(flags&Interpreter.SCRIPT_VERIFY_P2SH){stackCopy=this.stack.slice();}var stack=this.stack;this.initialize();this.set({script:scriptPubkey,stack:stack,tx:tx,nin:nin,flags:flags});if(!this.evaluate()){return false;}if(this.stack.length===0){this.errstr='SCRIPT_ERR_EVAL_FALSE_NO_RESULT';return false;}var buf=this.stack[this.stack.length-1];if(!Interpreter.castToBool(buf)){this.errstr='SCRIPT_ERR_EVAL_FALSE_IN_STACK';return false;}var hadWitness=false;if(flags&Interpreter.SCRIPT_VERIFY_WITNESS){var witnessValues={};if(scriptPubkey.isWitnessProgram(witnessValues)){hadWitness=true;if(scriptSig.toBuffer().length!==0){return false;}if(!this.verifyWitnessProgram(witnessValues.version,witnessValues.program,witness,satoshis,this.flags)){return false;}}}if(flags&Interpreter.SCRIPT_VERIFY_P2SH&&scriptPubkey.isScriptHashOut()){if(!scriptSig.isPushOnly()){this.errstr='SCRIPT_ERR_SIG_PUSHONLY';return false;}if(stackCopy.length===0){throw new Error('internal error - stack copy empty');}var redeemScriptSerialized=stackCopy[stackCopy.length-1];var redeemScript=Script.fromBuffer(redeemScriptSerialized);stackCopy.pop();this.initialize();this.set({script:redeemScript,stack:stackCopy,tx:tx,nin:nin,flags:flags});if(!this.evaluate()){return false;}if(stackCopy.length===0){this.errstr='SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK';return false;}if(!Interpreter.castToBool(stackCopy[stackCopy.length-1])){this.errstr='SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK';return false;}if(flags&Interpreter.SCRIPT_VERIFY_WITNESS){var p2shWitnessValues={};if(redeemScript.isWitnessProgram(p2shWitnessValues)){hadWitness=true;var redeemScriptPush=new Script();redeemScriptPush.add(redeemScript.toBuffer());if(scriptSig.toHex()!==redeemScriptPush.toHex()){this.errstr='SCRIPT_ERR_WITNESS_MALLEATED_P2SH';return false;}if(!this.verifyWitnessProgram(p2shWitnessValues.version,p2shWitnessValues.program,witness,satoshis,this.flags)){return false;}stack=[stack[0]];}}}if((this.flags&Interpreter.SCRIPT_VERIFY_CLEANSTACK)!=0){if((this.flags&Interpreter.SCRIPT_VERIFY_P2SH)==0)throw'flags & SCRIPT_VERIFY_P2SH';if(stackCopy.length!=1){this.errstr='SCRIPT_ERR_CLEANSTACK';return false;}}if(this.flags&Interpreter.SCRIPT_VERIFY_WITNESS){if(!hadWitness&&witness.length>0){this.errstr='SCRIPT_ERR_WITNESS_UNEXPECTED';return false;}}return true;};module.exports=Interpreter;Interpreter.prototype.initialize=function(obj){this.stack=[];this.altstack=[];this.pc=0;this.satoshis=0;this.sigversion=0;this.pbegincodehash=0;this.nOpCount=0;this.vfExec=[];this.errstr='';this.flags=0;};Interpreter.prototype.set=function(obj){this.script=obj.script||this.script;this.tx=obj.tx||this.tx;this.nin=typeof obj.nin!=='undefined'?obj.nin:this.nin;this.stack=obj.stack||this.stack;this.altstack=obj.altack||this.altstack;this.pc=typeof obj.pc!=='undefined'?obj.pc:this.pc;this.pbegincodehash=typeof obj.pbegincodehash!=='undefined'?obj.pbegincodehash:this.pbegincodehash;this.sigversion=typeof obj.sigversion!=='undefined'?obj.sigversion:this.sigversion;this.satoshis=typeof obj.satoshis!=='undefined'?obj.satoshis:this.satoshis;this.nOpCount=typeof obj.nOpCount!=='undefined'?obj.nOpCount:this.nOpCount;this.vfExec=obj.vfExec||this.vfExec;this.errstr=obj.errstr||this.errstr;this.flags=typeof obj.flags!=='undefined'?obj.flags:this.flags;};Interpreter["true"]=Buffer.from([1]);Interpreter["false"]=Buffer.from([]);Interpreter.MAX_SCRIPT_ELEMENT_SIZE=520;Interpreter.LOCKTIME_THRESHOLD=500000000;Interpreter.LOCKTIME_THRESHOLD_BN=new BN(Interpreter.LOCKTIME_THRESHOLD);Interpreter.SCRIPT_VERIFY_NONE=0;Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM=1<<12;Interpreter.SCRIPT_VERIFY_P2SH=1<<0;Interpreter.SCRIPT_VERIFY_STRICTENC=1<<1;Interpreter.SCRIPT_VERIFY_DERSIG=1<<2;Interpreter.SCRIPT_VERIFY_LOW_S=1<<3;Interpreter.SCRIPT_VERIFY_NULLDUMMY=1<<4;Interpreter.SCRIPT_VERIFY_SIGPUSHONLY=1<<5;Interpreter.SCRIPT_VERIFY_MINIMALDATA=1<<6;Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=1<<7;Interpreter.SCRIPT_VERIFY_CLEANSTACK=1<<8,Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=1<<9;Interpreter.SCRIPT_VERIFY_WITNESS=1<<10;Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=1<<11;Interpreter.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY=1<<10;Interpreter.SCRIPT_VERIFY_MINIMALIF=1<<13;Interpreter.SCRIPT_VERIFY_NULLFAIL=1<<14;Interpreter.SCRIPT_VERIFY_WITNESS_PUBKEYTYPE=1<<15;Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID=1<<16;Interpreter.SCRIPT_ENABLE_REPLAY_PROTECTION=1<<17;Interpreter.SCRIPT_ENABLE_MONOLITH_OPCODES=1<<18;Interpreter.SEQUENCE_LOCKTIME_DISABLE_FLAG=1<<31;Interpreter.SEQUENCE_LOCKTIME_TYPE_FLAG=1<<22;Interpreter.SEQUENCE_LOCKTIME_MASK=0x0000ffff;Interpreter.castToBool=function(buf){for(var i=0;i<buf.length;i++){if(buf[i]!==0){if(i===buf.length-1&&buf[i]===0x80){return false;}return true;}}return false;};Interpreter.prototype.checkSignatureEncoding=function(buf){var sig;if(buf.length==0){return true;}if((this.flags&(Interpreter.SCRIPT_VERIFY_DERSIG|Interpreter.SCRIPT_VERIFY_LOW_S|Interpreter.SCRIPT_VERIFY_STRICTENC))!==0&&!Signature.isTxDER(buf)){this.errstr='SCRIPT_ERR_SIG_DER_INVALID_FORMAT';return false;}else if((this.flags&Interpreter.SCRIPT_VERIFY_LOW_S)!==0){sig=Signature.fromTxFormat(buf);if(!sig.hasLowS()){this.errstr='SCRIPT_ERR_SIG_DER_HIGH_S';return false;}}else if((this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)!==0){sig=Signature.fromTxFormat(buf);if(!sig.hasDefinedHashtype()){this.errstr='SCRIPT_ERR_SIG_HASHTYPE';return false;}}return true;};Interpreter.prototype.checkPubkeyEncoding=function(buf){if((this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)!==0&&!PublicKey.isValid(buf)){this.errstr='SCRIPT_ERR_PUBKEYTYPE';return false;}if((this.flags&Interpreter.SCRIPT_VERIFY_WITNESS_PUBKEYTYPE)!=0&&this.sigversion==1&&!PublicKey.fromBuffer(buf).compressed){this.errstr='SCRIPT_ERR_WITNESS_PUBKEYTYPE';return false;}return true;};Interpreter.prototype.evaluate=function(){if(this.script.toBuffer().length>10000){this.errstr='SCRIPT_ERR_SCRIPT_SIZE';return false;}try{while(this.pc<this.script.chunks.length){var fSuccess=this.step();if(!fSuccess){return false;}}if(this.stack.length+this.altstack.length>1000){this.errstr='SCRIPT_ERR_STACK_SIZE';return false;}}catch(e){this.errstr='SCRIPT_ERR_UNKNOWN_ERROR: '+e;return false;}if(this.vfExec.length>0){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}return true;};Interpreter.prototype.checkLockTime=function(nLockTime){if(!(this.tx.nLockTime<Interpreter.LOCKTIME_THRESHOLD&&nLockTime.lt(Interpreter.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=Interpreter.LOCKTIME_THRESHOLD&&nLockTime.gte(Interpreter.LOCKTIME_THRESHOLD_BN))){return false;}if(nLockTime.gt(new BN(this.tx.nLockTime))){return false;}if(!this.tx.inputs[this.nin].isFinal()){return false;}return true;};Interpreter.prototype.checkSequence=function(nSequence){var txToSequence=this.tx.inputs[this.nin].sequenceNumber;if(this.tx.version<2){return false;}if(txToSequence&SEQUENCE_LOCKTIME_DISABLE_FLAG){return false;}var nLockTimeMask=Interpreter.SEQUENCE_LOCKTIME_TYPE_FLAG|Interpreter.SEQUENCE_LOCKTIME_MASK;var txToSequenceMasked=new BN(txToSequence&nLockTimeMask);var nSequenceMasked=nSequence.and(nLockTimeMask);var SEQUENCE_LOCKTIME_TYPE_FLAG_BN=new BN(Interpreter.SEQUENCE_LOCKTIME_TYPE_FLAG);if(!(txToSequenceMasked.lt(SEQUENCE_LOCKTIME_TYPE_FLAG_BN)&&nSequenceMasked.lt(SEQUENCE_LOCKTIME_TYPE_FLAG_BN)||txToSequenceMasked.gte(SEQUENCE_LOCKTIME_TYPE_FLAG_BN)&&nSequenceMasked.gte(SEQUENCE_LOCKTIME_TYPE_FLAG_BN))){return false;}if(nSequenceMasked.gt(txToSequenceMasked)){return false;}return true;};Interpreter.prototype.step=function(){var fRequireMinimal=(this.flags&Interpreter.SCRIPT_VERIFY_MINIMALDATA)!==0;var fExec=this.vfExec.indexOf(false)===-1;var buf,buf1,buf2,spliced,n,x1,x2,bn,bn1,bn2,bufSig,bufPubkey,subscript;var sig,pubkey;var fValue,fSuccess;var chunk=this.script.chunks[this.pc];this.pc++;var opcodenum=chunk.opcodenum;if(_.isUndefined(opcodenum)){this.errstr='SCRIPT_ERR_UNDEFINED_OPCODE';return false;}if(chunk.buf&&chunk.buf.length>Interpreter.MAX_SCRIPT_ELEMENT_SIZE){this.errstr='SCRIPT_ERR_PUSH_SIZE';return false;}if(opcodenum>Opcode.OP_16&&++this.nOpCount>201){this.errstr='SCRIPT_ERR_OP_COUNT';return false;}if(opcodenum===Opcode.OP_CAT||opcodenum===Opcode.OP_SUBSTR||opcodenum===Opcode.OP_LEFT||opcodenum===Opcode.OP_RIGHT||opcodenum===Opcode.OP_INVERT||opcodenum===Opcode.OP_AND||opcodenum===Opcode.OP_OR||opcodenum===Opcode.OP_XOR||opcodenum===Opcode.OP_2MUL||opcodenum===Opcode.OP_2DIV||opcodenum===Opcode.OP_MUL||opcodenum===Opcode.OP_DIV||opcodenum===Opcode.OP_MOD||opcodenum===Opcode.OP_LSHIFT||opcodenum===Opcode.OP_RSHIFT){this.errstr='SCRIPT_ERR_DISABLED_OPCODE';return false;}if(fExec&&0<=opcodenum&&opcodenum<=Opcode.OP_PUSHDATA4){if(fRequireMinimal&&!this.script.checkMinimalPush(this.pc-1)){this.errstr='SCRIPT_ERR_MINIMALDATA';return false;}if(!chunk.buf){this.stack.push(Interpreter["false"]);}else if(chunk.len!==chunk.buf.length){throw new Error('Length of push value not equal to length of data');}else{this.stack.push(chunk.buf);}}else if(fExec||Opcode.OP_IF<=opcodenum&&opcodenum<=Opcode.OP_ENDIF){switch(opcodenum){case Opcode.OP_1NEGATE:case Opcode.OP_1:case Opcode.OP_2:case Opcode.OP_3:case Opcode.OP_4:case Opcode.OP_5:case Opcode.OP_6:case Opcode.OP_7:case Opcode.OP_8:case Opcode.OP_9:case Opcode.OP_10:case Opcode.OP_11:case Opcode.OP_12:case Opcode.OP_13:case Opcode.OP_14:case Opcode.OP_15:case Opcode.OP_16:{n=opcodenum-(Opcode.OP_1-1);buf=new BN(n).toScriptNumBuffer();this.stack.push(buf);}break;case Opcode.OP_NOP:break;case Opcode.OP_NOP2:case Opcode.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS){this.errstr='SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS';return false;}break;}if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nLockTime=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal,5);if(nLockTime.lt(new BN(0))){this.errstr='SCRIPT_ERR_NEGATIVE_LOCKTIME';return false;}if(!this.checkLockTime(nLockTime)){this.errstr='SCRIPT_ERR_UNSATISFIED_LOCKTIME';return false;}break;case Opcode.OP_NOP3:case Opcode.OP_CHECKSEQUENCEVERIFY:if(!(this.flags&Interpreter.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY)){if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS){this.errstr='SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS';return false;}break;}if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nSequence=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal,5);if(nSequence.lt(new BN(0))){this.errstr='SCRIPT_ERR_NEGATIVE_LOCKTIME';return false;}if((nSequence&Interpreter.SEQUENCE_LOCKTIME_DISABLE_FLAG)!=0){break;}if(!this.checkSequence(nSequence)){this.errstr='SCRIPT_ERR_UNSATISFIED_LOCKTIME';return false;}break;case Opcode.OP_NOP1:case Opcode.OP_NOP4:case Opcode.OP_NOP5:case Opcode.OP_NOP6:case Opcode.OP_NOP7:case Opcode.OP_NOP8:case Opcode.OP_NOP9:case Opcode.OP_NOP10:{if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS){this.errstr='SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS';return false;}}break;case Opcode.OP_IF:case Opcode.OP_NOTIF:{fValue=false;if(fExec){if(this.stack.length<1){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}buf=this.stack[this.stack.length-1];if(this.flags&Interpreter.SCRIPT_VERIFY_MINIMALIF){buf=this.stack[this.stack.length-1];if(buf.length>1){this.errstr='SCRIPT_ERR_MINIMALIF';return false;}if(buf.length==1&&buf[0]!=1){this.errstr='SCRIPT_ERR_MINIMALIF';return false;}}fValue=Interpreter.castToBool(buf);if(opcodenum===Opcode.OP_NOTIF){fValue=!fValue;}this.stack.pop();}this.vfExec.push(fValue);}break;case Opcode.OP_ELSE:{if(this.vfExec.length===0){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];}break;case Opcode.OP_ENDIF:{if(this.vfExec.length===0){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}this.vfExec.pop();}break;case Opcode.OP_VERIFY:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];fValue=Interpreter.castToBool(buf);if(fValue){this.stack.pop();}else{this.errstr='SCRIPT_ERR_VERIFY';return false;}}break;case Opcode.OP_RETURN:{this.errstr='SCRIPT_ERR_OP_RETURN';return false;}break;case Opcode.OP_TOALTSTACK:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.altstack.push(this.stack.pop());}break;case Opcode.OP_FROMALTSTACK:{if(this.altstack.length<1){this.errstr='SCRIPT_ERR_INVALID_ALTSTACK_OPERATION';return false;}this.stack.push(this.altstack.pop());}break;case Opcode.OP_2DROP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.pop();this.stack.pop();}break;case Opcode.OP_2DUP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-2];buf2=this.stack[this.stack.length-1];this.stack.push(buf1);this.stack.push(buf2);}break;case Opcode.OP_3DUP:{if(this.stack.length<3){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-3];buf2=this.stack[this.stack.length-2];var buf3=this.stack[this.stack.length-1];this.stack.push(buf1);this.stack.push(buf2);this.stack.push(buf3);}break;case Opcode.OP_2OVER:{if(this.stack.length<4){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-4];buf2=this.stack[this.stack.length-3];this.stack.push(buf1);this.stack.push(buf2);}break;case Opcode.OP_2ROT:{if(this.stack.length<6){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}spliced=this.stack.splice(this.stack.length-6,2);this.stack.push(spliced[0]);this.stack.push(spliced[1]);}break;case Opcode.OP_2SWAP:{if(this.stack.length<4){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}spliced=this.stack.splice(this.stack.length-4,2);this.stack.push(spliced[0]);this.stack.push(spliced[1]);}break;case Opcode.OP_IFDUP:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];fValue=Interpreter.castToBool(buf);if(fValue){this.stack.push(buf);}}break;case Opcode.OP_DEPTH:{buf=new BN(this.stack.length).toScriptNumBuffer();this.stack.push(buf);}break;case Opcode.OP_DROP:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.pop();}break;case Opcode.OP_DUP:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.push(this.stack[this.stack.length-1]);}break;case Opcode.OP_NIP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.splice(this.stack.length-2,1);}break;case Opcode.OP_OVER:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.push(this.stack[this.stack.length-2]);}break;case Opcode.OP_PICK:case Opcode.OP_ROLL:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];bn=BN.fromScriptNumBuffer(buf,fRequireMinimal);n=bn.toNumber();this.stack.pop();if(n<0||n>=this.stack.length){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-n-1];if(opcodenum===Opcode.OP_ROLL){this.stack.splice(this.stack.length-n-1,1);}this.stack.push(buf);}break;case Opcode.OP_ROT:{if(this.stack.length<3){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}x1=this.stack[this.stack.length-3];x2=this.stack[this.stack.length-2];var x3=this.stack[this.stack.length-1];this.stack[this.stack.length-3]=x2;this.stack[this.stack.length-2]=x3;this.stack[this.stack.length-1]=x1;}break;case Opcode.OP_SWAP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}x1=this.stack[this.stack.length-2];x2=this.stack[this.stack.length-1];this.stack[this.stack.length-2]=x2;this.stack[this.stack.length-1]=x1;}break;case Opcode.OP_TUCK:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.splice(this.stack.length-2,0,this.stack[this.stack.length-1]);}break;case Opcode.OP_SIZE:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bn=new BN(this.stack[this.stack.length-1].length);this.stack.push(bn.toScriptNumBuffer());}break;case Opcode.OP_EQUAL:case Opcode.OP_EQUALVERIFY:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-2];buf2=this.stack[this.stack.length-1];var fEqual=buf1.toString('hex')===buf2.toString('hex');this.stack.pop();this.stack.pop();this.stack.push(fEqual?Interpreter["true"]:Interpreter["false"]);if(opcodenum===Opcode.OP_EQUALVERIFY){if(fEqual){this.stack.pop();}else{this.errstr='SCRIPT_ERR_EQUALVERIFY';return false;}}}break;case Opcode.OP_1ADD:case Opcode.OP_1SUB:case Opcode.OP_NEGATE:case Opcode.OP_ABS:case Opcode.OP_NOT:case Opcode.OP_0NOTEQUAL:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];bn=BN.fromScriptNumBuffer(buf,fRequireMinimal);switch(opcodenum){case Opcode.OP_1ADD:bn=bn.add(BN.One);break;case Opcode.OP_1SUB:bn=bn.sub(BN.One);break;case Opcode.OP_NEGATE:bn=bn.neg();break;case Opcode.OP_ABS:if(bn.cmp(BN.Zero)<0){bn=bn.neg();}break;case Opcode.OP_NOT:bn=new BN((bn.cmp(BN.Zero)===0)+0);break;case Opcode.OP_0NOTEQUAL:bn=new BN((bn.cmp(BN.Zero)!==0)+0);break;}this.stack.pop();this.stack.push(bn.toScriptNumBuffer());}break;case Opcode.OP_ADD:case Opcode.OP_SUB:case Opcode.OP_BOOLAND:case Opcode.OP_BOOLOR:case Opcode.OP_NUMEQUAL:case Opcode.OP_NUMEQUALVERIFY:case Opcode.OP_NUMNOTEQUAL:case Opcode.OP_LESSTHAN:case Opcode.OP_GREATERTHAN:case Opcode.OP_LESSTHANOREQUAL:case Opcode.OP_GREATERTHANOREQUAL:case Opcode.OP_MIN:case Opcode.OP_MAX:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bn1=BN.fromScriptNumBuffer(this.stack[this.stack.length-2],fRequireMinimal);bn2=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal);bn=new BN(0);switch(opcodenum){case Opcode.OP_ADD:bn=bn1.add(bn2);break;case Opcode.OP_SUB:bn=bn1.sub(bn2);break;case Opcode.OP_BOOLAND:bn=new BN((bn1.cmp(BN.Zero)!==0&&bn2.cmp(BN.Zero)!==0)+0);break;case Opcode.OP_BOOLOR:bn=new BN((bn1.cmp(BN.Zero)!==0||bn2.cmp(BN.Zero)!==0)+0);break;case Opcode.OP_NUMEQUAL:bn=new BN((bn1.cmp(bn2)===0)+0);break;case Opcode.OP_NUMEQUALVERIFY:bn=new BN((bn1.cmp(bn2)===0)+0);break;case Opcode.OP_NUMNOTEQUAL:bn=new BN((bn1.cmp(bn2)!==0)+0);break;case Opcode.OP_LESSTHAN:bn=new BN((bn1.cmp(bn2)<0)+0);break;case Opcode.OP_GREATERTHAN:bn=new BN((bn1.cmp(bn2)>0)+0);break;case Opcode.OP_LESSTHANOREQUAL:bn=new BN((bn1.cmp(bn2)<=0)+0);break;case Opcode.OP_GREATERTHANOREQUAL:bn=new BN((bn1.cmp(bn2)>=0)+0);break;case Opcode.OP_MIN:bn=bn1.cmp(bn2)<0?bn1:bn2;break;case Opcode.OP_MAX:bn=bn1.cmp(bn2)>0?bn1:bn2;break;}this.stack.pop();this.stack.pop();this.stack.push(bn.toScriptNumBuffer());if(opcodenum===Opcode.OP_NUMEQUALVERIFY){if(Interpreter.castToBool(this.stack[this.stack.length-1])){this.stack.pop();}else{this.errstr='SCRIPT_ERR_NUMEQUALVERIFY';return false;}}}break;case Opcode.OP_WITHIN:{if(this.stack.length<3){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bn1=BN.fromScriptNumBuffer(this.stack[this.stack.length-3],fRequireMinimal);bn2=BN.fromScriptNumBuffer(this.stack[this.stack.length-2],fRequireMinimal);var bn3=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal);fValue=bn2.cmp(bn1)<=0&&bn1.cmp(bn3)<0;this.stack.pop();this.stack.pop();this.stack.pop();this.stack.push(fValue?Interpreter["true"]:Interpreter["false"]);}break;case Opcode.OP_RIPEMD160:case Opcode.OP_SHA1:case Opcode.OP_SHA256:case Opcode.OP_HASH160:case Opcode.OP_HASH256:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];var bufHash;if(opcodenum===Opcode.OP_RIPEMD160){bufHash=Hash.ripemd160(buf);}else if(opcodenum===Opcode.OP_SHA1){bufHash=Hash.sha1(buf);}else if(opcodenum===Opcode.OP_SHA256){bufHash=Hash.sha256(buf);}else if(opcodenum===Opcode.OP_HASH160){bufHash=Hash.sha256ripemd160(buf);}else if(opcodenum===Opcode.OP_HASH256){bufHash=Hash.sha256sha256(buf);}this.stack.pop();this.stack.push(bufHash);}break;case Opcode.OP_CODESEPARATOR:{this.pbegincodehash=this.pc;}break;case Opcode.OP_CHECKSIG:case Opcode.OP_CHECKSIGVERIFY:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bufSig=this.stack[this.stack.length-2];bufPubkey=this.stack[this.stack.length-1];if(!this.checkSignatureEncoding(bufSig)||!this.checkPubkeyEncoding(bufPubkey)){return false;}subscript=new Script().set({chunks:this.script.chunks.slice(this.pbegincodehash)});var tmpScript=new Script().add(bufSig);subscript.findAndDelete(tmpScript);try{sig=Signature.fromTxFormat(bufSig);pubkey=PublicKey.fromBuffer(bufPubkey,false);fSuccess=this.tx.verifySignature(sig,pubkey,this.nin,subscript,this.sigversion,this.satoshis);}catch(e){fSuccess=false;}if(!fSuccess&&this.flags&Interpreter.SCRIPT_VERIFY_NULLFAIL&&bufSig.length){this.errstr='SCRIPT_ERR_NULLFAIL';return false;}this.stack.pop();this.stack.pop();this.stack.push(fSuccess?Interpreter["true"]:Interpreter["false"]);if(opcodenum===Opcode.OP_CHECKSIGVERIFY){if(fSuccess){this.stack.pop();}else{this.errstr='SCRIPT_ERR_CHECKSIGVERIFY';return false;}}}break;case Opcode.OP_CHECKMULTISIG:case Opcode.OP_CHECKMULTISIGVERIFY:{var i=1;if(this.stack.length<i){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nKeysCount=BN.fromScriptNumBuffer(this.stack[this.stack.length-i],fRequireMinimal).toNumber();if(nKeysCount<0||nKeysCount>20){this.errstr='SCRIPT_ERR_PUBKEY_COUNT';return false;}this.nOpCount+=nKeysCount;if(this.nOpCount>201){this.errstr='SCRIPT_ERR_OP_COUNT';return false;}var ikey=++i;i+=nKeysCount;var ikey2=nKeysCount+2;if(this.stack.length<i){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nSigsCount=BN.fromScriptNumBuffer(this.stack[this.stack.length-i],fRequireMinimal).toNumber();if(nSigsCount<0||nSigsCount>nKeysCount){this.errstr='SCRIPT_ERR_SIG_COUNT';return false;}var isig=++i;i+=nSigsCount;if(this.stack.length<i){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}subscript=new Script().set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var k=0;k<nSigsCount;k++){bufSig=this.stack[this.stack.length-isig-k];subscript.findAndDelete(new Script().add(bufSig));}fSuccess=true;while(fSuccess&&nSigsCount>0){bufSig=this.stack[this.stack.length-isig];bufPubkey=this.stack[this.stack.length-ikey];if(!this.checkSignatureEncoding(bufSig)||!this.checkPubkeyEncoding(bufPubkey)){return false;}var fOk;try{sig=Signature.fromTxFormat(bufSig);pubkey=PublicKey.fromBuffer(bufPubkey,false);fOk=this.tx.verifySignature(sig,pubkey,this.nin,subscript,this.sigversion,this.satoshis);}catch(e){fOk=false;}if(fOk){isig++;nSigsCount--;}ikey++;nKeysCount--;if(nSigsCount>nKeysCount){fSuccess=false;}}while(i-->1){if(!fSuccess&&this.flags&Interpreter.SCRIPT_VERIFY_NULLFAIL&&!ikey2&&this.stack[this.stack.length-1].length){this.errstr='SCRIPT_ERR_NULLFAIL';return false;}if(ikey2>0){ikey2--;}this.stack.pop();}if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}if(this.flags&Interpreter.SCRIPT_VERIFY_NULLDUMMY&&this.stack[this.stack.length-1].length){this.errstr='SCRIPT_ERR_SIG_NULLDUMMY';return false;}this.stack.pop();this.stack.push(fSuccess?Interpreter["true"]:Interpreter["false"]);if(opcodenum===Opcode.OP_CHECKMULTISIGVERIFY){if(fSuccess){this.stack.pop();}else{this.errstr='SCRIPT_ERR_CHECKMULTISIGVERIFY';return false;}}}break;default:this.errstr='SCRIPT_ERR_BAD_OPCODE';return false;}}return true;};

}).call(this,require("buffer").Buffer)

},{"../crypto/bn":75,"../crypto/hash":77,"../crypto/signature":80,"../opcode":91,"../publickey":93,"../transaction":97,"./script":96,"buffer":1133,"lodash":471}],97:[function(require,module,exports){
module.exports=require('./transaction');module.exports.Input=require('./input');module.exports.Output=require('./output');module.exports.UnspentOutput=require('./unspentoutput');module.exports.Signature=require('./signature');module.exports.Sighash=require('./sighash');module.exports.SighashWitness=require('./sighashwitness');

},{"./input":98,"./output":104,"./sighash":105,"./sighashwitness":106,"./signature":107,"./transaction":108,"./unspentoutput":109}],104:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var BN=require('../crypto/bn');var buffer=require('buffer');var bufferUtil=require('../util/buffer');var JSUtil=require('../util/js');var BufferWriter=require('../encoding/bufferwriter');var Script=require('../script');var $=require('../util/preconditions');var errors=require('../errors');var MAX_SAFE_INTEGER=0x1fffffffffffff;function Output(args){if(!(this instanceof Output)){return new Output(args);}if(_.isObject(args)){this.satoshis=args.satoshis;if(bufferUtil.isBuffer(args.script)){this._scriptBuffer=args.script;}else{var script;if(_.isString(args.script)&&JSUtil.isHexa(args.script)){script=Buffer.from(args.script,'hex');}else{script=args.script;}this.setScript(script);}}else{throw new TypeError('Unrecognized argument for Output');}}Object.defineProperty(Output.prototype,'script',{configurable:false,enumerable:true,get:function get(){if(this._script){return this._script;}else{this.setScriptFromBuffer(this._scriptBuffer);return this._script;}}});Object.defineProperty(Output.prototype,'satoshis',{configurable:false,enumerable:true,get:function get(){return this._satoshis;},set:function set(num){if(num instanceof BN){this._satoshisBN=num;this._satoshis=num.toNumber();}else if(_.isString(num)){this._satoshis=parseInt(num);this._satoshisBN=BN.fromNumber(this._satoshis);}else{$.checkArgument(JSUtil.isNaturalNumber(num),'Output satoshis is not a natural number');this._satoshisBN=BN.fromNumber(num);this._satoshis=num;}$.checkState(JSUtil.isNaturalNumber(this._satoshis),'Output satoshis is not a natural number');}});Output.prototype.invalidSatoshis=function(){if(this._satoshis>MAX_SAFE_INTEGER){return'transaction txout satoshis greater than max safe integer';}if(this._satoshis!==this._satoshisBN.toNumber()){return'transaction txout satoshis has corrupted value';}if(this._satoshis<0){return'transaction txout negative';}return false;};Output.prototype.toObject=Output.prototype.toJSON=function toObject(){var obj={satoshis:this.satoshis};obj.script=this._scriptBuffer.toString('hex');return obj;};Output.fromObject=function(data){return new Output(data);};Output.prototype.setScriptFromBuffer=function(buffer){this._scriptBuffer=buffer;try{this._script=Script.fromBuffer(this._scriptBuffer);this._script._isOutput=true;}catch(e){if(e instanceof errors.Script.InvalidBuffer){this._script=null;}else{throw e;}}};Output.prototype.setScript=function(script){if(script instanceof Script){this._scriptBuffer=script.toBuffer();this._script=script;this._script._isOutput=true;}else if(_.isString(script)){this._script=Script.fromString(script);this._scriptBuffer=this._script.toBuffer();this._script._isOutput=true;}else if(bufferUtil.isBuffer(script)){this.setScriptFromBuffer(script);}else{throw new TypeError('Invalid argument type: script');}return this;};Output.prototype.inspect=function(){var scriptStr;if(this.script){scriptStr=this.script.inspect();}else{scriptStr=this._scriptBuffer.toString('hex');}return'<Output ('+this.satoshis+' sats) '+scriptStr+'>';};Output.fromBufferReader=function(br){var obj={};obj.satoshis=br.readUInt64LEBN();var size=br.readVarintNum();if(size!==0){obj.script=br.read(size);}else{obj.script=Buffer.from([]);}return new Output(obj);};Output.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}writer.writeUInt64LEBN(this._satoshisBN);var script=this._scriptBuffer;writer.writeVarintNum(script.length);writer.write(script);return writer;};module.exports=Output;

}).call(this,require("buffer").Buffer)

},{"../crypto/bn":75,"../encoding/bufferwriter":85,"../errors":86,"../script":94,"../util/buffer":111,"../util/js":112,"../util/preconditions":113,"buffer":1133,"lodash":471}],106:[function(require,module,exports){
(function (Buffer){
'use strict';var Signature=require('../crypto/signature');var Script=require('../script');var Output=require('./output');var BufferReader=require('../encoding/bufferreader');var BufferWriter=require('../encoding/bufferwriter');var BN=require('../crypto/bn');var Hash=require('../crypto/hash');var ECDSA=require('../crypto/ecdsa');var $=require('../util/preconditions');var _=require('lodash');var sighash=function sighash(transaction,sighashType,inputNumber,scriptCode,satoshisBuffer){var hashPrevouts;var hashSequence;var hashOutputs;if(!(sighashType&Signature.SIGHASH_ANYONECANPAY)){var buffers=[];for(var n=0;n<transaction.inputs.length;n++){var input=transaction.inputs[n];var prevTxIdBuffer=new BufferReader(input.prevTxId).readReverse();buffers.push(prevTxIdBuffer);var outputIndexBuffer=Buffer.alloc(4);outputIndexBuffer.writeUInt32LE(input.outputIndex,0);buffers.push(outputIndexBuffer);}hashPrevouts=Hash.sha256sha256(Buffer.concat(buffers));}if(!(sighashType&Signature.SIGHASH_ANYONECANPAY)&&(sighashType&0x1f)!==Signature.SIGHASH_SINGLE&&(sighashType&0x1f)!==Signature.SIGHASH_NONE){var sequenceBuffers=[];for(var m=0;m<transaction.inputs.length;m++){var sequenceBuffer=Buffer.alloc(4);sequenceBuffer.writeUInt32LE(transaction.inputs[m].sequenceNumber,0);sequenceBuffers.push(sequenceBuffer);}hashSequence=Hash.sha256sha256(Buffer.concat(sequenceBuffers));}var outputWriter=new BufferWriter();if((sighashType&0x1f)!==Signature.SIGHASH_SINGLE&&(sighashType&0x1f)!==Signature.SIGHASH_NONE){for(var p=0;p<transaction.outputs.length;p++){transaction.outputs[p].toBufferWriter(outputWriter);}hashOutputs=Hash.sha256sha256(outputWriter.toBuffer());}else if((sighashType&0x1f)===Signature.SIGHASH_SINGLE&&inputNumber<transaction.outputs.length){transaction.outputs[inputNumber].toBufferWriter(outputWriter);hashOutputs=Hash.sha256sha256(outputWriter.toBuffer());}var writer=new BufferWriter();writer.writeUInt32LE(transaction.version);writer.write(hashPrevouts);writer.write(hashSequence);var outpointId=new BufferReader(transaction.inputs[inputNumber].prevTxId).readReverse();writer.write(outpointId);writer.writeUInt32LE(transaction.inputs[inputNumber].outputIndex);writer.write(scriptCode);writer.write(satoshisBuffer);writer.writeUInt32LE(transaction.inputs[inputNumber].sequenceNumber);writer.write(hashOutputs);writer.writeUInt32LE(transaction.nLockTime);writer.writeInt32LE(sighashType);return Hash.sha256sha256(writer.toBuffer());};function sign(transaction,privateKey,sighashType,inputIndex,scriptCode,satoshisBuffer){var hashbuf=sighash(transaction,sighashType,inputIndex,scriptCode,satoshisBuffer);var sig=ECDSA.sign(hashbuf,privateKey).set({nhashtype:sighashType});return sig;}function verify(transaction,signature,publicKey,inputIndex,scriptCode,satoshisBuffer){$.checkArgument(!_.isUndefined(transaction));$.checkArgument(!_.isUndefined(signature)&&!_.isUndefined(signature.nhashtype));var hashbuf=sighash(transaction,signature.nhashtype,inputIndex,scriptCode,satoshisBuffer);return ECDSA.verify(hashbuf,signature,publicKey);}module.exports={sighash:sighash,sign:sign,verify:verify};

}).call(this,require("buffer").Buffer)

},{"../crypto/bn":75,"../crypto/ecdsa":76,"../crypto/hash":77,"../crypto/signature":80,"../encoding/bufferreader":84,"../encoding/bufferwriter":85,"../script":94,"../util/preconditions":113,"./output":104,"buffer":1133,"lodash":471}],107:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var $=require('../util/preconditions');var inherits=require('inherits');var BufferUtil=require('../util/buffer');var JSUtil=require('../util/js');var PublicKey=require('../publickey');var errors=require('../errors');var Signature=require('../crypto/signature');function TransactionSignature(arg){if(!(this instanceof TransactionSignature)){return new TransactionSignature(arg);}if(arg instanceof TransactionSignature){return arg;}if(_.isObject(arg)){return this._fromObject(arg);}throw new errors.InvalidArgument('TransactionSignatures must be instantiated from an object');}inherits(TransactionSignature,Signature);TransactionSignature.prototype._fromObject=function(arg){this._checkObjectArgs(arg);this.publicKey=new PublicKey(arg.publicKey);this.prevTxId=BufferUtil.isBuffer(arg.prevTxId)?arg.prevTxId:Buffer.from(arg.prevTxId,'hex');this.outputIndex=arg.outputIndex;this.inputIndex=arg.inputIndex;this.signature=arg.signature instanceof Signature?arg.signature:BufferUtil.isBuffer(arg.signature)?Signature.fromBuffer(arg.signature):Signature.fromString(arg.signature);this.sigtype=arg.sigtype;return this;};TransactionSignature.prototype._checkObjectArgs=function(arg){$.checkArgument(PublicKey(arg.publicKey),'publicKey');$.checkArgument(!_.isUndefined(arg.inputIndex),'inputIndex');$.checkArgument(!_.isUndefined(arg.outputIndex),'outputIndex');$.checkState(_.isNumber(arg.inputIndex),'inputIndex must be a number');$.checkState(_.isNumber(arg.outputIndex),'outputIndex must be a number');$.checkArgument(arg.signature,'signature');$.checkArgument(arg.prevTxId,'prevTxId');$.checkState(arg.signature instanceof Signature||BufferUtil.isBuffer(arg.signature)||JSUtil.isHexa(arg.signature),'signature must be a buffer or hexa value');$.checkState(BufferUtil.isBuffer(arg.prevTxId)||JSUtil.isHexa(arg.prevTxId),'prevTxId must be a buffer or hexa value');$.checkArgument(arg.sigtype,'sigtype');$.checkState(_.isNumber(arg.sigtype),'sigtype must be a number');};TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function toObject(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString('hex'),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype};};TransactionSignature.fromObject=function(object){$.checkArgument(object);return new TransactionSignature(object);};module.exports=TransactionSignature;

}).call(this,require("buffer").Buffer)

},{"../crypto/signature":80,"../errors":86,"../publickey":93,"../util/buffer":111,"../util/js":112,"../util/preconditions":113,"buffer":1133,"inherits":131,"lodash":471}],108:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var $=require('../util/preconditions');var buffer=require('buffer');var compare=Buffer.compare||require('buffer-compare');var errors=require('../errors');var BufferUtil=require('../util/buffer');var JSUtil=require('../util/js');var BufferReader=require('../encoding/bufferreader');var BufferWriter=require('../encoding/bufferwriter');var Hash=require('../crypto/hash');var Signature=require('../crypto/signature');var Sighash=require('./sighash');var SighashWitness=require('./sighashwitness');var Address=require('../address');var UnspentOutput=require('./unspentoutput');var Input=require('./input');var PublicKeyHashInput=Input.PublicKeyHash;var PublicKeyInput=Input.PublicKey;var MultiSigScriptHashInput=Input.MultiSigScriptHash;var MultiSigInput=Input.MultiSig;var Output=require('./output');var Script=require('../script');var PrivateKey=require('../privatekey');var BN=require('../crypto/bn');function Transaction(serialized,opts){if(!(this instanceof Transaction)){return new Transaction(serialized);}this.inputs=[];this.outputs=[];this._inputAmount=undefined;this._outputAmount=undefined;if(serialized){if(serialized instanceof Transaction){return Transaction.shallowCopy(serialized);}else if(JSUtil.isHexa(serialized)){this.fromString(serialized);}else if(BufferUtil.isBuffer(serialized)){this.fromBuffer(serialized);}else if(_.isObject(serialized)){this.fromObject(serialized,opts);}else{throw new errors.InvalidArgument('Must provide an object or string to deserialize a transaction');}}else{this._newTransaction();}}var CURRENT_VERSION=1;var DEFAULT_NLOCKTIME=0;var MAX_BLOCK_SIZE=1000000;Transaction.DUST_AMOUNT=546;Transaction.FEE_SECURITY_MARGIN=150;Transaction.MAX_MONEY=21000000*1e8;Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8;Transaction.NLOCKTIME_MAX_VALUE=4294967295;Transaction.FEE_PER_KB=100000;Transaction.CHANGE_OUTPUT_MAX_SIZE=20+4+34+4;Transaction.MAXIMUM_EXTRA_SIZE=4+9+9+4;Transaction.shallowCopy=function(transaction){var copy=new Transaction(transaction.toBuffer());return copy;};var hashProperty={configurable:false,enumerable:true,get:function get(){this._hash=new BufferReader(this._getHash()).readReverse().toString('hex');return this._hash;}};var witnessHashProperty={configurable:false,enumerable:true,get:function get(){return new BufferReader(this._getWitnessHash()).readReverse().toString('hex');}};Object.defineProperty(Transaction.prototype,'witnessHash',witnessHashProperty);Object.defineProperty(Transaction.prototype,'hash',hashProperty);Object.defineProperty(Transaction.prototype,'id',hashProperty);var ioProperty={configurable:false,enumerable:true,get:function get(){return this._getInputAmount();}};Object.defineProperty(Transaction.prototype,'inputAmount',ioProperty);ioProperty.get=function(){return this._getOutputAmount();};Object.defineProperty(Transaction.prototype,'outputAmount',ioProperty);Transaction.prototype._getHash=function(){return Hash.sha256sha256(this.toBuffer(true));};Transaction.prototype._getWitnessHash=function(){return Hash.sha256sha256(this.toBuffer(false));};Transaction.prototype.serialize=function(unsafe){if(true===unsafe||unsafe&&unsafe.disableAll){return this.uncheckedSerialize();}else{return this.checkedSerialize(unsafe);}};Transaction.prototype.uncheckedSerialize=Transaction.prototype.toString=function(){return this.toBuffer().toString('hex');};Transaction.prototype.checkedSerialize=function(opts){var serializationError=this.getSerializationError(opts);if(serializationError){serializationError.message+=' - For more information please see: '+'https://bitcore.io/api/lib/transaction#serialization-checks';throw serializationError;}return this.uncheckedSerialize();};Transaction.prototype.invalidSatoshis=function(){var invalid=false;for(var i=0;i<this.outputs.length;i++){if(this.outputs[i].invalidSatoshis()){invalid=true;}}return invalid;};Transaction.prototype.getSerializationError=function(opts){opts=opts||{};if(this.invalidSatoshis()){return new errors.Transaction.InvalidSatoshis();}var unspent=this._getUnspentValue();var unspentError;if(unspent<0){if(!opts.disableMoreOutputThanInput){unspentError=new errors.Transaction.InvalidOutputAmountSum();}}else{unspentError=this._hasFeeError(opts,unspent);}return unspentError||this._hasDustOutputs(opts)||this._isMissingSignatures(opts);};Transaction.prototype._hasFeeError=function(opts,unspent){if(!_.isUndefined(this._fee)&&this._fee!==unspent){return new errors.Transaction.FeeError.Different('Unspent value is '+unspent+' but specified fee is '+this._fee);}if(!opts.disableLargeFees){var maximumFee=Math.floor(Transaction.FEE_SECURITY_MARGIN*this._estimateFee());if(unspent>maximumFee){if(this._missingChange()){return new errors.Transaction.ChangeAddressMissing('Fee is too large and no change address was provided');}return new errors.Transaction.FeeError.TooLarge('expected less than '+maximumFee+' but got '+unspent);}}if(!opts.disableSmallFees){var minimumFee=Math.ceil(this._estimateFee()/Transaction.FEE_SECURITY_MARGIN);if(unspent<minimumFee){return new errors.Transaction.FeeError.TooSmall('expected more than '+minimumFee+' but got '+unspent);}}};Transaction.prototype._missingChange=function(){return!this._changeScript;};Transaction.prototype._hasDustOutputs=function(opts){if(opts.disableDustOutputs){return;}var index,output;for(index in this.outputs){output=this.outputs[index];if(output.satoshis<Transaction.DUST_AMOUNT&&!output.script.isDataOut()){return new errors.Transaction.DustOutputs();}}};Transaction.prototype._isMissingSignatures=function(opts){if(opts.disableIsFullySigned){return;}if(!this.isFullySigned()){return new errors.Transaction.MissingSignatures();}};Transaction.prototype.inspect=function(){return'<Transaction: '+this.uncheckedSerialize()+'>';};Transaction.prototype.toBuffer=function(noWitness){var writer=new BufferWriter();return this.toBufferWriter(writer,noWitness).toBuffer();};Transaction.prototype.hasWitnesses=function(){for(var i=0;i<this.inputs.length;i++){if(this.inputs[i].hasWitnesses()){return true;}}return false;};Transaction.prototype.toBufferWriter=function(writer,noWitness){writer.writeInt32LE(this.version);var hasWitnesses=this.hasWitnesses();if(hasWitnesses&&!noWitness){writer.write(Buffer.from('0001','hex'));}writer.writeVarintNum(this.inputs.length);_.each(this.inputs,function(input){input.toBufferWriter(writer);});writer.writeVarintNum(this.outputs.length);_.each(this.outputs,function(output){output.toBufferWriter(writer);});if(hasWitnesses&&!noWitness){_.each(this.inputs,function(input){var witnesses=input.getWitnesses();writer.writeVarintNum(witnesses.length);for(var j=0;j<witnesses.length;j++){writer.writeVarintNum(witnesses[j].length);writer.write(witnesses[j]);}});}writer.writeUInt32LE(this.nLockTime);return writer;};Transaction.prototype.fromBuffer=function(buffer){var reader=new BufferReader(buffer);return this.fromBufferReader(reader);};Transaction.prototype.fromBufferReader=function(reader){$.checkArgument(!reader.finished(),'No transaction data received');this.version=reader.readInt32LE();var sizeTxIns=reader.readVarintNum();var hasWitnesses=false;if(sizeTxIns===0&&reader.buf[reader.pos]!==0){reader.pos+=1;hasWitnesses=true;sizeTxIns=reader.readVarintNum();}for(var i=0;i<sizeTxIns;i++){var input=Input.fromBufferReader(reader);this.inputs.push(input);}var sizeTxOuts=reader.readVarintNum();for(var j=0;j<sizeTxOuts;j++){this.outputs.push(Output.fromBufferReader(reader));}if(hasWitnesses){for(var k=0;k<sizeTxIns;k++){var itemCount=reader.readVarintNum();var witnesses=[];for(var l=0;l<itemCount;l++){var size=reader.readVarintNum();var item=reader.read(size);witnesses.push(item);}this.inputs[k].setWitnesses(witnesses);}}this.nLockTime=reader.readUInt32LE();return this;};Transaction.prototype.toObject=Transaction.prototype.toJSON=function toObject(){var inputs=[];this.inputs.forEach(function(input){inputs.push(input.toObject());});var outputs=[];this.outputs.forEach(function(output){outputs.push(output.toObject());});var obj={hash:this.hash,version:this.version,inputs:inputs,outputs:outputs,nLockTime:this.nLockTime};if(this._changeScript){obj.changeScript=this._changeScript.toString();}if(!_.isUndefined(this._changeIndex)){obj.changeIndex=this._changeIndex;}if(!_.isUndefined(this._fee)){obj.fee=this._fee;}return obj;};Transaction.prototype.fromObject=function fromObject(arg,opts){$.checkArgument(_.isObject(arg)||arg instanceof Transaction);var self=this;var transaction;if(arg instanceof Transaction){transaction=transaction.toObject();}else{transaction=arg;}_.each(transaction.inputs,function(input){if(!input.output||!input.output.script){self.uncheckedAddInput(new Input(input));return;}var script=new Script(input.output.script);var txin;if(script.isPublicKeyHashOut()){txin=new Input.PublicKeyHash(input);}else if(script.isScriptHashOut()&&input.publicKeys&&input.threshold){txin=new Input.MultiSigScriptHash(input,input.publicKeys,input.threshold,input.signatures,null,opts);}else if(script.isPublicKeyOut()){txin=new Input.PublicKey(input);}else{throw new errors.Transaction.Input.UnsupportedScript(input.output.script);}self.addInput(txin);});_.each(transaction.outputs,function(output){self.addOutput(new Output(output));});if(transaction.changeIndex){this._changeIndex=transaction.changeIndex;}if(transaction.changeScript){this._changeScript=new Script(transaction.changeScript);}if(transaction.fee){this._fee=transaction.fee;}this.nLockTime=transaction.nLockTime;this.version=transaction.version;this._checkConsistency(arg);return this;};Transaction.prototype._checkConsistency=function(arg){if(!_.isUndefined(this._changeIndex)){$.checkState(this._changeScript,'Change script is expected.');$.checkState(this.outputs[this._changeIndex],'Change index points to undefined output.');$.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString(),'Change output has an unexpected script.');}if(arg&&arg.hash){$.checkState(arg.hash===this.hash,'Hash in object does not match transaction hash.');}};Transaction.prototype.lockUntilDate=function(time){$.checkArgument(time);if(_.isNumber(time)&&time<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT){throw new errors.Transaction.LockTimeTooEarly();}if(_.isDate(time)){time=time.getTime()/1000;}for(var i=0;i<this.inputs.length;i++){if(this.inputs[i].sequenceNumber===Input.DEFAULT_SEQNUMBER){this.inputs[i].sequenceNumber=Input.DEFAULT_LOCKTIME_SEQNUMBER;}}this.nLockTime=time;return this;};Transaction.prototype.lockUntilBlockHeight=function(height){$.checkArgument(_.isNumber(height));if(height>=Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT){throw new errors.Transaction.BlockHeightTooHigh();}if(height<0){throw new errors.Transaction.NLockTimeOutOfRange();}for(var i=0;i<this.inputs.length;i++){if(this.inputs[i].sequenceNumber===Input.DEFAULT_SEQNUMBER){this.inputs[i].sequenceNumber=Input.DEFAULT_LOCKTIME_SEQNUMBER;}}this.nLockTime=height;return this;};Transaction.prototype.getLockTime=function(){if(!this.nLockTime){return null;}if(this.nLockTime<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT){return this.nLockTime;}return new Date(1000*this.nLockTime);};Transaction.prototype.fromString=function(string){this.fromBuffer(buffer.Buffer.from(string,'hex'));};Transaction.prototype._newTransaction=function(){this.version=CURRENT_VERSION;this.nLockTime=DEFAULT_NLOCKTIME;};Transaction.prototype.from=function(utxo,pubkeys,threshold,nestedWitness,opts){if(_.isArray(utxo)){var self=this;_.each(utxo,function(utxo){self.from(utxo,pubkeys,threshold,nestedWitness,opts);});return this;}var exists=_.some(this.inputs,function(input){return input.prevTxId.toString('hex')===utxo.txId&&input.outputIndex===utxo.outputIndex;});if(exists){return this;}if(pubkeys&&threshold){this._fromMultisigUtxo(utxo,pubkeys,threshold,nestedWitness,opts);}else{this._fromNonP2SH(utxo);}return this;};Transaction.prototype._fromNonP2SH=function(utxo){var clazz;utxo=new UnspentOutput(utxo);if(utxo.script.isPublicKeyHashOut()){clazz=PublicKeyHashInput;}else if(utxo.script.isPublicKeyOut()){clazz=PublicKeyInput;}else{clazz=Input;}this.addInput(new clazz({output:new Output({script:utxo.script,satoshis:utxo.satoshis}),prevTxId:utxo.txId,outputIndex:utxo.outputIndex,script:Script.empty()}));};Transaction.prototype._fromMultisigUtxo=function(utxo,pubkeys,threshold,nestedWitness,opts){$.checkArgument(threshold<=pubkeys.length,'Number of required signatures must be greater than the number of public keys');var clazz;utxo=new UnspentOutput(utxo);if(utxo.script.isMultisigOut()){clazz=MultiSigInput;}else if(utxo.script.isScriptHashOut()){clazz=MultiSigScriptHashInput;}else{throw new Error("@TODO");}this.addInput(new clazz({output:new Output({script:utxo.script,satoshis:utxo.satoshis}),prevTxId:utxo.txId,outputIndex:utxo.outputIndex,script:Script.empty()},pubkeys,threshold,false,nestedWitness,opts));};Transaction.prototype.addInput=function(input,outputScript,satoshis){$.checkArgumentType(input,Input,'input');if(!input.output&&(_.isUndefined(outputScript)||_.isUndefined(satoshis))){throw new errors.Transaction.NeedMoreInfo('Need information about the UTXO script and satoshis');}if(!input.output&&outputScript&&!_.isUndefined(satoshis)){outputScript=outputScript instanceof Script?outputScript:new Script(outputScript);$.checkArgumentType(satoshis,'number','satoshis');input.output=new Output({script:outputScript,satoshis:satoshis});}return this.uncheckedAddInput(input);};Transaction.prototype.uncheckedAddInput=function(input){$.checkArgumentType(input,Input,'input');this.inputs.push(input);this._inputAmount=undefined;this._updateChangeOutput();return this;};Transaction.prototype.hasAllUtxoInfo=function(){return _.every(this.inputs.map(function(input){return!!input.output;}));};Transaction.prototype.fee=function(amount){$.checkArgument(_.isNumber(amount),'amount must be a number');this._fee=amount;this._updateChangeOutput();return this;};Transaction.prototype.feePerKb=function(amount){$.checkArgument(_.isNumber(amount),'amount must be a number');this._feePerKb=amount;this._updateChangeOutput();return this;};Transaction.prototype.feePerByte=function(amount){$.checkArgument(_.isNumber(amount),'amount must be a number');this._feePerByte=amount;this._updateChangeOutput();return this;};Transaction.prototype.change=function(address){$.checkArgument(address,'address is required');this._changeScript=Script.fromAddress(address);this._updateChangeOutput();return this;};Transaction.prototype.getChangeOutput=function(){if(!_.isUndefined(this._changeIndex)){return this.outputs[this._changeIndex];}return null;};Transaction.prototype.to=function(address,amount){if(_.isArray(address)){var self=this;_.each(address,function(to){self.to(to.address,to.satoshis);});return this;}$.checkArgument(JSUtil.isNaturalNumber(amount),'Amount is expected to be a positive integer');this.addOutput(new Output({script:Script(new Address(address)),satoshis:amount}));return this;};Transaction.prototype.addData=function(value){this.addOutput(new Output({script:Script.buildDataOut(value),satoshis:0}));return this;};Transaction.prototype.addOutput=function(output){$.checkArgumentType(output,Output,'output');this._addOutput(output);this._updateChangeOutput();return this;};Transaction.prototype.clearOutputs=function(){this.outputs=[];this._clearSignatures();this._outputAmount=undefined;this._changeIndex=undefined;this._updateChangeOutput();return this;};Transaction.prototype._addOutput=function(output){this.outputs.push(output);this._outputAmount=undefined;};Transaction.prototype._getOutputAmount=function(){if(_.isUndefined(this._outputAmount)){var self=this;this._outputAmount=0;_.each(this.outputs,function(output){self._outputAmount+=output.satoshis;});}return this._outputAmount;};Transaction.prototype._getInputAmount=function(){if(_.isUndefined(this._inputAmount)){this._inputAmount=_.sumBy(this.inputs,function(input){if(_.isUndefined(input.output)){throw new errors.Transaction.Input.MissingPreviousOutput();}return input.output.satoshis;});}return this._inputAmount;};Transaction.prototype._updateChangeOutput=function(){if(!this._changeScript){return;}this._clearSignatures();if(!_.isUndefined(this._changeIndex)){this._removeOutput(this._changeIndex);}var available=this._getUnspentValue();var fee=this.getFee();var changeAmount=available-fee;if(changeAmount>0){this._changeIndex=this.outputs.length;this._addOutput(new Output({script:this._changeScript,satoshis:changeAmount}));}else{this._changeIndex=undefined;}};Transaction.prototype.getFee=function(){if(this.isCoinbase()){return 0;}if(!_.isUndefined(this._fee)){return this._fee;}if(!this._changeScript){return this._getUnspentValue();}return this._estimateFee();};Transaction.prototype._estimateFee=function(){var estimatedSize=this._estimateSize();var available=this._getUnspentValue();var feeRate=this._feePerByte||(this._feePerKb||Transaction.FEE_PER_KB)/1000;function getFee(size){return size*feeRate;}var fee=Math.ceil(getFee(estimatedSize));var feeWithChange=Math.ceil(getFee(estimatedSize)+getFee(Transaction.CHANGE_OUTPUT_MAX_SIZE));if(!this._changeScript||available<=feeWithChange){return fee;}return feeWithChange;};Transaction.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount();};Transaction.prototype._clearSignatures=function(){_.each(this.inputs,function(input){input.clearSignatures();});};Transaction.prototype._estimateSize=function(){var result=Transaction.MAXIMUM_EXTRA_SIZE;_.each(this.inputs,function(input){result+=input._estimateSize();});_.each(this.outputs,function(output){result+=output.script.toBuffer().length+9;});return result;};Transaction.prototype._removeOutput=function(index){var output=this.outputs[index];this.outputs=_.without(this.outputs,output);this._outputAmount=undefined;};Transaction.prototype.removeOutput=function(index){this._removeOutput(index);this._updateChangeOutput();};Transaction.prototype.sort=function(){this.sortInputs(function(inputs){var copy=Array.prototype.concat.apply([],inputs);var i=0;copy.forEach(function(x){x.i=i++;});copy.sort(function(first,second){return compare(first.prevTxId,second.prevTxId)||first.outputIndex-second.outputIndex||first.i-second.i;});return copy;});this.sortOutputs(function(outputs){var copy=Array.prototype.concat.apply([],outputs);var i=0;copy.forEach(function(x){x.i=i++;});copy.sort(function(first,second){return first.satoshis-second.satoshis||compare(first.script.toBuffer(),second.script.toBuffer())||first.i-second.i;});return copy;});return this;};Transaction.prototype.shuffleOutputs=function(){return this.sortOutputs(_.shuffle);};Transaction.prototype.sortOutputs=function(sortingFunction){var outs=sortingFunction(this.outputs);return this._newOutputOrder(outs);};Transaction.prototype.sortInputs=function(sortingFunction){this.inputs=sortingFunction(this.inputs);this._clearSignatures();return this;};Transaction.prototype._newOutputOrder=function(newOutputs){var isInvalidSorting=this.outputs.length!==newOutputs.length||_.difference(this.outputs,newOutputs).length!==0;if(isInvalidSorting){throw new errors.Transaction.InvalidSorting();}if(!_.isUndefined(this._changeIndex)){var changeOutput=this.outputs[this._changeIndex];this._changeIndex=_.findIndex(newOutputs,changeOutput);}this.outputs=newOutputs;return this;};Transaction.prototype.removeInput=function(txId,outputIndex){var index;if(!outputIndex&&_.isNumber(txId)){index=txId;}else{index=_.findIndex(this.inputs,function(input){return input.prevTxId.toString('hex')===txId&&input.outputIndex===outputIndex;});}if(index<0||index>=this.inputs.length){throw new errors.Transaction.InvalidIndex(index,this.inputs.length);}var input=this.inputs[index];this.inputs=_.without(this.inputs,input);this._inputAmount=undefined;this._updateChangeOutput();};Transaction.prototype.sign=function(privateKey,sigtype){$.checkState(this.hasAllUtxoInfo(),'Not all utxo information is available to sign the transaction.');var self=this;if(_.isArray(privateKey)){_.each(privateKey,function(privateKey){self.sign(privateKey,sigtype);});return this;}_.each(this.getSignatures(privateKey,sigtype),function(signature){self.applySignature(signature);});return this;};Transaction.prototype.getSignatures=function(privKey,sigtype){privKey=new PrivateKey(privKey);sigtype=sigtype||Signature.SIGHASH_ALL;var transaction=this;var results=[];var hashData=Hash.sha256ripemd160(privKey.publicKey.toBuffer());_.each(this.inputs,function forEachInput(input,index){_.each(input.getSignatures(transaction,privKey,index,sigtype,hashData),function(signature){results.push(signature);});});return results;};Transaction.prototype.applySignature=function(signature){this.inputs[signature.inputIndex].addSignature(this,signature);return this;};Transaction.prototype.isFullySigned=function(){_.each(this.inputs,function(input){if(input.isFullySigned===Input.prototype.isFullySigned){throw new errors.Transaction.UnableToVerifySignature('Unrecognized script kind, or not enough information to execute script.'+'This usually happens when creating a transaction from a serialized transaction');}});return _.every(_.map(this.inputs,function(input){return input.isFullySigned();}));};Transaction.prototype.isValidSignature=function(signature){var self=this;if(this.inputs[signature.inputIndex].isValidSignature===Input.prototype.isValidSignature){throw new errors.Transaction.UnableToVerifySignature('Unrecognized script kind, or not enough information to execute script.'+'This usually happens when creating a transaction from a serialized transaction');}return this.inputs[signature.inputIndex].isValidSignature(self,signature);};Transaction.prototype.verifySignature=function(sig,pubkey,nin,subscript,sigversion,satoshis){if(_.isUndefined(sigversion)){sigversion=0;}if(sigversion===1){var subscriptBuffer=subscript.toBuffer();var scriptCodeWriter=new BufferWriter();scriptCodeWriter.writeVarintNum(subscriptBuffer.length);scriptCodeWriter.write(subscriptBuffer);var satoshisBuffer;if(satoshis){$.checkState(JSUtil.isNaturalNumber(satoshis));satoshisBuffer=new BufferWriter().writeUInt64LEBN(new BN(satoshis)).toBuffer();}else{satoshisBuffer=this.inputs[nin].getSatoshisBuffer();}var verified=SighashWitness.verify(this,sig,pubkey,nin,scriptCodeWriter.toBuffer(),satoshisBuffer);return verified;}return Sighash.verify(this,sig,pubkey,nin,subscript);};Transaction.prototype.verify=function(){if(this.inputs.length===0){return'transaction txins empty';}if(this.outputs.length===0){return'transaction txouts empty';}var valueoutbn=new BN(0);for(var i=0;i<this.outputs.length;i++){var txout=this.outputs[i];if(txout.invalidSatoshis()){return'transaction txout '+i+' satoshis is invalid';}if(txout._satoshisBN.gt(new BN(Transaction.MAX_MONEY,10))){return'transaction txout '+i+' greater than MAX_MONEY';}valueoutbn=valueoutbn.add(txout._satoshisBN);if(valueoutbn.gt(new BN(Transaction.MAX_MONEY))){return'transaction txout '+i+' total output greater than MAX_MONEY';}}if(this.toBuffer().length>MAX_BLOCK_SIZE){return'transaction over the maximum block size';}var txinmap={};for(i=0;i<this.inputs.length;i++){var txin=this.inputs[i];var inputid=txin.prevTxId+':'+txin.outputIndex;if(!_.isUndefined(txinmap[inputid])){return'transaction input '+i+' duplicate input';}txinmap[inputid]=true;}var isCoinbase=this.isCoinbase();if(isCoinbase){var buf=this.inputs[0]._scriptBuffer;if(buf.length<2||buf.length>100){return'coinbase transaction script size invalid';}}else{for(i=0;i<this.inputs.length;i++){if(this.inputs[i].isNull()){return'transaction input '+i+' has null input';}}}return true;};Transaction.prototype.isCoinbase=function(){return this.inputs.length===1&&this.inputs[0].isNull();};Transaction.prototype.isRBF=function(){for(var i=0;i<this.inputs.length;i++){var input=this.inputs[i];if(input.sequenceNumber<Input.MAXINT-1){return true;}}return false;};Transaction.prototype.enableRBF=function(){for(var i=0;i<this.inputs.length;i++){var input=this.inputs[i];if(input.sequenceNumber>=Input.MAXINT-1){input.sequenceNumber=Input.DEFAULT_RBF_SEQNUMBER;}}return this;};module.exports=Transaction;

}).call(this,require("buffer").Buffer)

},{"../address":74,"../crypto/bn":75,"../crypto/hash":77,"../crypto/signature":80,"../encoding/bufferreader":84,"../encoding/bufferwriter":85,"../errors":86,"../privatekey":92,"../script":94,"../util/buffer":111,"../util/js":112,"../util/preconditions":113,"./input":98,"./output":104,"./sighash":105,"./sighashwitness":106,"./unspentoutput":109,"buffer":1133,"buffer-compare":165,"lodash":471}],109:[function(require,module,exports){
'use strict';var _=require('lodash');var $=require('../util/preconditions');var JSUtil=require('../util/js');var Script=require('../script');var Address=require('../address');var Unit=require('../unit');function UnspentOutput(data){if(!(this instanceof UnspentOutput)){return new UnspentOutput(data);}$.checkArgument(_.isObject(data),'Must provide an object from where to extract data');var address=data.address?new Address(data.address):undefined;var txId=data.txid?data.txid:data.txId;if(!txId||!JSUtil.isHexaString(txId)||txId.length>64){throw new Error('Invalid TXID in object',data);}var outputIndex=_.isUndefined(data.vout)?data.outputIndex:data.vout;if(!_.isNumber(outputIndex)){throw new Error('Invalid outputIndex, received '+outputIndex);}$.checkArgument(!_.isUndefined(data.scriptPubKey)||!_.isUndefined(data.script),'Must provide the scriptPubKey for that output!');var script=new Script(data.scriptPubKey||data.script);$.checkArgument(!_.isUndefined(data.amount)||!_.isUndefined(data.satoshis),'Must provide an amount for the output');var amount=!_.isUndefined(data.amount)?new Unit.fromBTC(data.amount).toSatoshis():data.satoshis;$.checkArgument(_.isNumber(amount),'Amount must be a number');JSUtil.defineImmutable(this,{address:address,txId:txId,outputIndex:outputIndex,script:script,satoshis:amount});}UnspentOutput.prototype.inspect=function(){return'<UnspentOutput: '+this.txId+':'+this.outputIndex+', satoshis: '+this.satoshis+', address: '+this.address+'>';};UnspentOutput.prototype.toString=function(){return this.txId+':'+this.outputIndex;};UnspentOutput.fromObject=function(data){return new UnspentOutput(data);};UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function toObject(){return{address:this.address?this.address.toString():undefined,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString('hex'),amount:Unit.fromSatoshis(this.satoshis).toBTC()};};module.exports=UnspentOutput;

},{"../address":74,"../script":94,"../unit":110,"../util/js":112,"../util/preconditions":113,"lodash":471}],105:[function(require,module,exports){
(function (Buffer){
'use strict';var buffer=require('buffer');var Signature=require('../crypto/signature');var Script=require('../script');var Output=require('./output');var BufferReader=require('../encoding/bufferreader');var BufferWriter=require('../encoding/bufferwriter');var BN=require('../crypto/bn');var Hash=require('../crypto/hash');var ECDSA=require('../crypto/ecdsa');var $=require('../util/preconditions');var _=require('lodash');var SIGHASH_SINGLE_BUG='0000000000000000000000000000000000000000000000000000000000000001';var BITS_64_ON='ffffffffffffffff';var sighash=function sighash(transaction,sighashType,inputNumber,subscript){var Transaction=require('./transaction');var Input=require('./input');var i;var txcopy=Transaction.shallowCopy(transaction);subscript=new Script(subscript);subscript.removeCodeseparators();for(i=0;i<txcopy.inputs.length;i++){txcopy.inputs[i]=new Input(txcopy.inputs[i]).setScript(Script.empty());}txcopy.inputs[inputNumber]=new Input(txcopy.inputs[inputNumber]).setScript(subscript);if((sighashType&31)===Signature.SIGHASH_NONE||(sighashType&31)===Signature.SIGHASH_SINGLE){for(i=0;i<txcopy.inputs.length;i++){if(i!==inputNumber){txcopy.inputs[i].sequenceNumber=0;}}}if((sighashType&31)===Signature.SIGHASH_NONE){txcopy.outputs=[];}else if((sighashType&31)===Signature.SIGHASH_SINGLE){if(inputNumber>=txcopy.outputs.length){return Buffer.from(SIGHASH_SINGLE_BUG,'hex');}txcopy.outputs.length=inputNumber+1;for(i=0;i<inputNumber;i++){txcopy.outputs[i]=new Output({satoshis:BN.fromBuffer(Buffer.from(BITS_64_ON,'hex')),script:Script.empty()});}}if(sighashType&Signature.SIGHASH_ANYONECANPAY){txcopy.inputs=[txcopy.inputs[inputNumber]];}var buf=new BufferWriter().write(txcopy.toBuffer()).writeInt32LE(sighashType).toBuffer();var ret=Hash.sha256sha256(buf);ret=new BufferReader(ret).readReverse();return ret;};function sign(transaction,privateKey,sighashType,inputIndex,subscript){var hashbuf=sighash(transaction,sighashType,inputIndex,subscript);var sig=ECDSA.sign(hashbuf,privateKey,'little').set({nhashtype:sighashType});return sig;}function verify(transaction,signature,publicKey,inputIndex,subscript){$.checkArgument(!_.isUndefined(transaction));$.checkArgument(!_.isUndefined(signature)&&!_.isUndefined(signature.nhashtype));var hashbuf=sighash(transaction,signature.nhashtype,inputIndex,subscript);return ECDSA.verify(hashbuf,signature,publicKey,'little');}module.exports={sighash:sighash,sign:sign,verify:verify};

}).call(this,require("buffer").Buffer)

},{"../crypto/bn":75,"../crypto/ecdsa":76,"../crypto/hash":77,"../crypto/signature":80,"../encoding/bufferreader":84,"../encoding/bufferwriter":85,"../script":94,"../util/preconditions":113,"./input":98,"./output":104,"./transaction":108,"buffer":1133,"lodash":471}],98:[function(require,module,exports){
module.exports=require('./input');module.exports.PublicKey=require('./publickey');module.exports.PublicKeyHash=require('./publickeyhash');module.exports.MultiSig=require('./multisig.js');module.exports.MultiSigScriptHash=require('./multisigscripthash.js');

},{"./input":99,"./multisig.js":100,"./multisigscripthash.js":101,"./publickey":102,"./publickeyhash":103}],102:[function(require,module,exports){
'use strict';var inherits=require('inherits');var $=require('../../util/preconditions');var BufferUtil=require('../../util/buffer');var Input=require('./input');var Output=require('../output');var Sighash=require('../sighash');var Script=require('../../script');var Signature=require('../../crypto/signature');var TransactionSignature=require('../signature');function PublicKeyInput(){Input.apply(this,arguments);}inherits(PublicKeyInput,Input);PublicKeyInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output);sigtype=sigtype||Signature.SIGHASH_ALL;var publicKey=privateKey.toPublicKey();if(publicKey.toString()===this.output.script.getPublicKey().toString('hex')){return[new TransactionSignature({publicKey:publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,this.output.script),sigtype:sigtype})];}return[];};PublicKeyInput.prototype.addSignature=function(transaction,signature){$.checkState(this.isValidSignature(transaction,signature),'Signature is invalid');this.setScript(Script.buildPublicKeyIn(signature.signature.toDER(),signature.sigtype));return this;};PublicKeyInput.prototype.clearSignatures=function(){this.setScript(Script.empty());return this;};PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn();};PublicKeyInput.SCRIPT_MAX_SIZE=73;PublicKeyInput.prototype._estimateSize=function(){return PublicKeyInput.SCRIPT_MAX_SIZE;};module.exports=PublicKeyInput;

},{"../../crypto/signature":80,"../../script":94,"../../util/buffer":111,"../../util/preconditions":113,"../output":104,"../sighash":105,"../signature":107,"./input":99,"inherits":131}],103:[function(require,module,exports){
'use strict';var inherits=require('inherits');var $=require('../../util/preconditions');var BufferUtil=require('../../util/buffer');var Hash=require('../../crypto/hash');var Input=require('./input');var Output=require('../output');var Sighash=require('../sighash');var Script=require('../../script');var Signature=require('../../crypto/signature');var TransactionSignature=require('../signature');function PublicKeyHashInput(){Input.apply(this,arguments);}inherits(PublicKeyHashInput,Input);PublicKeyHashInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype,hashData){$.checkState(this.output instanceof Output);hashData=hashData||Hash.sha256ripemd160(privateKey.publicKey.toBuffer());sigtype=sigtype||Signature.SIGHASH_ALL;if(BufferUtil.equals(hashData,this.output.script.getPublicKeyHash())){return[new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,this.output.script),sigtype:sigtype})];}return[];};PublicKeyHashInput.prototype.addSignature=function(transaction,signature){$.checkState(this.isValidSignature(transaction,signature),'Signature is invalid');this.setScript(Script.buildPublicKeyHashIn(signature.publicKey,signature.signature.toDER(),signature.sigtype));return this;};PublicKeyHashInput.prototype.clearSignatures=function(){this.setScript(Script.empty());return this;};PublicKeyHashInput.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn();};PublicKeyHashInput.SCRIPT_MAX_SIZE=73+34;PublicKeyHashInput.prototype._estimateSize=function(){return PublicKeyHashInput.SCRIPT_MAX_SIZE;};module.exports=PublicKeyHashInput;

},{"../../crypto/hash":77,"../../crypto/signature":80,"../../script":94,"../../util/buffer":111,"../../util/preconditions":113,"../output":104,"../sighash":105,"../signature":107,"./input":99,"inherits":131}],100:[function(require,module,exports){
'use strict';var _=require('lodash');var inherits=require('inherits');var Transaction=require('../transaction');var Input=require('./input');var Output=require('../output');var $=require('../../util/preconditions');var Script=require('../../script');var Signature=require('../../crypto/signature');var Sighash=require('../sighash');var PublicKey=require('../../publickey');var BufferUtil=require('../../util/buffer');var TransactionSignature=require('../signature');function MultiSigInput(input,pubkeys,threshold,signatures,opts){opts=opts||{};Input.apply(this,arguments);var self=this;pubkeys=pubkeys||input.publicKeys;threshold=threshold||input.threshold;signatures=signatures||input.signatures;if(opts.noSorting){this.publicKeys=pubkeys;}else{this.publicKeys=_.sortBy(pubkeys,function(publicKey){return publicKey.toString('hex');});}$.checkState(Script.buildMultisigOut(this.publicKeys,threshold).equals(this.output.script),'Provided public keys don\'t match to the provided output script');this.publicKeyIndex={};_.each(this.publicKeys,function(publicKey,index){self.publicKeyIndex[publicKey.toString()]=index;});this.threshold=threshold;this.signatures=signatures?this._deserializeSignatures(signatures):new Array(this.publicKeys.length);}inherits(MultiSigInput,Input);MultiSigInput.prototype.toObject=function(){var obj=Input.prototype.toObject.apply(this,arguments);obj.threshold=this.threshold;obj.publicKeys=_.map(this.publicKeys,function(publicKey){return publicKey.toString();});obj.signatures=this._serializeSignatures();return obj;};MultiSigInput.prototype._deserializeSignatures=function(signatures){return _.map(signatures,function(signature){if(!signature){return undefined;}return new TransactionSignature(signature);});};MultiSigInput.prototype._serializeSignatures=function(){return _.map(this.signatures,function(signature){if(!signature){return undefined;}return signature.toObject();});};MultiSigInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output);sigtype=sigtype||Signature.SIGHASH_ALL;var self=this;var results=[];_.each(this.publicKeys,function(publicKey){if(publicKey.toString()===privateKey.publicKey.toString()){results.push(new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:self.prevTxId,outputIndex:self.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,self.output.script),sigtype:sigtype}));}});return results;};MultiSigInput.prototype.addSignature=function(transaction,signature){$.checkState(!this.isFullySigned(),'All needed signatures have already been added');$.checkArgument(!_.isUndefined(this.publicKeyIndex[signature.publicKey.toString()]),'Signature has no matching public key');$.checkState(this.isValidSignature(transaction,signature));this.signatures[this.publicKeyIndex[signature.publicKey.toString()]]=signature;this._updateScript();return this;};MultiSigInput.prototype._updateScript=function(){this.setScript(Script.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures()));return this;};MultiSigInput.prototype._createSignatures=function(){return _.map(_.filter(this.signatures,function(signature){return!_.isUndefined(signature);}),function(signature){return BufferUtil.concat([signature.signature.toDER(),BufferUtil.integerAsSingleByteBuffer(signature.sigtype)]);});};MultiSigInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length);this._updateScript();};MultiSigInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold;};MultiSigInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures();};MultiSigInput.prototype.countSignatures=function(){return _.reduce(this.signatures,function(sum,signature){return sum+!!signature;},0);};MultiSigInput.prototype.publicKeysWithoutSignature=function(){var self=this;return _.filter(this.publicKeys,function(publicKey){return!self.signatures[self.publicKeyIndex[publicKey.toString()]];});};MultiSigInput.prototype.isValidSignature=function(transaction,signature){signature.signature.nhashtype=signature.sigtype;return Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.output.script);};MultiSigInput.normalizeSignatures=function(transaction,input,inputIndex,signatures,publicKeys){return publicKeys.map(function(pubKey){var signatureMatch=null;signatures=signatures.filter(function(signatureBuffer){if(signatureMatch){return true;}var signature=new TransactionSignature({signature:Signature.fromTxFormat(signatureBuffer),publicKey:pubKey,prevTxId:input.prevTxId,outputIndex:input.outputIndex,inputIndex:inputIndex,sigtype:Signature.SIGHASH_ALL});signature.signature.nhashtype=signature.sigtype;var isMatch=Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,input.output.script);if(isMatch){signatureMatch=signature;return false;}return true;});return signatureMatch?signatureMatch:null;});};MultiSigInput.OPCODES_SIZE=1;MultiSigInput.SIGNATURE_SIZE=73;MultiSigInput.prototype._estimateSize=function(){return MultiSigInput.OPCODES_SIZE+this.threshold*MultiSigInput.SIGNATURE_SIZE;};module.exports=MultiSigInput;

},{"../../crypto/signature":80,"../../publickey":93,"../../script":94,"../../util/buffer":111,"../../util/preconditions":113,"../output":104,"../sighash":105,"../signature":107,"../transaction":108,"./input":99,"inherits":131,"lodash":471}],101:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var inherits=require('inherits');var Input=require('./input');var Output=require('../output');var $=require('../../util/preconditions');var Script=require('../../script');var Signature=require('../../crypto/signature');var Sighash=require('../sighash');var SighashWitness=require('../sighashwitness');var BufferWriter=require('../../encoding/bufferwriter');var BufferUtil=require('../../util/buffer');var TransactionSignature=require('../signature');function MultiSigScriptHashInput(input,pubkeys,threshold,signatures,nestedWitness,opts){opts=opts||{};Input.apply(this,arguments);var self=this;pubkeys=pubkeys||input.publicKeys;threshold=threshold||input.threshold;signatures=signatures||input.signatures;this.nestedWitness=nestedWitness?true:false;if(opts.noSorting){this.publicKeys=pubkeys;}else{this.publicKeys=_.sortBy(pubkeys,function(publicKey){return publicKey.toString('hex');});}this.redeemScript=Script.buildMultisigOut(this.publicKeys,threshold,opts);if(this.nestedWitness){var nested=Script.buildWitnessMultisigOutFromScript(this.redeemScript);$.checkState(Script.buildScriptHashOut(nested).equals(this.output.script),'Provided public keys don\'t hash to the provided output (nested witness)');var scriptSig=new Script();scriptSig.add(nested.toBuffer());this.setScript(scriptSig);}else{$.checkState(Script.buildScriptHashOut(this.redeemScript).equals(this.output.script),'Provided public keys don\'t hash to the provided output');}this.publicKeyIndex={};_.each(this.publicKeys,function(publicKey,index){self.publicKeyIndex[publicKey.toString()]=index;});this.threshold=threshold;this.signatures=signatures?this._deserializeSignatures(signatures):new Array(this.publicKeys.length);}inherits(MultiSigScriptHashInput,Input);MultiSigScriptHashInput.prototype.toObject=function(){var obj=Input.prototype.toObject.apply(this,arguments);obj.threshold=this.threshold;obj.publicKeys=_.map(this.publicKeys,function(publicKey){return publicKey.toString();});obj.signatures=this._serializeSignatures();return obj;};MultiSigScriptHashInput.prototype._deserializeSignatures=function(signatures){return _.map(signatures,function(signature){if(!signature){return undefined;}return new TransactionSignature(signature);});};MultiSigScriptHashInput.prototype._serializeSignatures=function(){return _.map(this.signatures,function(signature){if(!signature){return undefined;}return signature.toObject();});};MultiSigScriptHashInput.prototype.getScriptCode=function(){var writer=new BufferWriter();if(!this.redeemScript.hasCodeseparators()){var redeemScriptBuffer=this.redeemScript.toBuffer();writer.writeVarintNum(redeemScriptBuffer.length);writer.write(redeemScriptBuffer);}else{throw new Error('@TODO');}return writer.toBuffer();};MultiSigScriptHashInput.prototype.getSighash=function(transaction,privateKey,index,sigtype){var self=this;var hash;if(self.nestedWitness){var scriptCode=self.getScriptCode();var satoshisBuffer=self.getSatoshisBuffer();hash=SighashWitness.sighash(transaction,sigtype,index,scriptCode,satoshisBuffer);}else{hash=Sighash.sighash(transaction,sigtype,index,self.redeemScript);}return hash;};MultiSigScriptHashInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output);sigtype=sigtype||Signature.SIGHASH_ALL;var self=this;var results=[];_.each(this.publicKeys,function(publicKey){if(publicKey.toString()===privateKey.publicKey.toString()){var signature;if(self.nestedWitness){var scriptCode=self.getScriptCode();var satoshisBuffer=self.getSatoshisBuffer();signature=SighashWitness.sign(transaction,privateKey,sigtype,index,scriptCode,satoshisBuffer);}else{signature=Sighash.sign(transaction,privateKey,sigtype,index,self.redeemScript);}results.push(new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:self.prevTxId,outputIndex:self.outputIndex,inputIndex:index,signature:signature,sigtype:sigtype}));}});return results;};MultiSigScriptHashInput.prototype.addSignature=function(transaction,signature){$.checkState(!this.isFullySigned(),'All needed signatures have already been added');$.checkArgument(!_.isUndefined(this.publicKeyIndex[signature.publicKey.toString()]),'Signature has no matching public key');$.checkState(this.isValidSignature(transaction,signature));this.signatures[this.publicKeyIndex[signature.publicKey.toString()]]=signature;this._updateScript();return this;};MultiSigScriptHashInput.prototype._updateScript=function(){if(this.nestedWitness){var stack=[Buffer.alloc(0)];var signatures=this._createSignatures();for(var i=0;i<signatures.length;i++){stack.push(signatures[i]);}stack.push(this.redeemScript.toBuffer());this.setWitnesses(stack);}else{var scriptSig=Script.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript});this.setScript(scriptSig);}return this;};MultiSigScriptHashInput.prototype._createSignatures=function(){return _.map(_.filter(this.signatures,function(signature){return!_.isUndefined(signature);}),function(signature){return BufferUtil.concat([signature.signature.toDER(),BufferUtil.integerAsSingleByteBuffer(signature.sigtype)]);});};MultiSigScriptHashInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length);this._updateScript();};MultiSigScriptHashInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold;};MultiSigScriptHashInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures();};MultiSigScriptHashInput.prototype.countSignatures=function(){return _.reduce(this.signatures,function(sum,signature){return sum+!!signature;},0);};MultiSigScriptHashInput.prototype.publicKeysWithoutSignature=function(){var self=this;return _.filter(this.publicKeys,function(publicKey){return!self.signatures[self.publicKeyIndex[publicKey.toString()]];});};MultiSigScriptHashInput.prototype.isValidSignature=function(transaction,signature){if(this.nestedWitness){signature.signature.nhashtype=signature.sigtype;var scriptCode=this.getScriptCode();var satoshisBuffer=this.getSatoshisBuffer();return SighashWitness.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,scriptCode,satoshisBuffer);}else{signature.signature.nhashtype=signature.sigtype;return Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.redeemScript);}};MultiSigScriptHashInput.OPCODES_SIZE=7;MultiSigScriptHashInput.SIGNATURE_SIZE=74;MultiSigScriptHashInput.PUBKEY_SIZE=34;MultiSigScriptHashInput.prototype._estimateSize=function(){return MultiSigScriptHashInput.OPCODES_SIZE+this.threshold*MultiSigScriptHashInput.SIGNATURE_SIZE+this.publicKeys.length*MultiSigScriptHashInput.PUBKEY_SIZE;};module.exports=MultiSigScriptHashInput;

}).call(this,require("buffer").Buffer)

},{"../../crypto/signature":80,"../../encoding/bufferwriter":85,"../../script":94,"../../util/buffer":111,"../../util/preconditions":113,"../output":104,"../sighash":105,"../sighashwitness":106,"../signature":107,"./input":99,"buffer":1133,"inherits":131,"lodash":471}],99:[function(require,module,exports){
(function (Buffer){
'use strict';var _=require('lodash');var $=require('../../util/preconditions');var errors=require('../../errors');var BufferWriter=require('../../encoding/bufferwriter');var buffer=require('buffer');var BufferUtil=require('../../util/buffer');var JSUtil=require('../../util/js');var Script=require('../../script');var Sighash=require('../sighash');var Output=require('../output');var MAXINT=0xffffffff;var DEFAULT_RBF_SEQNUMBER=MAXINT-2;var DEFAULT_SEQNUMBER=MAXINT;var DEFAULT_LOCKTIME_SEQNUMBER=MAXINT-1;function Input(params){if(!(this instanceof Input)){return new Input(params);}if(params){return this._fromObject(params);}}Input.MAXINT=MAXINT;Input.DEFAULT_SEQNUMBER=DEFAULT_SEQNUMBER;Input.DEFAULT_LOCKTIME_SEQNUMBER=DEFAULT_LOCKTIME_SEQNUMBER;Input.DEFAULT_RBF_SEQNUMBER=DEFAULT_RBF_SEQNUMBER;Object.defineProperty(Input.prototype,'script',{configurable:false,enumerable:true,get:function get(){if(this.isNull()){return null;}if(!this._script){this._script=new Script(this._scriptBuffer);this._script._isInput=true;}return this._script;}});Input.fromObject=function(obj){$.checkArgument(_.isObject(obj));var input=new Input();return input._fromObject(obj);};Input.prototype._fromObject=function(params){var prevTxId;if(_.isString(params.prevTxId)&&JSUtil.isHexa(params.prevTxId)){prevTxId=Buffer.from(params.prevTxId,'hex');}else{prevTxId=params.prevTxId;}this.witnesses=[];this.output=params.output?params.output instanceof Output?params.output:new Output(params.output):undefined;this.prevTxId=prevTxId||params.txidbuf;this.outputIndex=_.isUndefined(params.outputIndex)?params.txoutnum:params.outputIndex;this.sequenceNumber=_.isUndefined(params.sequenceNumber)?_.isUndefined(params.seqnum)?DEFAULT_SEQNUMBER:params.seqnum:params.sequenceNumber;if(_.isUndefined(params.script)&&_.isUndefined(params.scriptBuffer)){throw new errors.Transaction.Input.MissingScript();}this.setScript(params.scriptBuffer||params.script);return this;};Input.prototype.toObject=Input.prototype.toJSON=function toObject(){var obj={prevTxId:this.prevTxId.toString('hex'),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString('hex')};if(this.script){obj.scriptString=this.script.toString();}if(this.output){obj.output=this.output.toObject();}return obj;};Input.fromBufferReader=function(br){var input=new Input();input.prevTxId=br.readReverse(32);input.outputIndex=br.readUInt32LE();input._scriptBuffer=br.readVarLengthBuffer();input.sequenceNumber=br.readUInt32LE();return input;};Input.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}writer.writeReverse(this.prevTxId);writer.writeUInt32LE(this.outputIndex);var script=this._scriptBuffer;writer.writeVarintNum(script.length);writer.write(script);writer.writeUInt32LE(this.sequenceNumber);return writer;};Input.prototype.setScript=function(script){this._script=null;if(script instanceof Script){this._script=script;this._script._isInput=true;this._scriptBuffer=script.toBuffer();}else if(JSUtil.isHexa(script)){this._scriptBuffer=Buffer.from(script,'hex');}else if(_.isString(script)){this._script=new Script(script);this._script._isInput=true;this._scriptBuffer=this._script.toBuffer();}else if(BufferUtil.isBuffer(script)){this._scriptBuffer=Buffer.from(script);}else{throw new TypeError('Invalid argument type: script');}return this;};Input.prototype.getSignatures=function(){throw new errors.AbstractMethodInvoked('Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported)'+' for input: '+JSON.stringify(this));};Input.prototype.getSatoshisBuffer=function(){$.checkState(this.output instanceof Output);$.checkState(this.output._satoshisBN);return new BufferWriter().writeUInt64LEBN(this.output._satoshisBN).toBuffer();};Input.prototype.isFullySigned=function(){throw new errors.AbstractMethodInvoked('Input#isFullySigned');};Input.prototype.isFinal=function(){return this.sequenceNumber!==4294967295;};Input.prototype.addSignature=function(){throw new errors.AbstractMethodInvoked('Input#addSignature');};Input.prototype.clearSignatures=function(){throw new errors.AbstractMethodInvoked('Input#clearSignatures');};Input.prototype.hasWitnesses=function(){if(this.witnesses&&this.witnesses.length>0){return true;}return false;};Input.prototype.getWitnesses=function(){return this.witnesses;};Input.prototype.setWitnesses=function(witnesses){this.witnesses=witnesses;};Input.prototype.isValidSignature=function(transaction,signature){signature.signature.nhashtype=signature.sigtype;return Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.output.script);};Input.prototype.isNull=function(){return this.prevTxId.toString('hex')==='0000000000000000000000000000000000000000000000000000000000000000'&&this.outputIndex===0xffffffff;};Input.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length;};module.exports=Input;

}).call(this,require("buffer").Buffer)

},{"../../encoding/bufferwriter":85,"../../errors":86,"../../script":94,"../../util/buffer":111,"../../util/js":112,"../../util/preconditions":113,"../output":104,"../sighash":105,"buffer":1133,"lodash":471}],131:[function(require,module,exports){
if(typeof Object.create==='function'){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function TempCtor(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;};}

},{}],165:[function(require,module,exports){
module.exports=function(a,b){if(typeof a.compare==='function')return a.compare(b);if(a===b)return 0;var x=a.length;var y=b.length;var i=0;var len=Math.min(x,y);while(i<len){if(a[i]!==b[i])break;++i;}if(i!==len){x=a[i];y=b[i];}if(x<y)return-1;if(y<x)return 1;return 0;};

},{}],110:[function(require,module,exports){
'use strict';var _=require('lodash');var errors=require('./errors');var $=require('./util/preconditions');var UNITS={'BTC':[1e8,8],'mBTC':[1e5,5],'uBTC':[1e2,2],'bits':[1e2,2],'satoshis':[1,0]};function Unit(amount,code){if(!(this instanceof Unit)){return new Unit(amount,code);}if(_.isNumber(code)){if(code<=0){throw new errors.Unit.InvalidRate(code);}amount=amount/code;code=Unit.BTC;}this._value=this._from(amount,code);var self=this;var defineAccesor=function defineAccesor(key){Object.defineProperty(self,key,{get:function get(){return self.to(key);},enumerable:true});};Object.keys(UNITS).forEach(defineAccesor);}Object.keys(UNITS).forEach(function(key){Unit[key]=key;});Unit.fromObject=function fromObject(data){$.checkArgument(_.isObject(data),'Argument is expected to be an object');return new Unit(data.amount,data.code);};Unit.fromBTC=function(amount){return new Unit(amount,Unit.BTC);};Unit.fromMillis=Unit.fromMilis=function(amount){return new Unit(amount,Unit.mBTC);};Unit.fromMicros=Unit.fromBits=function(amount){return new Unit(amount,Unit.bits);};Unit.fromSatoshis=function(amount){return new Unit(amount,Unit.satoshis);};Unit.fromFiat=function(amount,rate){return new Unit(amount,rate);};Unit.prototype._from=function(amount,code){if(!UNITS[code]){throw new errors.Unit.UnknownCode(code);}return parseInt((amount*UNITS[code][0]).toFixed());};Unit.prototype.to=function(code){if(_.isNumber(code)){if(code<=0){throw new errors.Unit.InvalidRate(code);}return parseFloat((this.BTC*code).toFixed(2));}if(!UNITS[code]){throw new errors.Unit.UnknownCode(code);}var value=this._value/UNITS[code][0];return parseFloat(value.toFixed(UNITS[code][1]));};Unit.prototype.toBTC=function(){return this.to(Unit.BTC);};Unit.prototype.toMillis=Unit.prototype.toMilis=function(){return this.to(Unit.mBTC);};Unit.prototype.toMicros=Unit.prototype.toBits=function(){return this.to(Unit.bits);};Unit.prototype.toSatoshis=function(){return this.to(Unit.satoshis);};Unit.prototype.atRate=function(rate){return this.to(rate);};Unit.prototype.toString=function(){return this.satoshis+' satoshis';};Unit.prototype.toObject=Unit.prototype.toJSON=function toObject(){return{amount:this.BTC,code:Unit.BTC};};Unit.prototype.inspect=function(){return'<Unit: '+this.toString()+'>';};module.exports=Unit;

},{"./errors":86,"./util/preconditions":113,"lodash":471}],130:[function(require,module,exports){
module.exports={
  /* common-shake removed: "name": "elliptic" */
  "version": "6.4.0",
  /* common-shake removed: "description": "EC cryptography" */
  /* common-shake removed: "main": "lib/elliptic.js" */
  /* common-shake removed: "files": [
    "lib"
  ] */
  /* common-shake removed: "scripts": {
    "jscs": "jscs benchmarks/*.js lib/*.js lib/**\/*.js lib/**\/**\/*.js test/index.js",
    "jshint": "jscs benchmarks/*.js lib/*.js lib/**\/*.js lib/**\/**\/*.js test/index.js",
    "lint": "npm run jscs && npm run jshint",
    "unit": "istanbul test _mocha --reporter=spec test/index.js",
    "test": "npm run lint && npm run unit",
    "version": "grunt dist && git add dist/"
  } */
  /* common-shake removed: "repository": {
    "type": "git",
    "url": "git@github.com:indutny/elliptic"
  } */
  /* common-shake removed: "keywords": [
    "EC",
    "Elliptic",
    "curve",
    "Cryptography"
  ] */
  /* common-shake removed: "author": "Fedor Indutny <fedor@indutny.com>" */
  /* common-shake removed: "license": "MIT" */
  /* common-shake removed: "bugs": {
    "url": "https://github.com/indutny/elliptic/issues"
  } */
  /* common-shake removed: "homepage": "https://github.com/indutny/elliptic" */
  /* common-shake removed: "devDependencies": {
    "brfs": "^1.4.3",
    "coveralls": "^2.11.3",
    "grunt": "^0.4.5",
    "grunt-browserify": "^5.0.0",
    "grunt-cli": "^1.2.0",
    "grunt-contrib-connect": "^1.0.0",
    "grunt-contrib-copy": "^1.0.0",
    "grunt-contrib-uglify": "^1.0.1",
    "grunt-mocha-istanbul": "^3.0.1",
    "grunt-saucelabs": "^8.6.2",
    "istanbul": "^0.4.2",
    "jscs": "^2.9.0",
    "jshint": "^2.6.0",
    "mocha": "^2.1.0"
  } */
  /* common-shake removed: "dependencies": {
    "bn.js": "^4.4.0",
    "brorand": "^1.0.1",
    "hash.js": "^1.0.0",
    "hmac-drbg": "^1.0.0",
    "inherits": "^2.0.1",
    "minimalistic-assert": "^1.0.0",
    "minimalistic-crypto-utils": "^1.0.0"
  } */
}

},{}],133:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var r;module.exports=function rand(len){if(!r)r=new Rand(null);return r.generate(len);};function Rand(rand){this.rand=rand;}module.exports.Rand=Rand;Rand.prototype.generate=function generate(len){return this._rand(len);};Rand.prototype._rand=function _rand(n){if(this.rand.getBytes)return this.rand.getBytes(n);var res=new Uint8Array(n);for(var i=0;i<res.length;i++){res[i]=this.rand.getByte();}return res;};if((typeof self==="undefined"?"undefined":(0,_typeof2["default"])(self))==='object'){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.crypto.getRandomValues(arr);return arr;};}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.msCrypto.getRandomValues(arr);return arr;};}else if((typeof window==="undefined"?"undefined":(0,_typeof2["default"])(window))==='object'){Rand.prototype._rand=function(){throw new Error('Not implemented yet');};}}else{try{var crypto=require('crypto');if(typeof crypto.randomBytes!=='function')throw new Error('Not supported');Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n);};}catch(e){}}

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"crypto":1104}],120:[function(require,module,exports){
'use strict';var curves=exports;var hash=require('hash.js');var elliptic=require('../elliptic');var assert=elliptic.utils.assert;function PresetCurve(options){if(options.type==='short')this.curve=new elliptic.curve["short"](options);else if(options.type==='edwards')this.curve=new elliptic.curve.edwards(options);else this.curve=new elliptic.curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),'Invalid curve');assert(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O');}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function get(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve;}});}defineCurve('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:hash.sha256,gRed:false,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']});defineCurve('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:hash.sha256,gRed:false,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']});defineCurve('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:hash.sha256,gRed:false,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']});defineCurve('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f '+'5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 '+'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:hash.sha384,gRed:false,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 '+'5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 '+'0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']});defineCurve('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b '+'99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd '+'3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 '+'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:hash.sha512,gRed:false,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 '+'053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 '+'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 '+'579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 '+'3fad0761 353c7086 a272c240 88be9476 9fd16650']});defineCurve('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['9']});defineCurve('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var pre;try{pre=require('./precomputed/secp256k1');}catch(e){pre=undefined;}defineCurve('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:hash.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:false,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',pre]});

},{"../elliptic":114,"./precomputed/secp256k1":127,"hash.js":292}],128:[function(require,module,exports){
'use strict';var utils=exports;var BN=require('bn.js');var minAssert=require('minimalistic-assert');var minUtils=require('minimalistic-crypto-utils');utils.assert=minAssert;utils.toArray=minUtils.toArray;utils.zero2=minUtils.zero2;utils.toHex=minUtils.toHex;utils.encode=minUtils.encode;function getNAF(num,w){var naf=[];var ws=1<<w+1;var k=num.clone();while(k.cmpn(1)>=0){var z;if(k.isOdd()){var mod=k.andln(ws-1);if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z);}else{z=0;}naf.push(z);var shift=k.cmpn(0)!==0&&k.andln(ws-1)===0?w+1:1;for(var i=1;i<shift;i++){naf.push(0);}k.iushrn(shift);}return naf;}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0;}else{var m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14;}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0;}else{var m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24;}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.iushrn(1);k2.iushrn(1);}return jsf;}utils.getJSF=getJSF;function cachedProperty(obj,name,computer){var key='_'+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this);};}utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==='string'?utils.toArray(bytes,'hex'):bytes;}utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,'hex','le');}utils.intFromLE=intFromLE;

},{"bn.js":132,"minimalistic-assert":480,"minimalistic-crypto-utils":481}],117:[function(require,module,exports){
'use strict';var curve=exports;curve.base=require('./base');curve["short"]=require('./short');curve.mont=require('./mont');curve.edwards=require('./edwards');

},{"./base":115,"./edwards":116,"./mont":118,"./short":119}],121:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var BN=require('bn.js');var HmacDRBG=require('hmac-drbg');var elliptic=require('../../elliptic');var utils=elliptic.utils;var assert=utils.assert;var KeyPair=require('./key');var Signature=require('./signature');function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==='string'){assert(elliptic.curves.hasOwnProperty(options),'Unknown curve '+options);options=elliptic.curves[options];}if(options instanceof elliptic.curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash;}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options);};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc);};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc);};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||'utf8',entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||'utf8',nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv);}while(true);};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg;};EC.prototype.sign=function sign(msg,key,enc,options){if((0,_typeof2["default"])(enc)==='object'){options=enc;enc=null;}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray('be',bytes);var nonce=msg.toArray('be',bytes);var drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||'utf8'});var ns1=this.n.sub(new BN(1));for(var iter=0;true;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1;}return new Signature({r:r,s:s,recoveryParam:recoveryParam});}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,'hex');var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);if(!this.curve._maxwellTrick){var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().umod(this.n).cmp(r)===0;}var p=this.g.jmulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.eqXToP(r);};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,'The recovery param is more than two bits');signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error('Unable to find sencond key candinate');if(isSecondKey)r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else r=this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2);};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i);}catch(e){continue;}if(Qprime.eq(Q))return i;}throw new Error('Unable to find valid recovery factor');};

},{"../../elliptic":114,"./key":122,"./signature":123,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132,"hmac-drbg":304}],124:[function(require,module,exports){
'use strict';var hash=require('hash.js');var elliptic=require('../../elliptic');var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=require('./key');var Signature=require('./signature');function EDDSA(curve){assert(curve==='ed25519','only tested with ed25519 so far');if(!(this instanceof EDDSA))return new EDDSA(curve);var curve=elliptic.curves[curve].curve;this.curve=curve;this.g=curve.g;this.g.precompute(curve.n.bitLength()+1);this.pointClass=curve.point().constructor;this.encodingLength=Math.ceil(curve.n.bitLength()/8);this.hash=hash.sha512;}module.exports=EDDSA;EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded});};EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message);sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG);};EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++){hash.update(arguments[i]);}return utils.intFromLE(hash.digest()).umod(this.curve.n);};EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub);};EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret);};EDDSA.prototype.makeSignature=function makeSignature(sig){if(sig instanceof Signature)return sig;return new Signature(this,sig);};EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray('le',this.encodingLength);enc[this.encodingLength-1]|=point.getX().isOdd()?0x80:0;return enc;};EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~0x80);var xIsOdd=(bytes[lastIx]&0x80)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd);};EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray('le',this.encodingLength);};EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes);};EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass;};

},{"../../elliptic":114,"./key":125,"./signature":126,"hash.js":292}],115:[function(require,module,exports){
'use strict';var BN=require('bn.js');var elliptic=require('../../elliptic');var utils=elliptic.utils;var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var adjustCount=this.n&&this.p.div(this.n);if(!adjustCount||adjustCount.cmpn(100)>0){this.redN=null;}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red);}}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error('Not implemented');};BaseCurve.prototype.validate=function validate(){throw new Error('Not implemented');};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--){nafW=(nafW<<1)+naf[k];}repr.push(nafW);}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg());}a=a.add(b);}return a.toP();};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--){k++;}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==='affine'){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg());}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg());}}return p.type==='affine'?acc.toP():acc;};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points;}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]);naf[b]=getNAF(coeffs[b],wndWidth[b]);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue;}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg());}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb;}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false;}if(!zero)break;k++;i--;}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==='affine')acc=acc.mixedAdd(p);else acc=acc.add(p);}}for(var i=0;i<len;i++){wnd[i]=null;}if(jacobianResult)return acc;else return acc.toP();};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null;}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error('Not implemented');};BasePoint.prototype.validate=function validate(){return this.curve.validate(this);};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===0x04||bytes[0]===0x06||bytes[0]===0x07)&&bytes.length-1===2*len){if(bytes[0]===0x06)assert(bytes[bytes.length-1]%2===0);else if(bytes[0]===0x07)assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res;}else if((bytes[0]===0x02||bytes[0]===0x03)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===0x03);}throw new Error('Unknown point format');};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true);};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray('be',len);if(compact)return[this.getY().isEven()?0x02:0x03].concat(x);return[0x04].concat(x,this.getY().toArray('be',len));};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc);};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this;};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return false;var doubles=this.precomputed.doubles;if(!doubles)return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step);};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++){acc=acc.dbl();}doubles.push(acc);}return{step:step,points:doubles};};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++){res[i]=res[i-1].add(dbl);}return{wnd:wnd,points:res};};BasePoint.prototype._getBeta=function _getBeta(){return null;};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++){r=r.dbl();}return r;};

},{"../../elliptic":114,"bn.js":132}],116:[function(require,module,exports){
'use strict';var curve=require('../curve');var elliptic=require('../../elliptic');var BN=require('bn.js');var inherits=require('inherits');var Base=curve.base;var assert=elliptic.utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,'edwards',conf);this.a=new BN(conf.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1;}inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)return num.redNeg();else return this.a.redMul(num);};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)return num;else return this.c.redMul(num);};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t);};EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16);if(!y.red)y=y.toRed(this.red);var y2=y.redSqr();var lhs=y2.redSub(this.one);var rhs=y2.redMul(this.d).redAdd(this.one);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0){if(odd)throw new Error('invalid point');else return this.point(this.zero,y);}var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)throw new Error('invalid point');if(x.isOdd()!==odd)x=x.redNeg();return this.point(x,y);};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0;};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,'projective');if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=z?new BN(z,16):this.curve.one;this.t=t&&new BN(t,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm());}}}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t);};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2]);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&this.y.cmp(this.z)===0;};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f);}else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j);}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.c.redMul(this.z)).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j);}return this.curve.point(nx,ny,nz);};Point.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl();};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g);}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g);}return this.curve.point(nx,ny,nz);};Point.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;if(this.curve.extended)return this._extAdd(p);else return this._projAdd(p);};Point.prototype.mul=function mul(k){if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,false);};Point.prototype.jmulAdd=function jmulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,true);};Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this;};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg());};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed();};Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0;};Point.prototype.eqXToP=function eqXToP(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(this.z);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true;}return false;};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;

},{"../../elliptic":114,"../curve":117,"bn.js":132,"inherits":129}],129:[function(require,module,exports){
if(typeof Object.create==='function'){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});}};}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function TempCtor(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;}};}

},{}],119:[function(require,module,exports){
'use strict';var curve=require('../curve');var elliptic=require('../../elliptic');var BN=require('bn.js');var inherits=require('inherits');var Base=curve.base;var assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,'short',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4);}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red);}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red);}if(conf.lambda){lambda=new BN(conf.lambda,16);}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0];}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0);}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)};});}else{basis=this._getEndoBasis(lambda);}return{beta:beta,lambda:lambda,basis:basis};};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2];};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x;}else if(a1&&++i===2){break;}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y;}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0;}if(a1.negative){a1=a1.neg();b1=b1.neg();}if(a2.negative){a2=a2.neg();b2=b2.neg();}return[{a:a1,b:b1},{a:a2,b:b2}];};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2};};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0;};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true);}if(split.k2.negative){split.k2.ineg();beta=beta.neg(true);}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2;}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null;}return res;};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,'affine');if(x===null&&y===null){this.x=null;this.y=null;this.inf=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false;}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed);};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red);};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function endoMul(p){return curve.point(p.x.redMul(curve.endo.beta),p.y);};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}};}return beta;};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}];};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==='string')obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red);}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res;};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.inf;};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.getX=function getX(){return this.x.fromRed();};Point.prototype.getY=function getY(){return this.y.fromRed();};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2);};Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs,true);else return this.curve._wnafMulAdd(1,points,coeffs,2,true);};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0);};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function negate(p){return p.neg();};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}};}return res;};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res;};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,'jacobian');if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0);}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one;}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z);};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay);};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z);};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++){r=r.dbl();}return r;}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny;}return this.curve.jpoint(jx,jyd.redMul(tinv),jz);};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl();};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k);};JPoint.prototype.eq=function eq(p){if(p.type==='affine')return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0;};JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(zs);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true;}return false;};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC JPoint Infinity>';return'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>';};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};

},{"../../elliptic":114,"../curve":117,"bn.js":132,"inherits":129}],118:[function(require,module,exports){
'use strict';var curve=require('../curve');var BN=require('bn.js');var inherits=require('inherits');var Base=curve.base;var elliptic=require('../../elliptic');var utils=elliptic.utils;function MontCurve(conf){Base.call(this,'mont',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.i4=new BN(4).toRed(this.red).redInvm();this.two=new BN(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two));}inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0;};function Point(curve,x,z){Base.BasePoint.call(this,curve,'projective');if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero;}else{this.x=new BN(x,16);this.z=new BN(z,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);}}inherits(Point,Base.BasePoint);MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1);};MontCurve.prototype.point=function point(x,z){return new Point(this,x,z);};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};Point.prototype.precompute=function precompute(){};Point.prototype._encode=function _encode(){return this.getX().toArray('be',this.curve.p.byteLength());};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz);};Point.prototype.add=function add(){throw new Error('Not supported on Montgomery curve');};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz);};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1)){bits.push(t.andln(1));}for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl();}else{b=a.diffAdd(b,c);a=a.dbl();}}return b;};Point.prototype.mulAdd=function mulAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.jumlAdd=function jumlAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0;};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this;};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};

},{"../../elliptic":114,"../curve":117,"bn.js":132,"inherits":129}],127:[function(require,module,exports){
module.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}};

},{}],292:[function(require,module,exports){
var hash=exports;hash.utils=require('./hash/utils');hash.common=require('./hash/common');hash.sha=require('./hash/sha');hash.ripemd=require('./hash/ripemd');hash.hmac=require('./hash/hmac');hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160;

},{"./hash/common":293,"./hash/hmac":294,"./hash/ripemd":295,"./hash/sha":296,"./hash/utils":303}],304:[function(require,module,exports){
'use strict';var hash=require('hash.js');var utils=require('minimalistic-crypto-utils');var assert=require('minimalistic-assert');function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||'hex');var nonce=utils.toArray(options.nonce,options.nonceEnc||'hex');var pers=utils.toArray(options.pers,options.persEnc||'hex');assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._init(entropy,nonce,pers);}module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0x00;this.V[i]=0x01;}this._update(seed);this._reseed=1;this.reseedInterval=0x1000000000000;};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K);};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0x00]);if(seed)kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)return;this.K=this._hmac().update(this.V).update([0x01]).update(seed).digest();this.V=this._hmac().update(this.V).digest();};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=='string'){addEnc=add;add=entropyEnc;entropyEnc=null;}entropy=utils.toArray(entropy,entropyEnc);add=utils.toArray(add,addEnc);assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._update(entropy.concat(add||[]));this._reseed=1;};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error('Reseed is required');if(typeof enc!=='string'){addEnc=add;add=enc;enc=null;}if(add){add=utils.toArray(add,addEnc||'hex');this._update(add);}var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V);}var res=temp.slice(0,len);this._update(add);this._reseed++;return utils.encode(res,enc);};

},{"hash.js":292,"minimalistic-assert":480,"minimalistic-crypto-utils":481}],122:[function(require,module,exports){
'use strict';var BN=require('bn.js');var elliptic=require('../../elliptic');var utils=elliptic.utils;var assert=utils.assert;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc);}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc});};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc});};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:'Invalid public key'};if(!pub.validate())return{result:false,reason:'Public key is not a point'};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:'Public key * N != O'};return{result:true,reason:null};};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==='string'){enc=compact;compact=null;}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!enc)return this.pub;return this.pub.encode(enc,compact);};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==='hex')return this.priv.toString(16,2);else return this.priv;};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n);};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){if(this.ec.curve.type==='mont'){assert(key.x,'Need x coordinate');}else if(this.ec.curve.type==='short'||this.ec.curve.type==='edwards'){assert(key.x&&key.y,'Need both x and y coordinate');}this.pub=this.ec.curve.point(key.x,key.y);return;}this.pub=this.ec.curve.decodePoint(key,enc);};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX();};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options);};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this);};KeyPair.prototype.inspect=function inspect(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >';};

},{"../../elliptic":114,"bn.js":132}],123:[function(require,module,exports){
'use strict';var BN=require('bn.js');var elliptic=require('../../elliptic');var utils=elliptic.utils;var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,'Signature without r or s');this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=options.recoveryParam;}module.exports=Signature;function Position(){this.place=0;}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&0x80)){return initial;}var octetLen=initial&0xf;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off];}p.place=off;return val;}function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&0x80)&&i<len){i++;}if(i===0){return buf;}return buf.slice(i);}Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position();if(data[p.place++]!==0x30){return false;}var len=getLength(data,p);if(len+p.place!==data.length){return false;}if(data[p.place++]!==0x02){return false;}var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==0x02){return false;}var slen=getLength(data,p);if(data.length!==slen+p.place){return false;}var s=data.slice(p.place,slen+p.place);if(r[0]===0&&r[1]&0x80){r=r.slice(1);}if(s[0]===0&&s[1]&0x80){s=s.slice(1);}this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true;};function constructLength(arr,len){if(len<0x80){arr.push(len);return;}var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|0x80);while(--octets){arr.push(len>>>(octets<<3)&0xff);}arr.push(len);}Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&0x80)){s=s.slice(1);}var arr=[0x02];constructLength(arr,r.length);arr=arr.concat(r);arr.push(0x02);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[0x30];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc);};

},{"../../elliptic":114,"bn.js":132}],125:[function(require,module,exports){
'use strict';var elliptic=require('../../elliptic');var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa;this._secret=parseBytes(params.secret);if(eddsa.isPoint(params.pub))this._pub=params.pub;else this._pubBytes=parseBytes(params.pub);}KeyPair.fromPublic=function fromPublic(eddsa,pub){if(pub instanceof KeyPair)return pub;return new KeyPair(eddsa,{pub:pub});};KeyPair.fromSecret=function fromSecret(eddsa,secret){if(secret instanceof KeyPair)return secret;return new KeyPair(eddsa,{secret:secret});};KeyPair.prototype.secret=function secret(){return this._secret;};cachedProperty(KeyPair,'pubBytes',function pubBytes(){return this.eddsa.encodePoint(this.pub());});cachedProperty(KeyPair,'pub',function pub(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv());});cachedProperty(KeyPair,'privBytes',function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);a[0]&=248;a[lastIx]&=127;a[lastIx]|=64;return a;});cachedProperty(KeyPair,'priv',function priv(){return this.eddsa.decodeInt(this.privBytes());});cachedProperty(KeyPair,'hash',function hash(){return this.eddsa.hash().update(this.secret()).digest();});cachedProperty(KeyPair,'messagePrefix',function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength);});KeyPair.prototype.sign=function sign(message){assert(this._secret,'KeyPair can only verify');return this.eddsa.sign(message,this);};KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this);};KeyPair.prototype.getSecret=function getSecret(enc){assert(this._secret,'KeyPair is public only');return utils.encode(this.secret(),enc);};KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc);};module.exports=KeyPair;

},{"../../elliptic":114}],126:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var BN=require('bn.js');var elliptic=require('../../elliptic');var utils=elliptic.utils;var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa;if((0,_typeof2["default"])(sig)!=='object')sig=parseBytes(sig);if(Array.isArray(sig)){sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)};}assert(sig.R&&sig.S,'Signature without R or S');if(eddsa.isPoint(sig.R))this._R=sig.R;if(sig.S instanceof BN)this._S=sig.S;this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded;this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded;}cachedProperty(Signature,'S',function S(){return this.eddsa.decodeInt(this.Sencoded());});cachedProperty(Signature,'R',function R(){return this.eddsa.decodePoint(this.Rencoded());});cachedProperty(Signature,'Rencoded',function Rencoded(){return this.eddsa.encodePoint(this.R());});cachedProperty(Signature,'Sencoded',function Sencoded(){return this.eddsa.encodeInt(this.S());});Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded());};Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),'hex').toUpperCase();};module.exports=Signature;

},{"../../elliptic":114,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132}],480:[function(require,module,exports){
module.exports=assert;function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||'Assertion failed: '+l+' != '+r);};

},{}],481:[function(require,module,exports){
'use strict';var utils=exports;function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=='string'){for(var i=0;i<msg.length;i++){res[i]=msg[i]|0;}return res;}if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)msg='0'+msg;for(var i=0;i<msg.length;i+=2){res.push(parseInt(msg[i]+msg[i+1],16));}}else{for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&0xff;if(hi)res.push(hi,lo);else res.push(lo);}}return res;}utils.toArray=toArray;function zero2(word){if(word.length===1)return'0'+word;else return word;}utils.zero2=zero2;function toHex(msg){var res='';for(var i=0;i<msg.length;i++){res+=zero2(msg[i].toString(16));}return res;}utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==='hex')return toHex(arr);else return arr;};

},{}],1104:[function(require,module,exports){


},{}],134:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;function asUInt32Array(buf){if(!Buffer.isBuffer(buf))buf=Buffer.from(buf);var len=buf.length/4|0;var out=new Array(len);for(var i=0;i<len;i++){out[i]=buf.readUInt32BE(i*4);}return out;}function scrubVec(v){for(var i=0;i<v.length;v++){v[i]=0;}}function cryptBlock(M,keySchedule,SUB_MIX,SBOX,nRounds){var SUB_MIX0=SUB_MIX[0];var SUB_MIX1=SUB_MIX[1];var SUB_MIX2=SUB_MIX[2];var SUB_MIX3=SUB_MIX[3];var s0=M[0]^keySchedule[0];var s1=M[1]^keySchedule[1];var s2=M[2]^keySchedule[2];var s3=M[3]^keySchedule[3];var t0,t1,t2,t3;var ksRow=4;for(var round=1;round<nRounds;round++){t0=SUB_MIX0[s0>>>24]^SUB_MIX1[s1>>>16&0xff]^SUB_MIX2[s2>>>8&0xff]^SUB_MIX3[s3&0xff]^keySchedule[ksRow++];t1=SUB_MIX0[s1>>>24]^SUB_MIX1[s2>>>16&0xff]^SUB_MIX2[s3>>>8&0xff]^SUB_MIX3[s0&0xff]^keySchedule[ksRow++];t2=SUB_MIX0[s2>>>24]^SUB_MIX1[s3>>>16&0xff]^SUB_MIX2[s0>>>8&0xff]^SUB_MIX3[s1&0xff]^keySchedule[ksRow++];t3=SUB_MIX0[s3>>>24]^SUB_MIX1[s0>>>16&0xff]^SUB_MIX2[s1>>>8&0xff]^SUB_MIX3[s2&0xff]^keySchedule[ksRow++];s0=t0;s1=t1;s2=t2;s3=t3;}t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&0xff]<<16|SBOX[s2>>>8&0xff]<<8|SBOX[s3&0xff])^keySchedule[ksRow++];t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&0xff]<<16|SBOX[s3>>>8&0xff]<<8|SBOX[s0&0xff])^keySchedule[ksRow++];t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&0xff]<<16|SBOX[s0>>>8&0xff]<<8|SBOX[s1&0xff])^keySchedule[ksRow++];t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&0xff]<<16|SBOX[s1>>>8&0xff]<<8|SBOX[s2&0xff])^keySchedule[ksRow++];t0=t0>>>0;t1=t1>>>0;t2=t2>>>0;t3=t3>>>0;return[t0,t1,t2,t3];}var RCON=[0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36];var G=function(){var d=new Array(256);for(var j=0;j<256;j++){if(j<128){d[j]=j<<1;}else{d[j]=j<<1^0x11b;}}var SBOX=[];var INV_SBOX=[];var SUB_MIX=[[],[],[],[]];var INV_SUB_MIX=[[],[],[],[]];var x=0;var xi=0;for(var i=0;i<256;++i){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&0xff^0x63;SBOX[x]=sx;INV_SBOX[sx]=x;var x2=d[x];var x4=d[x2];var x8=d[x4];var t=d[sx]*0x101^sx*0x1010100;SUB_MIX[0][x]=t<<24|t>>>8;SUB_MIX[1][x]=t<<16|t>>>16;SUB_MIX[2][x]=t<<8|t>>>24;SUB_MIX[3][x]=t;t=x8*0x1010101^x4*0x10001^x2*0x101^x*0x1010100;INV_SUB_MIX[0][sx]=t<<24|t>>>8;INV_SUB_MIX[1][sx]=t<<16|t>>>16;INV_SUB_MIX[2][sx]=t<<8|t>>>24;INV_SUB_MIX[3][sx]=t;if(x===0){x=xi=1;}else{x=x2^d[d[d[x8^x2]]];xi^=d[d[xi]];}}return{SBOX:SBOX,INV_SBOX:INV_SBOX,SUB_MIX:SUB_MIX,INV_SUB_MIX:INV_SUB_MIX};}();function AES(key){this._key=asUInt32Array(key);this._reset();}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){var keyWords=this._key;var keySize=keyWords.length;var nRounds=keySize+6;var ksRows=(nRounds+1)*4;var keySchedule=[];for(var k=0;k<keySize;k++){keySchedule[k]=keyWords[k];}for(k=keySize;k<ksRows;k++){var t=keySchedule[k-1];if(k%keySize===0){t=t<<8|t>>>24;t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&0xff]<<16|G.SBOX[t>>>8&0xff]<<8|G.SBOX[t&0xff];t^=RCON[k/keySize|0]<<24;}else if(keySize>6&&k%keySize===4){t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&0xff]<<16|G.SBOX[t>>>8&0xff]<<8|G.SBOX[t&0xff];}keySchedule[k]=keySchedule[k-keySize]^t;}var invKeySchedule=[];for(var ik=0;ik<ksRows;ik++){var ksR=ksRows-ik;var tt=keySchedule[ksR-(ik%4?0:4)];if(ik<4||ksR<=4){invKeySchedule[ik]=tt;}else{invKeySchedule[ik]=G.INV_SUB_MIX[0][G.SBOX[tt>>>24]]^G.INV_SUB_MIX[1][G.SBOX[tt>>>16&0xff]]^G.INV_SUB_MIX[2][G.SBOX[tt>>>8&0xff]]^G.INV_SUB_MIX[3][G.SBOX[tt&0xff]];}}this._nRounds=nRounds;this._keySchedule=keySchedule;this._invKeySchedule=invKeySchedule;};AES.prototype.encryptBlockRaw=function(M){M=asUInt32Array(M);return cryptBlock(M,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds);};AES.prototype.encryptBlock=function(M){var out=this.encryptBlockRaw(M);var buf=Buffer.allocUnsafe(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[1],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[3],12);return buf;};AES.prototype.decryptBlock=function(M){M=asUInt32Array(M);var m1=M[1];M[1]=M[3];M[3]=m1;var out=cryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds);var buf=Buffer.allocUnsafe(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[3],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[1],12);return buf;};AES.prototype.scrub=function(){scrubVec(this._keySchedule);scrubVec(this._invKeySchedule);scrubVec(this._key);};module.exports.AES=AES;

},{"safe-buffer":639}],135:[function(require,module,exports){
var aes=require('./aes');var Buffer=require('safe-buffer').Buffer;var Transform=require('cipher-base');var inherits=require('inherits');var GHASH=require('./ghash');var xor=require('buffer-xor');var incr32=require('./incr32');function xorTest(a,b){var out=0;if(a.length!==b.length)out++;var len=Math.min(a.length,b.length);for(var i=0;i<len;++i){out+=a[i]^b[i];}return out;}function calcIv(self,iv,ck){if(iv.length===12){self._finID=Buffer.concat([iv,Buffer.from([0,0,0,1])]);return Buffer.concat([iv,Buffer.from([0,0,0,2])]);}var ghash=new GHASH(ck);var len=iv.length;var toPad=len%16;ghash.update(iv);if(toPad){toPad=16-toPad;ghash.update(Buffer.alloc(toPad,0));}ghash.update(Buffer.alloc(8,0));var ivBits=len*8;var tail=Buffer.alloc(8);tail.writeUIntBE(ivBits,0,8);ghash.update(tail);self._finID=ghash.state;var out=Buffer.from(self._finID);incr32(out);return out;}function StreamCipher(mode,key,iv,decrypt){Transform.call(this);var h=Buffer.alloc(4,0);this._cipher=new aes.AES(key);var ck=this._cipher.encryptBlock(h);this._ghash=new GHASH(ck);iv=calcIv(this,iv,ck);this._prev=Buffer.from(iv);this._cache=Buffer.allocUnsafe(0);this._secCache=Buffer.allocUnsafe(0);this._decrypt=decrypt;this._alen=0;this._len=0;this._mode=mode;this._authTag=null;this._called=false;}inherits(StreamCipher,Transform);StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-this._alen%16;if(rump<16){rump=Buffer.alloc(rump,0);this._ghash.update(rump);}}this._called=true;var out=this._mode.encrypt(this,chunk);if(this._decrypt){this._ghash.update(chunk);}else{this._ghash.update(out);}this._len+=chunk.length;return out;};StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error('Unsupported state or unable to authenticate data');var tag=xor(this._ghash["final"](this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(tag,this._authTag))throw new Error('Unsupported state or unable to authenticate data');this._authTag=tag;this._cipher.scrub();};StreamCipher.prototype.getAuthTag=function getAuthTag(){if(this._decrypt||!Buffer.isBuffer(this._authTag))throw new Error('Attempting to get auth tag in unsupported state');return this._authTag;};StreamCipher.prototype.setAuthTag=function setAuthTag(tag){if(!this._decrypt)throw new Error('Attempting to set auth tag in unsupported state');this._authTag=tag;};StreamCipher.prototype.setAAD=function setAAD(buf){if(this._called)throw new Error('Attempting to set AAD in unsupported state');this._ghash.update(buf);this._alen+=buf.length;};module.exports=StreamCipher;

},{"./aes":134,"./ghash":139,"./incr32":140,"buffer-xor":166,"cipher-base":169,"inherits":307,"safe-buffer":639}],140:[function(require,module,exports){
function incr32(iv){var len=iv.length;var item;while(len--){item=iv.readUInt8(len);if(item===255){iv.writeUInt8(0,len);}else{item++;iv.writeUInt8(item,len);break;}}}module.exports=incr32;

},{}],307:[function(require,module,exports){
arguments[4][129][0].apply(exports,arguments)
},{"dup":129}],169:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;var Transform=require('stream').Transform;var StringDecoder=require('string_decoder').StringDecoder;var inherits=require('inherits');function CipherBase(hashMode){Transform.call(this);this.hashMode=typeof hashMode==='string';if(this.hashMode){this[hashMode]=this._finalOrDigest;}else{this["final"]=this._finalOrDigest;}if(this._final){this.__final=this._final;this._final=null;}this._decoder=null;this._encoding=null;}inherits(CipherBase,Transform);CipherBase.prototype.update=function(data,inputEnc,outputEnc){if(typeof data==='string'){data=Buffer.from(data,inputEnc);}var outData=this._update(data);if(this.hashMode)return this;if(outputEnc){outData=this._toString(outData,outputEnc);}return outData;};CipherBase.prototype.setAutoPadding=function(){};CipherBase.prototype.getAuthTag=function(){throw new Error('trying to get auth tag in unsupported state');};CipherBase.prototype.setAuthTag=function(){throw new Error('trying to set auth tag in unsupported state');};CipherBase.prototype.setAAD=function(){throw new Error('trying to set aad in unsupported state');};CipherBase.prototype._transform=function(data,_,next){var err;try{if(this.hashMode){this._update(data);}else{this.push(this._update(data));}}catch(e){err=e;}finally{next(err);}};CipherBase.prototype._flush=function(done){var err;try{this.push(this.__final());}catch(e){err=e;}done(err);};CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer.alloc(0);if(outputEnc){outData=this._toString(outData,outputEnc,true);}return outData;};CipherBase.prototype._toString=function(value,enc,fin){if(!this._decoder){this._decoder=new StringDecoder(enc);this._encoding=enc;}if(this._encoding!==enc)throw new Error('can\'t switch encodings');var out=this._decoder.write(value);if(fin){out+=this._decoder.end();}return out;};module.exports=CipherBase;

},{"inherits":307,"safe-buffer":639,"stream":1259,"string_decoder":1279}],166:[function(require,module,exports){
(function (Buffer){
module.exports=function xor(a,b){var length=Math.min(a.length,b.length);var buffer=new Buffer(length);for(var i=0;i<length;++i){buffer[i]=a[i]^b[i];}return buffer;};

}).call(this,require("buffer").Buffer)

},{"buffer":1133}],139:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;var ZEROES=Buffer.alloc(16,0);function toArray(buf){return[buf.readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)];}function fromArray(out){var buf=Buffer.allocUnsafe(16);buf.writeUInt32BE(out[0]>>>0,0);buf.writeUInt32BE(out[1]>>>0,4);buf.writeUInt32BE(out[2]>>>0,8);buf.writeUInt32BE(out[3]>>>0,12);return buf;}function GHASH(key){this.h=key;this.state=Buffer.alloc(16,0);this.cache=Buffer.allocUnsafe(0);}GHASH.prototype.ghash=function(block){var i=-1;while(++i<block.length){this.state[i]^=block[i];}this._multiply();};GHASH.prototype._multiply=function(){var Vi=toArray(this.h);var Zi=[0,0,0,0];var j,xi,lsbVi;var i=-1;while(++i<128){xi=(this.state[~~(i/8)]&1<<7-i%8)!==0;if(xi){Zi[0]^=Vi[0];Zi[1]^=Vi[1];Zi[2]^=Vi[2];Zi[3]^=Vi[3];}lsbVi=(Vi[3]&1)!==0;for(j=3;j>0;j--){Vi[j]=Vi[j]>>>1|(Vi[j-1]&1)<<31;}Vi[0]=Vi[0]>>>1;if(lsbVi){Vi[0]=Vi[0]^0xe1<<24;}}this.state=fromArray(Zi);};GHASH.prototype.update=function(buf){this.cache=Buffer.concat([this.cache,buf]);var chunk;while(this.cache.length>=16){chunk=this.cache.slice(0,16);this.cache=this.cache.slice(16);this.ghash(chunk);}};GHASH.prototype["final"]=function(abl,bl){if(this.cache.length){this.ghash(Buffer.concat([this.cache,ZEROES],16));}this.ghash(fromArray([0,abl,0,bl]));return this.state;};module.exports=GHASH;

},{"safe-buffer":639}],136:[function(require,module,exports){
var ciphers=require('./encrypter');var deciphers=require('./decrypter');var modes=require('./modes/list.json');function getCiphers(){return Object.keys(modes);}/* common-shake removed: exports.createCipher = */ void 0, /* common-shake removed: exports.Cipher = */ ciphers.createCipher;exports.createCipheriv=/* common-shake removed: exports.Cipheriv = */ ciphers.createCipheriv;/* common-shake removed: exports.createDecipher = */ void 0, /* common-shake removed: exports.Decipher = */ deciphers.createDecipher;exports.createDecipheriv=/* common-shake removed: exports.Decipheriv = */ deciphers.createDecipheriv;/* common-shake removed: exports.listCiphers = */ void 0, exports.getCiphers=getCiphers;

},{"./decrypter":137,"./encrypter":138,"./modes/list.json":148}],148:[function(require,module,exports){
module.exports={
  "aes-128-ecb": {
    "cipher": "AES",
    "key": 128,
    "iv": 0,
    "mode": "ECB",
    "type": "block"
  },
  "aes-192-ecb": {
    "cipher": "AES",
    "key": 192,
    "iv": 0,
    "mode": "ECB",
    "type": "block"
  },
  "aes-256-ecb": {
    "cipher": "AES",
    "key": 256,
    "iv": 0,
    "mode": "ECB",
    "type": "block"
  },
  "aes-128-cbc": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "CBC",
    "type": "block"
  },
  "aes-192-cbc": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "CBC",
    "type": "block"
  },
  "aes-256-cbc": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "CBC",
    "type": "block"
  },
  "aes128": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "CBC",
    "type": "block"
  },
  "aes192": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "CBC",
    "type": "block"
  },
  "aes256": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "CBC",
    "type": "block"
  },
  "aes-128-cfb": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "CFB",
    "type": "stream"
  },
  "aes-192-cfb": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "CFB",
    "type": "stream"
  },
  "aes-256-cfb": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "CFB",
    "type": "stream"
  },
  "aes-128-cfb8": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "CFB8",
    "type": "stream"
  },
  "aes-192-cfb8": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "CFB8",
    "type": "stream"
  },
  "aes-256-cfb8": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "CFB8",
    "type": "stream"
  },
  "aes-128-cfb1": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "CFB1",
    "type": "stream"
  },
  "aes-192-cfb1": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "CFB1",
    "type": "stream"
  },
  "aes-256-cfb1": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "CFB1",
    "type": "stream"
  },
  "aes-128-ofb": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "OFB",
    "type": "stream"
  },
  "aes-192-ofb": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "OFB",
    "type": "stream"
  },
  "aes-256-ofb": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "OFB",
    "type": "stream"
  },
  "aes-128-ctr": {
    "cipher": "AES",
    "key": 128,
    "iv": 16,
    "mode": "CTR",
    "type": "stream"
  },
  "aes-192-ctr": {
    "cipher": "AES",
    "key": 192,
    "iv": 16,
    "mode": "CTR",
    "type": "stream"
  },
  "aes-256-ctr": {
    "cipher": "AES",
    "key": 256,
    "iv": 16,
    "mode": "CTR",
    "type": "stream"
  },
  "aes-128-gcm": {
    "cipher": "AES",
    "key": 128,
    "iv": 12,
    "mode": "GCM",
    "type": "auth"
  },
  "aes-192-gcm": {
    "cipher": "AES",
    "key": 192,
    "iv": 12,
    "mode": "GCM",
    "type": "auth"
  },
  "aes-256-gcm": {
    "cipher": "AES",
    "key": 256,
    "iv": 12,
    "mode": "GCM",
    "type": "auth"
  }
}

},{}],137:[function(require,module,exports){
var AuthCipher=require('./authCipher');var Buffer=require('safe-buffer').Buffer;var MODES=require('./modes');var StreamCipher=require('./streamCipher');var Transform=require('cipher-base');var aes=require('./aes');var ebtk=require('evp_bytestokey');var inherits=require('inherits');function Decipher(mode,key,iv){Transform.call(this);this._cache=new Splitter();this._last=void 0;this._cipher=new aes.AES(key);this._prev=Buffer.from(iv);this._mode=mode;this._autopadding=true;}inherits(Decipher,Transform);Decipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;var out=[];while(chunk=this._cache.get(this._autopadding)){thing=this._mode.decrypt(this,chunk);out.push(thing);}return Buffer.concat(out);};Decipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding){return unpad(this._mode.decrypt(this,chunk));}else if(chunk){throw new Error('data not multiple of block length');}};Decipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo;return this;};function Splitter(){this.cache=Buffer.allocUnsafe(0);}Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data]);};Splitter.prototype.get=function(autoPadding){var out;if(autoPadding){if(this.cache.length>16){out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out;}}else{if(this.cache.length>=16){out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out;}}return null;};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache;};function unpad(last){var padded=last[15];if(padded<1||padded>16){throw new Error('unable to decrypt data');}var i=-1;while(++i<padded){if(last[i+(16-padded)]!==padded){throw new Error('unable to decrypt data');}}if(padded===16)return;return last.slice(0,16-padded);}function createDecipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');if(typeof iv==='string')iv=Buffer.from(iv);if(config.mode!=='GCM'&&iv.length!==config.iv)throw new TypeError('invalid iv length '+iv.length);if(typeof password==='string')password=Buffer.from(password);if(password.length!==config.key/8)throw new TypeError('invalid key length '+password.length);if(config.type==='stream'){return new StreamCipher(config.module,password,iv,true);}else if(config.type==='auth'){return new AuthCipher(config.module,password,iv,true);}return new Decipher(config.module,password,iv);}function createDecipher(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');var keys=ebtk(password,false,config.key,config.iv);return createDecipheriv(suite,keys.key,keys.iv);}exports.createDecipher = createDecipher;exports.createDecipheriv = createDecipheriv;

},{"./aes":134,"./authCipher":135,"./modes":147,"./streamCipher":150,"cipher-base":169,"evp_bytestokey":290,"inherits":307,"safe-buffer":639}],138:[function(require,module,exports){
var MODES=require('./modes');var AuthCipher=require('./authCipher');var Buffer=require('safe-buffer').Buffer;var StreamCipher=require('./streamCipher');var Transform=require('cipher-base');var aes=require('./aes');var ebtk=require('evp_bytestokey');var inherits=require('inherits');function Cipher(mode,key,iv){Transform.call(this);this._cache=new Splitter();this._cipher=new aes.AES(key);this._prev=Buffer.from(iv);this._mode=mode;this._autopadding=true;}inherits(Cipher,Transform);Cipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;var out=[];while(chunk=this._cache.get()){thing=this._mode.encrypt(this,chunk);out.push(thing);}return Buffer.concat(out);};var PADDING=Buffer.alloc(16,0x10);Cipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding){chunk=this._mode.encrypt(this,chunk);this._cipher.scrub();return chunk;}if(!chunk.equals(PADDING)){this._cipher.scrub();throw new Error('data not multiple of block length');}};Cipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo;return this;};function Splitter(){this.cache=Buffer.allocUnsafe(0);}Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data]);};Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out;}return null;};Splitter.prototype.flush=function(){var len=16-this.cache.length;var padBuff=Buffer.allocUnsafe(len);var i=-1;while(++i<len){padBuff.writeUInt8(len,i);}return Buffer.concat([this.cache,padBuff]);};function createCipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');if(typeof password==='string')password=Buffer.from(password);if(password.length!==config.key/8)throw new TypeError('invalid key length '+password.length);if(typeof iv==='string')iv=Buffer.from(iv);if(config.mode!=='GCM'&&iv.length!==config.iv)throw new TypeError('invalid iv length '+iv.length);if(config.type==='stream'){return new StreamCipher(config.module,password,iv);}else if(config.type==='auth'){return new AuthCipher(config.module,password,iv);}return new Cipher(config.module,password,iv);}function createCipher(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');var keys=ebtk(password,false,config.key,config.iv);return createCipheriv(suite,keys.key,keys.iv);}exports.createCipheriv = createCipheriv;exports.createCipher = createCipher;

},{"./aes":134,"./authCipher":135,"./modes":147,"./streamCipher":150,"cipher-base":169,"evp_bytestokey":290,"inherits":307,"safe-buffer":639}],150:[function(require,module,exports){
var aes=require('./aes');var Buffer=require('safe-buffer').Buffer;var Transform=require('cipher-base');var inherits=require('inherits');function StreamCipher(mode,key,iv,decrypt){Transform.call(this);this._cipher=new aes.AES(key);this._prev=Buffer.from(iv);this._cache=Buffer.allocUnsafe(0);this._secCache=Buffer.allocUnsafe(0);this._decrypt=decrypt;this._mode=mode;}inherits(StreamCipher,Transform);StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt);};StreamCipher.prototype._final=function(){this._cipher.scrub();};module.exports=StreamCipher;

},{"./aes":134,"cipher-base":169,"inherits":307,"safe-buffer":639}],147:[function(require,module,exports){
var modeModules={ECB:require('./ecb'),CBC:require('./cbc'),CFB:require('./cfb'),CFB8:require('./cfb8'),CFB1:require('./cfb1'),OFB:require('./ofb'),CTR:require('./ctr'),GCM:require('./ctr')};var modes=require('./list.json');for(var key in modes){modes[key].module=modeModules[modes[key].mode];}module.exports=modes;

},{"./cbc":141,"./cfb":142,"./cfb1":143,"./cfb8":144,"./ctr":145,"./ecb":146,"./list.json":148,"./ofb":149}],290:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;var MD5=require('md5.js');function EVP_BytesToKey(password,salt,keyBits,ivLen){if(!Buffer.isBuffer(password))password=Buffer.from(password,'binary');if(salt){if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,'binary');if(salt.length!==8)throw new RangeError('salt should be Buffer with 8 byte length');}var keyLen=keyBits/8;var key=Buffer.alloc(keyLen);var iv=Buffer.alloc(ivLen||0);var tmp=Buffer.alloc(0);while(keyLen>0||ivLen>0){var hash=new MD5();hash.update(tmp);hash.update(password);if(salt)hash.update(salt);tmp=hash.digest();var used=0;if(keyLen>0){var keyStart=key.length-keyLen;used=Math.min(keyLen,tmp.length);tmp.copy(key,keyStart,0,used);keyLen-=used;}if(used<tmp.length&&ivLen>0){var ivStart=iv.length-ivLen;var length=Math.min(ivLen,tmp.length-used);tmp.copy(iv,ivStart,used,used+length);ivLen-=length;}}tmp.fill(0);return{key:key,iv:iv};}module.exports=EVP_BytesToKey;

},{"md5.js":478,"safe-buffer":639}],141:[function(require,module,exports){
var xor=require('buffer-xor');exports.encrypt=function(self,block){var data=xor(block,self._prev);self._prev=self._cipher.encryptBlock(data);return self._prev;};exports.decrypt=function(self,block){var pad=self._prev;self._prev=block;var out=self._cipher.decryptBlock(block);return xor(out,pad);};

},{"buffer-xor":166}],142:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;var xor=require('buffer-xor');function encryptStart(self,data,decrypt){var len=data.length;var out=xor(data,self._cache);self._cache=self._cache.slice(len);self._prev=Buffer.concat([self._prev,decrypt?data:out]);return out;}exports.encrypt=function(self,data,decrypt){var out=Buffer.allocUnsafe(0);var len;while(data.length){if(self._cache.length===0){self._cache=self._cipher.encryptBlock(self._prev);self._prev=Buffer.allocUnsafe(0);}if(self._cache.length<=data.length){len=self._cache.length;out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)]);data=data.slice(len);}else{out=Buffer.concat([out,encryptStart(self,data,decrypt)]);break;}}return out;};

},{"buffer-xor":166,"safe-buffer":639}],143:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;function encryptByte(self,byteParam,decrypt){var pad;var i=-1;var len=8;var out=0;var bit,value;while(++i<len){pad=self._cipher.encryptBlock(self._prev);bit=byteParam&1<<7-i?0x80:0;value=pad[0]^bit;out+=(value&0x80)>>i%8;self._prev=shiftIn(self._prev,decrypt?bit:value);}return out;}function shiftIn(buffer,value){var len=buffer.length;var i=-1;var out=Buffer.allocUnsafe(buffer.length);buffer=Buffer.concat([buffer,Buffer.from([value])]);while(++i<len){out[i]=buffer[i]<<1|buffer[i+1]>>7;}return out;}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=Buffer.allocUnsafe(len);var i=-1;while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt);}return out;};

},{"safe-buffer":639}],144:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;function encryptByte(self,byteParam,decrypt){var pad=self._cipher.encryptBlock(self._prev);var out=pad[0]^byteParam;self._prev=Buffer.concat([self._prev.slice(1),Buffer.from([decrypt?byteParam:out])]);return out;}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=Buffer.allocUnsafe(len);var i=-1;while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt);}return out;};

},{"safe-buffer":639}],145:[function(require,module,exports){
var xor=require('buffer-xor');var Buffer=require('safe-buffer').Buffer;var incr32=require('../incr32');function getBlock(self){var out=self._cipher.encryptBlockRaw(self._prev);incr32(self._prev);return out;}var blockSize=16;exports.encrypt=function(self,chunk){var chunkNum=Math.ceil(chunk.length/blockSize);var start=self._cache.length;self._cache=Buffer.concat([self._cache,Buffer.allocUnsafe(chunkNum*blockSize)]);for(var i=0;i<chunkNum;i++){var out=getBlock(self);var offset=start+i*blockSize;self._cache.writeUInt32BE(out[0],offset+0);self._cache.writeUInt32BE(out[1],offset+4);self._cache.writeUInt32BE(out[2],offset+8);self._cache.writeUInt32BE(out[3],offset+12);}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad);};

},{"../incr32":140,"buffer-xor":166,"safe-buffer":639}],146:[function(require,module,exports){
exports.encrypt=function(self,block){return self._cipher.encryptBlock(block);};exports.decrypt=function(self,block){return self._cipher.decryptBlock(block);};

},{}],149:[function(require,module,exports){
(function (Buffer){
var xor=require('buffer-xor');function getBlock(self){self._prev=self._cipher.encryptBlock(self._prev);return self._prev;}exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)]);}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad);};

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"buffer-xor":166}],151:[function(require,module,exports){
var DES=require('browserify-des');var aes=require('browserify-aes/browser');var aesModes=require('browserify-aes/modes');var desModes=require('browserify-des/modes');var ebtk=require('evp_bytestokey');function createCipher(suite,password){suite=suite.toLowerCase();var keyLen,ivLen;if(aesModes[suite]){keyLen=aesModes[suite].key;ivLen=aesModes[suite].iv;}else if(desModes[suite]){keyLen=desModes[suite].key*8;ivLen=desModes[suite].iv;}else{throw new TypeError('invalid suite type');}var keys=ebtk(password,false,keyLen,ivLen);return createCipheriv(suite,keys.key,keys.iv);}function createDecipher(suite,password){suite=suite.toLowerCase();var keyLen,ivLen;if(aesModes[suite]){keyLen=aesModes[suite].key;ivLen=aesModes[suite].iv;}else if(desModes[suite]){keyLen=desModes[suite].key*8;ivLen=desModes[suite].iv;}else{throw new TypeError('invalid suite type');}var keys=ebtk(password,false,keyLen,ivLen);return createDecipheriv(suite,keys.key,keys.iv);}function createCipheriv(suite,key,iv){suite=suite.toLowerCase();if(aesModes[suite])return aes.createCipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite});throw new TypeError('invalid suite type');}function createDecipheriv(suite,key,iv){suite=suite.toLowerCase();if(aesModes[suite])return aes.createDecipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite,decrypt:true});throw new TypeError('invalid suite type');}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers());}exports.createCipher=exports.Cipher=createCipher;exports.createCipheriv=exports.Cipheriv=createCipheriv;exports.createDecipher=exports.Decipher=createDecipher;exports.createDecipheriv=exports.Decipheriv=createDecipheriv;exports.listCiphers=exports.getCiphers=getCiphers;

},{"browserify-aes/browser":136,"browserify-aes/modes":147,"browserify-des":152,"browserify-des/modes":153,"evp_bytestokey":290}],153:[function(require,module,exports){
exports['des-ecb']={key:8,iv:0};exports['des-cbc']=exports.des={key:8,iv:8};exports['des-ede3-cbc']=exports.des3={key:24,iv:8};exports['des-ede3']={key:24,iv:0};exports['des-ede-cbc']={key:16,iv:8};exports['des-ede']={key:16,iv:0};

},{}],152:[function(require,module,exports){
var CipherBase=require('cipher-base');var des=require('des.js');var inherits=require('inherits');var Buffer=require('safe-buffer').Buffer;var modes={'des-ede3-cbc':des.CBC.instantiate(des.EDE),'des-ede3':des.EDE,'des-ede-cbc':des.CBC.instantiate(des.EDE),'des-ede':des.EDE,'des-cbc':des.CBC.instantiate(des.DES),'des-ecb':des.DES};modes.des=modes['des-cbc'];modes.des3=modes['des-ede3-cbc'];module.exports=DES;inherits(DES,CipherBase);function DES(opts){CipherBase.call(this);var modeName=opts.mode.toLowerCase();var mode=modes[modeName];var type;if(opts.decrypt){type='decrypt';}else{type='encrypt';}var key=opts.key;if(!Buffer.isBuffer(key)){key=Buffer.from(key);}if(modeName==='des-ede'||modeName==='des-ede-cbc'){key=Buffer.concat([key,key.slice(0,8)]);}var iv=opts.iv;if(!Buffer.isBuffer(iv)){iv=Buffer.from(iv);}this._des=mode.create({key:key,iv:iv,type:type});}DES.prototype._update=function(data){return Buffer.from(this._des.update(data));};DES.prototype._final=function(){return Buffer.from(this._des["final"]());};

},{"cipher-base":169,"des.js":212,"inherits":307,"safe-buffer":639}],212:[function(require,module,exports){
'use strict';/* common-shake removed: exports.utils = */ void require('./des/utils');/* common-shake removed: exports.Cipher = */ void require('./des/cipher');exports.DES=require('./des/des');exports.CBC=require('./des/cbc');exports.EDE=require('./des/ede');

},{"./des/cbc":213,"./des/cipher":214,"./des/des":215,"./des/ede":216,"./des/utils":217}],154:[function(require,module,exports){
(function (Buffer){
var bn=require('bn.js');var randomBytes=require('randombytes');module.exports=crt;function blind(priv){var r=getr(priv);var blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)};}function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var mod=bn.mont(priv.modulus);var blinded=new bn(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(bn.mont(priv.prime1));var c2=blinded.toRed(bn.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1);var m2=c2.redPow(priv.exponent2);m1=m1.fromRed();m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);h.imul(q);m2.iadd(h);return new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(false,len));}crt.getr=getr;function getr(priv){var len=priv.modulus.byteLength();var r=new bn(randomBytes(len));while(r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2)){r=new bn(randomBytes(len));}return r;}

}).call(this,require("buffer").Buffer)

},{"bn.js":132,"buffer":1133,"randombytes":532}],532:[function(require,module,exports){
(function (process,global){
'use strict';var MAX_BYTES=65536;var MAX_UINT32=4294967295;function oldBrowser(){throw new Error('Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11');}var Buffer=require('safe-buffer').Buffer;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){module.exports=randomBytes;}else{module.exports=oldBrowser;}function randomBytes(size,cb){if(size>MAX_UINT32)throw new RangeError('requested too many random bytes');var bytes=Buffer.allocUnsafe(size);if(size>0){if(size>MAX_BYTES){for(var generated=0;generated<size;generated+=MAX_BYTES){crypto.getRandomValues(bytes.slice(generated,generated+MAX_BYTES));}}else{crypto.getRandomValues(bytes);}}if(typeof cb==='function'){return process.nextTick(function(){cb(null,bytes);});}return bytes;}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1221,"safe-buffer":639}],155:[function(require,module,exports){
var Sha3=require('js-sha3');var Buffer=require('safe-buffer').Buffer;var hashLengths=[224,256,384,512];var hash=function hash(bitcount){if(bitcount!==undefined&&hashLengths.indexOf(bitcount)===-1){throw new Error('Unsupported hash length');}this.content=[];this.bitcount=bitcount?'keccak_'+bitcount:'keccak_512';};hash.prototype.update=function(i){if(Buffer.isBuffer(i)){this.content.push(i);}else if(typeof i==='string'){this.content.push(new Buffer(i));}else{throw new Error('Unsupported argument to update');}return this;};hash.prototype.digest=function(encoding){var result=Sha3[this.bitcount](Buffer.concat(this.content));if(encoding==='hex'){return result;}else if(encoding==='binary'||encoding===undefined){return new Buffer(result,'hex').toString('binary');}else{throw new Error('Unsupported encoding for digest: '+encoding);}};module.exports={SHA3Hash:hash};

},{"js-sha3":156,"safe-buffer":639}],156:[function(require,module,exports){
(function (process,global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.6.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2017
 * @license MIT
 */(function(){'use strict';var root=(typeof window==="undefined"?"undefined":(0,_typeof2["default"])(window))==='object'?window:{};var NODE_JS=!root.JS_SHA3_NO_NODE_JS&&(typeof process==="undefined"?"undefined":(0,_typeof2["default"])(process))==='object'&&process.versions&&process.versions.node;if(NODE_JS){root=global;}var COMMON_JS=!root.JS_SHA3_NO_COMMON_JS&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))==='object'&&module.exports;var ARRAY_BUFFER=!root.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=='undefined';var HEX_CHARS='0123456789abcdef'.split('');var SHAKE_PADDING=[31,7936,2031616,520093696];var CSHAKE_PADDING=[4,1024,262144,67108864];var KECCAK_PADDING=[1,256,65536,16777216];var PADDING=[6,1536,393216,100663296];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var BITS=[224,256,384,512];var SHAKE_BITS=[128,256];var OUTPUT_TYPES=['hex','buffer','arrayBuffer','array'];var CSHAKE_BYTEPAD={'128':168,'256':136};if(root.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(obj){return Object.prototype.toString.call(obj)==='[object Array]';};}var createOutputMethod=function createOutputMethod(bits,padding,outputType){return function(message){return new Keccak(bits,padding,bits).update(message)[outputType]();};};var createShakeOutputMethod=function createShakeOutputMethod(bits,padding,outputType){return function(message,outputBits){return new Keccak(bits,padding,outputBits).update(message)[outputType]();};};var createCshakeOutputMethod=function createCshakeOutputMethod(bits,padding,outputType){return function(message,outputBits,n,s){return methods['cshake'+bits].update(message,outputBits,n,s)[outputType]();};};var createKmacOutputMethod=function createKmacOutputMethod(bits,padding,outputType){return function(key,message,outputBits,s){return methods['kmac'+bits].update(key,message,outputBits,s)[outputType]();};};var createOutputMethods=function createOutputMethods(method,createMethod,bits,padding){for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createMethod(bits,padding,type);}return method;};var createMethod=function createMethod(bits,padding){var method=createOutputMethod(bits,padding,'hex');method.create=function(){return new Keccak(bits,padding,bits);};method.update=function(message){return method.create().update(message);};return createOutputMethods(method,createOutputMethod,bits,padding);};var createShakeMethod=function createShakeMethod(bits,padding){var method=createShakeOutputMethod(bits,padding,'hex');method.create=function(outputBits){return new Keccak(bits,padding,outputBits);};method.update=function(message,outputBits){return method.create(outputBits).update(message);};return createOutputMethods(method,createShakeOutputMethod,bits,padding);};var createCshakeMethod=function createCshakeMethod(bits,padding){var w=CSHAKE_BYTEPAD[bits];var method=createCshakeOutputMethod(bits,padding,'hex');method.create=function(outputBits,n,s){if(!n&&!s){return methods['shake'+bits].create(outputBits);}else{return new Keccak(bits,padding,outputBits).bytepad([n,s],w);}};method.update=function(message,outputBits,n,s){return method.create(outputBits,n,s).update(message);};return createOutputMethods(method,createCshakeOutputMethod,bits,padding);};var createKmacMethod=function createKmacMethod(bits,padding){var w=CSHAKE_BYTEPAD[bits];var method=createKmacOutputMethod(bits,padding,'hex');method.create=function(key,outputBits,s){return new Kmac(bits,padding,outputBits).bytepad(['KMAC',s],w).bytepad([key],w);};method.update=function(key,message,outputBits,s){return method.create(key,outputBits,s).update(message);};return createOutputMethods(method,createKmacOutputMethod,bits,padding);};var algorithms=[{name:'keccak',padding:KECCAK_PADDING,bits:BITS,createMethod:createMethod},{name:'sha3',padding:PADDING,bits:BITS,createMethod:createMethod},{name:'shake',padding:SHAKE_PADDING,bits:SHAKE_BITS,createMethod:createShakeMethod},{name:'cshake',padding:CSHAKE_PADDING,bits:SHAKE_BITS,createMethod:createCshakeMethod},{name:'kmac',padding:CSHAKE_PADDING,bits:SHAKE_BITS,createMethod:createKmacMethod}];var methods={},methodNames=[];for(var i=0;i<algorithms.length;++i){var algorithm=algorithms[i];var bits=algorithm.bits;for(var j=0;j<bits.length;++j){var methodName=algorithm.name+'_'+bits[j];methodNames.push(methodName);methods[methodName]=algorithm.createMethod(bits[j],algorithm.padding);if(algorithm.name!=='sha3'){var newMethodName=algorithm.name+bits[j];methodNames.push(newMethodName);methods[newMethodName]=methods[methodName];}}}function Keccak(bits,padding,outputBits){this.blocks=[];this.s=[];this.padding=padding;this.outputBits=outputBits;this.reset=true;this.block=0;this.start=0;this.blockCount=1600-(bits<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=outputBits>>5;this.extraBytes=(outputBits&31)>>3;for(var i=0;i<50;++i){this.s[i]=0;}}Keccak.prototype.update=function(message){var notString=typeof message!=='string';if(notString&&message.constructor===root.ArrayBuffer){message=new Uint8Array(message);}var length=message.length;if(notString){if(typeof length!=='number'||!Array.isArray(message)&&!(ARRAY_BUFFER&&ArrayBuffer.isView(message))){throw'input is invalid type';}}var blocks=this.blocks,byteCount=this.byteCount,blockCount=this.blockCount,index=0,s=this.s,i,code;while(index<length){if(this.reset){this.reset=false;blocks[0]=this.block;for(i=1;i<blockCount+1;++i){blocks[i]=0;}}if(notString){for(i=this.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3];}}else{for(i=this.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<0x80){blocks[i>>2]|=code<<SHIFT[i++&3];}else if(code<0x800){blocks[i>>2]|=(0xc0|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else if(code<0xd800||code>=0xe000){blocks[i>>2]|=(0xe0|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else{code=0x10000+((code&0x3ff)<<10|message.charCodeAt(++index)&0x3ff);blocks[i>>2]|=(0xf0|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>12&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}}}this.lastByteIndex=i;if(i>=byteCount){this.start=i-byteCount;this.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);this.reset=true;}else{this.start=i;}}return this;};Keccak.prototype.encode=function(x,right){var o=x&255,n=1;var bytes=[o];x=x>>8;o=x&255;while(o>0){bytes.unshift(o);x=x>>8;o=x&255;++n;}if(right){bytes.push(n);}else{bytes.unshift(n);}this.update(bytes);return bytes.length;};Keccak.prototype.encodeString=function(str){str=str||'';var notString=typeof str!=='string';if(notString&&str.constructor===root.ArrayBuffer){str=new Uint8Array(str);}var length=str.length;if(notString){if(typeof length!=='number'||!Array.isArray(str)&&!(ARRAY_BUFFER&&ArrayBuffer.isView(str))){throw'input is invalid type';}}var bytes=0;if(notString){bytes=length;}else{for(var i=0;i<str.length;++i){var code=str.charCodeAt(i);if(code<0x80){bytes+=1;}else if(code<0x800){bytes+=2;}else if(code<0xd800||code>=0xe000){bytes+=3;}else{code=0x10000+((code&0x3ff)<<10|str.charCodeAt(++i)&0x3ff);bytes+=4;}}}bytes+=this.encode(bytes*8);this.update(str);return bytes;};Keccak.prototype.bytepad=function(strs,w){var bytes=this.encode(w);for(var i=0;i<strs.length;++i){bytes+=this.encodeString(strs[i]);}var paddingBytes=w-bytes%w;var zeros=[];zeros.length=paddingBytes;this.update(zeros);return this;};Keccak.prototype.finalize=function(){var blocks=this.blocks,i=this.lastByteIndex,blockCount=this.blockCount,s=this.s;blocks[i>>2]|=this.padding[i&3];if(this.lastByteIndex===this.byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0;}}blocks[blockCount-1]|=0x80000000;for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);};Keccak.prototype.toString=Keccak.prototype.hex=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var hex='',block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F]+HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F]+HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F]+HEX_CHARS[block>>28&0x0F]+HEX_CHARS[block>>24&0x0F];}if(j%blockCount===0){f(s);i=0;}}if(extraBytes){block=s[i];if(extraBytes>0){hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F];}if(extraBytes>1){hex+=HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F];}if(extraBytes>2){hex+=HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F];}}return hex;};Keccak.prototype.arrayBuffer=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var bytes=this.outputBits>>3;var buffer;if(extraBytes){buffer=new ArrayBuffer(outputBlocks+1<<2);}else{buffer=new ArrayBuffer(bytes);}var array=new Uint32Array(buffer);while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){array[j]=s[i];}if(j%blockCount===0){f(s);}}if(extraBytes){array[i]=s[i];buffer=buffer.slice(0,bytes);}return buffer;};Keccak.prototype.buffer=Keccak.prototype.arrayBuffer;Keccak.prototype.digest=Keccak.prototype.array=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var array=[],offset,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){offset=j<<2;block=s[i];array[offset]=block&0xFF;array[offset+1]=block>>8&0xFF;array[offset+2]=block>>16&0xFF;array[offset+3]=block>>24&0xFF;}if(j%blockCount===0){f(s);}}if(extraBytes){offset=j<<2;block=s[i];if(extraBytes>0){array[offset]=block&0xFF;}if(extraBytes>1){array[offset+1]=block>>8&0xFF;}if(extraBytes>2){array[offset+2]=block>>16&0xFF;}}return array;};function Kmac(bits,padding,outputBits){Keccak.call(this,bits,padding,outputBits);}Kmac.prototype=new Keccak();Kmac.prototype.finalize=function(){this.encode(this.outputBits,true);return Keccak.prototype.finalize.call(this);};var f=function f(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1];}};if(COMMON_JS){module.exports=methods;}else{for(var i=0;i<methodNames.length;++i){root[methodNames[i]]=methods[methodNames[i]];}}})();

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"_process":1221}],157:[function(require,module,exports){
module.exports=require('./browser/algorithms.json');

},{"./browser/algorithms.json":158}],158:[function(require,module,exports){
module.exports={
  "sha224WithRSAEncryption": {
    "sign": "rsa",
    "hash": "sha224",
    "id": "302d300d06096086480165030402040500041c"
  },
  "RSA-SHA224": {
    "sign": "ecdsa/rsa",
    "hash": "sha224",
    "id": "302d300d06096086480165030402040500041c"
  },
  "sha256WithRSAEncryption": {
    "sign": "rsa",
    "hash": "sha256",
    "id": "3031300d060960864801650304020105000420"
  },
  "RSA-SHA256": {
    "sign": "ecdsa/rsa",
    "hash": "sha256",
    "id": "3031300d060960864801650304020105000420"
  },
  "sha384WithRSAEncryption": {
    "sign": "rsa",
    "hash": "sha384",
    "id": "3041300d060960864801650304020205000430"
  },
  "RSA-SHA384": {
    "sign": "ecdsa/rsa",
    "hash": "sha384",
    "id": "3041300d060960864801650304020205000430"
  },
  "sha512WithRSAEncryption": {
    "sign": "rsa",
    "hash": "sha512",
    "id": "3051300d060960864801650304020305000440"
  },
  "RSA-SHA512": {
    "sign": "ecdsa/rsa",
    "hash": "sha512",
    "id": "3051300d060960864801650304020305000440"
  },
  "RSA-SHA1": {
    "sign": "rsa",
    "hash": "sha1",
    "id": "3021300906052b0e03021a05000414"
  },
  "ecdsa-with-SHA1": {
    "sign": "ecdsa",
    "hash": "sha1",
    "id": ""
  },
  "sha256": {
    "sign": "ecdsa",
    "hash": "sha256",
    "id": ""
  },
  "sha224": {
    "sign": "ecdsa",
    "hash": "sha224",
    "id": ""
  },
  "sha384": {
    "sign": "ecdsa",
    "hash": "sha384",
    "id": ""
  },
  "sha512": {
    "sign": "ecdsa",
    "hash": "sha512",
    "id": ""
  },
  "DSA-SHA": {
    "sign": "dsa",
    "hash": "sha1",
    "id": ""
  },
  "DSA-SHA1": {
    "sign": "dsa",
    "hash": "sha1",
    "id": ""
  },
  "DSA": {
    "sign": "dsa",
    "hash": "sha1",
    "id": ""
  },
  "DSA-WITH-SHA224": {
    "sign": "dsa",
    "hash": "sha224",
    "id": ""
  },
  "DSA-SHA224": {
    "sign": "dsa",
    "hash": "sha224",
    "id": ""
  },
  "DSA-WITH-SHA256": {
    "sign": "dsa",
    "hash": "sha256",
    "id": ""
  },
  "DSA-SHA256": {
    "sign": "dsa",
    "hash": "sha256",
    "id": ""
  },
  "DSA-WITH-SHA384": {
    "sign": "dsa",
    "hash": "sha384",
    "id": ""
  },
  "DSA-SHA384": {
    "sign": "dsa",
    "hash": "sha384",
    "id": ""
  },
  "DSA-WITH-SHA512": {
    "sign": "dsa",
    "hash": "sha512",
    "id": ""
  },
  "DSA-SHA512": {
    "sign": "dsa",
    "hash": "sha512",
    "id": ""
  },
  "DSA-RIPEMD160": {
    "sign": "dsa",
    "hash": "rmd160",
    "id": ""
  },
  "ripemd160WithRSA": {
    "sign": "rsa",
    "hash": "rmd160",
    "id": "3021300906052b2403020105000414"
  },
  "RSA-RIPEMD160": {
    "sign": "rsa",
    "hash": "rmd160",
    "id": "3021300906052b2403020105000414"
  },
  "md5WithRSAEncryption": {
    "sign": "rsa",
    "hash": "md5",
    "id": "3020300c06082a864886f70d020505000410"
  },
  "RSA-MD5": {
    "sign": "rsa",
    "hash": "md5",
    "id": "3020300c06082a864886f70d020505000410"
  }
}

},{}],159:[function(require,module,exports){
module.exports={
  "1.3.132.0.10": "secp256k1",
  "1.3.132.0.33": "p224",
  "1.2.840.10045.3.1.1": "p192",
  "1.2.840.10045.3.1.7": "p256",
  "1.3.132.0.34": "p384",
  "1.3.132.0.35": "p521"
}

},{}],160:[function(require,module,exports){
(function (Buffer){
var createHash=require('create-hash');var stream=require('stream');var inherits=require('inherits');var sign=require('./sign');var verify=require('./verify');var algorithms=require('./algorithms.json');Object.keys(algorithms).forEach(function(key){algorithms[key].id=new Buffer(algorithms[key].id,'hex');algorithms[key.toLowerCase()]=algorithms[key];});function Sign(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hashType=data.hash;this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign;}inherits(Sign,stream.Writable);Sign.prototype._write=function _write(data,_,done){this._hash.update(data);done();};Sign.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc);this._hash.update(data);return this;};Sign.prototype.sign=function signMethod(key,enc){this.end();var hash=this._hash.digest();var sig=sign(hash,key,this._hashType,this._signType,this._tag);return enc?sig.toString(enc):sig;};function Verify(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign;}inherits(Verify,stream.Writable);Verify.prototype._write=function _write(data,_,done){this._hash.update(data);done();};Verify.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc);this._hash.update(data);return this;};Verify.prototype.verify=function verifyMethod(key,sig,enc){if(typeof sig==='string')sig=new Buffer(sig,enc);this.end();var hash=this._hash.digest();return verify(sig,hash,key,this._signType,this._tag);};function createSign(algorithm){return new Sign(algorithm);}function createVerify(algorithm){return new Verify(algorithm);}module.exports={/* common-shake removed: Sign:createSign *//* common-shake removed: Verify:createVerify *//* common-shake removed: createSign:createSign *//* common-shake removed: createVerify:createVerify */};

}).call(this,require("buffer").Buffer)

},{"./algorithms.json":158,"./sign":161,"./verify":162,"buffer":1133,"create-hash":173,"inherits":307,"stream":1259}],1259:[function(require,module,exports){
module.exports=Stream;var EE=require('events').EventEmitter;var inherits=require('inherits');inherits(Stream,EE);Stream.Readable=require('readable-stream/readable.js');Stream.Writable=require('readable-stream/writable.js');Stream.Duplex=require('readable-stream/duplex.js');Stream.Transform=require('readable-stream/transform.js');Stream.PassThrough=require('readable-stream/passthrough.js');Stream.Stream=Stream;function Stream(){EE.call(this);}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause();}}}source.on('data',ondata);function ondrain(){if(source.readable&&source.resume){source.resume();}}dest.on('drain',ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on('end',onend);source.on('close',onclose);}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end();}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==='function')dest.destroy();}function onerror(er){cleanup();if(EE.listenerCount(this,'error')===0){throw er;}}source.on('error',onerror);dest.on('error',onerror);function cleanup(){source.removeListener('data',ondata);dest.removeListener('drain',ondrain);source.removeListener('end',onend);source.removeListener('close',onclose);source.removeListener('error',onerror);dest.removeListener('error',onerror);source.removeListener('end',cleanup);source.removeListener('close',cleanup);dest.removeListener('close',cleanup);}source.on('end',cleanup);source.on('close',cleanup);dest.on('close',cleanup);dest.emit('pipe',source);return dest;};

},{"events":1169,"inherits":1187,"readable-stream/duplex.js":1234,"readable-stream/passthrough.js":1245,"readable-stream/readable.js":1246,"readable-stream/transform.js":1247,"readable-stream/writable.js":1248}],173:[function(require,module,exports){
'use strict';var inherits=require('inherits');var MD5=require('md5.js');var RIPEMD160=require('ripemd160');var sha=require('sha.js');var Base=require('cipher-base');function Hash(hash){Base.call(this,'digest');this._hash=hash;}inherits(Hash,Base);Hash.prototype._update=function(data){this._hash.update(data);};Hash.prototype._final=function(){return this._hash.digest();};module.exports=function createHash(alg){alg=alg.toLowerCase();if(alg==='md5')return new MD5();if(alg==='rmd160'||alg==='ripemd160')return new RIPEMD160();return new Hash(sha(alg));};

},{"cipher-base":169,"inherits":307,"md5.js":478,"ripemd160":536,"sha.js":652}],161:[function(require,module,exports){
(function (Buffer){
var createHmac=require('create-hmac');var crt=require('browserify-rsa');var EC=require('elliptic').ec;var BN=require('bn.js');var parseKeys=require('parse-asn1');var curves=require('./curves.json');function sign(hash,key,hashType,signType,tag){var priv=parseKeys(key);if(priv.curve){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');return ecSign(hash,priv);}else if(priv.type==='dsa'){if(signType!=='dsa')throw new Error('wrong private key type');return dsaSign(hash,priv,hashType);}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');}hash=Buffer.concat([tag,hash]);var len=priv.modulus.byteLength();var pad=[0,1];while(hash.length+pad.length+1<len){pad.push(0xff);}pad.push(0x00);var i=-1;while(++i<hash.length){pad.push(hash[i]);}var out=crt(pad,priv);return out;}function ecSign(hash,priv){var curveId=curves[priv.curve.join('.')];if(!curveId)throw new Error('unknown curve '+priv.curve.join('.'));var curve=new EC(curveId);var key=curve.keyFromPrivate(priv.privateKey);var out=key.sign(hash);return new Buffer(out.toDER());}function dsaSign(hash,priv,algo){var x=priv.params.priv_key;var p=priv.params.p;var q=priv.params.q;var g=priv.params.g;var r=new BN(0);var k;var H=bits2int(hash,q).mod(q);var s=false;var kv=getKey(x,q,hash,algo);while(s===false){k=makeKey(q,kv,algo);r=makeR(g,k,p,q);s=k.invm(q).imul(H.add(x.mul(r))).mod(q);if(s.cmpn(0)===0){s=false;r=new BN(0);}}return toDER(r,s);}function toDER(r,s){r=r.toArray();s=s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);var total=r.length+s.length+4;var res=[0x30,total,0x02,r.length];res=res.concat(r,[0x02,s.length],s);return new Buffer(res);}function getKey(x,q,hash,algo){x=new Buffer(x.toArray());if(x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0);x=Buffer.concat([zeros,x]);}var hlen=hash.length;var hbits=bits2octets(hash,q);var v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);k.fill(0);k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();return{k:k,v:v};}function bits2int(obits,q){var bits=new BN(obits);var shift=(obits.length<<3)-q.bitLength();if(shift>0)bits.ishrn(shift);return bits;}function bits2octets(bits,q){bits=bits2int(bits,q);bits=bits.mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0);out=Buffer.concat([zeros,out]);}return out;}function makeKey(q,kv,algo){var t;var k;do{t=new Buffer(0);while(t.length*8<q.bitLength()){kv.v=createHmac(algo,kv.k).update(kv.v).digest();t=Buffer.concat([t,kv.v]);}k=bits2int(t,q);kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest();kv.v=createHmac(algo,kv.k).update(kv.v).digest();}while(k.cmp(q)!==-1);return k;}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q);}module.exports=sign;module.exports.getKey=getKey;module.exports.makeKey=makeKey;

}).call(this,require("buffer").Buffer)

},{"./curves.json":159,"bn.js":132,"browserify-rsa":154,"buffer":1133,"create-hmac":175,"elliptic":222,"parse-asn1":503}],162:[function(require,module,exports){
(function (Buffer){
var BN=require('bn.js');var EC=require('elliptic').ec;var parseKeys=require('parse-asn1');var curves=require('./curves.json');function verify(sig,hash,key,signType,tag){var pub=parseKeys(key);if(pub.type==='ec'){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');return ecVerify(sig,hash,pub);}else if(pub.type==='dsa'){if(signType!=='dsa')throw new Error('wrong public key type');return dsaVerify(sig,hash,pub);}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');}hash=Buffer.concat([tag,hash]);var len=pub.modulus.byteLength();var pad=[1];var padNum=0;while(hash.length+pad.length+2<len){pad.push(0xff);padNum++;}pad.push(0x00);var i=-1;while(++i<hash.length){pad.push(hash[i]);}pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red);sig=sig.redPow(new BN(pub.publicExponent));sig=new Buffer(sig.fromRed().toArray());var out=padNum<8?1:0;len=Math.min(sig.length,pad.length);if(sig.length!==pad.length)out=1;i=-1;while(++i<len){out|=sig[i]^pad[i];}return out===0;}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join('.')];if(!curveId)throw new Error('unknown curve '+pub.data.algorithm.curve.join('.'));var curve=new EC(curveId);var pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey);}function dsaVerify(sig,hash,pub){var p=pub.data.p;var q=pub.data.q;var g=pub.data.g;var y=pub.data.pub_key;var unpacked=parseKeys.signature.decode(sig,'der');var s=unpacked.s;var r=unpacked.r;checkValue(s,q);checkValue(r,q);var montp=BN.mont(p);var w=s.invm(q);var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return v.cmp(r)===0;}function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error('invalid sig');if(b.cmp(q)>=q)throw new Error('invalid sig');}module.exports=verify;

}).call(this,require("buffer").Buffer)

},{"./curves.json":159,"bn.js":132,"buffer":1133,"elliptic":222,"parse-asn1":503}],175:[function(require,module,exports){
'use strict';var inherits=require('inherits');var Legacy=require('./legacy');var Base=require('cipher-base');var Buffer=require('safe-buffer').Buffer;var md5=require('create-hash/md5');var RIPEMD160=require('ripemd160');var sha=require('sha.js');var ZEROS=Buffer.alloc(128);function Hmac(alg,key){Base.call(this,'digest');if(typeof key==='string'){key=Buffer.from(key);}var blocksize=alg==='sha512'||alg==='sha384'?128:64;this._alg=alg;this._key=key;if(key.length>blocksize){var hash=alg==='rmd160'?new RIPEMD160():sha(alg);key=hash.update(key).digest();}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize);}var ipad=this._ipad=Buffer.allocUnsafe(blocksize);var opad=this._opad=Buffer.allocUnsafe(blocksize);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^0x36;opad[i]=key[i]^0x5C;}this._hash=alg==='rmd160'?new RIPEMD160():sha(alg);this._hash.update(ipad);}inherits(Hmac,Base);Hmac.prototype._update=function(data){this._hash.update(data);};Hmac.prototype._final=function(){var h=this._hash.digest();var hash=this._alg==='rmd160'?new RIPEMD160():sha(this._alg);return hash.update(this._opad).update(h).digest();};module.exports=function createHmac(alg,key){alg=alg.toLowerCase();if(alg==='rmd160'||alg==='ripemd160'){return new Hmac('rmd160',key);}if(alg==='md5'){return new Legacy(md5,key);}return new Hmac(alg,key);};

},{"./legacy":176,"cipher-base":169,"create-hash/md5":174,"inherits":307,"ripemd160":536,"safe-buffer":639,"sha.js":652}],503:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var asn1=require('./asn1');var aesid=require('./aesid.json');var fixProc=require('./fixProc');var ciphers=require('browserify-aes');var compat=require('pbkdf2');var Buffer=require('safe-buffer').Buffer;module.exports=parseKeys;function parseKeys(buffer){var password;if((0,_typeof2["default"])(buffer)==='object'&&!Buffer.isBuffer(buffer)){password=buffer.passphrase;buffer=buffer.key;}if(typeof buffer==='string'){buffer=Buffer.from(buffer);}var stripped=fixProc(buffer,password);var type=stripped.tag;var data=stripped.data;var subtype,ndata;switch(type){case'CERTIFICATE':ndata=asn1.certificate.decode(data,'der').tbsCertificate.subjectPublicKeyInfo;case'PUBLIC KEY':if(!ndata){ndata=asn1.PublicKey.decode(data,'der');}subtype=ndata.algorithm.algorithm.join('.');switch(subtype){case'1.2.840.113549.1.1.1':return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,'der');case'1.2.840.10045.2.1':ndata.subjectPrivateKey=ndata.subjectPublicKey;return{type:'ec',data:ndata};case'1.2.840.10040.4.1':ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,'der');return{type:'dsa',data:ndata.algorithm.params};default:throw new Error('unknown key id '+subtype);}throw new Error('unknown key type '+type);case'ENCRYPTED PRIVATE KEY':data=asn1.EncryptedPrivateKey.decode(data,'der');data=decrypt(data,password);case'PRIVATE KEY':ndata=asn1.PrivateKey.decode(data,'der');subtype=ndata.algorithm.algorithm.join('.');switch(subtype){case'1.2.840.113549.1.1.1':return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,'der');case'1.2.840.10045.2.1':return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,'der').privateKey};case'1.2.840.10040.4.1':ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,'der');return{type:'dsa',params:ndata.algorithm.params};default:throw new Error('unknown key id '+subtype);}throw new Error('unknown key type '+type);case'RSA PUBLIC KEY':return asn1.RSAPublicKey.decode(data,'der');case'RSA PRIVATE KEY':return asn1.RSAPrivateKey.decode(data,'der');case'DSA PRIVATE KEY':return{type:'dsa',params:asn1.DSAPrivateKey.decode(data,'der')};case'EC PRIVATE KEY':data=asn1.ECPrivateKey.decode(data,'der');return{curve:data.parameters.value,privateKey:data.privateKey};default:throw new Error('unknown key type '+type);}}parseKeys.signature=asn1.signature;function decrypt(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt;var iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10);var algo=aesid[data.algorithm.decrypt.cipher.algo.join('.')];var iv=data.algorithm.decrypt.cipher.iv;var cipherText=data.subjectPrivateKey;var keylen=parseInt(algo.split('-')[1],10)/8;var key=compat.pbkdf2Sync(password,salt,iters,keylen,'sha1');var cipher=ciphers.createDecipheriv(algo,key,iv);var out=[];out.push(cipher.update(cipherText));out.push(cipher["final"]());return Buffer.concat(out);}

},{"./aesid.json":499,"./asn1":500,"./fixProc":502,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"browserify-aes":136,"pbkdf2":518,"safe-buffer":639}],164:[function(require,module,exports){
'use strict';var _Buffer=require('safe-buffer').Buffer;function base(ALPHABET){if(ALPHABET.length>=255){throw new TypeError('Alphabet too long');}var BASE_MAP=new Uint8Array(256);BASE_MAP.fill(255);for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i);var xc=x.charCodeAt(0);if(BASE_MAP[xc]!==255){throw new TypeError(x+' is ambiguous');}BASE_MAP[xc]=i;}var BASE=ALPHABET.length;var LEADER=ALPHABET.charAt(0);var FACTOR=Math.log(BASE)/Math.log(256);var iFACTOR=Math.log(256)/Math.log(BASE);function encode(source){if(!_Buffer.isBuffer(source)){throw new TypeError('Expected Buffer');}if(source.length===0){return'';}var zeroes=0;var length=0;var pbegin=0;var pend=source.length;while(pbegin!==pend&&source[pbegin]===0){pbegin++;zeroes++;}var size=(pend-pbegin)*iFACTOR+1>>>0;var b58=new Uint8Array(size);while(pbegin!==pend){var carry=source[pbegin];var i=0;for(var it1=size-1;(carry!==0||i<length)&&it1!==-1;it1--,i++){carry+=256*b58[it1]>>>0;b58[it1]=carry%BASE>>>0;carry=carry/BASE>>>0;}if(carry!==0){throw new Error('Non-zero carry');}length=i;pbegin++;}var it2=size-length;while(it2!==size&&b58[it2]===0){it2++;}var str=LEADER.repeat(zeroes);for(;it2<size;++it2){str+=ALPHABET.charAt(b58[it2]);}return str;}function decodeUnsafe(source){if(typeof source!=='string'){throw new TypeError('Expected String');}if(source.length===0){return _Buffer.alloc(0);}var psz=0;if(source[psz]===' '){return;}var zeroes=0;var length=0;while(source[psz]===LEADER){zeroes++;psz++;}var size=(source.length-psz)*FACTOR+1>>>0;var b256=new Uint8Array(size);while(source[psz]){var carry=BASE_MAP[source.charCodeAt(psz)];if(carry===255){return;}var i=0;for(var it3=size-1;(carry!==0||i<length)&&it3!==-1;it3--,i++){carry+=BASE*b256[it3]>>>0;b256[it3]=carry%256>>>0;carry=carry/256>>>0;}if(carry!==0){throw new Error('Non-zero carry');}length=i;psz++;}if(source[psz]===' '){return;}var it4=size-length;while(it4!==size&&b256[it4]===0){it4++;}var vch=_Buffer.allocUnsafe(zeroes+(size-it4));vch.fill(0x00,0,zeroes);var j=zeroes;while(it4!==size){vch[j++]=b256[it4++];}return vch;}function decode(string){var buffer=decodeUnsafe(string);if(buffer){return buffer;}throw new Error('Non-base'+BASE+' character');}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode};}module.exports=base;

},{"safe-buffer":639}],167:[function(require,module,exports){
(function (Buffer){
'use strict';var mh=require('multihashes');var CIDUtil={checkCIDComponents:function checkCIDComponents(other){if(other==null){return'null values are not valid CIDs';}if(!(other.version===0||other.version===1)){return'Invalid version, must be a number equal to 1 or 0';}if(typeof other.codec!=='string'){return'codec must be string';}if(!Buffer.isBuffer(other.multihash)){return'multihash must be a Buffer';}try{mh.validate(other.multihash);}catch(err){var errorMsg=err.message;if(!errorMsg){errorMsg='Multihash validation failed';}return errorMsg;}}};module.exports=CIDUtil;

}).call(this,{"isBuffer":require("../../../../../ui/ui-dapps/node_modules/is-buffer/index.js")})

},{"../../../../../ui/ui-dapps/node_modules/is-buffer/index.js":1188,"multihashes":496}],1188:[function(require,module,exports){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */module.exports=function(obj){return obj!=null&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer);};function isBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==='function'&&obj.constructor.isBuffer(obj);}function isSlowBuffer(obj){return typeof obj.readFloatLE==='function'&&typeof obj.slice==='function'&&isBuffer(obj.slice(0,0));}

},{}],496:[function(require,module,exports){
(function (Buffer){
'use strict';var bs58=require('bs58');var cs=require('./constants');/* common-shake removed: exports.names = */ void cs.names;/* common-shake removed: exports.codes = */ void cs.codes;/* common-shake removed: exports.defaultLengths = */ void cs.defaultLengths;var varint=require('varint');/* common-shake removed: exports.toHexString = */ void function toHexString(hash){if(!Buffer.isBuffer(hash)){throw new Error('must be passed a buffer');}return hash.toString('hex');};/* common-shake removed: exports.fromHexString = */ void function fromHexString(hash){return Buffer.from(hash,'hex');};exports.toB58String=function toB58String(hash){if(!Buffer.isBuffer(hash)){throw new Error('must be passed a buffer');}return bs58.encode(hash);};exports.fromB58String=function fromB58String(hash){var encoded=hash;if(Buffer.isBuffer(hash)){encoded=hash.toString();}return Buffer.from(bs58.decode(encoded));};exports.decode=function decode(buf){if(!Buffer.isBuffer(buf)){throw new Error('multihash must be a Buffer');}if(buf.length<3){throw new Error('multihash too short. must be > 3 bytes.');}var code=varint.decode(buf);if(!exports.isValidCode(code)){throw new Error("multihash unknown function code: 0x".concat(code.toString(16)));}buf=buf.slice(varint.decode.bytes);var len=varint.decode(buf);if(len<1){throw new Error("multihash invalid length: 0x".concat(len.toString(16)));}buf=buf.slice(varint.decode.bytes);if(buf.length!==len){throw new Error("multihash length inconsistent: 0x".concat(buf.toString('hex')));}return{code:code,name:cs.codes[code],length:len,digest:buf};};/* common-shake removed: exports.encode = */ void function encode(digest,code,length){if(!digest||code===undefined){throw new Error('multihash encode requires at least two args: digest, code');}var hashfn=exports.coerceCode(code);if(!Buffer.isBuffer(digest)){throw new Error('digest should be a Buffer');}if(length==null){length=digest.length;}if(length&&digest.length!==length){throw new Error('digest length should be equal to specified length.');}return Buffer.concat([Buffer.from(varint.encode(hashfn)),Buffer.from(varint.encode(length)),digest]);};exports.coerceCode=function coerceCode(name){var code=name;if(typeof name==='string'){if(cs.names[name]===undefined){throw new Error("Unrecognized hash function named: ".concat(name));}code=cs.names[name];}if(typeof code!=='number'){throw new Error("Hash function code should be a number. Got: ".concat(code));}if(cs.codes[code]===undefined&&!exports.isAppCode(code)){throw new Error("Unrecognized function code: ".concat(code));}return code;};exports.isAppCode=function appCode(code){return code>0&&code<0x10;};exports.isValidCode=function validCode(code){if(exports.isAppCode(code)){return true;}if(cs.codes[code]){return true;}return false;};function validate(multihash){exports.decode(multihash);}exports.validate=validate;exports.prefix=function prefix(multihash){validate(multihash);return multihash.slice(0,2);};

}).call(this,require("buffer").Buffer)

},{"./constants":495,"bs58":163,"buffer":1133,"varint":666}],168:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var mh=require('multihashes');var multibase=require('multibase');var multicodec=require('multicodec');var codecs=require('multicodec/src/base-table');var CIDUtil=require('./cid-util');var withIs=require('class-is');var CID=function(){function CID(version,codec,multihash){(0,_classCallCheck2["default"])(this,CID);if(module.exports.isCID(version)){var cid=version;this.version=cid.version;this.codec=cid.codec;this.multihash=Buffer.from(cid.multihash);return;}if(typeof version==='string'){if(multibase.isEncoded(version)){var _cid=multibase.decode(version);version=parseInt(_cid.slice(0,1).toString('hex'),16);codec=multicodec.getCodec(_cid.slice(1));multihash=multicodec.rmPrefix(_cid.slice(1));}else{codec='dag-pb';multihash=mh.fromB58String(version);version=0;}}else if(Buffer.isBuffer(version)){var firstByte=version.slice(0,1);var v=parseInt(firstByte.toString('hex'),16);if(v===0||v===1){var _cid2=version;version=v;codec=multicodec.getCodec(_cid2.slice(1));multihash=multicodec.rmPrefix(_cid2.slice(1));}else{codec='dag-pb';multihash=version;version=0;}}this.codec=codec;this.version=version;this.multihash=multihash;CID.validateCID(this);}(0,_createClass2["default"])(CID,[{key:"toV0",value:function toV0(){if(this.codec!=='dag-pb'){throw new Error('Cannot convert a non dag-pb CID to CIDv0');}var _mh$decode=mh.decode(this.multihash),name=_mh$decode.name,length=_mh$decode.length;if(name!=='sha2-256'){throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0');}if(length!==32){throw new Error('Cannot convert non 32 byte multihash CID to CIDv0');}return new _CID(0,this.codec,this.multihash);}},{key:"toV1",value:function toV1(){return new _CID(1,this.codec,this.multihash);}},{key:"toBaseEncodedString",value:function toBaseEncodedString(base){base=base||'base58btc';switch(this.version){case 0:{if(base!=='base58btc'){throw new Error('not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()');}return mh.toB58String(this.multihash);}case 1:return multibase.encode(base,this.buffer).toString();default:throw new Error('Unsupported version');}}},{key:"toString",value:function toString(base){return this.toBaseEncodedString(base);}},{key:"toJSON",value:function toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash};}},{key:"equals",value:function equals(other){return this.codec===other.codec&&this.version===other.version&&this.multihash.equals(other.multihash);}},{key:"buffer",get:function get(){var buffer=this._buffer;if(!buffer){if(this.version===0){buffer=this.multihash;}else if(this.version===1){buffer=Buffer.concat([Buffer.from('01','hex'),multicodec.getCodeVarint(this.codec),this.multihash]);}else{throw new Error('unsupported version');}Object.defineProperty(this,'_buffer',{value:buffer});}return buffer;}},{key:"prefix",get:function get(){return Buffer.concat([Buffer.from("0".concat(this.version),'hex'),multicodec.getCodeVarint(this.codec),mh.prefix(this.multihash)]);}}],[{key:"validateCID",value:function validateCID(other){var errorMsg=CIDUtil.checkCIDComponents(other);if(errorMsg){throw new Error(errorMsg);}}}]);return CID;}();var _CID=withIs(CID,{className:'CID',symbolName:'@ipld/js-cid/CID'});_CID.codecs=codecs;module.exports=_CID;

}).call(this,require("buffer").Buffer)

},{"./cid-util":167,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"buffer":1133,"class-is":170,"multibase":487,"multicodec":490,"multicodec/src/base-table":488,"multihashes":496}],488:[function(require,module,exports){
module.exports={
  "identity": 0,
  "ip4": 4,
  "tcp": 6,
  "sha1": 17,
  "sha2-256": 18,
  "sha2-512": 19,
  "sha3-512": 20,
  "sha3-384": 21,
  "sha3-256": 22,
  "sha3-224": 23,
  "shake-128": 24,
  "shake-256": 25,
  "keccak-224": 26,
  "keccak-256": 27,
  "keccak-384": 28,
  "keccak-512": 29,
  "dccp": 33,
  "murmur3-128": 34,
  "murmur3-32": 35,
  "ip6": 41,
  "ip6zone": 42,
  "path": 47,
  "multicodec": 48,
  "multihash": 49,
  "multiaddr": 50,
  "multibase": 51,
  "dns": 53,
  "dns4": 54,
  "dns6": 55,
  "dnsaddr": 56,
  "protobuf": 80,
  "cbor": 81,
  "raw": 85,
  "dbl-sha2-256": 86,
  "rlp": 96,
  "bencode": 99,
  "dag-pb": 112,
  "dag-cbor": 113,
  "libp2p-key": 114,
  "git-raw": 120,
  "torrent-info": 123,
  "torrent-file": 124,
  "leofcoin-block": 129,
  "leofcoin-tx": 130,
  "leofcoin-pr": 131,
  "sctp": 132,
  "eth-block": 144,
  "eth-block-list": 145,
  "eth-tx-trie": 146,
  "eth-tx": 147,
  "eth-tx-receipt-trie": 148,
  "eth-tx-receipt": 149,
  "eth-state-trie": 150,
  "eth-account-snapshot": 151,
  "eth-storage-trie": 152,
  "bitcoin-block": 176,
  "bitcoin-tx": 177,
  "zcash-block": 192,
  "zcash-tx": 193,
  "stellar-block": 208,
  "stellar-tx": 209,
  "md4": 212,
  "md5": 213,
  "bmt": 214,
  "decred-block": 224,
  "decred-tx": 225,
  "ipld-ns": 226,
  "ipfs-ns": 227,
  "swarm-ns": 228,
  "ipns-ns": 229,
  "zeronet": 230,
  "ed25519-pub": 237,
  "dash-block": 240,
  "dash-tx": 241,
  "swarm-manifest": 250,
  "swarm-feed": 251,
  "udp": 273,
  "p2p-webrtc-star": 275,
  "p2p-webrtc-direct": 276,
  "p2p-stardust": 277,
  "p2p-circuit": 290,
  "dag-json": 297,
  "udt": 301,
  "utp": 302,
  "unix": 400,
  "p2p": 421,
  "ipfs": 421,
  "https": 443,
  "onion": 444,
  "onion3": 445,
  "garlic64": 446,
  "garlic32": 447,
  "tls": 448,
  "quic": 460,
  "ws": 477,
  "wss": 478,
  "p2p-websocket-star": 479,
  "http": 480,
  "json": 512,
  "messagepack": 513,
  "x11": 4352,
  "blake2b-8": 45569,
  "blake2b-16": 45570,
  "blake2b-24": 45571,
  "blake2b-32": 45572,
  "blake2b-40": 45573,
  "blake2b-48": 45574,
  "blake2b-56": 45575,
  "blake2b-64": 45576,
  "blake2b-72": 45577,
  "blake2b-80": 45578,
  "blake2b-88": 45579,
  "blake2b-96": 45580,
  "blake2b-104": 45581,
  "blake2b-112": 45582,
  "blake2b-120": 45583,
  "blake2b-128": 45584,
  "blake2b-136": 45585,
  "blake2b-144": 45586,
  "blake2b-152": 45587,
  "blake2b-160": 45588,
  "blake2b-168": 45589,
  "blake2b-176": 45590,
  "blake2b-184": 45591,
  "blake2b-192": 45592,
  "blake2b-200": 45593,
  "blake2b-208": 45594,
  "blake2b-216": 45595,
  "blake2b-224": 45596,
  "blake2b-232": 45597,
  "blake2b-240": 45598,
  "blake2b-248": 45599,
  "blake2b-256": 45600,
  "blake2b-264": 45601,
  "blake2b-272": 45602,
  "blake2b-280": 45603,
  "blake2b-288": 45604,
  "blake2b-296": 45605,
  "blake2b-304": 45606,
  "blake2b-312": 45607,
  "blake2b-320": 45608,
  "blake2b-328": 45609,
  "blake2b-336": 45610,
  "blake2b-344": 45611,
  "blake2b-352": 45612,
  "blake2b-360": 45613,
  "blake2b-368": 45614,
  "blake2b-376": 45615,
  "blake2b-384": 45616,
  "blake2b-392": 45617,
  "blake2b-400": 45618,
  "blake2b-408": 45619,
  "blake2b-416": 45620,
  "blake2b-424": 45621,
  "blake2b-432": 45622,
  "blake2b-440": 45623,
  "blake2b-448": 45624,
  "blake2b-456": 45625,
  "blake2b-464": 45626,
  "blake2b-472": 45627,
  "blake2b-480": 45628,
  "blake2b-488": 45629,
  "blake2b-496": 45630,
  "blake2b-504": 45631,
  "blake2b-512": 45632,
  "blake2s-8": 45633,
  "blake2s-16": 45634,
  "blake2s-24": 45635,
  "blake2s-32": 45636,
  "blake2s-40": 45637,
  "blake2s-48": 45638,
  "blake2s-56": 45639,
  "blake2s-64": 45640,
  "blake2s-72": 45641,
  "blake2s-80": 45642,
  "blake2s-88": 45643,
  "blake2s-96": 45644,
  "blake2s-104": 45645,
  "blake2s-112": 45646,
  "blake2s-120": 45647,
  "blake2s-128": 45648,
  "blake2s-136": 45649,
  "blake2s-144": 45650,
  "blake2s-152": 45651,
  "blake2s-160": 45652,
  "blake2s-168": 45653,
  "blake2s-176": 45654,
  "blake2s-184": 45655,
  "blake2s-192": 45656,
  "blake2s-200": 45657,
  "blake2s-208": 45658,
  "blake2s-216": 45659,
  "blake2s-224": 45660,
  "blake2s-232": 45661,
  "blake2s-240": 45662,
  "blake2s-248": 45663,
  "blake2s-256": 45664,
  "skein256-8": 45825,
  "skein256-16": 45826,
  "skein256-24": 45827,
  "skein256-32": 45828,
  "skein256-40": 45829,
  "skein256-48": 45830,
  "skein256-56": 45831,
  "skein256-64": 45832,
  "skein256-72": 45833,
  "skein256-80": 45834,
  "skein256-88": 45835,
  "skein256-96": 45836,
  "skein256-104": 45837,
  "skein256-112": 45838,
  "skein256-120": 45839,
  "skein256-128": 45840,
  "skein256-136": 45841,
  "skein256-144": 45842,
  "skein256-152": 45843,
  "skein256-160": 45844,
  "skein256-168": 45845,
  "skein256-176": 45846,
  "skein256-184": 45847,
  "skein256-192": 45848,
  "skein256-200": 45849,
  "skein256-208": 45850,
  "skein256-216": 45851,
  "skein256-224": 45852,
  "skein256-232": 45853,
  "skein256-240": 45854,
  "skein256-248": 45855,
  "skein256-256": 45856,
  "skein512-8": 45857,
  "skein512-16": 45858,
  "skein512-24": 45859,
  "skein512-32": 45860,
  "skein512-40": 45861,
  "skein512-48": 45862,
  "skein512-56": 45863,
  "skein512-64": 45864,
  "skein512-72": 45865,
  "skein512-80": 45866,
  "skein512-88": 45867,
  "skein512-96": 45868,
  "skein512-104": 45869,
  "skein512-112": 45870,
  "skein512-120": 45871,
  "skein512-128": 45872,
  "skein512-136": 45873,
  "skein512-144": 45874,
  "skein512-152": 45875,
  "skein512-160": 45876,
  "skein512-168": 45877,
  "skein512-176": 45878,
  "skein512-184": 45879,
  "skein512-192": 45880,
  "skein512-200": 45881,
  "skein512-208": 45882,
  "skein512-216": 45883,
  "skein512-224": 45884,
  "skein512-232": 45885,
  "skein512-240": 45886,
  "skein512-248": 45887,
  "skein512-256": 45888,
  "skein512-264": 45889,
  "skein512-272": 45890,
  "skein512-280": 45891,
  "skein512-288": 45892,
  "skein512-296": 45893,
  "skein512-304": 45894,
  "skein512-312": 45895,
  "skein512-320": 45896,
  "skein512-328": 45897,
  "skein512-336": 45898,
  "skein512-344": 45899,
  "skein512-352": 45900,
  "skein512-360": 45901,
  "skein512-368": 45902,
  "skein512-376": 45903,
  "skein512-384": 45904,
  "skein512-392": 45905,
  "skein512-400": 45906,
  "skein512-408": 45907,
  "skein512-416": 45908,
  "skein512-424": 45909,
  "skein512-432": 45910,
  "skein512-440": 45911,
  "skein512-448": 45912,
  "skein512-456": 45913,
  "skein512-464": 45914,
  "skein512-472": 45915,
  "skein512-480": 45916,
  "skein512-488": 45917,
  "skein512-496": 45918,
  "skein512-504": 45919,
  "skein512-512": 45920,
  "skein1024-8": 45921,
  "skein1024-16": 45922,
  "skein1024-24": 45923,
  "skein1024-32": 45924,
  "skein1024-40": 45925,
  "skein1024-48": 45926,
  "skein1024-56": 45927,
  "skein1024-64": 45928,
  "skein1024-72": 45929,
  "skein1024-80": 45930,
  "skein1024-88": 45931,
  "skein1024-96": 45932,
  "skein1024-104": 45933,
  "skein1024-112": 45934,
  "skein1024-120": 45935,
  "skein1024-128": 45936,
  "skein1024-136": 45937,
  "skein1024-144": 45938,
  "skein1024-152": 45939,
  "skein1024-160": 45940,
  "skein1024-168": 45941,
  "skein1024-176": 45942,
  "skein1024-184": 45943,
  "skein1024-192": 45944,
  "skein1024-200": 45945,
  "skein1024-208": 45946,
  "skein1024-216": 45947,
  "skein1024-224": 45948,
  "skein1024-232": 45949,
  "skein1024-240": 45950,
  "skein1024-248": 45951,
  "skein1024-256": 45952,
  "skein1024-264": 45953,
  "skein1024-272": 45954,
  "skein1024-280": 45955,
  "skein1024-288": 45956,
  "skein1024-296": 45957,
  "skein1024-304": 45958,
  "skein1024-312": 45959,
  "skein1024-320": 45960,
  "skein1024-328": 45961,
  "skein1024-336": 45962,
  "skein1024-344": 45963,
  "skein1024-352": 45964,
  "skein1024-360": 45965,
  "skein1024-368": 45966,
  "skein1024-376": 45967,
  "skein1024-384": 45968,
  "skein1024-392": 45969,
  "skein1024-400": 45970,
  "skein1024-408": 45971,
  "skein1024-416": 45972,
  "skein1024-424": 45973,
  "skein1024-432": 45974,
  "skein1024-440": 45975,
  "skein1024-448": 45976,
  "skein1024-456": 45977,
  "skein1024-464": 45978,
  "skein1024-472": 45979,
  "skein1024-480": 45980,
  "skein1024-488": 45981,
  "skein1024-496": 45982,
  "skein1024-504": 45983,
  "skein1024-512": 45984,
  "skein1024-520": 45985,
  "skein1024-528": 45986,
  "skein1024-536": 45987,
  "skein1024-544": 45988,
  "skein1024-552": 45989,
  "skein1024-560": 45990,
  "skein1024-568": 45991,
  "skein1024-576": 45992,
  "skein1024-584": 45993,
  "skein1024-592": 45994,
  "skein1024-600": 45995,
  "skein1024-608": 45996,
  "skein1024-616": 45997,
  "skein1024-624": 45998,
  "skein1024-632": 45999,
  "skein1024-640": 46000,
  "skein1024-648": 46001,
  "skein1024-656": 46002,
  "skein1024-664": 46003,
  "skein1024-672": 46004,
  "skein1024-680": 46005,
  "skein1024-688": 46006,
  "skein1024-696": 46007,
  "skein1024-704": 46008,
  "skein1024-712": 46009,
  "skein1024-720": 46010,
  "skein1024-728": 46011,
  "skein1024-736": 46012,
  "skein1024-744": 46013,
  "skein1024-752": 46014,
  "skein1024-760": 46015,
  "skein1024-768": 46016,
  "skein1024-776": 46017,
  "skein1024-784": 46018,
  "skein1024-792": 46019,
  "skein1024-800": 46020,
  "skein1024-808": 46021,
  "skein1024-816": 46022,
  "skein1024-824": 46023,
  "skein1024-832": 46024,
  "skein1024-840": 46025,
  "skein1024-848": 46026,
  "skein1024-856": 46027,
  "skein1024-864": 46028,
  "skein1024-872": 46029,
  "skein1024-880": 46030,
  "skein1024-888": 46031,
  "skein1024-896": 46032,
  "skein1024-904": 46033,
  "skein1024-912": 46034,
  "skein1024-920": 46035,
  "skein1024-928": 46036,
  "skein1024-936": 46037,
  "skein1024-944": 46038,
  "skein1024-952": 46039,
  "skein1024-960": 46040,
  "skein1024-968": 46041,
  "skein1024-976": 46042,
  "skein1024-984": 46043,
  "skein1024-992": 46044,
  "skein1024-1000": 46045,
  "skein1024-1008": 46046,
  "skein1024-1016": 46047,
  "skein1024-1024": 46048,
  "holochain-adr-v0": 8417572,
  "holochain-adr-v1": 8483108,
  "holochain-key-v0": 9728292,
  "holochain-key-v1": 9793828,
  "holochain-sig-v0": 10645796,
  "holochain-sig-v1": 10711332
}
},{}],170:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _construct2=_interopRequireDefault(require("@babel/runtime/helpers/construct"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));function withIs(Class,_ref){var className=_ref.className,symbolName=_ref.symbolName;var symbol=Symbol["for"](symbolName);var ClassIsWrapper=(0,_defineProperty2["default"])({},className,function(_Class){(0,_inherits2["default"])(_class,_Class);function _class(){var _getPrototypeOf2;var _this2;(0,_classCallCheck2["default"])(this,_class);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this2=(0,_possibleConstructorReturn2["default"])(this,(_getPrototypeOf2=(0,_getPrototypeOf3["default"])(_class)).call.apply(_getPrototypeOf2,[this].concat(args)));Object.defineProperty((0,_assertThisInitialized2["default"])(_this2),symbol,{value:true});return _this2;}(0,_createClass2["default"])(_class,[{key:Symbol.toStringTag,get:function get(){return className;}}]);return _class;}(Class))[className];ClassIsWrapper["is".concat(className)]=function(obj){return!!(obj&&obj[symbol]);};return ClassIsWrapper;}function withIsProto(Class,_ref2){var className=_ref2.className,symbolName=_ref2.symbolName,withoutNew=_ref2.withoutNew;var symbol=Symbol["for"](symbolName);var ClassIsWrapper=(0,_defineProperty2["default"])({},className,function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}if(withoutNew&&!(this instanceof ClassIsWrapper)){return(0,_construct2["default"])(ClassIsWrapper,args);}var _this=Class.call.apply(Class,[this].concat(args))||this;if(_this&&!_this[symbol]){Object.defineProperty(_this,symbol,{value:true});}return _this;})[className];ClassIsWrapper.prototype=Object.create(Class.prototype);ClassIsWrapper.prototype.constructor=ClassIsWrapper;Object.defineProperty(ClassIsWrapper.prototype,Symbol.toStringTag,{get:function get(){return className;}});ClassIsWrapper["is".concat(className)]=function(obj){return!!(obj&&obj[symbol]);};return ClassIsWrapper;}module.exports=withIs;module.exports.proto=withIsProto;

},{"@babel/runtime/helpers/assertThisInitialized":46,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/construct":49,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/defineProperty":51,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60}],490:[function(require,module,exports){
(function (Buffer){
'use strict';var varint=require('varint');var codecNameToCodeVarint=require('./varint-table');var codeToCodecName=require('./name-table');var util=require('./util');exports=module.exports;exports.addPrefix=function(multicodecStrOrCode,data){var prefix;if(Buffer.isBuffer(multicodecStrOrCode)){prefix=util.varintBufferEncode(multicodecStrOrCode);}else{if(codecNameToCodeVarint[multicodecStrOrCode]){prefix=codecNameToCodeVarint[multicodecStrOrCode];}else{throw new Error('multicodec not recognized');}}return Buffer.concat([prefix,data]);};exports.rmPrefix=function(data){varint.decode(data);return data.slice(varint.decode.bytes);};exports.getCodec=function(prefixedData){var code=util.varintBufferDecode(prefixedData);var codecName=codeToCodecName[code.toString('hex')];if(codecName===undefined){throw new Error('Code `0x'+code.toString('hex')+'` not found');}return codecName;};exports.getName=function(codec){return codeToCodecName[codec.toString(16)];};exports.getNumber=function(name){var code=codecNameToCodeVarint[name];if(code===undefined){throw new Error('Codec `'+name+'` not found');}return util.varintBufferDecode(code)[0];};exports.getCode=function(prefixedData){return varint.decode(prefixedData);};exports.getCodeVarint=function(codecName){var code=codecNameToCodeVarint[codecName];if(code===undefined){throw new Error('Codec `'+codecName+'` not found');}return code;};exports.getVarint=function(code){return varint.encode(code);};var constants=require('./constants');Object.assign(exports,constants);exports.print=require('./print');

}).call(this,require("buffer").Buffer)

},{"./constants":489,"./name-table":491,"./print":492,"./util":493,"./varint-table":494,"buffer":1133,"varint":666}],487:[function(require,module,exports){
(function (Buffer){
'use strict';var constants=require('./constants');exports=module.exports=multibase;exports.encode=encode;exports.decode=decode;exports.isEncoded=isEncoded;exports.names=Object.freeze(Object.keys(constants.names));exports.codes=Object.freeze(Object.keys(constants.codes));var errNotSupported=new Error('Unsupported encoding');function multibase(nameOrCode,buf){if(!buf){throw new Error('requires an encoded buffer');}var base=getBase(nameOrCode);var codeBuf=Buffer.from(base.code);var name=base.name;validEncode(name,buf);return Buffer.concat([codeBuf,buf]);}function encode(nameOrCode,buf){var base=getBase(nameOrCode);var name=base.name;return multibase(name,Buffer.from(base.encode(buf)));}function decode(bufOrString){if(Buffer.isBuffer(bufOrString)){bufOrString=bufOrString.toString();}var code=bufOrString.substring(0,1);bufOrString=bufOrString.substring(1,bufOrString.length);if(typeof bufOrString==='string'){bufOrString=Buffer.from(bufOrString);}var base=getBase(code);return Buffer.from(base.decode(bufOrString.toString()));}function isEncoded(bufOrString){if(Buffer.isBuffer(bufOrString)){bufOrString=bufOrString.toString();}if(Object.prototype.toString.call(bufOrString)!=='[object String]'){return false;}var code=bufOrString.substring(0,1);try{var base=getBase(code);return base.name;}catch(err){return false;}}function validEncode(name,buf){var base=getBase(name);base.decode(buf.toString());}function getBase(nameOrCode){var base;if(constants.names[nameOrCode]){base=constants.names[nameOrCode];}else if(constants.codes[nameOrCode]){base=constants.codes[nameOrCode];}else{throw errNotSupported;}if(!base.isImplemented()){throw new Error('Base '+nameOrCode+' is not implemented yet');}return base;}

}).call(this,require("buffer").Buffer)

},{"./constants":486,"buffer":1133}],1279:[function(require,module,exports){
arguments[4][1244][0].apply(exports,arguments)
},{"dup":1244,"safe-buffer":1250}],171:[function(require,module,exports){
(function(){function CookieAccessInfo(domain,path,secure,script){if(this instanceof CookieAccessInfo){this.domain=domain||undefined;this.path=path||"/";this.secure=!!secure;this.script=!!script;return this;}return new CookieAccessInfo(domain,path,secure,script);}CookieAccessInfo.All=Object.freeze(Object.create(null));exports.CookieAccessInfo=CookieAccessInfo;function Cookie(cookiestr,request_domain,request_path){if(cookiestr instanceof Cookie){return cookiestr;}if(this instanceof Cookie){this.name=null;this.value=null;this.expiration_date=Infinity;this.path=String(request_path||"/");this.explicit_path=false;this.domain=request_domain||null;this.explicit_domain=false;this.secure=false;this.noscript=false;if(cookiestr){this.parse(cookiestr,request_domain,request_path);}return this;}return new Cookie(cookiestr,request_domain,request_path);}/* common-shake removed: exports.Cookie = */ void Cookie;Cookie.prototype.toString=function toString(){var str=[this.name+"="+this.value];if(this.expiration_date!==Infinity){str.push("expires="+new Date(this.expiration_date).toGMTString());}if(this.domain){str.push("domain="+this.domain);}if(this.path){str.push("path="+this.path);}if(this.secure){str.push("secure");}if(this.noscript){str.push("httponly");}return str.join("; ");};Cookie.prototype.toValueString=function toValueString(){return this.name+"="+this.value;};var cookie_str_splitter=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;Cookie.prototype.parse=function parse(str,request_domain,request_path){if(this instanceof Cookie){var parts=str.split(";").filter(function(value){return!!value;});var i;var pair=parts[0].match(/([^=]+)=([\s\S]*)/);if(!pair){console.warn("Invalid cookie header encountered. Header: '"+str+"'");return;}var key=pair[1];var value=pair[2];if(typeof key!=='string'||key.length===0||typeof value!=='string'){console.warn("Unable to extract values from cookie header. Cookie: '"+str+"'");return;}this.name=key;this.value=value;for(i=1;i<parts.length;i+=1){pair=parts[i].match(/([^=]+)(?:=([\s\S]*))?/);key=pair[1].trim().toLowerCase();value=pair[2];switch(key){case"httponly":this.noscript=true;break;case"expires":this.expiration_date=value?Number(Date.parse(value)):Infinity;break;case"path":this.path=value?value.trim():"";this.explicit_path=true;break;case"domain":this.domain=value?value.trim():"";this.explicit_domain=!!this.domain;break;case"secure":this.secure=true;break;}}if(!this.explicit_path){this.path=request_path||"/";}if(!this.explicit_domain){this.domain=request_domain;}return this;}return new Cookie().parse(str,request_domain,request_path);};Cookie.prototype.matches=function matches(access_info){if(access_info===CookieAccessInfo.All){return true;}if(this.noscript&&access_info.script||this.secure&&!access_info.secure||!this.collidesWith(access_info)){return false;}return true;};Cookie.prototype.collidesWith=function collidesWith(access_info){if(this.path&&!access_info.path||this.domain&&!access_info.domain){return false;}if(this.path&&access_info.path.indexOf(this.path)!==0){return false;}if(this.explicit_path&&access_info.path.indexOf(this.path)!==0){return false;}var access_domain=access_info.domain&&access_info.domain.replace(/^[\.]/,'');var cookie_domain=this.domain&&this.domain.replace(/^[\.]/,'');if(cookie_domain===access_domain){return true;}if(cookie_domain){if(!this.explicit_domain){return false;}var wildcard=access_domain.indexOf(cookie_domain);if(wildcard===-1||wildcard!==access_domain.length-cookie_domain.length){return false;}return true;}return true;};function CookieJar(){var cookies,cookies_list,collidable_cookie;if(this instanceof CookieJar){cookies=Object.create(null);this.setCookie=function setCookie(cookie,request_domain,request_path){var remove,i;cookie=new Cookie(cookie,request_domain,request_path);remove=cookie.expiration_date<=Date.now();if(cookies[cookie.name]!==undefined){cookies_list=cookies[cookie.name];for(i=0;i<cookies_list.length;i+=1){collidable_cookie=cookies_list[i];if(collidable_cookie.collidesWith(cookie)){if(remove){cookies_list.splice(i,1);if(cookies_list.length===0){delete cookies[cookie.name];}return false;}cookies_list[i]=cookie;return cookie;}}if(remove){return false;}cookies_list.push(cookie);return cookie;}if(remove){return false;}cookies[cookie.name]=[cookie];return cookies[cookie.name];};this.getCookie=function getCookie(cookie_name,access_info){var cookie,i;cookies_list=cookies[cookie_name];if(!cookies_list){return;}for(i=0;i<cookies_list.length;i+=1){cookie=cookies_list[i];if(cookie.expiration_date<=Date.now()){if(cookies_list.length===0){delete cookies[cookie.name];}continue;}if(cookie.matches(access_info)){return cookie;}}};this.getCookies=function getCookies(access_info){var matches=[],cookie_name,cookie;for(cookie_name in cookies){cookie=this.getCookie(cookie_name,access_info);if(cookie){matches.push(cookie);}}matches.toString=function toString(){return matches.join(":");};matches.toValueString=function toValueString(){return matches.map(function(c){return c.toValueString();}).join(';');};return matches;};return this;}return new CookieJar();}exports.CookieJar=CookieJar;CookieJar.prototype.setCookies=function setCookies(cookies,request_domain,request_path){cookies=Array.isArray(cookies)?cookies:cookies.split(cookie_str_splitter);var successful=[],i,cookie;cookies=cookies.map(function(item){return new Cookie(item,request_domain,request_path);});for(i=0;i<cookies.length;i+=1){cookie=cookies[i];if(this.setCookie(cookie,request_domain,request_path)){successful.push(cookie);}}return successful;};})();

},{}],172:[function(require,module,exports){
(function (Buffer){
var elliptic=require('elliptic');var BN=require('bn.js');module.exports=function createECDH(curve){return new ECDH(curve);};var aliases={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}};aliases.p224=aliases.secp224r1;aliases.p256=aliases.secp256r1=aliases.prime256v1;aliases.p192=aliases.secp192r1=aliases.prime192v1;aliases.p384=aliases.secp384r1;aliases.p521=aliases.secp521r1;function ECDH(curve){this.curveType=aliases[curve];if(!this.curveType){this.curveType={name:curve};}this.curve=new elliptic.ec(this.curveType.name);this.keys=void 0;}ECDH.prototype.generateKeys=function(enc,format){this.keys=this.curve.genKeyPair();return this.getPublicKey(enc,format);};ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||'utf8';if(!Buffer.isBuffer(other)){other=new Buffer(other,inenc);}var otherPub=this.curve.keyFromPublic(other).getPublic();var out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength);};ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==='compressed',true);if(format==='hybrid'){if(key[key.length-1]%2){key[0]=7;}else{key[0]=6;}}return formatReturnValue(key,enc);};ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc);};ECDH.prototype.setPublicKey=function(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}this.keys._importPublic(pub);return this;};ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}var _priv=new BN(priv);_priv=_priv.toString(16);this.keys=this.curve.genKeyPair();this.keys._importPrivate(_priv);return this;};function formatReturnValue(bn,enc,len){if(!Array.isArray(bn)){bn=bn.toArray();}var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0);buf=Buffer.concat([zeros,buf]);}if(!enc){return buf;}else{return buf.toString(enc);}}

}).call(this,require("buffer").Buffer)

},{"bn.js":132,"buffer":1133,"elliptic":222}],536:[function(require,module,exports){
'use strict';var Buffer=require('buffer').Buffer;var inherits=require('inherits');var HashBase=require('hash-base');var ARRAY16=new Array(16);var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var hl=[0x00000000,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e];var hr=[0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0x00000000];function RIPEMD160(){HashBase.call(this,64);this._a=0x67452301;this._b=0xefcdab89;this._c=0x98badcfe;this._d=0x10325476;this._e=0xc3d2e1f0;}inherits(RIPEMD160,HashBase);RIPEMD160.prototype._update=function(){var words=ARRAY16;for(var j=0;j<16;++j){words[j]=this._block.readInt32LE(j*4);}var al=this._a|0;var bl=this._b|0;var cl=this._c|0;var dl=this._d|0;var el=this._e|0;var ar=this._a|0;var br=this._b|0;var cr=this._c|0;var dr=this._d|0;var er=this._e|0;for(var i=0;i<80;i+=1){var tl;var tr;if(i<16){tl=fn1(al,bl,cl,dl,el,words[zl[i]],hl[0],sl[i]);tr=fn5(ar,br,cr,dr,er,words[zr[i]],hr[0],sr[i]);}else if(i<32){tl=fn2(al,bl,cl,dl,el,words[zl[i]],hl[1],sl[i]);tr=fn4(ar,br,cr,dr,er,words[zr[i]],hr[1],sr[i]);}else if(i<48){tl=fn3(al,bl,cl,dl,el,words[zl[i]],hl[2],sl[i]);tr=fn3(ar,br,cr,dr,er,words[zr[i]],hr[2],sr[i]);}else if(i<64){tl=fn4(al,bl,cl,dl,el,words[zl[i]],hl[3],sl[i]);tr=fn2(ar,br,cr,dr,er,words[zr[i]],hr[3],sr[i]);}else{tl=fn5(al,bl,cl,dl,el,words[zl[i]],hl[4],sl[i]);tr=fn1(ar,br,cr,dr,er,words[zr[i]],hr[4],sr[i]);}al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=tl;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=tr;}var t=this._b+cl+dr|0;this._b=this._c+dl+er|0;this._c=this._d+el+ar|0;this._d=this._e+al+br|0;this._e=this._a+bl+cr|0;this._a=t;};RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=0x80;if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64);this._update();this._blockOffset=0;}this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var buffer=Buffer.alloc?Buffer.alloc(20):new Buffer(20);buffer.writeInt32LE(this._a,0);buffer.writeInt32LE(this._b,4);buffer.writeInt32LE(this._c,8);buffer.writeInt32LE(this._d,12);buffer.writeInt32LE(this._e,16);return buffer;};function rotl(x,n){return x<<n|x>>>32-n;}function fn1(a,b,c,d,e,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+e|0;}function fn2(a,b,c,d,e,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+e|0;}function fn3(a,b,c,d,e,m,k,s){return rotl(a+((b|~c)^d)+m+k|0,s)+e|0;}function fn4(a,b,c,d,e,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+e|0;}function fn5(a,b,c,d,e,m,k,s){return rotl(a+(b^(c|~d))+m+k|0,s)+e|0;}module.exports=RIPEMD160;

},{"buffer":1133,"hash-base":291,"inherits":307}],478:[function(require,module,exports){
'use strict';var inherits=require('inherits');var HashBase=require('hash-base');var Buffer=require('safe-buffer').Buffer;var ARRAY16=new Array(16);function MD5(){HashBase.call(this,64);this._a=0x67452301;this._b=0xefcdab89;this._c=0x98badcfe;this._d=0x10325476;}inherits(MD5,HashBase);MD5.prototype._update=function(){var M=ARRAY16;for(var i=0;i<16;++i){M[i]=this._block.readInt32LE(i*4);}var a=this._a;var b=this._b;var c=this._c;var d=this._d;a=fnF(a,b,c,d,M[0],0xd76aa478,7);d=fnF(d,a,b,c,M[1],0xe8c7b756,12);c=fnF(c,d,a,b,M[2],0x242070db,17);b=fnF(b,c,d,a,M[3],0xc1bdceee,22);a=fnF(a,b,c,d,M[4],0xf57c0faf,7);d=fnF(d,a,b,c,M[5],0x4787c62a,12);c=fnF(c,d,a,b,M[6],0xa8304613,17);b=fnF(b,c,d,a,M[7],0xfd469501,22);a=fnF(a,b,c,d,M[8],0x698098d8,7);d=fnF(d,a,b,c,M[9],0x8b44f7af,12);c=fnF(c,d,a,b,M[10],0xffff5bb1,17);b=fnF(b,c,d,a,M[11],0x895cd7be,22);a=fnF(a,b,c,d,M[12],0x6b901122,7);d=fnF(d,a,b,c,M[13],0xfd987193,12);c=fnF(c,d,a,b,M[14],0xa679438e,17);b=fnF(b,c,d,a,M[15],0x49b40821,22);a=fnG(a,b,c,d,M[1],0xf61e2562,5);d=fnG(d,a,b,c,M[6],0xc040b340,9);c=fnG(c,d,a,b,M[11],0x265e5a51,14);b=fnG(b,c,d,a,M[0],0xe9b6c7aa,20);a=fnG(a,b,c,d,M[5],0xd62f105d,5);d=fnG(d,a,b,c,M[10],0x02441453,9);c=fnG(c,d,a,b,M[15],0xd8a1e681,14);b=fnG(b,c,d,a,M[4],0xe7d3fbc8,20);a=fnG(a,b,c,d,M[9],0x21e1cde6,5);d=fnG(d,a,b,c,M[14],0xc33707d6,9);c=fnG(c,d,a,b,M[3],0xf4d50d87,14);b=fnG(b,c,d,a,M[8],0x455a14ed,20);a=fnG(a,b,c,d,M[13],0xa9e3e905,5);d=fnG(d,a,b,c,M[2],0xfcefa3f8,9);c=fnG(c,d,a,b,M[7],0x676f02d9,14);b=fnG(b,c,d,a,M[12],0x8d2a4c8a,20);a=fnH(a,b,c,d,M[5],0xfffa3942,4);d=fnH(d,a,b,c,M[8],0x8771f681,11);c=fnH(c,d,a,b,M[11],0x6d9d6122,16);b=fnH(b,c,d,a,M[14],0xfde5380c,23);a=fnH(a,b,c,d,M[1],0xa4beea44,4);d=fnH(d,a,b,c,M[4],0x4bdecfa9,11);c=fnH(c,d,a,b,M[7],0xf6bb4b60,16);b=fnH(b,c,d,a,M[10],0xbebfbc70,23);a=fnH(a,b,c,d,M[13],0x289b7ec6,4);d=fnH(d,a,b,c,M[0],0xeaa127fa,11);c=fnH(c,d,a,b,M[3],0xd4ef3085,16);b=fnH(b,c,d,a,M[6],0x04881d05,23);a=fnH(a,b,c,d,M[9],0xd9d4d039,4);d=fnH(d,a,b,c,M[12],0xe6db99e5,11);c=fnH(c,d,a,b,M[15],0x1fa27cf8,16);b=fnH(b,c,d,a,M[2],0xc4ac5665,23);a=fnI(a,b,c,d,M[0],0xf4292244,6);d=fnI(d,a,b,c,M[7],0x432aff97,10);c=fnI(c,d,a,b,M[14],0xab9423a7,15);b=fnI(b,c,d,a,M[5],0xfc93a039,21);a=fnI(a,b,c,d,M[12],0x655b59c3,6);d=fnI(d,a,b,c,M[3],0x8f0ccc92,10);c=fnI(c,d,a,b,M[10],0xffeff47d,15);b=fnI(b,c,d,a,M[1],0x85845dd1,21);a=fnI(a,b,c,d,M[8],0x6fa87e4f,6);d=fnI(d,a,b,c,M[15],0xfe2ce6e0,10);c=fnI(c,d,a,b,M[6],0xa3014314,15);b=fnI(b,c,d,a,M[13],0x4e0811a1,21);a=fnI(a,b,c,d,M[4],0xf7537e82,6);d=fnI(d,a,b,c,M[11],0xbd3af235,10);c=fnI(c,d,a,b,M[2],0x2ad7d2bb,15);b=fnI(b,c,d,a,M[9],0xeb86d391,21);this._a=this._a+a|0;this._b=this._b+b|0;this._c=this._c+c|0;this._d=this._d+d|0;};MD5.prototype._digest=function(){this._block[this._blockOffset++]=0x80;if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64);this._update();this._blockOffset=0;}this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var buffer=Buffer.allocUnsafe(16);buffer.writeInt32LE(this._a,0);buffer.writeInt32LE(this._b,4);buffer.writeInt32LE(this._c,8);buffer.writeInt32LE(this._d,12);return buffer;};function rotl(x,n){return x<<n|x>>>32-n;}function fnF(a,b,c,d,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+b|0;}function fnG(a,b,c,d,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+b|0;}function fnH(a,b,c,d,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+b|0;}function fnI(a,b,c,d,m,k,s){return rotl(a+(c^(b|~d))+m+k|0,s)+b|0;}module.exports=MD5;

},{"hash-base":291,"inherits":307,"safe-buffer":639}],652:[function(require,module,exports){
var _exports=module.exports=function SHA(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=_exports[algorithm];if(!Algorithm)throw new Error(algorithm+' is not supported (we accept pull requests)');return new Algorithm();};_exports.sha=require('./sha');_exports.sha1=require('./sha1');_exports.sha224=require('./sha224');_exports.sha256=require('./sha256');_exports.sha384=require('./sha384');_exports.sha512=require('./sha512');

},{"./sha":653,"./sha1":654,"./sha224":655,"./sha256":656,"./sha384":657,"./sha512":658}],174:[function(require,module,exports){
var MD5=require('md5.js');module.exports=function(buffer){return new MD5().update(buffer).digest();};

},{"md5.js":478}],176:[function(require,module,exports){
'use strict';var inherits=require('inherits');var Buffer=require('safe-buffer').Buffer;var Base=require('cipher-base');var ZEROS=Buffer.alloc(128);var blocksize=64;function Hmac(alg,key){Base.call(this,'digest');if(typeof key==='string'){key=Buffer.from(key);}this._alg=alg;this._key=key;if(key.length>blocksize){key=alg(key);}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize);}var ipad=this._ipad=Buffer.allocUnsafe(blocksize);var opad=this._opad=Buffer.allocUnsafe(blocksize);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^0x36;opad[i]=key[i]^0x5C;}this._hash=[ipad];}inherits(Hmac,Base);Hmac.prototype._update=function(data){this._hash.push(data);};Hmac.prototype._final=function(){var h=this._alg(Buffer.concat(this._hash));return this._alg(Buffer.concat([this._opad,h]));};module.exports=Hmac;

},{"cipher-base":169,"inherits":307,"safe-buffer":639}],533:[function(require,module,exports){
(function (process,global){
'use strict';function oldBrowser(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11');}var safeBuffer=require('safe-buffer');var randombytes=require('randombytes');var Buffer=safeBuffer.Buffer;var kBufferMaxLength=safeBuffer.kMaxLength;var crypto=global.crypto||global.msCrypto;var kMaxUint32=Math.pow(2,32)-1;function assertOffset(offset,length){if(typeof offset!=='number'||offset!==offset){throw new TypeError('offset must be a number');}if(offset>kMaxUint32||offset<0){throw new TypeError('offset must be a uint32');}if(offset>kBufferMaxLength||offset>length){throw new RangeError('offset out of range');}}function assertSize(size,offset,length){if(typeof size!=='number'||size!==size){throw new TypeError('size must be a number');}if(size>kMaxUint32||size<0){throw new TypeError('size must be a uint32');}if(size+offset>length||size>kBufferMaxLength){throw new RangeError('buffer too small');}}if(crypto&&crypto.getRandomValues||!process.browser){/* common-shake removed: exports.randomFill = */ void randomFill;/* common-shake removed: exports.randomFillSync = */ void randomFillSync;}else{/* common-shake removed: exports.randomFill = */ void oldBrowser;/* common-shake removed: exports.randomFillSync = */ void oldBrowser;}function randomFill(buf,offset,size,cb){if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array');}if(typeof offset==='function'){cb=offset;offset=0;size=buf.length;}else if(typeof size==='function'){cb=size;size=buf.length-offset;}else if(typeof cb!=='function'){throw new TypeError('"cb" argument must be a function');}assertOffset(offset,buf.length);assertSize(size,offset,buf.length);return actualFill(buf,offset,size,cb);}function actualFill(buf,offset,size,cb){if(process.browser){var ourBuf=buf.buffer;var uint=new Uint8Array(ourBuf,offset,size);crypto.getRandomValues(uint);if(cb){process.nextTick(function(){cb(null,buf);});return;}return buf;}if(cb){randombytes(size,function(err,bytes){if(err){return cb(err);}bytes.copy(buf,offset);cb(null,buf);});return;}var bytes=randombytes(size);bytes.copy(buf,offset);return buf;}function randomFillSync(buf,offset,size){if(typeof offset==='undefined'){offset=0;}if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array');}assertOffset(offset,buf.length);if(size===undefined)size=buf.length-offset;assertSize(size,offset,buf.length);return actualFill(buf,offset,size);}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1221,"randombytes":532,"safe-buffer":639}],518:[function(require,module,exports){
exports.pbkdf2=require('./lib/async');exports.pbkdf2Sync=require('./lib/sync');

},{"./lib/async":519,"./lib/sync":522}],218:[function(require,module,exports){
(function (Buffer){
var generatePrime=require('./lib/generatePrime');var primes=require('./lib/primes.json');var DH=require('./lib/dh');function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,'hex');var gen=new Buffer(primes[mod].gen,'hex');return new DH(prime,gen);}var ENCODINGS={'binary':true,'hex':true,'base64':true};function createDiffieHellman(prime,enc,generator,genc){if(Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined){return createDiffieHellman(prime,'binary',enc,generator);}enc=enc||'binary';genc=genc||'binary';generator=generator||new Buffer([2]);if(!Buffer.isBuffer(generator)){generator=new Buffer(generator,genc);}if(typeof prime==='number'){return new DH(generatePrime(prime,generator),generator,true);}if(!Buffer.isBuffer(prime)){prime=new Buffer(prime,enc);}return new DH(prime,generator,true);}/* common-shake removed: exports.DiffieHellmanGroup = */ void 0, /* common-shake removed: exports.createDiffieHellmanGroup = */ void 0, /* common-shake removed: exports.getDiffieHellman = */ getDiffieHellman;exports.createDiffieHellman=/* common-shake removed: exports.DiffieHellman = */ createDiffieHellman;

}).call(this,require("buffer").Buffer)

},{"./lib/dh":219,"./lib/generatePrime":220,"./lib/primes.json":221,"buffer":1133}],525:[function(require,module,exports){
exports.publicEncrypt=require('./publicEncrypt');exports.privateDecrypt=require('./privateDecrypt');exports.privateEncrypt=function privateEncrypt(key,buf){return exports.publicEncrypt(key,buf,true);};exports.publicDecrypt=function publicDecrypt(key,buf){return exports.privateDecrypt(key,buf,true);};

},{"./privateDecrypt":527,"./publicEncrypt":528}],178:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var SBOX=[];var INV_SBOX=[];var SUB_MIX_0=[];var SUB_MIX_1=[];var SUB_MIX_2=[];var SUB_MIX_3=[];var INV_SUB_MIX_0=[];var INV_SUB_MIX_1=[];var INV_SUB_MIX_2=[];var INV_SUB_MIX_3=[];(function(){var d=[];for(var i=0;i<256;i++){if(i<128){d[i]=i<<1;}else{d[i]=i<<1^0x11b;}}var x=0;var xi=0;for(var i=0;i<256;i++){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&0xff^0x63;SBOX[x]=sx;INV_SBOX[sx]=x;var x2=d[x];var x4=d[x2];var x8=d[x4];var t=d[sx]*0x101^sx*0x1010100;SUB_MIX_0[x]=t<<24|t>>>8;SUB_MIX_1[x]=t<<16|t>>>16;SUB_MIX_2[x]=t<<8|t>>>24;SUB_MIX_3[x]=t;var t=x8*0x1010101^x4*0x10001^x2*0x101^x*0x1010100;INV_SUB_MIX_0[sx]=t<<24|t>>>8;INV_SUB_MIX_1[sx]=t<<16|t>>>16;INV_SUB_MIX_2[sx]=t<<8|t>>>24;INV_SUB_MIX_3[sx]=t;if(!x){x=xi=1;}else{x=x2^d[d[d[x8^x2]]];xi^=d[d[xi]];}}})();var RCON=[0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36];var AES=C_algo.AES=BlockCipher.extend({_doReset:function _doReset(){if(this._nRounds&&this._keyPriorReset===this._key){return;}var key=this._keyPriorReset=this._key;var keyWords=key.words;var keySize=key.sigBytes/4;var nRounds=this._nRounds=keySize+6;var ksRows=(nRounds+1)*4;var keySchedule=this._keySchedule=[];for(var ksRow=0;ksRow<ksRows;ksRow++){if(ksRow<keySize){keySchedule[ksRow]=keyWords[ksRow];}else{var t=keySchedule[ksRow-1];if(!(ksRow%keySize)){t=t<<8|t>>>24;t=SBOX[t>>>24]<<24|SBOX[t>>>16&0xff]<<16|SBOX[t>>>8&0xff]<<8|SBOX[t&0xff];t^=RCON[ksRow/keySize|0]<<24;}else if(keySize>6&&ksRow%keySize==4){t=SBOX[t>>>24]<<24|SBOX[t>>>16&0xff]<<16|SBOX[t>>>8&0xff]<<8|SBOX[t&0xff];}keySchedule[ksRow]=keySchedule[ksRow-keySize]^t;}}var invKeySchedule=this._invKeySchedule=[];for(var invKsRow=0;invKsRow<ksRows;invKsRow++){var ksRow=ksRows-invKsRow;if(invKsRow%4){var t=keySchedule[ksRow];}else{var t=keySchedule[ksRow-4];}if(invKsRow<4||ksRow<=4){invKeySchedule[invKsRow]=t;}else{invKeySchedule[invKsRow]=INV_SUB_MIX_0[SBOX[t>>>24]]^INV_SUB_MIX_1[SBOX[t>>>16&0xff]]^INV_SUB_MIX_2[SBOX[t>>>8&0xff]]^INV_SUB_MIX_3[SBOX[t&0xff]];}}},encryptBlock:function encryptBlock(M,offset){this._doCryptBlock(M,offset,this._keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX);},decryptBlock:function decryptBlock(M,offset){var t=M[offset+1];M[offset+1]=M[offset+3];M[offset+3]=t;this._doCryptBlock(M,offset,this._invKeySchedule,INV_SUB_MIX_0,INV_SUB_MIX_1,INV_SUB_MIX_2,INV_SUB_MIX_3,INV_SBOX);var t=M[offset+1];M[offset+1]=M[offset+3];M[offset+3]=t;},_doCryptBlock:function _doCryptBlock(M,offset,keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX){var nRounds=this._nRounds;var s0=M[offset]^keySchedule[0];var s1=M[offset+1]^keySchedule[1];var s2=M[offset+2]^keySchedule[2];var s3=M[offset+3]^keySchedule[3];var ksRow=4;for(var round=1;round<nRounds;round++){var t0=SUB_MIX_0[s0>>>24]^SUB_MIX_1[s1>>>16&0xff]^SUB_MIX_2[s2>>>8&0xff]^SUB_MIX_3[s3&0xff]^keySchedule[ksRow++];var t1=SUB_MIX_0[s1>>>24]^SUB_MIX_1[s2>>>16&0xff]^SUB_MIX_2[s3>>>8&0xff]^SUB_MIX_3[s0&0xff]^keySchedule[ksRow++];var t2=SUB_MIX_0[s2>>>24]^SUB_MIX_1[s3>>>16&0xff]^SUB_MIX_2[s0>>>8&0xff]^SUB_MIX_3[s1&0xff]^keySchedule[ksRow++];var t3=SUB_MIX_0[s3>>>24]^SUB_MIX_1[s0>>>16&0xff]^SUB_MIX_2[s1>>>8&0xff]^SUB_MIX_3[s2&0xff]^keySchedule[ksRow++];s0=t0;s1=t1;s2=t2;s3=t3;}var t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&0xff]<<16|SBOX[s2>>>8&0xff]<<8|SBOX[s3&0xff])^keySchedule[ksRow++];var t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&0xff]<<16|SBOX[s3>>>8&0xff]<<8|SBOX[s0&0xff])^keySchedule[ksRow++];var t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&0xff]<<16|SBOX[s0>>>8&0xff]<<8|SBOX[s1&0xff])^keySchedule[ksRow++];var t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&0xff]<<16|SBOX[s1>>>8&0xff]<<8|SBOX[s2&0xff])^keySchedule[ksRow++];M[offset]=t0;M[offset+1]=t1;M[offset+2]=t2;M[offset+3]=t3;},keySize:256/32});C.AES=BlockCipher._createHelper(AES);})();return CryptoJS.AES;});

},{"./cipher-core":179,"./core":180,"./enc-base64":181,"./evpkdf":183,"./md5":188,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],180:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory();}else if(typeof define==="function"&&define.amd){define([],factory);}else{root.CryptoJS=factory();}})(void 0,function(){var CryptoJS=CryptoJS||function(Math,undefined){var create=Object.create||function(){function F(){};return function(obj){var subtype;F.prototype=obj;subtype=new F();F.prototype=null;return subtype;};}();var C={};var C_lib=C.lib={};var Base=C_lib.Base=function(){return{extend:function extend(overrides){var subtype=create(this);if(overrides){subtype.mixIn(overrides);}if(!subtype.hasOwnProperty('init')||this.init===subtype.init){subtype.init=function(){subtype.$super.init.apply(this,arguments);};}subtype.init.prototype=subtype;subtype.$super=this;return subtype;},create:function create(){var instance=this.extend();instance.init.apply(instance,arguments);return instance;},init:function init(){},mixIn:function mixIn(properties){for(var propertyName in properties){if(properties.hasOwnProperty(propertyName)){this[propertyName]=properties[propertyName];}}if(properties.hasOwnProperty('toString')){this.toString=properties.toString;}},clone:function clone(){return this.init.prototype.extend(this);}};}();var WordArray=C_lib.WordArray=Base.extend({init:function init(words,sigBytes){words=this.words=words||[];if(sigBytes!=undefined){this.sigBytes=sigBytes;}else{this.sigBytes=words.length*4;}},toString:function toString(encoder){return(encoder||Hex).stringify(this);},concat:function concat(wordArray){var thisWords=this.words;var thatWords=wordArray.words;var thisSigBytes=this.sigBytes;var thatSigBytes=wordArray.sigBytes;this.clamp();if(thisSigBytes%4){for(var i=0;i<thatSigBytes;i++){var thatByte=thatWords[i>>>2]>>>24-i%4*8&0xff;thisWords[thisSigBytes+i>>>2]|=thatByte<<24-(thisSigBytes+i)%4*8;}}else{for(var i=0;i<thatSigBytes;i+=4){thisWords[thisSigBytes+i>>>2]=thatWords[i>>>2];}}this.sigBytes+=thatSigBytes;return this;},clamp:function clamp(){var words=this.words;var sigBytes=this.sigBytes;words[sigBytes>>>2]&=0xffffffff<<32-sigBytes%4*8;words.length=Math.ceil(sigBytes/4);},clone:function clone(){var clone=Base.clone.call(this);clone.words=this.words.slice(0);return clone;},random:function random(nBytes){var words=[];var r=function r(m_w){var m_w=m_w;var m_z=0x3ade68b1;var mask=0xffffffff;return function(){m_z=0x9069*(m_z&0xFFFF)+(m_z>>0x10)&mask;m_w=0x4650*(m_w&0xFFFF)+(m_w>>0x10)&mask;var result=(m_z<<0x10)+m_w&mask;result/=0x100000000;result+=0.5;return result*(Math.random()>.5?1:-1);};};for(var i=0,rcache;i<nBytes;i+=4){var _r=r((rcache||Math.random())*0x100000000);rcache=_r()*0x3ade67b7;words.push(_r()*0x100000000|0);}return new WordArray.init(words,nBytes);}});var C_enc=C.enc={};var Hex=C_enc.Hex={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var hexChars=[];for(var i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&0xff;hexChars.push((bite>>>4).toString(16));hexChars.push((bite&0x0f).toString(16));}return hexChars.join('');},parse:function parse(hexStr){var hexStrLength=hexStr.length;var words=[];for(var i=0;i<hexStrLength;i+=2){words[i>>>3]|=parseInt(hexStr.substr(i,2),16)<<24-i%8*4;}return new WordArray.init(words,hexStrLength/2);}};var Latin1=C_enc.Latin1={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var latin1Chars=[];for(var i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&0xff;latin1Chars.push(String.fromCharCode(bite));}return latin1Chars.join('');},parse:function parse(latin1Str){var latin1StrLength=latin1Str.length;var words=[];for(var i=0;i<latin1StrLength;i++){words[i>>>2]|=(latin1Str.charCodeAt(i)&0xff)<<24-i%4*8;}return new WordArray.init(words,latin1StrLength);}};var Utf8=C_enc.Utf8={stringify:function stringify(wordArray){try{return decodeURIComponent(escape(Latin1.stringify(wordArray)));}catch(e){throw new Error('Malformed UTF-8 data');}},parse:function parse(utf8Str){return Latin1.parse(unescape(encodeURIComponent(utf8Str)));}};var BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm=Base.extend({reset:function reset(){this._data=new WordArray.init();this._nDataBytes=0;},_append:function _append(data){if(typeof data=='string'){data=Utf8.parse(data);}this._data.concat(data);this._nDataBytes+=data.sigBytes;},_process:function _process(doFlush){var data=this._data;var dataWords=data.words;var dataSigBytes=data.sigBytes;var blockSize=this.blockSize;var blockSizeBytes=blockSize*4;var nBlocksReady=dataSigBytes/blockSizeBytes;if(doFlush){nBlocksReady=Math.ceil(nBlocksReady);}else{nBlocksReady=Math.max((nBlocksReady|0)-this._minBufferSize,0);}var nWordsReady=nBlocksReady*blockSize;var nBytesReady=Math.min(nWordsReady*4,dataSigBytes);if(nWordsReady){for(var offset=0;offset<nWordsReady;offset+=blockSize){this._doProcessBlock(dataWords,offset);}var processedWords=dataWords.splice(0,nWordsReady);data.sigBytes-=nBytesReady;}return new WordArray.init(processedWords,nBytesReady);},clone:function clone(){var clone=Base.clone.call(this);clone._data=this._data.clone();return clone;},_minBufferSize:0});var Hasher=C_lib.Hasher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),init:function init(cfg){this.cfg=this.cfg.extend(cfg);this.reset();},reset:function reset(){BufferedBlockAlgorithm.reset.call(this);this._doReset();},update:function update(messageUpdate){this._append(messageUpdate);this._process();return this;},finalize:function finalize(messageUpdate){if(messageUpdate){this._append(messageUpdate);}var hash=this._doFinalize();return hash;},blockSize:512/32,_createHelper:function _createHelper(hasher){return function(message,cfg){return new hasher.init(cfg).finalize(message);};},_createHmacHelper:function _createHmacHelper(hasher){return function(message,key){return new C_algo.HMAC.init(hasher,key).finalize(message);};}});var C_algo=C.algo={};return C;}(Math);return CryptoJS;});

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],181:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Base64=C_enc.Base64={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var map=this._map;wordArray.clamp();var base64Chars=[];for(var i=0;i<sigBytes;i+=3){var byte1=words[i>>>2]>>>24-i%4*8&0xff;var byte2=words[i+1>>>2]>>>24-(i+1)%4*8&0xff;var byte3=words[i+2>>>2]>>>24-(i+2)%4*8&0xff;var triplet=byte1<<16|byte2<<8|byte3;for(var j=0;j<4&&i+j*0.75<sigBytes;j++){base64Chars.push(map.charAt(triplet>>>6*(3-j)&0x3f));}}var paddingChar=map.charAt(64);if(paddingChar){while(base64Chars.length%4){base64Chars.push(paddingChar);}}return base64Chars.join('');},parse:function parse(base64Str){var base64StrLength=base64Str.length;var map=this._map;var reverseMap=this._reverseMap;if(!reverseMap){reverseMap=this._reverseMap=[];for(var j=0;j<map.length;j++){reverseMap[map.charCodeAt(j)]=j;}}var paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);if(paddingIndex!==-1){base64StrLength=paddingIndex;}}return parseLoop(base64Str,base64StrLength,reverseMap);},_map:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='};function parseLoop(base64Str,base64StrLength,reverseMap){var words=[];var nBytes=0;for(var i=0;i<base64StrLength;i++){if(i%4){var bits1=reverseMap[base64Str.charCodeAt(i-1)]<<i%4*2;var bits2=reverseMap[base64Str.charCodeAt(i)]>>>6-i%4*2;words[nBytes>>>2]|=(bits1|bits2)<<24-nBytes%4*8;nBytes++;}}return WordArray.create(words,nBytes);}})();return CryptoJS.enc.Base64;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],188:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var T=[];(function(){for(var i=0;i<64;i++){T[i]=Math.abs(Math.sin(i+1))*0x100000000|0;}})();var MD5=C_algo.MD5=Hasher.extend({_doReset:function _doReset(){this._hash=new WordArray.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476]);},_doProcessBlock:function _doProcessBlock(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&0x00ff00ff|(M_offset_i<<24|M_offset_i>>>8)&0xff00ff00;}var H=this._hash.words;var M_offset_0=M[offset+0];var M_offset_1=M[offset+1];var M_offset_2=M[offset+2];var M_offset_3=M[offset+3];var M_offset_4=M[offset+4];var M_offset_5=M[offset+5];var M_offset_6=M[offset+6];var M_offset_7=M[offset+7];var M_offset_8=M[offset+8];var M_offset_9=M[offset+9];var M_offset_10=M[offset+10];var M_offset_11=M[offset+11];var M_offset_12=M[offset+12];var M_offset_13=M[offset+13];var M_offset_14=M[offset+14];var M_offset_15=M[offset+15];var a=H[0];var b=H[1];var c=H[2];var d=H[3];a=FF(a,b,c,d,M_offset_0,7,T[0]);d=FF(d,a,b,c,M_offset_1,12,T[1]);c=FF(c,d,a,b,M_offset_2,17,T[2]);b=FF(b,c,d,a,M_offset_3,22,T[3]);a=FF(a,b,c,d,M_offset_4,7,T[4]);d=FF(d,a,b,c,M_offset_5,12,T[5]);c=FF(c,d,a,b,M_offset_6,17,T[6]);b=FF(b,c,d,a,M_offset_7,22,T[7]);a=FF(a,b,c,d,M_offset_8,7,T[8]);d=FF(d,a,b,c,M_offset_9,12,T[9]);c=FF(c,d,a,b,M_offset_10,17,T[10]);b=FF(b,c,d,a,M_offset_11,22,T[11]);a=FF(a,b,c,d,M_offset_12,7,T[12]);d=FF(d,a,b,c,M_offset_13,12,T[13]);c=FF(c,d,a,b,M_offset_14,17,T[14]);b=FF(b,c,d,a,M_offset_15,22,T[15]);a=GG(a,b,c,d,M_offset_1,5,T[16]);d=GG(d,a,b,c,M_offset_6,9,T[17]);c=GG(c,d,a,b,M_offset_11,14,T[18]);b=GG(b,c,d,a,M_offset_0,20,T[19]);a=GG(a,b,c,d,M_offset_5,5,T[20]);d=GG(d,a,b,c,M_offset_10,9,T[21]);c=GG(c,d,a,b,M_offset_15,14,T[22]);b=GG(b,c,d,a,M_offset_4,20,T[23]);a=GG(a,b,c,d,M_offset_9,5,T[24]);d=GG(d,a,b,c,M_offset_14,9,T[25]);c=GG(c,d,a,b,M_offset_3,14,T[26]);b=GG(b,c,d,a,M_offset_8,20,T[27]);a=GG(a,b,c,d,M_offset_13,5,T[28]);d=GG(d,a,b,c,M_offset_2,9,T[29]);c=GG(c,d,a,b,M_offset_7,14,T[30]);b=GG(b,c,d,a,M_offset_12,20,T[31]);a=HH(a,b,c,d,M_offset_5,4,T[32]);d=HH(d,a,b,c,M_offset_8,11,T[33]);c=HH(c,d,a,b,M_offset_11,16,T[34]);b=HH(b,c,d,a,M_offset_14,23,T[35]);a=HH(a,b,c,d,M_offset_1,4,T[36]);d=HH(d,a,b,c,M_offset_4,11,T[37]);c=HH(c,d,a,b,M_offset_7,16,T[38]);b=HH(b,c,d,a,M_offset_10,23,T[39]);a=HH(a,b,c,d,M_offset_13,4,T[40]);d=HH(d,a,b,c,M_offset_0,11,T[41]);c=HH(c,d,a,b,M_offset_3,16,T[42]);b=HH(b,c,d,a,M_offset_6,23,T[43]);a=HH(a,b,c,d,M_offset_9,4,T[44]);d=HH(d,a,b,c,M_offset_12,11,T[45]);c=HH(c,d,a,b,M_offset_15,16,T[46]);b=HH(b,c,d,a,M_offset_2,23,T[47]);a=II(a,b,c,d,M_offset_0,6,T[48]);d=II(d,a,b,c,M_offset_7,10,T[49]);c=II(c,d,a,b,M_offset_14,15,T[50]);b=II(b,c,d,a,M_offset_5,21,T[51]);a=II(a,b,c,d,M_offset_12,6,T[52]);d=II(d,a,b,c,M_offset_3,10,T[53]);c=II(c,d,a,b,M_offset_10,15,T[54]);b=II(b,c,d,a,M_offset_1,21,T[55]);a=II(a,b,c,d,M_offset_8,6,T[56]);d=II(d,a,b,c,M_offset_15,10,T[57]);c=II(c,d,a,b,M_offset_6,15,T[58]);b=II(b,c,d,a,M_offset_13,21,T[59]);a=II(a,b,c,d,M_offset_4,6,T[60]);d=II(d,a,b,c,M_offset_11,10,T[61]);c=II(c,d,a,b,M_offset_2,15,T[62]);b=II(b,c,d,a,M_offset_9,21,T[63]);H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;var nBitsTotalH=Math.floor(nBitsTotal/0x100000000);var nBitsTotalL=nBitsTotal;dataWords[(nBitsLeft+64>>>9<<4)+15]=(nBitsTotalH<<8|nBitsTotalH>>>24)&0x00ff00ff|(nBitsTotalH<<24|nBitsTotalH>>>8)&0xff00ff00;dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotalL<<8|nBitsTotalL>>>24)&0x00ff00ff|(nBitsTotalL<<24|nBitsTotalL>>>8)&0xff00ff00;data.sigBytes=(dataWords.length+1)*4;this._process();var hash=this._hash;var H=hash.words;for(var i=0;i<4;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&0x00ff00ff|(H_i<<24|H_i>>>8)&0xff00ff00;}return hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});function FF(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+x+t;return(n<<s|n>>>32-s)+b;}function GG(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+x+t;return(n<<s|n>>>32-s)+b;}function HH(a,b,c,d,x,s,t){var n=a+(b^c^d)+x+t;return(n<<s|n>>>32-s)+b;}function II(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+x+t;return(n<<s|n>>>32-s)+b;}C.MD5=Hasher._createHelper(MD5);C.HmacMD5=Hasher._createHmacHelper(MD5);})(Math);return CryptoJS.MD5;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],183:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./sha1"),require("./hmac"));}else if(typeof define==="function"&&define.amd){define(["./core","./sha1","./hmac"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var C_algo=C.algo;var MD5=C_algo.MD5;var EvpKDF=C_algo.EvpKDF=Base.extend({cfg:Base.extend({keySize:128/32,hasher:MD5,iterations:1}),init:function init(cfg){this.cfg=this.cfg.extend(cfg);},compute:function compute(password,salt){var cfg=this.cfg;var hasher=cfg.hasher.create();var derivedKey=WordArray.create();var derivedKeyWords=derivedKey.words;var keySize=cfg.keySize;var iterations=cfg.iterations;while(derivedKeyWords.length<keySize){if(block){hasher.update(block);}var block=hasher.update(password).finalize(salt);hasher.reset();for(var i=1;i<iterations;i++){block=hasher.finalize(block);hasher.reset();}derivedKey.concat(block);}derivedKey.sigBytes=keySize*4;return derivedKey;}});C.EvpKDF=function(password,salt,cfg){return EvpKDF.create(cfg).compute(password,salt);};})();return CryptoJS.EvpKDF;});

},{"./core":180,"./hmac":185,"./sha1":204,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],179:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./evpkdf"));}else if(typeof define==="function"&&define.amd){define(["./core","./evpkdf"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.lib.Cipher||function(undefined){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm;var C_enc=C.enc;var Utf8=C_enc.Utf8;var Base64=C_enc.Base64;var C_algo=C.algo;var EvpKDF=C_algo.EvpKDF;var Cipher=C_lib.Cipher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),createEncryptor:function createEncryptor(key,cfg){return this.create(this._ENC_XFORM_MODE,key,cfg);},createDecryptor:function createDecryptor(key,cfg){return this.create(this._DEC_XFORM_MODE,key,cfg);},init:function init(xformMode,key,cfg){this.cfg=this.cfg.extend(cfg);this._xformMode=xformMode;this._key=key;this.reset();},reset:function reset(){BufferedBlockAlgorithm.reset.call(this);this._doReset();},process:function process(dataUpdate){this._append(dataUpdate);return this._process();},finalize:function finalize(dataUpdate){if(dataUpdate){this._append(dataUpdate);}var finalProcessedData=this._doFinalize();return finalProcessedData;},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(key){if(typeof key=='string'){return PasswordBasedCipher;}else{return SerializableCipher;}}return function(cipher){return{encrypt:function encrypt(message,key,cfg){return selectCipherStrategy(key).encrypt(cipher,message,key,cfg);},decrypt:function decrypt(ciphertext,key,cfg){return selectCipherStrategy(key).decrypt(cipher,ciphertext,key,cfg);}};};}()});var StreamCipher=C_lib.StreamCipher=Cipher.extend({_doFinalize:function _doFinalize(){var finalProcessedBlocks=this._process(!!'flush');return finalProcessedBlocks;},blockSize:1});var C_mode=C.mode={};var BlockCipherMode=C_lib.BlockCipherMode=Base.extend({createEncryptor:function createEncryptor(cipher,iv){return this.Encryptor.create(cipher,iv);},createDecryptor:function createDecryptor(cipher,iv){return this.Decryptor.create(cipher,iv);},init:function init(cipher,iv){this._cipher=cipher;this._iv=iv;}});var CBC=C_mode.CBC=function(){var CBC=BlockCipherMode.extend();CBC.Encryptor=CBC.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;xorBlock.call(this,words,offset,blockSize);cipher.encryptBlock(words,offset);this._prevBlock=words.slice(offset,offset+blockSize);}});CBC.Decryptor=CBC.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var thisBlock=words.slice(offset,offset+blockSize);cipher.decryptBlock(words,offset);xorBlock.call(this,words,offset,blockSize);this._prevBlock=thisBlock;}});function xorBlock(words,offset,blockSize){var iv=this._iv;if(iv){var block=iv;this._iv=undefined;}else{var block=this._prevBlock;}for(var i=0;i<blockSize;i++){words[offset+i]^=block[i];}}return CBC;}();var C_pad=C.pad={};var Pkcs7=C_pad.Pkcs7={pad:function pad(data,blockSize){var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;var paddingWord=nPaddingBytes<<24|nPaddingBytes<<16|nPaddingBytes<<8|nPaddingBytes;var paddingWords=[];for(var i=0;i<nPaddingBytes;i+=4){paddingWords.push(paddingWord);}var padding=WordArray.create(paddingWords,nPaddingBytes);data.concat(padding);},unpad:function unpad(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&0xff;data.sigBytes-=nPaddingBytes;}};var BlockCipher=C_lib.BlockCipher=Cipher.extend({cfg:Cipher.cfg.extend({mode:CBC,padding:Pkcs7}),reset:function reset(){Cipher.reset.call(this);var cfg=this.cfg;var iv=cfg.iv;var mode=cfg.mode;if(this._xformMode==this._ENC_XFORM_MODE){var modeCreator=mode.createEncryptor;}else{var modeCreator=mode.createDecryptor;this._minBufferSize=1;}if(this._mode&&this._mode.__creator==modeCreator){this._mode.init(this,iv&&iv.words);}else{this._mode=modeCreator.call(mode,this,iv&&iv.words);this._mode.__creator=modeCreator;}},_doProcessBlock:function _doProcessBlock(words,offset){this._mode.processBlock(words,offset);},_doFinalize:function _doFinalize(){var padding=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){padding.pad(this._data,this.blockSize);var finalProcessedBlocks=this._process(!!'flush');}else{var finalProcessedBlocks=this._process(!!'flush');padding.unpad(finalProcessedBlocks);}return finalProcessedBlocks;},blockSize:128/32});var CipherParams=C_lib.CipherParams=Base.extend({init:function init(cipherParams){this.mixIn(cipherParams);},toString:function toString(formatter){return(formatter||this.formatter).stringify(this);}});var C_format=C.format={};var OpenSSLFormatter=C_format.OpenSSL={stringify:function stringify(cipherParams){var ciphertext=cipherParams.ciphertext;var salt=cipherParams.salt;if(salt){var wordArray=WordArray.create([0x53616c74,0x65645f5f]).concat(salt).concat(ciphertext);}else{var wordArray=ciphertext;}return wordArray.toString(Base64);},parse:function parse(openSSLStr){var ciphertext=Base64.parse(openSSLStr);var ciphertextWords=ciphertext.words;if(ciphertextWords[0]==0x53616c74&&ciphertextWords[1]==0x65645f5f){var salt=WordArray.create(ciphertextWords.slice(2,4));ciphertextWords.splice(0,4);ciphertext.sigBytes-=16;}return CipherParams.create({ciphertext:ciphertext,salt:salt});}};var SerializableCipher=C_lib.SerializableCipher=Base.extend({cfg:Base.extend({format:OpenSSLFormatter}),encrypt:function encrypt(cipher,message,key,cfg){cfg=this.cfg.extend(cfg);var encryptor=cipher.createEncryptor(key,cfg);var ciphertext=encryptor.finalize(message);var cipherCfg=encryptor.cfg;return CipherParams.create({ciphertext:ciphertext,key:key,iv:cipherCfg.iv,algorithm:cipher,mode:cipherCfg.mode,padding:cipherCfg.padding,blockSize:cipher.blockSize,formatter:cfg.format});},decrypt:function decrypt(cipher,ciphertext,key,cfg){cfg=this.cfg.extend(cfg);ciphertext=this._parse(ciphertext,cfg.format);var plaintext=cipher.createDecryptor(key,cfg).finalize(ciphertext.ciphertext);return plaintext;},_parse:function _parse(ciphertext,format){if(typeof ciphertext=='string'){return format.parse(ciphertext,this);}else{return ciphertext;}}});var C_kdf=C.kdf={};var OpenSSLKdf=C_kdf.OpenSSL={execute:function execute(password,keySize,ivSize,salt){if(!salt){salt=WordArray.random(64/8);}var key=EvpKDF.create({keySize:keySize+ivSize}).compute(password,salt);var iv=WordArray.create(key.words.slice(keySize),ivSize*4);key.sigBytes=keySize*4;return CipherParams.create({key:key,iv:iv,salt:salt});}};var PasswordBasedCipher=C_lib.PasswordBasedCipher=SerializableCipher.extend({cfg:SerializableCipher.cfg.extend({kdf:OpenSSLKdf}),encrypt:function encrypt(cipher,message,password,cfg){cfg=this.cfg.extend(cfg);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize);cfg.iv=derivedParams.iv;var ciphertext=SerializableCipher.encrypt.call(this,cipher,message,derivedParams.key,cfg);ciphertext.mixIn(derivedParams);return ciphertext;},decrypt:function decrypt(cipher,ciphertext,password,cfg){cfg=this.cfg.extend(cfg);ciphertext=this._parse(ciphertext,cfg.format);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize,ciphertext.salt);cfg.iv=derivedParams.iv;var plaintext=SerializableCipher.decrypt.call(this,cipher,ciphertext,derivedParams.key,cfg);return plaintext;}});}();});

},{"./core":180,"./evpkdf":183,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],182:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Utf16BE=C_enc.Utf16=C_enc.Utf16BE={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var utf16Chars=[];for(var i=0;i<sigBytes;i+=2){var codePoint=words[i>>>2]>>>16-i%4*8&0xffff;utf16Chars.push(String.fromCharCode(codePoint));}return utf16Chars.join('');},parse:function parse(utf16Str){var utf16StrLength=utf16Str.length;var words=[];for(var i=0;i<utf16StrLength;i++){words[i>>>1]|=utf16Str.charCodeAt(i)<<16-i%2*16;}return WordArray.create(words,utf16StrLength*2);}};C_enc.Utf16LE={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var utf16Chars=[];for(var i=0;i<sigBytes;i+=2){var codePoint=swapEndian(words[i>>>2]>>>16-i%4*8&0xffff);utf16Chars.push(String.fromCharCode(codePoint));}return utf16Chars.join('');},parse:function parse(utf16Str){var utf16StrLength=utf16Str.length;var words=[];for(var i=0;i<utf16StrLength;i++){words[i>>>1]|=swapEndian(utf16Str.charCodeAt(i)<<16-i%2*16);}return WordArray.create(words,utf16StrLength*2);}};function swapEndian(word){return word<<8&0xff00ff00|word>>>8&0x00ff00ff;}})();return CryptoJS.enc.Utf16;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],204:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var W=[];var SHA1=C_algo.SHA1=Hasher.extend({_doReset:function _doReset(){this._hash=new WordArray.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0]);},_doProcessBlock:function _doProcessBlock(M,offset){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];for(var i=0;i<80;i++){if(i<16){W[i]=M[offset+i]|0;}else{var n=W[i-3]^W[i-8]^W[i-14]^W[i-16];W[i]=n<<1|n>>>31;}var t=(a<<5|a>>>27)+e+W[i];if(i<20){t+=(b&c|~b&d)+0x5a827999;}else if(i<40){t+=(b^c^d)+0x6ed9eba1;}else if(i<60){t+=(b&c|b&d|c&d)-0x70e44324;}else{t+=(b^c^d)-0x359d3e2a;}e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;H[4]=H[4]+e|0;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/0x100000000);dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();return this._hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});C.SHA1=Hasher._createHelper(SHA1);C.HmacSHA1=Hasher._createHmacHelper(SHA1);})();return CryptoJS.SHA1;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],185:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var C_enc=C.enc;var Utf8=C_enc.Utf8;var C_algo=C.algo;var HMAC=C_algo.HMAC=Base.extend({init:function init(hasher,key){hasher=this._hasher=new hasher.init();if(typeof key=='string'){key=Utf8.parse(key);}var hasherBlockSize=hasher.blockSize;var hasherBlockSizeBytes=hasherBlockSize*4;if(key.sigBytes>hasherBlockSizeBytes){key=hasher.finalize(key);}key.clamp();var oKey=this._oKey=key.clone();var iKey=this._iKey=key.clone();var oKeyWords=oKey.words;var iKeyWords=iKey.words;for(var i=0;i<hasherBlockSize;i++){oKeyWords[i]^=0x5c5c5c5c;iKeyWords[i]^=0x36363636;}oKey.sigBytes=iKey.sigBytes=hasherBlockSizeBytes;this.reset();},reset:function reset(){var hasher=this._hasher;hasher.reset();hasher.update(this._iKey);},update:function update(messageUpdate){this._hasher.update(messageUpdate);return this;},finalize:function finalize(messageUpdate){var hasher=this._hasher;var innerHash=hasher.finalize(messageUpdate);hasher.reset();var hmac=hasher.finalize(this._oKey.clone().concat(innerHash));return hmac;}});})();});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],184:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(undefined){var C=CryptoJS;var C_lib=C.lib;var CipherParams=C_lib.CipherParams;var C_enc=C.enc;var Hex=C_enc.Hex;var C_format=C.format;var HexFormatter=C_format.Hex={stringify:function stringify(cipherParams){return cipherParams.ciphertext.toString(Hex);},parse:function parse(input){var ciphertext=Hex.parse(input);return CipherParams.create({ciphertext:ciphertext});}};})();return CryptoJS.format.Hex;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],211:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(undefined){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var X32WordArray=C_lib.WordArray;var C_x64=C.x64={};var X64Word=C_x64.Word=Base.extend({init:function init(high,low){this.high=high;this.low=low;}});var X64WordArray=C_x64.WordArray=Base.extend({init:function init(words,sigBytes){words=this.words=words||[];if(sigBytes!=undefined){this.sigBytes=sigBytes;}else{this.sigBytes=words.length*8;}},toX32:function toX32(){var x64Words=this.words;var x64WordsLength=x64Words.length;var x32Words=[];for(var i=0;i<x64WordsLength;i++){var x64Word=x64Words[i];x32Words.push(x64Word.high);x32Words.push(x64Word.low);}return X32WordArray.create(x32Words,this.sigBytes);},clone:function clone(){var clone=Base.clone.call(this);var words=clone.words=this.words.slice(0);var wordsLength=words.length;for(var i=0;i<wordsLength;i++){words[i]=words[i].clone();}return clone;}});})();return CryptoJS;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],209:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Hasher=C_lib.Hasher;var C_x64=C.x64;var X64Word=C_x64.Word;var X64WordArray=C_x64.WordArray;var C_algo=C.algo;function X64Word_create(){return X64Word.create.apply(X64Word,arguments);}var K=[X64Word_create(0x428a2f98,0xd728ae22),X64Word_create(0x71374491,0x23ef65cd),X64Word_create(0xb5c0fbcf,0xec4d3b2f),X64Word_create(0xe9b5dba5,0x8189dbbc),X64Word_create(0x3956c25b,0xf348b538),X64Word_create(0x59f111f1,0xb605d019),X64Word_create(0x923f82a4,0xaf194f9b),X64Word_create(0xab1c5ed5,0xda6d8118),X64Word_create(0xd807aa98,0xa3030242),X64Word_create(0x12835b01,0x45706fbe),X64Word_create(0x243185be,0x4ee4b28c),X64Word_create(0x550c7dc3,0xd5ffb4e2),X64Word_create(0x72be5d74,0xf27b896f),X64Word_create(0x80deb1fe,0x3b1696b1),X64Word_create(0x9bdc06a7,0x25c71235),X64Word_create(0xc19bf174,0xcf692694),X64Word_create(0xe49b69c1,0x9ef14ad2),X64Word_create(0xefbe4786,0x384f25e3),X64Word_create(0x0fc19dc6,0x8b8cd5b5),X64Word_create(0x240ca1cc,0x77ac9c65),X64Word_create(0x2de92c6f,0x592b0275),X64Word_create(0x4a7484aa,0x6ea6e483),X64Word_create(0x5cb0a9dc,0xbd41fbd4),X64Word_create(0x76f988da,0x831153b5),X64Word_create(0x983e5152,0xee66dfab),X64Word_create(0xa831c66d,0x2db43210),X64Word_create(0xb00327c8,0x98fb213f),X64Word_create(0xbf597fc7,0xbeef0ee4),X64Word_create(0xc6e00bf3,0x3da88fc2),X64Word_create(0xd5a79147,0x930aa725),X64Word_create(0x06ca6351,0xe003826f),X64Word_create(0x14292967,0x0a0e6e70),X64Word_create(0x27b70a85,0x46d22ffc),X64Word_create(0x2e1b2138,0x5c26c926),X64Word_create(0x4d2c6dfc,0x5ac42aed),X64Word_create(0x53380d13,0x9d95b3df),X64Word_create(0x650a7354,0x8baf63de),X64Word_create(0x766a0abb,0x3c77b2a8),X64Word_create(0x81c2c92e,0x47edaee6),X64Word_create(0x92722c85,0x1482353b),X64Word_create(0xa2bfe8a1,0x4cf10364),X64Word_create(0xa81a664b,0xbc423001),X64Word_create(0xc24b8b70,0xd0f89791),X64Word_create(0xc76c51a3,0x0654be30),X64Word_create(0xd192e819,0xd6ef5218),X64Word_create(0xd6990624,0x5565a910),X64Word_create(0xf40e3585,0x5771202a),X64Word_create(0x106aa070,0x32bbd1b8),X64Word_create(0x19a4c116,0xb8d2d0c8),X64Word_create(0x1e376c08,0x5141ab53),X64Word_create(0x2748774c,0xdf8eeb99),X64Word_create(0x34b0bcb5,0xe19b48a8),X64Word_create(0x391c0cb3,0xc5c95a63),X64Word_create(0x4ed8aa4a,0xe3418acb),X64Word_create(0x5b9cca4f,0x7763e373),X64Word_create(0x682e6ff3,0xd6b2b8a3),X64Word_create(0x748f82ee,0x5defb2fc),X64Word_create(0x78a5636f,0x43172f60),X64Word_create(0x84c87814,0xa1f0ab72),X64Word_create(0x8cc70208,0x1a6439ec),X64Word_create(0x90befffa,0x23631e28),X64Word_create(0xa4506ceb,0xde82bde9),X64Word_create(0xbef9a3f7,0xb2c67915),X64Word_create(0xc67178f2,0xe372532b),X64Word_create(0xca273ece,0xea26619c),X64Word_create(0xd186b8c7,0x21c0c207),X64Word_create(0xeada7dd6,0xcde0eb1e),X64Word_create(0xf57d4f7f,0xee6ed178),X64Word_create(0x06f067aa,0x72176fba),X64Word_create(0x0a637dc5,0xa2c898a6),X64Word_create(0x113f9804,0xbef90dae),X64Word_create(0x1b710b35,0x131c471b),X64Word_create(0x28db77f5,0x23047d84),X64Word_create(0x32caab7b,0x40c72493),X64Word_create(0x3c9ebe0a,0x15c9bebc),X64Word_create(0x431d67c4,0x9c100d4c),X64Word_create(0x4cc5d4be,0xcb3e42b6),X64Word_create(0x597f299c,0xfc657e2a),X64Word_create(0x5fcb6fab,0x3ad6faec),X64Word_create(0x6c44198c,0x4a475817)];var W=[];(function(){for(var i=0;i<80;i++){W[i]=X64Word_create();}})();var SHA512=C_algo.SHA512=Hasher.extend({_doReset:function _doReset(){this._hash=new X64WordArray.init([new X64Word.init(0x6a09e667,0xf3bcc908),new X64Word.init(0xbb67ae85,0x84caa73b),new X64Word.init(0x3c6ef372,0xfe94f82b),new X64Word.init(0xa54ff53a,0x5f1d36f1),new X64Word.init(0x510e527f,0xade682d1),new X64Word.init(0x9b05688c,0x2b3e6c1f),new X64Word.init(0x1f83d9ab,0xfb41bd6b),new X64Word.init(0x5be0cd19,0x137e2179)]);},_doProcessBlock:function _doProcessBlock(M,offset){var H=this._hash.words;var H0=H[0];var H1=H[1];var H2=H[2];var H3=H[3];var H4=H[4];var H5=H[5];var H6=H[6];var H7=H[7];var H0h=H0.high;var H0l=H0.low;var H1h=H1.high;var H1l=H1.low;var H2h=H2.high;var H2l=H2.low;var H3h=H3.high;var H3l=H3.low;var H4h=H4.high;var H4l=H4.low;var H5h=H5.high;var H5l=H5.low;var H6h=H6.high;var H6l=H6.low;var H7h=H7.high;var H7l=H7.low;var ah=H0h;var al=H0l;var bh=H1h;var bl=H1l;var ch=H2h;var cl=H2l;var dh=H3h;var dl=H3l;var eh=H4h;var el=H4l;var fh=H5h;var fl=H5l;var gh=H6h;var gl=H6l;var hh=H7h;var hl=H7l;for(var i=0;i<80;i++){var Wi=W[i];if(i<16){var Wih=Wi.high=M[offset+i*2]|0;var Wil=Wi.low=M[offset+i*2+1]|0;}else{var gamma0x=W[i-15];var gamma0xh=gamma0x.high;var gamma0xl=gamma0x.low;var gamma0h=(gamma0xh>>>1|gamma0xl<<31)^(gamma0xh>>>8|gamma0xl<<24)^gamma0xh>>>7;var gamma0l=(gamma0xl>>>1|gamma0xh<<31)^(gamma0xl>>>8|gamma0xh<<24)^(gamma0xl>>>7|gamma0xh<<25);var gamma1x=W[i-2];var gamma1xh=gamma1x.high;var gamma1xl=gamma1x.low;var gamma1h=(gamma1xh>>>19|gamma1xl<<13)^(gamma1xh<<3|gamma1xl>>>29)^gamma1xh>>>6;var gamma1l=(gamma1xl>>>19|gamma1xh<<13)^(gamma1xl<<3|gamma1xh>>>29)^(gamma1xl>>>6|gamma1xh<<26);var Wi7=W[i-7];var Wi7h=Wi7.high;var Wi7l=Wi7.low;var Wi16=W[i-16];var Wi16h=Wi16.high;var Wi16l=Wi16.low;var Wil=gamma0l+Wi7l;var Wih=gamma0h+Wi7h+(Wil>>>0<gamma0l>>>0?1:0);var Wil=Wil+gamma1l;var Wih=Wih+gamma1h+(Wil>>>0<gamma1l>>>0?1:0);var Wil=Wil+Wi16l;var Wih=Wih+Wi16h+(Wil>>>0<Wi16l>>>0?1:0);Wi.high=Wih;Wi.low=Wil;}var chh=eh&fh^~eh&gh;var chl=el&fl^~el&gl;var majh=ah&bh^ah&ch^bh&ch;var majl=al&bl^al&cl^bl&cl;var sigma0h=(ah>>>28|al<<4)^(ah<<30|al>>>2)^(ah<<25|al>>>7);var sigma0l=(al>>>28|ah<<4)^(al<<30|ah>>>2)^(al<<25|ah>>>7);var sigma1h=(eh>>>14|el<<18)^(eh>>>18|el<<14)^(eh<<23|el>>>9);var sigma1l=(el>>>14|eh<<18)^(el>>>18|eh<<14)^(el<<23|eh>>>9);var Ki=K[i];var Kih=Ki.high;var Kil=Ki.low;var t1l=hl+sigma1l;var t1h=hh+sigma1h+(t1l>>>0<hl>>>0?1:0);var t1l=t1l+chl;var t1h=t1h+chh+(t1l>>>0<chl>>>0?1:0);var t1l=t1l+Kil;var t1h=t1h+Kih+(t1l>>>0<Kil>>>0?1:0);var t1l=t1l+Wil;var t1h=t1h+Wih+(t1l>>>0<Wil>>>0?1:0);var t2l=sigma0l+majl;var t2h=sigma0h+majh+(t2l>>>0<sigma0l>>>0?1:0);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;el=dl+t1l|0;eh=dh+t1h+(el>>>0<dl>>>0?1:0)|0;dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;al=t1l+t2l|0;ah=t1h+t2h+(al>>>0<t1l>>>0?1:0)|0;}H0l=H0.low=H0l+al;H0.high=H0h+ah+(H0l>>>0<al>>>0?1:0);H1l=H1.low=H1l+bl;H1.high=H1h+bh+(H1l>>>0<bl>>>0?1:0);H2l=H2.low=H2l+cl;H2.high=H2h+ch+(H2l>>>0<cl>>>0?1:0);H3l=H3.low=H3l+dl;H3.high=H3h+dh+(H3l>>>0<dl>>>0?1:0);H4l=H4.low=H4l+el;H4.high=H4h+eh+(H4l>>>0<el>>>0?1:0);H5l=H5.low=H5l+fl;H5.high=H5h+fh+(H5l>>>0<fl>>>0?1:0);H6l=H6.low=H6l+gl;H6.high=H6h+gh+(H6l>>>0<gl>>>0?1:0);H7l=H7.low=H7l+hl;H7.high=H7h+hh+(H7l>>>0<hl>>>0?1:0);},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+128>>>10<<5)+30]=Math.floor(nBitsTotal/0x100000000);dataWords[(nBitsLeft+128>>>10<<5)+31]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();var hash=this._hash.toX32();return hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;},blockSize:1024/32});C.SHA512=Hasher._createHelper(SHA512);C.HmacSHA512=Hasher._createHmacHelper(SHA512);})();return CryptoJS.SHA512;});

},{"./core":180,"./x64-core":211,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],205:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./sha256"));}else if(typeof define==="function"&&define.amd){define(["./core","./sha256"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_algo=C.algo;var SHA256=C_algo.SHA256;var SHA224=C_algo.SHA224=SHA256.extend({_doReset:function _doReset(){this._hash=new WordArray.init([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]);},_doFinalize:function _doFinalize(){var hash=SHA256._doFinalize.call(this);hash.sigBytes-=4;return hash;}});C.SHA224=SHA256._createHelper(SHA224);C.HmacSHA224=SHA256._createHmacHelper(SHA224);})();return CryptoJS.SHA224;});

},{"./core":180,"./sha256":206,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],206:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var H=[];var K=[];(function(){function isPrime(n){var sqrtN=Math.sqrt(n);for(var factor=2;factor<=sqrtN;factor++){if(!(n%factor)){return false;}}return true;}function getFractionalBits(n){return(n-(n|0))*0x100000000|0;}var n=2;var nPrime=0;while(nPrime<64){if(isPrime(n)){if(nPrime<8){H[nPrime]=getFractionalBits(Math.pow(n,1/2));}K[nPrime]=getFractionalBits(Math.pow(n,1/3));nPrime++;}n++;}})();var W=[];var SHA256=C_algo.SHA256=Hasher.extend({_doReset:function _doReset(){this._hash=new WordArray.init(H.slice(0));},_doProcessBlock:function _doProcessBlock(M,offset){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];var f=H[5];var g=H[6];var h=H[7];for(var i=0;i<64;i++){if(i<16){W[i]=M[offset+i]|0;}else{var gamma0x=W[i-15];var gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3;var gamma1x=W[i-2];var gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;W[i]=gamma0+W[i-7]+gamma1+W[i-16];}var ch=e&f^~e&g;var maj=a&b^a&c^b&c;var sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22);var sigma1=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25);var t1=h+sigma1+ch+K[i]+W[i];var t2=sigma0+maj;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0;}H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;H[4]=H[4]+e|0;H[5]=H[5]+f|0;H[6]=H[6]+g|0;H[7]=H[7]+h|0;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/0x100000000);dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();return this._hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});C.SHA256=Hasher._createHelper(SHA256);C.HmacSHA256=Hasher._createHmacHelper(SHA256);})(Math);return CryptoJS.SHA256;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],208:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"),require("./sha512"));}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core","./sha512"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_x64=C.x64;var X64Word=C_x64.Word;var X64WordArray=C_x64.WordArray;var C_algo=C.algo;var SHA512=C_algo.SHA512;var SHA384=C_algo.SHA384=SHA512.extend({_doReset:function _doReset(){this._hash=new X64WordArray.init([new X64Word.init(0xcbbb9d5d,0xc1059ed8),new X64Word.init(0x629a292a,0x367cd507),new X64Word.init(0x9159015a,0x3070dd17),new X64Word.init(0x152fecd8,0xf70e5939),new X64Word.init(0x67332667,0xffc00b31),new X64Word.init(0x8eb44a87,0x68581511),new X64Word.init(0xdb0c2e0d,0x64f98fa7),new X64Word.init(0x47b5481d,0xbefa4fa4)]);},_doFinalize:function _doFinalize(){var hash=SHA512._doFinalize.call(this);hash.sigBytes-=16;return hash;}});C.SHA384=SHA512._createHelper(SHA384);C.HmacSHA384=SHA512._createHmacHelper(SHA384);})();return CryptoJS.SHA384;});

},{"./core":180,"./sha512":209,"./x64-core":211,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],203:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var _zl=WordArray.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]);var _zr=WordArray.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]);var _sl=WordArray.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]);var _sr=WordArray.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);var _hl=WordArray.create([0x00000000,0x5A827999,0x6ED9EBA1,0x8F1BBCDC,0xA953FD4E]);var _hr=WordArray.create([0x50A28BE6,0x5C4DD124,0x6D703EF3,0x7A6D76E9,0x00000000]);var RIPEMD160=C_algo.RIPEMD160=Hasher.extend({_doReset:function _doReset(){this._hash=WordArray.create([0x67452301,0xEFCDAB89,0x98BADCFE,0x10325476,0xC3D2E1F0]);},_doProcessBlock:function _doProcessBlock(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&0x00ff00ff|(M_offset_i<<24|M_offset_i>>>8)&0xff00ff00;}var H=this._hash.words;var hl=_hl.words;var hr=_hr.words;var zl=_zl.words;var zr=_zr.words;var sl=_sl.words;var sr=_sr.words;var al,bl,cl,dl,el;var ar,br,cr,dr,er;ar=al=H[0];br=bl=H[1];cr=cl=H[2];dr=dl=H[3];er=el=H[4];var t;for(var i=0;i<80;i+=1){t=al+M[offset+zl[i]]|0;if(i<16){t+=f1(bl,cl,dl)+hl[0];}else if(i<32){t+=f2(bl,cl,dl)+hl[1];}else if(i<48){t+=f3(bl,cl,dl)+hl[2];}else if(i<64){t+=f4(bl,cl,dl)+hl[3];}else{t+=f5(bl,cl,dl)+hl[4];}t=t|0;t=rotl(t,sl[i]);t=t+el|0;al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=t;t=ar+M[offset+zr[i]]|0;if(i<16){t+=f5(br,cr,dr)+hr[0];}else if(i<32){t+=f4(br,cr,dr)+hr[1];}else if(i<48){t+=f3(br,cr,dr)+hr[2];}else if(i<64){t+=f2(br,cr,dr)+hr[3];}else{t+=f1(br,cr,dr)+hr[4];}t=t|0;t=rotl(t,sr[i]);t=t+er|0;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=t;}t=H[1]+cl+dr|0;H[1]=H[2]+dl+er|0;H[2]=H[3]+el+ar|0;H[3]=H[4]+al+br|0;H[4]=H[0]+bl+cr|0;H[0]=t;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&0x00ff00ff|(nBitsTotal<<24|nBitsTotal>>>8)&0xff00ff00;data.sigBytes=(dataWords.length+1)*4;this._process();var hash=this._hash;var H=hash.words;for(var i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&0x00ff00ff|(H_i<<24|H_i>>>8)&0xff00ff00;}return hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});function f1(x,y,z){return x^y^z;}function f2(x,y,z){return x&y|~x&z;}function f3(x,y,z){return(x|~y)^z;}function f4(x,y,z){return x&z|y&~z;}function f5(x,y,z){return x^(y|~z);}function rotl(x,n){return x<<n|x>>>32-n;}C.RIPEMD160=Hasher._createHelper(RIPEMD160);C.HmacRIPEMD160=Hasher._createHmacHelper(RIPEMD160);})(Math);return CryptoJS.RIPEMD160;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],207:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_x64=C.x64;var X64Word=C_x64.Word;var C_algo=C.algo;var RHO_OFFSETS=[];var PI_INDEXES=[];var ROUND_CONSTANTS=[];(function(){var x=1,y=0;for(var t=0;t<24;t++){RHO_OFFSETS[x+5*y]=(t+1)*(t+2)/2%64;var newX=y%5;var newY=(2*x+3*y)%5;x=newX;y=newY;}for(var x=0;x<5;x++){for(var y=0;y<5;y++){PI_INDEXES[x+5*y]=y+(2*x+3*y)%5*5;}}var LFSR=0x01;for(var i=0;i<24;i++){var roundConstantMsw=0;var roundConstantLsw=0;for(var j=0;j<7;j++){if(LFSR&0x01){var bitPosition=(1<<j)-1;if(bitPosition<32){roundConstantLsw^=1<<bitPosition;}else{roundConstantMsw^=1<<bitPosition-32;}}if(LFSR&0x80){LFSR=LFSR<<1^0x71;}else{LFSR<<=1;}}ROUND_CONSTANTS[i]=X64Word.create(roundConstantMsw,roundConstantLsw);}})();var T=[];(function(){for(var i=0;i<25;i++){T[i]=X64Word.create();}})();var SHA3=C_algo.SHA3=Hasher.extend({cfg:Hasher.cfg.extend({outputLength:512}),_doReset:function _doReset(){var state=this._state=[];for(var i=0;i<25;i++){state[i]=new X64Word.init();}this.blockSize=(1600-2*this.cfg.outputLength)/32;},_doProcessBlock:function _doProcessBlock(M,offset){var state=this._state;var nBlockSizeLanes=this.blockSize/2;for(var i=0;i<nBlockSizeLanes;i++){var M2i=M[offset+2*i];var M2i1=M[offset+2*i+1];M2i=(M2i<<8|M2i>>>24)&0x00ff00ff|(M2i<<24|M2i>>>8)&0xff00ff00;M2i1=(M2i1<<8|M2i1>>>24)&0x00ff00ff|(M2i1<<24|M2i1>>>8)&0xff00ff00;var lane=state[i];lane.high^=M2i1;lane.low^=M2i;}for(var round=0;round<24;round++){for(var x=0;x<5;x++){var tMsw=0,tLsw=0;for(var y=0;y<5;y++){var lane=state[x+5*y];tMsw^=lane.high;tLsw^=lane.low;}var Tx=T[x];Tx.high=tMsw;Tx.low=tLsw;}for(var x=0;x<5;x++){var Tx4=T[(x+4)%5];var Tx1=T[(x+1)%5];var Tx1Msw=Tx1.high;var Tx1Lsw=Tx1.low;var tMsw=Tx4.high^(Tx1Msw<<1|Tx1Lsw>>>31);var tLsw=Tx4.low^(Tx1Lsw<<1|Tx1Msw>>>31);for(var y=0;y<5;y++){var lane=state[x+5*y];lane.high^=tMsw;lane.low^=tLsw;}}for(var laneIndex=1;laneIndex<25;laneIndex++){var lane=state[laneIndex];var laneMsw=lane.high;var laneLsw=lane.low;var rhoOffset=RHO_OFFSETS[laneIndex];if(rhoOffset<32){var tMsw=laneMsw<<rhoOffset|laneLsw>>>32-rhoOffset;var tLsw=laneLsw<<rhoOffset|laneMsw>>>32-rhoOffset;}else{var tMsw=laneLsw<<rhoOffset-32|laneMsw>>>64-rhoOffset;var tLsw=laneMsw<<rhoOffset-32|laneLsw>>>64-rhoOffset;}var TPiLane=T[PI_INDEXES[laneIndex]];TPiLane.high=tMsw;TPiLane.low=tLsw;}var T0=T[0];var state0=state[0];T0.high=state0.high;T0.low=state0.low;for(var x=0;x<5;x++){for(var y=0;y<5;y++){var laneIndex=x+5*y;var lane=state[laneIndex];var TLane=T[laneIndex];var Tx1Lane=T[(x+1)%5+5*y];var Tx2Lane=T[(x+2)%5+5*y];lane.high=TLane.high^~Tx1Lane.high&Tx2Lane.high;lane.low=TLane.low^~Tx1Lane.low&Tx2Lane.low;}}var lane=state[0];var roundConstant=ROUND_CONSTANTS[round];lane.high^=roundConstant.high;lane.low^=roundConstant.low;;}},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;var blockSizeBits=this.blockSize*32;dataWords[nBitsLeft>>>5]|=0x1<<24-nBitsLeft%32;dataWords[(Math.ceil((nBitsLeft+1)/blockSizeBits)*blockSizeBits>>>5)-1]|=0x80;data.sigBytes=dataWords.length*4;this._process();var state=this._state;var outputLengthBytes=this.cfg.outputLength/8;var outputLengthLanes=outputLengthBytes/8;var hashWords=[];for(var i=0;i<outputLengthLanes;i++){var lane=state[i];var laneMsw=lane.high;var laneLsw=lane.low;laneMsw=(laneMsw<<8|laneMsw>>>24)&0x00ff00ff|(laneMsw<<24|laneMsw>>>8)&0xff00ff00;laneLsw=(laneLsw<<8|laneLsw>>>24)&0x00ff00ff|(laneLsw<<24|laneLsw>>>8)&0xff00ff00;hashWords.push(laneLsw);hashWords.push(laneMsw);}return new WordArray.init(hashWords,outputLengthBytes);},clone:function clone(){var clone=Hasher.clone.call(this);var state=clone._state=this._state.slice(0);for(var i=0;i<25;i++){state[i]=state[i].clone();}return clone;}});C.SHA3=Hasher._createHelper(SHA3);C.HmacSHA3=Hasher._createHmacHelper(SHA3);})(Math);return CryptoJS.SHA3;});

},{"./core":180,"./x64-core":211,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],199:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./sha1"),require("./hmac"));}else if(typeof define==="function"&&define.amd){define(["./core","./sha1","./hmac"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var C_algo=C.algo;var SHA1=C_algo.SHA1;var HMAC=C_algo.HMAC;var PBKDF2=C_algo.PBKDF2=Base.extend({cfg:Base.extend({keySize:128/32,hasher:SHA1,iterations:1}),init:function init(cfg){this.cfg=this.cfg.extend(cfg);},compute:function compute(password,salt){var cfg=this.cfg;var hmac=HMAC.create(cfg.hasher,password);var derivedKey=WordArray.create();var blockIndex=WordArray.create([0x00000001]);var derivedKeyWords=derivedKey.words;var blockIndexWords=blockIndex.words;var keySize=cfg.keySize;var iterations=cfg.iterations;while(derivedKeyWords.length<keySize){var block=hmac.update(salt).finalize(blockIndex);hmac.reset();var blockWords=block.words;var blockWordsLength=blockWords.length;var intermediate=block;for(var i=1;i<iterations;i++){intermediate=hmac.finalize(intermediate);hmac.reset();var intermediateWords=intermediate.words;for(var j=0;j<blockWordsLength;j++){blockWords[j]^=intermediateWords[j];}}derivedKey.concat(block);blockIndexWords[0]++;}derivedKey.sigBytes=keySize*4;return derivedKey;}});C.PBKDF2=function(password,salt,cfg){return PBKDF2.create(cfg).compute(password,salt);};})();return CryptoJS.PBKDF2;});

},{"./core":180,"./hmac":185,"./sha1":204,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],189:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.mode.CFB=function(){var CFB=CryptoJS.lib.BlockCipherMode.extend();CFB.Encryptor=CFB.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher);this._prevBlock=words.slice(offset,offset+blockSize);}});CFB.Decryptor=CFB.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var thisBlock=words.slice(offset,offset+blockSize);generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher);this._prevBlock=thisBlock;}});function generateKeystreamAndEncrypt(words,offset,blockSize,cipher){var iv=this._iv;if(iv){var keystream=iv.slice(0);this._iv=undefined;}else{var keystream=this._prevBlock;}cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}return CFB;}();return CryptoJS.mode.CFB;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],191:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.mode.CTR=function(){var CTR=CryptoJS.lib.BlockCipherMode.extend();var Encryptor=CTR.Encryptor=CTR.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var counter=this._counter;if(iv){counter=this._counter=iv.slice(0);this._iv=undefined;}var keystream=counter.slice(0);cipher.encryptBlock(keystream,0);counter[blockSize-1]=counter[blockSize-1]+1|0;for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}});CTR.Decryptor=Encryptor;return CTR;}();return CryptoJS.mode.CTR;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],190:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */CryptoJS.mode.CTRGladman=function(){var CTRGladman=CryptoJS.lib.BlockCipherMode.extend();function incWord(word){if((word>>24&0xff)===0xff){var b1=word>>16&0xff;var b2=word>>8&0xff;var b3=word&0xff;if(b1===0xff){b1=0;if(b2===0xff){b2=0;if(b3===0xff){b3=0;}else{++b3;}}else{++b2;}}else{++b1;}word=0;word+=b1<<16;word+=b2<<8;word+=b3;}else{word+=0x01<<24;}return word;}function incCounter(counter){if((counter[0]=incWord(counter[0]))===0){counter[1]=incWord(counter[1]);}return counter;}var Encryptor=CTRGladman.Encryptor=CTRGladman.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var counter=this._counter;if(iv){counter=this._counter=iv.slice(0);this._iv=undefined;}incCounter(counter);var keystream=counter.slice(0);cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}});CTRGladman.Decryptor=Encryptor;return CTRGladman;}();return CryptoJS.mode.CTRGladman;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],193:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.mode.OFB=function(){var OFB=CryptoJS.lib.BlockCipherMode.extend();var Encryptor=OFB.Encryptor=OFB.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var keystream=this._keystream;if(iv){keystream=this._keystream=iv.slice(0);this._iv=undefined;}cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}});OFB.Decryptor=Encryptor;return OFB;}();return CryptoJS.mode.OFB;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],192:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.mode.ECB=function(){var ECB=CryptoJS.lib.BlockCipherMode.extend();ECB.Encryptor=ECB.extend({processBlock:function processBlock(words,offset){this._cipher.encryptBlock(words,offset);}});ECB.Decryptor=ECB.extend({processBlock:function processBlock(words,offset){this._cipher.decryptBlock(words,offset);}});return ECB;}();return CryptoJS.mode.ECB;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],194:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.pad.AnsiX923={pad:function pad(data,blockSize){var dataSigBytes=data.sigBytes;var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-dataSigBytes%blockSizeBytes;var lastBytePos=dataSigBytes+nPaddingBytes-1;data.clamp();data.words[lastBytePos>>>2]|=nPaddingBytes<<24-lastBytePos%4*8;data.sigBytes+=nPaddingBytes;},unpad:function unpad(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&0xff;data.sigBytes-=nPaddingBytes;}};return CryptoJS.pad.Ansix923;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],195:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.pad.Iso10126={pad:function pad(data,blockSize){var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes-1)).concat(CryptoJS.lib.WordArray.create([nPaddingBytes<<24],1));},unpad:function unpad(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&0xff;data.sigBytes-=nPaddingBytes;}};return CryptoJS.pad.Iso10126;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],196:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.pad.Iso97971={pad:function pad(data,blockSize){data.concat(CryptoJS.lib.WordArray.create([0x80000000],1));CryptoJS.pad.ZeroPadding.pad(data,blockSize);},unpad:function unpad(data){CryptoJS.pad.ZeroPadding.unpad(data);data.sigBytes--;}};return CryptoJS.pad.Iso97971;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],198:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.pad.ZeroPadding={pad:function pad(data,blockSize){var blockSizeBytes=blockSize*4;data.clamp();data.sigBytes+=blockSizeBytes-(data.sigBytes%blockSizeBytes||blockSizeBytes);},unpad:function unpad(data){var dataWords=data.words;var i=data.sigBytes-1;while(!(dataWords[i>>>2]>>>24-i%4*8&0xff)){i--;}data.sigBytes=i+1;}};return CryptoJS.pad.ZeroPadding;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],197:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){CryptoJS.pad.NoPadding={pad:function pad(){},unpad:function unpad(){}};return CryptoJS.pad.NoPadding;});

},{"./cipher-core":179,"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],210:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var PC1=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var PC2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var BIT_SHIFTS=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var SBOX_P=[{0x0:0x808200,0x10000000:0x8000,0x20000000:0x808002,0x30000000:0x2,0x40000000:0x200,0x50000000:0x808202,0x60000000:0x800202,0x70000000:0x800000,0x80000000:0x202,0x90000000:0x800200,0xa0000000:0x8200,0xb0000000:0x808000,0xc0000000:0x8002,0xd0000000:0x800002,0xe0000000:0x0,0xf0000000:0x8202,0x8000000:0x0,0x18000000:0x808202,0x28000000:0x8202,0x38000000:0x8000,0x48000000:0x808200,0x58000000:0x200,0x68000000:0x808002,0x78000000:0x2,0x88000000:0x800200,0x98000000:0x8200,0xa8000000:0x808000,0xb8000000:0x800202,0xc8000000:0x800002,0xd8000000:0x8002,0xe8000000:0x202,0xf8000000:0x800000,0x1:0x8000,0x10000001:0x2,0x20000001:0x808200,0x30000001:0x800000,0x40000001:0x808002,0x50000001:0x8200,0x60000001:0x200,0x70000001:0x800202,0x80000001:0x808202,0x90000001:0x808000,0xa0000001:0x800002,0xb0000001:0x8202,0xc0000001:0x202,0xd0000001:0x800200,0xe0000001:0x8002,0xf0000001:0x0,0x8000001:0x808202,0x18000001:0x808000,0x28000001:0x800000,0x38000001:0x200,0x48000001:0x8000,0x58000001:0x800002,0x68000001:0x2,0x78000001:0x8202,0x88000001:0x8002,0x98000001:0x800202,0xa8000001:0x202,0xb8000001:0x808200,0xc8000001:0x800200,0xd8000001:0x0,0xe8000001:0x8200,0xf8000001:0x808002},{0x0:0x40084010,0x1000000:0x4000,0x2000000:0x80000,0x3000000:0x40080010,0x4000000:0x40000010,0x5000000:0x40084000,0x6000000:0x40004000,0x7000000:0x10,0x8000000:0x84000,0x9000000:0x40004010,0xa000000:0x40000000,0xb000000:0x84010,0xc000000:0x80010,0xd000000:0x0,0xe000000:0x4010,0xf000000:0x40080000,0x800000:0x40004000,0x1800000:0x84010,0x2800000:0x10,0x3800000:0x40004010,0x4800000:0x40084010,0x5800000:0x40000000,0x6800000:0x80000,0x7800000:0x40080010,0x8800000:0x80010,0x9800000:0x0,0xa800000:0x4000,0xb800000:0x40080000,0xc800000:0x40000010,0xd800000:0x84000,0xe800000:0x40084000,0xf800000:0x4010,0x10000000:0x0,0x11000000:0x40080010,0x12000000:0x40004010,0x13000000:0x40084000,0x14000000:0x40080000,0x15000000:0x10,0x16000000:0x84010,0x17000000:0x4000,0x18000000:0x4010,0x19000000:0x80000,0x1a000000:0x80010,0x1b000000:0x40000010,0x1c000000:0x84000,0x1d000000:0x40004000,0x1e000000:0x40000000,0x1f000000:0x40084010,0x10800000:0x84010,0x11800000:0x80000,0x12800000:0x40080000,0x13800000:0x4000,0x14800000:0x40004000,0x15800000:0x40084010,0x16800000:0x10,0x17800000:0x40000000,0x18800000:0x40084000,0x19800000:0x40000010,0x1a800000:0x40004010,0x1b800000:0x80010,0x1c800000:0x0,0x1d800000:0x4010,0x1e800000:0x40080010,0x1f800000:0x84000},{0x0:0x104,0x100000:0x0,0x200000:0x4000100,0x300000:0x10104,0x400000:0x10004,0x500000:0x4000004,0x600000:0x4010104,0x700000:0x4010000,0x800000:0x4000000,0x900000:0x4010100,0xa00000:0x10100,0xb00000:0x4010004,0xc00000:0x4000104,0xd00000:0x10000,0xe00000:0x4,0xf00000:0x100,0x80000:0x4010100,0x180000:0x4010004,0x280000:0x0,0x380000:0x4000100,0x480000:0x4000004,0x580000:0x10000,0x680000:0x10004,0x780000:0x104,0x880000:0x4,0x980000:0x100,0xa80000:0x4010000,0xb80000:0x10104,0xc80000:0x10100,0xd80000:0x4000104,0xe80000:0x4010104,0xf80000:0x4000000,0x1000000:0x4010100,0x1100000:0x10004,0x1200000:0x10000,0x1300000:0x4000100,0x1400000:0x100,0x1500000:0x4010104,0x1600000:0x4000004,0x1700000:0x0,0x1800000:0x4000104,0x1900000:0x4000000,0x1a00000:0x4,0x1b00000:0x10100,0x1c00000:0x4010000,0x1d00000:0x104,0x1e00000:0x10104,0x1f00000:0x4010004,0x1080000:0x4000000,0x1180000:0x104,0x1280000:0x4010100,0x1380000:0x0,0x1480000:0x10004,0x1580000:0x4000100,0x1680000:0x100,0x1780000:0x4010004,0x1880000:0x10000,0x1980000:0x4010104,0x1a80000:0x10104,0x1b80000:0x4000004,0x1c80000:0x4000104,0x1d80000:0x4010000,0x1e80000:0x4,0x1f80000:0x10100},{0x0:0x80401000,0x10000:0x80001040,0x20000:0x401040,0x30000:0x80400000,0x40000:0x0,0x50000:0x401000,0x60000:0x80000040,0x70000:0x400040,0x80000:0x80000000,0x90000:0x400000,0xa0000:0x40,0xb0000:0x80001000,0xc0000:0x80400040,0xd0000:0x1040,0xe0000:0x1000,0xf0000:0x80401040,0x8000:0x80001040,0x18000:0x40,0x28000:0x80400040,0x38000:0x80001000,0x48000:0x401000,0x58000:0x80401040,0x68000:0x0,0x78000:0x80400000,0x88000:0x1000,0x98000:0x80401000,0xa8000:0x400000,0xb8000:0x1040,0xc8000:0x80000000,0xd8000:0x400040,0xe8000:0x401040,0xf8000:0x80000040,0x100000:0x400040,0x110000:0x401000,0x120000:0x80000040,0x130000:0x0,0x140000:0x1040,0x150000:0x80400040,0x160000:0x80401000,0x170000:0x80001040,0x180000:0x80401040,0x190000:0x80000000,0x1a0000:0x80400000,0x1b0000:0x401040,0x1c0000:0x80001000,0x1d0000:0x400000,0x1e0000:0x40,0x1f0000:0x1000,0x108000:0x80400000,0x118000:0x80401040,0x128000:0x0,0x138000:0x401000,0x148000:0x400040,0x158000:0x80000000,0x168000:0x80001040,0x178000:0x40,0x188000:0x80000040,0x198000:0x1000,0x1a8000:0x80001000,0x1b8000:0x80400040,0x1c8000:0x1040,0x1d8000:0x80401000,0x1e8000:0x400000,0x1f8000:0x401040},{0x0:0x80,0x1000:0x1040000,0x2000:0x40000,0x3000:0x20000000,0x4000:0x20040080,0x5000:0x1000080,0x6000:0x21000080,0x7000:0x40080,0x8000:0x1000000,0x9000:0x20040000,0xa000:0x20000080,0xb000:0x21040080,0xc000:0x21040000,0xd000:0x0,0xe000:0x1040080,0xf000:0x21000000,0x800:0x1040080,0x1800:0x21000080,0x2800:0x80,0x3800:0x1040000,0x4800:0x40000,0x5800:0x20040080,0x6800:0x21040000,0x7800:0x20000000,0x8800:0x20040000,0x9800:0x0,0xa800:0x21040080,0xb800:0x1000080,0xc800:0x20000080,0xd800:0x21000000,0xe800:0x1000000,0xf800:0x40080,0x10000:0x40000,0x11000:0x80,0x12000:0x20000000,0x13000:0x21000080,0x14000:0x1000080,0x15000:0x21040000,0x16000:0x20040080,0x17000:0x1000000,0x18000:0x21040080,0x19000:0x21000000,0x1a000:0x1040000,0x1b000:0x20040000,0x1c000:0x40080,0x1d000:0x20000080,0x1e000:0x0,0x1f000:0x1040080,0x10800:0x21000080,0x11800:0x1000000,0x12800:0x1040000,0x13800:0x20040080,0x14800:0x20000000,0x15800:0x1040080,0x16800:0x80,0x17800:0x21040000,0x18800:0x40080,0x19800:0x21040080,0x1a800:0x0,0x1b800:0x21000000,0x1c800:0x1000080,0x1d800:0x40000,0x1e800:0x20040000,0x1f800:0x20000080},{0x0:0x10000008,0x100:0x2000,0x200:0x10200000,0x300:0x10202008,0x400:0x10002000,0x500:0x200000,0x600:0x200008,0x700:0x10000000,0x800:0x0,0x900:0x10002008,0xa00:0x202000,0xb00:0x8,0xc00:0x10200008,0xd00:0x202008,0xe00:0x2008,0xf00:0x10202000,0x80:0x10200000,0x180:0x10202008,0x280:0x8,0x380:0x200000,0x480:0x202008,0x580:0x10000008,0x680:0x10002000,0x780:0x2008,0x880:0x200008,0x980:0x2000,0xa80:0x10002008,0xb80:0x10200008,0xc80:0x0,0xd80:0x10202000,0xe80:0x202000,0xf80:0x10000000,0x1000:0x10002000,0x1100:0x10200008,0x1200:0x10202008,0x1300:0x2008,0x1400:0x200000,0x1500:0x10000000,0x1600:0x10000008,0x1700:0x202000,0x1800:0x202008,0x1900:0x0,0x1a00:0x8,0x1b00:0x10200000,0x1c00:0x2000,0x1d00:0x10002008,0x1e00:0x10202000,0x1f00:0x200008,0x1080:0x8,0x1180:0x202000,0x1280:0x200000,0x1380:0x10000008,0x1480:0x10002000,0x1580:0x2008,0x1680:0x10202008,0x1780:0x10200000,0x1880:0x10202000,0x1980:0x10200008,0x1a80:0x2000,0x1b80:0x202008,0x1c80:0x200008,0x1d80:0x0,0x1e80:0x10000000,0x1f80:0x10002008},{0x0:0x100000,0x10:0x2000401,0x20:0x400,0x30:0x100401,0x40:0x2100401,0x50:0x0,0x60:0x1,0x70:0x2100001,0x80:0x2000400,0x90:0x100001,0xa0:0x2000001,0xb0:0x2100400,0xc0:0x2100000,0xd0:0x401,0xe0:0x100400,0xf0:0x2000000,0x8:0x2100001,0x18:0x0,0x28:0x2000401,0x38:0x2100400,0x48:0x100000,0x58:0x2000001,0x68:0x2000000,0x78:0x401,0x88:0x100401,0x98:0x2000400,0xa8:0x2100000,0xb8:0x100001,0xc8:0x400,0xd8:0x2100401,0xe8:0x1,0xf8:0x100400,0x100:0x2000000,0x110:0x100000,0x120:0x2000401,0x130:0x2100001,0x140:0x100001,0x150:0x2000400,0x160:0x2100400,0x170:0x100401,0x180:0x401,0x190:0x2100401,0x1a0:0x100400,0x1b0:0x1,0x1c0:0x0,0x1d0:0x2100000,0x1e0:0x2000001,0x1f0:0x400,0x108:0x100400,0x118:0x2000401,0x128:0x2100001,0x138:0x1,0x148:0x2000000,0x158:0x100000,0x168:0x401,0x178:0x2100400,0x188:0x2000001,0x198:0x2100000,0x1a8:0x0,0x1b8:0x2100401,0x1c8:0x100401,0x1d8:0x400,0x1e8:0x2000400,0x1f8:0x100001},{0x0:0x8000820,0x1:0x20000,0x2:0x8000000,0x3:0x20,0x4:0x20020,0x5:0x8020820,0x6:0x8020800,0x7:0x800,0x8:0x8020000,0x9:0x8000800,0xa:0x20800,0xb:0x8020020,0xc:0x820,0xd:0x0,0xe:0x8000020,0xf:0x20820,0x80000000:0x800,0x80000001:0x8020820,0x80000002:0x8000820,0x80000003:0x8000000,0x80000004:0x8020000,0x80000005:0x20800,0x80000006:0x20820,0x80000007:0x20,0x80000008:0x8000020,0x80000009:0x820,0x8000000a:0x20020,0x8000000b:0x8020800,0x8000000c:0x0,0x8000000d:0x8020020,0x8000000e:0x8000800,0x8000000f:0x20000,0x10:0x20820,0x11:0x8020800,0x12:0x20,0x13:0x800,0x14:0x8000800,0x15:0x8000020,0x16:0x8020020,0x17:0x20000,0x18:0x0,0x19:0x20020,0x1a:0x8020000,0x1b:0x8000820,0x1c:0x8020820,0x1d:0x20800,0x1e:0x820,0x1f:0x8000000,0x80000010:0x20000,0x80000011:0x800,0x80000012:0x8020020,0x80000013:0x20820,0x80000014:0x20,0x80000015:0x8020000,0x80000016:0x8000000,0x80000017:0x8000820,0x80000018:0x8020820,0x80000019:0x8000020,0x8000001a:0x8000800,0x8000001b:0x0,0x8000001c:0x20800,0x8000001d:0x820,0x8000001e:0x20020,0x8000001f:0x8020800}];var SBOX_MASK=[0xf8000001,0x1f800000,0x01f80000,0x001f8000,0x0001f800,0x00001f80,0x000001f8,0x8000001f];var DES=C_algo.DES=BlockCipher.extend({_doReset:function _doReset(){var key=this._key;var keyWords=key.words;var keyBits=[];for(var i=0;i<56;i++){var keyBitPos=PC1[i]-1;keyBits[i]=keyWords[keyBitPos>>>5]>>>31-keyBitPos%32&1;}var subKeys=this._subKeys=[];for(var nSubKey=0;nSubKey<16;nSubKey++){var subKey=subKeys[nSubKey]=[];var bitShift=BIT_SHIFTS[nSubKey];for(var i=0;i<24;i++){subKey[i/6|0]|=keyBits[(PC2[i]-1+bitShift)%28]<<31-i%6;subKey[4+(i/6|0)]|=keyBits[28+(PC2[i+24]-1+bitShift)%28]<<31-i%6;}subKey[0]=subKey[0]<<1|subKey[0]>>>31;for(var i=1;i<7;i++){subKey[i]=subKey[i]>>>(i-1)*4+3;}subKey[7]=subKey[7]<<5|subKey[7]>>>27;}var invSubKeys=this._invSubKeys=[];for(var i=0;i<16;i++){invSubKeys[i]=subKeys[15-i];}},encryptBlock:function encryptBlock(M,offset){this._doCryptBlock(M,offset,this._subKeys);},decryptBlock:function decryptBlock(M,offset){this._doCryptBlock(M,offset,this._invSubKeys);},_doCryptBlock:function _doCryptBlock(M,offset,subKeys){this._lBlock=M[offset];this._rBlock=M[offset+1];exchangeLR.call(this,4,0x0f0f0f0f);exchangeLR.call(this,16,0x0000ffff);exchangeRL.call(this,2,0x33333333);exchangeRL.call(this,8,0x00ff00ff);exchangeLR.call(this,1,0x55555555);for(var round=0;round<16;round++){var subKey=subKeys[round];var lBlock=this._lBlock;var rBlock=this._rBlock;var f=0;for(var i=0;i<8;i++){f|=SBOX_P[i][((rBlock^subKey[i])&SBOX_MASK[i])>>>0];}this._lBlock=rBlock;this._rBlock=lBlock^f;}var t=this._lBlock;this._lBlock=this._rBlock;this._rBlock=t;exchangeLR.call(this,1,0x55555555);exchangeRL.call(this,8,0x00ff00ff);exchangeRL.call(this,2,0x33333333);exchangeLR.call(this,16,0x0000ffff);exchangeLR.call(this,4,0x0f0f0f0f);M[offset]=this._lBlock;M[offset+1]=this._rBlock;},keySize:64/32,ivSize:64/32,blockSize:64/32});function exchangeLR(offset,mask){var t=(this._lBlock>>>offset^this._rBlock)&mask;this._rBlock^=t;this._lBlock^=t<<offset;}function exchangeRL(offset,mask){var t=(this._rBlock>>>offset^this._lBlock)&mask;this._lBlock^=t;this._rBlock^=t<<offset;}C.DES=BlockCipher._createHelper(DES);var TripleDES=C_algo.TripleDES=BlockCipher.extend({_doReset:function _doReset(){var key=this._key;var keyWords=key.words;this._des1=DES.createEncryptor(WordArray.create(keyWords.slice(0,2)));this._des2=DES.createEncryptor(WordArray.create(keyWords.slice(2,4)));this._des3=DES.createEncryptor(WordArray.create(keyWords.slice(4,6)));},encryptBlock:function encryptBlock(M,offset){this._des1.encryptBlock(M,offset);this._des2.decryptBlock(M,offset);this._des3.encryptBlock(M,offset);},decryptBlock:function decryptBlock(M,offset){this._des3.decryptBlock(M,offset);this._des2.encryptBlock(M,offset);this._des1.decryptBlock(M,offset);},keySize:192/32,ivSize:64/32,blockSize:64/32});C.TripleDES=BlockCipher._createHelper(TripleDES);})();return CryptoJS.TripleDES;});

},{"./cipher-core":179,"./core":180,"./enc-base64":181,"./evpkdf":183,"./md5":188,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],187:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"));}else if(typeof define==="function"&&define.amd){define(["./core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){if(typeof ArrayBuffer!='function'){return;}var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var superInit=WordArray.init;var subInit=WordArray.init=function(typedArray){if(typedArray instanceof ArrayBuffer){typedArray=new Uint8Array(typedArray);}if(typedArray instanceof Int8Array||typeof Uint8ClampedArray!=="undefined"&&typedArray instanceof Uint8ClampedArray||typedArray instanceof Int16Array||typedArray instanceof Uint16Array||typedArray instanceof Int32Array||typedArray instanceof Uint32Array||typedArray instanceof Float32Array||typedArray instanceof Float64Array){typedArray=new Uint8Array(typedArray.buffer,typedArray.byteOffset,typedArray.byteLength);}if(typedArray instanceof Uint8Array){var typedArrayByteLength=typedArray.byteLength;var words=[];for(var i=0;i<typedArrayByteLength;i++){words[i>>>2]|=typedArray[i]<<24-i%4*8;}superInit.call(this,words,typedArrayByteLength);}else{superInit.apply(this,arguments);}};subInit.prototype=WordArray;})();return CryptoJS.lib.WordArray;});

},{"./core":180,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],202:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var RC4=C_algo.RC4=StreamCipher.extend({_doReset:function _doReset(){var key=this._key;var keyWords=key.words;var keySigBytes=key.sigBytes;var S=this._S=[];for(var i=0;i<256;i++){S[i]=i;}for(var i=0,j=0;i<256;i++){var keyByteIndex=i%keySigBytes;var keyByte=keyWords[keyByteIndex>>>2]>>>24-keyByteIndex%4*8&0xff;j=(j+S[i]+keyByte)%256;var t=S[i];S[i]=S[j];S[j]=t;}this._i=this._j=0;},_doProcessBlock:function _doProcessBlock(M,offset){M[offset]^=generateKeystreamWord.call(this);},keySize:256/32,ivSize:0});function generateKeystreamWord(){var S=this._S;var i=this._i;var j=this._j;var keystreamWord=0;for(var n=0;n<4;n++){i=(i+1)%256;j=(j+S[i])%256;var t=S[i];S[i]=S[j];S[j]=t;keystreamWord|=S[(S[i]+S[j])%256]<<24-n*8;}this._i=i;this._j=j;return keystreamWord;}C.RC4=StreamCipher._createHelper(RC4);var RC4Drop=C_algo.RC4Drop=RC4.extend({cfg:RC4.cfg.extend({drop:192}),_doReset:function _doReset(){RC4._doReset.call(this);for(var i=this.cfg.drop;i>0;i--){generateKeystreamWord.call(this);}}});C.RC4Drop=StreamCipher._createHelper(RC4Drop);})();return CryptoJS.RC4;});

},{"./cipher-core":179,"./core":180,"./enc-base64":181,"./evpkdf":183,"./md5":188,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],201:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var S=[];var C_=[];var G=[];var Rabbit=C_algo.Rabbit=StreamCipher.extend({_doReset:function _doReset(){var K=this._key.words;var iv=this.cfg.iv;for(var i=0;i<4;i++){K[i]=(K[i]<<8|K[i]>>>24)&0x00ff00ff|(K[i]<<24|K[i]>>>8)&0xff00ff00;}var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16];var C=this._C=[K[2]<<16|K[2]>>>16,K[0]&0xffff0000|K[1]&0x0000ffff,K[3]<<16|K[3]>>>16,K[1]&0xffff0000|K[2]&0x0000ffff,K[0]<<16|K[0]>>>16,K[2]&0xffff0000|K[3]&0x0000ffff,K[1]<<16|K[1]>>>16,K[3]&0xffff0000|K[0]&0x0000ffff];this._b=0;for(var i=0;i<4;i++){nextState.call(this);}for(var i=0;i<8;i++){C[i]^=X[i+4&7];}if(iv){var IV=iv.words;var IV_0=IV[0];var IV_1=IV[1];var i0=(IV_0<<8|IV_0>>>24)&0x00ff00ff|(IV_0<<24|IV_0>>>8)&0xff00ff00;var i2=(IV_1<<8|IV_1>>>24)&0x00ff00ff|(IV_1<<24|IV_1>>>8)&0xff00ff00;var i1=i0>>>16|i2&0xffff0000;var i3=i2<<16|i0&0x0000ffff;C[0]^=i0;C[1]^=i1;C[2]^=i2;C[3]^=i3;C[4]^=i0;C[5]^=i1;C[6]^=i2;C[7]^=i3;for(var i=0;i<4;i++){nextState.call(this);}}},_doProcessBlock:function _doProcessBlock(M,offset){var X=this._X;nextState.call(this);S[0]=X[0]^X[5]>>>16^X[3]<<16;S[1]=X[2]^X[7]>>>16^X[5]<<16;S[2]=X[4]^X[1]>>>16^X[7]<<16;S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++){S[i]=(S[i]<<8|S[i]>>>24)&0x00ff00ff|(S[i]<<24|S[i]>>>8)&0xff00ff00;M[offset+i]^=S[i];}},blockSize:128/32,ivSize:64/32});function nextState(){var X=this._X;var C=this._C;for(var i=0;i<8;i++){C_[i]=C[i];}C[0]=C[0]+0x4d34d34d+this._b|0;C[1]=C[1]+0xd34d34d3+(C[0]>>>0<C_[0]>>>0?1:0)|0;C[2]=C[2]+0x34d34d34+(C[1]>>>0<C_[1]>>>0?1:0)|0;C[3]=C[3]+0x4d34d34d+(C[2]>>>0<C_[2]>>>0?1:0)|0;C[4]=C[4]+0xd34d34d3+(C[3]>>>0<C_[3]>>>0?1:0)|0;C[5]=C[5]+0x34d34d34+(C[4]>>>0<C_[4]>>>0?1:0)|0;C[6]=C[6]+0x4d34d34d+(C[5]>>>0<C_[5]>>>0?1:0)|0;C[7]=C[7]+0xd34d34d3+(C[6]>>>0<C_[6]>>>0?1:0)|0;this._b=C[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C[i];var ga=gx&0xffff;var gb=gx>>>16;var gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb;var gl=((gx&0xffff0000)*gx|0)+((gx&0x0000ffff)*gx|0);G[i]=gh^gl;}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0;X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0;X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0;X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0;X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0;X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0;X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0;X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0;}C.Rabbit=StreamCipher._createHelper(Rabbit);})();return CryptoJS.Rabbit;});

},{"./cipher-core":179,"./core":180,"./enc-base64":181,"./evpkdf":183,"./md5":188,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],200:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root,factory,undef){if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"));}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory);}else{factory(root.CryptoJS);}})(void 0,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var S=[];var C_=[];var G=[];var RabbitLegacy=C_algo.RabbitLegacy=StreamCipher.extend({_doReset:function _doReset(){var K=this._key.words;var iv=this.cfg.iv;var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16];var C=this._C=[K[2]<<16|K[2]>>>16,K[0]&0xffff0000|K[1]&0x0000ffff,K[3]<<16|K[3]>>>16,K[1]&0xffff0000|K[2]&0x0000ffff,K[0]<<16|K[0]>>>16,K[2]&0xffff0000|K[3]&0x0000ffff,K[1]<<16|K[1]>>>16,K[3]&0xffff0000|K[0]&0x0000ffff];this._b=0;for(var i=0;i<4;i++){nextState.call(this);}for(var i=0;i<8;i++){C[i]^=X[i+4&7];}if(iv){var IV=iv.words;var IV_0=IV[0];var IV_1=IV[1];var i0=(IV_0<<8|IV_0>>>24)&0x00ff00ff|(IV_0<<24|IV_0>>>8)&0xff00ff00;var i2=(IV_1<<8|IV_1>>>24)&0x00ff00ff|(IV_1<<24|IV_1>>>8)&0xff00ff00;var i1=i0>>>16|i2&0xffff0000;var i3=i2<<16|i0&0x0000ffff;C[0]^=i0;C[1]^=i1;C[2]^=i2;C[3]^=i3;C[4]^=i0;C[5]^=i1;C[6]^=i2;C[7]^=i3;for(var i=0;i<4;i++){nextState.call(this);}}},_doProcessBlock:function _doProcessBlock(M,offset){var X=this._X;nextState.call(this);S[0]=X[0]^X[5]>>>16^X[3]<<16;S[1]=X[2]^X[7]>>>16^X[5]<<16;S[2]=X[4]^X[1]>>>16^X[7]<<16;S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++){S[i]=(S[i]<<8|S[i]>>>24)&0x00ff00ff|(S[i]<<24|S[i]>>>8)&0xff00ff00;M[offset+i]^=S[i];}},blockSize:128/32,ivSize:64/32});function nextState(){var X=this._X;var C=this._C;for(var i=0;i<8;i++){C_[i]=C[i];}C[0]=C[0]+0x4d34d34d+this._b|0;C[1]=C[1]+0xd34d34d3+(C[0]>>>0<C_[0]>>>0?1:0)|0;C[2]=C[2]+0x34d34d34+(C[1]>>>0<C_[1]>>>0?1:0)|0;C[3]=C[3]+0x4d34d34d+(C[2]>>>0<C_[2]>>>0?1:0)|0;C[4]=C[4]+0xd34d34d3+(C[3]>>>0<C_[3]>>>0?1:0)|0;C[5]=C[5]+0x34d34d34+(C[4]>>>0<C_[4]>>>0?1:0)|0;C[6]=C[6]+0x4d34d34d+(C[5]>>>0<C_[5]>>>0?1:0)|0;C[7]=C[7]+0xd34d34d3+(C[6]>>>0<C_[6]>>>0?1:0)|0;this._b=C[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C[i];var ga=gx&0xffff;var gb=gx>>>16;var gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb;var gl=((gx&0xffff0000)*gx|0)+((gx&0x0000ffff)*gx|0);G[i]=gh^gl;}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0;X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0;X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0;X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0;X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0;X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0;X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0;X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0;}C.RabbitLegacy=StreamCipher._createHelper(RabbitLegacy);})();return CryptoJS.RabbitLegacy;});

},{"./cipher-core":179,"./core":180,"./enc-base64":181,"./evpkdf":183,"./md5":188,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],217:[function(require,module,exports){
'use strict';exports.readUInt32BE=function readUInt32BE(bytes,off){var res=bytes[0+off]<<24|bytes[1+off]<<16|bytes[2+off]<<8|bytes[3+off];return res>>>0;};exports.writeUInt32BE=function writeUInt32BE(bytes,value,off){bytes[0+off]=value>>>24;bytes[1+off]=value>>>16&0xff;bytes[2+off]=value>>>8&0xff;bytes[3+off]=value&0xff;};exports.ip=function ip(inL,inR,out,off){var outL=0;var outR=0;for(var i=6;i>=0;i-=2){for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>>j+i&1;}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inL>>>j+i&1;}}for(var i=6;i>=0;i-=2){for(var j=1;j<=25;j+=8){outR<<=1;outR|=inR>>>j+i&1;}for(var j=1;j<=25;j+=8){outR<<=1;outR|=inL>>>j+i&1;}}out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.rip=function rip(inL,inR,out,off){var outL=0;var outR=0;for(var i=0;i<4;i++){for(var j=24;j>=0;j-=8){outL<<=1;outL|=inR>>>j+i&1;outL<<=1;outL|=inL>>>j+i&1;}}for(var i=4;i<8;i++){for(var j=24;j>=0;j-=8){outR<<=1;outR|=inR>>>j+i&1;outR<<=1;outR|=inL>>>j+i&1;}}out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.pc1=function pc1(inL,inR,out,off){var outL=0;var outR=0;for(var i=7;i>=5;i--){for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>j+i&1;}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inL>>j+i&1;}}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>j+i&1;}for(var i=1;i<=3;i++){for(var j=0;j<=24;j+=8){outR<<=1;outR|=inR>>j+i&1;}for(var j=0;j<=24;j+=8){outR<<=1;outR|=inL>>j+i&1;}}for(var j=0;j<=24;j+=8){outR<<=1;outR|=inL>>j+i&1;}out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.r28shl=function r28shl(num,shift){return num<<shift&0xfffffff|num>>>28-shift;};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function pc2(inL,inR,out,off){var outL=0;var outR=0;var len=pc2table.length>>>1;for(var i=0;i<len;i++){outL<<=1;outL|=inL>>>pc2table[i]&0x1;}for(var i=len;i<pc2table.length;i++){outR<<=1;outR|=inR>>>pc2table[i]&0x1;}out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.expand=function expand(r,out,off){var outL=0;var outR=0;outL=(r&1)<<5|r>>>27;for(var i=23;i>=15;i-=4){outL<<=6;outL|=r>>>i&0x3f;}for(var i=11;i>=3;i-=4){outR|=r>>>i&0x3f;outR<<=6;}outR|=(r&0x1f)<<1|r>>>31;out[off+0]=outL>>>0;out[off+1]=outR>>>0;};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function substitute(inL,inR){var out=0;for(var i=0;i<4;i++){var b=inL>>>18-i*6&0x3f;var sb=sTable[i*0x40+b];out<<=4;out|=sb;}for(var i=0;i<4;i++){var b=inR>>>18-i*6&0x3f;var sb=sTable[4*0x40+i*0x40+b];out<<=4;out|=sb;}return out>>>0;};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function permute(num){var out=0;for(var i=0;i<permuteTable.length;i++){out<<=1;out|=num>>>permuteTable[i]&0x1;}return out>>>0;};exports.padSplit=function padSplit(num,size,group){var str=num.toString(2);while(str.length<size){str='0'+str;}var out=[];for(var i=0;i<size;i+=group){out.push(str.slice(i,i+group));}return out.join(' ');};

},{}],214:[function(require,module,exports){
'use strict';var assert=require('minimalistic-assert');function Cipher(options){this.options=options;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0;}module.exports=Cipher;Cipher.prototype._init=function _init(){};Cipher.prototype.update=function update(data){if(data.length===0)return[];if(this.type==='decrypt')return this._updateDecrypt(data);else return this._updateEncrypt(data);};Cipher.prototype._buffer=function _buffer(data,off){var min=Math.min(this.buffer.length-this.bufferOff,data.length-off);for(var i=0;i<min;i++){this.buffer[this.bufferOff+i]=data[off+i];}this.bufferOff+=min;return min;};Cipher.prototype._flushBuffer=function _flushBuffer(out,off){this._update(this.buffer,0,out,off);this.bufferOff=0;return this.blockSize;};Cipher.prototype._updateEncrypt=function _updateEncrypt(data){var inputOff=0;var outputOff=0;var count=(this.bufferOff+data.length)/this.blockSize|0;var out=new Array(count*this.blockSize);if(this.bufferOff!==0){inputOff+=this._buffer(data,inputOff);if(this.bufferOff===this.buffer.length)outputOff+=this._flushBuffer(out,outputOff);}var max=data.length-(data.length-inputOff)%this.blockSize;for(;inputOff<max;inputOff+=this.blockSize){this._update(data,inputOff,out,outputOff);outputOff+=this.blockSize;}for(;inputOff<data.length;inputOff++,this.bufferOff++){this.buffer[this.bufferOff]=data[inputOff];}return out;};Cipher.prototype._updateDecrypt=function _updateDecrypt(data){var inputOff=0;var outputOff=0;var count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1;var out=new Array(count*this.blockSize);for(;count>0;count--){inputOff+=this._buffer(data,inputOff);outputOff+=this._flushBuffer(out,outputOff);}inputOff+=this._buffer(data,inputOff);return out;};Cipher.prototype["final"]=function _final(buffer){var first;if(buffer)first=this.update(buffer);var last;if(this.type==='encrypt')last=this._finalEncrypt();else last=this._finalDecrypt();if(first)return first.concat(last);else return last;};Cipher.prototype._pad=function _pad(buffer,off){if(off===0)return false;while(off<buffer.length){buffer[off++]=0;}return true;};Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=new Array(this.blockSize);this._update(this.buffer,0,out,0);return out;};Cipher.prototype._unpad=function _unpad(buffer){return buffer;};Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,'Not enough data to decrypt');var out=new Array(this.blockSize);this._flushBuffer(out,0);return this._unpad(out);};

},{"minimalistic-assert":480}],215:[function(require,module,exports){
'use strict';var assert=require('minimalistic-assert');var inherits=require('inherits');var utils=require('./utils');var Cipher=require('./cipher');function DESState(){this.tmp=new Array(2);this.keys=null;}function DES(options){Cipher.call(this,options);var state=new DESState();this._desState=state;this.deriveKeys(state,options.key);}inherits(DES,Cipher);module.exports=DES;DES.create=function create(options){return new DES(options);};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(state,key){state.keys=new Array(16*2);assert.equal(key.length,this.blockSize,'Invalid key length');var kL=utils.readUInt32BE(key,0);var kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0);kL=state.tmp[0];kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift);kR=utils.r28shl(kR,shift);utils.pc2(kL,kR,state.keys,i);}};DES.prototype._update=function _update(inp,inOff,out,outOff){var state=this._desState;var l=utils.readUInt32BE(inp,inOff);var r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];if(this.type==='encrypt')this._encrypt(state,l,r,state.tmp,0);else this._decrypt(state,l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];utils.writeUInt32BE(out,l,outOff);utils.writeUInt32BE(out,r,outOff+4);};DES.prototype._pad=function _pad(buffer,off){var value=buffer.length-off;for(var i=off;i<buffer.length;i++){buffer[i]=value;}return true;};DES.prototype._unpad=function _unpad(buffer){var pad=buffer[buffer.length-1];for(var i=buffer.length-pad;i<buffer.length;i++){assert.equal(buffer[i],pad);}return buffer.slice(0,buffer.length-pad);};DES.prototype._encrypt=function _encrypt(state,lStart,rStart,out,off){var l=lStart;var r=rStart;for(var i=0;i<state.keys.length;i+=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(r,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=r;r=(l^f)>>>0;l=t;}utils.rip(r,l,out,off);};DES.prototype._decrypt=function _decrypt(state,lStart,rStart,out,off){var l=rStart;var r=lStart;for(var i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(l,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=l;l=(r^f)>>>0;r=t;}utils.rip(l,r,out,off);};

},{"./cipher":214,"./utils":217,"inherits":307,"minimalistic-assert":480}],213:[function(require,module,exports){
'use strict';var assert=require('minimalistic-assert');var inherits=require('inherits');var proto={};function CBCState(iv){assert.equal(iv.length,8,'Invalid IV length');this.iv=new Array(8);for(var i=0;i<this.iv.length;i++){this.iv[i]=iv[i];}}function instantiate(Base){function CBC(options){Base.call(this,options);this._cbcInit();}inherits(CBC,Base);var keys=Object.keys(proto);for(var i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key];}CBC.create=function create(options){return new CBC(options);};return CBC;}exports.instantiate=instantiate;proto._cbcInit=function _cbcInit(){var state=new CBCState(this.options.iv);this._cbcState=state;};proto._update=function _update(inp,inOff,out,outOff){var state=this._cbcState;var superProto=this.constructor.super_.prototype;var iv=state.iv;if(this.type==='encrypt'){for(var i=0;i<this.blockSize;i++){iv[i]^=inp[inOff+i];}superProto._update.call(this,iv,0,out,outOff);for(var i=0;i<this.blockSize;i++){iv[i]=out[outOff+i];}}else{superProto._update.call(this,inp,inOff,out,outOff);for(var i=0;i<this.blockSize;i++){out[outOff+i]^=iv[i];}for(var i=0;i<this.blockSize;i++){iv[i]=inp[inOff+i];}}};

},{"inherits":307,"minimalistic-assert":480}],216:[function(require,module,exports){
'use strict';var assert=require('minimalistic-assert');var inherits=require('inherits');var Cipher=require('./cipher');var DES=require('./des');function EDEState(type,key){assert.equal(key.length,24,'Invalid key length');var k1=key.slice(0,8);var k2=key.slice(8,16);var k3=key.slice(16,24);if(type==='encrypt'){this.ciphers=[DES.create({type:'encrypt',key:k1}),DES.create({type:'decrypt',key:k2}),DES.create({type:'encrypt',key:k3})];}else{this.ciphers=[DES.create({type:'decrypt',key:k3}),DES.create({type:'encrypt',key:k2}),DES.create({type:'decrypt',key:k1})];}}function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state;}inherits(EDE,Cipher);module.exports=EDE;EDE.create=function create(options){return new EDE(options);};EDE.prototype._update=function _update(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff);state.ciphers[1]._update(out,outOff,out,outOff);state.ciphers[2]._update(out,outOff,out,outOff);};EDE.prototype._pad=DES.prototype._pad;EDE.prototype._unpad=DES.prototype._unpad;

},{"./cipher":214,"./des":215,"inherits":307,"minimalistic-assert":480}],221:[function(require,module,exports){
module.exports={
    "modp1": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"
    },
    "modp2": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"
    },
    "modp5": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"
    },
    "modp14": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"
    },
    "modp15": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"
    },
    "modp16": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"
    },
    "modp17": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"
    },
    "modp18": {
        "gen": "02",
        "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"
    }
}
},{}],220:[function(require,module,exports){
var randomBytes=require('randombytes');module.exports=findPrime;findPrime.simpleSieve=simpleSieve;findPrime.fermatTest=fermatTest;var BN=require('bn.js');var TWENTYFOUR=new BN(24);var MillerRabin=require('miller-rabin');var millerRabin=new MillerRabin();var ONE=new BN(1);var TWO=new BN(2);var FIVE=new BN(5);var SIXTEEN=new BN(16);var EIGHT=new BN(8);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var ELEVEN=new BN(11);var FOUR=new BN(4);var TWELVE=new BN(12);var primes=null;function _getPrimes(){if(primes!==null)return primes;var limit=0x100000;var res=[];res[0]=2;for(var i=1,k=3;k<limit;k+=2){var sqrt=Math.ceil(Math.sqrt(k));for(var j=0;j<i&&res[j]<=sqrt;j++){if(k%res[j]===0)break;}if(i!==j&&res[j]<=sqrt)continue;res[i++]=k;}primes=res;return res;}function simpleSieve(p){var primes=_getPrimes();for(var i=0;i<primes.length;i++){if(p.modn(primes[i])===0){if(p.cmpn(primes[i])===0){return true;}else{return false;}}}return true;}function fermatTest(p){var red=BN.mont(p);return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)===0;}function findPrime(bits,gen){if(bits<16){if(gen===2||gen===5){return new BN([0x8c,0x7b]);}else{return new BN([0x8c,0x27]);}}gen=new BN(gen);var num,n2;while(true){num=new BN(randomBytes(Math.ceil(bits/8)));while(num.bitLength()>bits){num.ishrn(1);}if(num.isEven()){num.iadd(ONE);}if(!num.testn(1)){num.iadd(TWO);}if(!gen.cmp(TWO)){while(num.mod(TWENTYFOUR).cmp(ELEVEN)){num.iadd(FOUR);}}else if(!gen.cmp(FIVE)){while(num.mod(TEN).cmp(THREE)){num.iadd(FOUR);}}n2=num.shrn(1);if(simpleSieve(n2)&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num)){return num;}}}

},{"bn.js":132,"miller-rabin":479,"randombytes":532}],219:[function(require,module,exports){
(function (Buffer){
var BN=require('bn.js');var MillerRabin=require('miller-rabin');var millerRabin=new MillerRabin();var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=require('./generatePrime');var randomBytes=require('randombytes');module.exports=DH;function setPublicKey(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}this._pub=new BN(pub);return this;}function setPrivateKey(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}this._priv=new BN(priv);return this;}var primeCache={};function checkPrime(prime,generator){var gen=generator.toString('hex');var hex=[gen,prime.toString(16)].join('_');if(hex in primeCache){return primeCache[hex];}var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime)){error+=1;if(gen==='02'||gen==='05'){error+=8;}else{error+=4;}primeCache[hex]=error;return error;}if(!millerRabin.test(prime.shrn(1))){error+=2;}var rem;switch(gen){case'02':if(prime.mod(TWENTYFOUR).cmp(ELEVEN)){error+=8;}break;case'05':rem=prime.mod(TEN);if(rem.cmp(THREE)&&rem.cmp(SEVEN)){error+=8;}break;default:error+=4;}primeCache[hex]=error;return error;}function DH(prime,generator,malleable){this.setGenerator(generator);this.__prime=new BN(prime);this._prime=BN.mont(this.__prime);this._primeLen=prime.length;this._pub=undefined;this._priv=undefined;this._primeCode=undefined;if(malleable){this.setPublicKey=setPublicKey;this.setPrivateKey=setPrivateKey;}else{this._primeCode=8;}}Object.defineProperty(DH.prototype,'verifyError',{enumerable:true,get:function get(){if(typeof this._primeCode!=='number'){this._primeCode=checkPrime(this.__prime,this.__gen);}return this._primeCode;}});DH.prototype.generateKeys=function(){if(!this._priv){this._priv=new BN(randomBytes(this._primeLen));}this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed();return this.getPublicKey();};DH.prototype.computeSecret=function(other){other=new BN(other);other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0);out=Buffer.concat([front,out]);}return out;};DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc);};DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc);};DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc);};DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc);};DH.prototype.setGenerator=function(gen,enc){enc=enc||'utf8';if(!Buffer.isBuffer(gen)){gen=new Buffer(gen,enc);}this.__gen=gen;this._gen=new BN(gen);return this;};function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());if(!enc){return buf;}else{return buf.toString(enc);}}

}).call(this,require("buffer").Buffer)

},{"./generatePrime":220,"bn.js":132,"buffer":1133,"miller-rabin":479,"randombytes":532}],479:[function(require,module,exports){
var bn=require('bn.js');var brorand=require('brorand');function MillerRabin(rand){this.rand=rand||new brorand.Rand();}module.exports=MillerRabin;MillerRabin.create=function create(rand){return new MillerRabin(rand);};MillerRabin.prototype._randbelow=function _randbelow(n){var len=n.bitLength();var min_bytes=Math.ceil(len/8);do{var a=new bn(this.rand.generate(min_bytes));}while(a.cmp(n)>=0);return a;};MillerRabin.prototype._randrange=function _randrange(start,stop){var size=stop.sub(start);return start.add(this._randbelow(size));};MillerRabin.prototype.test=function test(n,k,cb){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)k=Math.max(1,len/48|0);var n1=n.subn(1);for(var s=0;!n1.testn(s);s++){}var d=n.shrn(s);var rn1=n1.toRed(red);var prime=true;for(;k>0;k--){var a=this._randrange(new bn(2),n1);if(cb)cb(a);var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)return false;if(x.cmp(rn1)===0)break;}if(i===s)return false;}return prime;};MillerRabin.prototype.getDivisor=function getDivisor(n,k){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)k=Math.max(1,len/48|0);var n1=n.subn(1);for(var s=0;!n1.testn(s);s++){}var d=n.shrn(s);var rn1=n1.toRed(red);for(;k>0;k--){var a=this._randrange(new bn(2),n1);var g=n.gcd(a);if(g.cmpn(1)!==0)return g;var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)return x.fromRed().subn(1).gcd(n);if(x.cmp(rn1)===0)break;}if(i===s){x=x.redSqr();return x.fromRed().subn(1).gcd(n);}}return false;};

},{"bn.js":132,"brorand":133}],237:[function(require,module,exports){
module.exports={
  /* common-shake removed: "name": "elliptic" */
  "version": "6.5.2",
  /* common-shake removed: "description": "EC cryptography" */
  /* common-shake removed: "main": "lib/elliptic.js" */
  /* common-shake removed: "files": [
    "lib"
  ] */
  /* common-shake removed: "scripts": {
    "jscs": "jscs benchmarks/*.js lib/*.js lib/**\/*.js lib/**\/**\/*.js test/index.js",
    "jshint": "jscs benchmarks/*.js lib/*.js lib/**\/*.js lib/**\/**\/*.js test/index.js",
    "lint": "npm run jscs && npm run jshint",
    "unit": "istanbul test _mocha --reporter=spec test/index.js",
    "test": "npm run lint && npm run unit",
    "version": "grunt dist && git add dist/"
  } */
  /* common-shake removed: "repository": {
    "type": "git",
    "url": "git@github.com:indutny/elliptic"
  } */
  /* common-shake removed: "keywords": [
    "EC",
    "Elliptic",
    "curve",
    "Cryptography"
  ] */
  /* common-shake removed: "author": "Fedor Indutny <fedor@indutny.com>" */
  /* common-shake removed: "license": "MIT" */
  /* common-shake removed: "bugs": {
    "url": "https://github.com/indutny/elliptic/issues"
  } */
  /* common-shake removed: "homepage": "https://github.com/indutny/elliptic" */
  /* common-shake removed: "devDependencies": {
    "brfs": "^1.4.3",
    "coveralls": "^3.0.8",
    "grunt": "^1.0.4",
    "grunt-browserify": "^5.0.0",
    "grunt-cli": "^1.2.0",
    "grunt-contrib-connect": "^1.0.0",
    "grunt-contrib-copy": "^1.0.0",
    "grunt-contrib-uglify": "^1.0.1",
    "grunt-mocha-istanbul": "^3.0.1",
    "grunt-saucelabs": "^9.0.1",
    "istanbul": "^0.4.2",
    "jscs": "^3.0.7",
    "jshint": "^2.10.3",
    "mocha": "^6.2.2"
  } */
  /* common-shake removed: "dependencies": {
    "bn.js": "^4.4.0",
    "brorand": "^1.0.1",
    "hash.js": "^1.0.0",
    "hmac-drbg": "^1.0.0",
    "inherits": "^2.0.1",
    "minimalistic-assert": "^1.0.0",
    "minimalistic-crypto-utils": "^1.0.0"
  } */
}

},{}],236:[function(require,module,exports){
'use strict';var utils=exports;var BN=require('bn.js');var minAssert=require('minimalistic-assert');var minUtils=require('minimalistic-crypto-utils');utils.assert=minAssert;utils.toArray=minUtils.toArray;utils.zero2=minUtils.zero2;utils.toHex=minUtils.toHex;utils.encode=minUtils.encode;function getNAF(num,w,bits){var naf=new Array(Math.max(num.bitLength(),bits)+1);naf.fill(0);var ws=1<<w+1;var k=num.clone();for(var i=0;i<naf.length;i++){var z;var mod=k.andln(ws-1);if(k.isOdd()){if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z);}else{z=0;}naf[i]=z;k.iushrn(1);}return naf;}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0;}else{var m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14;}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0;}else{var m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24;}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.iushrn(1);k2.iushrn(1);}return jsf;}utils.getJSF=getJSF;function cachedProperty(obj,name,computer){var key='_'+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this);};}utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==='string'?utils.toArray(bytes,'hex'):bytes;}utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,'hex','le');}utils.intFromLE=intFromLE;

},{"bn.js":132,"minimalistic-assert":480,"minimalistic-crypto-utils":481}],225:[function(require,module,exports){
arguments[4][117][0].apply(exports,arguments)
},{"./base":223,"./edwards":224,"./mont":226,"./short":227,"dup":117}],229:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var BN=require('bn.js');var HmacDRBG=require('hmac-drbg');var utils=require('../utils');var curves=require('../curves');var rand=require('brorand');var assert=utils.assert;var KeyPair=require('./key');var Signature=require('./signature');function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==='string'){assert(curves.hasOwnProperty(options),'Unknown curve '+options);options=curves[options];}if(options instanceof curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash;}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options);};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc);};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc);};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||'utf8',entropy:options.entropy||rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||'utf8',nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv);}while(true);};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg;};EC.prototype.sign=function sign(msg,key,enc,options){if((0,_typeof2["default"])(enc)==='object'){options=enc;enc=null;}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray('be',bytes);var nonce=msg.toArray('be',bytes);var drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||'utf8'});var ns1=this.n.sub(new BN(1));for(var iter=0;true;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1;}return new Signature({r:r,s:s,recoveryParam:recoveryParam});}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,'hex');var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);if(!this.curve._maxwellTrick){var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().umod(this.n).cmp(r)===0;}var p=this.g.jmulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.eqXToP(r);};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,'The recovery param is more than two bits');signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error('Unable to find sencond key candinate');if(isSecondKey)r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else r=this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2);};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i);}catch(e){continue;}if(Qprime.eq(Q))return i;}throw new Error('Unable to find valid recovery factor');};

},{"../curves":228,"../utils":236,"./key":230,"./signature":231,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132,"brorand":133,"hmac-drbg":304}],232:[function(require,module,exports){
'use strict';var hash=require('hash.js');var curves=require('../curves');var utils=require('../utils');var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=require('./key');var Signature=require('./signature');function EDDSA(curve){assert(curve==='ed25519','only tested with ed25519 so far');if(!(this instanceof EDDSA))return new EDDSA(curve);var curve=curves[curve].curve;this.curve=curve;this.g=curve.g;this.g.precompute(curve.n.bitLength()+1);this.pointClass=curve.point().constructor;this.encodingLength=Math.ceil(curve.n.bitLength()/8);this.hash=hash.sha512;}module.exports=EDDSA;EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded});};EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message);sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG);};EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++){hash.update(arguments[i]);}return utils.intFromLE(hash.digest()).umod(this.curve.n);};EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub);};EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret);};EDDSA.prototype.makeSignature=function makeSignature(sig){if(sig instanceof Signature)return sig;return new Signature(this,sig);};EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray('le',this.encodingLength);enc[this.encodingLength-1]|=point.getX().isOdd()?0x80:0;return enc;};EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~0x80);var xIsOdd=(bytes[lastIx]&0x80)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd);};EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray('le',this.encodingLength);};EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes);};EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass;};

},{"../curves":228,"../utils":236,"./key":233,"./signature":234,"hash.js":292}],228:[function(require,module,exports){
'use strict';var curves=exports;var hash=require('hash.js');var curve=require('./curve');var utils=require('./utils');var assert=utils.assert;function PresetCurve(options){if(options.type==='short')this.curve=new curve["short"](options);else if(options.type==='edwards')this.curve=new curve.edwards(options);else this.curve=new curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),'Invalid curve');assert(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O');}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function get(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve;}});}defineCurve('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:hash.sha256,gRed:false,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']});defineCurve('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:hash.sha256,gRed:false,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']});defineCurve('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:hash.sha256,gRed:false,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']});defineCurve('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f '+'5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 '+'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:hash.sha384,gRed:false,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 '+'5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 '+'0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']});defineCurve('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b '+'99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd '+'3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 '+'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:hash.sha512,gRed:false,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 '+'053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 '+'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 '+'579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 '+'3fad0761 353c7086 a272c240 88be9476 9fd16650']});defineCurve('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['9']});defineCurve('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var pre;try{pre=require('./precomputed/secp256k1');}catch(e){pre=undefined;}defineCurve('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:hash.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:false,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',pre]});

},{"./curve":225,"./precomputed/secp256k1":235,"./utils":236,"hash.js":292}],223:[function(require,module,exports){
'use strict';var BN=require('bn.js');var utils=require('../utils');var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var adjustCount=this.n&&this.p.div(this.n);if(!adjustCount||adjustCount.cmpn(100)>0){this.redN=null;}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red);}}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error('Not implemented');};BaseCurve.prototype.validate=function validate(){throw new Error('Not implemented');};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1,this._bitLength);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--){nafW=(nafW<<1)+naf[k];}repr.push(nafW);}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg());}a=a.add(b);}return a.toP();};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w,this._bitLength);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--){k++;}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==='affine'){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg());}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg());}}return p.type==='affine'?acc.toP():acc;};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points;}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a],this._bitLength);naf[b]=getNAF(coeffs[b],wndWidth[b],this._bitLength);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue;}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg());}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb;}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false;}if(!zero)break;k++;i--;}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==='affine')acc=acc.mixedAdd(p);else acc=acc.add(p);}}for(var i=0;i<len;i++){wnd[i]=null;}if(jacobianResult)return acc;else return acc.toP();};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null;}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error('Not implemented');};BasePoint.prototype.validate=function validate(){return this.curve.validate(this);};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===0x04||bytes[0]===0x06||bytes[0]===0x07)&&bytes.length-1===2*len){if(bytes[0]===0x06)assert(bytes[bytes.length-1]%2===0);else if(bytes[0]===0x07)assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res;}else if((bytes[0]===0x02||bytes[0]===0x03)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===0x03);}throw new Error('Unknown point format');};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true);};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray('be',len);if(compact)return[this.getY().isEven()?0x02:0x03].concat(x);return[0x04].concat(x,this.getY().toArray('be',len));};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc);};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this;};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return false;var doubles=this.precomputed.doubles;if(!doubles)return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step);};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++){acc=acc.dbl();}doubles.push(acc);}return{step:step,points:doubles};};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++){res[i]=res[i-1].add(dbl);}return{wnd:wnd,points:res};};BasePoint.prototype._getBeta=function _getBeta(){return null;};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++){r=r.dbl();}return r;};

},{"../utils":236,"bn.js":132}],224:[function(require,module,exports){
'use strict';var utils=require('../utils');var BN=require('bn.js');var inherits=require('inherits');var Base=require('./base');var assert=utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,'edwards',conf);this.a=new BN(conf.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1;}inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)return num.redNeg();else return this.a.redMul(num);};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)return num;else return this.c.redMul(num);};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t);};EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16);if(!y.red)y=y.toRed(this.red);var y2=y.redSqr();var lhs=y2.redSub(this.c2);var rhs=y2.redMul(this.d).redMul(this.c2).redSub(this.a);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0){if(odd)throw new Error('invalid point');else return this.point(this.zero,y);}var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)throw new Error('invalid point');if(x.fromRed().isOdd()!==odd)x=x.redNeg();return this.point(x,y);};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0;};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,'projective');if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=z?new BN(z,16):this.curve.one;this.t=t&&new BN(t,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm());}}}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t);};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2]);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0);};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f);}else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j);}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.z).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j);}return this.curve.point(nx,ny,nz);};Point.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl();};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g);}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g);}return this.curve.point(nx,ny,nz);};Point.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;if(this.curve.extended)return this._extAdd(p);else return this._projAdd(p);};Point.prototype.mul=function mul(k){if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,false);};Point.prototype.jmulAdd=function jmulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,true);};Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this;};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg());};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed();};Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0;};Point.prototype.eqXToP=function eqXToP(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(this.z);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true;}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;

},{"../utils":236,"./base":223,"bn.js":132,"inherits":307}],227:[function(require,module,exports){
'use strict';var utils=require('../utils');var BN=require('bn.js');var inherits=require('inherits');var Base=require('./base');var assert=utils.assert;function ShortCurve(conf){Base.call(this,'short',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4);}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red);}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red);}if(conf.lambda){lambda=new BN(conf.lambda,16);}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0];}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0);}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)};});}else{basis=this._getEndoBasis(lambda);}return{beta:beta,lambda:lambda,basis:basis};};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2];};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x;}else if(a1&&++i===2){break;}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y;}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0;}if(a1.negative){a1=a1.neg();b1=b1.neg();}if(a2.negative){a2=a2.neg();b2=b2.neg();}return[{a:a1,b:b1},{a:a2,b:b2}];};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2};};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0;};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true);}if(split.k2.negative){split.k2.ineg();beta=beta.neg(true);}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2;}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null;}return res;};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,'affine');if(x===null&&y===null){this.x=null;this.y=null;this.inf=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false;}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed);};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red);};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function endoMul(p){return curve.point(p.x.redMul(curve.endo.beta),p.y);};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}};}return beta;};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}];};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==='string')obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red);}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res;};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.inf;};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.getX=function getX(){return this.x.fromRed();};Point.prototype.getY=function getY(){return this.y.fromRed();};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this.isInfinity())return this;else if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2);};Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs,true);else return this.curve._wnafMulAdd(1,points,coeffs,2,true);};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0);};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function negate(p){return p.neg();};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}};}return res;};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res;};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,'jacobian');if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0);}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one;}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z);};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay);};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z);};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++){r=r.dbl();}return r;}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny;}return this.curve.jpoint(jx,jyd.redMul(tinv),jz);};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl();};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k);};JPoint.prototype.eq=function eq(p){if(p.type==='affine')return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0;};JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(zs);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true;}};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC JPoint Infinity>';return'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>';};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};

},{"../utils":236,"./base":223,"bn.js":132,"inherits":307}],226:[function(require,module,exports){
'use strict';var BN=require('bn.js');var inherits=require('inherits');var Base=require('./base');var utils=require('../utils');function MontCurve(conf){Base.call(this,'mont',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.i4=new BN(4).toRed(this.red).redInvm();this.two=new BN(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two));}inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0;};function Point(curve,x,z){Base.BasePoint.call(this,curve,'projective');if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero;}else{this.x=new BN(x,16);this.z=new BN(z,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);}}inherits(Point,Base.BasePoint);MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1);};MontCurve.prototype.point=function point(x,z){return new Point(this,x,z);};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};Point.prototype.precompute=function precompute(){};Point.prototype._encode=function _encode(){return this.getX().toArray('be',this.curve.p.byteLength());};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz);};Point.prototype.add=function add(){throw new Error('Not supported on Montgomery curve');};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz);};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1)){bits.push(t.andln(1));}for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl();}else{b=a.diffAdd(b,c);a=a.dbl();}}return b;};Point.prototype.mulAdd=function mulAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.jumlAdd=function jumlAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0;};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this;};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};

},{"../utils":236,"./base":223,"bn.js":132,"inherits":307}],235:[function(require,module,exports){
arguments[4][127][0].apply(exports,arguments)
},{"dup":127}],230:[function(require,module,exports){
'use strict';var BN=require('bn.js');var utils=require('../utils');var assert=utils.assert;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc);}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc});};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc});};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:'Invalid public key'};if(!pub.validate())return{result:false,reason:'Public key is not a point'};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:'Public key * N != O'};return{result:true,reason:null};};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==='string'){enc=compact;compact=null;}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!enc)return this.pub;return this.pub.encode(enc,compact);};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==='hex')return this.priv.toString(16,2);else return this.priv;};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n);};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){if(this.ec.curve.type==='mont'){assert(key.x,'Need x coordinate');}else if(this.ec.curve.type==='short'||this.ec.curve.type==='edwards'){assert(key.x&&key.y,'Need both x and y coordinate');}this.pub=this.ec.curve.point(key.x,key.y);return;}this.pub=this.ec.curve.decodePoint(key,enc);};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX();};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options);};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this);};KeyPair.prototype.inspect=function inspect(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >';};

},{"../utils":236,"bn.js":132}],231:[function(require,module,exports){
'use strict';var BN=require('bn.js');var utils=require('../utils');var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,'Signature without r or s');this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=options.recoveryParam;}module.exports=Signature;function Position(){this.place=0;}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&0x80)){return initial;}var octetLen=initial&0xf;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off];}p.place=off;return val;}function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&0x80)&&i<len){i++;}if(i===0){return buf;}return buf.slice(i);}Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position();if(data[p.place++]!==0x30){return false;}var len=getLength(data,p);if(len+p.place!==data.length){return false;}if(data[p.place++]!==0x02){return false;}var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==0x02){return false;}var slen=getLength(data,p);if(data.length!==slen+p.place){return false;}var s=data.slice(p.place,slen+p.place);if(r[0]===0&&r[1]&0x80){r=r.slice(1);}if(s[0]===0&&s[1]&0x80){s=s.slice(1);}this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true;};function constructLength(arr,len){if(len<0x80){arr.push(len);return;}var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|0x80);while(--octets){arr.push(len>>>(octets<<3)&0xff);}arr.push(len);}Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&0x80)){s=s.slice(1);}var arr=[0x02];constructLength(arr,r.length);arr=arr.concat(r);arr.push(0x02);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[0x30];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc);};

},{"../utils":236,"bn.js":132}],233:[function(require,module,exports){
'use strict';var utils=require('../utils');var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa;this._secret=parseBytes(params.secret);if(eddsa.isPoint(params.pub))this._pub=params.pub;else this._pubBytes=parseBytes(params.pub);}KeyPair.fromPublic=function fromPublic(eddsa,pub){if(pub instanceof KeyPair)return pub;return new KeyPair(eddsa,{pub:pub});};KeyPair.fromSecret=function fromSecret(eddsa,secret){if(secret instanceof KeyPair)return secret;return new KeyPair(eddsa,{secret:secret});};KeyPair.prototype.secret=function secret(){return this._secret;};cachedProperty(KeyPair,'pubBytes',function pubBytes(){return this.eddsa.encodePoint(this.pub());});cachedProperty(KeyPair,'pub',function pub(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv());});cachedProperty(KeyPair,'privBytes',function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);a[0]&=248;a[lastIx]&=127;a[lastIx]|=64;return a;});cachedProperty(KeyPair,'priv',function priv(){return this.eddsa.decodeInt(this.privBytes());});cachedProperty(KeyPair,'hash',function hash(){return this.eddsa.hash().update(this.secret()).digest();});cachedProperty(KeyPair,'messagePrefix',function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength);});KeyPair.prototype.sign=function sign(message){assert(this._secret,'KeyPair can only verify');return this.eddsa.sign(message,this);};KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this);};KeyPair.prototype.getSecret=function getSecret(enc){assert(this._secret,'KeyPair is public only');return utils.encode(this.secret(),enc);};KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc);};module.exports=KeyPair;

},{"../utils":236}],234:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var BN=require('bn.js');var utils=require('../utils');var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa;if((0,_typeof2["default"])(sig)!=='object')sig=parseBytes(sig);if(Array.isArray(sig)){sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)};}assert(sig.R&&sig.S,'Signature without R or S');if(eddsa.isPoint(sig.R))this._R=sig.R;if(sig.S instanceof BN)this._S=sig.S;this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded;this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded;}cachedProperty(Signature,'S',function S(){return this.eddsa.decodeInt(this.Sencoded());});cachedProperty(Signature,'R',function R(){return this.eddsa.decodePoint(this.Rencoded());});cachedProperty(Signature,'Rencoded',function Rencoded(){return this.eddsa.encodePoint(this.R());});cachedProperty(Signature,'Sencoded',function Sencoded(){return this.eddsa.encodeInt(this.S());});Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded());};Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),'hex').toUpperCase();};module.exports=Signature;

},{"../utils":236,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132}],238:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var naiveFallback=function naiveFallback(){if((typeof self==="undefined"?"undefined":(0,_typeof2["default"])(self))==="object"&&self)return self;if((typeof window==="undefined"?"undefined":(0,_typeof2["default"])(window))==="object"&&window)return window;throw new Error("Unable to resolve global `this`");};module.exports=function(){if(this)return this;if((typeof globalThis==="undefined"?"undefined":(0,_typeof2["default"])(globalThis))==="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function get(){return this;},configurable:true});}catch(error){return naiveFallback();}try{if(!__global__)return naiveFallback();return __global__;}finally{delete Object.prototype.__global__;}}();

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],239:[function(require,module,exports){
(function (Buffer){
var sha3=require('js-sha3').keccak_256;var uts46=require('idna-uts46-hx');function namehash(inputName){var node='';for(var i=0;i<32;i++){node+='00';}name=normalize(inputName);if(name){var labels=name.split('.');for(var i=labels.length-1;i>=0;i--){var labelSha=sha3(labels[i]);node=sha3(new Buffer(node+labelSha,'hex'));}}return'0x'+node;}function normalize(name){return name?uts46.toUnicode(name,{useStd3ASCII:true,transitional:false}):name;}exports.hash=namehash;exports.normalize=normalize;

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"idna-uts46-hx":306,"js-sha3":240}],306:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(root,factory){if(typeof define==='function'&&define.amd){define(['punycode','./idna-map'],function(punycode,idna_map){return factory(punycode,idna_map);});}else if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'){module.exports=factory(require('punycode'),require('./idna-map'));}else{root.uts46=factory(root.punycode,root.idna_map);}})(void 0,function(punycode,idna_map){function mapLabel(label,useStd3ASCII,transitional){var mapped=[];var chars=punycode.ucs2.decode(label);for(var i=0;i<chars.length;i++){var cp=chars[i];var ch=punycode.ucs2.encode([chars[i]]);var composite=idna_map.mapChar(cp);var flags=composite>>23;var kind=composite>>21&3;var index=composite>>5&0xffff;var length=composite&0x1f;var value=idna_map.mapStr.substr(index,length);if(kind===0||useStd3ASCII&&flags&1){throw new Error("Illegal char "+ch);}else if(kind===1){mapped.push(value);}else if(kind===2){mapped.push(transitional?value:ch);}else if(kind===3){mapped.push(ch);}}var newLabel=mapped.join("").normalize("NFC");return newLabel;}function process(domain,transitional,useStd3ASCII){if(useStd3ASCII===undefined)useStd3ASCII=false;var mappedIDNA=mapLabel(domain,useStd3ASCII,transitional);var labels=mappedIDNA.split(".");labels=labels.map(function(label){if(label.startsWith("xn--")){label=punycode.decode(label.substring(4));validateLabel(label,useStd3ASCII,false);}else{validateLabel(label,useStd3ASCII,transitional);}return label;});return labels.join(".");}function validateLabel(label,useStd3ASCII,transitional){if(label[2]==='-'&&label[3]==='-')throw new Error("Failed to validate "+label);if(label.startsWith('-')||label.endsWith('-'))throw new Error("Failed to validate "+label);if(label.includes('.'))throw new Error("Failed to validate "+label);if(mapLabel(label,useStd3ASCII,transitional)!==label)throw new Error("Failed to validate "+label);var ch=label.codePointAt(0);if(idna_map.mapChar(ch)&0x2<<23)throw new Error("Label contains illegal character: "+ch);}function toAscii(domain,options){if(options===undefined)options={};var transitional='transitional'in options?options.transitional:true;var useStd3ASCII='useStd3ASCII'in options?options.useStd3ASCII:false;var verifyDnsLength='verifyDnsLength'in options?options.verifyDnsLength:false;var labels=process(domain,transitional,useStd3ASCII).split('.');var asciiLabels=labels.map(punycode.toASCII);var asciiString=asciiLabels.join('.');var i;if(verifyDnsLength){if(asciiString.length<1||asciiString.length>253){throw new Error("DNS name has wrong length: "+asciiString);}for(i=0;i<asciiLabels.length;i++){var label=asciiLabels[i];if(label.length<1||label.length>63)throw new Error("DNS label has wrong length: "+label);}}return asciiString;}function toUnicode(domain,options){if(options===undefined)options={};var useStd3ASCII='useStd3ASCII'in options?options.useStd3ASCII:false;return process(domain,false,useStd3ASCII);}return{toUnicode:toUnicode,toAscii:toAscii};});

},{"./idna-map":305,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"punycode":1228}],240:[function(require,module,exports){
(function (process,global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.5.7
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2016
 * @license MIT
 */(function(){'use strict';var root=(typeof window==="undefined"?"undefined":(0,_typeof2["default"])(window))==='object'?window:{};var NODE_JS=!root.JS_SHA3_NO_NODE_JS&&(typeof process==="undefined"?"undefined":(0,_typeof2["default"])(process))==='object'&&process.versions&&process.versions.node;if(NODE_JS){root=global;}var COMMON_JS=!root.JS_SHA3_NO_COMMON_JS&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))==='object'&&module.exports;var HEX_CHARS='0123456789abcdef'.split('');var SHAKE_PADDING=[31,7936,2031616,520093696];var KECCAK_PADDING=[1,256,65536,16777216];var PADDING=[6,1536,393216,100663296];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var BITS=[224,256,384,512];var SHAKE_BITS=[128,256];var OUTPUT_TYPES=['hex','buffer','arrayBuffer','array'];var createOutputMethod=function createOutputMethod(bits,padding,outputType){return function(message){return new Keccak(bits,padding,bits).update(message)[outputType]();};};var createShakeOutputMethod=function createShakeOutputMethod(bits,padding,outputType){return function(message,outputBits){return new Keccak(bits,padding,outputBits).update(message)[outputType]();};};var createMethod=function createMethod(bits,padding){var method=createOutputMethod(bits,padding,'hex');method.create=function(){return new Keccak(bits,padding,bits);};method.update=function(message){return method.create().update(message);};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(bits,padding,type);}return method;};var createShakeMethod=function createShakeMethod(bits,padding){var method=createShakeOutputMethod(bits,padding,'hex');method.create=function(outputBits){return new Keccak(bits,padding,outputBits);};method.update=function(message,outputBits){return method.create(outputBits).update(message);};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createShakeOutputMethod(bits,padding,type);}return method;};var algorithms=[{name:'keccak',padding:KECCAK_PADDING,bits:BITS,createMethod:createMethod},{name:'sha3',padding:PADDING,bits:BITS,createMethod:createMethod},{name:'shake',padding:SHAKE_PADDING,bits:SHAKE_BITS,createMethod:createShakeMethod}];var methods={},methodNames=[];for(var i=0;i<algorithms.length;++i){var algorithm=algorithms[i];var bits=algorithm.bits;for(var j=0;j<bits.length;++j){var methodName=algorithm.name+'_'+bits[j];methodNames.push(methodName);methods[methodName]=algorithm.createMethod(bits[j],algorithm.padding);}}function Keccak(bits,padding,outputBits){this.blocks=[];this.s=[];this.padding=padding;this.outputBits=outputBits;this.reset=true;this.block=0;this.start=0;this.blockCount=1600-(bits<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=outputBits>>5;this.extraBytes=(outputBits&31)>>3;for(var i=0;i<50;++i){this.s[i]=0;}}Keccak.prototype.update=function(message){var notString=typeof message!=='string';if(notString&&message.constructor===ArrayBuffer){message=new Uint8Array(message);}var length=message.length,blocks=this.blocks,byteCount=this.byteCount,blockCount=this.blockCount,index=0,s=this.s,i,code;while(index<length){if(this.reset){this.reset=false;blocks[0]=this.block;for(i=1;i<blockCount+1;++i){blocks[i]=0;}}if(notString){for(i=this.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3];}}else{for(i=this.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<0x80){blocks[i>>2]|=code<<SHIFT[i++&3];}else if(code<0x800){blocks[i>>2]|=(0xc0|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else if(code<0xd800||code>=0xe000){blocks[i>>2]|=(0xe0|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else{code=0x10000+((code&0x3ff)<<10|message.charCodeAt(++index)&0x3ff);blocks[i>>2]|=(0xf0|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>12&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}}}this.lastByteIndex=i;if(i>=byteCount){this.start=i-byteCount;this.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);this.reset=true;}else{this.start=i;}}return this;};Keccak.prototype.finalize=function(){var blocks=this.blocks,i=this.lastByteIndex,blockCount=this.blockCount,s=this.s;blocks[i>>2]|=this.padding[i&3];if(this.lastByteIndex===this.byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0;}}blocks[blockCount-1]|=0x80000000;for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);};Keccak.prototype.toString=Keccak.prototype.hex=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var hex='',block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F]+HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F]+HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F]+HEX_CHARS[block>>28&0x0F]+HEX_CHARS[block>>24&0x0F];}if(j%blockCount===0){f(s);i=0;}}if(extraBytes){block=s[i];if(extraBytes>0){hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F];}if(extraBytes>1){hex+=HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F];}if(extraBytes>2){hex+=HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F];}}return hex;};Keccak.prototype.arrayBuffer=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var bytes=this.outputBits>>3;var buffer;if(extraBytes){buffer=new ArrayBuffer(outputBlocks+1<<2);}else{buffer=new ArrayBuffer(bytes);}var array=new Uint32Array(buffer);while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){array[j]=s[i];}if(j%blockCount===0){f(s);}}if(extraBytes){array[i]=s[i];buffer=buffer.slice(0,bytes);}return buffer;};Keccak.prototype.buffer=Keccak.prototype.arrayBuffer;Keccak.prototype.digest=Keccak.prototype.array=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var array=[],offset,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){offset=j<<2;block=s[i];array[offset]=block&0xFF;array[offset+1]=block>>8&0xFF;array[offset+2]=block>>16&0xFF;array[offset+3]=block>>24&0xFF;}if(j%blockCount===0){f(s);}}if(extraBytes){offset=j<<2;block=s[i];if(extraBytes>0){array[offset]=block&0xFF;}if(extraBytes>1){array[offset+1]=block>>8&0xFF;}if(extraBytes>2){array[offset+2]=block>>16&0xFF;}}return array;};var f=function f(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1];}};if(COMMON_JS){module.exports=methods;}else{for(var i=0;i<methodNames.length;++i){root[methodNames[i]]=methods[methodNames[i]];}}})();

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"_process":1221}],241:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var Bytes=require("./bytes");var Nat=require("./nat");var elliptic=require("elliptic");var rlp=require("./rlp");var secp256k1=new elliptic.ec("secp256k1");var _require=require("./hash"),keccak256=_require.keccak256,keccak256s=_require.keccak256s;var create=function create(entropy){var innerHex=keccak256(Bytes.concat(Bytes.random(32),entropy||Bytes.random(32)));var middleHex=Bytes.concat(Bytes.concat(Bytes.random(32),innerHex),Bytes.random(32));var outerHex=keccak256(middleHex);return fromPrivate(outerHex);};var toChecksum=function toChecksum(address){var addressHash=keccak256s(address.slice(2));var checksumAddress="0x";for(var i=0;i<40;i++){checksumAddress+=parseInt(addressHash[i+2],16)>7?address[i+2].toUpperCase():address[i+2];}return checksumAddress;};var fromPrivate=function fromPrivate(privateKey){var buffer=new Buffer(privateKey.slice(2),"hex");var ecKey=secp256k1.keyFromPrivate(buffer);var publicKey="0x"+ecKey.getPublic(false,'hex').slice(2);var publicHash=keccak256(publicKey);var address=toChecksum("0x"+publicHash.slice(-40));return{address:address,privateKey:privateKey};};var encodeSignature=function encodeSignature(_ref){var _ref2=(0,_slicedToArray2["default"])(_ref,3),v=_ref2[0],r=_ref2[1],s=_ref2[2];return Bytes.flatten([r,s,v]);};var decodeSignature=function decodeSignature(hex){return[Bytes.slice(64,Bytes.length(hex),hex),Bytes.slice(0,32,hex),Bytes.slice(32,64,hex)];};var makeSigner=function makeSigner(addToV){return function(hash,privateKey){var signature=secp256k1.keyFromPrivate(new Buffer(privateKey.slice(2),"hex")).sign(new Buffer(hash.slice(2),"hex"),{canonical:true});return encodeSignature([Nat.fromString(Bytes.fromNumber(addToV+signature.recoveryParam)),Bytes.pad(32,Bytes.fromNat("0x"+signature.r.toString(16))),Bytes.pad(32,Bytes.fromNat("0x"+signature.s.toString(16)))]);};};var sign=makeSigner(27);var recover=function recover(hash,signature){var vals=decodeSignature(signature);var vrs={v:Bytes.toNumber(vals[0]),r:vals[1].slice(2),s:vals[2].slice(2)};var ecPublicKey=secp256k1.recoverPubKey(new Buffer(hash.slice(2),"hex"),vrs,vrs.v<2?vrs.v:1-vrs.v%2);var publicKey="0x"+ecPublicKey.encode("hex",false).slice(2);var publicHash=keccak256(publicKey);var address=toChecksum("0x"+publicHash.slice(-40));return address;};module.exports={create:create,toChecksum:toChecksum,fromPrivate:fromPrivate,sign:sign,makeSigner:makeSigner,recover:recover,encodeSignature:encodeSignature,decodeSignature:decodeSignature};

}).call(this,require("buffer").Buffer)

},{"./bytes":243,"./hash":244,"./nat":245,"./rlp":246,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/slicedToArray":63,"buffer":1133,"elliptic":222}],243:[function(require,module,exports){
var A=require("./array.js");var at=function at(bytes,index){return parseInt(bytes.slice(index*2+2,index*2+4),16);};var random=function random(bytes){var rnd;if(typeof window!=="undefined"&&window.crypto&&window.crypto.getRandomValues)rnd=window.crypto.getRandomValues(new Uint8Array(bytes));else if(typeof require!=="undefined")rnd=require("c"+"rypto").randomBytes(bytes);else throw"Safe random numbers not available.";var hex="0x";for(var i=0;i<bytes;++i){hex+=("00"+rnd[i].toString(16)).slice(-2);}return hex;};var length=function length(a){return(a.length-2)/2;};var flatten=function flatten(a){return"0x"+a.reduce(function(r,s){return r+s.slice(2);},"");};var slice=function slice(i,j,bs){return"0x"+bs.slice(i*2+2,j*2+2);};var reverse=function reverse(hex){var rev="0x";for(var i=0,l=length(hex);i<l;++i){rev+=hex.slice((l-i)*2,(l-i+1)*2);}return rev;};var pad=function pad(l,hex){return hex.length===l*2+2?hex:pad(l,"0x"+"0"+hex.slice(2));};var padRight=function padRight(l,hex){return hex.length===l*2+2?hex:padRight(l,hex+"0");};var toArray=function toArray(hex){var arr=[];for(var i=2,l=hex.length;i<l;i+=2){arr.push(parseInt(hex.slice(i,i+2),16));}return arr;};var fromArray=function fromArray(arr){var hex="0x";for(var i=0,l=arr.length;i<l;++i){var b=arr[i];hex+=(b<16?"0":"")+b.toString(16);}return hex;};var toUint8Array=function toUint8Array(hex){return new Uint8Array(toArray(hex));};var fromUint8Array=function fromUint8Array(arr){return fromArray([].slice.call(arr,0));};var fromNumber=function fromNumber(num){var hex=num.toString(16);return hex.length%2===0?"0x"+hex:"0x0"+hex;};var toNumber=function toNumber(hex){return parseInt(hex.slice(2),16);};var concat=function concat(a,b){return a.concat(b.slice(2));};var fromNat=function fromNat(bn){return bn==="0x0"?"0x":bn.length%2===0?bn:"0x0"+bn.slice(2);};var toNat=function toNat(bn){return bn[2]==="0"?"0x"+bn.slice(3):bn;};var fromAscii=function fromAscii(ascii){var hex="0x";for(var i=0;i<ascii.length;++i){hex+=("00"+ascii.charCodeAt(i).toString(16)).slice(-2);}return hex;};var toAscii=function toAscii(hex){var ascii="";for(var i=2;i<hex.length;i+=2){ascii+=String.fromCharCode(parseInt(hex.slice(i,i+2),16));}return ascii;};var fromString=function fromString(s){var makeByte=function makeByte(uint8){var b=uint8.toString(16);return b.length<2?"0"+b:b;};var bytes="0x";for(var ci=0;ci!=s.length;ci++){var c=s.charCodeAt(ci);if(c<128){bytes+=makeByte(c);continue;}if(c<2048){bytes+=makeByte(c>>6|192);}else{if(c>0xd7ff&&c<0xdc00){if(++ci==s.length)return null;var c2=s.charCodeAt(ci);if(c2<0xdc00||c2>0xdfff)return null;c=0x10000+((c&0x03ff)<<10)+(c2&0x03ff);bytes+=makeByte(c>>18|240);bytes+=makeByte(c>>12&63|128);}else{bytes+=makeByte(c>>12|224);}bytes+=makeByte(c>>6&63|128);}bytes+=makeByte(c&63|128);}return bytes;};var toString=function toString(bytes){var s='';var i=0;var l=length(bytes);while(i<l){var c=at(bytes,i++);if(c>127){if(c>191&&c<224){if(i>=l)return null;c=(c&31)<<6|at(bytes,i)&63;}else if(c>223&&c<240){if(i+1>=l)return null;c=(c&15)<<12|(at(bytes,i)&63)<<6|at(bytes,++i)&63;}else if(c>239&&c<248){if(i+2>=l)return null;c=(c&7)<<18|(at(bytes,i)&63)<<12|(at(bytes,++i)&63)<<6|at(bytes,++i)&63;}else return null;++i;}if(c<=0xffff)s+=String.fromCharCode(c);else if(c<=0x10ffff){c-=0x10000;s+=String.fromCharCode(c>>10|0xd800);s+=String.fromCharCode(c&0x3FF|0xdc00);}else return null;}return s;};module.exports={random:random,length:length,concat:concat,flatten:flatten,slice:slice,reverse:reverse,pad:pad,padRight:padRight,fromAscii:fromAscii,toAscii:toAscii,fromString:fromString,toString:toString,fromNumber:fromNumber,toNumber:toNumber,fromNat:fromNat,toNat:toNat,fromArray:fromArray,toArray:toArray,fromUint8Array:fromUint8Array,toUint8Array:toUint8Array};

},{"./array.js":242}],246:[function(require,module,exports){
var encode=function encode(tree){var padEven=function padEven(str){return str.length%2===0?str:"0"+str;};var uint=function uint(num){return padEven(num.toString(16));};var length=function length(len,add){return len<56?uint(add+len):uint(add+uint(len).length/2+55)+uint(len);};var dataTree=function dataTree(tree){if(typeof tree==="string"){var hex=tree.slice(2);var pre=hex.length!=2||hex>="80"?length(hex.length/2,128):"";return pre+hex;}else{var _hex=tree.map(dataTree).join("");var _pre=length(_hex.length/2,192);return _pre+_hex;}};return"0x"+dataTree(tree);};var decode=function decode(hex){var i=2;var parseTree=function parseTree(){if(i>=hex.length)throw"";var head=hex.slice(i,i+2);return head<"80"?(i+=2,"0x"+head):head<"c0"?parseHex():parseList();};var parseLength=function parseLength(){var len=parseInt(hex.slice(i,i+=2),16)%64;return len<56?len:parseInt(hex.slice(i,i+=(len-55)*2),16);};var parseHex=function parseHex(){var len=parseLength();return"0x"+hex.slice(i,i+=len*2);};var parseList=function parseList(){var lim=parseLength()*2+i;var list=[];while(i<lim){list.push(parseTree());}return list;};try{return parseTree();}catch(e){return[];}};module.exports={encode:encode,decode:decode};

},{}],244:[function(require,module,exports){
var HEX_CHARS='0123456789abcdef'.split('');var KECCAK_PADDING=[1,256,65536,16777216];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var Keccak=function Keccak(bits){return{blocks:[],reset:true,block:0,start:0,blockCount:1600-(bits<<1)>>5,outputBlocks:bits>>5,s:function(s){return[].concat(s,s,s,s,s);}([0,0,0,0,0,0,0,0,0,0])};};var update=function update(state,message){var length=message.length,blocks=state.blocks,byteCount=state.blockCount<<2,blockCount=state.blockCount,outputBlocks=state.outputBlocks,s=state.s,index=0,i,code;while(index<length){if(state.reset){state.reset=false;blocks[0]=state.block;for(i=1;i<blockCount+1;++i){blocks[i]=0;}}if(typeof message!=="string"){for(i=state.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3];}}else{for(i=state.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<0x80){blocks[i>>2]|=code<<SHIFT[i++&3];}else if(code<0x800){blocks[i>>2]|=(0xc0|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else if(code<0xd800||code>=0xe000){blocks[i>>2]|=(0xe0|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else{code=0x10000+((code&0x3ff)<<10|message.charCodeAt(++index)&0x3ff);blocks[i>>2]|=(0xf0|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>12&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}}}state.lastByteIndex=i;if(i>=byteCount){state.start=i-byteCount;state.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);state.reset=true;}else{state.start=i;}}i=state.lastByteIndex;blocks[i>>2]|=KECCAK_PADDING[i&3];if(state.lastByteIndex===byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0;}}blocks[blockCount-1]|=0x80000000;for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);var hex='',i=0,j=0,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F]+HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F]+HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F]+HEX_CHARS[block>>28&0x0F]+HEX_CHARS[block>>24&0x0F];}if(j%blockCount===0){f(s);i=0;}}return"0x"+hex;};var f=function f(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1];}};var keccak=function keccak(bits){return function(str){var msg;if(str.slice(0,2)==="0x"){msg=[];for(var i=2,l=str.length;i<l;i+=2){msg.push(parseInt(str.slice(i,i+2),16));}}else{msg=str;}return update(Keccak(bits,bits),msg);};};module.exports={keccak256:keccak(256),keccak512:keccak(512),keccak256s:keccak(256),keccak512s:keccak(512)};

},{}],245:[function(require,module,exports){
var BN=require("bn.js");var Bytes=require("./bytes");var fromBN=function fromBN(bn){return"0x"+bn.toString("hex");};var toBN=function toBN(str){return new BN(str.slice(2),16);};var fromString=function fromString(str){var bn="0x"+(str.slice(0,2)==="0x"?new BN(str.slice(2),16):new BN(str,10)).toString("hex");return bn==="0x0"?"0x":bn;};var toEther=function toEther(wei){return toNumber(div(wei,fromString("10000000000")))/100000000;};var fromEther=function fromEther(eth){return mul(fromNumber(Math.floor(eth*100000000)),fromString("10000000000"));};var toString=function toString(a){return toBN(a).toString(10);};var fromNumber=function fromNumber(a){return typeof a==="string"?/^0x/.test(a)?a:"0x"+a:"0x"+new BN(a).toString("hex");};var toNumber=function toNumber(a){return toBN(a).toNumber();};var toUint256=function toUint256(a){return Bytes.pad(32,a);};var bin=function bin(method){return function(a,b){return fromBN(toBN(a)[method](toBN(b)));};};var add=bin("add");var mul=bin("mul");var div=bin("div");var sub=bin("sub");module.exports={/* common-shake removed: toString:toString */fromString:fromString,/* common-shake removed: toNumber:toNumber *//* common-shake removed: fromNumber:fromNumber *//* common-shake removed: toEther:toEther *//* common-shake removed: fromEther:fromEther *//* common-shake removed: toUint256:toUint256 *//* common-shake removed: add:add *//* common-shake removed: mul:mul *//* common-shake removed: div:div *//* common-shake removed: sub:sub */};

},{"./bytes":243,"bn.js":132}],242:[function(require,module,exports){
var generate=function generate(num,fn){var a=[];for(var i=0;i<num;++i){a.push(fn(i));}return a;};var replicate=function replicate(num,val){return generate(num,function(){return val;});};var concat=function concat(a,b){return a.concat(b);};var flatten=function flatten(a){var r=[];for(var j=0,J=a.length;j<J;++j){for(var i=0,I=a[j].length;i<I;++i){r.push(a[j][i]);}}return r;};var chunksOf=function chunksOf(n,a){var b=[];for(var i=0,l=a.length;i<l;i+=n){b.push(a.slice(i,i+n));}return b;};module.exports={/* common-shake removed: generate:generate *//* common-shake removed: replicate:replicate *//* common-shake removed: concat:concat *//* common-shake removed: flatten:flatten *//* common-shake removed: chunksOf:chunksOf */};

},{}],660:[function(require,module,exports){
(function (Buffer){
(function(root,f){'use strict';if(typeof module!=='undefined'&&module.exports)module.exports=f();else if(root.nacl)root.nacl.util=f();else{root.nacl={};root.nacl.util=f();}})(void 0,function(){'use strict';var util={};function validateBase64(s){if(!/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s)){throw new TypeError('invalid encoding');}}util.decodeUTF8=function(s){if(typeof s!=='string')throw new TypeError('expected string');var i,d=unescape(encodeURIComponent(s)),b=new Uint8Array(d.length);for(i=0;i<d.length;i++){b[i]=d.charCodeAt(i);}return b;};util.encodeUTF8=function(arr){var i,s=[];for(i=0;i<arr.length;i++){s.push(String.fromCharCode(arr[i]));}return decodeURIComponent(escape(s.join('')));};if(typeof atob==='undefined'){if(typeof Buffer.from!=='undefined'){util.encodeBase64=function(arr){return Buffer.from(arr).toString('base64');};util.decodeBase64=function(s){validateBase64(s);return new Uint8Array(Array.prototype.slice.call(Buffer.from(s,'base64'),0));};}else{util.encodeBase64=function(arr){return new Buffer(arr).toString('base64');};util.decodeBase64=function(s){validateBase64(s);return new Uint8Array(Array.prototype.slice.call(new Buffer(s,'base64'),0));};}}else{util.encodeBase64=function(arr){var i,s=[],len=arr.length;for(i=0;i<len;i++){s.push(String.fromCharCode(arr[i]));}return btoa(s.join(''));};util.decodeBase64=function(s){validateBase64(s);var i,d=atob(s),b=new Uint8Array(d.length);for(i=0;i<d.length;i++){b[i]=d.charCodeAt(i);}return b;};}return util;});

}).call(this,require("buffer").Buffer)

},{"buffer":1104}],248:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof3=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _typeof=typeof Symbol==="function"&&(0,_typeof3["default"])(Symbol.iterator)==="symbol"?function(obj){return(0,_typeof3["default"])(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":(0,_typeof3["default"])(obj);};var createKeccakHash=require('keccak');var secp256k1=require('secp256k1');var assert=require('assert');var rlp=require('rlp');var BN=require('bn.js');var createHash=require('create-hash');var Buffer=require('safe-buffer').Buffer;Object.assign(exports,require('ethjs-util'));/* common-shake removed: exports.MAX_INTEGER = */ void new BN('ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',16);/* common-shake removed: exports.TWO_POW256 = */ void new BN('10000000000000000000000000000000000000000000000000000000000000000',16);exports.KECCAK256_NULL_S='c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';/* common-shake removed: exports.SHA3_NULL_S = */ void exports.KECCAK256_NULL_S;/* common-shake removed: exports.KECCAK256_NULL = */ void Buffer.from(exports.KECCAK256_NULL_S,'hex');/* common-shake removed: exports.SHA3_NULL = */ void exports.KECCAK256_NULL;exports.KECCAK256_RLP_ARRAY_S='1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347';/* common-shake removed: exports.SHA3_RLP_ARRAY_S = */ void exports.KECCAK256_RLP_ARRAY_S;/* common-shake removed: exports.KECCAK256_RLP_ARRAY = */ void Buffer.from(exports.KECCAK256_RLP_ARRAY_S,'hex');/* common-shake removed: exports.SHA3_RLP_ARRAY = */ void exports.KECCAK256_RLP_ARRAY;exports.KECCAK256_RLP_S='56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421';/* common-shake removed: exports.SHA3_RLP_S = */ void exports.KECCAK256_RLP_S;/* common-shake removed: exports.KECCAK256_RLP = */ void Buffer.from(exports.KECCAK256_RLP_S,'hex');/* common-shake removed: exports.SHA3_RLP = */ void exports.KECCAK256_RLP;exports.BN=BN;/* common-shake removed: exports.rlp = */ void rlp;/* common-shake removed: exports.secp256k1 = */ void secp256k1;exports.zeros=function(bytes){return Buffer.allocUnsafe(bytes).fill(0);};exports.zeroAddress=function(){var addressLength=20;var zeroAddress=exports.zeros(addressLength);return exports.bufferToHex(zeroAddress);};exports.setLengthLeft=exports.setLength=function(msg,length,right){var buf=exports.zeros(length);msg=exports.toBuffer(msg);if(right){if(msg.length<length){msg.copy(buf);return buf;}return msg.slice(0,length);}else{if(msg.length<length){msg.copy(buf,length-msg.length);return buf;}return msg.slice(-length);}};/* common-shake removed: exports.setLengthRight = */ void function(msg,length){return exports.setLength(msg,length,true);};exports.unpad=exports.stripZeros=function(a){a=exports.stripHexPrefix(a);var first=a[0];while(a.length>0&&first.toString()==='0'){a=a.slice(1);first=a[0];}return a;};exports.toBuffer=function(v){if(!Buffer.isBuffer(v)){if(Array.isArray(v)){v=Buffer.from(v);}else if(typeof v==='string'){if(exports.isHexString(v)){v=Buffer.from(exports.padToEven(exports.stripHexPrefix(v)),'hex');}else{v=Buffer.from(v);}}else if(typeof v==='number'){v=exports.intToBuffer(v);}else if(v===null||v===undefined){v=Buffer.allocUnsafe(0);}else if(BN.isBN(v)){v=v.toArrayLike(Buffer);}else if(v.toArray){v=Buffer.from(v.toArray());}else{throw new Error('invalid type');}}return v;};exports.bufferToInt=function(buf){return new BN(exports.toBuffer(buf)).toNumber();};exports.bufferToHex=function(buf){buf=exports.toBuffer(buf);return'0x'+buf.toString('hex');};exports.fromSigned=function(num){return new BN(num).fromTwos(256);};exports.toUnsigned=function(num){return Buffer.from(num.toTwos(256).toArray());};exports.keccak=function(a,bits){a=exports.toBuffer(a);if(!bits)bits=256;return createKeccakHash('keccak'+bits).update(a).digest();};/* common-shake removed: exports.keccak256 = */ void function(a){return exports.keccak(a);};exports.sha3=exports.keccak;/* common-shake removed: exports.sha256 = */ void function(a){a=exports.toBuffer(a);return createHash('sha256').update(a).digest();};/* common-shake removed: exports.ripemd160 = */ void function(a,padded){a=exports.toBuffer(a);var hash=createHash('rmd160').update(a).digest();if(padded===true){return exports.setLength(hash,32);}else{return hash;}};exports.rlphash=function(a){return exports.keccak(rlp.encode(a));};/* common-shake removed: exports.isValidPrivate = */ void function(privateKey){return secp256k1.privateKeyVerify(privateKey);};/* common-shake removed: exports.isValidPublic = */ void function(publicKey,sanitize){if(publicKey.length===64){return secp256k1.publicKeyVerify(Buffer.concat([Buffer.from([4]),publicKey]));}if(!sanitize){return false;}return secp256k1.publicKeyVerify(publicKey);};/* common-shake removed: exports.pubToAddress = */ void 0, exports.publicToAddress=function(pubKey,sanitize){pubKey=exports.toBuffer(pubKey);if(sanitize&&pubKey.length!==64){pubKey=secp256k1.publicKeyConvert(pubKey,false).slice(1);}assert(pubKey.length===64);return exports.keccak(pubKey).slice(-20);};var privateToPublic=/* common-shake removed: exports.privateToPublic = */ function(privateKey){privateKey=exports.toBuffer(privateKey);return secp256k1.publicKeyCreate(privateKey,false).slice(1);};/* common-shake removed: exports.importPublic = */ void function(publicKey){publicKey=exports.toBuffer(publicKey);if(publicKey.length!==64){publicKey=secp256k1.publicKeyConvert(publicKey,false).slice(1);}return publicKey;};exports.ecsign=function(msgHash,privateKey){var sig=secp256k1.sign(msgHash,privateKey);var ret={};ret.r=sig.signature.slice(0,32);ret.s=sig.signature.slice(32,64);ret.v=sig.recovery+27;return ret;};exports.hashPersonalMessage=function(message){var prefix=exports.toBuffer('\x19Ethereum Signed Message:\n'+message.length.toString());return exports.keccak(Buffer.concat([prefix,message]));};exports.ecrecover=function(msgHash,v,r,s){var signature=Buffer.concat([exports.setLength(r,32),exports.setLength(s,32)],64);var recovery=v-27;if(recovery!==0&&recovery!==1){throw new Error('Invalid signature v value');}var senderPubKey=secp256k1.recover(msgHash,signature,recovery);return secp256k1.publicKeyConvert(senderPubKey,false).slice(1);};/* common-shake removed: exports.toRpcSig = */ void function(v,r,s){if(v!==27&&v!==28){throw new Error('Invalid recovery id');}return exports.bufferToHex(Buffer.concat([exports.setLengthLeft(r,32),exports.setLengthLeft(s,32),exports.toBuffer(v-27)]));};exports.fromRpcSig=function(sig){sig=exports.toBuffer(sig);if(sig.length!==65){throw new Error('Invalid signature length');}var v=sig[64];if(v<27){v+=27;}return{v:v,r:sig.slice(0,32),s:sig.slice(32,64)};};/* common-shake removed: exports.privateToAddress = */ void function(privateKey){return exports.publicToAddress(privateToPublic(privateKey));};exports.isValidAddress=function(address){return /^0x[0-9a-fA-F]{40}$/.test(address);};/* common-shake removed: exports.isZeroAddress = */ void function(address){var zeroAddress=exports.zeroAddress();return zeroAddress===exports.addHexPrefix(address);};exports.toChecksumAddress=function(address){address=exports.stripHexPrefix(address).toLowerCase();var hash=exports.keccak(address).toString('hex');var ret='0x';for(var i=0;i<address.length;i++){if(parseInt(hash[i],16)>=8){ret+=address[i].toUpperCase();}else{ret+=address[i];}}return ret;};/* common-shake removed: exports.isValidChecksumAddress = */ void function(address){return exports.isValidAddress(address)&&exports.toChecksumAddress(address)===address;};/* common-shake removed: exports.generateAddress = */ void function(from,nonce){from=exports.toBuffer(from);nonce=new BN(nonce);if(nonce.isZero()){nonce=null;}else{nonce=Buffer.from(nonce.toArray());}return exports.rlphash([from,nonce]).slice(-20);};/* common-shake removed: exports.isPrecompiled = */ void function(address){var a=exports.unpad(address);return a.length===1&&a[0]>=1&&a[0]<=8;};exports.addHexPrefix=function(str){if(typeof str!=='string'){return str;}return exports.isHexPrefixed(str)?str:'0x'+str;};/* common-shake removed: exports.isValidSignature = */ void function(v,r,s,homestead){var SECP256K1_N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var SECP256K1_N=new BN('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141',16);if(r.length!==32||s.length!==32){return false;}if(v!==27&&v!==28){return false;}r=new BN(r);s=new BN(s);if(r.isZero()||r.gt(SECP256K1_N)||s.isZero()||s.gt(SECP256K1_N)){return false;}if(homestead===false&&new BN(s).cmp(SECP256K1_N_DIV_2)===1){return false;}return true;};exports.baToJSON=function(ba){if(Buffer.isBuffer(ba)){return'0x'+ba.toString('hex');}else if(ba instanceof Array){var array=[];for(var i=0;i<ba.length;i++){array.push(exports.baToJSON(ba[i]));}return array;}};exports.defineProperties=function(self,fields,data){self.raw=[];self._fields=[];self.toJSON=function(label){if(label){var obj={};self._fields.forEach(function(field){obj[field]='0x'+self[field].toString('hex');});return obj;}return exports.baToJSON(this.raw);};self.serialize=function serialize(){return rlp.encode(self.raw);};fields.forEach(function(field,i){self._fields.push(field.name);function getter(){return self.raw[i];}function setter(v){v=exports.toBuffer(v);if(v.toString('hex')==='00'&&!field.allowZero){v=Buffer.allocUnsafe(0);}if(field.allowLess&&field.length){v=exports.stripZeros(v);assert(field.length>=v.length,'The field '+field.name+' must not have more '+field.length+' bytes');}else if(!(field.allowZero&&v.length===0)&&field.length){assert(field.length===v.length,'The field '+field.name+' must have byte length of '+field.length);}self.raw[i]=v;}Object.defineProperty(self,field.name,{enumerable:true,configurable:true,get:getter,set:setter});if(field["default"]){self[field.name]=field["default"];}if(field.alias){Object.defineProperty(self,field.alias,{enumerable:false,configurable:true,set:setter,get:getter});}});if(data){if(typeof data==='string'){data=Buffer.from(exports.stripHexPrefix(data),'hex');}if(Buffer.isBuffer(data)){data=rlp.decode(data);}if(Array.isArray(data)){if(data.length>self._fields.length){throw new Error('wrong number of fields in data');}data.forEach(function(d,i){self[self._fields[i]]=exports.toBuffer(d);});}else if((typeof data==='undefined'?'undefined':_typeof(data))==='object'){var keys=Object.keys(data);fields.forEach(function(field){if(keys.indexOf(field.name)!==-1)self[field.name]=data[field.name];if(keys.indexOf(field.alias)!==-1)self[field.alias]=data[field.alias];});}else{throw new Error('invalid data');}}};

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"assert":1100,"bn.js":132,"create-hash":173,"ethjs-util":288,"keccak":249,"rlp":537,"safe-buffer":639,"secp256k1":645}],256:[function(require,module,exports){
module.exports=require('./lib/index.js');

},{"./lib/index.js":257}],645:[function(require,module,exports){
'use strict';module.exports=require('./lib')(require('./lib/elliptic'));

},{"./lib":649,"./lib/elliptic":648}],537:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var BN=require("bn.js");function encode(input){if(Array.isArray(input)){var output=[];for(var i=0;i<input.length;i++){output.push(encode(input[i]));}var buf=Buffer.concat(output);return Buffer.concat([encodeLength(buf.length,192),buf]);}else{var inputBuf=toBuffer(input);return inputBuf.length===1&&inputBuf[0]<128?inputBuf:Buffer.concat([encodeLength(inputBuf.length,128),inputBuf]);}}exports.encode=encode;function safeParseInt(v,base){if(v.slice(0,2)==='00'){throw new Error('invalid RLP: extra zeros');}return parseInt(v,base);}function encodeLength(len,offset){if(len<56){return Buffer.from([len+offset]);}else{var hexLength=intToHex(len);var lLength=hexLength.length/2;var firstByte=intToHex(offset+55+lLength);return Buffer.from(firstByte+hexLength,'hex');}}function decode(input,stream){if(stream===void 0){stream=false;}if(!input||input.length===0){return Buffer.from([]);}var inputBuffer=toBuffer(input);var decoded=_decode(inputBuffer);if(stream){return decoded;}if(decoded.remainder.length!==0){throw new Error('invalid remainder');}return decoded.data;}exports.decode=decode;function getLength(input){if(!input||input.length===0){return Buffer.from([]);}var inputBuffer=toBuffer(input);var firstByte=inputBuffer[0];if(firstByte<=0x7f){return inputBuffer.length;}else if(firstByte<=0xb7){return firstByte-0x7f;}else if(firstByte<=0xbf){return firstByte-0xb6;}else if(firstByte<=0xf7){return firstByte-0xbf;}else{var llength=firstByte-0xf6;var length=safeParseInt(inputBuffer.slice(1,llength).toString('hex'),16);return llength+length;}}exports.getLength=getLength;function _decode(input){var length,llength,data,innerRemainder,d;var decoded=[];var firstByte=input[0];if(firstByte<=0x7f){return{data:input.slice(0,1),remainder:input.slice(1)};}else if(firstByte<=0xb7){length=firstByte-0x7f;if(firstByte===0x80){data=Buffer.from([]);}else{data=input.slice(1,length);}if(length===2&&data[0]<0x80){throw new Error('invalid rlp encoding: byte must be less 0x80');}return{data:data,remainder:input.slice(length)};}else if(firstByte<=0xbf){llength=firstByte-0xb6;length=safeParseInt(input.slice(1,llength).toString('hex'),16);data=input.slice(llength,length+llength);if(data.length<length){throw new Error('invalid RLP');}return{data:data,remainder:input.slice(length+llength)};}else if(firstByte<=0xf7){length=firstByte-0xbf;innerRemainder=input.slice(1,length);while(innerRemainder.length){d=_decode(innerRemainder);decoded.push(d.data);innerRemainder=d.remainder;}return{data:decoded,remainder:input.slice(length)};}else{llength=firstByte-0xf6;length=safeParseInt(input.slice(1,llength).toString('hex'),16);var totalLength=llength+length;if(totalLength>input.length){throw new Error('invalid rlp: total length is larger than the data');}innerRemainder=input.slice(llength,totalLength);if(innerRemainder.length===0){throw new Error('invalid rlp, List has a invalid length');}while(innerRemainder.length){d=_decode(innerRemainder);decoded.push(d.data);innerRemainder=d.remainder;}return{data:decoded,remainder:input.slice(totalLength)};}}function isHexPrefixed(str){return str.slice(0,2)==='0x';}function stripHexPrefix(str){if(typeof str!=='string'){return str;}return isHexPrefixed(str)?str.slice(2):str;}function intToHex(integer){if(integer<0){throw new Error('Invalid integer as argument, must be unsigned!');}var hex=integer.toString(16);return hex.length%2?"0"+hex:hex;}function padToEven(a){return a.length%2?"0"+a:a;}function intToBuffer(integer){var hex=intToHex(integer);return Buffer.from(hex,'hex');}function toBuffer(v){if(!Buffer.isBuffer(v)){if(typeof v==='string'){if(isHexPrefixed(v)){return Buffer.from(padToEven(stripHexPrefix(v)),'hex');}else{return Buffer.from(v);}}else if(typeof v==='number'){if(!v){return Buffer.from([]);}else{return intToBuffer(v);}}else if(v===null||v===undefined){return Buffer.from([]);}else if(v instanceof Uint8Array){return Buffer.from(v);}else if(BN.isBN(v)){return Buffer.from(v.toArray());}else{throw new Error('invalid type');}}return v;}

}).call(this,require("buffer").Buffer)

},{"bn.js":132,"buffer":1133}],288:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var isHexPrefixed=require('is-hex-prefixed');var stripHexPrefix=require('strip-hex-prefix');function padToEven(value){var a=value;if(typeof a!=='string'){throw new Error('[ethjs-util] while padding to even, value must be string, is currently '+(0,_typeof2["default"])(a)+', while padToEven.');}if(a.length%2){a='0'+a;}return a;}function intToHex(i){var hex=i.toString(16);return'0x'+hex;}function intToBuffer(i){var hex=intToHex(i);return new Buffer(padToEven(hex.slice(2)),'hex');}function getBinarySize(str){if(typeof str!=='string'){throw new Error('[ethjs-util] while getting binary size, method getBinarySize requires input \'str\' to be type String, got \''+(0,_typeof2["default"])(str)+'\'.');}return Buffer.byteLength(str,'utf8');}function arrayContainsArray(superset,subset,some){if(Array.isArray(superset)!==true){throw new Error('[ethjs-util] method arrayContainsArray requires input \'superset\' to be an array got type \''+(0,_typeof2["default"])(superset)+'\'');}if(Array.isArray(subset)!==true){throw new Error('[ethjs-util] method arrayContainsArray requires input \'subset\' to be an array got type \''+(0,_typeof2["default"])(subset)+'\'');}return subset[Boolean(some)&&'some'||'every'](function(value){return superset.indexOf(value)>=0;});}function toUtf8(hex){var bufferValue=new Buffer(padToEven(stripHexPrefix(hex).replace(/^0+|0+$/g,'')),'hex');return bufferValue.toString('utf8');}function toAscii(hex){var str='';var i=0,l=hex.length;if(hex.substring(0,2)==='0x'){i=2;}for(;i<l;i+=2){var code=parseInt(hex.substr(i,2),16);str+=String.fromCharCode(code);}return str;}function fromUtf8(stringValue){var str=new Buffer(stringValue,'utf8');return'0x'+padToEven(str.toString('hex')).replace(/^0+|0+$/g,'');}function fromAscii(stringValue){var hex='';for(var i=0;i<stringValue.length;i++){var code=stringValue.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?'0'+n:n;}return'0x'+hex;}function getKeys(params,key,allowEmpty){if(!Array.isArray(params)){throw new Error('[ethjs-util] method getKeys expecting type Array as \'params\' input, got \''+(0,_typeof2["default"])(params)+'\'');}if(typeof key!=='string'){throw new Error('[ethjs-util] method getKeys expecting type String for input \'key\' got \''+(0,_typeof2["default"])(key)+'\'.');}var result=[];for(var i=0;i<params.length;i++){var value=params[i][key];if(allowEmpty&&!value){value='';}else if(typeof value!=='string'){throw new Error('invalid abi');}result.push(value);}return result;}function isHexString(value,length){if(typeof value!=='string'||!value.match(/^0x[0-9A-Fa-f]*$/)){return false;}if(length&&value.length!==2+2*length){return false;}return true;}module.exports={arrayContainsArray:arrayContainsArray,intToBuffer:intToBuffer,getBinarySize:getBinarySize,isHexPrefixed:isHexPrefixed,stripHexPrefix:stripHexPrefix,padToEven:padToEven,intToHex:intToHex,fromAscii:fromAscii,fromUtf8:fromUtf8,toAscii:toAscii,toUtf8:toUtf8,getKeys:getKeys,isHexString:isHexString};

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1133,"is-hex-prefixed":310,"strip-hex-prefix":659}],249:[function(require,module,exports){
'use strict';module.exports=require('./lib/api')(require('./lib/keccak'));

},{"./lib/api":250,"./lib/keccak":254}],254:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var keccakState=require('./keccak-state-unroll');function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.blockSize=null;this.count=0;this.squeezing=false;}Keccak.prototype.initialize=function(rate,capacity){for(var i=0;i<50;++i){this.state[i]=0;}this.blockSize=rate/8;this.count=0;this.squeezing=false;};Keccak.prototype.absorb=function(data){for(var i=0;i<data.length;++i){this.state[~~(this.count/4)]^=data[i]<<8*(this.count%4);this.count+=1;if(this.count===this.blockSize){keccakState.p1600(this.state);this.count=0;}}};Keccak.prototype.absorbLastFewBits=function(bits){this.state[~~(this.count/4)]^=bits<<8*(this.count%4);if((bits&0x80)!==0&&this.count===this.blockSize-1)keccakState.p1600(this.state);this.state[~~((this.blockSize-1)/4)]^=0x80<<8*((this.blockSize-1)%4);keccakState.p1600(this.state);this.count=0;this.squeezing=true;};Keccak.prototype.squeeze=function(length){if(!this.squeezing)this.absorbLastFewBits(0x01);var output=Buffer.alloc(length);for(var i=0;i<length;++i){output[i]=this.state[~~(this.count/4)]>>>8*(this.count%4)&0xff;this.count+=1;if(this.count===this.blockSize){keccakState.p1600(this.state);this.count=0;}}return output;};Keccak.prototype.copy=function(dest){for(var i=0;i<50;++i){dest.state[i]=this.state[i];}dest.blockSize=this.blockSize;dest.count=this.count;dest.squeezing=this.squeezing;};module.exports=Keccak;

},{"./keccak-state-unroll":253,"safe-buffer":639}],250:[function(require,module,exports){
'use strict';var createKeccak=require('./keccak');var createShake=require('./shake');module.exports=function(KeccakState){var Keccak=createKeccak(KeccakState);var Shake=createShake(KeccakState);return function(algorithm,options){var hash=typeof algorithm==='string'?algorithm.toLowerCase():algorithm;switch(hash){case'keccak224':return new Keccak(1152,448,null,224,options);case'keccak256':return new Keccak(1088,512,null,256,options);case'keccak384':return new Keccak(832,768,null,384,options);case'keccak512':return new Keccak(576,1024,null,512,options);case'sha3-224':return new Keccak(1152,448,0x06,224,options);case'sha3-256':return new Keccak(1088,512,0x06,256,options);case'sha3-384':return new Keccak(832,768,0x06,384,options);case'sha3-512':return new Keccak(576,1024,0x06,512,options);case'shake128':return new Shake(1344,256,0x1f,options);case'shake256':return new Shake(1088,512,0x1f,options);default:throw new Error('Invald algorithm: '+algorithm);}};};

},{"./keccak":251,"./shake":252}],252:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var Transform=require('stream').Transform;var inherits=require('inherits');module.exports=function(KeccakState){function Shake(rate,capacity,delimitedSuffix,options){Transform.call(this,options);this._rate=rate;this._capacity=capacity;this._delimitedSuffix=delimitedSuffix;this._options=options;this._state=new KeccakState();this._state.initialize(rate,capacity);this._finalized=false;}inherits(Shake,Transform);Shake.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};Shake.prototype._flush=function(){};Shake.prototype._read=function(size){this.push(this.squeeze(size));};Shake.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Squeeze already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);this._state.absorb(data);return this;};Shake.prototype.squeeze=function(dataByteLength,encoding){if(!this._finalized){this._finalized=true;this._state.absorbLastFewBits(this._delimitedSuffix);}var data=this._state.squeeze(dataByteLength);if(encoding!==undefined)data=data.toString(encoding);return data;};Shake.prototype._resetState=function(){this._state.initialize(this._rate,this._capacity);return this;};Shake.prototype._clone=function(){var clone=new Shake(this._rate,this._capacity,this._delimitedSuffix,this._options);this._state.copy(clone._state);clone._finalized=this._finalized;return clone;};return Shake;};

},{"inherits":307,"safe-buffer":639,"stream":1259}],251:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var Transform=require('stream').Transform;var inherits=require('inherits');module.exports=function(KeccakState){function Keccak(rate,capacity,delimitedSuffix,hashBitLength,options){Transform.call(this,options);this._rate=rate;this._capacity=capacity;this._delimitedSuffix=delimitedSuffix;this._hashBitLength=hashBitLength;this._options=options;this._state=new KeccakState();this._state.initialize(rate,capacity);this._finalized=false;}inherits(Keccak,Transform);Keccak.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};Keccak.prototype._flush=function(callback){var error=null;try{this.push(this.digest());}catch(err){error=err;}callback(error);};Keccak.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Digest already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);this._state.absorb(data);return this;};Keccak.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called');this._finalized=true;if(this._delimitedSuffix)this._state.absorbLastFewBits(this._delimitedSuffix);var digest=this._state.squeeze(this._hashBitLength/8);if(encoding!==undefined)digest=digest.toString(encoding);this._resetState();return digest;};Keccak.prototype._resetState=function(){this._state.initialize(this._rate,this._capacity);return this;};Keccak.prototype._clone=function(){var clone=new Keccak(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);this._state.copy(clone._state);clone._finalized=this._finalized;return clone;};return Keccak;};

},{"inherits":307,"safe-buffer":639,"stream":1259}],253:[function(require,module,exports){
'use strict';var P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];exports.p1600=function(s){for(var round=0;round<24;++round){var lo0=s[0]^s[10]^s[20]^s[30]^s[40];var hi0=s[1]^s[11]^s[21]^s[31]^s[41];var lo1=s[2]^s[12]^s[22]^s[32]^s[42];var hi1=s[3]^s[13]^s[23]^s[33]^s[43];var lo2=s[4]^s[14]^s[24]^s[34]^s[44];var hi2=s[5]^s[15]^s[25]^s[35]^s[45];var lo3=s[6]^s[16]^s[26]^s[36]^s[46];var hi3=s[7]^s[17]^s[27]^s[37]^s[47];var lo4=s[8]^s[18]^s[28]^s[38]^s[48];var hi4=s[9]^s[19]^s[29]^s[39]^s[49];var lo=lo4^(lo1<<1|hi1>>>31);var hi=hi4^(hi1<<1|lo1>>>31);var t1slo0=s[0]^lo;var t1shi0=s[1]^hi;var t1slo5=s[10]^lo;var t1shi5=s[11]^hi;var t1slo10=s[20]^lo;var t1shi10=s[21]^hi;var t1slo15=s[30]^lo;var t1shi15=s[31]^hi;var t1slo20=s[40]^lo;var t1shi20=s[41]^hi;lo=lo0^(lo2<<1|hi2>>>31);hi=hi0^(hi2<<1|lo2>>>31);var t1slo1=s[2]^lo;var t1shi1=s[3]^hi;var t1slo6=s[12]^lo;var t1shi6=s[13]^hi;var t1slo11=s[22]^lo;var t1shi11=s[23]^hi;var t1slo16=s[32]^lo;var t1shi16=s[33]^hi;var t1slo21=s[42]^lo;var t1shi21=s[43]^hi;lo=lo1^(lo3<<1|hi3>>>31);hi=hi1^(hi3<<1|lo3>>>31);var t1slo2=s[4]^lo;var t1shi2=s[5]^hi;var t1slo7=s[14]^lo;var t1shi7=s[15]^hi;var t1slo12=s[24]^lo;var t1shi12=s[25]^hi;var t1slo17=s[34]^lo;var t1shi17=s[35]^hi;var t1slo22=s[44]^lo;var t1shi22=s[45]^hi;lo=lo2^(lo4<<1|hi4>>>31);hi=hi2^(hi4<<1|lo4>>>31);var t1slo3=s[6]^lo;var t1shi3=s[7]^hi;var t1slo8=s[16]^lo;var t1shi8=s[17]^hi;var t1slo13=s[26]^lo;var t1shi13=s[27]^hi;var t1slo18=s[36]^lo;var t1shi18=s[37]^hi;var t1slo23=s[46]^lo;var t1shi23=s[47]^hi;lo=lo3^(lo0<<1|hi0>>>31);hi=hi3^(hi0<<1|lo0>>>31);var t1slo4=s[8]^lo;var t1shi4=s[9]^hi;var t1slo9=s[18]^lo;var t1shi9=s[19]^hi;var t1slo14=s[28]^lo;var t1shi14=s[29]^hi;var t1slo19=s[38]^lo;var t1shi19=s[39]^hi;var t1slo24=s[48]^lo;var t1shi24=s[49]^hi;var t2slo0=t1slo0;var t2shi0=t1shi0;var t2slo16=t1shi5<<4|t1slo5>>>28;var t2shi16=t1slo5<<4|t1shi5>>>28;var t2slo7=t1slo10<<3|t1shi10>>>29;var t2shi7=t1shi10<<3|t1slo10>>>29;var t2slo23=t1shi15<<9|t1slo15>>>23;var t2shi23=t1slo15<<9|t1shi15>>>23;var t2slo14=t1slo20<<18|t1shi20>>>14;var t2shi14=t1shi20<<18|t1slo20>>>14;var t2slo10=t1slo1<<1|t1shi1>>>31;var t2shi10=t1shi1<<1|t1slo1>>>31;var t2slo1=t1shi6<<12|t1slo6>>>20;var t2shi1=t1slo6<<12|t1shi6>>>20;var t2slo17=t1slo11<<10|t1shi11>>>22;var t2shi17=t1shi11<<10|t1slo11>>>22;var t2slo8=t1shi16<<13|t1slo16>>>19;var t2shi8=t1slo16<<13|t1shi16>>>19;var t2slo24=t1slo21<<2|t1shi21>>>30;var t2shi24=t1shi21<<2|t1slo21>>>30;var t2slo20=t1shi2<<30|t1slo2>>>2;var t2shi20=t1slo2<<30|t1shi2>>>2;var t2slo11=t1slo7<<6|t1shi7>>>26;var t2shi11=t1shi7<<6|t1slo7>>>26;var t2slo2=t1shi12<<11|t1slo12>>>21;var t2shi2=t1slo12<<11|t1shi12>>>21;var t2slo18=t1slo17<<15|t1shi17>>>17;var t2shi18=t1shi17<<15|t1slo17>>>17;var t2slo9=t1shi22<<29|t1slo22>>>3;var t2shi9=t1slo22<<29|t1shi22>>>3;var t2slo5=t1slo3<<28|t1shi3>>>4;var t2shi5=t1shi3<<28|t1slo3>>>4;var t2slo21=t1shi8<<23|t1slo8>>>9;var t2shi21=t1slo8<<23|t1shi8>>>9;var t2slo12=t1slo13<<25|t1shi13>>>7;var t2shi12=t1shi13<<25|t1slo13>>>7;var t2slo3=t1slo18<<21|t1shi18>>>11;var t2shi3=t1shi18<<21|t1slo18>>>11;var t2slo19=t1shi23<<24|t1slo23>>>8;var t2shi19=t1slo23<<24|t1shi23>>>8;var t2slo15=t1slo4<<27|t1shi4>>>5;var t2shi15=t1shi4<<27|t1slo4>>>5;var t2slo6=t1slo9<<20|t1shi9>>>12;var t2shi6=t1shi9<<20|t1slo9>>>12;var t2slo22=t1shi14<<7|t1slo14>>>25;var t2shi22=t1slo14<<7|t1shi14>>>25;var t2slo13=t1slo19<<8|t1shi19>>>24;var t2shi13=t1shi19<<8|t1slo19>>>24;var t2slo4=t1slo24<<14|t1shi24>>>18;var t2shi4=t1shi24<<14|t1slo24>>>18;s[0]=t2slo0^~t2slo1&t2slo2;s[1]=t2shi0^~t2shi1&t2shi2;s[10]=t2slo5^~t2slo6&t2slo7;s[11]=t2shi5^~t2shi6&t2shi7;s[20]=t2slo10^~t2slo11&t2slo12;s[21]=t2shi10^~t2shi11&t2shi12;s[30]=t2slo15^~t2slo16&t2slo17;s[31]=t2shi15^~t2shi16&t2shi17;s[40]=t2slo20^~t2slo21&t2slo22;s[41]=t2shi20^~t2shi21&t2shi22;s[2]=t2slo1^~t2slo2&t2slo3;s[3]=t2shi1^~t2shi2&t2shi3;s[12]=t2slo6^~t2slo7&t2slo8;s[13]=t2shi6^~t2shi7&t2shi8;s[22]=t2slo11^~t2slo12&t2slo13;s[23]=t2shi11^~t2shi12&t2shi13;s[32]=t2slo16^~t2slo17&t2slo18;s[33]=t2shi16^~t2shi17&t2shi18;s[42]=t2slo21^~t2slo22&t2slo23;s[43]=t2shi21^~t2shi22&t2shi23;s[4]=t2slo2^~t2slo3&t2slo4;s[5]=t2shi2^~t2shi3&t2shi4;s[14]=t2slo7^~t2slo8&t2slo9;s[15]=t2shi7^~t2shi8&t2shi9;s[24]=t2slo12^~t2slo13&t2slo14;s[25]=t2shi12^~t2shi13&t2shi14;s[34]=t2slo17^~t2slo18&t2slo19;s[35]=t2shi17^~t2shi18&t2shi19;s[44]=t2slo22^~t2slo23&t2slo24;s[45]=t2shi22^~t2shi23&t2shi24;s[6]=t2slo3^~t2slo4&t2slo0;s[7]=t2shi3^~t2shi4&t2shi0;s[16]=t2slo8^~t2slo9&t2slo5;s[17]=t2shi8^~t2shi9&t2shi5;s[26]=t2slo13^~t2slo14&t2slo10;s[27]=t2shi13^~t2shi14&t2shi10;s[36]=t2slo18^~t2slo19&t2slo15;s[37]=t2shi18^~t2shi19&t2shi15;s[46]=t2slo23^~t2slo24&t2slo20;s[47]=t2shi23^~t2shi24&t2shi20;s[8]=t2slo4^~t2slo0&t2slo1;s[9]=t2shi4^~t2shi0&t2shi1;s[18]=t2slo9^~t2slo5&t2slo6;s[19]=t2shi9^~t2shi5&t2shi6;s[28]=t2slo14^~t2slo10&t2slo11;s[29]=t2shi14^~t2shi10&t2shi11;s[38]=t2slo19^~t2slo15&t2slo16;s[39]=t2shi19^~t2shi15&t2shi16;s[48]=t2slo24^~t2slo20&t2slo21;s[49]=t2shi24^~t2shi20&t2shi21;s[0]^=P1600_ROUND_CONSTANTS[round*2];s[1]^=P1600_ROUND_CONSTANTS[round*2+1];}};

},{}],255:[function(require,module,exports){
module.exports={
  /* common-shake removed: "genesisGasLimit": {
    "v": 5000,
    "d": "Gas limit of the Genesis block."
  } */
  /* common-shake removed: "genesisDifficulty": {
    "v": 17179869184,
    "d": "Difficulty of the Genesis block."
  } */
  /* common-shake removed: "genesisNonce": {
    "v": "0x0000000000000042",
    "d": "the geneis nonce"
  } */
  /* common-shake removed: "genesisExtraData": {
    "v": "0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa",
    "d": "extra data "
  } */
  /* common-shake removed: "genesisHash": {
    "v": "0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3",
    "d": "genesis hash"
  } */
  /* common-shake removed: "genesisStateRoot": {
    "v": "0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544",
    "d": "the genesis state root"
  } */
  /* common-shake removed: "minGasLimit": {
    "v": 5000,
    "d": "Minimum the gas limit may ever be."
  } */
  /* common-shake removed: "gasLimitBoundDivisor": {
    "v": 1024,
    "d": "The bound divisor of the gas limit, used in update calculations."
  } */
  /* common-shake removed: "minimumDifficulty": {
    "v": 131072,
    "d": "The minimum that the difficulty may ever be."
  } */
  /* common-shake removed: "difficultyBoundDivisor": {
    "v": 2048,
    "d": "The bound divisor of the difficulty, used in the update calculations."
  } */
  /* common-shake removed: "durationLimit": {
    "v": 13,
    "d": "The decision boundary on the blocktime duration used to determine whether difficulty should go up or not."
  } */
  /* common-shake removed: "maximumExtraDataSize": {
    "v": 32,
    "d": "Maximum size extra data may be after Genesis."
  } */
  /* common-shake removed: "epochDuration": {
    "v": 30000,
    "d": "Duration between proof-of-work epochs."
  } */
  /* common-shake removed: "stackLimit": {
    "v": 1024,
    "d": "Maximum size of VM stack allowed."
  } */
  /* common-shake removed: "callCreateDepth": {
    "v": 1024,
    "d": "Maximum depth of call/create stack."
  } */

  /* common-shake removed: "tierStepGas": {
    "v": [0, 2, 3, 5, 8, 10, 20],
    "d": "Once per operation, for a selection of them."
  } */
  /* common-shake removed: "expGas": {
    "v": 10,
    "d": "Once per EXP instuction."
  } */
  /* common-shake removed: "expByteGas": {
    "v": 10,
    "d": "Times ceil(log256(exponent)) for the EXP instruction."
  } */

  /* common-shake removed: "sha3Gas": {
    "v": 30,
    "d": "Once per SHA3 operation."
  } */
  /* common-shake removed: "sha3WordGas": {
    "v": 6,
    "d": "Once per word of the SHA3 operation's data."
  } */
  /* common-shake removed: "sloadGas": {
    "v": 50,
    "d": "Once per SLOAD operation."
  } */
  /* common-shake removed: "sstoreSetGas": {
    "v": 20000,
    "d": "Once per SSTORE operation if the zeroness changes from zero."
  } */
  /* common-shake removed: "sstoreResetGas": {
    "v": 5000,
    "d": "Once per SSTORE operation if the zeroness does not change from zero."
  } */
  /* common-shake removed: "sstoreRefundGas": {
    "v": 15000,
    "d": "Once per SSTORE operation if the zeroness changes to zero."
  } */
  /* common-shake removed: "jumpdestGas": {
    "v": 1,
    "d": "Refunded gas, once per SSTORE operation if the zeroness changes to zero."
  } */

  /* common-shake removed: "logGas": {
    "v": 375,
    "d": "Per LOG* operation."
  } */
  /* common-shake removed: "logDataGas": {
    "v": 8,
    "d": "Per byte in a LOG* operation's data."
  } */
  /* common-shake removed: "logTopicGas": {
    "v": 375,
    "d": "Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas."
  } */

  /* common-shake removed: "createGas": {
    "v": 32000,
    "d": "Once per CREATE operation & contract-creation transaction."
  } */

  /* common-shake removed: "callGas": {
    "v": 40,
    "d": "Once per CALL operation & message call transaction."
  } */
  /* common-shake removed: "callStipend": {
    "v": 2300,
    "d": "Free gas given at beginning of call."
  } */
  /* common-shake removed: "callValueTransferGas": {
    "v": 9000,
    "d": "Paid for CALL when the value transfor is non-zero."
  } */
  /* common-shake removed: "callNewAccountGas": {
    "v": 25000,
    "d": "Paid for CALL when the destination address didn't exist prior."
  } */

  /* common-shake removed: "suicideRefundGas": {
    "v": 24000,
    "d": "Refunded following a suicide operation."
  } */

  /* common-shake removed: "memoryGas": {
    "v": 3,
    "d": "Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL."
  } */
  /* common-shake removed: "quadCoeffDiv": {
    "v": 512,
    "d": "Divisor for the quadratic particle of the memory cost equation."
  } */

  /* common-shake removed: "createDataGas": {
    "v": 200,
    "d": ""
  } */
  "txGas": {
    "v": 21000,
    "d": "Per transaction. NOTE: Not payable on data of calls between transactions."
  },
  "txCreation": {
    "v": 32000,
    "d": "the cost of creating a contract via tx"
  },
  "txDataZeroGas": {
    "v": 4,
    "d": "Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions."
  },
  "txDataNonZeroGas": {
    "v": 68,
    "d": "Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions."
  },

  /* common-shake removed: "copyGas": {
    "v": 3,
    "d": "Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added."
  } */

  /* common-shake removed: "ecrecoverGas": {
    "v": 3000,
    "d": ""
  } */
  /* common-shake removed: "sha256Gas": {
    "v": 60,
    "d": ""
  } */
  /* common-shake removed: "sha256WordGas": {
    "v": 12,
    "d": ""
  } */
  /* common-shake removed: "ripemd160Gas": {
    "v": 600,
    "d": ""
  } */
  /* common-shake removed: "ripemd160WordGas": {
    "v": 120,
    "d": ""
  } */
  /* common-shake removed: "identityGas": {
    "v": 15,
    "d": ""
  } */
  /* common-shake removed: "identityWordGas": {
    "v": 3,
    "d": ""
  } */
  /* common-shake removed: "minerReward": {
    "v": "5000000000000000000",
    "d": "the amount a miner get rewarded for mining a block"
  } */
  /* common-shake removed: "ommerReward": {
    "v": "625000000000000000",
    "d": "The amount of wei a miner of an uncle block gets for being inculded in the blockchain"
  } */
  /* common-shake removed: "niblingReward": {
    "v": "156250000000000000",
    "d": "the amount a miner gets for inculding a uncle"
  } */
  /* common-shake removed: "homeSteadForkNumber": {
    "v": 1150000,
    "d": "the block that the Homestead fork started at"
  } */
  /* common-shake removed: "homesteadRepriceForkNumber": {
    "v": 2463000,
    "d": "the block that the Homestead Reprice (EIP150) fork started at"
  } */
  /* common-shake removed: "timebombPeriod": {
    "v": 100000,
    "d": "Exponential difficulty timebomb period"
  } */
  /* common-shake removed: "freeBlockPeriod": {
    "v": 2
  } */
}

},{}],257:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var utils=require('ethereumjs-util');var BN=require('bn.js');var ABI=function ABI(){};function elementaryName(name){if(name.startsWith('int[')){return'int256'+name.slice(3);}else if(name==='int'){return'int256';}else if(name.startsWith('uint[')){return'uint256'+name.slice(4);}else if(name==='uint'){return'uint256';}else if(name.startsWith('fixed[')){return'fixed128x128'+name.slice(5);}else if(name==='fixed'){return'fixed128x128';}else if(name.startsWith('ufixed[')){return'ufixed128x128'+name.slice(6);}else if(name==='ufixed'){return'ufixed128x128';}return name;}ABI.eventID=function(name,types){var sig=name+'('+types.map(elementaryName).join(',')+')';return utils.sha3(new Buffer(sig));};ABI.methodID=function(name,types){return ABI.eventID(name,types).slice(0,4);};function parseTypeN(type){return parseInt(/^\D+(\d+)$/.exec(type)[1],10);}function parseTypeNxM(type){var tmp=/^\D+(\d+)x(\d+)$/.exec(type);return[parseInt(tmp[1],10),parseInt(tmp[2],10)];}function parseTypeArray(type){var tmp=type.match(/(.*)\[(.*?)\]$/);if(tmp){return tmp[2]===''?'dynamic':parseInt(tmp[2],10);}return null;}function parseNumber(arg){var type=(0,_typeof2["default"])(arg);if(type==='string'){if(utils.isHexPrefixed(arg)){return new BN(utils.stripHexPrefix(arg),16);}else{return new BN(arg,10);}}else if(type==='number'){return new BN(arg);}else if(arg.toArray){return arg;}else{throw new Error('Argument is not a number');}}function parseSignature(sig){var tmp=/^(\w+)\((.+)\)$/.exec(sig);if(tmp.length!==3){throw new Error('Invalid method signature');}var args=/^(.+)\):\((.+)$/.exec(tmp[2]);if(args!==null&&args.length===3){return{method:tmp[1],args:args[1].split(','),retargs:args[2].split(',')};}else{return{method:tmp[1],args:tmp[2].split(',')};}}function encodeSingle(type,arg){var size,num,ret,i;if(type==='address'){return encodeSingle('uint160',parseNumber(arg));}else if(type==='bool'){return encodeSingle('uint8',arg?1:0);}else if(type==='string'){return encodeSingle('bytes',new Buffer(arg,'utf8'));}else if(isArray(type)){if(typeof arg.length==='undefined'){throw new Error('Not an array?');}size=parseTypeArray(type);if(size!=='dynamic'&&size!==0&&arg.length>size){throw new Error('Elements exceed array size: '+size);}ret=[];type=type.slice(0,type.lastIndexOf('['));if(typeof arg==='string'){arg=JSON.parse(arg);}for(i in arg){ret.push(encodeSingle(type,arg[i]));}if(size==='dynamic'){var length=encodeSingle('uint256',arg.length);ret.unshift(length);}return Buffer.concat(ret);}else if(type==='bytes'){arg=new Buffer(arg);ret=Buffer.concat([encodeSingle('uint256',arg.length),arg]);if(arg.length%32!==0){ret=Buffer.concat([ret,utils.zeros(32-arg.length%32)]);}return ret;}else if(type.startsWith('bytes')){size=parseTypeN(type);if(size<1||size>32){throw new Error('Invalid bytes<N> width: '+size);}return utils.setLengthRight(arg,32);}else if(type.startsWith('uint')){size=parseTypeN(type);if(size%8||size<8||size>256){throw new Error('Invalid uint<N> width: '+size);}num=parseNumber(arg);if(num.bitLength()>size){throw new Error('Supplied uint exceeds width: '+size+' vs '+num.bitLength());}if(num<0){throw new Error('Supplied uint is negative');}return num.toArrayLike(Buffer,'be',32);}else if(type.startsWith('int')){size=parseTypeN(type);if(size%8||size<8||size>256){throw new Error('Invalid int<N> width: '+size);}num=parseNumber(arg);if(num.bitLength()>size){throw new Error('Supplied int exceeds width: '+size+' vs '+num.bitLength());}return num.toTwos(256).toArrayLike(Buffer,'be',32);}else if(type.startsWith('ufixed')){size=parseTypeNxM(type);num=parseNumber(arg);if(num<0){throw new Error('Supplied ufixed is negative');}return encodeSingle('uint256',num.mul(new BN(2).pow(new BN(size[1]))));}else if(type.startsWith('fixed')){size=parseTypeNxM(type);return encodeSingle('int256',parseNumber(arg).mul(new BN(2).pow(new BN(size[1]))));}throw new Error('Unsupported or invalid type: '+type);}function decodeSingle(parsedType,data,offset){if(typeof parsedType==='string'){parsedType=parseType(parsedType);}var size,num,ret,i;if(parsedType.name==='address'){return decodeSingle(parsedType.rawType,data,offset).toArrayLike(Buffer,'be',20).toString('hex');}else if(parsedType.name==='bool'){return decodeSingle(parsedType.rawType,data,offset).toString()===new BN(1).toString();}else if(parsedType.name==='string'){var bytes=decodeSingle(parsedType.rawType,data,offset);return new Buffer(bytes,'utf8').toString();}else if(parsedType.isArray){ret=[];size=parsedType.size;if(parsedType.size==='dynamic'){offset=decodeSingle('uint256',data,offset).toNumber();size=decodeSingle('uint256',data,offset).toNumber();offset=offset+32;}for(i=0;i<size;i++){var decoded=decodeSingle(parsedType.subArray,data,offset);ret.push(decoded);offset+=parsedType.subArray.memoryUsage;}return ret;}else if(parsedType.name==='bytes'){offset=decodeSingle('uint256',data,offset).toNumber();size=decodeSingle('uint256',data,offset).toNumber();return data.slice(offset+32,offset+32+size);}else if(parsedType.name.startsWith('bytes')){return data.slice(offset,offset+parsedType.size);}else if(parsedType.name.startsWith('uint')){num=new BN(data.slice(offset,offset+32),16,'be');if(num.bitLength()>parsedType.size){throw new Error('Decoded int exceeds width: '+parsedType.size+' vs '+num.bitLength());}return num;}else if(parsedType.name.startsWith('int')){num=new BN(data.slice(offset,offset+32),16,'be').fromTwos(256);if(num.bitLength()>parsedType.size){throw new Error('Decoded uint exceeds width: '+parsedType.size+' vs '+num.bitLength());}return num;}else if(parsedType.name.startsWith('ufixed')){size=new BN(2).pow(new BN(parsedType.size[1]));num=decodeSingle('uint256',data,offset);if(!num.mod(size).isZero()){throw new Error('Decimals not supported yet');}return num.div(size);}else if(parsedType.name.startsWith('fixed')){size=new BN(2).pow(new BN(parsedType.size[1]));num=decodeSingle('int256',data,offset);if(!num.mod(size).isZero()){throw new Error('Decimals not supported yet');}return num.div(size);}throw new Error('Unsupported or invalid type: '+parsedType.name);}function parseType(type){var size;var ret;if(isArray(type)){size=parseTypeArray(type);var subArray=type.slice(0,type.lastIndexOf('['));subArray=parseType(subArray);ret={isArray:true,name:type,size:size,memoryUsage:size==='dynamic'?32:subArray.memoryUsage*size,subArray:subArray};return ret;}else{var rawType;switch(type){case'address':rawType='uint160';break;case'bool':rawType='uint8';break;case'string':rawType='bytes';break;}ret={rawType:rawType,name:type,memoryUsage:32};if(type.startsWith('bytes')&&type!=='bytes'||type.startsWith('uint')||type.startsWith('int')){ret.size=parseTypeN(type);}else if(type.startsWith('ufixed')||type.startsWith('fixed')){ret.size=parseTypeNxM(type);}if(type.startsWith('bytes')&&type!=='bytes'&&(ret.size<1||ret.size>32)){throw new Error('Invalid bytes<N> width: '+ret.size);}if((type.startsWith('uint')||type.startsWith('int'))&&(ret.size%8||ret.size<8||ret.size>256)){throw new Error('Invalid int/uint<N> width: '+ret.size);}return ret;}}function isDynamic(type){return type==='string'||type==='bytes'||parseTypeArray(type)==='dynamic';}function isArray(type){return type.lastIndexOf(']')===type.length-1;}ABI.rawEncode=function(types,values){var output=[];var data=[];var headLength=32*types.length;for(var i in types){var type=elementaryName(types[i]);var value=values[i];var cur=encodeSingle(type,value);if(isDynamic(type)){output.push(encodeSingle('uint256',headLength));data.push(cur);headLength+=cur.length;}else{output.push(cur);}}return Buffer.concat(output.concat(data));};ABI.rawDecode=function(types,data){var ret=[];data=new Buffer(data);var offset=0;for(var i in types){var type=elementaryName(types[i]);var parsed=parseType(type,data,offset);var decoded=decodeSingle(parsed,data,offset);offset+=parsed.memoryUsage;ret.push(decoded);}return ret;};ABI.simpleEncode=function(method){var args=Array.prototype.slice.call(arguments).slice(1);var sig=parseSignature(method);if(args.length!==sig.args.length){throw new Error('Argument count mismatch');}return Buffer.concat([ABI.methodID(sig.method,sig.args),ABI.rawEncode(sig.args,args)]);};ABI.simpleDecode=function(method,data){var sig=parseSignature(method);if(!sig.retargs){throw new Error('No return values in method');}return ABI.rawDecode(sig.retargs,data);};function stringify(type,value){if(type.startsWith('address')||type.startsWith('bytes')){return'0x'+value.toString('hex');}else{return value.toString();}}ABI.stringify=function(types,values){var ret=[];for(var i in types){var type=types[i];var value=values[i];if(/^[^\[]+\[.*\]$/.test(type)){value=value.map(function(item){return stringify(type,item);}).join(', ');}else{value=stringify(type,value);}ret.push(value);}return ret;};ABI.solidityPack=function(types,values){if(types.length!==values.length){throw new Error('Number of types are not matching the values');}var size,num;var ret=[];for(var i=0;i<types.length;i++){var type=elementaryName(types[i]);var value=values[i];if(type==='bytes'){ret.push(value);}else if(type==='string'){ret.push(new Buffer(value,'utf8'));}else if(type==='bool'){ret.push(new Buffer(value?'01':'00','hex'));}else if(type==='address'){ret.push(utils.setLengthLeft(value,20));}else if(type.startsWith('bytes')){size=parseTypeN(type);if(size<1||size>32){throw new Error('Invalid bytes<N> width: '+size);}ret.push(utils.setLengthRight(value,size));}else if(type.startsWith('uint')){size=parseTypeN(type);if(size%8||size<8||size>256){throw new Error('Invalid uint<N> width: '+size);}num=parseNumber(value);if(num.bitLength()>size){throw new Error('Supplied uint exceeds width: '+size+' vs '+num.bitLength());}ret.push(num.toArrayLike(Buffer,'be',size/8));}else if(type.startsWith('int')){size=parseTypeN(type);if(size%8||size<8||size>256){throw new Error('Invalid int<N> width: '+size);}num=parseNumber(value);if(num.bitLength()>size){throw new Error('Supplied int exceeds width: '+size+' vs '+num.bitLength());}ret.push(num.toTwos(size).toArrayLike(Buffer,'be',size/8));}else{throw new Error('Unsupported or invalid type: '+type);}}return Buffer.concat(ret);};ABI.soliditySHA3=function(types,values){return utils.sha3(ABI.solidityPack(types,values));};ABI.soliditySHA256=function(types,values){return utils.sha256(ABI.solidityPack(types,values));};ABI.solidityRIPEMD160=function(types,values){return utils.ripemd160(ABI.solidityPack(types,values),true);};function isNumeric(c){return c>='0'&&c<='9';}ABI.fromSerpent=function(sig){var ret=[];for(var i=0;i<sig.length;i++){var type=sig[i];if(type==='s'){ret.push('bytes');}else if(type==='b'){var tmp='bytes';var j=i+1;while(j<sig.length&&isNumeric(sig[j])){tmp+=sig[j]-'0';j++;}i=j-1;ret.push(tmp);}else if(type==='i'){ret.push('int256');}else if(type==='a'){ret.push('int256[]');}else{throw new Error('Unsupported or invalid type: '+type);}}return ret;};ABI.toSerpent=function(types){var ret=[];for(var i=0;i<types.length;i++){var type=types[i];if(type==='bytes'){ret.push('s');}else if(type.startsWith('bytes')){ret.push('b'+parseTypeN(type));}else if(type==='int256'){ret.push('i');}else if(type==='int256[]'){ret.push('a');}else{throw new Error('Unsupported or invalid type: '+type);}}return ret.join('');};module.exports=ABI;

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132,"buffer":1133,"ethereumjs-util":258}],258:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var SHA3=require('keccakjs');var secp256k1=require('secp256k1');var assert=require('assert');var rlp=require('rlp');var BN=require('bn.js');var createHash=require('create-hash');/* common-shake removed: exports.MAX_INTEGER = */ void new BN('ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',16);/* common-shake removed: exports.TWO_POW256 = */ void new BN('10000000000000000000000000000000000000000000000000000000000000000',16);exports.SHA3_NULL_S='c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';/* common-shake removed: exports.SHA3_NULL = */ void new Buffer(exports.SHA3_NULL_S,'hex');exports.SHA3_RLP_ARRAY_S='1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347';/* common-shake removed: exports.SHA3_RLP_ARRAY = */ void new Buffer(exports.SHA3_RLP_ARRAY_S,'hex');exports.SHA3_RLP_S='56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421';/* common-shake removed: exports.SHA3_RLP = */ void new Buffer(exports.SHA3_RLP_S,'hex');/* common-shake removed: exports.BN = */ void BN;/* common-shake removed: exports.rlp = */ void rlp;/* common-shake removed: exports.secp256k1 = */ void secp256k1;exports.zeros=function(bytes){var buf=new Buffer(bytes);buf.fill(0);return buf;};exports.setLengthLeft=exports.setLength=function(msg,length,right){var buf=exports.zeros(length);msg=exports.toBuffer(msg);if(right){if(msg.length<length){msg.copy(buf);return buf;}return msg.slice(0,length);}else{if(msg.length<length){msg.copy(buf,length-msg.length);return buf;}return msg.slice(-length);}};exports.setLengthRight=function(msg,length){return exports.setLength(msg,length,true);};exports.unpad=exports.stripZeros=function(a){a=exports.stripHexPrefix(a);var first=a[0];while(a.length>0&&first.toString()==='0'){a=a.slice(1);first=a[0];}return a;};exports.toBuffer=function(v){if(!Buffer.isBuffer(v)){if(Array.isArray(v)){v=new Buffer(v);}else if(typeof v==='string'){if(exports.isHexPrefixed(v)){v=new Buffer(exports.padToEven(exports.stripHexPrefix(v)),'hex');}else{v=new Buffer(v);}}else if(typeof v==='number'){v=exports.intToBuffer(v);}else if(v===null||v===undefined){v=new Buffer([]);}else if(v.toArray){v=new Buffer(v.toArray());}else{throw new Error('invalid type');}}return v;};exports.intToHex=function(i){assert(i%1===0,'number is not a integer');assert(i>=0,'number must be positive');var hex=i.toString(16);if(hex.length%2){hex='0'+hex;}return'0x'+hex;};exports.intToBuffer=function(i){var hex=exports.intToHex(i);return new Buffer(hex.slice(2),'hex');};exports.bufferToInt=function(buf){return parseInt(exports.bufferToHex(buf),16);};exports.bufferToHex=function(buf){buf=exports.toBuffer(buf);if(buf.length===0){return 0;}return'0x'+buf.toString('hex');};/* common-shake removed: exports.fromSigned = */ void function(num){return new BN(num).fromTwos(256);};/* common-shake removed: exports.toUnsigned = */ void function(num){return new Buffer(num.toTwos(256).toArray());};exports.sha3=function(a,bytes){a=exports.toBuffer(a);if(!bytes)bytes=256;var h=new SHA3(bytes);if(a){h.update(a);}return new Buffer(h.digest('hex'),'hex');};exports.sha256=function(a){a=exports.toBuffer(a);return createHash('sha256').update(a).digest();};exports.ripemd160=function(a,padded){a=exports.toBuffer(a);var hash=createHash('rmd160').update(a).digest();if(padded===true){return exports.setLength(hash,32);}else{return hash;}};exports.rlphash=function(a){return exports.sha3(rlp.encode(a));};/* common-shake removed: exports.isValidPrivate = */ void function(privateKey){return secp256k1.privateKeyVerify(privateKey);};/* common-shake removed: exports.isValidPublic = */ void function(publicKey,sanitize){if(publicKey.length===64){return secp256k1.publicKeyVerify(Buffer.concat([new Buffer([4]),publicKey]));}if(!sanitize){return false;}return secp256k1.publicKeyVerify(publicKey);};/* common-shake removed: exports.pubToAddress = */ void 0, exports.publicToAddress=function(pubKey,sanitize){pubKey=exports.toBuffer(pubKey);if(sanitize&&pubKey.length!==64){pubKey=secp256k1.publicKeyConvert(pubKey,false).slice(1);}assert(pubKey.length===64);return exports.sha3(pubKey).slice(-20);};var privateToPublic=/* common-shake removed: exports.privateToPublic = */ function(privateKey){privateKey=exports.toBuffer(privateKey);return secp256k1.publicKeyCreate(privateKey,false).slice(1);};/* common-shake removed: exports.importPublic = */ void function(publicKey){publicKey=exports.toBuffer(publicKey);if(publicKey.length!==64){publicKey=secp256k1.publicKeyConvert(publicKey,false).slice(1);}return publicKey;};/* common-shake removed: exports.ecsign = */ void function(msgHash,privateKey){var sig=secp256k1.sign(msgHash,privateKey);var ret={};ret.r=sig.signature.slice(0,32);ret.s=sig.signature.slice(32,64);ret.v=sig.recovery+27;return ret;};/* common-shake removed: exports.ecrecover = */ void function(msgHash,v,r,s){var signature=Buffer.concat([exports.setLength(r,32),exports.setLength(s,32)],64);var recovery=exports.bufferToInt(v)-27;if(recovery!==0&&recovery!==1){throw new Error('Invalid signature v value');}var senderPubKey=secp256k1.recover(msgHash,signature,recovery);return secp256k1.publicKeyConvert(senderPubKey,false).slice(1);};/* common-shake removed: exports.toRpcSig = */ void function(v,r,s){return exports.bufferToHex(Buffer.concat([r,s,exports.toBuffer(v-27)]));};/* common-shake removed: exports.fromRpcSig = */ void function(sig){sig=exports.toBuffer(sig);var v=sig[64];if(v<27){v+=27;}return{v:v,r:sig.slice(0,32),s:sig.slice(32,64)};};/* common-shake removed: exports.privateToAddress = */ void function(privateKey){return exports.publicToAddress(privateToPublic(privateKey));};exports.isValidAddress=function(address){return /^0x[0-9a-fA-F]{40}$/i.test(address);};exports.toChecksumAddress=function(address){address=exports.stripHexPrefix(address).toLowerCase();var hash=exports.sha3(address).toString('hex');var ret='0x';for(var i=0;i<address.length;i++){if(parseInt(hash[i],16)>=8){ret+=address[i].toUpperCase();}else{ret+=address[i];}}return ret;};/* common-shake removed: exports.isValidChecksumAddress = */ void function(address){return exports.isValidAddress(address)&&exports.toChecksumAddress(address)===address;};/* common-shake removed: exports.generateAddress = */ void function(from,nonce){from=exports.toBuffer(from);nonce=new BN(nonce);if(nonce.isZero()){nonce=null;}else{nonce=new Buffer(nonce.toArray());}return exports.rlphash([from,nonce]).slice(-20);};/* common-shake removed: exports.isPrecompiled = */ void function(address){var a=exports.unpad(address);return a.length===1&&a[0]>0&&a[0]<5;};exports.isHexPrefixed=function(str){return str.slice(0,2)==='0x';};exports.stripHexPrefix=function(str){if(typeof str!=='string'){return str;}return exports.isHexPrefixed(str)?str.slice(2):str;};/* common-shake removed: exports.addHexPrefix = */ void function(str){if(typeof str!=='string'){return str;}return exports.isHexPrefixed(str)?str:'0x'+str;};exports.padToEven=function(a){if(a.length%2)a='0'+a;return a;};exports.baToJSON=function(ba){if(Buffer.isBuffer(ba)){return'0x'+ba.toString('hex');}else if(ba instanceof Array){var array=[];for(var i=0;i<ba.length;i++){array.push(exports.baToJSON(ba[i]));}return array;}};/* common-shake removed: exports.defineProperties = */ void function(self,fields,data){self.raw=[];self._fields=[];self.toJSON=function(label){if(label){var obj={};self._fields.forEach(function(field){obj[field]='0x'+self[field].toString('hex');});return obj;}return exports.baToJSON(this.raw);};self.serialize=function serialize(){return rlp.encode(self.raw);};fields.forEach(function(field,i){self._fields.push(field.name);function getter(){return self.raw[i];}function setter(v){v=exports.toBuffer(v);if(v.toString('hex')==='00'&&!field.allowZero){v=new Buffer([]);}if(field.allowLess&&field.length){v=exports.stripZeros(v);assert(field.length>=v.length,'The field '+field.name+' must not have more '+field.length+' bytes');}else if(!(field.allowZero&&v.length===0)&&field.length){assert(field.length===v.length,'The field '+field.name+' must have byte length of '+field.length);}self.raw[i]=v;}Object.defineProperty(self,field.name,{enumerable:true,configurable:true,get:getter,set:setter});if(field["default"]){self[field.name]=field["default"];}if(field.alias){Object.defineProperty(self,field.alias,{enumerable:false,configurable:true,set:setter,get:getter});}});if(data){if(typeof data==='string'){data=new Buffer(exports.stripHexPrefix(data),'hex');}if(Buffer.isBuffer(data)){data=rlp.decode(data);}if(Array.isArray(data)){if(data.length>self._fields.length){throw new Error('wrong number of fields in data');}data.forEach(function(d,i){self[self._fields[i]]=exports.toBuffer(d);});}else if((0,_typeof2["default"])(data)==='object'){for(var prop in data){if(self._fields.indexOf(prop)!==-1){self[prop]=data[prop];}}}else{throw new Error('invalid data');}}};

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"assert":1100,"bn.js":132,"buffer":1133,"create-hash":173,"keccakjs":317,"rlp":537,"secp256k1":645}],317:[function(require,module,exports){
module.exports=require('browserify-sha3').SHA3Hash;

},{"browserify-sha3":155}],260:[function(require,module,exports){
arguments[4][248][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"assert":1100,"bn.js":132,"create-hash":173,"dup":248,"ethjs-util":288,"keccak":261,"rlp":537,"safe-buffer":639,"secp256k1":645}],261:[function(require,module,exports){
arguments[4][249][0].apply(exports,arguments)
},{"./lib/api":262,"./lib/keccak":266,"dup":249}],266:[function(require,module,exports){
arguments[4][254][0].apply(exports,arguments)
},{"./keccak-state-unroll":265,"dup":254,"safe-buffer":639}],262:[function(require,module,exports){
arguments[4][250][0].apply(exports,arguments)
},{"./keccak":263,"./shake":264,"dup":250}],263:[function(require,module,exports){
arguments[4][251][0].apply(exports,arguments)
},{"dup":251,"inherits":307,"safe-buffer":639,"stream":1259}],264:[function(require,module,exports){
arguments[4][252][0].apply(exports,arguments)
},{"dup":252,"inherits":307,"safe-buffer":639,"stream":1259}],265:[function(require,module,exports){
arguments[4][253][0].apply(exports,arguments)
},{"dup":253}],267:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var assert=require('assert');var ethjsUtil=require('ethjs-util');var secp256k1=require('secp256k1');var BN=require("bn.js");var bytes_1=require("./bytes");var hash_1=require("./hash");exports.zeroAddress=function(){var addressLength=20;var addr=bytes_1.zeros(addressLength);return bytes_1.bufferToHex(addr);};exports.isValidAddress=function(address){return /^0x[0-9a-fA-F]{40}$/.test(address);};exports.isZeroAddress=function(address){var zeroAddr=exports.zeroAddress();return zeroAddr===bytes_1.addHexPrefix(address);};exports.toChecksumAddress=function(address,eip1191ChainId){address=ethjsUtil.stripHexPrefix(address).toLowerCase();var prefix=eip1191ChainId!==undefined?eip1191ChainId.toString()+'0x':'';var hash=hash_1.keccak(prefix+address).toString('hex');var ret='0x';for(var i=0;i<address.length;i++){if(parseInt(hash[i],16)>=8){ret+=address[i].toUpperCase();}else{ret+=address[i];}}return ret;};exports.isValidChecksumAddress=function(address,eip1191ChainId){return exports.isValidAddress(address)&&exports.toChecksumAddress(address,eip1191ChainId)===address;};exports.generateAddress=function(from,nonce){from=bytes_1.toBuffer(from);var nonceBN=new BN(nonce);if(nonceBN.isZero()){return hash_1.rlphash([from,null]).slice(-20);}return hash_1.rlphash([from,Buffer.from(nonceBN.toArray())]).slice(-20);};exports.generateAddress2=function(from,salt,initCode){var fromBuf=bytes_1.toBuffer(from);var saltBuf=bytes_1.toBuffer(salt);var initCodeBuf=bytes_1.toBuffer(initCode);assert(fromBuf.length===20);assert(saltBuf.length===32);var address=hash_1.keccak256(Buffer.concat([Buffer.from('ff','hex'),fromBuf,saltBuf,hash_1.keccak256(initCodeBuf)]));return address.slice(-20);};exports.isPrecompiled=function(address){var a=bytes_1.unpad(address);return a.length===1&&a[0]>=1&&a[0]<=8;};exports.isValidPrivate=function(privateKey){return secp256k1.privateKeyVerify(privateKey);};exports.isValidPublic=function(publicKey,sanitize){if(sanitize===void 0){sanitize=false;}if(publicKey.length===64){return secp256k1.publicKeyVerify(Buffer.concat([Buffer.from([4]),publicKey]));}if(!sanitize){return false;}return secp256k1.publicKeyVerify(publicKey);};exports.pubToAddress=function(pubKey,sanitize){if(sanitize===void 0){sanitize=false;}pubKey=bytes_1.toBuffer(pubKey);if(sanitize&&pubKey.length!==64){pubKey=secp256k1.publicKeyConvert(pubKey,false).slice(1);}assert(pubKey.length===64);return hash_1.keccak(pubKey).slice(-20);};exports.publicToAddress=exports.pubToAddress;exports.privateToAddress=function(privateKey){return exports.publicToAddress(exports.privateToPublic(privateKey));};exports.privateToPublic=function(privateKey){privateKey=bytes_1.toBuffer(privateKey);return secp256k1.publicKeyCreate(privateKey,false).slice(1);};exports.importPublic=function(publicKey){publicKey=bytes_1.toBuffer(publicKey);if(publicKey.length!==64){publicKey=secp256k1.publicKeyConvert(publicKey,false).slice(1);}return publicKey;};

}).call(this,require("buffer").Buffer)

},{"./bytes":268,"./hash":270,"assert":1100,"bn.js":132,"buffer":1133,"ethjs-util":288,"secp256k1":645}],268:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var ethjsUtil=require('ethjs-util');var BN=require("bn.js");exports.zeros=function(bytes){return Buffer.allocUnsafe(bytes).fill(0);};exports.setLengthLeft=function(msg,length,right){if(right===void 0){right=false;}var buf=exports.zeros(length);msg=exports.toBuffer(msg);if(right){if(msg.length<length){msg.copy(buf);return buf;}return msg.slice(0,length);}else{if(msg.length<length){msg.copy(buf,length-msg.length);return buf;}return msg.slice(-length);}};exports.setLength=exports.setLengthLeft;exports.setLengthRight=function(msg,length){return exports.setLength(msg,length,true);};exports.unpad=function(a){a=ethjsUtil.stripHexPrefix(a);var first=a[0];while(a.length>0&&first.toString()==='0'){a=a.slice(1);first=a[0];}return a;};exports.stripZeros=exports.unpad;exports.toBuffer=function(v){if(!Buffer.isBuffer(v)){if(Array.isArray(v)){v=Buffer.from(v);}else if(typeof v==='string'){if(ethjsUtil.isHexString(v)){v=Buffer.from(ethjsUtil.padToEven(ethjsUtil.stripHexPrefix(v)),'hex');}else{throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+v);}}else if(typeof v==='number'){v=ethjsUtil.intToBuffer(v);}else if(v===null||v===undefined){v=Buffer.allocUnsafe(0);}else if(BN.isBN(v)){v=v.toArrayLike(Buffer);}else if(v.toArray){v=Buffer.from(v.toArray());}else{throw new Error('invalid type');}}return v;};exports.bufferToInt=function(buf){return new BN(exports.toBuffer(buf)).toNumber();};exports.bufferToHex=function(buf){buf=exports.toBuffer(buf);return'0x'+buf.toString('hex');};exports.fromSigned=function(num){return new BN(num).fromTwos(256);};exports.toUnsigned=function(num){return Buffer.from(num.toTwos(256).toArray());};exports.addHexPrefix=function(str){if(typeof str!=='string'){return str;}return ethjsUtil.isHexPrefixed(str)?str:'0x'+str;};exports.baToJSON=function(ba){if(Buffer.isBuffer(ba)){return"0x"+ba.toString('hex');}else if(ba instanceof Array){var array=[];for(var i=0;i<ba.length;i++){array.push(exports.baToJSON(ba[i]));}return array;}};

}).call(this,require("buffer").Buffer)

},{"bn.js":132,"buffer":1133,"ethjs-util":288}],270:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var createKeccakHash=require('keccak');var createHash=require('create-hash');var ethjsUtil=require('ethjs-util');var rlp=require("rlp");var bytes_1=require("./bytes");exports.keccak=function(a,bits){if(bits===void 0){bits=256;}if(typeof a==='string'&&!ethjsUtil.isHexString(a)){a=Buffer.from(a,'utf8');}else{a=bytes_1.toBuffer(a);}if(!bits)bits=256;return createKeccakHash("keccak"+bits).update(a).digest();};exports.keccak256=function(a){return exports.keccak(a);};exports.sha256=function(a){a=bytes_1.toBuffer(a);return createHash('sha256').update(a).digest();};exports.ripemd160=function(a,padded){a=bytes_1.toBuffer(a);var hash=createHash('rmd160').update(a).digest();if(padded===true){return bytes_1.setLength(hash,32);}else{return hash;}};exports.rlphash=function(a){return exports.keccak(rlp.encode(a));};

}).call(this,require("buffer").Buffer)

},{"./bytes":268,"buffer":1133,"create-hash":173,"ethjs-util":288,"keccak":311,"rlp":537}],269:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var BN=require("bn.js");exports.MAX_INTEGER=new BN('ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',16);exports.TWO_POW256=new BN('10000000000000000000000000000000000000000000000000000000000000000',16);exports.KECCAK256_NULL_S='c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';exports.KECCAK256_NULL=Buffer.from(exports.KECCAK256_NULL_S,'hex');exports.KECCAK256_RLP_ARRAY_S='1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347';exports.KECCAK256_RLP_ARRAY=Buffer.from(exports.KECCAK256_RLP_ARRAY_S,'hex');exports.KECCAK256_RLP_S='56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421';exports.KECCAK256_RLP=Buffer.from(exports.KECCAK256_RLP_S,'hex');

}).call(this,require("buffer").Buffer)

},{"bn.js":132,"buffer":1133}],311:[function(require,module,exports){
arguments[4][249][0].apply(exports,arguments)
},{"./lib/api":312,"./lib/keccak":316,"dup":249}],273:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var secp256k1=require('secp256k1');var BN=require("bn.js");var bytes_1=require("./bytes");var hash_1=require("./hash");exports.ecsign=function(msgHash,privateKey,chainId){var sig=secp256k1.sign(msgHash,privateKey);var recovery=sig.recovery;var ret={r:sig.signature.slice(0,32),s:sig.signature.slice(32,64),v:chainId?recovery+(chainId*2+35):recovery+27};return ret;};exports.ecrecover=function(msgHash,v,r,s,chainId){var signature=Buffer.concat([bytes_1.setLength(r,32),bytes_1.setLength(s,32)],64);var recovery=calculateSigRecovery(v,chainId);if(!isValidSigRecovery(recovery)){throw new Error('Invalid signature v value');}var senderPubKey=secp256k1.recover(msgHash,signature,recovery);return secp256k1.publicKeyConvert(senderPubKey,false).slice(1);};exports.toRpcSig=function(v,r,s,chainId){var recovery=calculateSigRecovery(v,chainId);if(!isValidSigRecovery(recovery)){throw new Error('Invalid signature v value');}return bytes_1.bufferToHex(Buffer.concat([bytes_1.setLengthLeft(r,32),bytes_1.setLengthLeft(s,32),bytes_1.toBuffer(v)]));};exports.fromRpcSig=function(sig){var buf=bytes_1.toBuffer(sig);if(buf.length!==65){throw new Error('Invalid signature length');}var v=buf[64];if(v<27){v+=27;}return{v:v,r:buf.slice(0,32),s:buf.slice(32,64)};};exports.isValidSignature=function(v,r,s,homesteadOrLater,chainId){if(homesteadOrLater===void 0){homesteadOrLater=true;}var SECP256K1_N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var SECP256K1_N=new BN('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141',16);if(r.length!==32||s.length!==32){return false;}if(!isValidSigRecovery(calculateSigRecovery(v,chainId))){return false;}var rBN=new BN(r);var sBN=new BN(s);if(rBN.isZero()||rBN.gt(SECP256K1_N)||sBN.isZero()||sBN.gt(SECP256K1_N)){return false;}if(homesteadOrLater&&sBN.cmp(SECP256K1_N_DIV_2)===1){return false;}return true;};exports.hashPersonalMessage=function(message){var prefix=Buffer.from("\x19Ethereum Signed Message:\n"+message.length.toString(),'utf-8');return hash_1.keccak(Buffer.concat([prefix,message]));};function calculateSigRecovery(v,chainId){return chainId?v-(2*chainId+35):v-27;}function isValidSigRecovery(recovery){return recovery===0||recovery===1;}

}).call(this,require("buffer").Buffer)

},{"./bytes":268,"./hash":270,"bn.js":132,"buffer":1133,"secp256k1":645}],272:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:true});var assert=require('assert');var ethjsUtil=require('ethjs-util');var rlp=require("rlp");var bytes_1=require("./bytes");exports.defineProperties=function(self,fields,data){self.raw=[];self._fields=[];self.toJSON=function(label){if(label===void 0){label=false;}if(label){var obj_1={};self._fields.forEach(function(field){obj_1[field]="0x"+self[field].toString('hex');});return obj_1;}return bytes_1.baToJSON(self.raw);};self.serialize=function serialize(){return rlp.encode(self.raw);};fields.forEach(function(field,i){self._fields.push(field.name);function getter(){return self.raw[i];}function setter(v){v=bytes_1.toBuffer(v);if(v.toString('hex')==='00'&&!field.allowZero){v=Buffer.allocUnsafe(0);}if(field.allowLess&&field.length){v=bytes_1.stripZeros(v);assert(field.length>=v.length,"The field "+field.name+" must not have more "+field.length+" bytes");}else if(!(field.allowZero&&v.length===0)&&field.length){assert(field.length===v.length,"The field "+field.name+" must have byte length of "+field.length);}self.raw[i]=v;}Object.defineProperty(self,field.name,{enumerable:true,configurable:true,get:getter,set:setter});if(field["default"]){self[field.name]=field["default"];}if(field.alias){Object.defineProperty(self,field.alias,{enumerable:false,configurable:true,set:setter,get:getter});}});if(data){if(typeof data==='string'){data=Buffer.from(ethjsUtil.stripHexPrefix(data),'hex');}if(Buffer.isBuffer(data)){data=rlp.decode(data);}if(Array.isArray(data)){if(data.length>self._fields.length){throw new Error('wrong number of fields in data');}data.forEach(function(d,i){self[self._fields[i]]=bytes_1.toBuffer(d);});}else if((0,_typeof2["default"])(data)==='object'){var keys_1=Object.keys(data);fields.forEach(function(field){if(keys_1.indexOf(field.name)!==-1)self[field.name]=data[field.name];if(keys_1.indexOf(field.alias)!==-1)self[field.alias]=data[field.alias];});}else{throw new Error('invalid data');}}};

}).call(this,require("buffer").Buffer)

},{"./bytes":268,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"assert":1100,"buffer":1133,"ethjs-util":288,"rlp":537}],274:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports.version="4.0.40";

},{}],275:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var bignumber_1=require("./utils/bignumber");var AddressZero='0x0000000000000000000000000000000000000000';/* common-shake removed: exports.AddressZero = */ void AddressZero;var HashZero='0x0000000000000000000000000000000000000000000000000000000000000000';exports.HashZero=HashZero;var EtherSymbol="\u039E";/* common-shake removed: exports.EtherSymbol = */ void EtherSymbol;var NegativeOne=bignumber_1.bigNumberify(-1);exports.NegativeOne=NegativeOne;var Zero=bignumber_1.bigNumberify(0);exports.Zero=Zero;var One=bignumber_1.bigNumberify(1);exports.One=One;var Two=bignumber_1.bigNumberify(2);/* common-shake removed: exports.Two = */ void Two;var WeiPerEther=bignumber_1.bigNumberify('1000000000000000000');/* common-shake removed: exports.WeiPerEther = */ void WeiPerEther;var MaxUint256=bignumber_1.bigNumberify('0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');exports.MaxUint256=MaxUint256;

},{"./utils/bignumber":280}],280:[function(require,module,exports){
'use strict';var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];}result["default"]=mod;return result;};Object.defineProperty(exports,"__esModule",{value:true});var bn_js_1=__importDefault(require("bn.js"));var bytes_1=require("./bytes");var properties_1=require("./properties");var errors=__importStar(require("../errors"));var BN_1=new bn_js_1["default"].BN(-1);function toHex(bn){var value=bn.toString(16);if(value[0]==='-'){if(value.length%2===0){return'-0x0'+value.substring(1);}return"-0x"+value.substring(1);}if(value.length%2===1){return'0x0'+value;}return'0x'+value;}function toBN(value){return _bnify(bigNumberify(value));}function toBigNumber(bn){return new BigNumber(toHex(bn));}function _bnify(value){var hex=value._hex;if(hex[0]==='-'){return new bn_js_1["default"].BN(hex.substring(3),16).mul(BN_1);}return new bn_js_1["default"].BN(hex.substring(2),16);}var BigNumber=function(){function BigNumber(value){errors.checkNew(this,BigNumber);properties_1.setType(this,'BigNumber');if(typeof value==='string'){if(bytes_1.isHexString(value)){if(value=='0x'){value='0x0';}properties_1.defineReadOnly(this,'_hex',value);}else if(value[0]==='-'&&bytes_1.isHexString(value.substring(1))){properties_1.defineReadOnly(this,'_hex',value);}else if(value.match(/^-?[0-9]*$/)){if(value==''){value='0';}properties_1.defineReadOnly(this,'_hex',toHex(new bn_js_1["default"].BN(value)));}else{errors.throwError('invalid BigNumber string value',errors.INVALID_ARGUMENT,{arg:'value',value:value});}}else if(typeof value==='number'){if(parseInt(String(value))!==value){errors.throwError('underflow',errors.NUMERIC_FAULT,{operation:'setValue',fault:'underflow',value:value,outputValue:parseInt(String(value))});}try{properties_1.defineReadOnly(this,'_hex',toHex(new bn_js_1["default"].BN(value)));}catch(error){errors.throwError('overflow',errors.NUMERIC_FAULT,{operation:'setValue',fault:'overflow',details:error.message});}}else if(value instanceof BigNumber){properties_1.defineReadOnly(this,'_hex',value._hex);}else if(value.toHexString){properties_1.defineReadOnly(this,'_hex',toHex(toBN(value.toHexString())));}else if(value._hex&&bytes_1.isHexString(value._hex)){properties_1.defineReadOnly(this,'_hex',value._hex);}else if(bytes_1.isArrayish(value)){properties_1.defineReadOnly(this,'_hex',toHex(new bn_js_1["default"].BN(bytes_1.hexlify(value).substring(2),16)));}else{errors.throwError('invalid BigNumber value',errors.INVALID_ARGUMENT,{arg:'value',value:value});}}BigNumber.prototype.fromTwos=function(value){return toBigNumber(_bnify(this).fromTwos(value));};BigNumber.prototype.toTwos=function(value){return toBigNumber(_bnify(this).toTwos(value));};BigNumber.prototype.abs=function(){if(this._hex[0]==='-'){return toBigNumber(_bnify(this).mul(BN_1));}return this;};BigNumber.prototype.add=function(other){return toBigNumber(_bnify(this).add(toBN(other)));};BigNumber.prototype.sub=function(other){return toBigNumber(_bnify(this).sub(toBN(other)));};BigNumber.prototype.div=function(other){var o=bigNumberify(other);if(o.isZero()){errors.throwError('division by zero',errors.NUMERIC_FAULT,{operation:'divide',fault:'division by zero'});}return toBigNumber(_bnify(this).div(toBN(other)));};BigNumber.prototype.mul=function(other){return toBigNumber(_bnify(this).mul(toBN(other)));};BigNumber.prototype.mod=function(other){return toBigNumber(_bnify(this).mod(toBN(other)));};BigNumber.prototype.pow=function(other){return toBigNumber(_bnify(this).pow(toBN(other)));};BigNumber.prototype.maskn=function(value){return toBigNumber(_bnify(this).maskn(value));};BigNumber.prototype.eq=function(other){return _bnify(this).eq(toBN(other));};BigNumber.prototype.lt=function(other){return _bnify(this).lt(toBN(other));};BigNumber.prototype.lte=function(other){return _bnify(this).lte(toBN(other));};BigNumber.prototype.gt=function(other){return _bnify(this).gt(toBN(other));};BigNumber.prototype.gte=function(other){return _bnify(this).gte(toBN(other));};BigNumber.prototype.isZero=function(){return _bnify(this).isZero();};BigNumber.prototype.toNumber=function(){try{return _bnify(this).toNumber();}catch(error){errors.throwError('overflow',errors.NUMERIC_FAULT,{operation:'setValue',fault:'overflow',details:error.message});}return null;};BigNumber.prototype.toString=function(){return _bnify(this).toString(10);};BigNumber.prototype.toHexString=function(){return this._hex;};BigNumber.isBigNumber=function(value){return properties_1.isType(value,'BigNumber');};return BigNumber;}();/* common-shake removed: exports.BigNumber = */ void BigNumber;function bigNumberify(value){if(BigNumber.isBigNumber(value)){return value;}return new BigNumber(value);}exports.bigNumberify=bigNumberify;

},{"../errors":276,"./bytes":281,"./properties":283,"bn.js":132}],276:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _version_1=require("./_version");exports.UNKNOWN_ERROR='UNKNOWN_ERROR';exports.NOT_IMPLEMENTED='NOT_IMPLEMENTED';exports.MISSING_NEW='MISSING_NEW';exports.CALL_EXCEPTION='CALL_EXCEPTION';exports.INVALID_ARGUMENT='INVALID_ARGUMENT';exports.MISSING_ARGUMENT='MISSING_ARGUMENT';exports.UNEXPECTED_ARGUMENT='UNEXPECTED_ARGUMENT';exports.NUMERIC_FAULT='NUMERIC_FAULT';exports.INSUFFICIENT_FUNDS='INSUFFICIENT_FUNDS';exports.NONCE_EXPIRED='NONCE_EXPIRED';exports.REPLACEMENT_UNDERPRICED='REPLACEMENT_UNDERPRICED';exports.UNSUPPORTED_OPERATION='UNSUPPORTED_OPERATION';var _permanentCensorErrors=false;var _censorErrors=false;function throwError(message,code,params){if(_censorErrors){throw new Error('unknown error');}if(!code){code=exports.UNKNOWN_ERROR;}if(!params){params={};}var messageDetails=[];Object.keys(params).forEach(function(key){try{messageDetails.push(key+'='+JSON.stringify(params[key]));}catch(error){messageDetails.push(key+'='+JSON.stringify(params[key].toString()));}});messageDetails.push("version="+_version_1.version);var reason=message;if(messageDetails.length){message+=' ('+messageDetails.join(', ')+')';}var error=new Error(message);error.reason=reason;error.code=code;Object.keys(params).forEach(function(key){error[key]=params[key];});throw error;}exports.throwError=throwError;function checkNew(self,kind){if(!(self instanceof kind)){throwError('missing new',exports.MISSING_NEW,{name:kind.name});}}exports.checkNew=checkNew;function checkArgumentCount(count,expectedCount,suffix){if(!suffix){suffix='';}if(count<expectedCount){throwError('missing argument'+suffix,exports.MISSING_ARGUMENT,{count:count,expectedCount:expectedCount});}if(count>expectedCount){throwError('too many arguments'+suffix,exports.UNEXPECTED_ARGUMENT,{count:count,expectedCount:expectedCount});}}exports.checkArgumentCount=checkArgumentCount;function setCensorship(censorship,permanent){if(_permanentCensorErrors){throwError('error censorship permanent',exports.UNSUPPORTED_OPERATION,{operation:'setCensorship'});}_censorErrors=!!censorship;_permanentCensorErrors=!!permanent;}exports.setCensorship=setCensorship;function checkNormalize(){try{["NFD","NFC","NFKD","NFKC"].forEach(function(form){try{"test".normalize(form);}catch(error){throw new Error('missing '+form);}});if(String.fromCharCode(0xe9).normalize('NFD')!==String.fromCharCode(0x65,0x0301)){throw new Error('broken implementation');}}catch(error){throwError('platform missing String.prototype.normalize',exports.UNSUPPORTED_OPERATION,{operation:'String.prototype.normalize',form:error.message});}}exports.checkNormalize=checkNormalize;var LogLevels={debug:1,"default":2,info:2,warn:3,error:4,off:5};var LogLevel=LogLevels["default"];function setLogLevel(logLevel){var level=LogLevels[logLevel];if(level==null){warn("invliad log level - "+logLevel);return;}LogLevel=level;}exports.setLogLevel=setLogLevel;function log(logLevel,args){if(LogLevel>LogLevels[logLevel]){return;}console.log.apply(console,args);}function warn(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}log("warn",args);}exports.warn=warn;function info(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}log("info",args);}exports.info=info;

},{"./_version":274}],277:[function(require,module,exports){
(function (process,global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.5.7
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2016
 * @license MIT
 */(function(){'use strict';var root=(typeof window==="undefined"?"undefined":(0,_typeof2["default"])(window))==='object'?window:{};var NODE_JS=!root.JS_SHA3_NO_NODE_JS&&(typeof process==="undefined"?"undefined":(0,_typeof2["default"])(process))==='object'&&process.versions&&process.versions.node;if(NODE_JS){root=global;}var COMMON_JS=!root.JS_SHA3_NO_COMMON_JS&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))==='object'&&module.exports;var HEX_CHARS='0123456789abcdef'.split('');var SHAKE_PADDING=[31,7936,2031616,520093696];var KECCAK_PADDING=[1,256,65536,16777216];var PADDING=[6,1536,393216,100663296];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var BITS=[224,256,384,512];var SHAKE_BITS=[128,256];var OUTPUT_TYPES=['hex','buffer','arrayBuffer','array'];var createOutputMethod=function createOutputMethod(bits,padding,outputType){return function(message){return new Keccak(bits,padding,bits).update(message)[outputType]();};};var createShakeOutputMethod=function createShakeOutputMethod(bits,padding,outputType){return function(message,outputBits){return new Keccak(bits,padding,outputBits).update(message)[outputType]();};};var createMethod=function createMethod(bits,padding){var method=createOutputMethod(bits,padding,'hex');method.create=function(){return new Keccak(bits,padding,bits);};method.update=function(message){return method.create().update(message);};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(bits,padding,type);}return method;};var createShakeMethod=function createShakeMethod(bits,padding){var method=createShakeOutputMethod(bits,padding,'hex');method.create=function(outputBits){return new Keccak(bits,padding,outputBits);};method.update=function(message,outputBits){return method.create(outputBits).update(message);};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createShakeOutputMethod(bits,padding,type);}return method;};var algorithms=[{name:'keccak',padding:KECCAK_PADDING,bits:BITS,createMethod:createMethod},{name:'sha3',padding:PADDING,bits:BITS,createMethod:createMethod},{name:'shake',padding:SHAKE_PADDING,bits:SHAKE_BITS,createMethod:createShakeMethod}];var methods={},methodNames=[];for(var i=0;i<algorithms.length;++i){var algorithm=algorithms[i];var bits=algorithm.bits;for(var j=0;j<bits.length;++j){var methodName=algorithm.name+'_'+bits[j];methodNames.push(methodName);methods[methodName]=algorithm.createMethod(bits[j],algorithm.padding);}}function Keccak(bits,padding,outputBits){this.blocks=[];this.s=[];this.padding=padding;this.outputBits=outputBits;this.reset=true;this.block=0;this.start=0;this.blockCount=1600-(bits<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=outputBits>>5;this.extraBytes=(outputBits&31)>>3;for(var i=0;i<50;++i){this.s[i]=0;}}Keccak.prototype.update=function(message){var notString=typeof message!=='string';if(notString&&message.constructor===ArrayBuffer){message=new Uint8Array(message);}var length=message.length,blocks=this.blocks,byteCount=this.byteCount,blockCount=this.blockCount,index=0,s=this.s,i,code;while(index<length){if(this.reset){this.reset=false;blocks[0]=this.block;for(i=1;i<blockCount+1;++i){blocks[i]=0;}}if(notString){for(i=this.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3];}}else{for(i=this.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<0x80){blocks[i>>2]|=code<<SHIFT[i++&3];}else if(code<0x800){blocks[i>>2]|=(0xc0|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else if(code<0xd800||code>=0xe000){blocks[i>>2]|=(0xe0|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else{code=0x10000+((code&0x3ff)<<10|message.charCodeAt(++index)&0x3ff);blocks[i>>2]|=(0xf0|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>12&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}}}this.lastByteIndex=i;if(i>=byteCount){this.start=i-byteCount;this.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);this.reset=true;}else{this.start=i;}}return this;};Keccak.prototype.finalize=function(){var blocks=this.blocks,i=this.lastByteIndex,blockCount=this.blockCount,s=this.s;blocks[i>>2]|=this.padding[i&3];if(this.lastByteIndex===this.byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0;}}blocks[blockCount-1]|=0x80000000;for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);};Keccak.prototype.toString=Keccak.prototype.hex=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var hex='',block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F]+HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F]+HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F]+HEX_CHARS[block>>28&0x0F]+HEX_CHARS[block>>24&0x0F];}if(j%blockCount===0){f(s);i=0;}}if(extraBytes){block=s[i];if(extraBytes>0){hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F];}if(extraBytes>1){hex+=HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F];}if(extraBytes>2){hex+=HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F];}}return hex;};Keccak.prototype.arrayBuffer=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var bytes=this.outputBits>>3;var buffer;if(extraBytes){buffer=new ArrayBuffer(outputBlocks+1<<2);}else{buffer=new ArrayBuffer(bytes);}var array=new Uint32Array(buffer);while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){array[j]=s[i];}if(j%blockCount===0){f(s);}}if(extraBytes){array[i]=s[i];buffer=buffer.slice(0,bytes);}return buffer;};Keccak.prototype.buffer=Keccak.prototype.arrayBuffer;Keccak.prototype.digest=Keccak.prototype.array=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var array=[],offset,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){offset=j<<2;block=s[i];array[offset]=block&0xFF;array[offset+1]=block>>8&0xFF;array[offset+2]=block>>16&0xFF;array[offset+3]=block>>24&0xFF;}if(j%blockCount===0){f(s);}}if(extraBytes){offset=j<<2;block=s[i];if(extraBytes>0){array[offset]=block&0xFF;}if(extraBytes>1){array[offset+1]=block>>8&0xFF;}if(extraBytes>2){array[offset+2]=block>>16&0xFF;}}return array;};var f=function f(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1];}};if(COMMON_JS){module.exports=methods;}else{for(var i=0;i<methodNames.length;++i){root[methodNames[i]]=methods[methodNames[i]];}}})();

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"_process":1221}],278:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var __extends=void 0&&(void 0).__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];}result["default"]=mod;return result;};Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("../constants");var errors=__importStar(require("../errors"));var address_1=require("./address");var bignumber_1=require("./bignumber");var bytes_1=require("./bytes");var utf8_1=require("./utf8");var properties_1=require("./properties");var paramTypeBytes=new RegExp(/^bytes([0-9]*)$/);var paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);var paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);exports.defaultCoerceFunc=function(type,value){var match=type.match(paramTypeNumber);if(match&&parseInt(match[2])<=48){return value.toNumber();}return value;};var regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var regexIdentifier=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function verifyType(type){if(type.match(/^uint($|[^1-9])/)){type='uint256'+type.substring(4);}else if(type.match(/^int($|[^1-9])/)){type='int256'+type.substring(3);}return type;}function parseParam(param,allowIndexed){var originalParam=param;function throwError(i){throw new Error('unexpected character "'+originalParam[i]+'" at position '+i+' in "'+originalParam+'"');}param=param.replace(/\s/g,' ');var parent={type:'',name:'',state:{allowType:true}};var node=parent;for(var i=0;i<param.length;i++){var c=param[i];switch(c){case'(':if(!node.state.allowParams){throwError(i);}node.state.allowType=false;node.type=verifyType(node.type);node.components=[{type:'',name:'',parent:node,state:{allowType:true}}];node=node.components[0];break;case')':delete node.state;if(allowIndexed&&node.name==='indexed'){node.indexed=true;node.name='';}node.type=verifyType(node.type);var child=node;node=node.parent;if(!node){throwError(i);}delete child.parent;node.state.allowParams=false;node.state.allowName=true;node.state.allowArray=true;break;case',':delete node.state;if(allowIndexed&&node.name==='indexed'){node.indexed=true;node.name='';}node.type=verifyType(node.type);var sibling={type:'',name:'',parent:node.parent,state:{allowType:true}};node.parent.components.push(sibling);delete node.parent;node=sibling;break;case' ':if(node.state.allowType){if(node.type!==''){node.type=verifyType(node.type);delete node.state.allowType;node.state.allowName=true;node.state.allowParams=true;}}if(node.state.allowName){if(node.name!==''){if(allowIndexed&&node.name==='indexed'){node.indexed=true;node.name='';}else{node.state.allowName=false;}}}break;case'[':if(!node.state.allowArray){throwError(i);}node.type+=c;node.state.allowArray=false;node.state.allowName=false;node.state.readArray=true;break;case']':if(!node.state.readArray){throwError(i);}node.type+=c;node.state.readArray=false;node.state.allowArray=true;node.state.allowName=true;break;default:if(node.state.allowType){node.type+=c;node.state.allowParams=true;node.state.allowArray=true;}else if(node.state.allowName){node.name+=c;delete node.state.allowArray;}else if(node.state.readArray){node.type+=c;}else{throwError(i);}}}if(node.parent){throw new Error("unexpected eof");}delete parent.state;if(allowIndexed&&node.name==='indexed'){node.indexed=true;node.name='';}parent.type=verifyType(parent.type);return parent;}function parseSignatureEvent(fragment){var abi={anonymous:false,inputs:[],name:'',type:'event'};var match=fragment.match(regexParen);if(!match){throw new Error('invalid event: '+fragment);}abi.name=match[1].trim();splitNesting(match[2]).forEach(function(param){param=parseParam(param,true);param.indexed=!!param.indexed;abi.inputs.push(param);});match[3].split(' ').forEach(function(modifier){switch(modifier){case'anonymous':abi.anonymous=true;break;case'':break;default:errors.info('unknown modifier: '+modifier);}});if(abi.name&&!abi.name.match(regexIdentifier)){throw new Error('invalid identifier: "'+abi.name+'"');}return abi;}function parseSignatureFunction(fragment){var abi={constant:false,gas:null,inputs:[],name:'',outputs:[],payable:false,stateMutability:null,type:'function'};var comps=fragment.split('@');if(comps.length!==1){if(comps.length>2){throw new Error('invalid signature');}if(!comps[1].match(/^[0-9]+$/)){throw new Error('invalid signature gas');}abi.gas=bignumber_1.bigNumberify(comps[1]);fragment=comps[0];}comps=fragment.split(' returns ');var left=comps[0].match(regexParen);if(!left){throw new Error('invalid signature');}abi.name=left[1].trim();if(!abi.name.match(regexIdentifier)){throw new Error('invalid identifier: "'+left[1]+'"');}splitNesting(left[2]).forEach(function(param){abi.inputs.push(parseParam(param));});left[3].split(' ').forEach(function(modifier){switch(modifier){case'constant':abi.constant=true;break;case'payable':abi.payable=true;abi.stateMutability='payable';break;case'pure':abi.constant=true;abi.stateMutability='pure';break;case'view':abi.constant=true;abi.stateMutability='view';break;case'external':case'public':case'':break;default:errors.info('unknown modifier: '+modifier);}});if(comps.length>1){var right=comps[1].match(regexParen);if(right[1].trim()!=''||right[3].trim()!=''){throw new Error('unexpected tokens');}splitNesting(right[2]).forEach(function(param){abi.outputs.push(parseParam(param));});}if(abi.name==='constructor'){abi.type="constructor";if(abi.outputs.length){throw new Error('constructor may not have outputs');}delete abi.name;delete abi.outputs;}return abi;}function parseParamType(type){return parseParam(type,true);}exports.parseParamType=parseParamType;function formatParamType(paramType){return getParamCoder(exports.defaultCoerceFunc,paramType).type;}exports.formatParamType=formatParamType;function formatSignature(fragment){return fragment.name+'('+fragment.inputs.map(function(i){return formatParamType(i);}).join(',')+')';}exports.formatSignature=formatSignature;function parseSignature(fragment){if(typeof fragment==='string'){fragment=fragment.replace(/\s/g,' ');fragment=fragment.replace(/\(/g,' (').replace(/\)/g,') ').replace(/\s+/g,' ');fragment=fragment.trim();if(fragment.substring(0,6)==='event '){return parseSignatureEvent(fragment.substring(6).trim());}else{if(fragment.substring(0,9)==='function '){fragment=fragment.substring(9);}return parseSignatureFunction(fragment.trim());}}throw new Error('unknown signature');}exports.parseSignature=parseSignature;var Coder=function(){function Coder(coerceFunc,name,type,localName,dynamic){this.coerceFunc=coerceFunc;this.name=name;this.type=type;this.localName=localName;this.dynamic=dynamic;}return Coder;}();var CoderAnonymous=function(_super){__extends(CoderAnonymous,_super);function CoderAnonymous(coder){var _this=_super.call(this,coder.coerceFunc,coder.name,coder.type,undefined,coder.dynamic)||this;properties_1.defineReadOnly(_this,'coder',coder);return _this;}CoderAnonymous.prototype.encode=function(value){return this.coder.encode(value);};CoderAnonymous.prototype.decode=function(data,offset){return this.coder.decode(data,offset);};return CoderAnonymous;}(Coder);var CoderNull=function(_super){__extends(CoderNull,_super);function CoderNull(coerceFunc,localName){return _super.call(this,coerceFunc,'null','',localName,false)||this;}CoderNull.prototype.encode=function(value){return bytes_1.arrayify([]);};CoderNull.prototype.decode=function(data,offset){if(offset>data.length){throw new Error('invalid null');}return{consumed:0,value:this.coerceFunc('null',undefined)};};return CoderNull;}(Coder);var CoderNumber=function(_super){__extends(CoderNumber,_super);function CoderNumber(coerceFunc,size,signed,localName){var _this=this;var name=(signed?'int':'uint')+size*8;_this=_super.call(this,coerceFunc,name,name,localName,false)||this;_this.size=size;_this.signed=signed;return _this;}CoderNumber.prototype.encode=function(value){try{var v=bignumber_1.bigNumberify(value);if(this.signed){var bounds=constants_1.MaxUint256.maskn(this.size*8-1);if(v.gt(bounds)){throw new Error('out-of-bounds');}bounds=bounds.add(constants_1.One).mul(constants_1.NegativeOne);if(v.lt(bounds)){throw new Error('out-of-bounds');}}else if(v.lt(constants_1.Zero)||v.gt(constants_1.MaxUint256.maskn(this.size*8))){throw new Error('out-of-bounds');}v=v.toTwos(this.size*8).maskn(this.size*8);if(this.signed){v=v.fromTwos(this.size*8).toTwos(256);}return bytes_1.padZeros(bytes_1.arrayify(v),32);}catch(error){errors.throwError('invalid number value',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:value});}return null;};CoderNumber.prototype.decode=function(data,offset){if(data.length<offset+32){errors.throwError('insufficient data for '+this.name+' type',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:bytes_1.hexlify(data.slice(offset,offset+32))});}var junkLength=32-this.size;var value=bignumber_1.bigNumberify(data.slice(offset+junkLength,offset+32));if(this.signed){value=value.fromTwos(this.size*8);}else{value=value.maskn(this.size*8);}return{consumed:32,value:this.coerceFunc(this.name,value)};};return CoderNumber;}(Coder);var uint256Coder=new CoderNumber(function(type,value){return value;},32,false,'none');var CoderBoolean=function(_super){__extends(CoderBoolean,_super);function CoderBoolean(coerceFunc,localName){return _super.call(this,coerceFunc,'bool','bool',localName,false)||this;}CoderBoolean.prototype.encode=function(value){return uint256Coder.encode(!!value?1:0);};CoderBoolean.prototype.decode=function(data,offset){try{var result=uint256Coder.decode(data,offset);}catch(error){if(error.reason==='insufficient data for uint256 type'){errors.throwError('insufficient data for boolean type',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'boolean',value:error.value});}throw error;}return{consumed:result.consumed,value:this.coerceFunc('bool',!result.value.isZero())};};return CoderBoolean;}(Coder);var CoderFixedBytes=function(_super){__extends(CoderFixedBytes,_super);function CoderFixedBytes(coerceFunc,length,localName){var _this=this;var name='bytes'+length;_this=_super.call(this,coerceFunc,name,name,localName,false)||this;_this.length=length;return _this;}CoderFixedBytes.prototype.encode=function(value){var result=new Uint8Array(32);try{var data=bytes_1.arrayify(value);if(data.length!==this.length){throw new Error('incorrect data length');}result.set(data);}catch(error){errors.throwError('invalid '+this.name+' value',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:error.value||value});}return result;};CoderFixedBytes.prototype.decode=function(data,offset){if(data.length<offset+32){errors.throwError('insufficient data for '+this.name+' type',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:bytes_1.hexlify(data.slice(offset,offset+32))});}return{consumed:32,value:this.coerceFunc(this.name,bytes_1.hexlify(data.slice(offset,offset+this.length)))};};return CoderFixedBytes;}(Coder);var CoderAddress=function(_super){__extends(CoderAddress,_super);function CoderAddress(coerceFunc,localName){return _super.call(this,coerceFunc,'address','address',localName,false)||this;}CoderAddress.prototype.encode=function(value){var result=new Uint8Array(32);try{result.set(bytes_1.arrayify(address_1.getAddress(value)),12);}catch(error){errors.throwError('invalid address',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'address',value:value});}return result;};CoderAddress.prototype.decode=function(data,offset){if(data.length<offset+32){errors.throwError('insufficuent data for address type',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'address',value:bytes_1.hexlify(data.slice(offset,offset+32))});}return{consumed:32,value:this.coerceFunc('address',address_1.getAddress(bytes_1.hexlify(data.slice(offset+12,offset+32))))};};return CoderAddress;}(Coder);function _encodeDynamicBytes(value){var dataLength=32*Math.ceil(value.length/32);var padding=new Uint8Array(dataLength-value.length);return bytes_1.concat([uint256Coder.encode(value.length),value,padding]);}function _decodeDynamicBytes(data,offset,localName){if(data.length<offset+32){errors.throwError('insufficient data for dynamicBytes length',errors.INVALID_ARGUMENT,{arg:localName,coderType:'dynamicBytes',value:bytes_1.hexlify(data.slice(offset,offset+32))});}var length=uint256Coder.decode(data,offset).value;try{length=length.toNumber();}catch(error){errors.throwError('dynamic bytes count too large',errors.INVALID_ARGUMENT,{arg:localName,coderType:'dynamicBytes',value:length.toString()});}if(data.length<offset+32+length){errors.throwError('insufficient data for dynamicBytes type',errors.INVALID_ARGUMENT,{arg:localName,coderType:'dynamicBytes',value:bytes_1.hexlify(data.slice(offset,offset+32+length))});}return{consumed:32+32*Math.ceil(length/32),value:data.slice(offset+32,offset+32+length)};}var CoderDynamicBytes=function(_super){__extends(CoderDynamicBytes,_super);function CoderDynamicBytes(coerceFunc,localName){return _super.call(this,coerceFunc,'bytes','bytes',localName,true)||this;}CoderDynamicBytes.prototype.encode=function(value){try{return _encodeDynamicBytes(bytes_1.arrayify(value));}catch(error){errors.throwError('invalid bytes value',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'bytes',value:error.value});}return null;};CoderDynamicBytes.prototype.decode=function(data,offset){var result=_decodeDynamicBytes(data,offset,this.localName);result.value=this.coerceFunc('bytes',bytes_1.hexlify(result.value));return result;};return CoderDynamicBytes;}(Coder);var CoderString=function(_super){__extends(CoderString,_super);function CoderString(coerceFunc,localName){return _super.call(this,coerceFunc,'string','string',localName,true)||this;}CoderString.prototype.encode=function(value){if(typeof value!=='string'){errors.throwError('invalid string value',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'string',value:value});}return _encodeDynamicBytes(utf8_1.toUtf8Bytes(value));};CoderString.prototype.decode=function(data,offset){var result=_decodeDynamicBytes(data,offset,this.localName);result.value=this.coerceFunc('string',utf8_1.toUtf8String(result.value));return result;};return CoderString;}(Coder);function alignSize(size){return 32*Math.ceil(size/32);}function pack(coders,values){if(Array.isArray(values)){}else if(values&&(0,_typeof2["default"])(values)==='object'){var arrayValues=[];coders.forEach(function(coder){arrayValues.push(values[coder.localName]);});values=arrayValues;}else{errors.throwError('invalid tuple value',errors.INVALID_ARGUMENT,{coderType:'tuple',value:values});}if(coders.length!==values.length){errors.throwError('types/value length mismatch',errors.INVALID_ARGUMENT,{coderType:'tuple',value:values});}var parts=[];coders.forEach(function(coder,index){parts.push({dynamic:coder.dynamic,value:coder.encode(values[index])});});var staticSize=0,dynamicSize=0;parts.forEach(function(part){if(part.dynamic){staticSize+=32;dynamicSize+=alignSize(part.value.length);}else{staticSize+=alignSize(part.value.length);}});var offset=0,dynamicOffset=staticSize;var data=new Uint8Array(staticSize+dynamicSize);parts.forEach(function(part){if(part.dynamic){data.set(uint256Coder.encode(dynamicOffset),offset);offset+=32;data.set(part.value,dynamicOffset);dynamicOffset+=alignSize(part.value.length);}else{data.set(part.value,offset);offset+=alignSize(part.value.length);}});return data;}function unpack(coders,data,offset){var baseOffset=offset;var consumed=0;var value=[];coders.forEach(function(coder){if(coder.dynamic){var dynamicOffset=uint256Coder.decode(data,offset);var result=coder.decode(data,baseOffset+dynamicOffset.value.toNumber());result.consumed=dynamicOffset.consumed;}else{var result=coder.decode(data,offset);}if(result.value!=undefined){value.push(result.value);}offset+=result.consumed;consumed+=result.consumed;});coders.forEach(function(coder,index){var name=coder.localName;if(!name){return;}if(name==='length'){name='_length';}if(value[name]!=null){return;}value[name]=value[index];});return{value:value,consumed:consumed};}var CoderArray=function(_super){__extends(CoderArray,_super);function CoderArray(coerceFunc,coder,length,localName){var _this=this;var type=coder.type+'['+(length>=0?length:'')+']';var dynamic=length===-1||coder.dynamic;_this=_super.call(this,coerceFunc,'array',type,localName,dynamic)||this;_this.coder=coder;_this.length=length;return _this;}CoderArray.prototype.encode=function(value){if(!Array.isArray(value)){errors.throwError('expected array value',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'array',value:value});}var count=this.length;var result=new Uint8Array(0);if(count===-1){count=value.length;result=uint256Coder.encode(count);}errors.checkArgumentCount(count,value.length,' in coder array'+(this.localName?" "+this.localName:""));var coders=[];for(var i=0;i<value.length;i++){coders.push(this.coder);}return bytes_1.concat([result,pack(coders,value)]);};CoderArray.prototype.decode=function(data,offset){var consumed=0;var count=this.length;if(count===-1){try{var decodedLength=uint256Coder.decode(data,offset);}catch(error){errors.throwError('insufficient data for dynamic array length',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'array',value:error.value});}try{count=decodedLength.value.toNumber();}catch(error){errors.throwError('array count too large',errors.INVALID_ARGUMENT,{arg:this.localName,coderType:'array',value:decodedLength.value.toString()});}consumed+=decodedLength.consumed;offset+=decodedLength.consumed;}var coders=[];for(var i=0;i<count;i++){coders.push(new CoderAnonymous(this.coder));}var result=unpack(coders,data,offset);result.consumed+=consumed;result.value=this.coerceFunc(this.type,result.value);return result;};return CoderArray;}(Coder);var CoderTuple=function(_super){__extends(CoderTuple,_super);function CoderTuple(coerceFunc,coders,localName){var _this=this;var dynamic=false;var types=[];coders.forEach(function(coder){if(coder.dynamic){dynamic=true;}types.push(coder.type);});var type='tuple('+types.join(',')+')';_this=_super.call(this,coerceFunc,'tuple',type,localName,dynamic)||this;_this.coders=coders;return _this;}CoderTuple.prototype.encode=function(value){return pack(this.coders,value);};CoderTuple.prototype.decode=function(data,offset){var result=unpack(this.coders,data,offset);result.value=this.coerceFunc(this.type,result.value);return result;};return CoderTuple;}(Coder);function splitNesting(value){value=value.trim();var result=[];var accum='';var depth=0;for(var offset=0;offset<value.length;offset++){var c=value[offset];if(c===','&&depth===0){result.push(accum);accum='';}else{accum+=c;if(c==='('){depth++;}else if(c===')'){depth--;if(depth===-1){throw new Error('unbalanced parenthsis');}}}}if(accum){result.push(accum);}return result;}var paramTypeSimple={address:CoderAddress,bool:CoderBoolean,string:CoderString,bytes:CoderDynamicBytes};function getTupleParamCoder(coerceFunc,components,localName){if(!components){components=[];}var coders=[];components.forEach(function(component){coders.push(getParamCoder(coerceFunc,component));});return new CoderTuple(coerceFunc,coders,localName);}function getParamCoder(coerceFunc,param){var coder=paramTypeSimple[param.type];if(coder){return new coder(coerceFunc,param.name);}var match=param.type.match(paramTypeNumber);if(match){var size=parseInt(match[2]||"256");if(size===0||size>256||size%8!==0){errors.throwError('invalid '+match[1]+' bit length',errors.INVALID_ARGUMENT,{arg:'param',value:param});}return new CoderNumber(coerceFunc,size/8,match[1]==='int',param.name);}var match=param.type.match(paramTypeBytes);if(match){var size=parseInt(match[1]);if(size===0||size>32){errors.throwError('invalid bytes length',errors.INVALID_ARGUMENT,{arg:'param',value:param});}return new CoderFixedBytes(coerceFunc,size,param.name);}var match=param.type.match(paramTypeArray);if(match){var size=parseInt(match[2]||"-1");param=properties_1.shallowCopy(param);param.type=match[1];param=properties_1.deepCopy(param);return new CoderArray(coerceFunc,getParamCoder(coerceFunc,param),size,param.name);}if(param.type.substring(0,5)==='tuple'){return getTupleParamCoder(coerceFunc,param.components,param.name);}if(param.type===''){return new CoderNull(coerceFunc,param.name);}errors.throwError('invalid type',errors.INVALID_ARGUMENT,{arg:'type',value:param.type});return null;}var AbiCoder=function(){function AbiCoder(coerceFunc){errors.checkNew(this,AbiCoder);if(!coerceFunc){coerceFunc=exports.defaultCoerceFunc;}properties_1.defineReadOnly(this,'coerceFunc',coerceFunc);}AbiCoder.prototype.encode=function(types,values){if(types.length!==values.length){errors.throwError('types/values length mismatch',errors.INVALID_ARGUMENT,{count:{types:types.length,values:values.length},value:{types:types,values:values}});}var coders=[];types.forEach(function(type){var typeObject=null;if(typeof type==='string'){typeObject=parseParam(type);}else{typeObject=type;}coders.push(getParamCoder(this.coerceFunc,typeObject));},this);return bytes_1.hexlify(new CoderTuple(this.coerceFunc,coders,'_').encode(values));};AbiCoder.prototype.decode=function(types,data){var coders=[];types.forEach(function(type){var typeObject=null;if(typeof type==='string'){typeObject=parseParam(type);}else{typeObject=properties_1.deepCopy(type);}coders.push(getParamCoder(this.coerceFunc,typeObject));},this);return new CoderTuple(this.coerceFunc,coders,'_').decode(bytes_1.arrayify(data),0).value;};return AbiCoder;}();exports.AbiCoder=AbiCoder;exports.defaultAbiCoder=new AbiCoder();

},{"../constants":275,"../errors":276,"./address":279,"./bignumber":280,"./bytes":281,"./properties":283,"./utf8":285,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],285:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var constants_1=require("../constants");var errors_1=require("../errors");var bytes_1=require("./bytes");var UnicodeNormalizationForm;(function(UnicodeNormalizationForm){UnicodeNormalizationForm["current"]="";UnicodeNormalizationForm["NFC"]="NFC";UnicodeNormalizationForm["NFD"]="NFD";UnicodeNormalizationForm["NFKC"]="NFKC";UnicodeNormalizationForm["NFKD"]="NFKD";})(UnicodeNormalizationForm=exports.UnicodeNormalizationForm||(exports.UnicodeNormalizationForm={}));;function toUtf8Bytes(str,form){if(form===void 0){form=UnicodeNormalizationForm.current;}if(form!=UnicodeNormalizationForm.current){errors_1.checkNormalize();str=str.normalize(form);}var result=[];for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<0x80){result.push(c);}else if(c<0x800){result.push(c>>6|0xc0);result.push(c&0x3f|0x80);}else if((c&0xfc00)==0xd800){i++;var c2=str.charCodeAt(i);if(i>=str.length||(c2&0xfc00)!==0xdc00){throw new Error('invalid utf-8 string');}c=0x10000+((c&0x03ff)<<10)+(c2&0x03ff);result.push(c>>18|0xf0);result.push(c>>12&0x3f|0x80);result.push(c>>6&0x3f|0x80);result.push(c&0x3f|0x80);}else{result.push(c>>12|0xe0);result.push(c>>6&0x3f|0x80);result.push(c&0x3f|0x80);}}return bytes_1.arrayify(result);}exports.toUtf8Bytes=toUtf8Bytes;;function toUtf8String(bytes,ignoreErrors){bytes=bytes_1.arrayify(bytes);var result='';var i=0;while(i<bytes.length){var c=bytes[i++];if(c>>7===0){result+=String.fromCharCode(c);continue;}var extraLength=null;var overlongMask=null;if((c&0xe0)===0xc0){extraLength=1;overlongMask=0x7f;}else if((c&0xf0)===0xe0){extraLength=2;overlongMask=0x7ff;}else if((c&0xf8)===0xf0){extraLength=3;overlongMask=0xffff;}else{if(!ignoreErrors){if((c&0xc0)===0x80){throw new Error('invalid utf8 byte sequence; unexpected continuation byte');}throw new Error('invalid utf8 byte sequence; invalid prefix');}continue;}if(i+extraLength>bytes.length){if(!ignoreErrors){throw new Error('invalid utf8 byte sequence; too short');}for(;i<bytes.length;i++){if(bytes[i]>>6!==0x02){break;}}continue;}var res=c&(1<<8-extraLength-1)-1;for(var j=0;j<extraLength;j++){var nextChar=bytes[i];if((nextChar&0xc0)!=0x80){res=null;break;};res=res<<6|nextChar&0x3f;i++;}if(res===null){if(!ignoreErrors){throw new Error('invalid utf8 byte sequence; invalid continuation byte');}continue;}if(res<=overlongMask){if(!ignoreErrors){throw new Error('invalid utf8 byte sequence; overlong');}continue;}if(res>0x10ffff){if(!ignoreErrors){throw new Error('invalid utf8 byte sequence; out-of-range');}continue;}if(res>=0xd800&&res<=0xdfff){if(!ignoreErrors){throw new Error('invalid utf8 byte sequence; utf-16 surrogate');}continue;}if(res<=0xffff){result+=String.fromCharCode(res);continue;}res-=0x10000;result+=String.fromCharCode((res>>10&0x3ff)+0xd800,(res&0x3ff)+0xdc00);}return result;}exports.toUtf8String=toUtf8String;function formatBytes32String(text){var bytes=toUtf8Bytes(text);if(bytes.length>31){throw new Error('bytes32 string must be less than 32 bytes');}return bytes_1.hexlify(bytes_1.concat([bytes,constants_1.HashZero]).slice(0,32));}/* common-shake removed: exports.formatBytes32String = */ void formatBytes32String;function parseBytes32String(bytes){var data=bytes_1.arrayify(bytes);if(data.length!==32){throw new Error('invalid bytes32 - not 32 bytes long');}if(data[31]!==0){throw new Error('invalid bytes32 string - no null terminator');}var length=31;while(data[length-1]===0){length--;}return toUtf8String(data.slice(0,length));}/* common-shake removed: exports.parseBytes32String = */ void parseBytes32String;

},{"../constants":275,"../errors":276,"./bytes":281}],281:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];}result["default"]=mod;return result;};Object.defineProperty(exports,"__esModule",{value:true});var errors=__importStar(require("../errors"));function isHexable(value){return!!value.toHexString;}/* common-shake removed: exports.isHexable = */ void isHexable;function addSlice(array){if(array.slice){return array;}array.slice=function(){var args=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(array,args)));};return array;}function isArrayish(value){if(!value||parseInt(String(value.length))!=value.length||typeof value==='string'){return false;}for(var i=0;i<value.length;i++){var v=value[i];if(v<0||v>=256||parseInt(String(v))!=v){return false;}}return true;}exports.isArrayish=isArrayish;function arrayify(value){if(value==null){errors.throwError('cannot convert null value to array',errors.INVALID_ARGUMENT,{arg:'value',value:value});}if(isHexable(value)){value=value.toHexString();}if(typeof value==='string'){var match=value.match(/^(0x)?[0-9a-fA-F]*$/);if(!match){errors.throwError('invalid hexidecimal string',errors.INVALID_ARGUMENT,{arg:'value',value:value});}if(match[1]!=='0x'){errors.throwError('hex string must have 0x prefix',errors.INVALID_ARGUMENT,{arg:'value',value:value});}value=value.substring(2);if(value.length%2){value='0'+value;}var result=[];for(var i=0;i<value.length;i+=2){result.push(parseInt(value.substr(i,2),16));}return addSlice(new Uint8Array(result));}if(isArrayish(value)){return addSlice(new Uint8Array(value));}errors.throwError('invalid arrayify value',null,{arg:'value',value:value,type:(0,_typeof2["default"])(value)});return null;}exports.arrayify=arrayify;function concat(objects){var arrays=[];var length=0;for(var i=0;i<objects.length;i++){var object=arrayify(objects[i]);arrays.push(object);length+=object.length;}var result=new Uint8Array(length);var offset=0;for(var i=0;i<arrays.length;i++){result.set(arrays[i],offset);offset+=arrays[i].length;}return addSlice(result);}exports.concat=concat;function stripZeros(value){var result=arrayify(value);if(result.length===0){return result;}var start=0;while(result[start]===0){start++;}if(start){result=result.slice(start);}return result;}exports.stripZeros=stripZeros;function padZeros(value,length){value=arrayify(value);if(length<value.length){throw new Error('cannot pad');}var result=new Uint8Array(length);result.set(value,length-value.length);return addSlice(result);}exports.padZeros=padZeros;function isHexString(value,length){if(typeof value!=='string'||!value.match(/^0x[0-9A-Fa-f]*$/)){return false;}if(length&&value.length!==2+2*length){return false;}return true;}exports.isHexString=isHexString;var HexCharacters='0123456789abcdef';function hexlify(value){if(isHexable(value)){return value.toHexString();}if(typeof value==='number'){if(value<0){errors.throwError('cannot hexlify negative value',errors.INVALID_ARGUMENT,{arg:'value',value:value});}if(value>=9007199254740991){errors.throwError("out-of-range",errors.NUMERIC_FAULT,{operartion:"hexlify",fault:"out-of-safe-range"});}var hex='';while(value){hex=HexCharacters[value&0x0f]+hex;value=Math.floor(value/16);}if(hex.length){if(hex.length%2){hex='0'+hex;}return'0x'+hex;}return'0x00';}if(typeof value==='string'){var match=value.match(/^(0x)?[0-9a-fA-F]*$/);if(!match){errors.throwError('invalid hexidecimal string',errors.INVALID_ARGUMENT,{arg:'value',value:value});}if(match[1]!=='0x'){errors.throwError('hex string must have 0x prefix',errors.INVALID_ARGUMENT,{arg:'value',value:value});}if(value.length%2){value='0x0'+value.substring(2);}return value;}if(isArrayish(value)){var result=[];for(var i=0;i<value.length;i++){var v=value[i];result.push(HexCharacters[(v&0xf0)>>4]+HexCharacters[v&0x0f]);}return'0x'+result.join('');}errors.throwError('invalid hexlify value',null,{arg:'value',value:value});return'never';}exports.hexlify=hexlify;function hexDataLength(data){if(!isHexString(data)||data.length%2!==0){return null;}return(data.length-2)/2;}/* common-shake removed: exports.hexDataLength = */ void hexDataLength;function hexDataSlice(data,offset,endOffset){if(!isHexString(data)){errors.throwError('invalid hex data',errors.INVALID_ARGUMENT,{arg:'value',value:data});}if(data.length%2!==0){errors.throwError('hex data length must be even',errors.INVALID_ARGUMENT,{arg:'value',value:data});}offset=2+2*offset;if(endOffset!=null){return'0x'+data.substring(offset,2+2*endOffset);}return'0x'+data.substring(offset);}/* common-shake removed: exports.hexDataSlice = */ void hexDataSlice;function hexStripZeros(value){if(!isHexString(value)){errors.throwError('invalid hex string',errors.INVALID_ARGUMENT,{arg:'value',value:value});}while(value.length>3&&value.substring(0,3)==='0x0'){value='0x'+value.substring(3);}return value;}/* common-shake removed: exports.hexStripZeros = */ void hexStripZeros;function hexZeroPad(value,length){if(!isHexString(value)){errors.throwError('invalid hex string',errors.INVALID_ARGUMENT,{arg:'value',value:value});}while(value.length<2*length+2){value='0x0'+value.substring(2);}return value;}/* common-shake removed: exports.hexZeroPad = */ void hexZeroPad;function isSignature(value){return value&&value.r!=null&&value.s!=null;}function splitSignature(signature){var v=0;var r='0x',s='0x';if(isSignature(signature)){if(signature.v==null&&signature.recoveryParam==null){errors.throwError('at least on of recoveryParam or v must be specified',errors.INVALID_ARGUMENT,{argument:'signature',value:signature});}r=hexZeroPad(signature.r,32);s=hexZeroPad(signature.s,32);v=signature.v;if(typeof v==='string'){v=parseInt(v,16);}var recoveryParam=signature.recoveryParam;if(recoveryParam==null&&signature.v!=null){recoveryParam=1-v%2;}v=27+recoveryParam;}else{var bytes=arrayify(signature);if(bytes.length!==65){throw new Error('invalid signature');}r=hexlify(bytes.slice(0,32));s=hexlify(bytes.slice(32,64));v=bytes[64];if(v!==27&&v!==28){v=27+v%2;}}return{r:r,s:s,recoveryParam:v-27,v:v};}/* common-shake removed: exports.splitSignature = */ void splitSignature;function joinSignature(signature){signature=splitSignature(signature);return hexlify(concat([signature.r,signature.s,signature.recoveryParam?'0x1c':'0x1b']));}/* common-shake removed: exports.joinSignature = */ void joinSignature;

},{"../errors":276,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],283:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];}result["default"]=mod;return result;};Object.defineProperty(exports,"__esModule",{value:true});var errors=__importStar(require("../errors"));function defineReadOnly(object,name,value){Object.defineProperty(object,name,{enumerable:true,value:value,writable:false});}exports.defineReadOnly=defineReadOnly;function setType(object,type){Object.defineProperty(object,'_ethersType',{configurable:false,value:type,writable:false});}exports.setType=setType;function isType(object,type){return object&&object._ethersType===type;}exports.isType=isType;function resolveProperties(object){var result={};var promises=[];Object.keys(object).forEach(function(key){var value=object[key];if(value instanceof Promise){promises.push(value.then(function(value){result[key]=value;return null;}));}else{result[key]=value;}});return Promise.all(promises).then(function(){return result;});}/* common-shake removed: exports.resolveProperties = */ void resolveProperties;function checkProperties(object,properties){if(!object||(0,_typeof2["default"])(object)!=='object'){errors.throwError('invalid object',errors.INVALID_ARGUMENT,{argument:'object',value:object});}Object.keys(object).forEach(function(key){if(!properties[key]){errors.throwError('invalid object key - '+key,errors.INVALID_ARGUMENT,{argument:'transaction',value:object,key:key});}});}/* common-shake removed: exports.checkProperties = */ void checkProperties;function shallowCopy(object){var result={};for(var key in object){result[key]=object[key];}return result;}exports.shallowCopy=shallowCopy;var opaque={"boolean":true,number:true,string:true};function deepCopy(object,frozen){if(object===undefined||object===null||opaque[(0,_typeof2["default"])(object)]){return object;}if(Array.isArray(object)){var result=object.map(function(item){return deepCopy(item,frozen);});if(frozen){Object.freeze(result);}return result;}if((0,_typeof2["default"])(object)==='object'){if(isType(object,'BigNumber')){return object;}if(isType(object,'Description')){return object;}if(isType(object,'Indexed')){return object;}var result={};for(var key in object){var value=object[key];if(value===undefined){continue;}defineReadOnly(result,key,deepCopy(value,frozen));}if(frozen){Object.freeze(result);}return result;}if(typeof object==='function'){return object;}throw new Error('Cannot deepCopy '+(0,_typeof2["default"])(object));}exports.deepCopy=deepCopy;function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});}function inheritable(parent){return function(child){inherits(child,parent);defineReadOnly(child,'inherits',inheritable(child));};}/* common-shake removed: exports.inheritable = */ void inheritable;

},{"../errors":276,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],279:[function(require,module,exports){
'use strict';var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(exports,"__esModule",{value:true});var bn_js_1=__importDefault(require("bn.js"));var bytes_1=require("./bytes");var keccak256_1=require("./keccak256");var rlp_1=require("./rlp");var errors=require("../errors");function getChecksumAddress(address){if(typeof address!=='string'||!address.match(/^0x[0-9A-Fa-f]{40}$/)){errors.throwError('invalid address',errors.INVALID_ARGUMENT,{arg:'address',value:address});}address=address.toLowerCase();var chars=address.substring(2).split('');var hashed=new Uint8Array(40);for(var i_1=0;i_1<40;i_1++){hashed[i_1]=chars[i_1].charCodeAt(0);}hashed=bytes_1.arrayify(keccak256_1.keccak256(hashed));for(var i=0;i<40;i+=2){if(hashed[i>>1]>>4>=8){chars[i]=chars[i].toUpperCase();}if((hashed[i>>1]&0x0f)>=8){chars[i+1]=chars[i+1].toUpperCase();}}return'0x'+chars.join('');}var MAX_SAFE_INTEGER=0x1fffffffffffff;function log10(x){if(Math.log10){return Math.log10(x);}return Math.log(x)/Math.LN10;}var ibanLookup={};for(var i=0;i<10;i++){ibanLookup[String(i)]=String(i);}for(var i=0;i<26;i++){ibanLookup[String.fromCharCode(65+i)]=String(10+i);}var safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(address){address=address.toUpperCase();address=address.substring(4)+address.substring(0,2)+'00';var expanded='';address.split('').forEach(function(c){expanded+=ibanLookup[c];});while(expanded.length>=safeDigits){var block=expanded.substring(0,safeDigits);expanded=parseInt(block,10)%97+expanded.substring(block.length);}var checksum=String(98-parseInt(expanded,10)%97);while(checksum.length<2){checksum='0'+checksum;}return checksum;};function getAddress(address){var result=null;if(typeof address!=='string'){errors.throwError('invalid address',errors.INVALID_ARGUMENT,{arg:'address',value:address});}if(address.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(address.substring(0,2)!=='0x'){address='0x'+address;}result=getChecksumAddress(address);if(address.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&result!==address){errors.throwError('bad address checksum',errors.INVALID_ARGUMENT,{arg:'address',value:address});}}else if(address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){if(address.substring(2,4)!==ibanChecksum(address)){errors.throwError('bad icap checksum',errors.INVALID_ARGUMENT,{arg:'address',value:address});}result=new bn_js_1["default"].BN(address.substring(4),36).toString(16);while(result.length<40){result='0'+result;}result=getChecksumAddress('0x'+result);}else{errors.throwError('invalid address',errors.INVALID_ARGUMENT,{arg:'address',value:address});}return result;}exports.getAddress=getAddress;function getIcapAddress(address){var base36=new bn_js_1["default"].BN(getAddress(address).substring(2),16).toString(36).toUpperCase();while(base36.length<30){base36='0'+base36;}return'XE'+ibanChecksum('XE00'+base36)+base36;}/* common-shake removed: exports.getIcapAddress = */ void getIcapAddress;function getContractAddress(transaction){if(!transaction.from){throw new Error('missing from address');}var nonce=transaction.nonce;return getAddress('0x'+keccak256_1.keccak256(rlp_1.encode([getAddress(transaction.from),bytes_1.stripZeros(bytes_1.hexlify(nonce))])).substring(26));}/* common-shake removed: exports.getContractAddress = */ void getContractAddress;

},{"../errors":276,"./bytes":281,"./keccak256":282,"./rlp":284,"bn.js":132}],284:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var bytes_1=require("./bytes");function arrayifyInteger(value){var result=[];while(value){result.unshift(value&0xff);value>>=8;}return result;}function unarrayifyInteger(data,offset,length){var result=0;for(var i=0;i<length;i++){result=result*256+data[offset+i];}return result;}function _encode(object){if(Array.isArray(object)){var payload=[];object.forEach(function(child){payload=payload.concat(_encode(child));});if(payload.length<=55){payload.unshift(0xc0+payload.length);return payload;}var length=arrayifyInteger(payload.length);length.unshift(0xf7+length.length);return length.concat(payload);}var data=Array.prototype.slice.call(bytes_1.arrayify(object));if(data.length===1&&data[0]<=0x7f){return data;}else if(data.length<=55){data.unshift(0x80+data.length);return data;}var length=arrayifyInteger(data.length);length.unshift(0xb7+length.length);return length.concat(data);}function encode(object){return bytes_1.hexlify(_encode(object));}exports.encode=encode;function _decodeChildren(data,offset,childOffset,length){var result=[];while(childOffset<offset+1+length){var decoded=_decode(data,childOffset);result.push(decoded.result);childOffset+=decoded.consumed;if(childOffset>offset+1+length){throw new Error('invalid rlp');}}return{consumed:1+length,result:result};}function _decode(data,offset){if(data.length===0){throw new Error('invalid rlp data');}if(data[offset]>=0xf8){var lengthLength=data[offset]-0xf7;if(offset+1+lengthLength>data.length){throw new Error('too short');}var length=unarrayifyInteger(data,offset+1,lengthLength);if(offset+1+lengthLength+length>data.length){throw new Error('to short');}return _decodeChildren(data,offset,offset+1+lengthLength,lengthLength+length);}else if(data[offset]>=0xc0){var length=data[offset]-0xc0;if(offset+1+length>data.length){throw new Error('invalid rlp data');}return _decodeChildren(data,offset,offset+1,length);}else if(data[offset]>=0xb8){var lengthLength=data[offset]-0xb7;if(offset+1+lengthLength>data.length){throw new Error('invalid rlp data');}var length=unarrayifyInteger(data,offset+1,lengthLength);if(offset+1+lengthLength+length>data.length){throw new Error('invalid rlp data');}var result=bytes_1.hexlify(data.slice(offset+1+lengthLength,offset+1+lengthLength+length));return{consumed:1+lengthLength+length,result:result};}else if(data[offset]>=0x80){var length=data[offset]-0x80;if(offset+1+length>data.length){throw new Error('invalid rlp data');}var result=bytes_1.hexlify(data.slice(offset+1,offset+1+length));return{consumed:1+length,result:result};}return{consumed:1,result:bytes_1.hexlify(data[offset])};}function decode(data){var bytes=bytes_1.arrayify(data);var decoded=_decode(bytes,0);if(decoded.consumed!==bytes.length){throw new Error('invalid rlp data');}return decoded.result;}/* common-shake removed: exports.decode = */ void decode;

},{"./bytes":281}],282:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var sha3=require("js-sha3");var bytes_1=require("./bytes");function keccak256(data){return'0x'+sha3.keccak_256(bytes_1.arrayify(data));}exports.keccak256=keccak256;

},{"./bytes":281,"js-sha3":277}],286:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var BN=require('bn.js');var numberToBN=require('number-to-bn');var zero=new BN(0);var negative1=new BN(-1);var unitMap={'noether':'0','wei':'1','kwei':'1000','Kwei':'1000','babbage':'1000','femtoether':'1000','mwei':'1000000','Mwei':'1000000','lovelace':'1000000','picoether':'1000000','gwei':'1000000000','Gwei':'1000000000','shannon':'1000000000','nanoether':'1000000000','nano':'1000000000','szabo':'1000000000000','microether':'1000000000000','micro':'1000000000000','finney':'1000000000000000','milliether':'1000000000000000','milli':'1000000000000000','ether':'1000000000000000000','kether':'1000000000000000000000','grand':'1000000000000000000000','mether':'1000000000000000000000000','gether':'1000000000000000000000000000','tether':'1000000000000000000000000000000'};function getValueOfUnit(unitInput){var unit=unitInput?unitInput.toLowerCase():'ether';var unitValue=unitMap[unit];if(typeof unitValue!=='string'){throw new Error('[ethjs-unit] the unit provided '+unitInput+' doesn\'t exists, please use the one of the following units '+JSON.stringify(unitMap,null,2));}return new BN(unitValue,10);}function numberToString(arg){if(typeof arg==='string'){if(!arg.match(/^-?[0-9.]+$/)){throw new Error('while converting number to string, invalid number value \''+arg+'\', should be a number matching (^-?[0-9.]+).');}return arg;}else if(typeof arg==='number'){return String(arg);}else if((0,_typeof2["default"])(arg)==='object'&&arg.toString&&(arg.toTwos||arg.dividedToIntegerBy)){if(arg.toPrecision){return String(arg.toPrecision());}else{return arg.toString(10);}}throw new Error('while converting number to string, invalid number value \''+arg+'\' type '+(0,_typeof2["default"])(arg)+'.');}function fromWei(weiInput,unit,optionsInput){var wei=numberToBN(weiInput);var negative=wei.lt(zero);var base=getValueOfUnit(unit);var baseLength=unitMap[unit].length-1||1;var options=optionsInput||{};if(negative){wei=wei.mul(negative1);}var fraction=wei.mod(base).toString(10);while(fraction.length<baseLength){fraction='0'+fraction;}if(!options.pad){fraction=fraction.match(/^([0-9]*[1-9]|0)(0*)/)[1];}var whole=wei.div(base).toString(10);if(options.commify){whole=whole.replace(/\B(?=(\d{3})+(?!\d))/g,',');}var value=''+whole+(fraction=='0'?'':'.'+fraction);if(negative){value='-'+value;}return value;}function toWei(etherInput,unit){var ether=numberToString(etherInput);var base=getValueOfUnit(unit);var baseLength=unitMap[unit].length-1||1;var negative=ether.substring(0,1)==='-';if(negative){ether=ether.substring(1);}if(ether==='.'){throw new Error('[ethjs-unit] while converting number '+etherInput+' to wei, invalid value');}var comps=ether.split('.');if(comps.length>2){throw new Error('[ethjs-unit] while converting number '+etherInput+' to wei,  too many decimal points');}var whole=comps[0],fraction=comps[1];if(!whole){whole='0';}if(!fraction){fraction='0';}if(fraction.length>baseLength){throw new Error('[ethjs-unit] while converting number '+etherInput+' to wei, too many decimal places');}while(fraction.length<baseLength){fraction+='0';}whole=new BN(whole);fraction=new BN(fraction);var wei=whole.mul(base).add(fraction);if(negative){wei=wei.mul(negative1);}return new BN(wei.toString(10),10);}module.exports={unitMap:unitMap,numberToString:numberToString,getValueOfUnit:getValueOfUnit,fromWei:fromWei,toWei:toWei};

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":287,"number-to-bn":498}],498:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var BN=require('bn.js');var stripHexPrefix=require('strip-hex-prefix');module.exports=function numberToBN(arg){if(typeof arg==='string'||typeof arg==='number'){var multiplier=new BN(1);var formattedString=String(arg).toLowerCase().trim();var isHexPrefixed=formattedString.substr(0,2)==='0x'||formattedString.substr(0,3)==='-0x';var stringArg=stripHexPrefix(formattedString);if(stringArg.substr(0,1)==='-'){stringArg=stripHexPrefix(stringArg.slice(1));multiplier=new BN(-1,10);}stringArg=stringArg===''?'0':stringArg;if(!stringArg.match(/^-?[0-9]+$/)&&stringArg.match(/^[0-9A-Fa-f]+$/)||stringArg.match(/^[a-fA-F]+$/)||isHexPrefixed===true&&stringArg.match(/^[0-9A-Fa-f]+$/)){return new BN(stringArg,16).mul(multiplier);}if((stringArg.match(/^-?[0-9]+$/)||stringArg==='')&&isHexPrefixed===false){return new BN(stringArg,10).mul(multiplier);}}else if((0,_typeof2["default"])(arg)==='object'&&arg.toString&&!arg.pop&&!arg.push){if(arg.toString(10).match(/^-?[0-9]+$/)&&(arg.mul||arg.dividedToIntegerBy)){return new BN(arg.toString(10),10);}}throw new Error('[number-to-bn] while converting number '+JSON.stringify(arg)+' to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.');};

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":497,"strip-hex-prefix":659}],287:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(module,exports){'use strict';function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function TempCtor(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;}function BN(number,base,endian){if(BN.isBN(number)){return number;}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==='le'||base==='be'){endian=base;base=10;}this._init(number||0,base||10,endian||'be');}}if((0,_typeof2["default"])(module)==='object'){module.exports=BN;}else{exports.BN=BN;}BN.BN=BN;BN.wordSize=26;var Buffer;try{Buffer=require('buf'+'fer').Buffer;}catch(e){}BN.isBN=function isBN(num){if(num instanceof BN){return true;}return num!==null&&(0,_typeof2["default"])(num)==='object'&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words);};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right;};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right;};BN.prototype._init=function init(number,base,endian){if(typeof number==='number'){return this._initNumber(number,base,endian);}if((0,_typeof2["default"])(number)==='object'){return this._initArray(number,base,endian);}if(base==='hex'){base=16;}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,'');var start=0;if(number[0]==='-'){start++;}if(base===16){this._parseHex(number,start);}else{this._parseBase(number,base,start);}if(number[0]==='-'){this.negative=1;}this.strip();if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number;}if(number<0x4000000){this.words=[number&0x3ffffff];this.length=1;}else if(number<0x10000000000000){this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff];this.length=2;}else{assert(number<0x20000000000000);this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff,1];this.length=3;}if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==='number');if(number.length<=0){this.words=[0];this.length=1;return this;}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}var j,w;var off=0;if(endian==='be'){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}else if(endian==='le'){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}return this.strip();};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54){r|=c-49+0xa;}else if(c>=17&&c<=22){r|=c-17+0xa;}else{r|=c&0xf;}}return r;}BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6){w=parseHex(number,i,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;off+=24;if(off>=26){off-=26;j++;}}if(i+6!==start){w=parseHex(number,start,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;}this.strip();};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+0xa;}else if(c>=17){r+=c-17+0xa;}else{r+=c;}}return r;}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=0x3ffffff;limbPow*=base){limbLen++;}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base;}this.imuln(pow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i];}dest.length=this.length;dest.negative=this.negative;dest.red=this.red;};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r;};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0;}return this;};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--;}return this._normSign();};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0;}return this;};BN.prototype.inspect=function inspect(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>';};var zeros=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==='hex'){out='';var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&0xffffff).toString(16);carry=w>>>24-off&0xffffff;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out;}else{out=word+out;}off+=2;if(off>=26){off-=26;i--;}}if(carry!==0){out=carry.toString(16)+out;}while(out.length%padding!==0){out='0'+out;}if(this.negative!==0){out='-'+out;}return out;}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out='';var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out;}else{out=r+out;}}if(this.isZero()){out='0'+out;}while(out.length%padding!==0){out='0'+out;}if(this.negative!==0){out='-'+out;}return out;}assert(false,'Base should be between 2 and 36');};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*0x4000000;}else if(this.length===3&&this.words[2]===0x01){ret+=0x10000000000000+this.words[1]*0x4000000;}else if(this.length>2){assert(false,'Number can only safely store up to 53 bits');}return this.negative!==0?-ret:ret;};BN.prototype.toJSON=function toJSON(){return this.toString(16);};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=='undefined');return this.toArrayLike(Buffer,endian,length);};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length);};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,'byte array longer than desired length');assert(reqLength>0,'Requested array length <= 0');this.strip();var littleEndian=endian==='le';var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0;}for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[reqLength-i-1]=b;}}else{for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[i]=b;}for(;i<reqLength;i++){res[i]=0;}}return res;};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w);};}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=0x1000){r+=13;t>>>=13;}if(t>=0x40){r+=7;t>>>=7;}if(t>=0x8){r+=4;t>>>=4;}if(t>=0x02){r+=2;t>>>=2;}return r+t;};}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&0x1fff)===0){r+=13;t>>>=13;}if((t&0x7f)===0){r+=7;t>>>=7;}if((t&0xf)===0){r+=4;t>>>=4;}if((t&0x3)===0){r+=2;t>>>=2;}if((t&0x1)===0){r++;}return r;};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi;};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit;}return w;}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break;}return r;};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8);};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1);}return this.clone();};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg();}return this.clone();};BN.prototype.isNeg=function isNeg(){return this.negative!==0;};BN.prototype.neg=function neg(){return this.clone().ineg();};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1;}return this;};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0;}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i];}return this.strip();};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num);};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this);};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this);};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num;}else{b=this;}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i];}this.length=b.length;return this.strip();};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num);};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this);};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this);};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i];}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i];}}this.length=a.length;return this.strip();};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num);};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this);};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this);};BN.prototype.inotn=function inotn(width){assert(typeof width==='number'&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--;}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&0x3ffffff;}if(bitsLeft>0){this.words[i]=~this.words[i]&0x3ffffff>>26-bitsLeft;}return this.strip();};BN.prototype.notn=function notn(width){return this.clone().inotn(width);};BN.prototype.setn=function setn(bit,val){assert(typeof bit==='number'&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit;}else{this.words[off]=this.words[off]&~(1<<wbit);}return this.strip();};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign();}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign();}var a,b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++;}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}return this;};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res;}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res;}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this);};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign();}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign();}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this;}var a,b;if(cmp>0){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1;}return this.strip();};BN.prototype.sub=function sub(num){return this.clone().isub(num);};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&0x3ffffff;var carry=r/0x4000000|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/0x4000000|0;rword=r&0x3ffffff;}out.words[k]=rword|0;carry=ncarry|0;}if(carry!==0){out.words[k]=carry|0;}else{out.length--;}return out.strip();}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&0x1fff;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&0x1fff;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&0x1fff;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&0x1fff;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&0x1fff;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&0x1fff;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&0x1fff;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&0x1fff;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&0x1fff;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&0x1fff;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&0x1fff;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&0x1fff;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&0x1fff;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&0x1fff;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&0x1fff;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&0x1fff;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&0x1fff;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&0x1fff;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&0x1fff;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&0x1fff;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=mid+Math.imul(ah0,bl0)|0;hi=Math.imul(ah0,bh0);var w0=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0;w0&=0x3ffffff;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=mid+Math.imul(ah1,bl0)|0;hi=Math.imul(ah1,bh0);lo=lo+Math.imul(al0,bl1)|0;mid=mid+Math.imul(al0,bh1)|0;mid=mid+Math.imul(ah0,bl1)|0;hi=hi+Math.imul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0;w1&=0x3ffffff;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=mid+Math.imul(ah2,bl0)|0;hi=Math.imul(ah2,bh0);lo=lo+Math.imul(al1,bl1)|0;mid=mid+Math.imul(al1,bh1)|0;mid=mid+Math.imul(ah1,bl1)|0;hi=hi+Math.imul(ah1,bh1)|0;lo=lo+Math.imul(al0,bl2)|0;mid=mid+Math.imul(al0,bh2)|0;mid=mid+Math.imul(ah0,bl2)|0;hi=hi+Math.imul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0;w2&=0x3ffffff;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=mid+Math.imul(ah3,bl0)|0;hi=Math.imul(ah3,bh0);lo=lo+Math.imul(al2,bl1)|0;mid=mid+Math.imul(al2,bh1)|0;mid=mid+Math.imul(ah2,bl1)|0;hi=hi+Math.imul(ah2,bh1)|0;lo=lo+Math.imul(al1,bl2)|0;mid=mid+Math.imul(al1,bh2)|0;mid=mid+Math.imul(ah1,bl2)|0;hi=hi+Math.imul(ah1,bh2)|0;lo=lo+Math.imul(al0,bl3)|0;mid=mid+Math.imul(al0,bh3)|0;mid=mid+Math.imul(ah0,bl3)|0;hi=hi+Math.imul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0;w3&=0x3ffffff;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=mid+Math.imul(ah4,bl0)|0;hi=Math.imul(ah4,bh0);lo=lo+Math.imul(al3,bl1)|0;mid=mid+Math.imul(al3,bh1)|0;mid=mid+Math.imul(ah3,bl1)|0;hi=hi+Math.imul(ah3,bh1)|0;lo=lo+Math.imul(al2,bl2)|0;mid=mid+Math.imul(al2,bh2)|0;mid=mid+Math.imul(ah2,bl2)|0;hi=hi+Math.imul(ah2,bh2)|0;lo=lo+Math.imul(al1,bl3)|0;mid=mid+Math.imul(al1,bh3)|0;mid=mid+Math.imul(ah1,bl3)|0;hi=hi+Math.imul(ah1,bh3)|0;lo=lo+Math.imul(al0,bl4)|0;mid=mid+Math.imul(al0,bh4)|0;mid=mid+Math.imul(ah0,bl4)|0;hi=hi+Math.imul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0;w4&=0x3ffffff;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=mid+Math.imul(ah5,bl0)|0;hi=Math.imul(ah5,bh0);lo=lo+Math.imul(al4,bl1)|0;mid=mid+Math.imul(al4,bh1)|0;mid=mid+Math.imul(ah4,bl1)|0;hi=hi+Math.imul(ah4,bh1)|0;lo=lo+Math.imul(al3,bl2)|0;mid=mid+Math.imul(al3,bh2)|0;mid=mid+Math.imul(ah3,bl2)|0;hi=hi+Math.imul(ah3,bh2)|0;lo=lo+Math.imul(al2,bl3)|0;mid=mid+Math.imul(al2,bh3)|0;mid=mid+Math.imul(ah2,bl3)|0;hi=hi+Math.imul(ah2,bh3)|0;lo=lo+Math.imul(al1,bl4)|0;mid=mid+Math.imul(al1,bh4)|0;mid=mid+Math.imul(ah1,bl4)|0;hi=hi+Math.imul(ah1,bh4)|0;lo=lo+Math.imul(al0,bl5)|0;mid=mid+Math.imul(al0,bh5)|0;mid=mid+Math.imul(ah0,bl5)|0;hi=hi+Math.imul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0;w5&=0x3ffffff;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=mid+Math.imul(ah6,bl0)|0;hi=Math.imul(ah6,bh0);lo=lo+Math.imul(al5,bl1)|0;mid=mid+Math.imul(al5,bh1)|0;mid=mid+Math.imul(ah5,bl1)|0;hi=hi+Math.imul(ah5,bh1)|0;lo=lo+Math.imul(al4,bl2)|0;mid=mid+Math.imul(al4,bh2)|0;mid=mid+Math.imul(ah4,bl2)|0;hi=hi+Math.imul(ah4,bh2)|0;lo=lo+Math.imul(al3,bl3)|0;mid=mid+Math.imul(al3,bh3)|0;mid=mid+Math.imul(ah3,bl3)|0;hi=hi+Math.imul(ah3,bh3)|0;lo=lo+Math.imul(al2,bl4)|0;mid=mid+Math.imul(al2,bh4)|0;mid=mid+Math.imul(ah2,bl4)|0;hi=hi+Math.imul(ah2,bh4)|0;lo=lo+Math.imul(al1,bl5)|0;mid=mid+Math.imul(al1,bh5)|0;mid=mid+Math.imul(ah1,bl5)|0;hi=hi+Math.imul(ah1,bh5)|0;lo=lo+Math.imul(al0,bl6)|0;mid=mid+Math.imul(al0,bh6)|0;mid=mid+Math.imul(ah0,bl6)|0;hi=hi+Math.imul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0;w6&=0x3ffffff;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=mid+Math.imul(ah7,bl0)|0;hi=Math.imul(ah7,bh0);lo=lo+Math.imul(al6,bl1)|0;mid=mid+Math.imul(al6,bh1)|0;mid=mid+Math.imul(ah6,bl1)|0;hi=hi+Math.imul(ah6,bh1)|0;lo=lo+Math.imul(al5,bl2)|0;mid=mid+Math.imul(al5,bh2)|0;mid=mid+Math.imul(ah5,bl2)|0;hi=hi+Math.imul(ah5,bh2)|0;lo=lo+Math.imul(al4,bl3)|0;mid=mid+Math.imul(al4,bh3)|0;mid=mid+Math.imul(ah4,bl3)|0;hi=hi+Math.imul(ah4,bh3)|0;lo=lo+Math.imul(al3,bl4)|0;mid=mid+Math.imul(al3,bh4)|0;mid=mid+Math.imul(ah3,bl4)|0;hi=hi+Math.imul(ah3,bh4)|0;lo=lo+Math.imul(al2,bl5)|0;mid=mid+Math.imul(al2,bh5)|0;mid=mid+Math.imul(ah2,bl5)|0;hi=hi+Math.imul(ah2,bh5)|0;lo=lo+Math.imul(al1,bl6)|0;mid=mid+Math.imul(al1,bh6)|0;mid=mid+Math.imul(ah1,bl6)|0;hi=hi+Math.imul(ah1,bh6)|0;lo=lo+Math.imul(al0,bl7)|0;mid=mid+Math.imul(al0,bh7)|0;mid=mid+Math.imul(ah0,bl7)|0;hi=hi+Math.imul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0;w7&=0x3ffffff;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=mid+Math.imul(ah8,bl0)|0;hi=Math.imul(ah8,bh0);lo=lo+Math.imul(al7,bl1)|0;mid=mid+Math.imul(al7,bh1)|0;mid=mid+Math.imul(ah7,bl1)|0;hi=hi+Math.imul(ah7,bh1)|0;lo=lo+Math.imul(al6,bl2)|0;mid=mid+Math.imul(al6,bh2)|0;mid=mid+Math.imul(ah6,bl2)|0;hi=hi+Math.imul(ah6,bh2)|0;lo=lo+Math.imul(al5,bl3)|0;mid=mid+Math.imul(al5,bh3)|0;mid=mid+Math.imul(ah5,bl3)|0;hi=hi+Math.imul(ah5,bh3)|0;lo=lo+Math.imul(al4,bl4)|0;mid=mid+Math.imul(al4,bh4)|0;mid=mid+Math.imul(ah4,bl4)|0;hi=hi+Math.imul(ah4,bh4)|0;lo=lo+Math.imul(al3,bl5)|0;mid=mid+Math.imul(al3,bh5)|0;mid=mid+Math.imul(ah3,bl5)|0;hi=hi+Math.imul(ah3,bh5)|0;lo=lo+Math.imul(al2,bl6)|0;mid=mid+Math.imul(al2,bh6)|0;mid=mid+Math.imul(ah2,bl6)|0;hi=hi+Math.imul(ah2,bh6)|0;lo=lo+Math.imul(al1,bl7)|0;mid=mid+Math.imul(al1,bh7)|0;mid=mid+Math.imul(ah1,bl7)|0;hi=hi+Math.imul(ah1,bh7)|0;lo=lo+Math.imul(al0,bl8)|0;mid=mid+Math.imul(al0,bh8)|0;mid=mid+Math.imul(ah0,bl8)|0;hi=hi+Math.imul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0;w8&=0x3ffffff;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=mid+Math.imul(ah9,bl0)|0;hi=Math.imul(ah9,bh0);lo=lo+Math.imul(al8,bl1)|0;mid=mid+Math.imul(al8,bh1)|0;mid=mid+Math.imul(ah8,bl1)|0;hi=hi+Math.imul(ah8,bh1)|0;lo=lo+Math.imul(al7,bl2)|0;mid=mid+Math.imul(al7,bh2)|0;mid=mid+Math.imul(ah7,bl2)|0;hi=hi+Math.imul(ah7,bh2)|0;lo=lo+Math.imul(al6,bl3)|0;mid=mid+Math.imul(al6,bh3)|0;mid=mid+Math.imul(ah6,bl3)|0;hi=hi+Math.imul(ah6,bh3)|0;lo=lo+Math.imul(al5,bl4)|0;mid=mid+Math.imul(al5,bh4)|0;mid=mid+Math.imul(ah5,bl4)|0;hi=hi+Math.imul(ah5,bh4)|0;lo=lo+Math.imul(al4,bl5)|0;mid=mid+Math.imul(al4,bh5)|0;mid=mid+Math.imul(ah4,bl5)|0;hi=hi+Math.imul(ah4,bh5)|0;lo=lo+Math.imul(al3,bl6)|0;mid=mid+Math.imul(al3,bh6)|0;mid=mid+Math.imul(ah3,bl6)|0;hi=hi+Math.imul(ah3,bh6)|0;lo=lo+Math.imul(al2,bl7)|0;mid=mid+Math.imul(al2,bh7)|0;mid=mid+Math.imul(ah2,bl7)|0;hi=hi+Math.imul(ah2,bh7)|0;lo=lo+Math.imul(al1,bl8)|0;mid=mid+Math.imul(al1,bh8)|0;mid=mid+Math.imul(ah1,bl8)|0;hi=hi+Math.imul(ah1,bh8)|0;lo=lo+Math.imul(al0,bl9)|0;mid=mid+Math.imul(al0,bh9)|0;mid=mid+Math.imul(ah0,bl9)|0;hi=hi+Math.imul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0;w9&=0x3ffffff;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=mid+Math.imul(ah9,bl1)|0;hi=Math.imul(ah9,bh1);lo=lo+Math.imul(al8,bl2)|0;mid=mid+Math.imul(al8,bh2)|0;mid=mid+Math.imul(ah8,bl2)|0;hi=hi+Math.imul(ah8,bh2)|0;lo=lo+Math.imul(al7,bl3)|0;mid=mid+Math.imul(al7,bh3)|0;mid=mid+Math.imul(ah7,bl3)|0;hi=hi+Math.imul(ah7,bh3)|0;lo=lo+Math.imul(al6,bl4)|0;mid=mid+Math.imul(al6,bh4)|0;mid=mid+Math.imul(ah6,bl4)|0;hi=hi+Math.imul(ah6,bh4)|0;lo=lo+Math.imul(al5,bl5)|0;mid=mid+Math.imul(al5,bh5)|0;mid=mid+Math.imul(ah5,bl5)|0;hi=hi+Math.imul(ah5,bh5)|0;lo=lo+Math.imul(al4,bl6)|0;mid=mid+Math.imul(al4,bh6)|0;mid=mid+Math.imul(ah4,bl6)|0;hi=hi+Math.imul(ah4,bh6)|0;lo=lo+Math.imul(al3,bl7)|0;mid=mid+Math.imul(al3,bh7)|0;mid=mid+Math.imul(ah3,bl7)|0;hi=hi+Math.imul(ah3,bh7)|0;lo=lo+Math.imul(al2,bl8)|0;mid=mid+Math.imul(al2,bh8)|0;mid=mid+Math.imul(ah2,bl8)|0;hi=hi+Math.imul(ah2,bh8)|0;lo=lo+Math.imul(al1,bl9)|0;mid=mid+Math.imul(al1,bh9)|0;mid=mid+Math.imul(ah1,bl9)|0;hi=hi+Math.imul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0;w10&=0x3ffffff;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=mid+Math.imul(ah9,bl2)|0;hi=Math.imul(ah9,bh2);lo=lo+Math.imul(al8,bl3)|0;mid=mid+Math.imul(al8,bh3)|0;mid=mid+Math.imul(ah8,bl3)|0;hi=hi+Math.imul(ah8,bh3)|0;lo=lo+Math.imul(al7,bl4)|0;mid=mid+Math.imul(al7,bh4)|0;mid=mid+Math.imul(ah7,bl4)|0;hi=hi+Math.imul(ah7,bh4)|0;lo=lo+Math.imul(al6,bl5)|0;mid=mid+Math.imul(al6,bh5)|0;mid=mid+Math.imul(ah6,bl5)|0;hi=hi+Math.imul(ah6,bh5)|0;lo=lo+Math.imul(al5,bl6)|0;mid=mid+Math.imul(al5,bh6)|0;mid=mid+Math.imul(ah5,bl6)|0;hi=hi+Math.imul(ah5,bh6)|0;lo=lo+Math.imul(al4,bl7)|0;mid=mid+Math.imul(al4,bh7)|0;mid=mid+Math.imul(ah4,bl7)|0;hi=hi+Math.imul(ah4,bh7)|0;lo=lo+Math.imul(al3,bl8)|0;mid=mid+Math.imul(al3,bh8)|0;mid=mid+Math.imul(ah3,bl8)|0;hi=hi+Math.imul(ah3,bh8)|0;lo=lo+Math.imul(al2,bl9)|0;mid=mid+Math.imul(al2,bh9)|0;mid=mid+Math.imul(ah2,bl9)|0;hi=hi+Math.imul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0;w11&=0x3ffffff;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=mid+Math.imul(ah9,bl3)|0;hi=Math.imul(ah9,bh3);lo=lo+Math.imul(al8,bl4)|0;mid=mid+Math.imul(al8,bh4)|0;mid=mid+Math.imul(ah8,bl4)|0;hi=hi+Math.imul(ah8,bh4)|0;lo=lo+Math.imul(al7,bl5)|0;mid=mid+Math.imul(al7,bh5)|0;mid=mid+Math.imul(ah7,bl5)|0;hi=hi+Math.imul(ah7,bh5)|0;lo=lo+Math.imul(al6,bl6)|0;mid=mid+Math.imul(al6,bh6)|0;mid=mid+Math.imul(ah6,bl6)|0;hi=hi+Math.imul(ah6,bh6)|0;lo=lo+Math.imul(al5,bl7)|0;mid=mid+Math.imul(al5,bh7)|0;mid=mid+Math.imul(ah5,bl7)|0;hi=hi+Math.imul(ah5,bh7)|0;lo=lo+Math.imul(al4,bl8)|0;mid=mid+Math.imul(al4,bh8)|0;mid=mid+Math.imul(ah4,bl8)|0;hi=hi+Math.imul(ah4,bh8)|0;lo=lo+Math.imul(al3,bl9)|0;mid=mid+Math.imul(al3,bh9)|0;mid=mid+Math.imul(ah3,bl9)|0;hi=hi+Math.imul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0;w12&=0x3ffffff;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=mid+Math.imul(ah9,bl4)|0;hi=Math.imul(ah9,bh4);lo=lo+Math.imul(al8,bl5)|0;mid=mid+Math.imul(al8,bh5)|0;mid=mid+Math.imul(ah8,bl5)|0;hi=hi+Math.imul(ah8,bh5)|0;lo=lo+Math.imul(al7,bl6)|0;mid=mid+Math.imul(al7,bh6)|0;mid=mid+Math.imul(ah7,bl6)|0;hi=hi+Math.imul(ah7,bh6)|0;lo=lo+Math.imul(al6,bl7)|0;mid=mid+Math.imul(al6,bh7)|0;mid=mid+Math.imul(ah6,bl7)|0;hi=hi+Math.imul(ah6,bh7)|0;lo=lo+Math.imul(al5,bl8)|0;mid=mid+Math.imul(al5,bh8)|0;mid=mid+Math.imul(ah5,bl8)|0;hi=hi+Math.imul(ah5,bh8)|0;lo=lo+Math.imul(al4,bl9)|0;mid=mid+Math.imul(al4,bh9)|0;mid=mid+Math.imul(ah4,bl9)|0;hi=hi+Math.imul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0;w13&=0x3ffffff;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=mid+Math.imul(ah9,bl5)|0;hi=Math.imul(ah9,bh5);lo=lo+Math.imul(al8,bl6)|0;mid=mid+Math.imul(al8,bh6)|0;mid=mid+Math.imul(ah8,bl6)|0;hi=hi+Math.imul(ah8,bh6)|0;lo=lo+Math.imul(al7,bl7)|0;mid=mid+Math.imul(al7,bh7)|0;mid=mid+Math.imul(ah7,bl7)|0;hi=hi+Math.imul(ah7,bh7)|0;lo=lo+Math.imul(al6,bl8)|0;mid=mid+Math.imul(al6,bh8)|0;mid=mid+Math.imul(ah6,bl8)|0;hi=hi+Math.imul(ah6,bh8)|0;lo=lo+Math.imul(al5,bl9)|0;mid=mid+Math.imul(al5,bh9)|0;mid=mid+Math.imul(ah5,bl9)|0;hi=hi+Math.imul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0;w14&=0x3ffffff;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=mid+Math.imul(ah9,bl6)|0;hi=Math.imul(ah9,bh6);lo=lo+Math.imul(al8,bl7)|0;mid=mid+Math.imul(al8,bh7)|0;mid=mid+Math.imul(ah8,bl7)|0;hi=hi+Math.imul(ah8,bh7)|0;lo=lo+Math.imul(al7,bl8)|0;mid=mid+Math.imul(al7,bh8)|0;mid=mid+Math.imul(ah7,bl8)|0;hi=hi+Math.imul(ah7,bh8)|0;lo=lo+Math.imul(al6,bl9)|0;mid=mid+Math.imul(al6,bh9)|0;mid=mid+Math.imul(ah6,bl9)|0;hi=hi+Math.imul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0;w15&=0x3ffffff;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=mid+Math.imul(ah9,bl7)|0;hi=Math.imul(ah9,bh7);lo=lo+Math.imul(al8,bl8)|0;mid=mid+Math.imul(al8,bh8)|0;mid=mid+Math.imul(ah8,bl8)|0;hi=hi+Math.imul(ah8,bh8)|0;lo=lo+Math.imul(al7,bl9)|0;mid=mid+Math.imul(al7,bh9)|0;mid=mid+Math.imul(ah7,bl9)|0;hi=hi+Math.imul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0;w16&=0x3ffffff;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=mid+Math.imul(ah9,bl8)|0;hi=Math.imul(ah9,bh8);lo=lo+Math.imul(al8,bl9)|0;mid=mid+Math.imul(al8,bh9)|0;mid=mid+Math.imul(ah8,bl9)|0;hi=hi+Math.imul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0;w17&=0x3ffffff;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=mid+Math.imul(ah9,bl9)|0;hi=Math.imul(ah9,bh9);var w18=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w18>>>26)|0;w18&=0x3ffffff;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++;}return out;};if(!Math.imul){comb10MulTo=smallMulTo;}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&0x3ffffff;ncarry=ncarry+(r/0x4000000|0)|0;lo=lo+rword|0;rword=lo&0x3ffffff;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=0x3ffffff;}out.words[k]=rword;carry=ncarry;ncarry=hncarry;}if(carry!==0){out.words[k]=carry;}else{out.length--;}return out.strip();}function jumboMulTo(self,num,out){var fftm=new FFTM();return fftm.mulp(self,num,out);}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out);}else if(len<63){res=smallMulTo(this,num,out);}else if(len<1024){res=bigMulTo(this,num,out);}else{res=jumboMulTo(this,num,out);}return res;};function FFTM(x,y){this.x=x;this.y=y;}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N);}return t;};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1;}return rb;};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]];}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx;}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++;}return 1<<i+1+odd;};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t;}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*0x2000+Math.round(ws[2*i]/N)+carry;ws[i]=w&0x3ffffff;if(w<0x4000000){carry=0;}else{carry=w/0x4000000|0;}}return ws;};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&0x1fff;carry=carry>>>13;rws[2*i+1]=carry&0x1fff;carry=carry>>>13;}for(i=2*len;i<N;++i){rws[i]=0;}assert(carry===0);assert((carry&~0x1fff)===0);};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0;}return ph;};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx;}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip();};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out);};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out);};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this);};BN.prototype.imuln=function imuln(num){assert(typeof num==='number');assert(num<0x4000000);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&0x3ffffff)+(carry&0x3ffffff);carry>>=26;carry+=w/0x4000000|0;carry+=lo>>>26;this.words[i]=lo&0x3ffffff;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.muln=function muln(num){return this.clone().imuln(num);};BN.prototype.sqr=function sqr(){return this.mul(this);};BN.prototype.isqr=function isqr(){return this.imul(this.clone());};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break;}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q);}}return res;};BN.prototype.iushln=function iushln(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=0x3ffffff>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r;}if(carry){this.words[i]=carry;this.length++;}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i];}for(i=0;i<s;i++){this.words[i]=0;}this.length+=s;}return this.strip();};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits);};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==='number'&&bits>=0);var h;if(hint){h=(hint-hint%26)/26;}else{h=0;}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=0x3ffffff^0x3ffffff>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i];}maskedWords.length=s;}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s];}}else{this.words[0]=0;this.length=1;}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask;}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry;}if(this.length===0){this.words[0]=0;this.length=1;}return this.strip();};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended);};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits);};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits);};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits);};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits);};BN.prototype.testn=function testn(bit){assert(typeof bit==='number'&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q);};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,'imaskn works only with positive numbers');if(this.length<=s){return this;}if(r!==0){s++;}this.length=Math.min(s,this.length);if(r!==0){var mask=0x3ffffff^0x3ffffff>>>r<<r;this.words[this.length-1]&=mask;}return this.strip();};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits);};BN.prototype.iaddn=function iaddn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this;}this.negative=0;this.isubn(num);this.negative=1;return this;}return this._iaddn(num);};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=0x4000000;i++){this.words[i]-=0x4000000;if(i===this.length-1){this.words[i+1]=1;}else{this.words[i+1]++;}}this.length=Math.max(this.length,i+1);return this;};BN.prototype.isubn=function isubn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this;}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1;}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=0x4000000;this.words[i+1]-=1;}}return this.strip();};BN.prototype.addn=function addn(num){return this.clone().iaddn(num);};BN.prototype.subn=function subn(num){return this.clone().isubn(num);};BN.prototype.iabs=function iabs(){this.negative=0;return this;};BN.prototype.abs=function abs(){return this.clone().iabs();};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&0x3ffffff;carry=(w>>26)-(right/0x4000000|0);this.words[i+shift]=w&0x3ffffff;}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&0x3ffffff;}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&0x3ffffff;}this.negative=1;return this.strip();};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0;}var m=a.length-b.length;var q;if(mode!=='mod'){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0;}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1;}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*0x4000000+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,0x3ffffff);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1;}}if(q){q.words[j]=qj;}}if(q){q.strip();}a.strip();if(mode!=='div'&&shift!==0){a.iushrn(shift);}return{div:q||null,mod:a};};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)};}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=='mod'){div=res.div.neg();}if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num);}}return{div:div,mod:mod};}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=='mod'){div=res.div.neg();}return{div:div,mod:res.mod};}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num);}}return{div:res.div,mod:mod};}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this};}if(num.length===1){if(mode==='div'){return{div:this.divn(num.words[0]),mod:null};}if(mode==='mod'){return{div:null,mod:new BN(this.modn(num.words[0]))};}return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))};}return this._wordDiv(num,mode);};BN.prototype.div=function div(num){return this.divmod(num,'div',false).div;};BN.prototype.mod=function mod(num){return this.divmod(num,'mod',false).mod;};BN.prototype.umod=function umod(num){return this.divmod(num,'mod',true).mod;};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1);};BN.prototype.modn=function modn(num){assert(num<=0x3ffffff);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num;}return acc;};BN.prototype.idivn=function idivn(num){assert(num<=0x3ffffff);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*0x4000000;this.words[i]=w/num|0;carry=w%num;}return this.strip();};BN.prototype.divn=function divn(num){return this.clone().idivn(num);};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p);}else{x=x.clone();}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g;}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1){;}if(i>0){x.iushrn(i);while(i-->0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp);}A.iushrn(1);B.iushrn(1);}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1){;}if(j>0){y.iushrn(j);while(j-->0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp);}C.iushrn(1);D.iushrn(1);}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D);}else{y.isub(x);C.isub(A);D.isub(B);}}return{a:C,b:D,gcd:y.iushln(g)};};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p);}else{a=a.clone();}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1){;}if(i>0){a.iushrn(i);while(i-->0){if(x1.isOdd()){x1.iadd(delta);}x1.iushrn(1);}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1){;}if(j>0){b.iushrn(j);while(j-->0){if(x2.isOdd()){x2.iadd(delta);}x2.iushrn(1);}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2);}else{b.isub(a);x2.isub(x1);}}var res;if(a.cmpn(1)===0){res=x1;}else{res=x2;}if(res.cmpn(0)<0){res.iadd(p);}return res;};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1);}do{while(a.isEven()){a.iushrn(1);}while(b.isEven()){b.iushrn(1);}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t;}else if(r===0||b.cmpn(1)===0){break;}a.isub(b);}while(true);return b.iushln(shift);};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num);};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0;};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1;};BN.prototype.andln=function andln(num){return this.words[0]&num;};BN.prototype.bincn=function bincn(bit){assert(typeof bit==='number');var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this;}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=0x3ffffff;this.words[i]=w;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0;};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1;}else{if(negative){num=-num;}assert(num<=0x3ffffff,'Number is too big');var w=this.words[0]|0;res=w===num?0:w<num?-1:1;}if(this.negative!==0)return-res|0;return res;};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res;};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1;}else if(a>b){res=1;}break;}return res;};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1;};BN.prototype.gt=function gt(num){return this.cmp(num)===1;};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0;};BN.prototype.gte=function gte(num){return this.cmp(num)>=0;};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1;};BN.prototype.lt=function lt(num){return this.cmp(num)===-1;};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0;};BN.prototype.lte=function lte(num){return this.cmp(num)<=0;};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0;};BN.prototype.eq=function eq(num){return this.cmp(num)===0;};BN.red=function red(num){return new Red(num);};BN.prototype.toRed=function toRed(ctx){assert(!this.red,'Already a number in reduction context');assert(this.negative===0,'red works only with positives');return ctx.convertTo(this)._forceRed(ctx);};BN.prototype.fromRed=function fromRed(){assert(this.red,'fromRed works only with numbers in reduction context');return this.red.convertFrom(this);};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this;};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,'Already a number in reduction context');return this._forceRed(ctx);};BN.prototype.redAdd=function redAdd(num){assert(this.red,'redAdd works only with red numbers');return this.red.add(this,num);};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,'redIAdd works only with red numbers');return this.red.iadd(this,num);};BN.prototype.redSub=function redSub(num){assert(this.red,'redSub works only with red numbers');return this.red.sub(this,num);};BN.prototype.redISub=function redISub(num){assert(this.red,'redISub works only with red numbers');return this.red.isub(this,num);};BN.prototype.redShl=function redShl(num){assert(this.red,'redShl works only with red numbers');return this.red.shl(this,num);};BN.prototype.redMul=function redMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.mul(this,num);};BN.prototype.redIMul=function redIMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.imul(this,num);};BN.prototype.redSqr=function redSqr(){assert(this.red,'redSqr works only with red numbers');this.red._verify1(this);return this.red.sqr(this);};BN.prototype.redISqr=function redISqr(){assert(this.red,'redISqr works only with red numbers');this.red._verify1(this);return this.red.isqr(this);};BN.prototype.redSqrt=function redSqrt(){assert(this.red,'redSqrt works only with red numbers');this.red._verify1(this);return this.red.sqrt(this);};BN.prototype.redInvm=function redInvm(){assert(this.red,'redInvm works only with red numbers');this.red._verify1(this);return this.red.invm(this);};BN.prototype.redNeg=function redNeg(){assert(this.red,'redNeg works only with red numbers');this.red._verify1(this);return this.red.neg(this);};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,'redPow(normalNum)');this.red._verify1(this);return this.red.pow(this,num);};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp();}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp;};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength();}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1;}else if(cmp>0){r.isub(this.p);}else{r.strip();}return r;};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out);};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k);};function K256(){MPrime.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=0x3fffff;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i];}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return;}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next;}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10;}else{input.length-=9;}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*0x3d1;num.words[i]=lo&0x3ffffff;lo=w*0x40+(lo/0x4000000|0);}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--;}}return num;};function P224(){MPrime.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');}inherits(P224,MPrime);function P192(){MPrime.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');}inherits(P192,MPrime);function P25519(){MPrime.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*0x13+carry;var lo=hi&0x3ffffff;hi>>>=26;num.words[i]=lo;carry=hi;}if(carry!==0){num.words[num.length++]=carry;}return num;};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==='k256'){prime=new K256();}else if(name==='p224'){prime=new P224();}else if(name==='p192'){prime=new P192();}else if(name==='p25519'){prime=new P25519();}else{throw new Error('Unknown prime '+name);}primes[name]=prime;return prime;};function Red(m){if(typeof m==='string'){var prime=BN._prime(m);this.m=prime.p;this.prime=prime;}else{assert(m.gtn(1),'modulus must be greater than 1');this.m=m;this.prime=null;}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,'red works only with positives');assert(a.red,'red works only with red numbers');};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,'red works only with positives');assert(a.red&&a.red===b.red,'red works only with red numbers');};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this);};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone();}return this.m.sub(a)._forceRed(this);};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m);}return res._forceRed(this);};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m);}return res;};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m);}return res._forceRed(this);};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m);}return res;};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num));};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b));};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b));};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone());};Red.prototype.sqr=function sqr(a){return this.mul(a,a);};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow);}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1);}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne);}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr();}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i;}return r;};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg();}else{return this.imod(inv);}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a);}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26;}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res);}if(bit===0&&current===0){currentLen=0;continue;}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0;}start=26;}return res;};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r;};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res;};BN.mont=function mont(num){return new Mont(num);};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26;}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv);}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift));};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r;};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a;}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}return res._forceRed(this);};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}return res._forceRed(this);};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this);};})(typeof module==='undefined'||module,void 0);

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],659:[function(require,module,exports){
var isHexPrefixed=require('is-hex-prefixed');module.exports=function stripHexPrefix(str){if(typeof str!=='string'){return str;}return isHexPrefixed(str)?str.slice(2):str;};

},{"is-hex-prefixed":310}],310:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function isHexPrefixed(str){if(typeof str!=='string'){throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+(0,_typeof2["default"])(str)+", while checking isHexPrefixed.");}return str.slice(0,2)==='0x';};

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],289:[function(require,module,exports){
'use strict';var has=Object.prototype.hasOwnProperty,prefix='~';function Events(){}if(Object.create){Events.prototype=Object.create(null);if(!new Events().__proto__)prefix=false;}function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false;}function addListener(emitter,event,fn,context,once){if(typeof fn!=='function'){throw new TypeError('The listener must be a function');}var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;if(!emitter._events[evt])emitter._events[evt]=listener,emitter._eventsCount++;else if(!emitter._events[evt].fn)emitter._events[evt].push(listener);else emitter._events[evt]=[emitter._events[evt],listener];return emitter;}function clearEvent(emitter,evt){if(--emitter._eventsCount===0)emitter._events=new Events();else delete emitter._events[evt];}function EventEmitter(){this._events=new Events();this._eventsCount=0;}EventEmitter.prototype.eventNames=function eventNames(){var names=[],events,name;if(this._eventsCount===0)return names;for(name in events=this._events){if(has.call(events,name))names.push(prefix?name.slice(1):name);}if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events));}return names;};EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++){ee[i]=handlers[i].fn;}return ee;};EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];if(!listeners)return 0;if(listeners.fn)return 1;return listeners.length;};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if(listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true;}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i];}listeners.fn.apply(listeners.context,args);}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j];}listeners[i].fn.apply(listeners[i].context,args);}}}return true;};EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,false);};EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,true);};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn){clearEvent(this,evt);return this;}var listeners=this._events[evt];if(listeners.fn){if(listeners.fn===fn&&(!once||listeners.once)&&(!context||listeners.context===context)){clearEvent(this,evt);}}else{for(var i=0,events=[],length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i]);}}if(events.length)this._events[evt]=events.length===1?events[0]:events;else clearEvent(this,evt);}return this;};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;if(event){evt=prefix?prefix+event:event;if(this._events[evt])clearEvent(this,evt);}else{this._events=new Events();this._eventsCount=0;}return this;};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prefixed=prefix;EventEmitter.EventEmitter=EventEmitter;if('undefined'!==typeof module){module.exports=EventEmitter;}

},{}],291:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var Transform=require('stream').Transform;var inherits=require('inherits');function throwIfNotStringOrBuffer(val,prefix){if(!Buffer.isBuffer(val)&&typeof val!=='string'){throw new TypeError(prefix+' must be a string or a buffer');}}function HashBase(blockSize){Transform.call(this);this._block=Buffer.allocUnsafe(blockSize);this._blockSize=blockSize;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=false;}inherits(HashBase,Transform);HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};HashBase.prototype._flush=function(callback){var error=null;try{this.push(this.digest());}catch(err){error=err;}callback(error);};HashBase.prototype.update=function(data,encoding){throwIfNotStringOrBuffer(data,'Data');if(this._finalized)throw new Error('Digest already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);var block=this._block;var offset=0;while(this._blockOffset+data.length-offset>=this._blockSize){for(var i=this._blockOffset;i<this._blockSize;){block[i++]=data[offset++];}this._update();this._blockOffset=0;}while(offset<data.length){block[this._blockOffset++]=data[offset++];}for(var j=0,carry=data.length*8;carry>0;++j){this._length[j]+=carry;carry=this._length[j]/0x0100000000|0;if(carry>0)this._length[j]-=0x0100000000*carry;}return this;};HashBase.prototype._update=function(){throw new Error('_update is not implemented');};HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called');this._finalized=true;var digest=this._digest();if(encoding!==undefined)digest=digest.toString(encoding);this._block.fill(0);this._blockOffset=0;for(var i=0;i<4;++i){this._length[i]=0;}return digest;};HashBase.prototype._digest=function(){throw new Error('_digest is not implemented');};module.exports=HashBase;

},{"inherits":307,"safe-buffer":639,"stream":1259}],295:[function(require,module,exports){
'use strict';var utils=require('./utils');var common=require('./common');var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.endian='little';}utils.inherits(RIPEMD160,BlockHash);exports.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E;E=D;D=rotl32(C,10);C=B;B=T;T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh);Ah=Eh;Eh=Dh;Dh=rotl32(Ch,10);Ch=Bh;Bh=T;}T=sum32_3(this.h[1],C,Dh);this.h[1]=sum32_3(this.h[2],D,Eh);this.h[2]=sum32_3(this.h[3],E,Ah);this.h[3]=sum32_3(this.h[4],A,Bh);this.h[4]=sum32_3(this.h[0],B,Ch);this.h[0]=T;};RIPEMD160.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'little');else return utils.split32(this.h,'little');};function f(j,x,y,z){if(j<=15)return x^y^z;else if(j<=31)return x&y|~x&z;else if(j<=47)return(x|~y)^z;else if(j<=63)return x&z|y&~z;else return x^(y|~z);}function K(j){if(j<=15)return 0x00000000;else if(j<=31)return 0x5a827999;else if(j<=47)return 0x6ed9eba1;else if(j<=63)return 0x8f1bbcdc;else return 0xa953fd4e;}function Kh(j){if(j<=15)return 0x50a28be6;else if(j<=31)return 0x5c4dd124;else if(j<=47)return 0x6d703ef3;else if(j<=63)return 0x7a6d76e9;else return 0x00000000;}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];

},{"./common":293,"./utils":303}],293:[function(require,module,exports){
'use strict';var utils=require('./utils');var assert=require('minimalistic-assert');function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian='big';this._delta8=this.blockSize/8;this._delta32=this.blockSize/32;}exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)this.pending=msg;else this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32){this._update(msg,i,i+this._delta32);}}return this;};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc);};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=new Array(k+this.padLength);res[0]=0x80;for(var i=1;i<k;i++){res[i]=0;}len<<=3;if(this.endian==='big'){for(var t=8;t<this.padLength;t++){res[i++]=0;}res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=len>>>24&0xff;res[i++]=len>>>16&0xff;res[i++]=len>>>8&0xff;res[i++]=len&0xff;}else{res[i++]=len&0xff;res[i++]=len>>>8&0xff;res[i++]=len>>>16&0xff;res[i++]=len>>>24&0xff;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(t=8;t<this.padLength;t++){res[i++]=0;}}return res;};

},{"./utils":303,"minimalistic-assert":480}],303:[function(require,module,exports){
'use strict';var assert=require('minimalistic-assert');var inherits=require('inherits');exports.inherits=inherits;function isSurrogatePair(msg,i){if((msg.charCodeAt(i)&0xFC00)!==0xD800){return false;}if(i<0||i+1>=msg.length){return false;}return(msg.charCodeAt(i+1)&0xFC00)===0xDC00;}function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg==='string'){if(!enc){var p=0;for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);if(c<128){res[p++]=c;}else if(c<2048){res[p++]=c>>6|192;res[p++]=c&63|128;}else if(isSurrogatePair(msg,i)){c=0x10000+((c&0x03FF)<<10)+(msg.charCodeAt(++i)&0x03FF);res[p++]=c>>18|240;res[p++]=c>>12&63|128;res[p++]=c>>6&63|128;res[p++]=c&63|128;}else{res[p++]=c>>12|224;res[p++]=c>>6&63|128;res[p++]=c&63|128;}}}else if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)msg='0'+msg;for(i=0;i<msg.length;i+=2){res.push(parseInt(msg[i]+msg[i+1],16));}}}else{for(i=0;i<msg.length;i++){res[i]=msg[i]|0;}}return res;}exports.toArray=toArray;function toHex(msg){var res='';for(var i=0;i<msg.length;i++){res+=zero2(msg[i].toString(16));}return res;}exports.toHex=toHex;function htonl(w){var res=w>>>24|w>>>8&0xff00|w<<8&0xff0000|(w&0xff)<<24;return res>>>0;}exports.htonl=htonl;function toHex32(msg,endian){var res='';for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==='little')w=htonl(w);res+=zero8(w.toString(16));}return res;}exports.toHex32=toHex32;function zero2(word){if(word.length===1)return'0'+word;else return word;}exports.zero2=zero2;function zero8(word){if(word.length===7)return'0'+word;else if(word.length===6)return'00'+word;else if(word.length===5)return'000'+word;else if(word.length===4)return'0000'+word;else if(word.length===3)return'00000'+word;else if(word.length===2)return'000000'+word;else if(word.length===1)return'0000000'+word;else return word;}exports.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==='big')w=msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3];else w=msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k];res[i]=w>>>0;}return res;}exports.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==='big'){res[k]=m>>>24;res[k+1]=m>>>16&0xff;res[k+2]=m>>>8&0xff;res[k+3]=m&0xff;}else{res[k+3]=m>>>24;res[k+2]=m>>>16&0xff;res[k+1]=m>>>8&0xff;res[k]=m&0xff;}}return res;}exports.split32=split32;function rotr32(w,b){return w>>>b|w<<32-b;}exports.rotr32=rotr32;function rotl32(w,b){return w<<b|w>>>32-b;}exports.rotl32=rotl32;function sum32(a,b){return a+b>>>0;}exports.sum32=sum32;function sum32_3(a,b,c){return a+b+c>>>0;}exports.sum32_3=sum32_3;function sum32_4(a,b,c,d){return a+b+c+d>>>0;}exports.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0;}exports.sum32_5=sum32_5;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo;}exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0;}exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0;}exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0;}exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0;}exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;lo=lo+el>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0;}exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0;}exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0;}exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0;}exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num;}exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0;}exports.shr64_lo=shr64_lo;

},{"inherits":307,"minimalistic-assert":480}],294:[function(require,module,exports){
'use strict';var utils=require('./utils');var assert=require('minimalistic-assert');function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc));}module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)key=new this.Hash().update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++){key.push(0);}for(i=0;i<key.length;i++){key[i]^=0x36;}this.inner=new this.Hash().update(key);for(i=0;i<key.length;i++){key[i]^=0x6a;}this.outer=new this.Hash().update(key);};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this;};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc);};

},{"./utils":303,"minimalistic-assert":480}],296:[function(require,module,exports){
'use strict';exports.sha1=require('./sha/1');exports.sha224=require('./sha/224');exports.sha256=require('./sha/256');exports.sha384=require('./sha/384');exports.sha512=require('./sha/512');

},{"./sha/1":297,"./sha/224":298,"./sha/256":299,"./sha/384":300,"./sha/512":301}],300:[function(require,module,exports){
'use strict';var utils=require('../utils');var SHA512=require('./512');function SHA384(){if(!(this instanceof SHA384))return new SHA384();SHA512.call(this);this.h=[0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4];}utils.inherits(SHA384,SHA512);module.exports=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h.slice(0,12),'big');else return utils.split32(this.h.slice(0,12),'big');};

},{"../utils":303,"./512":301}],298:[function(require,module,exports){
'use strict';var utils=require('../utils');var SHA256=require('./256');function SHA224(){if(!(this instanceof SHA224))return new SHA224();SHA256.call(this);this.h=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4];}utils.inherits(SHA224,SHA256);module.exports=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h.slice(0,7),'big');else return utils.split32(this.h.slice(0,7),'big');};

},{"../utils":303,"./256":299}],299:[function(require,module,exports){
'use strict';var utils=require('../utils');var common=require('../common');var shaCommon=require('./common');var assert=require('minimalistic-assert');var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash=common.BlockHash;var sha256_K=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function SHA256(){if(!(this instanceof SHA256))return new SHA256();BlockHash.call(this);this.h=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19];this.k=sha256_K;this.W=new Array(64);}utils.inherits(SHA256,BlockHash);module.exports=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++){W[i]=msg[start+i];}for(;i<W.length;i++){W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);}var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2);}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h);};SHA256.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};

},{"../common":293,"../utils":303,"./common":302,"minimalistic-assert":480}],301:[function(require,module,exports){
'use strict';var utils=require('../utils');var common=require('../common');var assert=require('minimalistic-assert');var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=common.BlockHash;var sha512_K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function SHA512(){if(!(this instanceof SHA512))return new SHA512();BlockHash.call(this);this.h=[0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179];this.k=sha512_K;this.W=new Array(160);}utils.inherits(SHA512,BlockHash);module.exports=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++){W[i]=msg[start+i];}for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al);c0_lo=s0_512_lo(ah,al);c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo);}sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl);};SHA512.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;if(r<0)r+=0x100000000;return r;}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;if(r<0)r+=0x100000000;return r;}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;if(r<0)r+=0x100000000;return r;}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;if(r<0)r+=0x100000000;return r;}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}

},{"../common":293,"../utils":303,"minimalistic-assert":480}],297:[function(require,module,exports){
'use strict';var utils=require('../utils');var common=require('../common');var shaCommon=require('./common');var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_5=utils.sum32_5;var ft_1=shaCommon.ft_1;var BlockHash=common.BlockHash;var sha1_K=[0x5A827999,0x6ED9EBA1,0x8F1BBCDC,0xCA62C1D6];function SHA1(){if(!(this instanceof SHA1))return new SHA1();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.W=new Array(80);}utils.inherits(SHA1,BlockHash);module.exports=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++){W[i]=msg[start+i];}for(;i<W.length;i++){W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);}var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d;d=c;c=rotl32(b,30);b=a;a=t;}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);};SHA1.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};

},{"../common":293,"../utils":303,"./common":302}],302:[function(require,module,exports){
'use strict';var utils=require('../utils');var rotr32=utils.rotr32;function ft_1(s,x,y,z){if(s===0)return ch32(x,y,z);if(s===1||s===3)return p32(x,y,z);if(s===2)return maj32(x,y,z);}exports.ft_1=ft_1;function ch32(x,y,z){return x&y^~x&z;}exports.ch32=ch32;function maj32(x,y,z){return x&y^x&z^y&z;}exports.maj32=maj32;function p32(x,y,z){return x^y^z;}/* common-shake removed: exports.p32 = */ void p32;function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22);}exports.s0_256=s0_256;function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25);}exports.s1_256=s1_256;function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3;}exports.g0_256=g0_256;function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10;}exports.g1_256=g1_256;

},{"../utils":303}],305:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(root,factory){if(typeof define==='function'&&define.amd){define([],function(){return factory();});}else if((typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'){module.exports=factory();}else{root.uts46_map=factory();}})(void 0,function(){var blocks=[new Uint32Array([2157250,2157314,2157378,2157442,2157506,2157570,2157634,0,2157698,2157762,2157826,2157890,2157954,0,2158018,0]),new Uint32Array([2179041,6291456,2179073,6291456,2179105,6291456,2179137,6291456,2179169,6291456,2179201,6291456,2179233,6291456,2179265,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,14680064,14680064,14680064,14680064,14680064]),new Uint32Array([0,2113729,2197345,2197377,2113825,2197409,2197441,2113921,2197473,2114017,2197505,2197537,2197569,2197601,2197633,2197665]),new Uint32Array([6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,23068672,23068672,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,0,0,23068672,23068672,23068672,0,0,0,0,23068672]),new Uint32Array([14680064,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,14680064,14680064]),new Uint32Array([2196001,2196033,2196065,2196097,2196129,2196161,2196193,2196225,2196257,2196289,2196321,2196353,2196385,2196417,2196449,2196481]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,6291456,0,0,0,0,0]),new Uint32Array([2097281,2105921,2097729,2106081,0,2097601,2162337,2106017,2133281,2097505,2105889,2097185,2097697,2135777,2097633,2097441]),new Uint32Array([2177025,6291456,2177057,6291456,2177089,6291456,2177121,6291456,2177153,6291456,2177185,6291456,2177217,6291456,2177249,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,0,6291456,6291456,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456]),new Uint32Array([0,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,6291456]),new Uint32Array([2134435,2134531,2134627,2134723,2134723,2134819,2134819,2134915,2134915,2135011,2105987,2135107,2135203,2135299,2131587,2135395]),new Uint32Array([0,0,0,0,0,0,0,6291456,2168673,2169249,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2147906,2147970,2148034,2148098,2148162,2148226,2148290,2148354,2147906,2147970,2148034,2148098,2148162,2148226,2148290,2148354]),new Uint32Array([2125219,2125315,2152834,2152898,2125411,2152962,2153026,2125506,2125507,2125603,2153090,2153154,2153218,2153282,2153346,2105348]),new Uint32Array([2203393,6291456,2203425,6291456,2203457,6291456,2203489,6291456,6291456,6291456,6291456,2203521,6291456,2181281,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,23068672,6291456,2145538,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,6291456]),new Uint32Array([2139426,2160834,2160898,2160962,2134242,2161026,2161090,2161154,2161218,2161282,2161346,2161410,2138658,2161474,2161538,2134722]),new Uint32Array([2119939,2124930,2125026,2106658,2125218,2128962,2129058,2129154,2129250,2129346,2129442,2108866,2108770,2150466,2150530,2150594]),new Uint32Array([2201601,6291456,2201633,6291456,2201665,6291456,2201697,6291456,2201729,6291456,2201761,6291456,2201793,6291456,2201825,6291456]),new Uint32Array([2193537,2193569,2193601,2193633,2193665,2193697,2193729,2193761,2193793,2193825,2193857,2193889,2193921,2193953,2193985,2194017]),new Uint32Array([6291456,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2190561,6291456,2190593,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2190625,6291456,2190657,6291456,23068672]),new Uint32Array([2215905,2215937,2215969,2216001,2216033,2216065,2216097,2216129,2216161,2216193,2216225,2216257,2105441,2216289,2216321,2216353]),new Uint32Array([23068672,18884130,23068672,23068672,23068672,6291456,23068672,23068672,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672]),new Uint32Array([23068672,23068672,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,23068672,23068672,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2191233,2191265,2191297,2191329,2191361,2191393,2191425,2117377,2191457,2191489,2191521,2191553,2191585,2191617,2191649,2117953]),new Uint32Array([2132227,2132323,2132419,2132419,2132515,2132515,2132611,2132707,2132707,2132803,2132899,2132899,2132995,2132995,2133091,2133187]),new Uint32Array([0,0,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,6291456,0,0]),new Uint32Array([2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,10609889,10610785,10609921,10610817,2222241]),new Uint32Array([6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,0,0]),new Uint32Array([2219969,2157121,2157441,2157505,2157889,2157953,2220001,2158465,2158529,10575617,2156994,2157058,2129923,2130019,2157122,2157186]),new Uint32Array([6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0]),new Uint32Array([2185249,6291456,2185281,6291456,2185313,6291456,2185345,6291456,2185377,6291456,2185409,6291456,2185441,6291456,2185473,6291456]),new Uint32Array([0,0,0,0,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,0,23068672,23068672,0,0,23068672,23068672,23068672,6291456,0]),new Uint32Array([2183361,6291456,2183393,6291456,2183425,6291456,2183457,6291456,2183489,6291456,2183521,6291456,2183553,6291456,2183585,6291456]),new Uint32Array([2192161,2192193,2192225,2192257,2192289,2192321,2192353,2192385,2192417,2192449,2192481,2192513,2192545,2192577,2192609,2192641]),new Uint32Array([2212001,2212033,2212065,2212097,2212129,2212161,2212193,2212225,2212257,2212289,2212321,2212353,2212385,2212417,2212449,2207265]),new Uint32Array([2249825,2249857,2249889,2249921,2249954,2250018,2250082,2250145,2250177,2250209,2250241,2250274,2250337,2250370,2250433,2250465]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2147905,2147969,2148033,2148097,2148161,2148225,2148289,2148353]),new Uint32Array([10485857,6291456,2197217,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,23068672,23068672]),new Uint32Array([0,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456]),new Uint32Array([2180353,2180385,2144033,2180417,2180449,2180481,2180513,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,10610209,10610465,10610241,10610753,10609857]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,0,0]),new Uint32Array([2223842,2223906,2223970,2224034,2224098,2224162,2224226,2224290,2224354,2224418,2224482,2224546,2224610,2224674,2224738,2224802]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,6291456,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456]),new Uint32Array([23068672,23068672,23068672,18923650,23068672,23068672,23068672,23068672,0,23068672,23068672,23068672,23068672,18923714,23068672,23068672]),new Uint32Array([2126179,2125538,2126275,2126371,2126467,2125634,2126563,2105603,2105604,2125346,2126659,2126755,2126851,2098179,2098181,2098182]),new Uint32Array([2227426,2227490,2227554,2227618,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2192353,2240642,2240642,2240705,2240737,2240737,2240769,2240802,2240866,2240929,2240961,2240993,2241025,2241057,2241089,2241121]),new Uint32Array([6291456,2170881,2170913,2170945,6291456,2170977,6291456,2171009,2171041,6291456,6291456,6291456,2171073,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2132226,2132514,2163586,2132610,2160386,2133090,2133186,2160450,2160514,2160578,2133570,2106178,2160642,2133858,2160706,2160770]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,10532162,10532226,10532290,10532354,10532418,10532482,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,23068672]),new Uint32Array([2098209,2108353,2108193,2108481,2170241,2111713,2105473,2105569,2105601,2112289,2112481,2098305,2108321,0,0,0]),new Uint32Array([2209121,2209153,2209185,2209217,2209249,2209281,2209313,2209345,2209377,2209409,2209441,2209473,2207265,2209505,2209537,2209569]),new Uint32Array([2189025,6291456,2189057,6291456,2189089,6291456,2189121,6291456,2189153,6291456,2189185,6291456,2189217,6291456,2189249,6291456]),new Uint32Array([2173825,2153473,2173857,2173889,2173921,2173953,2173985,2173761,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2233057]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2165764,2140004]),new Uint32Array([2215105,6291456,2215137,6291456,6291456,2215169,2215201,6291456,6291456,6291456,2215233,2215265,2215297,2215329,2215361,2215393]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,6291456,6291456,6291456,23068672,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([10505091,10505187,10505283,10505379,10505475,10505571,10505667,10505763,10505859,10505955,10506051,10506147,10506243,10506339,10506435,10506531]),new Uint32Array([2229730,2229794,2229858,2229922,2229986,2230050,2230114,2230178,2230242,2230306,2230370,2230434,2230498,2230562,2230626,2230690]),new Uint32Array([2105505,2098241,2108353,2108417,2105825,0,2100897,2111905,2105473,2105569,2105601,2112289,2108193,2112481,2112577,2098177]),new Uint32Array([6291456,6291456,6291456,6291456,10502115,10502178,10502211,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456]),new Uint32Array([2190305,6291456,2190337,6291456,2190369,6291456,2190401,6291456,2190433,6291456,2190465,6291456,2190497,6291456,2190529,6291456]),new Uint32Array([2173793,2173985,2174017,6291456,2173761,2173697,6291456,2174689,6291456,2174017,2174721,6291456,6291456,2174753,2174785,2174817]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2099521,2099105,2120705,2098369,2120801,2103361,2097985,2098433,2121377,2121473,2099169,2099873,2098401,2099393,2152609,2100033]),new Uint32Array([2132898,2163842,2163906,2133282,2132034,2131938,2137410,2132802,2132706,2164866,2133282,2160578,2165186,2165186,6291456,6291456]),new Uint32Array([10500003,10500099,10500195,10500291,10500387,10500483,10500579,10500675,10500771,10500867,10500963,10501059,10501155,10501251,10501347,10501443]),new Uint32Array([2163458,2130978,2131074,2131266,2131362,2163522,2160130,2132066,2131010,2131106,2106018,2131618,2131298,2132034,2131938,2137410]),new Uint32Array([2212961,2116993,2212993,2213025,2213057,2213089,2213121,2213153,2213185,2213217,2213249,2209633,2213281,2213313,2213345,2213377]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456]),new Uint32Array([2113729,2113825,2113921,2114017,2114113,2114209,2114305,2114401,2114497,2114593,2114689,2114785,2114881,2114977,2115073,2115169]),new Uint32Array([2238177,2238209,2238241,2238273,2238305,2238337,2238337,2217537,2238369,2238401,2238433,2238465,2215649,2238497,2238529,2238561]),new Uint32Array([2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905]),new Uint32Array([6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,0,0]),new Uint32Array([6291456,0,6291456,2145026,0,6291456,2145090,0,6291456,6291456,0,0,23068672,0,23068672,23068672]),new Uint32Array([2099233,2122017,2200673,2098113,2121537,2103201,2200705,2104033,2121857,2121953,2122401,2099649,2099969,2123009,2100129,2100289]),new Uint32Array([6291456,23068672,6291456,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,23068672,23068672,0,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0]),new Uint32Array([2187681,2187713,2187745,2187777,2187809,2187841,2187873,2187905,2187937,2187969,2188001,2188033,2188065,2188097,2188129,2188161]),new Uint32Array([0,10554498,10554562,10554626,10554690,10554754,10554818,10554882,10554946,10555010,10555074,6291456,6291456,0,0,0]),new Uint32Array([2235170,2235234,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0]),new Uint32Array([2181153,6291456,2188897,6291456,6291456,2188929,6291456,6291456,6291456,6291456,6291456,6291456,2111905,2100865,2188961,2188993]),new Uint32Array([2100833,2100897,0,0,2101569,2101697,2101825,2101953,2102081,2102209,10575617,2187041,10502177,10489601,10489697,2112289]),new Uint32Array([6291456,2172833,6291456,2172865,2172897,2172929,2172961,6291456,2172993,6291456,2173025,6291456,2173057,6291456,2173089,6291456]),new Uint32Array([6291456,0,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,0,0,23068672,6291456,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,2190721]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,23068672,6291456,6291456]),new Uint32Array([2184993,6291456,2185025,6291456,2185057,6291456,2185089,6291456,2185121,6291456,2185153,6291456,2185185,6291456,2185217,6291456]),new Uint32Array([2115265,2115361,2115457,2115553,2115649,2115745,2115841,2115937,2116033,2116129,2116225,2116321,2150658,2150722,2200225,6291456]),new Uint32Array([2168321,6291456,2168353,6291456,2168385,6291456,2168417,6291456,2168449,6291456,2168481,6291456,2168513,6291456,2168545,6291456]),new Uint32Array([23068672,23068672,23068672,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,0,6291456,6291456,6291456,6291456,0,0,0,6291456,6291456,0,6291456,0,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,2186625,0,0,6291456,6291456,2186657,2186689,2186721,2173505,0,10496067,10496163,10496259]),new Uint32Array([2178785,6291456,2178817,6291456,2178849,6291456,2178881,6291456,2178913,6291456,2178945,6291456,2178977,6291456,2179009,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0]),new Uint32Array([2097152,0,0,0,2097152,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,0,2197857,2197889,2197921,2197953,2197985,2198017,0,0,2198049,2198081,2198113,2198145,2198177,2198209]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2098209,2167297,2111137,6291456]),new Uint32Array([2171393,6291456,2171425,6291456,2171457,6291456,2171489,6291456,2171521,6291456,2171553,6291456,2171585,6291456,2171617,6291456]),new Uint32Array([2206753,2206785,2195457,2206817,2206849,2206881,2206913,2197153,2197153,2206945,2117857,2206977,2207009,2207041,2207073,2207105]),new Uint32Array([0,0,0,0,0,0,0,23068672,0,0,0,0,2144834,2144898,0,2144962]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,23068672]),new Uint32Array([2108193,2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2098209,0,2105505,2098241]),new Uint32Array([6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,2202049,6291456,2202081,6291456,2202113,6291456,2202145,6291456,2202177,6291456,2202209,6291456,2202241,6291456]),new Uint32Array([10501155,10501251,10501347,10501443,10501539,10501635,10501731,10501827,10501923,10502019,2141731,2105505,2098177,2155586,2166530,0]),new Uint32Array([2102081,2102209,2100833,2100737,2098337,2101441,2101569,2101697,2101825,2101953,2102081,2102209,2100833,2100737,2098337,2101441]),new Uint32Array([2146882,2146946,2147010,2147074,2147138,2147202,2147266,2147330,2146882,2146946,2147010,2147074,2147138,2147202,2147266,2147330]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0]),new Uint32Array([10502307,10502403,10502499,10502595,10502691,10502787,10502883,10502979,10503075,10503171,10503267,10503363,10503459,10503555,10503651,10503747]),new Uint32Array([2179937,2179969,2180001,2180033,2156545,2180065,2156577,2180097,2180129,2180161,2180193,2180225,2180257,2180289,2156737,2180321]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,0,0,0,6291456,0,0,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0]),new Uint32Array([2227682,2227746,2227810,2227874,2227938,2228002,2228066,2228130,2228194,2228258,2228322,2228386,2228450,2228514,2228578,2228642]),new Uint32Array([2105601,2169121,2108193,2170049,2181025,2181057,2112481,2108321,2108289,2181089,2170497,2100865,2181121,2173601,2173633,2173665]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2180641,6291456,6291456,6291456]),new Uint32Array([0,6291456,6291456,6291456,0,6291456,0,6291456,0,0,6291456,6291456,0,6291456,6291456,6291456]),new Uint32Array([2178273,6291456,2178305,6291456,2178337,6291456,2178369,6291456,2178401,6291456,2178433,6291456,2178465,6291456,2178497,6291456]),new Uint32Array([6291456,6291456,23068672,23068672,23068672,6291456,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,14680064,14680064,14680064,14680064,14680064,14680064]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456]),new Uint32Array([2237377,2237409,2236225,2237441,2237473,2217441,2215521,2215553,2217473,2237505,2237537,2209697,2237569,2215585,2237601,2237633]),new Uint32Array([2221985,2165601,2165601,2165665,2165665,2222017,2222017,2165729,2165729,2158913,2158913,2158913,2158913,2097281,2097281,2105921]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,23068672,23068672,23068672,0,23068672,23068672,23068672,23068672,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2149634,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2176897,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,2176929,6291456,2176961,6291456,2176993,6291456]),new Uint32Array([2172641,6291456,2172673,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2172705,2172737,6291456,2172769,2172801,6291456]),new Uint32Array([2099173,2104196,2121667,2099395,2121763,2152258,2152322,2098946,2152386,2121859,2121955,2099333,2122051,2104324,2099493,2122147]),new Uint32Array([6291456,6291456,6291456,2145794,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,2145858,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,0,0,6291456,0]),new Uint32Array([0,2105921,2097729,0,2097377,0,0,2106017,0,2097505,2105889,2097185,2097697,2135777,2097633,2097441]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2239074,2239138,2239201,2239233,2239265,2239297,2239329,2239361,0,2239393,2239425,2239425,2239458,2239521,2239553,2209569]),new Uint32Array([14680064,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,6291456,23068672]),new Uint32Array([2108321,2108289,2113153,2098209,2180897,2180929,2180961,2111137,2098241,2108353,2170241,2170273,2180993,2105825,6291456,2105473]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2146114,6291456,6291456,6291456,0,0,0]),new Uint32Array([2105921,2105921,2105921,2222049,2222049,2130977,2130977,2130977,2130977,2160065,2160065,2160065,2160065,2097729,2097729,2097729]),new Uint32Array([2218145,2214785,2207937,2218177,2218209,2192993,2210113,2212769,2218241,2218273,2216129,2218305,2216161,2218337,2218369,2218401]),new Uint32Array([0,0,0,2156546,2156610,2156674,2156738,2156802,0,0,0,0,0,2156866,23068672,2156930]),new Uint32Array([23068672,23068672,23068672,0,0,0,0,23068672,23068672,0,0,23068672,23068672,23068672,0,0]),new Uint32Array([2213409,2213441,2213473,2213505,2213537,2213569,2213601,2213633,2213665,2195681,2213697,2213729,2213761,2213793,2213825,2213857]),new Uint32Array([2100033,2099233,2122017,2200673,2098113,2121537,2103201,2200705,2104033,2121857,2121953,2122401,2099649,2099969,2123009,2100129]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0]),new Uint32Array([2201857,6291456,2201889,6291456,2201921,6291456,2201953,6291456,2201985,6291456,2202017,6291456,2176193,2176257,23068672,23068672]),new Uint32Array([6291456,6291456,23068672,23068672,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2188193,2188225,2188257,2188289,2188321,2188353,2188385,2188417,2188449,2188481,2188513,2188545,2188577,2188609,2188641,0]),new Uint32Array([10554529,2221089,0,10502113,10562017,10537921,10538049,2221121,2221153,0,0,0,0,0,0,0]),new Uint32Array([2213889,2213921,2213953,2213985,2214017,2214049,2214081,2194177,2214113,2214145,2214177,2214209,2214241,2214273,2214305,2214337]),new Uint32Array([2166978,2167042,2099169,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2180545,6291456,6291456,6291456]),new Uint32Array([10518915,10519011,10519107,10519203,2162242,2162306,2159554,2162370,2159362,2159618,2105922,2162434,2159746,2162498,2159810,2159874]),new Uint32Array([2161730,2161794,2135586,2161858,2161922,2137186,2131810,2160290,2135170,2161986,2137954,2162050,2162114,2162178,10518723,10518819]),new Uint32Array([10506627,10506723,10506819,10506915,10507011,10507107,10507203,10507299,10507395,10507491,10507587,10507683,10507779,10507875,10507971,10508067]),new Uint32Array([6291456,23068672,23068672,23068672,0,23068672,23068672,0,0,0,0,0,23068672,23068672,23068672,23068672]),new Uint32Array([23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0]),new Uint32Array([2175873,2175905,2175937,2175969,2176001,2176033,2176065,2176097,2176129,2176161,2176193,2176225,2176257,2176289,2176321,2176353]),new Uint32Array([2140006,2140198,2140390,2140582,2140774,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,23068672,23068672,23068672]),new Uint32Array([2108193,2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137,2105505,2098241]),new Uint32Array([0,23068672,0,0,0,0,0,0,0,2145154,2145218,2145282,6291456,0,2145346,0]),new Uint32Array([0,0,0,0,10531458,10495395,2148545,2143201,2173473,2148865,2173505,0,2173537,0,2173569,2149121]),new Uint32Array([10537282,10495683,2148738,2148802,2148866,0,6291456,2148930,2186593,2173473,2148737,2148865,2148802,10495779,10495875,10495971]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2215425,2215457,2215489,2215521,2215553,2215585,2215617,2215649,2215681,2215713,2215745,2215777,2192033,2215809,2215841,2215873]),new Uint32Array([2242049,2242081,2242113,2242145,2242177,2242209,2242241,2242273,2215937,2242305,2242338,2242401,2242433,2242465,2242497,2216001]),new Uint32Array([10554529,2221089,0,0,10562017,10502113,10538049,10537921,2221185,10489601,10489697,10609889,10609921,2141729,2141793,10610273]),new Uint32Array([2141923,2142019,2142115,2142211,2142307,2142403,2142499,2142595,2142691,0,0,0,0,0,0,0]),new Uint32Array([0,2221185,2221217,10609857,10609857,10489601,10489697,10609889,10609921,2141729,2141793,2221345,2221377,2221409,2221441,2187105]),new Uint32Array([6291456,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,18923970,23068672,23068672,23068672,0,6291456,6291456]),new Uint32Array([2183105,6291456,2183137,6291456,2183169,6291456,2183201,6291456,2183233,6291456,2183265,6291456,2183297,6291456,2183329,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0]),new Uint32Array([23068672,23068672,23068672,23068672,0,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456]),new Uint32Array([2134434,2134818,2097666,2097186,2097474,2097698,2105986,2131586,2132450,2131874,2131778,2135970,2135778,2161602,2136162,2161666]),new Uint32Array([2236865,2236897,2236930,2236993,2237025,2235681,2237058,2237121,2237153,2237185,2237217,2217281,2237250,2191233,2237313,2237345]),new Uint32Array([2190049,6291456,2190081,6291456,2190113,6291456,2190145,6291456,2190177,6291456,2190209,6291456,2190241,6291456,2190273,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2101922,2102050,2102178,2102306,10498755,10498851,10498947,10499043,10499139,10499235,10499331,10499427,10499523,10489604,10489732,10489860]),new Uint32Array([2166914,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0]),new Uint32Array([2181601,2170561,2181633,2181665,2170753,2181697,2172897,2170881,2181729,2170913,2172929,2113441,2181761,2181793,2171009,2173761]),new Uint32Array([0,2105921,2097729,2106081,0,2097601,2162337,2106017,2133281,2097505,0,2097185,2097697,2135777,2097633,2097441]),new Uint32Array([6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,0,0,0,0]),new Uint32Array([2248001,2248033,2248066,2248130,2248193,2248226,2248289,2248322,2248385,2248417,2216673,2248450,2248514,2248577,2248610,2248673]),new Uint32Array([6291456,6291456,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456,0,0,0]),new Uint32Array([2169729,6291456,2169761,6291456,2169793,6291456,2169825,6291456,2169857,2169889,6291456,2169921,6291456,2143329,6291456,2098305]),new Uint32Array([2162178,2163202,2163266,2135170,2136226,2161986,2137954,2159426,2159490,2163330,2159554,2163394,2159682,2139522,2136450,2159746]),new Uint32Array([2173953,2173985,0,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2174209,2174241,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,4271169,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2174273]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,0,0,0,0,0,0,0,6291456,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,2190785,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2189793,6291456,2189825,6291456,2189857,6291456,2189889,6291456,2189921,6291456,2189953,6291456,2189985,6291456,2190017,6291456]),new Uint32Array([2105601,2112289,2108193,2112481,2112577,0,2098305,2108321,2108289,2100865,2113153,2108481,2113345,0,2098209,2111137]),new Uint32Array([2172129,6291456,2172161,6291456,2172193,6291456,2172225,6291456,2172257,6291456,2172289,6291456,2172321,6291456,2172353,6291456]),new Uint32Array([2214753,6291456,2214785,6291456,6291456,2214817,2214849,2214881,2214913,2214945,2214977,2215009,2215041,2215073,2194401,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,6291456,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([0,0,0,0,6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([10610305,10610337,10575617,2221761,10610401,10610433,10502177,0,10610465,10610497,10610529,10610561,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,23068672,0,0,0,0,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2187105,2187137,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2199393,2199425,2199457,2199489,2199521,2199553,2199585,2199617,2199649,2199681,2199713,2199745,2199777,2199809,2199841,0]),new Uint32Array([2217249,2217281,2217313,2217345,2217377,2217409,2217441,2217473,2215617,2217505,2217537,2217569,2214753,2217601,2217633,2217665]),new Uint32Array([2170273,2170305,6291456,2170337,2170369,6291456,2170401,2170433,2170465,6291456,6291456,6291456,2170497,2170529,6291456,2170561]),new Uint32Array([2188673,6291456,2188705,2188737,2188769,6291456,6291456,2188801,6291456,2188833,6291456,2188865,6291456,2180929,2181505,2180897]),new Uint32Array([10489988,10490116,10490244,10490372,10490500,10490628,10490756,10490884,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2147393,2147457,2147521,2147585,2147649,2147713,2147777,2147841]),new Uint32Array([23068672,23068672,0,23068672,23068672,0,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0]),new Uint32Array([2241153,2241185,2241217,2215809,2241250,2241313,2241345,2241377,2217921,2241377,2241409,2215873,2241441,2241473,2241505,2241537]),new Uint32Array([23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2220417,2220417,2220449,2220449,2220481,2220481,2220513,2220513,2220545,2220545,2220577,2220577,2220609,2220609,2220641,2220641]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,2144002,0,6291456,6291456,0,0,6291456,6291456,6291456]),new Uint32Array([2167105,2167137,2167169,2167201,2167233,2167265,2167297,2167329,2167361,2167393,2167425,2167457,2167489,2167521,2167553,2167585]),new Uint32Array([10575521,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193]),new Uint32Array([2234146,2234210,2234274,2234338,2234402,2234466,2234530,2234594,2234658,2234722,2234786,2234850,2234914,2234978,2235042,2235106]),new Uint32Array([0,0,0,0,0,0,0,2180577,0,0,0,0,0,2180609,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,0,0,6291456,6291456]),new Uint32Array([2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193,2112481]),new Uint32Array([23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2242529,2242561,2242593,2242625,2242657,2242689,2242721,2242753,2207937,2218177,2242785,2242817,2242849,2242882,2242945,2242977]),new Uint32Array([2118049,2105345,2118241,2105441,2118433,2118529,2118625,2118721,2118817,2200257,2200289,2191809,2200321,2200353,2200385,2200417]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0]),new Uint32Array([2185505,6291456,2185537,6291456,2185569,6291456,2185601,6291456,2185633,6291456,2185665,6291456,2185697,6291456,2185729,6291456]),new Uint32Array([2231970,2232034,2232098,2232162,2232226,2232290,2232354,2232418,2232482,2232546,2232610,2232674,2232738,2232802,2232866,2232930]),new Uint32Array([2218625,2246402,2246466,2246530,2246594,2246657,2246689,2246689,2218657,2219681,2246721,2246753,2246785,2246818,2246881,2208481]),new Uint32Array([2197025,2197057,2197089,2197121,2197153,2197185,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2219137,2216961,2219169,2219201,2219233,2219265,2219297,2217025,2215041,2219329,2217057,2219361,2217089,2219393,2197153,2219426]),new Uint32Array([23068672,23068672,23068672,0,0,0,23068672,23068672,23068672,0,23068672,23068672,23068672,23068672,0,0]),new Uint32Array([2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713]),new Uint32Array([2243522,2243585,2243617,2243649,2243681,2210113,2243713,2243746,2243810,2243874,2243937,2243970,2244033,2244065,2244097,2244129]),new Uint32Array([2178017,6291456,2178049,6291456,2178081,6291456,2178113,6291456,2178145,6291456,2178177,6291456,2178209,6291456,2178241,6291456]),new Uint32Array([10553858,2165314,10518722,6291456,10518818,0,10518914,2130690,10519010,2130786,10519106,2130882,10519202,2165378,10554050,2165506]),new Uint32Array([0,0,2135491,2135587,2135683,2135779,2135875,2135971,2135971,2136067,2136163,2136259,2136355,2136355,2136451,2136547]),new Uint32Array([23068672,23068672,23068672,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2220033,2220033,2220065,2220065,2220065,2220065,2220097,2220097,2220097,2220097,2220129,2220129,2220129,2220129,2220161,2220161]),new Uint32Array([6291456,6291456,6291456,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,23068672,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2100897,2100898,2100899,2150018,2100865,2100866,2100867,2100868,2150082,2108481,2109858,2109859,2105569,2105505,2098241,2105601]),new Uint32Array([2097217,2097505,2097505,2097505,2097505,2165570,2165570,2165634,2165634,2165698,2165698,2097858,2097858,0,0,2097152]),new Uint32Array([23068672,6291456,23068672,23068672,23068672,6291456,6291456,23068672,23068672,6291456,6291456,6291456,6291456,6291456,23068672,23068672]),new Uint32Array([23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0]),new Uint32Array([10503843,10503939,10504035,10504131,10504227,10504323,10504419,10504515,10504611,10504707,10504803,10504899,10504995,10491140,10491268,0]),new Uint32Array([2173697,2173729,2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889,2173921,2173953,2173985,2173761,2174017,2174049]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2134145,2097153,2134241,2105953,2132705,2130977,2160065,2131297,2162049,2133089,2160577,2133857,2235297,2220769,2235329,2235361]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2222401,2222433,2222465,10531394,2222497,2222529,2222561,0,2222593,2222625,2222657,2222689,2222721,2222753,2222785,0]),new Uint32Array([2184481,6291456,2184513,6291456,2184545,6291456,2184577,6291456,2184609,6291456,2184641,6291456,2184673,6291456,2184705,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,23068672,0,0,0,0,0,0,0,0,0]),new Uint32Array([2105570,2156034,2126947,2156098,2153666,2127043,2127139,2156162,0,2127235,2156226,2156290,2156354,2156418,2127331,2127427]),new Uint32Array([2215905,2207041,2153185,2241569,2241601,2241633,2241665,2241697,2241730,2241793,2241825,2241857,2241889,2241921,2241954,2242017]),new Uint32Array([2203777,6291456,2203809,6291456,2203841,6291456,2203873,6291456,2203905,6291456,2173121,2180993,2181249,2203937,2181313,0]),new Uint32Array([2168577,6291456,2168609,6291456,2168641,6291456,2168673,6291456,2168705,6291456,2168737,6291456,2168769,6291456,2168801,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,23068672,23068672,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,0,23068672,23068672,23068672,0,23068672,23068672,23068672,0,0]),new Uint32Array([2210113,2195521,2210145,2210177,2210209,2210241,2210273,2210305,2210337,2210369,2210401,2210433,2210465,2210497,2210529,2210561]),new Uint32Array([6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0]),new Uint32Array([2228706,2228770,2228834,2228898,2228962,2229026,2229090,2229154,2229218,2229282,2229346,2229410,2229474,2229538,2229602,2229666]),new Uint32Array([23068672,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0,0,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,18874368,18874368,18874368,0,0]),new Uint32Array([2133089,2133281,2133281,2133281,2133281,2160577,2160577,2160577,2160577,2097441,2097441,2097441,2097441,2133857,2133857,2133857]),new Uint32Array([6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2173825,2153473,2173857,2173889,2173921,2173953,2173985,2174017,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2233089]),new Uint32Array([2178529,6291456,2178561,6291456,2178593,6291456,2178625,6291456,2178657,6291456,2178689,6291456,2178721,6291456,2178753,6291456]),new Uint32Array([2221025,2221025,2221057,2221057,2159329,2159329,2159329,2159329,2097217,2097217,2158914,2158914,2158978,2158978,2159042,2159042]),new Uint32Array([2208161,2208193,2208225,2208257,2194433,2208289,2208321,2208353,2208385,2208417,2208449,2208481,2208513,2208545,2208577,2208609]),new Uint32Array([2169217,6291456,2169249,6291456,2169281,6291456,2169313,6291456,2169345,6291456,2169377,6291456,2169409,6291456,2169441,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456]),new Uint32Array([2133187,2133283,2133283,2133379,2133475,2133571,2133667,2133667,2133763,2133859,2133955,2134051,2134147,2134147,2134243,2134339]),new Uint32Array([2197697,2114113,2114209,2197729,2197761,2114305,2197793,2114401,2114497,2197825,2114593,2114689,2114785,2114881,2114977,0]),new Uint32Array([2193089,2193121,2193153,2193185,2117665,2117569,2193217,2193249,2193281,2193313,2193345,2193377,2193409,2193441,2193473,2193505]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0]),new Uint32Array([6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2184225,6291456,2184257,6291456,2184289,6291456,2184321,6291456,2184353,6291456,2184385,6291456,2184417,6291456,2184449,6291456]),new Uint32Array([2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2100833,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2098657,2098049,2200737,2123489,2123681,2200769,2098625,2100321,2098145,2100449,2098017,2098753,2200801,2200833,2200865,0]),new Uint32Array([23068672,23068672,23068672,0,0,0,0,0,0,0,0,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0]),new Uint32Array([2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137,0,2098241,2108353,2108417,2105825,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2181153,2105505,2181185,2167617,2180993]),new Uint32Array([2160002,2160066,2160130,2160194,2160258,2132066,2131010,2131106,2106018,2131618,2160322,2131298,2132034,2131938,2137410,2132226]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0,6291456]),new Uint32Array([2183617,6291456,2183649,6291456,2183681,6291456,2183713,6291456,2183745,6291456,2183777,6291456,2183809,6291456,2183841,6291456]),new Uint32Array([0,6291456,6291456,0,6291456,0,0,6291456,6291456,0,6291456,0,0,6291456,0,0]),new Uint32Array([2250977,2251009,2251041,2251073,2195009,2251106,2251169,2251201,2251233,2251265,2251297,2251330,2251394,2251457,2251489,2251521]),new Uint32Array([2205729,2205761,2205793,2205825,2205857,2205889,2205921,2205953,2205985,2206017,2206049,2206081,2206113,2206145,2206177,2206209]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2143170,2168993,6291456,2169025,6291456,2169057,6291456,2169089,6291456,2143234,2169121,6291456,2169153,6291456,2169185,6291456]),new Uint32Array([23068672,23068672,2190689,6291456,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2248706,2248769,2248801,2248833,2248865,2248897,2248929,2248962,2249026,2249090,2249154,2240705,2249217,2249249,2249281,2249313]),new Uint32Array([10485857,6291456,6291456,6291456,6291456,6291456,6291456,6291456,10495394,6291456,2098209,6291456,6291456,2097152,6291456,10531394]),new Uint32Array([0,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,0]),new Uint32Array([14680064,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2173985,2173953,2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889]),new Uint32Array([6291456,2186977,6291456,6291456,6291456,6291456,6291456,10537858,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2209601,2209633,2209665,2209697,2209729,2209761,2209793,2209825,2209857,2209889,2209921,2209953,2209985,2210017,2210049,2210081]),new Uint32Array([10501539,10501635,10501731,10501827,10501923,10502019,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905]),new Uint32Array([2173697,2173729,2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889,2173921,2173953,2173985,2174017,2174017,2174049]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,0,0]),new Uint32Array([6291456,6291456,23068672,23068672,23068672,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2194561,2194593,2194625,2119777,2119873,2194657,2194689,2194721,2194753,2194785,2194817,2194849,2194881,2194913,2194945,2194977]),new Uint32Array([2113153,2108481,2113345,2113441,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569]),new Uint32Array([2222818,2222882,2222946,2223010,2223074,2223138,2223202,2223266,2223330,2223394,2223458,2223522,2223586,2223650,2223714,2223778]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672]),new Uint32Array([0,2179553,2179585,2179617,2179649,2144001,2179681,2179713,2179745,2179777,2179809,2156705,2179841,2156833,2179873,2179905]),new Uint32Array([6291456,23068672,6291456,2145602,23068672,23068672,23068672,23068672,23068672,23068672,0,23068672,23068672,6291456,0,0]),new Uint32Array([2196513,2196545,2196577,2196609,2196641,2196673,2196705,2196737,2196769,2196801,2196833,2196865,2196897,2196929,2196961,2196993]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2177281,6291456,2177313,6291456,2177345,6291456,2177377,6291456,2177409,6291456,2177441,6291456,2177473,6291456,2177505,6291456]),new Uint32Array([2187137,2221473,2221505,2221537,2221569,6291456,6291456,10610209,10610241,10537986,10537986,10537986,10537986,10609857,10609857,10609857]),new Uint32Array([2243009,2243041,2216033,2243074,2243137,2243169,2243201,2219617,2243233,2243265,2243297,2243329,2243362,2243425,2243457,2243489]),new Uint32Array([10485857,10485857,10485857,10485857,10485857,10485857,10485857,10485857,10485857,10485857,10485857,2097152,4194304,4194304,0,0]),new Uint32Array([2143042,6291456,2143106,2143106,2168833,6291456,2168865,6291456,6291456,2168897,6291456,2168929,6291456,2168961,6291456,2143170]),new Uint32Array([6291456,6291456,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2204193,2204225,2204257,2204289,2204321,2204353,2204385,2204417,2204449,2204481,2204513,2204545,2204577,2204609,2204641,2204673]),new Uint32Array([2202753,6291456,2202785,6291456,2202817,6291456,2202849,6291456,2202881,6291456,2202913,6291456,2202945,6291456,2202977,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193,2112481,2112577,2098177,2098305,2108321]),new Uint32Array([2147394,2147458,2147522,2147586,2147650,2147714,2147778,2147842,2147394,2147458,2147522,2147586,2147650,2147714,2147778,2147842]),new Uint32Array([2253313,2253346,2253409,2253441,2253473,2253505,2253537,2253569,2253601,2253634,2219393,2253697,2253729,2253761,2253793,2253825]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([2162562,2162626,2131362,2162690,2159938,2160002,2162754,2162818,2160130,2162882,2160194,2160258,2160834,2160898,2161026,2161090]),new Uint32Array([2175361,2175393,2175425,2175457,2175489,2175521,2175553,2175585,2175617,2175649,2175681,2175713,2175745,2175777,2175809,2175841]),new Uint32Array([2253858,2253921,2253954,2254018,2254082,2196737,2254145,2196865,2254177,2254209,2254241,2254273,2197025,2254306,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2202113,2204129,2188705,2204161]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,0,6291456,6291456,6291456,6291456,0,0]),new Uint32Array([2173985,2174017,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2233089,2173697,2173761,2173793,2174113,2173985,2173953]),new Uint32Array([2101569,2101697,2101825,2101953,2102081,2102209,2100833,2100737,2098337,2101441,2101569,2101697,2101825,2101953,2102081,2102209]),new Uint32Array([2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137,2105505,2098241,0,2108417,0,2111713,2100897,2111905]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0,0,0,0]),new Uint32Array([2175425,2175489,2175809,2175905,2175937,2175937,2176193,2176417,2180865,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,2143298,2143298,2143298,2143362,2143362,2143362,2143426,2143426,2143426,2171105,6291456,2171137]),new Uint32Array([2120162,2120258,2151618,2151682,2151746,2151810,2151874,2151938,2152002,2120035,2120131,2120227,2152066,2120323,2152130,2120419]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2195361,2142433,2236065,2236097,2236129,2236161,2118241,2117473,2236193,2236225,2236257,2236289,0,0,0,0]),new Uint32Array([2189281,6291456,2189313,6291456,2189345,6291456,2189377,6291456,2189409,6291456,2189441,6291456,2189473,6291456,2189505,6291456]),new Uint32Array([6291456,6291456,2145922,6291456,6291456,6291456,6291456,2145986,6291456,6291456,6291456,6291456,2146050,6291456,6291456,6291456]),new Uint32Array([2100833,2100737,2098337,2101441,2101569,2101697,2101825,2101953,2102081,2102209,10502113,10562017,10610401,10502177,10610433,10538049]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,2186401,0,2186433,0,2186465,0,2186497]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,23068672,23068672,23068672]),new Uint32Array([0,0,2198241,2198273,2198305,2198337,2198369,2198401,0,0,2198433,2198465,2198497,0,0,0]),new Uint32Array([6291456,0,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,0,6291456,0,23068672,23068672,23068672,23068672,23068672,23068672,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,0,0,23068672,6291456,23068672,23068672]),new Uint32Array([0,2105921,2097729,0,2097377,0,0,2106017,2133281,2097505,2105889,0,2097697,2135777,2097633,2097441]),new Uint32Array([2197889,2197921,2197953,2197985,2198017,2198049,2198081,2198113,2198145,2198177,2198209,2198241,2198273,2198305,2198337,2198369]),new Uint32Array([2132514,2132610,2160386,2133090,2133186,2160450,2160514,2133282,2160578,2133570,2106178,2160642,2133858,2160706,2160770,2134146]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,23068672,0,0,0,0,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,23068672,23068672,6291456,23068672,23068672,6291456,23068672,0,0,0,0,0,0,0,0]),new Uint32Array([2184737,6291456,2184769,6291456,2184801,6291456,2184833,6291456,2184865,6291456,2184897,6291456,2184929,6291456,2184961,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,0,6291456,6291456,6291456,6291456,0,6291456]),new Uint32Array([6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,6291456,23068672,23068672,23068672,6291456,23068672,23068672,23068672,23068672,23068672,0,0]),new Uint32Array([6291456,6291456,6291456,2186753,6291456,6291456,6291456,6291456,2186785,2186817,2186849,2173569,2186881,10496355,10495395,10575521]),new Uint32Array([0,0,2097729,0,0,0,0,2106017,0,2097505,0,2097185,0,2135777,2097633,2097441]),new Uint32Array([2189537,6291456,2189569,6291456,2189601,6291456,2189633,6291456,2189665,6291456,2189697,6291456,2189729,6291456,2189761,6291456]),new Uint32Array([2202497,6291456,2202529,6291456,2202561,6291456,2202593,6291456,2202625,6291456,2202657,6291456,2202689,6291456,2202721,6291456]),new Uint32Array([2245217,2218369,2245249,2245282,2245345,2245377,2245410,2245474,2245537,2245569,2245601,2245633,2245665,2245665,2245697,2245729]),new Uint32Array([6291456,0,23068672,23068672,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,0,0,0,0,0,0,23068672,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,6291456,23068672,6291456,23068672,6291456,6291456,6291456,6291456,23068672,23068672]),new Uint32Array([0,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0]),new Uint32Array([2097281,2105921,2097729,2106081,2097377,2097601,2162337,2106017,2133281,2097505,0,2097185,2097697,2135777,2097633,2097441]),new Uint32Array([2176641,6291456,2176673,6291456,2176705,6291456,2176737,6291456,2176769,6291456,2176801,6291456,2176833,6291456,2176865,6291456]),new Uint32Array([2174145,2174177,2149057,2233089,2173697,2173761,2173793,2174113,2173985,2173953,2174369,2174369,0,0,2100833,2100737]),new Uint32Array([2116513,2190817,2190849,2190881,2190913,2190945,2116609,2190977,2191009,2191041,2191073,2117185,2191105,2191137,2191169,2191201]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,6291456,6291456,6291456]),new Uint32Array([0,0,0,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456]),new Uint32Array([2167617,2167649,2167681,2167713,2167745,2167777,2167809,6291456,2167841,2167873,2167905,2167937,2167969,2168001,2168033,4240130]),new Uint32Array([2165122,2163970,2164034,2164098,2164162,2164226,2164290,2164354,2164418,2164482,2164546,2133122,2134562,2132162,2132834,2136866]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,2186209,2186241,2186273,2186305,2186337,2186369,0,0]),new Uint32Array([2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,14680064,14680064,14680064,14680064,14680064]),new Uint32Array([0,0,23068672,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456,6291456]),new Uint32Array([0,10537921,10610689,10610273,10610497,10610529,10610305,10610721,10489601,10489697,10610337,10575617,10554529,2221761,2197217,10496577]),new Uint32Array([2105473,2105569,2105601,2112289,0,2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441]),new Uint32Array([2100897,2111905,2105473,2105569,2105601,2112289,2108193,2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481]),new Uint32Array([2125346,2153410,2153474,2127394,2153538,2153602,2153666,2153730,2105507,2105476,2153794,2153858,2153922,2153986,2154050,2105794]),new Uint32Array([2200449,2119681,2200481,2153313,2199873,2199905,2199937,2200513,2200545,2200577,2200609,2119105,2119201,2119297,2119393,2119489]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2175777,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2222273,2197217,2221473,2221505,2221089,2222305,2200865,2099681,2104481,2222337,2099905,2120737,2222369,2103713,2100225,2098785]),new Uint32Array([2201377,6291456,2201409,6291456,2201441,6291456,2201473,6291456,2201505,6291456,2201537,6291456,2201569,6291456,6291456,23068672]),new Uint32Array([2174081,2174113,2174145,2174177,2149057,2233057,2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761,2143969,2173793]),new Uint32Array([2200897,6291456,2200929,6291456,2200961,6291456,2200993,6291456,2201025,6291456,2180865,6291456,2201057,6291456,2201089,6291456]),new Uint32Array([0,0,0,0,0,23068672,23068672,0,6291456,6291456,6291456,0,0,0,0,0]),new Uint32Array([2161154,2161410,2138658,2161474,2161538,2097666,2097186,2097474,2162946,2132450,2163010,2163074,2136162,2163138,2161666,2161730]),new Uint32Array([2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889,2173921,2173953]),new Uint32Array([0,0,0,0,0,0,23068672,23068672,0,0,0,0,2145410,2145474,0,6291456]),new Uint32Array([2244161,2216065,2212769,2244193,2244225,2244257,2244290,2244353,2244385,2244417,2244449,2218273,2244481,2244514,2244577,2244609]),new Uint32Array([2125730,2125699,2125795,2125891,2125987,2154114,2154178,2154242,2154306,2154370,2154434,2154498,2126082,2126178,2126274,2126083]),new Uint32Array([2237665,2237697,2237697,2237697,2237730,2237793,2237825,2237857,2237890,2237953,2237985,2238017,2238049,2238081,2238113,2238145]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2150146,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,0,23068672,23068672,0,0,23068672,23068672,23068672,0,0]),new Uint32Array([2214369,2238593,2238625,2238657,2238689,2238721,2238753,2238785,2238817,2238850,2238913,2238945,2238977,2235457,2239009,2239041]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0]),new Uint32Array([2252066,2252130,2252193,2252225,2252257,2252290,2252353,2252385,2252417,2252449,2252481,2252513,2252545,2252578,2252641,2252673]),new Uint32Array([2197697,2114113,2114209,2197729,2197761,2114305,2197793,2114401,2114497,2197825,2114593,2114689,2114785,2114881,2114977,2197857]),new Uint32Array([2224866,2224930,2224994,2225058,2225122,2225186,2225250,2225314,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2219490,2219554,2219617,2219649,2219681,2219714,2219778,2219842,2219905,2219937,0,0,0,0,0,0]),new Uint32Array([6291456,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456]),new Uint32Array([2113345,2113441,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289]),new Uint32Array([2174081,2174113,2174145,2174177,2149057,2233089,2173697,2173761,2173793,2174113,2173985,2173953,2148481,2173601,2173633,2173665]),new Uint32Array([2220161,2220161,2220193,2220193,2220193,2220193,2220225,2220225,2220225,2220225,2220257,2220257,2220257,2220257,2220289,2220289]),new Uint32Array([2192673,2192705,2192737,2192769,2192801,2192833,2192865,2118049,2192897,2117473,2117761,2192929,2192961,2192993,2193025,2193057]),new Uint32Array([2179297,6291456,2179329,6291456,2179361,6291456,2179393,6291456,2179425,6291456,2179457,6291456,2179489,6291456,2179521,6291456]),new Uint32Array([6291456,6291456,6291456,23068672,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0]),new Uint32Array([2235745,2235777,2193633,2235809,2235841,2235873,2235905,2235937,2235969,2116513,2116705,2236001,2200513,2199905,2200545,2236033]),new Uint32Array([2113153,2108481,2113345,2113441,2232993,2233025,0,0,2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761]),new Uint32Array([2170593,6291456,2170625,6291456,2170657,6291456,2170689,2170721,6291456,2170753,6291456,6291456,2170785,6291456,2170817,2170849]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2166786,2166850,0,0,0,0]),new Uint32Array([23068672,6291456,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456]),new Uint32Array([2100833,2100737,2098337,2101441,2101569,2101697,2101825,2101953,2102081,2102209,10575617,2187041,10502177,10489601,10489697,0]),new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2134562,2132162,2132834,2136866,2136482,2164610,2164674,2164738,2164802,2132802,2132706,2164866,2132898,2164930,2164994,2165058]),new Uint32Array([6291456,6291456,2098337,2101441,10531458,2153473,6291456,6291456,10531522,2100737,2108193,6291456,2106499,2106595,2106691,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0,0,0,0,0]),new Uint32Array([2233122,2233186,2233250,2233314,2233378,2233442,2233506,2233570,2233634,2233698,2233762,2233826,2233890,2233954,2234018,2234082]),new Uint32Array([23068672,6291456,23068672,23068672,23068672,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2205217,2205249,2205281,2205313,2205345,2205377,2205409,2205441,2205473,2205505,2205537,2205569,2205601,2205633,2205665,2205697]),new Uint32Array([6291456,0,6291456,0,0,0,6291456,6291456,6291456,6291456,0,0,23068672,6291456,23068672,23068672]),new Uint32Array([2173601,2173761,2174081,2173569,2174241,2174113,2173953,6291456,2174305,6291456,2174337,6291456,2174369,6291456,2174401,6291456]),new Uint32Array([6291456,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456]),new Uint32Array([2152450,2152514,2099653,2104452,2099813,2122243,2099973,2152578,2122339,2122435,2122531,2122627,2122723,2104580,2122819,2152642]),new Uint32Array([2236385,2236417,2236449,2236482,2236545,2215425,2236577,2236609,2236641,2236673,2215457,2236705,2236737,2236770,2215489,2236833]),new Uint32Array([2163394,2159746,2163458,2131362,2163522,2160130,2163778,2132226,2163842,2132898,2163906,2161410,2138658,2097666,2136162,2163650]),new Uint32Array([2218721,2246913,2246946,2216385,2247010,2247074,2215009,2247137,2247169,2216481,2247201,2247233,2247266,2247330,2247330,0]),new Uint32Array([2129730,2129762,2129858,2129731,2129827,2156482,2156482,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,0,0,0,0,0,6291456,0,0]),new Uint32Array([2203969,2204001,2181377,2204033,2204065,6291456,2204097,6291456,0,0,0,0,0,0,0,0]),new Uint32Array([2169473,6291456,2169505,6291456,2169537,6291456,2169569,6291456,2169601,6291456,2169633,6291456,2169665,6291456,2169697,6291456]),new Uint32Array([2141542,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2220801,2220801,2220801,2220801,2220833,2220833,2220865,2220865,2220865,2220865,2220897,2220897,2220897,2220897,2139873,2139873]),new Uint32Array([0,0,0,0,0,23068672,23068672,0,0,0,0,0,0,0,6291456,0]),new Uint32Array([2214849,2218433,2218465,2218497,2218529,2218561,2214881,2218593,2218625,2218657,2218689,2218721,2218753,2216545,2218785,2218817]),new Uint32Array([23068672,23068672,23068672,23068672,0,0,0,0,0,0,0,0,0,0,0,6291456]),new Uint32Array([2136482,2164610,2164674,2164738,2164802,2132802,2132706,2164866,2132898,2164930,2164994,2165058,2165122,2132802,2132706,2164866]),new Uint32Array([2207649,2207681,2207713,2207745,2207777,2207809,2207841,2207873,2207905,2207937,2207969,2208001,2208033,2208065,2208097,2208129]),new Uint32Array([2123683,2105092,2152706,2123779,2105220,2152770,2100453,2098755,2123906,2124002,2124098,2124194,2124290,2124386,2124482,2124578]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,0,6291456,0,0,0,0,0,0,0,10485857]),new Uint32Array([6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([10508163,10508259,10508355,10508451,2200129,2200161,2192737,2200193,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2203553,6291456,2203585,6291456,6291456,6291456,2203617,6291456,2203649,6291456,2203681,6291456,2203713,6291456,2203745,6291456]),new Uint32Array([18884449,18884065,23068672,18884417,18884034,18921185,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,18874368]),new Uint32Array([2247393,2247426,2247489,2247521,2247553,2247586,2247649,2247681,2247713,2247745,2247777,2247810,2247873,2247905,2247937,2247969]),new Uint32Array([6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,23068672]),new Uint32Array([2134145,2097153,2134241,0,2132705,2130977,2160065,2131297,0,2133089,2160577,2133857,2235297,0,2235329,0]),new Uint32Array([2182593,6291456,2182625,6291456,2182657,6291456,2182689,6291456,2182721,6291456,2182753,6291456,2182785,6291456,2182817,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2102402,2102403,6291456,2110050]),new Uint32Array([2149890,2108323,2149954,6291456,2113441,6291456,2149057,6291456,2113441,6291456,2105473,2167265,2111137,2105505,6291456,2108353]),new Uint32Array([2219105,2219137,2195233,2251554,2251617,2251649,2251681,2251713,2251746,2251810,2251873,2251905,2251937,2251970,2252033,2219169]),new Uint32Array([2203009,6291456,2203041,6291456,2203073,6291456,2203105,6291456,2203137,6291456,2203169,6291456,2203201,6291456,2203233,6291456]),new Uint32Array([2128195,2128291,2128387,2128483,2128579,2128675,2128771,2128867,2128963,2129059,2129155,2129251,2129347,2129443,2129539,2129635]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2140964,2141156,2140966,2141158,2141350]),new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2225378,2225442,2225506,2225570,2225634,2225698,2225762,2225826,2225890,2225954,2226018,2226082,2226146,2226210,2226274,2226338]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137,2105505,2098241,2108353,2108417]),new Uint32Array([2108353,2108417,0,2105601,2108193,2157121,2157313,2157377,2157441,2100897,6291456,2108419,2173953,2173633,2173633,2173953]),new Uint32Array([2111713,2173121,2111905,2098177,2173153,2173185,2173217,2113153,2113345,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,2190753]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,2197249,6291456,2117377,2197281,2197313,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,0,0,0,0,0,0,23068672,0,0,0,0,0,6291456,6291456,6291456]),new Uint32Array([2098337,2101441,2101569,2101697,2101825,2101953,2102081,2102209,2100833,2100737,2098337,2101441,2101569,2101697,2101825,2101953]),new Uint32Array([23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0]),new Uint32Array([0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,23068672,23068672,23068672]),new Uint32Array([2173281,6291456,2173313,6291456,2173345,6291456,2173377,6291456,0,0,10532546,6291456,6291456,6291456,10562017,2173441]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,0,0]),new Uint32Array([23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2159426,2159490,2159554,2159362,2159618,2159682,2139522,2136450,2159746,2159810,2159874,2130978,2131074,2131266,2131362,2159938]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2203233,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2203265,6291456,2203297,6291456,2203329,2203361,6291456]),new Uint32Array([6291456,6291456,2148418,2148482,2148546,0,6291456,2148610,2186529,2186561,2148417,2148545,2148482,10495778,2143969,10495778]),new Uint32Array([2134146,2139426,2160962,2134242,2161218,2161282,2161346,2161410,2138658,2134722,2134434,2134818,2097666,2097346,2097698,2105986]),new Uint32Array([2198881,2198913,2198945,2198977,2199009,2199041,2199073,2199105,2199137,2199169,2199201,2199233,2199265,2199297,2199329,2199361]),new Uint32Array([0,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456]),new Uint32Array([10610561,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193]),new Uint32Array([2183873,6291456,2183905,6291456,2183937,6291456,2183969,6291456,2184001,6291456,2184033,6291456,2184065,6291456,2184097,6291456]),new Uint32Array([2244642,2244706,2244769,2244801,2218305,2244833,2244865,2244897,2244929,2244961,2244993,2245026,2245089,2245122,2245185,0]),new Uint32Array([6291456,6291456,2116513,2116609,2116705,2116801,2199873,2199905,2199937,2199969,2190913,2200001,2200033,2200065,2200097,2191009]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,2180673,2180705,2180737,2180769,2180801,2180833,0,0]),new Uint32Array([2098081,2099521,2099105,2120705,2098369,2120801,2103361,2097985,2098433,2121377,2121473,2099169,2099873,2098401,2099393,2152609]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2150402]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,2145666,2145730,6291456,6291456]),new Uint32Array([2173921,2173953,2173985,2173761,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2233057,2148481,2173601,2173633,2173665]),new Uint32Array([2187073,6291456,6291456,6291456,6291456,2098241,2098241,2108353,2100897,2111905,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2102404,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,2100612,6291456,6291456,6291456,6291456,6291456,6291456,6291456,10485857]),new Uint32Array([2149057,2233057,2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889]),new Uint32Array([2217697,2217729,2217761,2217793,2217825,2217857,2217889,2217921,2217953,2215873,2217985,2215905,2218017,2218049,2218081,2218113]),new Uint32Array([2211233,2218849,2216673,2218881,2218913,2218945,2218977,2219009,2216833,2219041,2215137,2219073,2216865,2209505,2219105,2216897]),new Uint32Array([2240097,2240129,2240161,2240193,2240225,2240257,2240289,2240321,2240353,2240386,2240449,2240481,2240513,2240545,2207905,2240578]),new Uint32Array([6291456,6291456,2202273,6291456,2202305,6291456,2202337,6291456,2202369,6291456,2202401,6291456,2202433,6291456,2202465,6291456]),new Uint32Array([0,23068672,23068672,18923394,23068672,18923458,18923522,18884099,18923586,18884195,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2201121,6291456,2201153,6291456,2201185,6291456,2201217,6291456,2201249,6291456,2201281,6291456,2201313,6291456,2201345,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456,6291456]),new Uint32Array([2211041,2211073,2211105,2211137,2211169,2211201,2211233,2211265,2211297,2211329,2211361,2211393,2211425,2211457,2211489,2211521]),new Uint32Array([2181825,6291456,2181857,6291456,2181889,6291456,2181921,6291456,2181953,6291456,2181985,6291456,2182017,6291456,2182049,6291456]),new Uint32Array([2162337,2097633,2097633,2097633,2097633,2132705,2132705,2132705,2132705,2097153,2097153,2097153,2097153,2133089,2133089,2133089]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,2148545,6291456,2173473,6291456,2148865,6291456,2173505,6291456,2173537,6291456,2173569,6291456,2149121,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,0,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0]),new Uint32Array([2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889,2173921,2173953,2173985,2174017,2174017,2174049,2174081,2174113]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2207137,2207169,2207201,2207233,2207265,2207297,2207329,2207361,2207393,2207425,2207457,2207489,2207521,2207553,2207585,2207617]),new Uint32Array([6291456,6291456,23068672,23068672,23068672,6291456,6291456,0,23068672,23068672,0,0,0,0,0,0]),new Uint32Array([2198401,2198433,2198465,2198497,0,2198529,2198561,2198593,2198625,2198657,2198689,2198721,2198753,2198785,2198817,2198849]),new Uint32Array([2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193,2112481,2112577,2098177]),new Uint32Array([23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,0,0]),new Uint32Array([2216385,2118721,2216417,2216449,2216481,2216513,2216545,2211233,2216577,2216609,2216641,2216673,2216705,2216737,2216737,2216769]),new Uint32Array([2216801,2216833,2216865,2216897,2216929,2216961,2216993,2215169,2217025,2217057,2217089,2217121,2217154,2217217,0,0]),new Uint32Array([2210593,2191809,2210625,2210657,2210689,2210721,2210753,2210785,2210817,2210849,2191297,2210881,2210913,2210945,2210977,2211009]),new Uint32Array([0,0,2105825,0,0,2111905,2105473,0,0,2112289,2108193,2112481,2112577,0,2098305,2108321]),new Uint32Array([0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,2097153,2134241,0,2132705,0,0,2131297,0,2133089,0,2133857,0,2220769,0,2235361]),new Uint32Array([14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,6291456,6291456,14680064]),new Uint32Array([23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0]),new Uint32Array([2171873,6291456,2171905,6291456,2171937,6291456,2171969,6291456,2172001,6291456,2172033,6291456,2172065,6291456,2172097,6291456]),new Uint32Array([2220929,2220929,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2133857,2134145,2134145,2134145,2134145,2134241,2134241,2134241,2134241,2105889,2105889,2105889,2105889,2097185,2097185,2097185]),new Uint32Array([2173697,2173761,2173793,2174113,2173985,2173953,2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761,2143969,2173793]),new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,0,10499619,10499715,10499811,10499907]),new Uint32Array([0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,0,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,0,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,0,23068672,23068672,23068672,0,23068672,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,6291456,23068672,23068672]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,2144322,2144386,2144450,2144514,2144578,2144642,2144706,2144770]),new Uint32Array([23068672,23068672,23068672,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456]),new Uint32Array([2113153,2108481,2113345,2113441,2098209,2111137,0,2098241,2108353,2108417,2105825,0,0,2111905,2105473,2105569]),new Uint32Array([2236321,2236353,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2152194,2121283,2103684,2103812,2097986,2098533,2097990,2098693,2098595,2098853,2099013,2103940,2121379,2121475,2121571,2104068]),new Uint32Array([2206241,2206273,2206305,2206337,2206369,2206401,2206433,2206465,2206497,2206529,2206561,2206593,2206625,2206657,2206689,2206721]),new Uint32Array([6291456,6291456,6291456,6291456,16777216,16777216,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,23068672,23068672,10538818,10538882,6291456,6291456,2150338]),new Uint32Array([6291456,6291456,6291456,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2214369,2214401,2214433,2214465,2214497,2214529,2214561,2214593,2194977,2214625,2195073,2214657,2214689,2214721,6291456,6291456]),new Uint32Array([2097152,2097152,2097152,2097152,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2182081,6291456,2182113,6291456,2182145,6291456,2182177,6291456,2182209,6291456,2182241,6291456,2182273,6291456,2182305,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2146881,2146945,2147009,2147073,2147137,2147201,2147265,2147329]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,23068672,23068672]),new Uint32Array([0,0,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2122915,2123011,2123107,2104708,2123203,2123299,2123395,2100133,2104836,2100290,2100293,2104962,2104964,2098052,2123491,2123587]),new Uint32Array([23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456]),new Uint32Array([6291456,2171169,6291456,2171201,6291456,2171233,6291456,2171265,6291456,2171297,6291456,2171329,6291456,6291456,2171361,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,0,2148994,2149058,2149122,0,6291456,2149186,2186945,2173537,2148993,2149121,2149058,10531458,10496066,0]),new Uint32Array([2195009,2195041,2195073,2195105,2195137,2195169,2195201,2195233,2195265,2195297,2195329,2195361,2195393,2195425,2195457,2195489]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,0,0,6291456,6291456]),new Uint32Array([2182849,6291456,2182881,6291456,2182913,6291456,2182945,6291456,2182977,6291456,2183009,6291456,2183041,6291456,2183073,6291456]),new Uint32Array([2211553,2210081,2211585,2211617,2211649,2211681,2211713,2211745,2211777,2211809,2209569,2211841,2211873,2211905,2211937,2211969]),new Uint32Array([2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2166594,2127298,2166658,2142978,2141827,2166722]),new Uint32Array([2173985,2173761,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2233057,2148481,2173601,2173633,2173665,2173697,2173729]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,0,0,2185761,2185793,2185825,2185857,2185889,2185921,0,0]),new Uint32Array([6291456,2148481,2173601,2173633,2173665,2173697,2173729,2148801,2173761,2143969,2173793,2173825,2153473,2173857,2173889,2173921]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,6291456]),new Uint32Array([0,0,0,2220961,2220961,2220961,2220961,2144193,2144193,2159201,2159201,2159265,2159265,2144194,2220993,2220993]),new Uint32Array([2192641,2235393,2235425,2152257,2116609,2235457,2235489,2200065,2235521,2235553,2235585,2212449,2235617,2235649,2235681,2235713]),new Uint32Array([2194049,2194081,2194113,2194145,2194177,2194209,2194241,2194273,2194305,2194337,2194369,2194401,2194433,2194465,2194497,2194529]),new Uint32Array([2196673,2208641,2208673,2208705,2208737,2208769,2208801,2208833,2208865,2208897,2208929,2208961,2208993,2209025,2209057,2209089]),new Uint32Array([2191681,2191713,2191745,2191777,2153281,2191809,2191841,2191873,2191905,2191937,2191969,2192001,2192033,2192065,2192097,2192129]),new Uint32Array([2230946,2231010,2231074,2231138,2231202,2231266,2231330,2231394,2231458,2231522,2231586,2231650,2231714,2231778,2231842,2231906]),new Uint32Array([14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064,14680064]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,2185953,2185985,2186017,2186049,2186081,2186113,2186145,2186177]),new Uint32Array([2139811,2139907,2097284,2105860,2105988,2106116,2106244,2097444,2097604,2097155,10485778,10486344,2106372,6291456,0,0]),new Uint32Array([2110051,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,0,0,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2172385,6291456,2172417,6291456,2172449,6291456,2172481,6291456,2172513,6291456,2172545,6291456,2172577,6291456,2172609,6291456]),new Uint32Array([0,0,23068672,23068672,6291456,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2249345,2249377,2249409,2249441,2249473,2249505,2249537,2249570,2210209,2249633,2249665,2249697,2249729,2249761,2249793,2216769]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,6291456,6291456,6291456,6291456]),new Uint32Array([2187169,2187201,2187233,2187265,2187297,2187329,2187361,2187393,2187425,2187457,2187489,2187521,2187553,2187585,2187617,2187649]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([0,0,0,6291456,6291456,0,0,0,6291456,6291456,6291456,0,0,0,6291456,6291456]),new Uint32Array([2182337,6291456,2182369,6291456,2182401,6291456,2182433,6291456,2182465,6291456,2182497,6291456,2182529,6291456,2182561,6291456]),new Uint32Array([2138179,2138275,2138371,2138467,2134243,2134435,2138563,2138659,2138755,2138851,2138947,2139043,2138947,2138755,2139139,2139235]),new Uint32Array([23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0]),new Uint32Array([0,0,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2250498,2250562,2250625,2250657,2208321,2250689,2250721,2250753,2250785,2250817,2250849,2218945,2250881,2250913,2250945,0]),new Uint32Array([2170369,2105569,2098305,2108481,2173249,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456]),new Uint32Array([2100897,2111905,2105473,2105569,2105601,0,2108193,0,0,0,2098305,2108321,2108289,2100865,2113153,2108481]),new Uint32Array([2100897,2100897,2105569,2105569,6291456,2112289,2149826,6291456,6291456,2112481,2112577,2098177,2098177,2098177,6291456,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,6291456,6291456,6291456]),new Uint32Array([6291456,2169953,2169985,6291456,2170017,6291456,2170049,2170081,6291456,2170113,2170145,2170177,6291456,6291456,2170209,2170241]),new Uint32Array([6291456,6291456,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([0,0,0,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2220641,2220641,2220673,2220673,2220673,2220673,2220705,2220705,2220705,2220705,2220737,2220737,2220737,2220737,2220769,2220769]),new Uint32Array([2127650,2127746,2127842,2127938,2128034,2128130,2128226,2128322,2128418,2127523,2127619,2127715,2127811,2127907,2128003,2128099]),new Uint32Array([2143969,2173793,2173825,2153473,2173857,2173889,2173921,2173953,2173985,2173761,2174017,2174049,2174081,2174113,2174145,2174177]),new Uint32Array([0,0,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([2204705,2204737,2204769,2204801,2204833,2204865,2204897,2204929,2204961,2204993,2205025,2205057,2205089,2205121,2205153,2205185]),new Uint32Array([2176385,6291456,2176417,6291456,2176449,6291456,2176481,6291456,2176513,6291456,2176545,6291456,2176577,6291456,2176609,6291456]),new Uint32Array([2195521,2195553,2195585,2195617,2195649,2195681,2117857,2195713,2195745,2195777,2195809,2195841,2195873,2195905,2195937,2195969]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,6291456,6291456]),new Uint32Array([2173921,2173953,2173985,2174017,2174017,2174049,2174081,2174113,2174145,2174177,2149057,2233089,2173697,2173761,2173793,2174113]),new Uint32Array([2131586,2132450,2135970,2135778,2161602,2136162,2163650,2161794,2135586,2163714,2137186,2131810,2160290,2135170,2097506,2159554]),new Uint32Array([2134145,2097153,2134241,2105953,2132705,2130977,2160065,2131297,2162049,2133089,2160577,2133857,0,0,0,0]),new Uint32Array([2116513,2116609,2116705,2116801,2116897,2116993,2117089,2117185,2117281,2117377,2117473,2117569,2117665,2117761,2117857,2117953]),new Uint32Array([2100737,2098337,2101441,2101569,2101697,2101825,2101953,2102081,2102209,2100802,2101154,2101282,2101410,2101538,2101666,2101794]),new Uint32Array([2100289,2098657,2098049,2200737,2123489,2123681,2200769,2098625,2100321,2098145,2100449,2098017,2098753,2098977,2150241,2150305]),new Uint32Array([6291456,6291456,6291456,0,6291456,6291456,6291456,6291456,6291456,2109955,6291456,6291456,0,0,0,0]),new Uint32Array([18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368,18874368]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,6291456,0,6291456,0,0]),new Uint32Array([2130979,2131075,2131075,2131171,2131267,2131363,2131459,2131555,2131651,2131651,2131747,2131843,2131939,2132035,2132131,2132227]),new Uint32Array([0,2177793,6291456,2177825,6291456,2177857,6291456,2177889,6291456,2177921,6291456,2177953,6291456,2177985,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672]),new Uint32Array([6291456,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2113345,0,2098209,2111137,2105505,2098241,2108353,2108417,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289]),new Uint32Array([2136643,2136739,2136835,2136931,2137027,2137123,2137219,2137315,2137411,2137507,2137603,2137699,2137795,2137891,2137987,2138083]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0]),new Uint32Array([2174433,6291456,2174465,6291456,2174497,6291456,2174529,6291456,2174561,6291456,2174593,6291456,2174625,6291456,2174657,6291456]),new Uint32Array([0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2105473,2105569,2105601,2112289,2108193,2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441]),new Uint32Array([10496547,10496643,2105505,2149698,6291456,10496739,10496835,2170273,6291456,2149762,2105825,2111713,2111713,2111713,2111713,2168673]),new Uint32Array([6291456,2143490,2143490,2143490,2171649,6291456,2171681,2171713,2171745,6291456,2171777,6291456,2171809,6291456,2171841,6291456]),new Uint32Array([2159106,2159106,2159170,2159170,2159234,2159234,2159298,2159298,2159298,2159362,2159362,2159362,2106401,2106401,2106401,2106401]),new Uint32Array([2105601,2112289,2108193,2112481,2112577,2098177,2098305,2108321,2108289,2100865,2113153,2108481,2113345,2113441,2098209,2111137]),new Uint32Array([2108417,2181217,2181249,2181281,2170433,2170401,2181313,2181345,2181377,2181409,2181441,2181473,2181505,2181537,2170529,2181569]),new Uint32Array([2218433,2245761,2245793,2245825,2245857,2245890,2245953,2245986,2209665,2246050,2246113,2246146,2246210,2246274,2246337,2246369]),new Uint32Array([2230754,2230818,2230882,0,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([6291456,0,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,0,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2184129,6291456,2184161,6291456,2184193,6291456,6291456,6291456,6291456,6291456,2146818,2183361,6291456,6291456,2142978,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2135170,2097506,2130691,2130787,2130883,2163970,2164034,2164098,2164162,2164226,2164290,2164354,2164418,2164482,2164546,2133122]),new Uint32Array([2108515,2108611,2100740,2108707,2108803,2108899,2108995,2109091,2109187,2109283,2109379,2109475,2109571,2109667,2109763,2100738]),new Uint32Array([2102788,2102916,2103044,2120515,2103172,2120611,2120707,2098373,2103300,2120803,2120899,2120995,2103428,2103556,2121091,2121187]),new Uint32Array([2158082,2158146,0,2158210,2158274,0,2158338,2158402,2158466,2129922,2158530,2158594,2158658,2158722,2158786,2158850]),new Uint32Array([10499619,10499715,10499811,10499907,10500003,10500099,10500195,10500291,10500387,10500483,10500579,10500675,10500771,10500867,10500963,10501059]),new Uint32Array([2239585,2239618,2239681,2239713,0,2191969,2239745,2239777,2192033,2239809,2239841,2239874,2239937,2239970,2240033,2240065]),new Uint32Array([2252705,2252738,2252801,2252833,2252865,2252897,2252930,2252994,2253057,2253089,2253121,2253154,2253217,2253250,2219361,2219361]),new Uint32Array([2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,2108193,2112481,2112577,2098177,2098305,2108321,2108289,2100865]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,10538050,10538114,10538178,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([2226402,2226466,2226530,2226594,2226658,2226722,2226786,2226850,2226914,2226978,2227042,2227106,2227170,2227234,2227298,2227362]),new Uint32Array([23068672,6291456,6291456,6291456,6291456,2144066,2144130,2144194,2144258,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,23068672,23068672,23068672,6291456,23068672,23068672]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0]),new Uint32Array([2124674,2124770,2123875,2123971,2124067,2124163,2124259,2124355,2124451,2124547,2124643,2124739,2124835,2124931,2125027,2125123]),new Uint32Array([2168065,6291456,2168097,6291456,2168129,6291456,2168161,6291456,2168193,6291456,2168225,6291456,2168257,6291456,2168289,6291456]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0]),new Uint32Array([23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,2100610,2100611,6291456,2107842,2107843,6291456,6291456,6291456,6291456,10537922,6291456,10537986,6291456]),new Uint32Array([2174849,2174881,2174913,2174945,2174977,2175009,2175041,2175073,2175105,2175137,2175169,2175201,2175233,2175265,2175297,2175329]),new Uint32Array([2154562,2154626,2154690,2154754,2141858,2154818,2154882,2127298,2154946,2127298,2155010,2155074,2155138,2155202,2155266,2155202]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456,6291456,6291456,6291456,6291456,23068672,0]),new Uint32Array([2200641,2150786,2150850,2150914,2150978,2151042,2106562,2151106,2150562,2151170,2151234,2151298,2151362,2151426,2151490,2151554]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,23068672,0,0,0,0,0,0,0,0,6291456,6291456]),new Uint32Array([2220289,2220289,2220321,2220321,2220321,2220321,2220353,2220353,2220353,2220353,2220385,2220385,2220385,2220385,2220417,2220417]),new Uint32Array([2155330,2155394,0,2155458,2155522,2155586,2105732,0,2155650,2155714,2155778,2125314,2155842,2155906,2126274,2155970]),new Uint32Array([23068672,23068672,23068672,23068672,23068672,6291456,6291456,23068672,23068672,6291456,23068672,23068672,23068672,23068672,6291456,6291456]),new Uint32Array([6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,6291456,0,0,0,0,0,0]),new Uint32Array([2097729,2106017,2106017,2106017,2106017,2131297,2131297,2131297,2131297,2106081,2106081,2162049,2162049,2105953,2105953,2162337]),new Uint32Array([2097185,2097697,2097697,2097697,2097697,2135777,2135777,2135777,2135777,2097377,2097377,2097377,2097377,2097601,2097601,2097217]),new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23068672]),new Uint32Array([2139331,2139427,2139523,2139043,2133571,2132611,2139619,2139715,0,0,0,0,0,0,0,0]),new Uint32Array([2174113,2174145,2100897,2098177,2108289,2100865,2173601,2173633,2173985,2174113,2174145,6291456,6291456,6291456,6291456,6291456]),new Uint32Array([6291456,6291456,23068672,6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456,23068672,6291456,6291456,6291456,6291456]),new Uint32Array([23068672,23068672,18923778,23068672,23068672,23068672,23068672,18923842,23068672,23068672,23068672,23068672,18923906,23068672,23068672,23068672]),new Uint32Array([2134145,2097153,2134241,0,2132705,2130977,2160065,2131297,0,2133089,0,2133857,0,0,0,0]),new Uint32Array([6291456,6291456,6291456,6291456,0,0,0,0,0,0,0,0,0,0,0,0]),new Uint32Array([2177537,6291456,2177569,6291456,2177601,6291456,2177633,6291456,2177665,6291456,2177697,6291456,2177729,6291456,2177761,6291456]),new Uint32Array([2212481,2212513,2212545,2212577,2197121,2212609,2212641,2212673,2212705,2212737,2212769,2212801,2212833,2212865,2212897,2212929]),new Uint32Array([6291456,6291456,23068672,23068672,23068672,6291456,6291456,0,0,0,0,0,0,0,0,0]),new Uint32Array([2098241,2108353,2170209,2105825,2111713,2100897,2111905,2105473,2105569,2105601,2112289,6291456,2108193,2172417,2112481,2098177]),new Uint32Array([6291456,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,23068672,6291456,6291456])];var blockIdxes=new Uint16Array([616,616,565,147,161,411,330,2,131,131,328,454,241,408,86,86,696,113,285,350,325,301,473,214,639,232,447,64,369,598,124,672,567,223,621,154,107,86,86,86,86,86,86,505,86,68,634,86,218,218,218,218,486,218,218,513,188,608,216,86,217,463,668,85,700,360,184,86,86,86,647,402,153,10,346,718,662,260,145,298,117,1,443,342,138,54,563,86,240,572,218,70,387,86,118,460,641,602,86,86,306,218,86,692,86,86,86,86,86,162,707,86,458,26,86,218,638,86,86,86,86,86,65,449,86,86,306,183,86,58,391,667,86,157,131,131,131,131,86,433,131,406,31,218,247,86,86,693,218,581,351,86,438,295,69,462,45,126,173,650,14,295,69,97,168,187,641,78,523,390,69,108,287,664,173,219,83,295,69,108,431,426,173,694,412,115,628,52,257,398,641,118,501,121,69,579,151,423,173,620,464,121,69,382,151,476,173,27,53,121,86,594,578,226,173,86,632,130,86,96,228,268,641,622,563,86,86,21,148,650,131,131,321,43,144,343,381,531,131,131,178,20,86,399,156,375,164,541,30,60,715,198,92,118,131,131,86,86,306,407,86,280,457,196,488,358,131,131,244,86,86,143,86,86,86,86,86,667,563,86,86,86,86,86,86,86,86,86,86,86,86,86,336,363,86,86,336,86,86,380,678,67,86,86,86,678,86,86,86,512,86,307,86,708,86,86,86,86,86,528,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,563,307,86,86,86,86,86,104,450,337,86,720,86,32,450,397,86,86,86,587,218,558,708,708,293,708,86,86,86,86,86,694,205,86,8,86,86,86,86,549,86,667,697,697,679,86,458,460,86,86,650,86,708,543,86,86,86,245,86,86,86,140,218,127,708,708,458,197,131,131,131,131,500,86,86,483,251,86,306,510,515,86,722,86,86,86,65,201,86,86,483,580,470,86,86,86,368,131,131,131,694,114,110,555,86,86,123,721,163,142,713,418,86,317,675,209,218,218,218,371,545,592,629,490,603,199,46,320,525,680,310,279,388,111,42,252,593,607,235,617,410,377,50,548,135,356,17,520,189,116,392,600,349,332,482,699,690,535,119,106,451,71,152,667,131,218,218,265,671,637,492,504,533,683,269,269,658,86,86,86,86,86,86,86,86,86,491,619,86,86,6,86,86,86,86,86,86,86,86,86,86,86,229,86,86,86,86,86,86,86,86,86,86,86,86,667,86,86,171,131,118,131,656,206,234,571,89,334,670,246,311,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,534,86,86,86,86,86,86,82,86,86,86,86,86,430,86,86,86,86,86,86,86,86,86,599,86,324,86,470,69,640,264,131,626,101,174,86,86,667,233,105,73,374,394,221,204,84,28,326,86,86,471,86,86,86,109,573,86,171,200,200,200,200,218,218,86,86,86,86,460,131,131,131,86,506,86,86,86,86,86,220,404,34,614,47,442,305,25,612,338,601,648,7,344,255,131,131,51,86,312,507,563,86,86,86,86,588,86,86,86,86,86,530,511,86,458,3,435,384,556,522,230,527,86,118,86,86,717,86,137,273,79,181,484,23,93,112,655,249,417,703,370,87,98,313,684,585,155,465,596,481,695,18,416,428,61,701,706,282,643,495,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,549,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,549,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,307,86,86,86,171,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,650,131,422,542,420,263,24,172,86,86,86,86,86,566,86,86,132,540,395,353,494,519,19,485,284,472,131,131,131,16,714,86,211,708,86,86,86,694,698,86,86,483,704,708,218,272,86,86,120,86,159,478,86,307,247,86,86,663,597,459,627,667,86,86,277,455,39,302,86,250,86,86,86,271,99,452,306,281,329,400,200,86,86,362,549,352,646,461,323,586,86,86,4,708,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,717,86,518,86,86,650,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,125,554,480,300,613,72,333,288,561,544,604,48,719,91,169,176,590,224,76,191,29,559,560,231,537,166,477,538,256,437,131,131,469,167,40,0,685,266,441,705,239,642,475,568,640,610,299,673,517,318,385,22,202,180,179,359,424,215,90,66,521,653,467,682,453,409,479,88,131,661,35,303,15,262,666,630,712,131,131,618,659,175,218,195,347,193,227,261,150,165,709,546,294,569,710,270,413,376,524,55,242,38,419,529,170,657,3,304,122,379,278,131,651,86,67,576,458,458,131,131,86,86,86,86,86,86,86,118,309,86,86,547,86,86,86,86,667,650,664,131,131,86,86,56,131,131,131,131,131,131,131,131,86,307,86,86,86,664,238,650,86,86,717,86,118,86,86,315,86,59,86,86,574,549,131,131,340,57,436,86,86,86,86,86,86,458,708,499,691,62,86,650,86,86,694,86,86,86,319,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,171,86,549,694,131,131,131,131,131,131,131,131,131,77,86,86,139,86,502,86,86,86,667,595,131,131,131,86,12,86,13,86,609,131,131,131,131,86,86,86,625,86,669,86,86,182,129,86,5,694,104,86,86,86,86,131,131,86,86,386,171,86,86,86,345,86,324,86,589,86,213,36,131,131,131,131,131,86,86,86,86,104,131,131,131,141,290,80,677,86,86,86,267,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,667,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,515,86,86,33,136,669,86,711,515,86,86,550,640,86,104,708,515,86,159,372,717,86,86,444,515,86,86,663,37,86,563,460,86,390,624,702,131,131,131,131,389,59,708,86,86,341,208,708,635,295,69,108,431,508,100,190,131,131,131,131,131,131,131,131,86,86,86,649,516,660,131,131,86,86,86,218,631,708,131,131,131,131,131,131,131,131,131,131,86,86,341,575,238,514,131,131,86,86,86,218,291,708,307,131,86,86,306,367,708,131,131,131,86,378,697,86,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,615,253,86,86,86,292,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,104,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,69,86,341,553,549,86,307,86,86,645,275,455,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,708,131,131,131,131,131,131,86,86,86,86,86,86,667,460,86,86,86,86,86,86,86,86,86,86,86,86,717,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,667,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,171,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,104,86,667,459,131,131,131,131,131,131,86,458,225,86,86,86,516,549,11,390,405,86,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,460,44,218,197,711,515,131,131,131,131,664,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,307,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,308,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,640,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,118,307,104,286,591,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,549,86,86,681,86,86,75,185,314,582,86,358,496,474,86,104,131,86,86,86,86,146,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,171,86,640,131,131,131,131,131,131,131,131,246,503,689,339,674,81,258,415,439,128,562,366,414,246,503,689,583,222,557,316,636,665,186,355,95,670,246,503,689,339,674,557,258,415,439,186,355,95,670,246,503,689,446,644,536,652,331,532,335,440,274,421,297,570,74,425,364,425,606,552,403,509,134,365,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,218,218,218,498,218,218,577,627,551,497,572,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,553,354,236,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,296,455,131,131,456,243,103,86,41,459,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,9,276,158,716,393,564,383,489,401,654,210,654,131,131,131,640,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,650,86,86,86,86,86,86,717,667,563,563,563,86,549,102,686,133,246,605,86,448,86,86,207,307,131,131,131,641,86,177,611,445,373,194,584,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,308,307,171,86,86,86,86,86,86,86,717,86,86,86,86,86,460,131,131,650,86,86,86,694,708,86,86,694,86,458,131,131,131,131,131,131,667,694,289,650,667,131,131,86,640,131,131,664,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,171,131,131,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,460,86,86,86,86,86,86,86,86,86,86,86,86,86,458,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,640,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,466,203,149,429,94,432,160,687,539,63,237,283,192,248,348,259,427,526,396,676,254,468,487,212,327,623,49,633,322,493,434,688,357,361,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131]);var mappingStr="    rads2110viii(10)(11)(12)(13)(14)(15)(16)(17)(18)(19)(20)()()kcalms2ckg141234         a/ca/sc/oc/utelfax1719132315253545165618385878xii03(1)(2)(3)(4)(5)(6)(7)(8)(9)(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)(k)(l)(m)(n)(o)(p)(q)(r)(s)(t)(u)(v)(w)(x)(y)(z)::====()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()pte101112ergltd101112131415161718192021222324hpabardm2dm3khzmhzghzthzmm2cm2km2mm3cm3km3kpampagpalogmilmolppmvmam10111213141516171819202122232425262728293031galffiffl      sppv   ssiijlndljnjdz       a  !! ???!!?rscfnosmtmivix  333435363738394042444546474849503456789hgevdaauovpciunaakakbmbgbpfnffgmglmldlklfmnmmpsnssmsnvvkvpwnwwmwkwkmbqcccddbgyhainkkktlnlxphprsrsvwbst  0,1,2,3,4,5,6,7,8,9,wzhvsdwcmcmddj;`+._{}[]#&*-<>\\$%@\"'^|~";function mapChar(codePoint){if(codePoint>=0x30000){if(codePoint>=0xE0100&&codePoint<=0xE01EF)return 18874368;return 0;}return blocks[blockIdxes[codePoint>>4]][codePoint&15];}return{mapStr:mappingStr,mapChar:mapChar};});

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],1228:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root){var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports&&!exports.nodeType&&exports;var freeModule=(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&!module.nodeType&&module;var freeGlobal=(typeof global==="undefined"?"undefined":(0,_typeof2["default"])(global))=='object'&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal;}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter='-',regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type]);}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length]);}return result;}function mapDomain(string,fn){var parts=string.split('@');var result='';if(parts.length>1){result=parts[0]+'@';string=parts[1];}string=string.replace(regexSeparators,'\x2E');var labels=string.split('.');var encoded=map(labels,fn).join('.');return result+encoded;}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}return output;}function ucs2encode(array){return map(array,function(value){var output='';if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}output+=stringFromCharCode(value);return output;}).join('');}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22;}if(codePoint-65<26){return codePoint-65;}if(codePoint-97<26){return codePoint-97;}return base;}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5);}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin);}return floor(k+(baseMinusTMin+1)*delta/(delta+skew));}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0;}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=0x80){error('not-basic');}output.push(input.charCodeAt(j));}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error('invalid-input');}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error('overflow');}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break;}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error('overflow');}w*=baseMinusT;}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error('overflow');}n+=floor(i/out);i%=out;output.splice(i++,0,n);}return ucs2encode(output);}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<0x80){output.push(stringFromCharCode(currentValue));}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter);}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue;}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error('overflow');}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error('overflow');}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break;}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT);}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}++delta;++n;}return output.join('');}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string;});}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string;});}punycode={'version':'1.4.1','ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode};if(typeof define=='function'&&(0,_typeof2["default"])(define.amd)=='object'&&define.amd){define('punycode',function(){return punycode;});}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode;}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);}}}else{root.punycode=punycode;}})(void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],308:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var CID=require('cids');var multihashes=require('multihashes');module.exports=function(){function Store(dag){(0,_classCallCheck2["default"])(this,Store);this._dag=dag;}(0,_createClass2["default"])(Store,[{key:"put",value:function put(val,options){return this._dag.put(val,options).then(function(link){return link.buffer;});}},{key:"get",value:function get(link,node){var dropOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var cid=new CID(link);if(!dropOptions){node.options={};node.options.format=cid.codec;node.options.hashAlg=multihashes.decode(cid.multihash).name;}return this._dag.get(cid).then(function(node){return node.value;});}}],[{key:"isValidLink",value:function isValidLink(link){try{var cid=new CID(link);return CID.isCID(cid);}catch(e){return false;}}}]);return Store;}();

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"cids":168,"multihashes":496}],318:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));module.exports=function(){function LockMap(){(0,_classCallCheck2["default"])(this,LockMap);this._map=new Map();var methods=['clear','delete','entries','forEach','get','has','keys','values',Symbol.iterator];var self=this;methods.forEach(function(method){self[method]=function(){return self._map[method].apply(self._map,arguments);};});}(0,_createClass2["default"])(LockMap,[{key:"lock",value:function lock(id){var _this=this;var r;var promise=new Promise(function(resolve,reject){r=resolve;});promise.then(function(){_this._map["delete"](id);});this._map.set(id,promise);return r;}},{key:"size",get:function get(){return this._map.size;}},{key:Symbol.toStringTag,get:function get(){return'LockMap';}}]);return LockMap;}();

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55}],316:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var keccakState=require('./keccak-state-unroll');function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.blockSize=null;this.count=0;this.squeezing=false;}Keccak.prototype.initialize=function(rate,capacity){for(var i=0;i<50;++i){this.state[i]=0;}this.blockSize=rate/8;this.count=0;this.squeezing=false;};Keccak.prototype.absorb=function(data){for(var i=0;i<data.length;++i){this.state[~~(this.count/4)]^=data[i]<<8*(this.count%4);this.count+=1;if(this.count===this.blockSize){keccakState.p1600(this.state);this.count=0;}}};Keccak.prototype.absorbLastFewBits=function(bits){this.state[~~(this.count/4)]^=bits<<8*(this.count%4);if((bits&0x80)!==0&&this.count===this.blockSize-1)keccakState.p1600(this.state);this.state[~~((this.blockSize-1)/4)]^=0x80<<8*((this.blockSize-1)%4);keccakState.p1600(this.state);this.count=0;this.squeezing=true;};Keccak.prototype.squeeze=function(length){if(!this.squeezing)this.absorbLastFewBits(0x01);var output=Buffer.alloc(length);for(var i=0;i<length;++i){output[i]=this.state[~~(this.count/4)]>>>8*(this.count%4)&0xff;this.count+=1;if(this.count===this.blockSize){keccakState.p1600(this.state);this.count=0;}}return output;};Keccak.prototype.copy=function(dest){for(var i=0;i<50;++i){dest.state[i]=this.state[i];}dest.blockSize=this.blockSize;dest.count=this.count;dest.squeezing=this.squeezing;};module.exports=Keccak;

},{"./keccak-state-unroll":315,"safe-buffer":639}],312:[function(require,module,exports){
'use strict';var createKeccak=require('./keccak');var createShake=require('./shake');module.exports=function(KeccakState){var Keccak=createKeccak(KeccakState);var Shake=createShake(KeccakState);return function(algorithm,options){var hash=typeof algorithm==='string'?algorithm.toLowerCase():algorithm;switch(hash){case'keccak224':return new Keccak(1152,448,null,224,options);case'keccak256':return new Keccak(1088,512,null,256,options);case'keccak384':return new Keccak(832,768,null,384,options);case'keccak512':return new Keccak(576,1024,null,512,options);case'sha3-224':return new Keccak(1152,448,0x06,224,options);case'sha3-256':return new Keccak(1088,512,0x06,256,options);case'sha3-384':return new Keccak(832,768,0x06,384,options);case'sha3-512':return new Keccak(576,1024,0x06,512,options);case'shake128':return new Shake(1344,256,0x1f,options);case'shake256':return new Shake(1088,512,0x1f,options);default:throw new Error('Invald algorithm: '+algorithm);}};};

},{"./keccak":313,"./shake":314}],313:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var Transform=require('stream').Transform;var inherits=require('inherits');module.exports=function(KeccakState){function Keccak(rate,capacity,delimitedSuffix,hashBitLength,options){Transform.call(this,options);this._rate=rate;this._capacity=capacity;this._delimitedSuffix=delimitedSuffix;this._hashBitLength=hashBitLength;this._options=options;this._state=new KeccakState();this._state.initialize(rate,capacity);this._finalized=false;}inherits(Keccak,Transform);Keccak.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};Keccak.prototype._flush=function(callback){var error=null;try{this.push(this.digest());}catch(err){error=err;}callback(error);};Keccak.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Digest already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);this._state.absorb(data);return this;};Keccak.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called');this._finalized=true;if(this._delimitedSuffix)this._state.absorbLastFewBits(this._delimitedSuffix);var digest=this._state.squeeze(this._hashBitLength/8);if(encoding!==undefined)digest=digest.toString(encoding);this._resetState();return digest;};Keccak.prototype._resetState=function(){this._state.initialize(this._rate,this._capacity);return this;};Keccak.prototype._clone=function(){var clone=new Keccak(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);this._state.copy(clone._state);clone._finalized=this._finalized;return clone;};return Keccak;};

},{"inherits":307,"safe-buffer":639,"stream":1259}],314:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var Transform=require('stream').Transform;var inherits=require('inherits');module.exports=function(KeccakState){function Shake(rate,capacity,delimitedSuffix,options){Transform.call(this,options);this._rate=rate;this._capacity=capacity;this._delimitedSuffix=delimitedSuffix;this._options=options;this._state=new KeccakState();this._state.initialize(rate,capacity);this._finalized=false;}inherits(Shake,Transform);Shake.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};Shake.prototype._flush=function(){};Shake.prototype._read=function(size){this.push(this.squeeze(size));};Shake.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Squeeze already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);this._state.absorb(data);return this;};Shake.prototype.squeeze=function(dataByteLength,encoding){if(!this._finalized){this._finalized=true;this._state.absorbLastFewBits(this._delimitedSuffix);}var data=this._state.squeeze(dataByteLength);if(encoding!==undefined)data=data.toString(encoding);return data;};Shake.prototype._resetState=function(){this._state.initialize(this._rate,this._capacity);return this;};Shake.prototype._clone=function(){var clone=new Shake(this._rate,this._capacity,this._delimitedSuffix,this._options);this._state.copy(clone._state);clone._finalized=this._finalized;return clone;};return Shake;};

},{"inherits":307,"safe-buffer":639,"stream":1259}],315:[function(require,module,exports){
'use strict';var P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];exports.p1600=function(s){for(var round=0;round<24;++round){var lo0=s[0]^s[10]^s[20]^s[30]^s[40];var hi0=s[1]^s[11]^s[21]^s[31]^s[41];var lo1=s[2]^s[12]^s[22]^s[32]^s[42];var hi1=s[3]^s[13]^s[23]^s[33]^s[43];var lo2=s[4]^s[14]^s[24]^s[34]^s[44];var hi2=s[5]^s[15]^s[25]^s[35]^s[45];var lo3=s[6]^s[16]^s[26]^s[36]^s[46];var hi3=s[7]^s[17]^s[27]^s[37]^s[47];var lo4=s[8]^s[18]^s[28]^s[38]^s[48];var hi4=s[9]^s[19]^s[29]^s[39]^s[49];var lo=lo4^(lo1<<1|hi1>>>31);var hi=hi4^(hi1<<1|lo1>>>31);var t1slo0=s[0]^lo;var t1shi0=s[1]^hi;var t1slo5=s[10]^lo;var t1shi5=s[11]^hi;var t1slo10=s[20]^lo;var t1shi10=s[21]^hi;var t1slo15=s[30]^lo;var t1shi15=s[31]^hi;var t1slo20=s[40]^lo;var t1shi20=s[41]^hi;lo=lo0^(lo2<<1|hi2>>>31);hi=hi0^(hi2<<1|lo2>>>31);var t1slo1=s[2]^lo;var t1shi1=s[3]^hi;var t1slo6=s[12]^lo;var t1shi6=s[13]^hi;var t1slo11=s[22]^lo;var t1shi11=s[23]^hi;var t1slo16=s[32]^lo;var t1shi16=s[33]^hi;var t1slo21=s[42]^lo;var t1shi21=s[43]^hi;lo=lo1^(lo3<<1|hi3>>>31);hi=hi1^(hi3<<1|lo3>>>31);var t1slo2=s[4]^lo;var t1shi2=s[5]^hi;var t1slo7=s[14]^lo;var t1shi7=s[15]^hi;var t1slo12=s[24]^lo;var t1shi12=s[25]^hi;var t1slo17=s[34]^lo;var t1shi17=s[35]^hi;var t1slo22=s[44]^lo;var t1shi22=s[45]^hi;lo=lo2^(lo4<<1|hi4>>>31);hi=hi2^(hi4<<1|lo4>>>31);var t1slo3=s[6]^lo;var t1shi3=s[7]^hi;var t1slo8=s[16]^lo;var t1shi8=s[17]^hi;var t1slo13=s[26]^lo;var t1shi13=s[27]^hi;var t1slo18=s[36]^lo;var t1shi18=s[37]^hi;var t1slo23=s[46]^lo;var t1shi23=s[47]^hi;lo=lo3^(lo0<<1|hi0>>>31);hi=hi3^(hi0<<1|lo0>>>31);var t1slo4=s[8]^lo;var t1shi4=s[9]^hi;var t1slo9=s[18]^lo;var t1shi9=s[19]^hi;var t1slo14=s[28]^lo;var t1shi14=s[29]^hi;var t1slo19=s[38]^lo;var t1shi19=s[39]^hi;var t1slo24=s[48]^lo;var t1shi24=s[49]^hi;var t2slo0=t1slo0;var t2shi0=t1shi0;var t2slo16=t1shi5<<4|t1slo5>>>28;var t2shi16=t1slo5<<4|t1shi5>>>28;var t2slo7=t1slo10<<3|t1shi10>>>29;var t2shi7=t1shi10<<3|t1slo10>>>29;var t2slo23=t1shi15<<9|t1slo15>>>23;var t2shi23=t1slo15<<9|t1shi15>>>23;var t2slo14=t1slo20<<18|t1shi20>>>14;var t2shi14=t1shi20<<18|t1slo20>>>14;var t2slo10=t1slo1<<1|t1shi1>>>31;var t2shi10=t1shi1<<1|t1slo1>>>31;var t2slo1=t1shi6<<12|t1slo6>>>20;var t2shi1=t1slo6<<12|t1shi6>>>20;var t2slo17=t1slo11<<10|t1shi11>>>22;var t2shi17=t1shi11<<10|t1slo11>>>22;var t2slo8=t1shi16<<13|t1slo16>>>19;var t2shi8=t1slo16<<13|t1shi16>>>19;var t2slo24=t1slo21<<2|t1shi21>>>30;var t2shi24=t1shi21<<2|t1slo21>>>30;var t2slo20=t1shi2<<30|t1slo2>>>2;var t2shi20=t1slo2<<30|t1shi2>>>2;var t2slo11=t1slo7<<6|t1shi7>>>26;var t2shi11=t1shi7<<6|t1slo7>>>26;var t2slo2=t1shi12<<11|t1slo12>>>21;var t2shi2=t1slo12<<11|t1shi12>>>21;var t2slo18=t1slo17<<15|t1shi17>>>17;var t2shi18=t1shi17<<15|t1slo17>>>17;var t2slo9=t1shi22<<29|t1slo22>>>3;var t2shi9=t1slo22<<29|t1shi22>>>3;var t2slo5=t1slo3<<28|t1shi3>>>4;var t2shi5=t1shi3<<28|t1slo3>>>4;var t2slo21=t1shi8<<23|t1slo8>>>9;var t2shi21=t1slo8<<23|t1shi8>>>9;var t2slo12=t1slo13<<25|t1shi13>>>7;var t2shi12=t1shi13<<25|t1slo13>>>7;var t2slo3=t1slo18<<21|t1shi18>>>11;var t2shi3=t1shi18<<21|t1slo18>>>11;var t2slo19=t1shi23<<24|t1slo23>>>8;var t2shi19=t1slo23<<24|t1shi23>>>8;var t2slo15=t1slo4<<27|t1shi4>>>5;var t2shi15=t1shi4<<27|t1slo4>>>5;var t2slo6=t1slo9<<20|t1shi9>>>12;var t2shi6=t1shi9<<20|t1slo9>>>12;var t2slo22=t1shi14<<7|t1slo14>>>25;var t2shi22=t1slo14<<7|t1shi14>>>25;var t2slo13=t1slo19<<8|t1shi19>>>24;var t2shi13=t1shi19<<8|t1slo19>>>24;var t2slo4=t1slo24<<14|t1shi24>>>18;var t2shi4=t1shi24<<14|t1slo24>>>18;s[0]=t2slo0^~t2slo1&t2slo2;s[1]=t2shi0^~t2shi1&t2shi2;s[10]=t2slo5^~t2slo6&t2slo7;s[11]=t2shi5^~t2shi6&t2shi7;s[20]=t2slo10^~t2slo11&t2slo12;s[21]=t2shi10^~t2shi11&t2shi12;s[30]=t2slo15^~t2slo16&t2slo17;s[31]=t2shi15^~t2shi16&t2shi17;s[40]=t2slo20^~t2slo21&t2slo22;s[41]=t2shi20^~t2shi21&t2shi22;s[2]=t2slo1^~t2slo2&t2slo3;s[3]=t2shi1^~t2shi2&t2shi3;s[12]=t2slo6^~t2slo7&t2slo8;s[13]=t2shi6^~t2shi7&t2shi8;s[22]=t2slo11^~t2slo12&t2slo13;s[23]=t2shi11^~t2shi12&t2shi13;s[32]=t2slo16^~t2slo17&t2slo18;s[33]=t2shi16^~t2shi17&t2shi18;s[42]=t2slo21^~t2slo22&t2slo23;s[43]=t2shi21^~t2shi22&t2shi23;s[4]=t2slo2^~t2slo3&t2slo4;s[5]=t2shi2^~t2shi3&t2shi4;s[14]=t2slo7^~t2slo8&t2slo9;s[15]=t2shi7^~t2shi8&t2shi9;s[24]=t2slo12^~t2slo13&t2slo14;s[25]=t2shi12^~t2shi13&t2shi14;s[34]=t2slo17^~t2slo18&t2slo19;s[35]=t2shi17^~t2shi18&t2shi19;s[44]=t2slo22^~t2slo23&t2slo24;s[45]=t2shi22^~t2shi23&t2shi24;s[6]=t2slo3^~t2slo4&t2slo0;s[7]=t2shi3^~t2shi4&t2shi0;s[16]=t2slo8^~t2slo9&t2slo5;s[17]=t2shi8^~t2shi9&t2shi5;s[26]=t2slo13^~t2slo14&t2slo10;s[27]=t2shi13^~t2shi14&t2shi10;s[36]=t2slo18^~t2slo19&t2slo15;s[37]=t2shi18^~t2shi19&t2shi15;s[46]=t2slo23^~t2slo24&t2slo20;s[47]=t2shi23^~t2shi24&t2shi20;s[8]=t2slo4^~t2slo0&t2slo1;s[9]=t2shi4^~t2shi0&t2shi1;s[18]=t2slo9^~t2slo5&t2slo6;s[19]=t2shi9^~t2shi5&t2shi6;s[28]=t2slo14^~t2slo10&t2slo11;s[29]=t2shi14^~t2shi10&t2shi11;s[38]=t2slo19^~t2slo15&t2slo16;s[39]=t2shi19^~t2shi15&t2shi16;s[48]=t2slo24^~t2slo20&t2slo21;s[49]=t2shi24^~t2shi20&t2shi21;s[0]^=P1600_ROUND_CONSTANTS[round*2];s[1]^=P1600_ROUND_CONSTANTS[round*2+1];}};

},{}],319:[function(require,module,exports){
var getNative=require('./_getNative'),root=require('./_root');var DataView=getNative(root,'DataView');module.exports=DataView;

},{"./_getNative":394,"./_root":435}],394:[function(require,module,exports){
var baseIsNative=require('./_baseIsNative'),getValue=require('./_getValue');function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}module.exports=getNative;

},{"./_baseIsNative":356,"./_getValue":400}],435:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var freeGlobal=require('./_freeGlobal');var freeSelf=(typeof self==="undefined"?"undefined":(0,_typeof2["default"])(self))=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();module.exports=root;

},{"./_freeGlobal":389,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],320:[function(require,module,exports){
var hashClear=require('./_hashClear'),hashDelete=require('./_hashDelete'),hashGet=require('./_hashGet'),hashHas=require('./_hashHas'),hashSet=require('./_hashSet');function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash;

},{"./_hashClear":402,"./_hashDelete":403,"./_hashGet":404,"./_hashHas":405,"./_hashSet":406}],403:[function(require,module,exports){
function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result;}module.exports=hashDelete;

},{}],405:[function(require,module,exports){
var nativeCreate=require('./_nativeCreate');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}module.exports=hashHas;

},{"./_nativeCreate":429}],402:[function(require,module,exports){
var nativeCreate=require('./_nativeCreate');function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0;}module.exports=hashClear;

},{"./_nativeCreate":429}],406:[function(require,module,exports){
var nativeCreate=require('./_nativeCreate');var HASH_UNDEFINED='__lodash_hash_undefined__';function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}module.exports=hashSet;

},{"./_nativeCreate":429}],404:[function(require,module,exports){
var nativeCreate=require('./_nativeCreate');var HASH_UNDEFINED='__lodash_hash_undefined__';var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}module.exports=hashGet;

},{"./_nativeCreate":429}],321:[function(require,module,exports){
var listCacheClear=require('./_listCacheClear'),listCacheDelete=require('./_listCacheDelete'),listCacheGet=require('./_listCacheGet'),listCacheHas=require('./_listCacheHas'),listCacheSet=require('./_listCacheSet');function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache;

},{"./_listCacheClear":416,"./_listCacheDelete":417,"./_listCacheGet":418,"./_listCacheHas":419,"./_listCacheSet":420}],416:[function(require,module,exports){
function listCacheClear(){this.__data__=[];this.size=0;}module.exports=listCacheClear;

},{}],419:[function(require,module,exports){
var assocIndexOf=require('./_assocIndexOf');function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}module.exports=listCacheHas;

},{"./_assocIndexOf":338}],418:[function(require,module,exports){
var assocIndexOf=require('./_assocIndexOf');function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}module.exports=listCacheGet;

},{"./_assocIndexOf":338}],420:[function(require,module,exports){
var assocIndexOf=require('./_assocIndexOf');function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value]);}else{data[index][1]=value;}return this;}module.exports=listCacheSet;

},{"./_assocIndexOf":338}],417:[function(require,module,exports){
var assocIndexOf=require('./_assocIndexOf');var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}--this.size;return true;}module.exports=listCacheDelete;

},{"./_assocIndexOf":338}],322:[function(require,module,exports){
var getNative=require('./_getNative'),root=require('./_root');var Map=getNative(root,'Map');module.exports=Map;

},{"./_getNative":394,"./_root":435}],323:[function(require,module,exports){
var mapCacheClear=require('./_mapCacheClear'),mapCacheDelete=require('./_mapCacheDelete'),mapCacheGet=require('./_mapCacheGet'),mapCacheHas=require('./_mapCacheHas'),mapCacheSet=require('./_mapCacheSet');function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache;

},{"./_mapCacheClear":421,"./_mapCacheDelete":422,"./_mapCacheGet":423,"./_mapCacheHas":424,"./_mapCacheSet":425}],424:[function(require,module,exports){
var getMapData=require('./_getMapData');function mapCacheHas(key){return getMapData(this,key).has(key);}module.exports=mapCacheHas;

},{"./_getMapData":392}],425:[function(require,module,exports){
var getMapData=require('./_getMapData');function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this;}module.exports=mapCacheSet;

},{"./_getMapData":392}],423:[function(require,module,exports){
var getMapData=require('./_getMapData');function mapCacheGet(key){return getMapData(this,key).get(key);}module.exports=mapCacheGet;

},{"./_getMapData":392}],422:[function(require,module,exports){
var getMapData=require('./_getMapData');function mapCacheDelete(key){var result=getMapData(this,key)['delete'](key);this.size-=result?1:0;return result;}module.exports=mapCacheDelete;

},{"./_getMapData":392}],421:[function(require,module,exports){
var Hash=require('./_Hash'),ListCache=require('./_ListCache'),Map=require('./_Map');function mapCacheClear(){this.size=0;this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}module.exports=mapCacheClear;

},{"./_Hash":320,"./_ListCache":321,"./_Map":322}],324:[function(require,module,exports){
var getNative=require('./_getNative'),root=require('./_root');var Promise=getNative(root,'Promise');module.exports=Promise;

},{"./_getNative":394,"./_root":435}],325:[function(require,module,exports){
var getNative=require('./_getNative'),root=require('./_root');var Set=getNative(root,'Set');module.exports=Set;

},{"./_getNative":394,"./_root":435}],326:[function(require,module,exports){
var MapCache=require('./_MapCache'),setCacheAdd=require('./_setCacheAdd'),setCacheHas=require('./_setCacheHas');function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache;

},{"./_MapCache":323,"./_setCacheAdd":436,"./_setCacheHas":437}],436:[function(require,module,exports){
var HASH_UNDEFINED='__lodash_hash_undefined__';function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}module.exports=setCacheAdd;

},{}],437:[function(require,module,exports){
function setCacheHas(value){return this.__data__.has(value);}module.exports=setCacheHas;

},{}],327:[function(require,module,exports){
var ListCache=require('./_ListCache'),stackClear=require('./_stackClear'),stackDelete=require('./_stackDelete'),stackGet=require('./_stackGet'),stackHas=require('./_stackHas'),stackSet=require('./_stackSet');function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack;

},{"./_ListCache":321,"./_stackClear":439,"./_stackDelete":440,"./_stackGet":441,"./_stackHas":442,"./_stackSet":443}],441:[function(require,module,exports){
function stackGet(key){return this.__data__.get(key);}module.exports=stackGet;

},{}],440:[function(require,module,exports){
function stackDelete(key){var data=this.__data__,result=data['delete'](key);this.size=data.size;return result;}module.exports=stackDelete;

},{}],442:[function(require,module,exports){
function stackHas(key){return this.__data__.has(key);}module.exports=stackHas;

},{}],439:[function(require,module,exports){
var ListCache=require('./_ListCache');function stackClear(){this.__data__=new ListCache();this.size=0;}module.exports=stackClear;

},{"./_ListCache":321}],443:[function(require,module,exports){
var ListCache=require('./_ListCache'),Map=require('./_Map'),MapCache=require('./_MapCache');var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this;}data=this.__data__=new MapCache(pairs);}data.set(key,value);this.size=data.size;return this;}module.exports=stackSet;

},{"./_ListCache":321,"./_Map":322,"./_MapCache":323}],328:[function(require,module,exports){
var root=require('./_root');var _Symbol=root.Symbol;module.exports=_Symbol;

},{"./_root":435}],329:[function(require,module,exports){
var root=require('./_root');var Uint8Array=root.Uint8Array;module.exports=Uint8Array;

},{"./_root":435}],330:[function(require,module,exports){
var getNative=require('./_getNative'),root=require('./_root');var WeakMap=getNative(root,'WeakMap');module.exports=WeakMap;

},{"./_getNative":394,"./_root":435}],331:[function(require,module,exports){
function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}module.exports=arrayEach;

},{}],332:[function(require,module,exports){
function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value;}}return result;}module.exports=arrayFilter;

},{}],333:[function(require,module,exports){
var baseTimes=require('./_baseTimes'),isArguments=require('./isArguments'),isArray=require('./isArray'),isBuffer=require('./isBuffer'),isIndex=require('./_isIndex'),isTypedArray=require('./isTypedArray');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isBuff&&(key=='offset'||key=='parent')||isType&&(key=='buffer'||key=='byteLength'||key=='byteOffset')||isIndex(key,length)))){result.push(key);}}return result;}module.exports=arrayLikeKeys;

},{"./_baseTimes":367,"./_isIndex":410,"./isArguments":452,"./isArray":453,"./isBuffer":456,"./isTypedArray":467}],452:[function(require,module,exports){
var baseIsArguments=require('./_baseIsArguments'),isObjectLike=require('./isObjectLike');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments;}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');};module.exports=isArguments;

},{"./_baseIsArguments":351,"./isObjectLike":463}],410:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=(0,_typeof2["default"])(value);length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}module.exports=isIndex;

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],453:[function(require,module,exports){
var isArray=Array.isArray;module.exports=isArray;

},{}],467:[function(require,module,exports){
var baseIsTypedArray=require('./_baseIsTypedArray'),baseUnary=require('./_baseUnary'),nodeUtil=require('./_nodeUtil');var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray;

},{"./_baseIsTypedArray":358,"./_baseUnary":369,"./_nodeUtil":432}],456:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var root=require('./_root'),stubFalse=require('./stubFalse');var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer;

},{"./_root":435,"./stubFalse":476,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],367:[function(require,module,exports){
function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}module.exports=baseTimes;

},{}],334:[function(require,module,exports){
function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}module.exports=arrayMap;

},{}],335:[function(require,module,exports){
function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}module.exports=arrayPush;

},{}],336:[function(require,module,exports){
function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}module.exports=arraySome;

},{}],337:[function(require,module,exports){
var baseAssignValue=require('./_baseAssignValue'),eq=require('./eq');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}module.exports=assignValue;

},{"./_baseAssignValue":341,"./eq":448}],448:[function(require,module,exports){
function eq(value,other){return value===other||value!==value&&other!==other;}module.exports=eq;

},{}],341:[function(require,module,exports){
var defineProperty=require('./_defineProperty');function baseAssignValue(object,key,value){if(key=='__proto__'&&defineProperty){defineProperty(object,key,{'configurable':true,'enumerable':true,'value':value,'writable':true});}else{object[key]=value;}}module.exports=baseAssignValue;

},{"./_defineProperty":385}],338:[function(require,module,exports){
var eq=require('./eq');function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}module.exports=assocIndexOf;

},{"./eq":448}],339:[function(require,module,exports){
var copyObject=require('./_copyObject'),keys=require('./keys');function baseAssign(object,source){return object&&copyObject(source,keys(source),object);}module.exports=baseAssign;

},{"./_copyObject":379,"./keys":469}],469:[function(require,module,exports){
var arrayLikeKeys=require('./_arrayLikeKeys'),baseKeys=require('./_baseKeys'),isArrayLike=require('./isArrayLike');function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}module.exports=keys;

},{"./_arrayLikeKeys":333,"./_baseKeys":360,"./isArrayLike":454}],379:[function(require,module,exports){
var assignValue=require('./_assignValue'),baseAssignValue=require('./_baseAssignValue');function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key];}if(isNew){baseAssignValue(object,key,newValue);}else{assignValue(object,key,newValue);}}return object;}module.exports=copyObject;

},{"./_assignValue":337,"./_baseAssignValue":341}],340:[function(require,module,exports){
var copyObject=require('./_copyObject'),keysIn=require('./keysIn');function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object);}module.exports=baseAssignIn;

},{"./_copyObject":379,"./keysIn":470}],470:[function(require,module,exports){
var arrayLikeKeys=require('./_arrayLikeKeys'),baseKeysIn=require('./_baseKeysIn'),isArrayLike=require('./isArrayLike');function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object);}module.exports=keysIn;

},{"./_arrayLikeKeys":333,"./_baseKeysIn":361,"./isArrayLike":454}],385:[function(require,module,exports){
var getNative=require('./_getNative');var defineProperty=function(){try{var func=getNative(Object,'defineProperty');func({},'',{});return func;}catch(e){}}();module.exports=defineProperty;

},{"./_getNative":394}],342:[function(require,module,exports){
var Stack=require('./_Stack'),arrayEach=require('./_arrayEach'),assignValue=require('./_assignValue'),baseAssign=require('./_baseAssign'),baseAssignIn=require('./_baseAssignIn'),cloneBuffer=require('./_cloneBuffer'),copyArray=require('./_copyArray'),copySymbols=require('./_copySymbols'),copySymbolsIn=require('./_copySymbolsIn'),getAllKeys=require('./_getAllKeys'),getAllKeysIn=require('./_getAllKeysIn'),getTag=require('./_getTag'),initCloneArray=require('./_initCloneArray'),initCloneByTag=require('./_initCloneByTag'),initCloneObject=require('./_initCloneObject'),isArray=require('./isArray'),isBuffer=require('./isBuffer'),isMap=require('./isMap'),isObject=require('./isObject'),isSet=require('./isSet'),keys=require('./keys');var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value);}if(result!==undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result);}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep);}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value));}}else{if(!cloneableTags[tag]){return object?value:{};}result=initCloneByTag(value,tag,isDeep);}}stack||(stack=new Stack());var stacked=stack.get(value);if(stacked){return stacked;}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack));});}else if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack));});}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key];}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack));});return result;}module.exports=baseClone;

},{"./_Stack":327,"./_arrayEach":331,"./_assignValue":337,"./_baseAssign":339,"./_baseAssignIn":340,"./_cloneBuffer":373,"./_copyArray":378,"./_copySymbols":380,"./_copySymbolsIn":381,"./_getAllKeys":390,"./_getAllKeysIn":391,"./_getTag":399,"./_initCloneArray":407,"./_initCloneByTag":408,"./_initCloneObject":409,"./isArray":453,"./isBuffer":456,"./isMap":459,"./isObject":462,"./isSet":464,"./keys":469}],462:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function isObject(value){var type=(0,_typeof2["default"])(value);return value!=null&&(type=='object'||type=='function');}module.exports=isObject;

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],378:[function(require,module,exports){
function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}module.exports=copyArray;

},{}],407:[function(require,module,exports){
var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=='string'&&hasOwnProperty.call(array,'index')){result.index=array.index;result.input=array.input;}return result;}module.exports=initCloneArray;

},{}],390:[function(require,module,exports){
var baseGetAllKeys=require('./_baseGetAllKeys'),getSymbols=require('./_getSymbols'),keys=require('./keys');function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols);}module.exports=getAllKeys;

},{"./_baseGetAllKeys":348,"./_getSymbols":397,"./keys":469}],373:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var root=require('./_root');var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice();}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result;}module.exports=cloneBuffer;

},{"./_root":435,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],459:[function(require,module,exports){
var baseIsMap=require('./_baseIsMap'),baseUnary=require('./_baseUnary'),nodeUtil=require('./_nodeUtil');var nodeIsMap=nodeUtil&&nodeUtil.isMap;var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;module.exports=isMap;

},{"./_baseIsMap":354,"./_baseUnary":369,"./_nodeUtil":432}],391:[function(require,module,exports){
var baseGetAllKeys=require('./_baseGetAllKeys'),getSymbolsIn=require('./_getSymbolsIn'),keysIn=require('./keysIn');function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn);}module.exports=getAllKeysIn;

},{"./_baseGetAllKeys":348,"./_getSymbolsIn":398,"./keysIn":470}],381:[function(require,module,exports){
var copyObject=require('./_copyObject'),getSymbolsIn=require('./_getSymbolsIn');function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object);}module.exports=copySymbolsIn;

},{"./_copyObject":379,"./_getSymbolsIn":398}],380:[function(require,module,exports){
var copyObject=require('./_copyObject'),getSymbols=require('./_getSymbols');function copySymbols(source,object){return copyObject(source,getSymbols(source),object);}module.exports=copySymbols;

},{"./_copyObject":379,"./_getSymbols":397}],409:[function(require,module,exports){
var baseCreate=require('./_baseCreate'),getPrototype=require('./_getPrototype'),isPrototype=require('./_isPrototype');function initCloneObject(object){return typeof object.constructor=='function'&&!isPrototype(object)?baseCreate(getPrototype(object)):{};}module.exports=initCloneObject;

},{"./_baseCreate":343,"./_getPrototype":395,"./_isPrototype":414}],464:[function(require,module,exports){
var baseIsSet=require('./_baseIsSet'),baseUnary=require('./_baseUnary'),nodeUtil=require('./_nodeUtil');var nodeIsSet=nodeUtil&&nodeUtil.isSet;var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;module.exports=isSet;

},{"./_baseIsSet":357,"./_baseUnary":369,"./_nodeUtil":432}],408:[function(require,module,exports){
var cloneArrayBuffer=require('./_cloneArrayBuffer'),cloneDataView=require('./_cloneDataView'),cloneRegExp=require('./_cloneRegExp'),cloneSymbol=require('./_cloneSymbol'),cloneTypedArray=require('./_cloneTypedArray');var boolTag='[object Boolean]',dateTag='[object Date]',mapTag='[object Map]',numberTag='[object Number]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor();case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor();case symbolTag:return cloneSymbol(object);}}module.exports=initCloneByTag;

},{"./_cloneArrayBuffer":372,"./_cloneDataView":374,"./_cloneRegExp":375,"./_cloneSymbol":376,"./_cloneTypedArray":377}],399:[function(require,module,exports){
var DataView=require('./_DataView'),Map=require('./_Map'),Promise=require('./_Promise'),Set=require('./_Set'),WeakMap=require('./_WeakMap'),baseGetTag=require('./_baseGetTag'),toSource=require('./_toSource');var mapTag='[object Map]',objectTag='[object Object]',promiseTag='[object Promise]',setTag='[object Set]',weakMapTag='[object WeakMap]';var dataViewTag='[object DataView]';var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):'';if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}module.exports=getTag;

},{"./_DataView":319,"./_Map":322,"./_Promise":324,"./_Set":325,"./_WeakMap":330,"./_baseGetTag":349,"./_toSource":446}],343:[function(require,module,exports){
var isObject=require('./isObject');var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{};}if(objectCreate){return objectCreate(proto);}object.prototype=proto;var result=new object();object.prototype=undefined;return result;};}();module.exports=baseCreate;

},{"./isObject":462}],344:[function(require,module,exports){
var baseForOwn=require('./_baseForOwn'),createBaseEach=require('./_createBaseEach');var baseEach=createBaseEach(baseForOwn);module.exports=baseEach;

},{"./_baseForOwn":346,"./_createBaseEach":383}],383:[function(require,module,exports){
var isArrayLike=require('./isArrayLike');function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}module.exports=createBaseEach;

},{"./isArrayLike":454}],346:[function(require,module,exports){
var baseFor=require('./_baseFor'),keys=require('./keys');function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}module.exports=baseForOwn;

},{"./_baseFor":345,"./keys":469}],345:[function(require,module,exports){
var createBaseFor=require('./_createBaseFor');var baseFor=createBaseFor();module.exports=baseFor;

},{"./_createBaseFor":384}],384:[function(require,module,exports){
function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}module.exports=createBaseFor;

},{}],347:[function(require,module,exports){
var castPath=require('./_castPath'),toKey=require('./_toKey');function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}module.exports=baseGet;

},{"./_castPath":371,"./_toKey":445}],371:[function(require,module,exports){
var isArray=require('./isArray'),isKey=require('./_isKey'),stringToPath=require('./_stringToPath'),toString=require('./toString');function castPath(value,object){if(isArray(value)){return value;}return isKey(value,object)?[value]:stringToPath(toString(value));}module.exports=castPath;

},{"./_isKey":411,"./_stringToPath":444,"./isArray":453,"./toString":477}],445:[function(require,module,exports){
var isSymbol=require('./isSymbol');var INFINITY=1/0;function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}module.exports=toKey;

},{"./isSymbol":466}],348:[function(require,module,exports){
var arrayPush=require('./_arrayPush'),isArray=require('./isArray');function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object));}module.exports=baseGetAllKeys;

},{"./_arrayPush":335,"./isArray":453}],349:[function(require,module,exports){
var _Symbol=require('./_Symbol'),getRawTag=require('./_getRawTag'),objectToString=require('./_objectToString');var nullTag='[object Null]',undefinedTag='[object Undefined]';var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}module.exports=baseGetTag;

},{"./_Symbol":328,"./_getRawTag":396,"./_objectToString":433}],433:[function(require,module,exports){
var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value);}module.exports=objectToString;

},{}],396:[function(require,module,exports){
var _Symbol=require('./_Symbol');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}module.exports=getRawTag;

},{"./_Symbol":328}],350:[function(require,module,exports){
function baseHasIn(object,key){return object!=null&&key in Object(object);}module.exports=baseHasIn;

},{}],351:[function(require,module,exports){
var baseGetTag=require('./_baseGetTag'),isObjectLike=require('./isObjectLike');var argsTag='[object Arguments]';function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag;}module.exports=baseIsArguments;

},{"./_baseGetTag":349,"./isObjectLike":463}],463:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function isObjectLike(value){return value!=null&&(0,_typeof2["default"])(value)=='object';}module.exports=isObjectLike;

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],352:[function(require,module,exports){
var baseIsEqualDeep=require('./_baseIsEqualDeep'),isObjectLike=require('./isObjectLike');function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true;}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack);}module.exports=baseIsEqual;

},{"./_baseIsEqualDeep":353,"./isObjectLike":463}],353:[function(require,module,exports){
var Stack=require('./_Stack'),equalArrays=require('./_equalArrays'),equalByTag=require('./_equalByTag'),equalObjects=require('./_equalObjects'),getTag=require('./_getTag'),isArray=require('./isArray'),isBuffer=require('./isBuffer'),isTypedArray=require('./isTypedArray');var COMPARE_PARTIAL_FLAG=1;var argsTag='[object Arguments]',arrayTag='[object Array]',objectTag='[object Object]';var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false;}objIsArr=true;objIsObj=false;}if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,bitmask,customizer,equalFunc,stack);}module.exports=baseIsEqualDeep;

},{"./_Stack":327,"./_equalArrays":386,"./_equalByTag":387,"./_equalObjects":388,"./_getTag":399,"./isArray":453,"./isBuffer":456,"./isTypedArray":467}],388:[function(require,module,exports){
var getAllKeys=require('./_getAllKeys');var COMPARE_PARTIAL_FLAG=1;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}module.exports=equalObjects;

},{"./_getAllKeys":390}],387:[function(require,module,exports){
var _Symbol=require('./_Symbol'),Uint8Array=require('./_Uint8Array'),eq=require('./eq'),equalArrays=require('./_equalArrays'),mapToArray=require('./_mapToArray'),setToArray=require('./_setToArray');var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',mapTag='[object Map]',numberTag='[object Number]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]';var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}module.exports=equalByTag;

},{"./_Symbol":328,"./_Uint8Array":329,"./_equalArrays":386,"./_mapToArray":426,"./_setToArray":438,"./eq":448}],386:[function(require,module,exports){
var SetCache=require('./_SetCache'),arraySome=require('./_arraySome'),cacheHas=require('./_cacheHas');var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}module.exports=equalArrays;

},{"./_SetCache":326,"./_arraySome":336,"./_cacheHas":370}],354:[function(require,module,exports){
var getTag=require('./_getTag'),isObjectLike=require('./isObjectLike');var mapTag='[object Map]';function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag;}module.exports=baseIsMap;

},{"./_getTag":399,"./isObjectLike":463}],355:[function(require,module,exports){
var Stack=require('./_Stack'),baseIsEqual=require('./_baseIsEqual');var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var stack=new Stack();if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack);}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false;}}}return true;}module.exports=baseIsMatch;

},{"./_Stack":327,"./_baseIsEqual":352}],356:[function(require,module,exports){
var isFunction=require('./isFunction'),isMasked=require('./_isMasked'),isObject=require('./isObject'),toSource=require('./_toSource');var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}module.exports=baseIsNative;

},{"./_isMasked":413,"./_toSource":446,"./isFunction":457,"./isObject":462}],457:[function(require,module,exports){
var baseGetTag=require('./_baseGetTag'),isObject=require('./isObject');var asyncTag='[object AsyncFunction]',funcTag='[object Function]',genTag='[object GeneratorFunction]',proxyTag='[object Proxy]';function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}module.exports=isFunction;

},{"./_baseGetTag":349,"./isObject":462}],446:[function(require,module,exports){
var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}module.exports=toSource;

},{}],413:[function(require,module,exports){
var coreJsData=require('./_coreJsData');var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}module.exports=isMasked;

},{"./_coreJsData":382}],357:[function(require,module,exports){
var getTag=require('./_getTag'),isObjectLike=require('./isObjectLike');var setTag='[object Set]';function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag;}module.exports=baseIsSet;

},{"./_getTag":399,"./isObjectLike":463}],358:[function(require,module,exports){
var baseGetTag=require('./_baseGetTag'),isLength=require('./isLength'),isObjectLike=require('./isObjectLike');var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];}module.exports=baseIsTypedArray;

},{"./_baseGetTag":349,"./isLength":458,"./isObjectLike":463}],458:[function(require,module,exports){
var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}module.exports=isLength;

},{}],359:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var baseMatches=require('./_baseMatches'),baseMatchesProperty=require('./_baseMatchesProperty'),identity=require('./identity'),isArray=require('./isArray'),property=require('./property');function baseIteratee(value){if(typeof value=='function'){return value;}if(value==null){return identity;}if((0,_typeof2["default"])(value)=='object'){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}module.exports=baseIteratee;

},{"./_baseMatches":363,"./_baseMatchesProperty":364,"./identity":451,"./isArray":453,"./property":474,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],451:[function(require,module,exports){
function identity(value){return value;}module.exports=identity;

},{}],363:[function(require,module,exports){
var baseIsMatch=require('./_baseIsMatch'),getMatchData=require('./_getMatchData'),matchesStrictComparable=require('./_matchesStrictComparable');function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1]);}return function(object){return object===source||baseIsMatch(object,source,matchData);};}module.exports=baseMatches;

},{"./_baseIsMatch":355,"./_getMatchData":393,"./_matchesStrictComparable":427}],474:[function(require,module,exports){
var baseProperty=require('./_baseProperty'),basePropertyDeep=require('./_basePropertyDeep'),isKey=require('./_isKey'),toKey=require('./_toKey');function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);}module.exports=property;

},{"./_baseProperty":365,"./_basePropertyDeep":366,"./_isKey":411,"./_toKey":445}],364:[function(require,module,exports){
var baseIsEqual=require('./_baseIsEqual'),get=require('./get'),hasIn=require('./hasIn'),isKey=require('./_isKey'),isStrictComparable=require('./_isStrictComparable'),matchesStrictComparable=require('./_matchesStrictComparable'),toKey=require('./_toKey');var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG);};}module.exports=baseMatchesProperty;

},{"./_baseIsEqual":352,"./_isKey":411,"./_isStrictComparable":415,"./_matchesStrictComparable":427,"./_toKey":445,"./get":449,"./hasIn":450}],360:[function(require,module,exports){
var isPrototype=require('./_isPrototype'),nativeKeys=require('./_nativeKeys');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}module.exports=baseKeys;

},{"./_isPrototype":414,"./_nativeKeys":430}],414:[function(require,module,exports){
var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}module.exports=isPrototype;

},{}],430:[function(require,module,exports){
var overArg=require('./_overArg');var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys;

},{"./_overArg":434}],361:[function(require,module,exports){
var isObject=require('./isObject'),isPrototype=require('./_isPrototype'),nativeKeysIn=require('./_nativeKeysIn');var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object);}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=='constructor'&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key);}}return result;}module.exports=baseKeysIn;

},{"./_isPrototype":414,"./_nativeKeysIn":431,"./isObject":462}],431:[function(require,module,exports){
function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key);}}return result;}module.exports=nativeKeysIn;

},{}],362:[function(require,module,exports){
var baseEach=require('./_baseEach'),isArrayLike=require('./isArrayLike');function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);});return result;}module.exports=baseMap;

},{"./_baseEach":344,"./isArrayLike":454}],454:[function(require,module,exports){
var isFunction=require('./isFunction'),isLength=require('./isLength');function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}module.exports=isArrayLike;

},{"./isFunction":457,"./isLength":458}],427:[function(require,module,exports){
function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}module.exports=matchesStrictComparable;

},{}],393:[function(require,module,exports){
var isStrictComparable=require('./_isStrictComparable'),keys=require('./keys');function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];}return result;}module.exports=getMatchData;

},{"./_isStrictComparable":415,"./keys":469}],415:[function(require,module,exports){
var isObject=require('./isObject');function isStrictComparable(value){return value===value&&!isObject(value);}module.exports=isStrictComparable;

},{"./isObject":462}],449:[function(require,module,exports){
var baseGet=require('./_baseGet');function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}module.exports=get;

},{"./_baseGet":347}],411:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var isArray=require('./isArray'),isSymbol=require('./isSymbol');var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false;}var type=(0,_typeof2["default"])(value);if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}module.exports=isKey;

},{"./isArray":453,"./isSymbol":466,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],450:[function(require,module,exports){
var baseHasIn=require('./_baseHasIn'),hasPath=require('./_hasPath');function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}module.exports=hasIn;

},{"./_baseHasIn":350,"./_hasPath":401}],365:[function(require,module,exports){
function baseProperty(key){return function(object){return object==null?undefined:object[key];};}module.exports=baseProperty;

},{}],366:[function(require,module,exports){
var baseGet=require('./_baseGet');function basePropertyDeep(path){return function(object){return baseGet(object,path);};}module.exports=basePropertyDeep;

},{"./_baseGet":347}],368:[function(require,module,exports){
var _Symbol=require('./_Symbol'),arrayMap=require('./_arrayMap'),isArray=require('./isArray'),isSymbol=require('./isSymbol');var INFINITY=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=='string'){return value;}if(isArray(value)){return arrayMap(value,baseToString)+'';}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}module.exports=baseToString;

},{"./_Symbol":328,"./_arrayMap":334,"./isArray":453,"./isSymbol":466}],466:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var baseGetTag=require('./_baseGetTag'),isObjectLike=require('./isObjectLike');var symbolTag='[object Symbol]';function isSymbol(value){return(0,_typeof2["default"])(value)=='symbol'||isObjectLike(value)&&baseGetTag(value)==symbolTag;}module.exports=isSymbol;

},{"./_baseGetTag":349,"./isObjectLike":463,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],369:[function(require,module,exports){
function baseUnary(func){return function(value){return func(value);};}module.exports=baseUnary;

},{}],370:[function(require,module,exports){
function cacheHas(cache,key){return cache.has(key);}module.exports=cacheHas;

},{}],477:[function(require,module,exports){
var baseToString=require('./_baseToString');function toString(value){return value==null?'':baseToString(value);}module.exports=toString;

},{"./_baseToString":368}],444:[function(require,module,exports){
var memoizeCapped=require('./_memoizeCapped');var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push('');}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,'$1'):number||match);});return result;});module.exports=stringToPath;

},{"./_memoizeCapped":428}],372:[function(require,module,exports){
var Uint8Array=require('./_Uint8Array');function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result;}module.exports=cloneArrayBuffer;

},{"./_Uint8Array":329}],374:[function(require,module,exports){
var cloneArrayBuffer=require('./_cloneArrayBuffer');function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength);}module.exports=cloneDataView;

},{"./_cloneArrayBuffer":372}],375:[function(require,module,exports){
var reFlags=/\w*$/;function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result;}module.exports=cloneRegExp;

},{}],376:[function(require,module,exports){
var _Symbol=require('./_Symbol');var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{};}module.exports=cloneSymbol;

},{"./_Symbol":328}],377:[function(require,module,exports){
var cloneArrayBuffer=require('./_cloneArrayBuffer');function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length);}module.exports=cloneTypedArray;

},{"./_cloneArrayBuffer":372}],397:[function(require,module,exports){
var arrayFilter=require('./_arrayFilter'),stubArray=require('./stubArray');var objectProto=Object.prototype;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[];}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol);});};module.exports=getSymbols;

},{"./_arrayFilter":332,"./stubArray":475}],398:[function(require,module,exports){
var arrayPush=require('./_arrayPush'),getPrototype=require('./_getPrototype'),getSymbols=require('./_getSymbols'),stubArray=require('./stubArray');var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object);}return result;};module.exports=getSymbolsIn;

},{"./_arrayPush":335,"./_getPrototype":395,"./_getSymbols":397,"./stubArray":475}],382:[function(require,module,exports){
var root=require('./_root');var coreJsData=root['__core-js_shared__'];module.exports=coreJsData;

},{"./_root":435}],426:[function(require,module,exports){
function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}module.exports=mapToArray;

},{}],438:[function(require,module,exports){
function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}module.exports=setToArray;

},{}],389:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var freeGlobal=(typeof global==="undefined"?"undefined":(0,_typeof2["default"])(global))=='object'&&global&&global.Object===Object&&global;module.exports=freeGlobal;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],392:[function(require,module,exports){
var isKeyable=require('./_isKeyable');function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}module.exports=getMapData;

},{"./_isKeyable":412}],412:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function isKeyable(value){var type=(0,_typeof2["default"])(value);return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}module.exports=isKeyable;

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],400:[function(require,module,exports){
function getValue(object,key){return object==null?undefined:object[key];}module.exports=getValue;

},{}],395:[function(require,module,exports){
var overArg=require('./_overArg');var getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype;

},{"./_overArg":434}],434:[function(require,module,exports){
function overArg(func,transform){return function(arg){return func(transform(arg));};}module.exports=overArg;

},{}],475:[function(require,module,exports){
function stubArray(){return[];}module.exports=stubArray;

},{}],401:[function(require,module,exports){
var castPath=require('./_castPath'),isArguments=require('./isArguments'),isArray=require('./isArray'),isIndex=require('./_isIndex'),isLength=require('./isLength'),toKey=require('./_toKey');function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result||++index!=length){return result;}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}module.exports=hasPath;

},{"./_castPath":371,"./_isIndex":410,"./_toKey":445,"./isArguments":452,"./isArray":453,"./isLength":458}],429:[function(require,module,exports){
var getNative=require('./_getNative');var nativeCreate=getNative(Object,'create');module.exports=nativeCreate;

},{"./_getNative":394}],428:[function(require,module,exports){
var memoize=require('./memoize');var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear();}return key;});var cache=result.cache;return result;}module.exports=memoizeCapped;

},{"./memoize":473}],473:[function(require,module,exports){
var MapCache=require('./_MapCache');var FUNC_ERROR_TEXT='Expected a function';function memoize(func,resolver){if(typeof func!='function'||resolver!=null&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;module.exports=memoize;

},{"./_MapCache":323}],432:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var freeGlobal=require('./_freeGlobal');var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require('util').types;if(types){return types;}return freeProcess&&freeProcess.binding&&freeProcess.binding('util');}catch(e){}}();module.exports=nodeUtil;

},{"./_freeGlobal":389,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],447:[function(require,module,exports){
var baseClone=require('./_baseClone');var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG);}module.exports=cloneDeep;

},{"./_baseClone":342}],455:[function(require,module,exports){
var baseGetTag=require('./_baseGetTag'),isObjectLike=require('./isObjectLike');var boolTag='[object Boolean]';function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag;}module.exports=isBoolean;

},{"./_baseGetTag":349,"./isObjectLike":463}],476:[function(require,module,exports){
function stubFalse(){return false;}module.exports=stubFalse;

},{}],460:[function(require,module,exports){
function isNull(value){return value===null;}module.exports=isNull;

},{}],461:[function(require,module,exports){
var baseGetTag=require('./_baseGetTag'),isObjectLike=require('./isObjectLike');var numberTag='[object Number]';function isNumber(value){return typeof value=='number'||isObjectLike(value)&&baseGetTag(value)==numberTag;}module.exports=isNumber;

},{"./_baseGetTag":349,"./isObjectLike":463}],465:[function(require,module,exports){
var baseGetTag=require('./_baseGetTag'),isArray=require('./isArray'),isObjectLike=require('./isObjectLike');var stringTag='[object String]';function isString(value){return typeof value=='string'||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag;}module.exports=isString;

},{"./_baseGetTag":349,"./isArray":453,"./isObjectLike":463}],468:[function(require,module,exports){
function isUndefined(value){return value===undefined;}module.exports=isUndefined;

},{}],472:[function(require,module,exports){
var arrayMap=require('./_arrayMap'),baseIteratee=require('./_baseIteratee'),baseMap=require('./_baseMap'),isArray=require('./isArray');function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee,3));}module.exports=map;

},{"./_arrayMap":334,"./_baseIteratee":359,"./_baseMap":362,"./isArray":453}],482:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var Base=function(){function Base(name,code,implementation,alphabet){(0,_classCallCheck2["default"])(this,Base);this.name=name;this.code=code;this.alphabet=alphabet;if(implementation&&alphabet){this.engine=implementation(alphabet);}}(0,_createClass2["default"])(Base,[{key:"encode",value:function encode(stringOrBuffer){return this.engine.encode(stringOrBuffer);}},{key:"decode",value:function decode(stringOrBuffer){return this.engine.decode(stringOrBuffer);}},{key:"isImplemented",value:function isImplemented(){return this.engine;}}]);return Base;}();module.exports=Base;

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55}],483:[function(require,module,exports){
(function (Buffer){
'use strict';module.exports=function base16(alphabet){return{encode:function encode(input){if(typeof input==='string'){return Buffer.from(input).toString('hex');}return input.toString('hex');},decode:function decode(input){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _char=_step.value;if(alphabet.indexOf(_char)<0){throw new Error('invalid base16 character');}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}return Buffer.from(input,'hex');}};};

}).call(this,require("buffer").Buffer)

},{"buffer":1133}],484:[function(require,module,exports){
(function (Buffer){
'use strict';function _decode(input,alphabet){input=input.replace(new RegExp('=','g'),'');var length=input.length;var bits=0;var value=0;var index=0;var output=new Uint8Array(length*5/8|0);for(var i=0;i<length;i++){value=value<<5|alphabet.indexOf(input[i]);bits+=5;if(bits>=8){output[index++]=value>>>bits-8&255;bits-=8;}}return output.buffer;}function _encode(buffer,alphabet){var length=buffer.byteLength;var view=new Uint8Array(buffer);var padding=alphabet.indexOf('=')===alphabet.length-1;if(padding){alphabet=alphabet.substring(0,alphabet.length-2);}var bits=0;var value=0;var output='';for(var i=0;i<length;i++){value=value<<8|view[i];bits+=8;while(bits>=5){output+=alphabet[value>>>bits-5&31];bits-=5;}}if(bits>0){output+=alphabet[value<<5-bits&31];}if(padding){while(output.length%8!==0){output+='=';}}return output;}module.exports=function base32(alphabet){return{encode:function encode(input){if(typeof input==='string'){return _encode(Buffer.from(input),alphabet);}return _encode(input,alphabet);},decode:function decode(input){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _char=_step.value;if(alphabet.indexOf(_char)<0){throw new Error('invalid base32 character');}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}return _decode(input,alphabet);}};};

}).call(this,require("buffer").Buffer)

},{"buffer":1133}],485:[function(require,module,exports){
(function (Buffer){
'use strict';module.exports=function base64(alphabet){var padding=alphabet.indexOf('=')>-1;var url=alphabet.indexOf('-')>-1&&alphabet.indexOf('_')>-1;return{encode:function encode(input){var output='';if(typeof input==='string'){output=Buffer.from(input).toString('base64');}else{output=input.toString('base64');}if(url){output=output.replace(/\+/g,'-').replace(/\//g,'_');}var pad=output.indexOf('=');if(pad>0&&!padding){output=output.substring(0,pad);}return output;},decode:function decode(input){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _char=_step.value;if(alphabet.indexOf(_char)<0){throw new Error('invalid base64 character');}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}return Buffer.from(input,'base64');}};};

}).call(this,require("buffer").Buffer)

},{"buffer":1133}],486:[function(require,module,exports){
'use strict';var Base=require('./base.js');var baseX=require('base-x');var base16=require('./base16');var base32=require('./base32');var base64=require('./base64');var constants=[['base1','1','','1'],['base2','0',baseX,'01'],['base8','7',baseX,'01234567'],['base10','9',baseX,'0123456789'],['base16','f',base16,'0123456789abcdef'],['base32','b',base32,'abcdefghijklmnopqrstuvwxyz234567'],['base32pad','c',base32,'abcdefghijklmnopqrstuvwxyz234567='],['base32hex','v',base32,'0123456789abcdefghijklmnopqrstuv'],['base32hexpad','t',base32,'0123456789abcdefghijklmnopqrstuv='],['base32z','h',base32,'ybndrfg8ejkmcpqxot1uwisza345h769'],['base58flickr','Z',baseX,'123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'],['base58btc','z',baseX,'123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'],['base64','m',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'],['base64pad','M',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='],['base64url','u',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'],['base64urlpad','U',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=']];var names=constants.reduce(function(prev,tupple){prev[tupple[0]]=new Base(tupple[0],tupple[1],tupple[2],tupple[3]);return prev;},{});var codes=constants.reduce(function(prev,tupple){prev[tupple[1]]=names[tupple[0]];return prev;},{});module.exports={names:names,codes:codes};

},{"./base.js":482,"./base16":483,"./base32":484,"./base64":485,"base-x":70}],489:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var table=require('./base-table.json');var constants={};for(var _i=0,_Object$entries=Object.entries(table);_i<_Object$entries.length;_i++){var _Object$entries$_i=(0,_slicedToArray2["default"])(_Object$entries[_i],2),name=_Object$entries$_i[0],code=_Object$entries$_i[1];constants[name.toUpperCase().replace(/-/g,'_')]=code;}module.exports=Object.freeze(constants);

},{"./base-table.json":488,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/slicedToArray":63}],666:[function(require,module,exports){
module.exports={encode:require('./encode.js'),decode:require('./decode.js'),/* common-shake removed: encodingLength:require('./length.js') */};

},{"./decode.js":664,"./encode.js":665,"./length.js":667}],491:[function(require,module,exports){
'use strict';var baseTable=require('./base-table.json');var nameTable={};for(var encodingName in baseTable){var code=baseTable[encodingName];nameTable[code.toString(16)]=encodingName;}module.exports=Object.freeze(nameTable);

},{"./base-table.json":488}],494:[function(require,module,exports){
'use strict';var baseTable=require('./base-table.json');var varintEncode=require('./util').varintEncode;var varintTable={};for(var encodingName in baseTable){var code=baseTable[encodingName];varintTable[encodingName]=varintEncode(code);}module.exports=Object.freeze(varintTable);

},{"./base-table.json":488,"./util":493}],493:[function(require,module,exports){
(function (Buffer){
'use strict';var varint=require('varint');module.exports={/* common-shake removed: numberToBuffer:numberToBuffer *//* common-shake removed: bufferToNumber:bufferToNumber */varintBufferEncode:varintBufferEncode,varintBufferDecode:varintBufferDecode,varintEncode:varintEncode};function bufferToNumber(buf){return parseInt(buf.toString('hex'),16);}function numberToBuffer(num){var hexString=num.toString(16);if(hexString.length%2===1){hexString='0'+hexString;}return Buffer.from(hexString,'hex');}function varintBufferEncode(input){return Buffer.from(varint.encode(bufferToNumber(input)));}function varintBufferDecode(input){return numberToBuffer(varint.decode(input));}function varintEncode(num){return Buffer.from(varint.encode(num));}

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"varint":666}],492:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var table=require('./base-table.json');var tableByCode={};for(var _i=0,_Object$entries=Object.entries(table);_i<_Object$entries.length;_i++){var _Object$entries$_i=(0,_slicedToArray2["default"])(_Object$entries[_i],2),name=_Object$entries$_i[0],code=_Object$entries$_i[1];if(tableByCode[code]===undefined)tableByCode[code]=name;}module.exports=Object.freeze(tableByCode);

},{"./base-table.json":488,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/slicedToArray":63}],495:[function(require,module,exports){
'use strict';exports.names=Object.freeze({'identity':0x0,'sha1':0x11,'sha2-256':0x12,'sha2-512':0x13,'dbl-sha2-256':0x56,'sha3-224':0x17,'sha3-256':0x16,'sha3-384':0x15,'sha3-512':0x14,'shake-128':0x18,'shake-256':0x19,'keccak-224':0x1A,'keccak-256':0x1B,'keccak-384':0x1C,'keccak-512':0x1D,'murmur3-128':0x22,'murmur3-32':0x23,'blake2b-8':0xb201,'blake2b-16':0xb202,'blake2b-24':0xb203,'blake2b-32':0xb204,'blake2b-40':0xb205,'blake2b-48':0xb206,'blake2b-56':0xb207,'blake2b-64':0xb208,'blake2b-72':0xb209,'blake2b-80':0xb20a,'blake2b-88':0xb20b,'blake2b-96':0xb20c,'blake2b-104':0xb20d,'blake2b-112':0xb20e,'blake2b-120':0xb20f,'blake2b-128':0xb210,'blake2b-136':0xb211,'blake2b-144':0xb212,'blake2b-152':0xb213,'blake2b-160':0xb214,'blake2b-168':0xb215,'blake2b-176':0xb216,'blake2b-184':0xb217,'blake2b-192':0xb218,'blake2b-200':0xb219,'blake2b-208':0xb21a,'blake2b-216':0xb21b,'blake2b-224':0xb21c,'blake2b-232':0xb21d,'blake2b-240':0xb21e,'blake2b-248':0xb21f,'blake2b-256':0xb220,'blake2b-264':0xb221,'blake2b-272':0xb222,'blake2b-280':0xb223,'blake2b-288':0xb224,'blake2b-296':0xb225,'blake2b-304':0xb226,'blake2b-312':0xb227,'blake2b-320':0xb228,'blake2b-328':0xb229,'blake2b-336':0xb22a,'blake2b-344':0xb22b,'blake2b-352':0xb22c,'blake2b-360':0xb22d,'blake2b-368':0xb22e,'blake2b-376':0xb22f,'blake2b-384':0xb230,'blake2b-392':0xb231,'blake2b-400':0xb232,'blake2b-408':0xb233,'blake2b-416':0xb234,'blake2b-424':0xb235,'blake2b-432':0xb236,'blake2b-440':0xb237,'blake2b-448':0xb238,'blake2b-456':0xb239,'blake2b-464':0xb23a,'blake2b-472':0xb23b,'blake2b-480':0xb23c,'blake2b-488':0xb23d,'blake2b-496':0xb23e,'blake2b-504':0xb23f,'blake2b-512':0xb240,'blake2s-8':0xb241,'blake2s-16':0xb242,'blake2s-24':0xb243,'blake2s-32':0xb244,'blake2s-40':0xb245,'blake2s-48':0xb246,'blake2s-56':0xb247,'blake2s-64':0xb248,'blake2s-72':0xb249,'blake2s-80':0xb24a,'blake2s-88':0xb24b,'blake2s-96':0xb24c,'blake2s-104':0xb24d,'blake2s-112':0xb24e,'blake2s-120':0xb24f,'blake2s-128':0xb250,'blake2s-136':0xb251,'blake2s-144':0xb252,'blake2s-152':0xb253,'blake2s-160':0xb254,'blake2s-168':0xb255,'blake2s-176':0xb256,'blake2s-184':0xb257,'blake2s-192':0xb258,'blake2s-200':0xb259,'blake2s-208':0xb25a,'blake2s-216':0xb25b,'blake2s-224':0xb25c,'blake2s-232':0xb25d,'blake2s-240':0xb25e,'blake2s-248':0xb25f,'blake2s-256':0xb260,'Skein256-8':0xb301,'Skein256-16':0xb302,'Skein256-24':0xb303,'Skein256-32':0xb304,'Skein256-40':0xb305,'Skein256-48':0xb306,'Skein256-56':0xb307,'Skein256-64':0xb308,'Skein256-72':0xb309,'Skein256-80':0xb30a,'Skein256-88':0xb30b,'Skein256-96':0xb30c,'Skein256-104':0xb30d,'Skein256-112':0xb30e,'Skein256-120':0xb30f,'Skein256-128':0xb310,'Skein256-136':0xb311,'Skein256-144':0xb312,'Skein256-152':0xb313,'Skein256-160':0xb314,'Skein256-168':0xb315,'Skein256-176':0xb316,'Skein256-184':0xb317,'Skein256-192':0xb318,'Skein256-200':0xb319,'Skein256-208':0xb31a,'Skein256-216':0xb31b,'Skein256-224':0xb31c,'Skein256-232':0xb31d,'Skein256-240':0xb31e,'Skein256-248':0xb31f,'Skein256-256':0xb320,'Skein512-8':0xb321,'Skein512-16':0xb322,'Skein512-24':0xb323,'Skein512-32':0xb324,'Skein512-40':0xb325,'Skein512-48':0xb326,'Skein512-56':0xb327,'Skein512-64':0xb328,'Skein512-72':0xb329,'Skein512-80':0xb32a,'Skein512-88':0xb32b,'Skein512-96':0xb32c,'Skein512-104':0xb32d,'Skein512-112':0xb32e,'Skein512-120':0xb32f,'Skein512-128':0xb330,'Skein512-136':0xb331,'Skein512-144':0xb332,'Skein512-152':0xb333,'Skein512-160':0xb334,'Skein512-168':0xb335,'Skein512-176':0xb336,'Skein512-184':0xb337,'Skein512-192':0xb338,'Skein512-200':0xb339,'Skein512-208':0xb33a,'Skein512-216':0xb33b,'Skein512-224':0xb33c,'Skein512-232':0xb33d,'Skein512-240':0xb33e,'Skein512-248':0xb33f,'Skein512-256':0xb340,'Skein512-264':0xb341,'Skein512-272':0xb342,'Skein512-280':0xb343,'Skein512-288':0xb344,'Skein512-296':0xb345,'Skein512-304':0xb346,'Skein512-312':0xb347,'Skein512-320':0xb348,'Skein512-328':0xb349,'Skein512-336':0xb34a,'Skein512-344':0xb34b,'Skein512-352':0xb34c,'Skein512-360':0xb34d,'Skein512-368':0xb34e,'Skein512-376':0xb34f,'Skein512-384':0xb350,'Skein512-392':0xb351,'Skein512-400':0xb352,'Skein512-408':0xb353,'Skein512-416':0xb354,'Skein512-424':0xb355,'Skein512-432':0xb356,'Skein512-440':0xb357,'Skein512-448':0xb358,'Skein512-456':0xb359,'Skein512-464':0xb35a,'Skein512-472':0xb35b,'Skein512-480':0xb35c,'Skein512-488':0xb35d,'Skein512-496':0xb35e,'Skein512-504':0xb35f,'Skein512-512':0xb360,'Skein1024-8':0xb361,'Skein1024-16':0xb362,'Skein1024-24':0xb363,'Skein1024-32':0xb364,'Skein1024-40':0xb365,'Skein1024-48':0xb366,'Skein1024-56':0xb367,'Skein1024-64':0xb368,'Skein1024-72':0xb369,'Skein1024-80':0xb36a,'Skein1024-88':0xb36b,'Skein1024-96':0xb36c,'Skein1024-104':0xb36d,'Skein1024-112':0xb36e,'Skein1024-120':0xb36f,'Skein1024-128':0xb370,'Skein1024-136':0xb371,'Skein1024-144':0xb372,'Skein1024-152':0xb373,'Skein1024-160':0xb374,'Skein1024-168':0xb375,'Skein1024-176':0xb376,'Skein1024-184':0xb377,'Skein1024-192':0xb378,'Skein1024-200':0xb379,'Skein1024-208':0xb37a,'Skein1024-216':0xb37b,'Skein1024-224':0xb37c,'Skein1024-232':0xb37d,'Skein1024-240':0xb37e,'Skein1024-248':0xb37f,'Skein1024-256':0xb380,'Skein1024-264':0xb381,'Skein1024-272':0xb382,'Skein1024-280':0xb383,'Skein1024-288':0xb384,'Skein1024-296':0xb385,'Skein1024-304':0xb386,'Skein1024-312':0xb387,'Skein1024-320':0xb388,'Skein1024-328':0xb389,'Skein1024-336':0xb38a,'Skein1024-344':0xb38b,'Skein1024-352':0xb38c,'Skein1024-360':0xb38d,'Skein1024-368':0xb38e,'Skein1024-376':0xb38f,'Skein1024-384':0xb390,'Skein1024-392':0xb391,'Skein1024-400':0xb392,'Skein1024-408':0xb393,'Skein1024-416':0xb394,'Skein1024-424':0xb395,'Skein1024-432':0xb396,'Skein1024-440':0xb397,'Skein1024-448':0xb398,'Skein1024-456':0xb399,'Skein1024-464':0xb39a,'Skein1024-472':0xb39b,'Skein1024-480':0xb39c,'Skein1024-488':0xb39d,'Skein1024-496':0xb39e,'Skein1024-504':0xb39f,'Skein1024-512':0xb3a0,'Skein1024-520':0xb3a1,'Skein1024-528':0xb3a2,'Skein1024-536':0xb3a3,'Skein1024-544':0xb3a4,'Skein1024-552':0xb3a5,'Skein1024-560':0xb3a6,'Skein1024-568':0xb3a7,'Skein1024-576':0xb3a8,'Skein1024-584':0xb3a9,'Skein1024-592':0xb3aa,'Skein1024-600':0xb3ab,'Skein1024-608':0xb3ac,'Skein1024-616':0xb3ad,'Skein1024-624':0xb3ae,'Skein1024-632':0xb3af,'Skein1024-640':0xb3b0,'Skein1024-648':0xb3b1,'Skein1024-656':0xb3b2,'Skein1024-664':0xb3b3,'Skein1024-672':0xb3b4,'Skein1024-680':0xb3b5,'Skein1024-688':0xb3b6,'Skein1024-696':0xb3b7,'Skein1024-704':0xb3b8,'Skein1024-712':0xb3b9,'Skein1024-720':0xb3ba,'Skein1024-728':0xb3bb,'Skein1024-736':0xb3bc,'Skein1024-744':0xb3bd,'Skein1024-752':0xb3be,'Skein1024-760':0xb3bf,'Skein1024-768':0xb3c0,'Skein1024-776':0xb3c1,'Skein1024-784':0xb3c2,'Skein1024-792':0xb3c3,'Skein1024-800':0xb3c4,'Skein1024-808':0xb3c5,'Skein1024-816':0xb3c6,'Skein1024-824':0xb3c7,'Skein1024-832':0xb3c8,'Skein1024-840':0xb3c9,'Skein1024-848':0xb3ca,'Skein1024-856':0xb3cb,'Skein1024-864':0xb3cc,'Skein1024-872':0xb3cd,'Skein1024-880':0xb3ce,'Skein1024-888':0xb3cf,'Skein1024-896':0xb3d0,'Skein1024-904':0xb3d1,'Skein1024-912':0xb3d2,'Skein1024-920':0xb3d3,'Skein1024-928':0xb3d4,'Skein1024-936':0xb3d5,'Skein1024-944':0xb3d6,'Skein1024-952':0xb3d7,'Skein1024-960':0xb3d8,'Skein1024-968':0xb3d9,'Skein1024-976':0xb3da,'Skein1024-984':0xb3db,'Skein1024-992':0xb3dc,'Skein1024-1000':0xb3dd,'Skein1024-1008':0xb3de,'Skein1024-1016':0xb3df,'Skein1024-1024':0xb3e0});exports.codes=Object.freeze({0x0:'identity',0x11:'sha1',0x12:'sha2-256',0x13:'sha2-512',0x56:'dbl-sha2-256',0x17:'sha3-224',0x16:'sha3-256',0x15:'sha3-384',0x14:'sha3-512',0x18:'shake-128',0x19:'shake-256',0x1A:'keccak-224',0x1B:'keccak-256',0x1C:'keccak-384',0x1D:'keccak-512',0x22:'murmur3-128',0x23:'murmur3-32',0xb201:'blake2b-8',0xb202:'blake2b-16',0xb203:'blake2b-24',0xb204:'blake2b-32',0xb205:'blake2b-40',0xb206:'blake2b-48',0xb207:'blake2b-56',0xb208:'blake2b-64',0xb209:'blake2b-72',0xb20a:'blake2b-80',0xb20b:'blake2b-88',0xb20c:'blake2b-96',0xb20d:'blake2b-104',0xb20e:'blake2b-112',0xb20f:'blake2b-120',0xb210:'blake2b-128',0xb211:'blake2b-136',0xb212:'blake2b-144',0xb213:'blake2b-152',0xb214:'blake2b-160',0xb215:'blake2b-168',0xb216:'blake2b-176',0xb217:'blake2b-184',0xb218:'blake2b-192',0xb219:'blake2b-200',0xb21a:'blake2b-208',0xb21b:'blake2b-216',0xb21c:'blake2b-224',0xb21d:'blake2b-232',0xb21e:'blake2b-240',0xb21f:'blake2b-248',0xb220:'blake2b-256',0xb221:'blake2b-264',0xb222:'blake2b-272',0xb223:'blake2b-280',0xb224:'blake2b-288',0xb225:'blake2b-296',0xb226:'blake2b-304',0xb227:'blake2b-312',0xb228:'blake2b-320',0xb229:'blake2b-328',0xb22a:'blake2b-336',0xb22b:'blake2b-344',0xb22c:'blake2b-352',0xb22d:'blake2b-360',0xb22e:'blake2b-368',0xb22f:'blake2b-376',0xb230:'blake2b-384',0xb231:'blake2b-392',0xb232:'blake2b-400',0xb233:'blake2b-408',0xb234:'blake2b-416',0xb235:'blake2b-424',0xb236:'blake2b-432',0xb237:'blake2b-440',0xb238:'blake2b-448',0xb239:'blake2b-456',0xb23a:'blake2b-464',0xb23b:'blake2b-472',0xb23c:'blake2b-480',0xb23d:'blake2b-488',0xb23e:'blake2b-496',0xb23f:'blake2b-504',0xb240:'blake2b-512',0xb241:'blake2s-8',0xb242:'blake2s-16',0xb243:'blake2s-24',0xb244:'blake2s-32',0xb245:'blake2s-40',0xb246:'blake2s-48',0xb247:'blake2s-56',0xb248:'blake2s-64',0xb249:'blake2s-72',0xb24a:'blake2s-80',0xb24b:'blake2s-88',0xb24c:'blake2s-96',0xb24d:'blake2s-104',0xb24e:'blake2s-112',0xb24f:'blake2s-120',0xb250:'blake2s-128',0xb251:'blake2s-136',0xb252:'blake2s-144',0xb253:'blake2s-152',0xb254:'blake2s-160',0xb255:'blake2s-168',0xb256:'blake2s-176',0xb257:'blake2s-184',0xb258:'blake2s-192',0xb259:'blake2s-200',0xb25a:'blake2s-208',0xb25b:'blake2s-216',0xb25c:'blake2s-224',0xb25d:'blake2s-232',0xb25e:'blake2s-240',0xb25f:'blake2s-248',0xb260:'blake2s-256',0xb301:'Skein256-8',0xb302:'Skein256-16',0xb303:'Skein256-24',0xb304:'Skein256-32',0xb305:'Skein256-40',0xb306:'Skein256-48',0xb307:'Skein256-56',0xb308:'Skein256-64',0xb309:'Skein256-72',0xb30a:'Skein256-80',0xb30b:'Skein256-88',0xb30c:'Skein256-96',0xb30d:'Skein256-104',0xb30e:'Skein256-112',0xb30f:'Skein256-120',0xb310:'Skein256-128',0xb311:'Skein256-136',0xb312:'Skein256-144',0xb313:'Skein256-152',0xb314:'Skein256-160',0xb315:'Skein256-168',0xb316:'Skein256-176',0xb317:'Skein256-184',0xb318:'Skein256-192',0xb319:'Skein256-200',0xb31a:'Skein256-208',0xb31b:'Skein256-216',0xb31c:'Skein256-224',0xb31d:'Skein256-232',0xb31e:'Skein256-240',0xb31f:'Skein256-248',0xb320:'Skein256-256',0xb321:'Skein512-8',0xb322:'Skein512-16',0xb323:'Skein512-24',0xb324:'Skein512-32',0xb325:'Skein512-40',0xb326:'Skein512-48',0xb327:'Skein512-56',0xb328:'Skein512-64',0xb329:'Skein512-72',0xb32a:'Skein512-80',0xb32b:'Skein512-88',0xb32c:'Skein512-96',0xb32d:'Skein512-104',0xb32e:'Skein512-112',0xb32f:'Skein512-120',0xb330:'Skein512-128',0xb331:'Skein512-136',0xb332:'Skein512-144',0xb333:'Skein512-152',0xb334:'Skein512-160',0xb335:'Skein512-168',0xb336:'Skein512-176',0xb337:'Skein512-184',0xb338:'Skein512-192',0xb339:'Skein512-200',0xb33a:'Skein512-208',0xb33b:'Skein512-216',0xb33c:'Skein512-224',0xb33d:'Skein512-232',0xb33e:'Skein512-240',0xb33f:'Skein512-248',0xb340:'Skein512-256',0xb341:'Skein512-264',0xb342:'Skein512-272',0xb343:'Skein512-280',0xb344:'Skein512-288',0xb345:'Skein512-296',0xb346:'Skein512-304',0xb347:'Skein512-312',0xb348:'Skein512-320',0xb349:'Skein512-328',0xb34a:'Skein512-336',0xb34b:'Skein512-344',0xb34c:'Skein512-352',0xb34d:'Skein512-360',0xb34e:'Skein512-368',0xb34f:'Skein512-376',0xb350:'Skein512-384',0xb351:'Skein512-392',0xb352:'Skein512-400',0xb353:'Skein512-408',0xb354:'Skein512-416',0xb355:'Skein512-424',0xb356:'Skein512-432',0xb357:'Skein512-440',0xb358:'Skein512-448',0xb359:'Skein512-456',0xb35a:'Skein512-464',0xb35b:'Skein512-472',0xb35c:'Skein512-480',0xb35d:'Skein512-488',0xb35e:'Skein512-496',0xb35f:'Skein512-504',0xb360:'Skein512-512',0xb361:'Skein1024-8',0xb362:'Skein1024-16',0xb363:'Skein1024-24',0xb364:'Skein1024-32',0xb365:'Skein1024-40',0xb366:'Skein1024-48',0xb367:'Skein1024-56',0xb368:'Skein1024-64',0xb369:'Skein1024-72',0xb36a:'Skein1024-80',0xb36b:'Skein1024-88',0xb36c:'Skein1024-96',0xb36d:'Skein1024-104',0xb36e:'Skein1024-112',0xb36f:'Skein1024-120',0xb370:'Skein1024-128',0xb371:'Skein1024-136',0xb372:'Skein1024-144',0xb373:'Skein1024-152',0xb374:'Skein1024-160',0xb375:'Skein1024-168',0xb376:'Skein1024-176',0xb377:'Skein1024-184',0xb378:'Skein1024-192',0xb379:'Skein1024-200',0xb37a:'Skein1024-208',0xb37b:'Skein1024-216',0xb37c:'Skein1024-224',0xb37d:'Skein1024-232',0xb37e:'Skein1024-240',0xb37f:'Skein1024-248',0xb380:'Skein1024-256',0xb381:'Skein1024-264',0xb382:'Skein1024-272',0xb383:'Skein1024-280',0xb384:'Skein1024-288',0xb385:'Skein1024-296',0xb386:'Skein1024-304',0xb387:'Skein1024-312',0xb388:'Skein1024-320',0xb389:'Skein1024-328',0xb38a:'Skein1024-336',0xb38b:'Skein1024-344',0xb38c:'Skein1024-352',0xb38d:'Skein1024-360',0xb38e:'Skein1024-368',0xb38f:'Skein1024-376',0xb390:'Skein1024-384',0xb391:'Skein1024-392',0xb392:'Skein1024-400',0xb393:'Skein1024-408',0xb394:'Skein1024-416',0xb395:'Skein1024-424',0xb396:'Skein1024-432',0xb397:'Skein1024-440',0xb398:'Skein1024-448',0xb399:'Skein1024-456',0xb39a:'Skein1024-464',0xb39b:'Skein1024-472',0xb39c:'Skein1024-480',0xb39d:'Skein1024-488',0xb39e:'Skein1024-496',0xb39f:'Skein1024-504',0xb3a0:'Skein1024-512',0xb3a1:'Skein1024-520',0xb3a2:'Skein1024-528',0xb3a3:'Skein1024-536',0xb3a4:'Skein1024-544',0xb3a5:'Skein1024-552',0xb3a6:'Skein1024-560',0xb3a7:'Skein1024-568',0xb3a8:'Skein1024-576',0xb3a9:'Skein1024-584',0xb3aa:'Skein1024-592',0xb3ab:'Skein1024-600',0xb3ac:'Skein1024-608',0xb3ad:'Skein1024-616',0xb3ae:'Skein1024-624',0xb3af:'Skein1024-632',0xb3b0:'Skein1024-640',0xb3b1:'Skein1024-648',0xb3b2:'Skein1024-656',0xb3b3:'Skein1024-664',0xb3b4:'Skein1024-672',0xb3b5:'Skein1024-680',0xb3b6:'Skein1024-688',0xb3b7:'Skein1024-696',0xb3b8:'Skein1024-704',0xb3b9:'Skein1024-712',0xb3ba:'Skein1024-720',0xb3bb:'Skein1024-728',0xb3bc:'Skein1024-736',0xb3bd:'Skein1024-744',0xb3be:'Skein1024-752',0xb3bf:'Skein1024-760',0xb3c0:'Skein1024-768',0xb3c1:'Skein1024-776',0xb3c2:'Skein1024-784',0xb3c3:'Skein1024-792',0xb3c4:'Skein1024-800',0xb3c5:'Skein1024-808',0xb3c6:'Skein1024-816',0xb3c7:'Skein1024-824',0xb3c8:'Skein1024-832',0xb3c9:'Skein1024-840',0xb3ca:'Skein1024-848',0xb3cb:'Skein1024-856',0xb3cc:'Skein1024-864',0xb3cd:'Skein1024-872',0xb3ce:'Skein1024-880',0xb3cf:'Skein1024-888',0xb3d0:'Skein1024-896',0xb3d1:'Skein1024-904',0xb3d2:'Skein1024-912',0xb3d3:'Skein1024-920',0xb3d4:'Skein1024-928',0xb3d5:'Skein1024-936',0xb3d6:'Skein1024-944',0xb3d7:'Skein1024-952',0xb3d8:'Skein1024-960',0xb3d9:'Skein1024-968',0xb3da:'Skein1024-976',0xb3db:'Skein1024-984',0xb3dc:'Skein1024-992',0xb3dd:'Skein1024-1000',0xb3de:'Skein1024-1008',0xb3df:'Skein1024-1016',0xb3e0:'Skein1024-1024'});/* common-shake removed: exports.defaultLengths = */ void Object.freeze({0x11:20,0x12:32,0x13:64,0x56:32,0x17:28,0x16:32,0x15:48,0x14:64,0x18:32,0x19:64,0x1A:28,0x1B:32,0x1C:48,0x1D:64,0x22:32,0xb201:0x01,0xb202:0x02,0xb203:0x03,0xb204:0x04,0xb205:0x05,0xb206:0x06,0xb207:0x07,0xb208:0x08,0xb209:0x09,0xb20a:0x0a,0xb20b:0x0b,0xb20c:0x0c,0xb20d:0x0d,0xb20e:0x0e,0xb20f:0x0f,0xb210:0x10,0xb211:0x11,0xb212:0x12,0xb213:0x13,0xb214:0x14,0xb215:0x15,0xb216:0x16,0xb217:0x17,0xb218:0x18,0xb219:0x19,0xb21a:0x1a,0xb21b:0x1b,0xb21c:0x1c,0xb21d:0x1d,0xb21e:0x1e,0xb21f:0x1f,0xb220:0x20,0xb221:0x21,0xb222:0x22,0xb223:0x23,0xb224:0x24,0xb225:0x25,0xb226:0x26,0xb227:0x27,0xb228:0x28,0xb229:0x29,0xb22a:0x2a,0xb22b:0x2b,0xb22c:0x2c,0xb22d:0x2d,0xb22e:0x2e,0xb22f:0x2f,0xb230:0x30,0xb231:0x31,0xb232:0x32,0xb233:0x33,0xb234:0x34,0xb235:0x35,0xb236:0x36,0xb237:0x37,0xb238:0x38,0xb239:0x39,0xb23a:0x3a,0xb23b:0x3b,0xb23c:0x3c,0xb23d:0x3d,0xb23e:0x3e,0xb23f:0x3f,0xb240:0x40,0xb241:0x01,0xb242:0x02,0xb243:0x03,0xb244:0x04,0xb245:0x05,0xb246:0x06,0xb247:0x07,0xb248:0x08,0xb249:0x09,0xb24a:0x0a,0xb24b:0x0b,0xb24c:0x0c,0xb24d:0x0d,0xb24e:0x0e,0xb24f:0x0f,0xb250:0x10,0xb251:0x11,0xb252:0x12,0xb253:0x13,0xb254:0x14,0xb255:0x15,0xb256:0x16,0xb257:0x17,0xb258:0x18,0xb259:0x19,0xb25a:0x1a,0xb25b:0x1b,0xb25c:0x1c,0xb25d:0x1d,0xb25e:0x1e,0xb25f:0x1f,0xb260:0x20,0xb301:0x01,0xb302:0x02,0xb303:0x03,0xb304:0x04,0xb305:0x05,0xb306:0x06,0xb307:0x07,0xb308:0x08,0xb309:0x09,0xb30a:0x0a,0xb30b:0x0b,0xb30c:0x0c,0xb30d:0x0d,0xb30e:0x0e,0xb30f:0x0f,0xb310:0x10,0xb311:0x11,0xb312:0x12,0xb313:0x13,0xb314:0x14,0xb315:0x15,0xb316:0x16,0xb317:0x17,0xb318:0x18,0xb319:0x19,0xb31a:0x1a,0xb31b:0x1b,0xb31c:0x1c,0xb31d:0x1d,0xb31e:0x1e,0xb31f:0x1f,0xb320:0x20,0xb321:0x01,0xb322:0x02,0xb323:0x03,0xb324:0x04,0xb325:0x05,0xb326:0x06,0xb327:0x07,0xb328:0x08,0xb329:0x09,0xb32a:0x0a,0xb32b:0x0b,0xb32c:0x0c,0xb32d:0x0d,0xb32e:0x0e,0xb32f:0x0f,0xb330:0x10,0xb331:0x11,0xb332:0x12,0xb333:0x13,0xb334:0x14,0xb335:0x15,0xb336:0x16,0xb337:0x17,0xb338:0x18,0xb339:0x19,0xb33a:0x1a,0xb33b:0x1b,0xb33c:0x1c,0xb33d:0x1d,0xb33e:0x1e,0xb33f:0x1f,0xb340:0x20,0xb341:0x21,0xb342:0x22,0xb343:0x23,0xb344:0x24,0xb345:0x25,0xb346:0x26,0xb347:0x27,0xb348:0x28,0xb349:0x29,0xb34a:0x2a,0xb34b:0x2b,0xb34c:0x2c,0xb34d:0x2d,0xb34e:0x2e,0xb34f:0x2f,0xb350:0x30,0xb351:0x31,0xb352:0x32,0xb353:0x33,0xb354:0x34,0xb355:0x35,0xb356:0x36,0xb357:0x37,0xb358:0x38,0xb359:0x39,0xb35a:0x3a,0xb35b:0x3b,0xb35c:0x3c,0xb35d:0x3d,0xb35e:0x3e,0xb35f:0x3f,0xb360:0x40,0xb361:0x01,0xb362:0x02,0xb363:0x03,0xb364:0x04,0xb365:0x05,0xb366:0x06,0xb367:0x07,0xb368:0x08,0xb369:0x09,0xb36a:0x0a,0xb36b:0x0b,0xb36c:0x0c,0xb36d:0x0d,0xb36e:0x0e,0xb36f:0x0f,0xb370:0x10,0xb371:0x11,0xb372:0x12,0xb373:0x13,0xb374:0x14,0xb375:0x15,0xb376:0x16,0xb377:0x17,0xb378:0x18,0xb379:0x19,0xb37a:0x1a,0xb37b:0x1b,0xb37c:0x1c,0xb37d:0x1d,0xb37e:0x1e,0xb37f:0x1f,0xb380:0x20,0xb381:0x21,0xb382:0x22,0xb383:0x23,0xb384:0x24,0xb385:0x25,0xb386:0x26,0xb387:0x27,0xb388:0x28,0xb389:0x29,0xb38a:0x2a,0xb38b:0x2b,0xb38c:0x2c,0xb38d:0x2d,0xb38e:0x2e,0xb38f:0x2f,0xb390:0x30,0xb391:0x31,0xb392:0x32,0xb393:0x33,0xb394:0x34,0xb395:0x35,0xb396:0x36,0xb397:0x37,0xb398:0x38,0xb399:0x39,0xb39a:0x3a,0xb39b:0x3b,0xb39c:0x3c,0xb39d:0x3d,0xb39e:0x3e,0xb39f:0x3f,0xb3a0:0x40,0xb3a1:0x41,0xb3a2:0x42,0xb3a3:0x43,0xb3a4:0x44,0xb3a5:0x45,0xb3a6:0x46,0xb3a7:0x47,0xb3a8:0x48,0xb3a9:0x49,0xb3aa:0x4a,0xb3ab:0x4b,0xb3ac:0x4c,0xb3ad:0x4d,0xb3ae:0x4e,0xb3af:0x4f,0xb3b0:0x50,0xb3b1:0x51,0xb3b2:0x52,0xb3b3:0x53,0xb3b4:0x54,0xb3b5:0x55,0xb3b6:0x56,0xb3b7:0x57,0xb3b8:0x58,0xb3b9:0x59,0xb3ba:0x5a,0xb3bb:0x5b,0xb3bc:0x5c,0xb3bd:0x5d,0xb3be:0x5e,0xb3bf:0x5f,0xb3c0:0x60,0xb3c1:0x61,0xb3c2:0x62,0xb3c3:0x63,0xb3c4:0x64,0xb3c5:0x65,0xb3c6:0x66,0xb3c7:0x67,0xb3c8:0x68,0xb3c9:0x69,0xb3ca:0x6a,0xb3cb:0x6b,0xb3cc:0x6c,0xb3cd:0x6d,0xb3ce:0x6e,0xb3cf:0x6f,0xb3d0:0x70,0xb3d1:0x71,0xb3d2:0x72,0xb3d3:0x73,0xb3d4:0x74,0xb3d5:0x75,0xb3d6:0x76,0xb3d7:0x77,0xb3d8:0x78,0xb3d9:0x79,0xb3da:0x7a,0xb3db:0x7b,0xb3dc:0x7c,0xb3dd:0x7d,0xb3de:0x7e,0xb3df:0x7f,0xb3e0:0x80});

},{}],497:[function(require,module,exports){
arguments[4][287][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"dup":287}],499:[function(require,module,exports){
module.exports={"2.16.840.1.101.3.4.1.1": "aes-128-ecb",
"2.16.840.1.101.3.4.1.2": "aes-128-cbc",
"2.16.840.1.101.3.4.1.3": "aes-128-ofb",
"2.16.840.1.101.3.4.1.4": "aes-128-cfb",
"2.16.840.1.101.3.4.1.21": "aes-192-ecb",
"2.16.840.1.101.3.4.1.22": "aes-192-cbc",
"2.16.840.1.101.3.4.1.23": "aes-192-ofb",
"2.16.840.1.101.3.4.1.24": "aes-192-cfb",
"2.16.840.1.101.3.4.1.41": "aes-256-ecb",
"2.16.840.1.101.3.4.1.42": "aes-256-cbc",
"2.16.840.1.101.3.4.1.43": "aes-256-ofb",
"2.16.840.1.101.3.4.1.44": "aes-256-cfb"
}
},{}],500:[function(require,module,exports){
'use strict';var asn1=require('asn1.js');exports.certificate=require('./certificate');var RSAPrivateKey=asn1.define('RSAPrivateKey',function(){this.seq().obj(this.key('version')["int"](),this.key('modulus')["int"](),this.key('publicExponent')["int"](),this.key('privateExponent')["int"](),this.key('prime1')["int"](),this.key('prime2')["int"](),this.key('exponent1')["int"](),this.key('exponent2')["int"](),this.key('coefficient')["int"]());});exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define('RSAPublicKey',function(){this.seq().obj(this.key('modulus')["int"](),this.key('publicExponent')["int"]());});exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr());});exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('none').null_().optional(),this.key('curve').objid().optional(),this.key('params').seq().obj(this.key('p')["int"](),this.key('q')["int"](),this.key('g')["int"]()).optional());});var PrivateKeyInfo=asn1.define('PrivateKeyInfo',function(){this.seq().obj(this.key('version')["int"](),this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPrivateKey').octstr());});exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define('EncryptedPrivateKeyInfo',function(){this.seq().obj(this.key('algorithm').seq().obj(this.key('id').objid(),this.key('decrypt').seq().obj(this.key('kde').seq().obj(this.key('id').objid(),this.key('kdeparams').seq().obj(this.key('salt').octstr(),this.key('iters')["int"]())),this.key('cipher').seq().obj(this.key('algo').objid(),this.key('iv').octstr()))),this.key('subjectPrivateKey').octstr());});exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define('DSAPrivateKey',function(){this.seq().obj(this.key('version')["int"](),this.key('p')["int"](),this.key('q')["int"](),this.key('g')["int"](),this.key('pub_key')["int"](),this.key('priv_key')["int"]());});exports.DSAPrivateKey=DSAPrivateKey;exports.DSAparam=asn1.define('DSAparam',function(){this["int"]();});var ECPrivateKey=asn1.define('ECPrivateKey',function(){this.seq().obj(this.key('version')["int"](),this.key('privateKey').octstr(),this.key('parameters').optional().explicit(0).use(ECParameters),this.key('publicKey').optional().explicit(1).bitstr());});exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define('ECParameters',function(){this.choice({namedCurve:this.objid()});});exports.signature=asn1.define('signature',function(){this.seq().obj(this.key('r')["int"](),this.key('s')["int"]());});

},{"./certificate":501,"asn1.js":504}],501:[function(require,module,exports){
'use strict';var asn=require('asn1.js');var Time=asn.define('Time',function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()});});var AttributeTypeValue=asn.define('AttributeTypeValue',function(){this.seq().obj(this.key('type').objid(),this.key('value').any());});var AlgorithmIdentifier=asn.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('parameters').optional(),this.key('curve').objid().optional());});var SubjectPublicKeyInfo=asn.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr());});var RelativeDistinguishedName=asn.define('RelativeDistinguishedName',function(){this.setof(AttributeTypeValue);});var RDNSequence=asn.define('RDNSequence',function(){this.seqof(RelativeDistinguishedName);});var Name=asn.define('Name',function(){this.choice({rdnSequence:this.use(RDNSequence)});});var Validity=asn.define('Validity',function(){this.seq().obj(this.key('notBefore').use(Time),this.key('notAfter').use(Time));});var Extension=asn.define('Extension',function(){this.seq().obj(this.key('extnID').objid(),this.key('critical').bool().def(false),this.key('extnValue').octstr());});var TBSCertificate=asn.define('TBSCertificate',function(){this.seq().obj(this.key('version').explicit(0)["int"]().optional(),this.key('serialNumber')["int"](),this.key('signature').use(AlgorithmIdentifier),this.key('issuer').use(Name),this.key('validity').use(Validity),this.key('subject').use(Name),this.key('subjectPublicKeyInfo').use(SubjectPublicKeyInfo),this.key('issuerUniqueID').implicit(1).bitstr().optional(),this.key('subjectUniqueID').implicit(2).bitstr().optional(),this.key('extensions').explicit(3).seqof(Extension).optional());});var X509Certificate=asn.define('X509Certificate',function(){this.seq().obj(this.key('tbsCertificate').use(TBSCertificate),this.key('signatureAlgorithm').use(AlgorithmIdentifier),this.key('signatureValue').bitstr());});module.exports=X509Certificate;

},{"asn1.js":504}],504:[function(require,module,exports){
var asn1=exports;asn1.bignum=require('bn.js');asn1.define=require('./asn1/api').define;asn1.base=require('./asn1/base');asn1.constants=require('./asn1/constants');asn1.decoders=require('./asn1/decoders');asn1.encoders=require('./asn1/encoders');

},{"./asn1/api":505,"./asn1/base":507,"./asn1/constants":511,"./asn1/decoders":513,"./asn1/encoders":516,"bn.js":132}],502:[function(require,module,exports){
var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m;var startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m;var fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m;var evp=require('evp_bytestokey');var ciphers=require('browserify-aes');var Buffer=require('safe-buffer').Buffer;module.exports=function(okey,password){var key=okey.toString();var match=key.match(findProc);var decrypted;if(!match){var match2=key.match(fullRegex);decrypted=new Buffer(match2[2].replace(/[\r\n]/g,''),'base64');}else{var suite='aes'+match[1];var iv=Buffer.from(match[2],'hex');var cipherText=Buffer.from(match[3].replace(/[\r\n]/g,''),'base64');var cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key;var out=[];var cipher=ciphers.createDecipheriv(suite,cipherKey,iv);out.push(cipher.update(cipherText));out.push(cipher["final"]());decrypted=Buffer.concat(out);}var tag=key.match(startRegex)[1];return{tag:tag,data:decrypted};};

},{"browserify-aes":136,"evp_bytestokey":290,"safe-buffer":639}],505:[function(require,module,exports){
var asn1=require('../asn1');var inherits=require('inherits');var api=exports;api.define=function define(name,body){return new Entity(name,body);};function Entity(name,body){this.name=name;this.body=body;this.decoders={};this.encoders={};};Entity.prototype._createNamed=function createNamed(base){var named;try{named=require('vm').runInThisContext('(function '+this.name+'(entity) {\n'+'  this._initNamed(entity);\n'+'})');}catch(e){named=function named(entity){this._initNamed(entity);};}inherits(named,base);named.prototype._initNamed=function initnamed(entity){base.call(this,entity);};return new named(this);};Entity.prototype._getDecoder=function _getDecoder(enc){enc=enc||'der';if(!this.decoders.hasOwnProperty(enc))this.decoders[enc]=this._createNamed(asn1.decoders[enc]);return this.decoders[enc];};Entity.prototype.decode=function decode(data,enc,options){return this._getDecoder(enc).decode(data,options);};Entity.prototype._getEncoder=function _getEncoder(enc){enc=enc||'der';if(!this.encoders.hasOwnProperty(enc))this.encoders[enc]=this._createNamed(asn1.encoders[enc]);return this.encoders[enc];};Entity.prototype.encode=function encode(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter);};

},{"../asn1":504,"inherits":307,"vm":1287}],511:[function(require,module,exports){
var constants=exports;constants._reverse=function reverse(map){var res={};Object.keys(map).forEach(function(key){if((key|0)==key)key=key|0;var value=map[key];res[value]=key;});return res;};constants.der=require('./der');

},{"./der":510}],513:[function(require,module,exports){
var decoders=exports;decoders.der=require('./der');decoders.pem=require('./pem');

},{"./der":512,"./pem":514}],516:[function(require,module,exports){
var encoders=exports;encoders.der=require('./der');encoders.pem=require('./pem');

},{"./der":515,"./pem":517}],507:[function(require,module,exports){
var base=exports;base.Reporter=require('./reporter').Reporter;base.DecoderBuffer=require('./buffer').DecoderBuffer;base.EncoderBuffer=require('./buffer').EncoderBuffer;base.Node=require('./node');

},{"./buffer":506,"./node":508,"./reporter":509}],1287:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var indexOf=function indexOf(xs,item){if(xs.indexOf)return xs.indexOf(item);else for(var i=0;i<xs.length;i++){if(xs[i]===item)return i;}return-1;};var Object_keys=function Object_keys(obj){if(Object.keys)return Object.keys(obj);else{var res=[];for(var key in obj){res.push(key);}return res;}};var forEach=function forEach(xs,fn){if(xs.forEach)return xs.forEach(fn);else for(var i=0;i<xs.length;i++){fn(xs[i],i,xs);}};var defineProp=function(){try{Object.defineProperty({},'_',{});return function(obj,name,value){Object.defineProperty(obj,name,{writable:true,enumerable:false,configurable:true,value:value});};}catch(e){return function(obj,name,value){obj[name]=value;};}}();var globals=['Array','Boolean','Date','Error','EvalError','Function','Infinity','JSON','Math','NaN','Number','Object','RangeError','ReferenceError','RegExp','String','SyntaxError','TypeError','URIError','decodeURI','decodeURIComponent','encodeURI','encodeURIComponent','escape','eval','isFinite','isNaN','parseFloat','parseInt','undefined','unescape'];function Context(){}Context.prototype={};var Script=exports.Script=function NodeScript(code){if(!(this instanceof Script))return new Script(code);this.code=code;};Script.prototype.runInContext=function(context){if(!(context instanceof Context)){throw new TypeError("needs a 'context' argument.");}var iframe=document.createElement('iframe');if(!iframe.style)iframe.style={};iframe.style.display='none';document.body.appendChild(iframe);var win=iframe.contentWindow;var wEval=win.eval,wExecScript=win.execScript;if(!wEval&&wExecScript){wExecScript.call(win,'null');wEval=win.eval;}forEach(Object_keys(context),function(key){win[key]=context[key];});forEach(globals,function(key){if(context[key]){win[key]=context[key];}});var winKeys=Object_keys(win);var res=wEval.call(win,this.code);forEach(Object_keys(win),function(key){if(key in context||indexOf(winKeys,key)===-1){context[key]=win[key];}});forEach(globals,function(key){if(!(key in context)){defineProp(context,key,win[key]);}});document.body.removeChild(iframe);return res;};Script.prototype.runInThisContext=function(){return eval(this.code);};Script.prototype.runInNewContext=function(context){var ctx=Script.createContext(context);var res=this.runInContext(ctx);if(context){forEach(Object_keys(ctx),function(key){context[key]=ctx[key];});}return res;};forEach(Object_keys(Script.prototype),function(name){exports[name]=Script[name]=function(code){var s=Script(code);return s[name].apply(s,[].slice.call(arguments,1));};});exports.isContext=function(context){return context instanceof Context;};exports.createScript=function(code){return exports.Script(code);};exports.createContext=Script.createContext=function(context){var copy=new Context();if((0,_typeof2["default"])(context)==='object'){forEach(Object_keys(context),function(key){copy[key]=context[key];});}return copy;};

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],506:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var inherits=require('inherits');var Reporter=require('../base').Reporter;var Buffer=require('buffer').Buffer;function DecoderBuffer(base,options){Reporter.call(this,options);if(!Buffer.isBuffer(base)){this.error('Input not Buffer');return;}this.base=base;this.offset=0;this.length=base.length;}inherits(DecoderBuffer,Reporter);exports.DecoderBuffer=DecoderBuffer;DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)};};DecoderBuffer.prototype.restore=function restore(save){var res=new DecoderBuffer(this.base);res.offset=save.offset;res.length=this.offset;this.offset=save.offset;Reporter.prototype.restore.call(this,save.reporter);return res;};DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length;};DecoderBuffer.prototype.readUInt8=function readUInt8(fail){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,true);else return this.error(fail||'DecoderBuffer overrun');};DecoderBuffer.prototype.skip=function skip(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||'DecoderBuffer overrun');var res=new DecoderBuffer(this.base);res._reporterState=this._reporterState;res.offset=this.offset;res.length=this.offset+bytes;this.offset+=bytes;return res;};DecoderBuffer.prototype.raw=function raw(save){return this.base.slice(save?save.offset:this.offset,this.length);};function EncoderBuffer(value,reporter){if(Array.isArray(value)){this.length=0;this.value=value.map(function(item){if(!(item instanceof EncoderBuffer))item=new EncoderBuffer(item,reporter);this.length+=item.length;return item;},this);}else if(typeof value==='number'){if(!(0<=value&&value<=0xff))return reporter.error('non-byte EncoderBuffer value');this.value=value;this.length=1;}else if(typeof value==='string'){this.value=value;this.length=Buffer.byteLength(value);}else if(Buffer.isBuffer(value)){this.value=value;this.length=value.length;}else{return reporter.error('Unsupported type: '+(0,_typeof2["default"])(value));}}exports.EncoderBuffer=EncoderBuffer;EncoderBuffer.prototype.join=function join(out,offset){if(!out)out=new Buffer(this.length);if(!offset)offset=0;if(this.length===0)return out;if(Array.isArray(this.value)){this.value.forEach(function(item){item.join(out,offset);offset+=item.length;});}else{if(typeof this.value==='number')out[offset]=this.value;else if(typeof this.value==='string')out.write(this.value,offset);else if(Buffer.isBuffer(this.value))this.value.copy(out,offset);offset+=this.length;}return out;};

},{"../base":507,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"buffer":1133,"inherits":307}],509:[function(require,module,exports){
var inherits=require('inherits');function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]};}exports.Reporter=Reporter;Reporter.prototype.isError=function isError(obj){return obj instanceof ReporterError;};Reporter.prototype.save=function save(){var state=this._reporterState;return{obj:state.obj,pathLen:state.path.length};};Reporter.prototype.restore=function restore(data){var state=this._reporterState;state.obj=data.obj;state.path=state.path.slice(0,data.pathLen);};Reporter.prototype.enterKey=function enterKey(key){return this._reporterState.path.push(key);};Reporter.prototype.exitKey=function exitKey(index){var state=this._reporterState;state.path=state.path.slice(0,index-1);};Reporter.prototype.leaveKey=function leaveKey(index,key,value){var state=this._reporterState;this.exitKey(index);if(state.obj!==null)state.obj[key]=value;};Reporter.prototype.path=function path(){return this._reporterState.path.join('/');};Reporter.prototype.enterObject=function enterObject(){var state=this._reporterState;var prev=state.obj;state.obj={};return prev;};Reporter.prototype.leaveObject=function leaveObject(prev){var state=this._reporterState;var now=state.obj;state.obj=prev;return now;};Reporter.prototype.error=function error(msg){var err;var state=this._reporterState;var inherited=msg instanceof ReporterError;if(inherited){err=msg;}else{err=new ReporterError(state.path.map(function(elem){return'['+JSON.stringify(elem)+']';}).join(''),msg.message||msg,msg.stack);}if(!state.options.partial)throw err;if(!inherited)state.errors.push(err);return err;};Reporter.prototype.wrapResult=function wrapResult(result){var state=this._reporterState;if(!state.options.partial)return result;return{result:this.isError(result)?null:result,errors:state.errors};};function ReporterError(path,msg){this.path=path;this.rethrow(msg);};inherits(ReporterError,Error);ReporterError.prototype.rethrow=function rethrow(msg){this.message=msg+' at: '+(this.path||'(shallow)');if(Error.captureStackTrace)Error.captureStackTrace(this,ReporterError);if(!this.stack){try{throw new Error(this.message);}catch(e){this.stack=e.stack;}}return this;};

},{"inherits":307}],508:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var Reporter=require('../base').Reporter;var EncoderBuffer=require('../base').EncoderBuffer;var DecoderBuffer=require('../base').DecoderBuffer;var assert=require('minimalistic-assert');var tags=['seq','seqof','set','setof','objid','bool','gentime','utctime','null_','enum','int','objDesc','bitstr','bmpstr','charstr','genstr','graphstr','ia5str','iso646str','numstr','octstr','printstr','t61str','unistr','utf8str','videostr'];var methods=['key','obj','use','optional','explicit','implicit','def','choice','any','contains'].concat(tags);var overrided=['_peekTag','_decodeTag','_use','_decodeStr','_decodeObjid','_decodeTime','_decodeNull','_decodeInt','_decodeBool','_decodeList','_encodeComposite','_encodeStr','_encodeObjid','_encodeTime','_encodeNull','_encodeInt','_encodeBool'];function Node(enc,parent){var state={};this._baseState=state;state.enc=enc;state.parent=parent||null;state.children=null;state.tag=null;state.args=null;state.reverseArgs=null;state.choice=null;state.optional=false;state.any=false;state.obj=false;state.use=null;state.useDecoder=null;state.key=null;state['default']=null;state.explicit=null;state.implicit=null;state.contains=null;if(!state.parent){state.children=[];this._wrap();}}module.exports=Node;var stateProps=['enc','parent','children','tag','args','reverseArgs','choice','optional','any','obj','use','alteredUse','key','default','explicit','implicit','contains'];Node.prototype.clone=function clone(){var state=this._baseState;var cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop];});var res=new this.constructor(cstate.parent);res._baseState=cstate;return res;};Node.prototype._wrap=function wrap(){var state=this._baseState;methods.forEach(function(method){this[method]=function _wrappedMethod(){var clone=new this.constructor(this);state.children.push(clone);return clone[method].apply(clone,arguments);};},this);};Node.prototype._init=function init(body){var state=this._baseState;assert(state.parent===null);body.call(this);state.children=state.children.filter(function(child){return child._baseState.parent===this;},this);assert.equal(state.children.length,1,'Root node can have only one child');};Node.prototype._useArgs=function useArgs(args){var state=this._baseState;var children=args.filter(function(arg){return arg instanceof this.constructor;},this);args=args.filter(function(arg){return!(arg instanceof this.constructor);},this);if(children.length!==0){assert(state.children===null);state.children=children;children.forEach(function(child){child._baseState.parent=this;},this);}if(args.length!==0){assert(state.args===null);state.args=args;state.reverseArgs=args.map(function(arg){if((0,_typeof2["default"])(arg)!=='object'||arg.constructor!==Object)return arg;var res={};Object.keys(arg).forEach(function(key){if(key==(key|0))key|=0;var value=arg[key];res[value]=key;});return res;});}};overrided.forEach(function(method){Node.prototype[method]=function _overrided(){var state=this._baseState;throw new Error(method+' not implemented for encoding: '+state.enc);};});tags.forEach(function(tag){Node.prototype[tag]=function _tagMethod(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);assert(state.tag===null);state.tag=tag;this._useArgs(args);return this;};});Node.prototype.use=function use(item){assert(item);var state=this._baseState;assert(state.use===null);state.use=item;return this;};Node.prototype.optional=function optional(){var state=this._baseState;state.optional=true;return this;};Node.prototype.def=function def(val){var state=this._baseState;assert(state['default']===null);state['default']=val;state.optional=true;return this;};Node.prototype.explicit=function explicit(num){var state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.explicit=num;return this;};Node.prototype.implicit=function implicit(num){var state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.implicit=num;return this;};Node.prototype.obj=function obj(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);state.obj=true;if(args.length!==0)this._useArgs(args);return this;};Node.prototype.key=function key(newKey){var state=this._baseState;assert(state.key===null);state.key=newKey;return this;};Node.prototype.any=function any(){var state=this._baseState;state.any=true;return this;};Node.prototype.choice=function choice(obj){var state=this._baseState;assert(state.choice===null);state.choice=obj;this._useArgs(Object.keys(obj).map(function(key){return obj[key];}));return this;};Node.prototype.contains=function contains(item){var state=this._baseState;assert(state.use===null);state.contains=item;return this;};Node.prototype._decode=function decode(input,options){var state=this._baseState;if(state.parent===null)return input.wrapResult(state.children[0]._decode(input,options));var result=state['default'];var present=true;var prevKey=null;if(state.key!==null)prevKey=input.enterKey(state.key);if(state.optional){var tag=null;if(state.explicit!==null)tag=state.explicit;else if(state.implicit!==null)tag=state.implicit;else if(state.tag!==null)tag=state.tag;if(tag===null&&!state.any){var save=input.save();try{if(state.choice===null)this._decodeGeneric(state.tag,input,options);else this._decodeChoice(input,options);present=true;}catch(e){present=false;}input.restore(save);}else{present=this._peekTag(input,tag,state.any);if(input.isError(present))return present;}}var prevObj;if(state.obj&&present)prevObj=input.enterObject();if(present){if(state.explicit!==null){var explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit;}var start=input.offset;if(state.use===null&&state.choice===null){if(state.any)var save=input.save();var body=this._decodeTag(input,state.implicit!==null?state.implicit:state.tag,state.any);if(input.isError(body))return body;if(state.any)result=input.raw(save);else input=body;}if(options&&options.track&&state.tag!==null)options.track(input.path(),start,input.length,'tagged');if(options&&options.track&&state.tag!==null)options.track(input.path(),input.offset,input.length,'content');if(state.any)result=result;else if(state.choice===null)result=this._decodeGeneric(state.tag,input,options);else result=this._decodeChoice(input,options);if(input.isError(result))return result;if(!state.any&&state.choice===null&&state.children!==null){state.children.forEach(function decodeChildren(child){child._decode(input,options);});}if(state.contains&&(state.tag==='octstr'||state.tag==='bitstr')){var data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data,options);}}if(state.obj&&present)result=input.leaveObject(prevObj);if(state.key!==null&&(result!==null||present===true))input.leaveKey(prevKey,state.key,result);else if(prevKey!==null)input.exitKey(prevKey);return result;};Node.prototype._decodeGeneric=function decodeGeneric(tag,input,options){var state=this._baseState;if(tag==='seq'||tag==='set')return null;if(tag==='seqof'||tag==='setof')return this._decodeList(input,tag,state.args[0],options);else if(/str$/.test(tag))return this._decodeStr(input,tag,options);else if(tag==='objid'&&state.args)return this._decodeObjid(input,state.args[0],state.args[1],options);else if(tag==='objid')return this._decodeObjid(input,null,null,options);else if(tag==='gentime'||tag==='utctime')return this._decodeTime(input,tag,options);else if(tag==='null_')return this._decodeNull(input,options);else if(tag==='bool')return this._decodeBool(input,options);else if(tag==='objDesc')return this._decodeStr(input,tag,options);else if(tag==='int'||tag==='enum')return this._decodeInt(input,state.args&&state.args[0],options);if(state.use!==null){return this._getUse(state.use,input._reporterState.obj)._decode(input,options);}else{return input.error('unknown tag: '+tag);}};Node.prototype._getUse=function _getUse(entity,obj){var state=this._baseState;state.useDecoder=this._use(entity,obj);assert(state.useDecoder._baseState.parent===null);state.useDecoder=state.useDecoder._baseState.children[0];if(state.implicit!==state.useDecoder._baseState.implicit){state.useDecoder=state.useDecoder.clone();state.useDecoder._baseState.implicit=state.implicit;}return state.useDecoder;};Node.prototype._decodeChoice=function decodeChoice(input,options){var state=this._baseState;var result=null;var match=false;Object.keys(state.choice).some(function(key){var save=input.save();var node=state.choice[key];try{var value=node._decode(input,options);if(input.isError(value))return false;result={type:key,value:value};match=true;}catch(e){input.restore(save);return false;}return true;},this);if(!match)return input.error('Choice not matched');return result;};Node.prototype._createEncoderBuffer=function createEncoderBuffer(data){return new EncoderBuffer(data,this.reporter);};Node.prototype._encode=function encode(data,reporter,parent){var state=this._baseState;if(state['default']!==null&&state['default']===data)return;var result=this._encodeValue(data,reporter,parent);if(result===undefined)return;if(this._skipDefault(result,reporter,parent))return;return result;};Node.prototype._encodeValue=function encode(data,reporter,parent){var state=this._baseState;if(state.parent===null)return state.children[0]._encode(data,reporter||new Reporter());var result=null;this.reporter=reporter;if(state.optional&&data===undefined){if(state['default']!==null)data=state['default'];else return;}var content=null;var primitive=false;if(state.any){result=this._createEncoderBuffer(data);}else if(state.choice){result=this._encodeChoice(data,reporter);}else if(state.contains){content=this._getUse(state.contains,parent)._encode(data,reporter);primitive=true;}else if(state.children){content=state.children.map(function(child){if(child._baseState.tag==='null_')return child._encode(null,reporter,data);if(child._baseState.key===null)return reporter.error('Child should have a key');var prevKey=reporter.enterKey(child._baseState.key);if((0,_typeof2["default"])(data)!=='object')return reporter.error('Child expected, but input is not object');var res=child._encode(data[child._baseState.key],reporter,data);reporter.leaveKey(prevKey);return res;},this).filter(function(child){return child;});content=this._createEncoderBuffer(content);}else{if(state.tag==='seqof'||state.tag==='setof'){if(!(state.args&&state.args.length===1))return reporter.error('Too many args for : '+state.tag);if(!Array.isArray(data))return reporter.error('seqof/setof, but data is not Array');var child=this.clone();child._baseState.implicit=null;content=this._createEncoderBuffer(data.map(function(item){var state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter);},child));}else if(state.use!==null){result=this._getUse(state.use,parent)._encode(data,reporter);}else{content=this._encodePrimitive(state.tag,data);primitive=true;}}var result;if(!state.any&&state.choice===null){var tag=state.implicit!==null?state.implicit:state.tag;var cls=state.implicit===null?'universal':'context';if(tag===null){if(state.use===null)reporter.error('Tag could be omitted only for .use()');}else{if(state.use===null)result=this._encodeComposite(tag,primitive,cls,content);}}if(state.explicit!==null)result=this._encodeComposite(state.explicit,false,'context',result);return result;};Node.prototype._encodeChoice=function encodeChoice(data,reporter){var state=this._baseState;var node=state.choice[data.type];if(!node){assert(false,data.type+' not found in '+JSON.stringify(Object.keys(state.choice)));}return node._encode(data.value,reporter);};Node.prototype._encodePrimitive=function encodePrimitive(tag,data){var state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);else if(tag==='objid'&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);else if(tag==='objid')return this._encodeObjid(data,null,null);else if(tag==='gentime'||tag==='utctime')return this._encodeTime(data,tag);else if(tag==='null_')return this._encodeNull();else if(tag==='int'||tag==='enum')return this._encodeInt(data,state.args&&state.reverseArgs[0]);else if(tag==='bool')return this._encodeBool(data);else if(tag==='objDesc')return this._encodeStr(data,tag);else throw new Error('Unsupported tag: '+tag);};Node.prototype._isNumstr=function isNumstr(str){return /^[0-9 ]*$/.test(str);};Node.prototype._isPrintstr=function isPrintstr(str){return /^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(str);};

},{"../base":507,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"minimalistic-assert":480}],510:[function(require,module,exports){
var constants=require('../constants');exports.tagClass={0:'universal',1:'application',2:'context',3:'private'};exports.tagClassByName=constants._reverse(exports.tagClass);exports.tag={0x00:'end',0x01:'bool',0x02:'int',0x03:'bitstr',0x04:'octstr',0x05:'null_',0x06:'objid',0x07:'objDesc',0x08:'external',0x09:'real',0x0a:'enum',0x0b:'embed',0x0c:'utf8str',0x0d:'relativeOid',0x10:'seq',0x11:'set',0x12:'numstr',0x13:'printstr',0x14:'t61str',0x15:'videostr',0x16:'ia5str',0x17:'utctime',0x18:'gentime',0x19:'graphstr',0x1a:'iso646str',0x1b:'genstr',0x1c:'unistr',0x1d:'charstr',0x1e:'bmpstr'};exports.tagByName=constants._reverse(exports.tag);

},{"../constants":511}],512:[function(require,module,exports){
var inherits=require('inherits');var asn1=require('../../asn1');var base=asn1.base;var bignum=asn1.bignum;var der=asn1.constants.der;function DERDecoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;this.tree=new DERNode();this.tree._init(entity.body);};module.exports=DERDecoder;DERDecoder.prototype.decode=function decode(data,options){if(!(data instanceof base.DecoderBuffer))data=new base.DecoderBuffer(data,options);return this.tree._decode(data,options);};function DERNode(parent){base.Node.call(this,'der',parent);}inherits(DERNode,base.Node);DERNode.prototype._peekTag=function peekTag(buffer,tag,any){if(buffer.isEmpty())return false;var state=buffer.save();var decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;buffer.restore(state);return decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+'of'===tag||any;};DERNode.prototype._decodeTag=function decodeTag(buffer,tag,any){var decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;var len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+'of'!==tag){return buffer.error('Failed to match tag: "'+tag+'"');}if(decodedTag.primitive||len!==null)return buffer.skip(len,'Failed to match body of: "'+tag+'"');var state=buffer.save();var res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');if(buffer.isError(res))return res;len=buffer.offset-state.offset;buffer.restore(state);return buffer.skip(len,'Failed to match body of: "'+tag+'"');};DERNode.prototype._skipUntilEnd=function skipUntilEnd(buffer,fail){while(true){var tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;var len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;var res;if(tag.primitive||len!==null)res=buffer.skip(len);else res=this._skipUntilEnd(buffer,fail);if(buffer.isError(res))return res;if(tag.tagStr==='end')break;}};DERNode.prototype._decodeList=function decodeList(buffer,tag,decoder,options){var result=[];while(!buffer.isEmpty()){var possibleEnd=this._peekTag(buffer,'end');if(buffer.isError(possibleEnd))return possibleEnd;var res=decoder.decode(buffer,'der',options);if(buffer.isError(res)&&possibleEnd)break;result.push(res);}return result;};DERNode.prototype._decodeStr=function decodeStr(buffer,tag){if(tag==='bitstr'){var unused=buffer.readUInt8();if(buffer.isError(unused))return unused;return{unused:unused,data:buffer.raw()};}else if(tag==='bmpstr'){var raw=buffer.raw();if(raw.length%2===1)return buffer.error('Decoding of string type: bmpstr length mismatch');var str='';for(var i=0;i<raw.length/2;i++){str+=String.fromCharCode(raw.readUInt16BE(i*2));}return str;}else if(tag==='numstr'){var numstr=buffer.raw().toString('ascii');if(!this._isNumstr(numstr)){return buffer.error('Decoding of string type: '+'numstr unsupported characters');}return numstr;}else if(tag==='octstr'){return buffer.raw();}else if(tag==='objDesc'){return buffer.raw();}else if(tag==='printstr'){var printstr=buffer.raw().toString('ascii');if(!this._isPrintstr(printstr)){return buffer.error('Decoding of string type: '+'printstr unsupported characters');}return printstr;}else if(/str$/.test(tag)){return buffer.raw().toString();}else{return buffer.error('Decoding of string type: '+tag+' unsupported');}};DERNode.prototype._decodeObjid=function decodeObjid(buffer,values,relative){var result;var identifiers=[];var ident=0;while(!buffer.isEmpty()){var subident=buffer.readUInt8();ident<<=7;ident|=subident&0x7f;if((subident&0x80)===0){identifiers.push(ident);ident=0;}}if(subident&0x80)identifiers.push(ident);var first=identifiers[0]/40|0;var second=identifiers[0]%40;if(relative)result=identifiers;else result=[first,second].concat(identifiers.slice(1));if(values){var tmp=values[result.join(' ')];if(tmp===undefined)tmp=values[result.join('.')];if(tmp!==undefined)result=tmp;}return result;};DERNode.prototype._decodeTime=function decodeTime(buffer,tag){var str=buffer.raw().toString();if(tag==='gentime'){var year=str.slice(0,4)|0;var mon=str.slice(4,6)|0;var day=str.slice(6,8)|0;var hour=str.slice(8,10)|0;var min=str.slice(10,12)|0;var sec=str.slice(12,14)|0;}else if(tag==='utctime'){var year=str.slice(0,2)|0;var mon=str.slice(2,4)|0;var day=str.slice(4,6)|0;var hour=str.slice(6,8)|0;var min=str.slice(8,10)|0;var sec=str.slice(10,12)|0;if(year<70)year=2000+year;else year=1900+year;}else{return buffer.error('Decoding '+tag+' time is not supported yet');}return Date.UTC(year,mon-1,day,hour,min,sec,0);};DERNode.prototype._decodeNull=function decodeNull(buffer){return null;};DERNode.prototype._decodeBool=function decodeBool(buffer){var res=buffer.readUInt8();if(buffer.isError(res))return res;else return res!==0;};DERNode.prototype._decodeInt=function decodeInt(buffer,values){var raw=buffer.raw();var res=new bignum(raw);if(values)res=values[res.toString(10)]||res;return res;};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')entity=entity(obj);return entity._getDecoder('der').tree;};function derDecodeTag(buf,fail){var tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;var cls=der.tagClass[tag>>6];var primitive=(tag&0x20)===0;if((tag&0x1f)===0x1f){var oct=tag;tag=0;while((oct&0x80)===0x80){oct=buf.readUInt8(fail);if(buf.isError(oct))return oct;tag<<=7;tag|=oct&0x7f;}}else{tag&=0x1f;}var tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr};}function derDecodeLen(buf,primitive,fail){var len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&len===0x80)return null;if((len&0x80)===0){return len;}var num=len&0x7f;if(num>4)return buf.error('length octect is too long');len=0;for(var i=0;i<num;i++){len<<=8;var j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j;}return len;}

},{"../../asn1":504,"inherits":307}],514:[function(require,module,exports){
var inherits=require('inherits');var Buffer=require('buffer').Buffer;var DERDecoder=require('./der');function PEMDecoder(entity){DERDecoder.call(this,entity);this.enc='pem';};inherits(PEMDecoder,DERDecoder);module.exports=PEMDecoder;PEMDecoder.prototype.decode=function decode(data,options){var lines=data.toString().split(/[\r\n]+/g);var label=options.label.toUpperCase();var re=/^-----(BEGIN|END) ([^-]+)-----$/;var start=-1;var end=-1;for(var i=0;i<lines.length;i++){var match=lines[i].match(re);if(match===null)continue;if(match[2]!==label)continue;if(start===-1){if(match[1]!=='BEGIN')break;start=i;}else{if(match[1]!=='END')break;end=i;break;}}if(start===-1||end===-1)throw new Error('PEM section not found for: '+label);var base64=lines.slice(start+1,end).join('');base64.replace(/[^a-z0-9\+\/=]+/gi,'');var input=new Buffer(base64,'base64');return DERDecoder.prototype.decode.call(this,input,options);};

},{"./der":512,"buffer":1133,"inherits":307}],515:[function(require,module,exports){
var inherits=require('inherits');var Buffer=require('buffer').Buffer;var asn1=require('../../asn1');var base=asn1.base;var der=asn1.constants.der;function DEREncoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;this.tree=new DERNode();this.tree._init(entity.body);};module.exports=DEREncoder;DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join();};function DERNode(parent){base.Node.call(this,'der',parent);}inherits(DERNode,base.Node);DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){var encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<0x80){var header=new Buffer(2);header[0]=encodedTag;header[1]=content.length;return this._createEncoderBuffer([header,content]);}var lenOctets=1;for(var i=content.length;i>=0x100;i>>=8){lenOctets++;}var header=new Buffer(1+1+lenOctets);header[0]=encodedTag;header[1]=0x80|lenOctets;for(var i=1+lenOctets,j=content.length;j>0;i--,j>>=8){header[i]=j&0xff;}return this._createEncoderBuffer([header,content]);};DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==='bitstr'){return this._createEncoderBuffer([str.unused|0,str.data]);}else if(tag==='bmpstr'){var buf=new Buffer(str.length*2);for(var i=0;i<str.length;i++){buf.writeUInt16BE(str.charCodeAt(i),i*2);}return this._createEncoderBuffer(buf);}else if(tag==='numstr'){if(!this._isNumstr(str)){return this.reporter.error('Encoding of string type: numstr supports '+'only digits and space');}return this._createEncoderBuffer(str);}else if(tag==='printstr'){if(!this._isPrintstr(str)){return this.reporter.error('Encoding of string type: printstr supports '+'only latin upper and lower case letters, '+'digits, space, apostrophe, left and rigth '+'parenthesis, plus sign, comma, hyphen, '+'dot, slash, colon, equal sign, '+'question mark');}return this._createEncoderBuffer(str);}else if(/str$/.test(tag)){return this._createEncoderBuffer(str);}else if(tag==='objDesc'){return this._createEncoderBuffer(str);}else{return this.reporter.error('Encoding of string type: '+tag+' unsupported');}};DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==='string'){if(!values)return this.reporter.error('string objid given, but no values map found');if(!values.hasOwnProperty(id))return this.reporter.error('objid not found in values map');id=values[id].split(/[\s\.]+/g);for(var i=0;i<id.length;i++){id[i]|=0;}}else if(Array.isArray(id)){id=id.slice();for(var i=0;i<id.length;i++){id[i]|=0;}}if(!Array.isArray(id)){return this.reporter.error('objid() should be either array or string, '+'got: '+JSON.stringify(id));}if(!relative){if(id[1]>=40)return this.reporter.error('Second objid identifier OOB');id.splice(0,2,id[0]*40+id[1]);}var size=0;for(var i=0;i<id.length;i++){var ident=id[i];for(size++;ident>=0x80;ident>>=7){size++;}}var objid=new Buffer(size);var offset=objid.length-1;for(var i=id.length-1;i>=0;i--){var ident=id[i];objid[offset--]=ident&0x7f;while((ident>>=7)>0){objid[offset--]=0x80|ident&0x7f;}}return this._createEncoderBuffer(objid);};function two(num){if(num<10)return'0'+num;else return num;}DERNode.prototype._encodeTime=function encodeTime(time,tag){var str;var date=new Date(time);if(tag==='gentime'){str=[two(date.getFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else if(tag==='utctime'){str=[two(date.getFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else{this.reporter.error('Encoding '+tag+' time is not supported yet');}return this._encodeStr(str,'octstr');};DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer('');};DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==='string'){if(!values)return this.reporter.error('String int or enum given, but no values map');if(!values.hasOwnProperty(num)){return this.reporter.error('Values map doesn\'t contain: '+JSON.stringify(num));}num=values[num];}if(typeof num!=='number'&&!Buffer.isBuffer(num)){var numArray=num.toArray();if(!num.sign&&numArray[0]&0x80){numArray.unshift(0);}num=new Buffer(numArray);}if(Buffer.isBuffer(num)){var size=num.length;if(num.length===0)size++;var out=new Buffer(size);num.copy(out);if(num.length===0)out[0]=0;return this._createEncoderBuffer(out);}if(num<0x80)return this._createEncoderBuffer(num);if(num<0x100)return this._createEncoderBuffer([0,num]);var size=1;for(var i=num;i>=0x100;i>>=8){size++;}var out=new Array(size);for(var i=out.length-1;i>=0;i--){out[i]=num&0xff;num>>=8;}if(out[0]&0x80){out.unshift(0);}return this._createEncoderBuffer(new Buffer(out));};DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?0xff:0);};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')entity=entity(obj);return entity._getEncoder('der').tree;};DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){var state=this._baseState;var i;if(state['default']===null)return false;var data=dataBuffer.join();if(state.defaultBuffer===undefined)state.defaultBuffer=this._encodeValue(state['default'],reporter,parent).join();if(data.length!==state.defaultBuffer.length)return false;for(i=0;i<data.length;i++){if(data[i]!==state.defaultBuffer[i])return false;}return true;};function encodeTag(tag,primitive,cls,reporter){var res;if(tag==='seqof')tag='seq';else if(tag==='setof')tag='set';if(der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else if(typeof tag==='number'&&(tag|0)===tag)res=tag;else return reporter.error('Unknown tag: '+tag);if(res>=0x1f)return reporter.error('Multi-octet tag encoding unsupported');if(!primitive)res|=0x20;res|=der.tagClassByName[cls||'universal']<<6;return res;}

},{"../../asn1":504,"buffer":1133,"inherits":307}],517:[function(require,module,exports){
var inherits=require('inherits');var DEREncoder=require('./der');function PEMEncoder(entity){DEREncoder.call(this,entity);this.enc='pem';};inherits(PEMEncoder,DEREncoder);module.exports=PEMEncoder;PEMEncoder.prototype.encode=function encode(data,options){var buf=DEREncoder.prototype.encode.call(this,data);var p=buf.toString('base64');var out=['-----BEGIN '+options.label+'-----'];for(var i=0;i<p.length;i+=64){out.push(p.slice(i,i+64));}out.push('-----END '+options.label+'-----');return out.join('\n');};

},{"./der":515,"inherits":307}],522:[function(require,module,exports){
var md5=require('create-hash/md5');var RIPEMD160=require('ripemd160');var sha=require('sha.js');var checkParameters=require('./precondition');var defaultEncoding=require('./default-encoding');var Buffer=require('safe-buffer').Buffer;var ZEROS=Buffer.alloc(128);var sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(alg,key,saltLen){var hash=getDigest(alg);var blocksize=alg==='sha512'||alg==='sha384'?128:64;if(key.length>blocksize){key=hash(key);}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize);}var ipad=Buffer.allocUnsafe(blocksize+sizes[alg]);var opad=Buffer.allocUnsafe(blocksize+sizes[alg]);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^0x36;opad[i]=key[i]^0x5C;}var ipad1=Buffer.allocUnsafe(blocksize+saltLen+4);ipad.copy(ipad1,0,0,blocksize);this.ipad1=ipad1;this.ipad2=ipad;this.opad=opad;this.alg=alg;this.blocksize=blocksize;this.hash=hash;this.size=sizes[alg];}Hmac.prototype.run=function(data,ipad){data.copy(ipad,this.blocksize);var h=this.hash(ipad);h.copy(this.opad,this.blocksize);return this.hash(this.opad);};function getDigest(alg){function shaFunc(data){return sha(alg).update(data).digest();}function rmd160Func(data){return new RIPEMD160().update(data).digest();}if(alg==='rmd160'||alg==='ripemd160')return rmd160Func;if(alg==='md5')return md5;return shaFunc;}function pbkdf2(password,salt,iterations,keylen,digest){checkParameters(password,salt,iterations,keylen);if(!Buffer.isBuffer(password))password=Buffer.from(password,defaultEncoding);if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,defaultEncoding);digest=digest||'sha1';var hmac=new Hmac(digest,password,salt.length);var DK=Buffer.allocUnsafe(keylen);var block1=Buffer.allocUnsafe(salt.length+4);salt.copy(block1,0,0,salt.length);var destPos=0;var hLen=sizes[digest];var l=Math.ceil(keylen/hLen);for(var i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);var T=hmac.run(block1,hmac.ipad1);var U=T;for(var j=1;j<iterations;j++){U=hmac.run(U,hmac.ipad2);for(var k=0;k<hLen;k++){T[k]^=U[k];}}T.copy(DK,destPos);destPos+=hLen;}return DK;}module.exports=pbkdf2;

},{"./default-encoding":520,"./precondition":521,"create-hash/md5":174,"ripemd160":536,"safe-buffer":639,"sha.js":652}],519:[function(require,module,exports){
(function (process,global){
var checkParameters=require('./precondition');var defaultEncoding=require('./default-encoding');var sync=require('./sync');var Buffer=require('safe-buffer').Buffer;var ZERO_BUF;var subtle=global.crypto&&global.crypto.subtle;var toBrowser={'sha':'SHA-1','sha-1':'SHA-1','sha1':'SHA-1','sha256':'SHA-256','sha-256':'SHA-256','sha384':'SHA-384','sha-384':'SHA-384','sha-512':'SHA-512','sha512':'SHA-512'};var checks=[];function checkNative(algo){if(global.process&&!global.process.browser){return Promise.resolve(false);}if(!subtle||!subtle.importKey||!subtle.deriveBits){return Promise.resolve(false);}if(checks[algo]!==undefined){return checks[algo];}ZERO_BUF=ZERO_BUF||Buffer.alloc(8);var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return true;})["catch"](function(){return false;});checks[algo]=prom;return prom;}function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey('raw',password,{name:'PBKDF2'},false,['deriveBits']).then(function(key){return subtle.deriveBits({name:'PBKDF2',salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3);}).then(function(res){return Buffer.from(res);});}function resolvePromise(promise,callback){promise.then(function(out){process.nextTick(function(){callback(null,out);});},function(e){process.nextTick(function(){callback(e);});});}module.exports=function(password,salt,iterations,keylen,digest,callback){if(typeof digest==='function'){callback=digest;digest=undefined;}digest=digest||'sha1';var algo=toBrowser[digest.toLowerCase()];if(!algo||typeof global.Promise!=='function'){return process.nextTick(function(){var out;try{out=sync(password,salt,iterations,keylen,digest);}catch(e){return callback(e);}callback(null,out);});}checkParameters(password,salt,iterations,keylen);if(typeof callback!=='function')throw new Error('No callback provided to pbkdf2');if(!Buffer.isBuffer(password))password=Buffer.from(password,defaultEncoding);if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,defaultEncoding);resolvePromise(checkNative(algo).then(function(resp){if(resp)return browserPbkdf2(password,salt,iterations,keylen,algo);return sync(password,salt,iterations,keylen,digest);}),callback);};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./default-encoding":520,"./precondition":521,"./sync":522,"_process":1221,"safe-buffer":639}],520:[function(require,module,exports){
(function (process){
var defaultEncoding;if(process.browser){defaultEncoding='utf-8';}else{var pVersionMajor=parseInt(process.version.split('.')[0].slice(1),10);defaultEncoding=pVersionMajor>=6?'utf-8':'binary';}module.exports=defaultEncoding;

}).call(this,require('_process'))

},{"_process":1221}],521:[function(require,module,exports){
(function (Buffer){
var MAX_ALLOC=Math.pow(2,30)-1;function checkBuffer(buf,name){if(typeof buf!=='string'&&!Buffer.isBuffer(buf)){throw new TypeError(name+' must be a buffer or string');}}module.exports=function(password,salt,iterations,keylen){checkBuffer(password,'Password');checkBuffer(salt,'Salt');if(typeof iterations!=='number'){throw new TypeError('Iterations not a number');}if(iterations<0){throw new TypeError('Bad iterations');}if(typeof keylen!=='number'){throw new TypeError('Key length not a number');}if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen){throw new TypeError('Bad key length');}};

}).call(this,{"isBuffer":require("../../../../../ui/ui-dapps/node_modules/is-buffer/index.js")})

},{"../../../../../ui/ui-dapps/node_modules/is-buffer/index.js":1188}],1169:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var objectCreate=Object.create||objectCreatePolyfill;var objectKeys=Object.keys||objectKeysPolyfill;var bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){if(!this._events||!Object.prototype.hasOwnProperty.call(this,'_events')){this._events=objectCreate(null);this._eventsCount=0;}this._maxListeners=this._maxListeners||undefined;}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;var hasDefineProperty;try{var o={};if(Object.defineProperty)Object.defineProperty(o,'x',{value:0});hasDefineProperty=o.x===0;}catch(err){hasDefineProperty=false;}if(hasDefineProperty){Object.defineProperty(EventEmitter,'defaultMaxListeners',{enumerable:true,get:function get(){return defaultMaxListeners;},set:function set(arg){if(typeof arg!=='number'||arg<0||arg!==arg)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=arg;}});}else{EventEmitter.defaultMaxListeners=defaultMaxListeners;}EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=='number'||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');this._maxListeners=n;return this;};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners;}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this);};function emitNone(handler,isFn,self){if(isFn)handler.call(self);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i){listeners[i].call(self);}}}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i){listeners[i].call(self,arg1);}}}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i){listeners[i].call(self,arg1,arg2);}}}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i){listeners[i].call(self,arg1,arg2,arg3);}}}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i){listeners[i].apply(self,args);}}}EventEmitter.prototype.emit=function emit(type){var er,handler,len,args,i,events;var doError=type==='error';events=this._events;if(events)doError=doError&&events.error==null;else if(!doError)return false;if(doError){if(arguments.length>1)er=arguments[1];if(er instanceof Error){throw er;}else{var err=new Error('Unhandled "error" event. ('+er+')');err.context=er;throw err;}return false;}handler=events[type];if(!handler)return false;var isFn=typeof handler==='function';len=arguments.length;switch(len){case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:args=new Array(len-1);for(i=1;i<len;i++){args[i-1]=arguments[i];}emitMany(handler,isFn,this,args);}return true;};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');events=target._events;if(!events){events=target._events=objectCreate(null);target._eventsCount=0;}else{if(events.newListener){target.emit('newListener',type,listener.listener?listener.listener:listener);events=target._events;}existing=events[type];}if(!existing){existing=events[type]=listener;++target._eventsCount;}else{if(typeof existing==='function'){existing=events[type]=prepend?[listener,existing]:[existing,listener];}else{if(prepend){existing.unshift(listener);}else{existing.push(listener);}}if(!existing.warned){m=$getMaxListeners(target);if(m&&m>0&&existing.length>m){existing.warned=true;var w=new Error('Possible EventEmitter memory leak detected. '+existing.length+' "'+String(type)+'" listeners '+'added. Use emitter.setMaxListeners() to '+'increase limit.');w.name='MaxListenersExceededWarning';w.emitter=target;w.type=type;w.count=existing.length;if((typeof console==="undefined"?"undefined":(0,_typeof2["default"])(console))==='object'&&console.warn){console.warn('%s: %s',w.name,w.message);}}}}return target;}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false);};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true);};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;switch(arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:var args=new Array(arguments.length);for(var i=0;i<args.length;++i){args[i]=arguments[i];}this.listener.apply(this.target,args);}}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=bind.call(onceWrapper,state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped;}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');this.on(type,_onceWrap(this,type,listener));return this;};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');this.prependListener(type,_onceWrap(this,type,listener));return this;};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=='function')throw new TypeError('"listener" argument must be a function');events=this._events;if(!events)return this;list=events[type];if(!list)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=objectCreate(null);else{delete events[type];if(events.removeListener)this.emit('removeListener',type,list.listener||listener);}}else if(typeof list!=='function'){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break;}}if(position<0)return this;if(position===0)list.shift();else spliceOne(list,position);if(list.length===1)events[type]=list[0];if(events.removeListener)this.emit('removeListener',type,originalListener||listener);}return this;};EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(!events)return this;if(!events.removeListener){if(arguments.length===0){this._events=objectCreate(null);this._eventsCount=0;}else if(events[type]){if(--this._eventsCount===0)this._events=objectCreate(null);else delete events[type];}return this;}if(arguments.length===0){var keys=objectKeys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==='removeListener')continue;this.removeAllListeners(key);}this.removeAllListeners('removeListener');this._events=objectCreate(null);this._eventsCount=0;return this;}listeners=events[type];if(typeof listeners==='function'){this.removeListener(type,listeners);}else if(listeners){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i]);}}return this;};function _listeners(target,type,unwrap){var events=target._events;if(!events)return[];var evlistener=events[type];if(!evlistener)return[];if(typeof evlistener==='function')return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length);}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true);};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false);};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==='function'){return emitter.listenerCount(type);}else{return listenerCount.call(emitter,type);}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if(typeof evlistener==='function'){return 1;}else if(evlistener){return evlistener.length;}}return 0;}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[];};function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1){list[i]=list[k];}list.pop();}function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i){copy[i]=arr[i];}return copy;}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i];}return ret;}function objectCreatePolyfill(proto){var F=function F(){};F.prototype=proto;return new F();}function objectKeysPolyfill(obj){var keys=[];for(var k in obj){if(Object.prototype.hasOwnProperty.call(obj,k)){keys.push(k);}}return k;}function functionBindPolyfill(context){var fn=this;return function(){return fn.apply(context,arguments);};}

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],528:[function(require,module,exports){
var parseKeys=require('parse-asn1');var randomBytes=require('randombytes');var createHash=require('create-hash');var mgf=require('./mgf');var xor=require('./xor');var BN=require('bn.js');var withPublic=require('./withPublic');var crt=require('browserify-rsa');var Buffer=require('safe-buffer').Buffer;module.exports=function publicEncrypt(publicKey,msg,reverse){var padding;if(publicKey.padding){padding=publicKey.padding;}else if(reverse){padding=1;}else{padding=4;}var key=parseKeys(publicKey);var paddedMsg;if(padding===4){paddedMsg=oaep(key,msg);}else if(padding===1){paddedMsg=pkcs1(key,msg,reverse);}else if(padding===3){paddedMsg=new BN(msg);if(paddedMsg.cmp(key.modulus)>=0){throw new Error('data too long for modulus');}}else{throw new Error('unknown padding');}if(reverse){return crt(paddedMsg,key);}else{return withPublic(paddedMsg,key);}};function oaep(key,msg){var k=key.modulus.byteLength();var mLen=msg.length;var iHash=createHash('sha1').update(Buffer.alloc(0)).digest();var hLen=iHash.length;var hLen2=2*hLen;if(mLen>k-hLen2-2){throw new Error('message too long');}var ps=Buffer.alloc(k-mLen-hLen2-2);var dblen=k-hLen-1;var seed=randomBytes(hLen);var maskedDb=xor(Buffer.concat([iHash,ps,Buffer.alloc(1,1),msg],dblen),mgf(seed,dblen));var maskedSeed=xor(seed,mgf(maskedDb,hLen));return new BN(Buffer.concat([Buffer.alloc(1),maskedSeed,maskedDb],k));}function pkcs1(key,msg,reverse){var mLen=msg.length;var k=key.modulus.byteLength();if(mLen>k-11){throw new Error('message too long');}var ps;if(reverse){ps=Buffer.alloc(k-mLen-3,0xff);}else{ps=nonZero(k-mLen-3);}return new BN(Buffer.concat([Buffer.from([0,reverse?1:2]),ps,Buffer.alloc(1),msg],k));}function nonZero(len){var out=Buffer.allocUnsafe(len);var i=0;var cache=randomBytes(len*2);var cur=0;var num;while(i<len){if(cur===cache.length){cache=randomBytes(len*2);cur=0;}num=cache[cur++];if(num){out[i++]=num;}}return out;}

},{"./mgf":526,"./withPublic":529,"./xor":530,"bn.js":132,"browserify-rsa":154,"create-hash":173,"parse-asn1":503,"randombytes":532,"safe-buffer":639}],527:[function(require,module,exports){
var parseKeys=require('parse-asn1');var mgf=require('./mgf');var xor=require('./xor');var BN=require('bn.js');var crt=require('browserify-rsa');var createHash=require('create-hash');var withPublic=require('./withPublic');var Buffer=require('safe-buffer').Buffer;module.exports=function privateDecrypt(privateKey,enc,reverse){var padding;if(privateKey.padding){padding=privateKey.padding;}else if(reverse){padding=1;}else{padding=4;}var key=parseKeys(privateKey);var k=key.modulus.byteLength();if(enc.length>k||new BN(enc).cmp(key.modulus)>=0){throw new Error('decryption error');}var msg;if(reverse){msg=withPublic(new BN(enc),key);}else{msg=crt(enc,key);}var zBuffer=Buffer.alloc(k-msg.length);msg=Buffer.concat([zBuffer,msg],k);if(padding===4){return oaep(key,msg);}else if(padding===1){return pkcs1(key,msg,reverse);}else if(padding===3){return msg;}else{throw new Error('unknown padding');}};function oaep(key,msg){var k=key.modulus.byteLength();var iHash=createHash('sha1').update(Buffer.alloc(0)).digest();var hLen=iHash.length;if(msg[0]!==0){throw new Error('decryption error');}var maskedSeed=msg.slice(1,hLen+1);var maskedDb=msg.slice(hLen+1);var seed=xor(maskedSeed,mgf(maskedDb,hLen));var db=xor(maskedDb,mgf(seed,k-hLen-1));if(compare(iHash,db.slice(0,hLen))){throw new Error('decryption error');}var i=hLen;while(db[i]===0){i++;}if(db[i++]!==1){throw new Error('decryption error');}return db.slice(i);}function pkcs1(key,msg,reverse){var p1=msg.slice(0,2);var i=2;var status=0;while(msg[i++]!==0){if(i>=msg.length){status++;break;}}var ps=msg.slice(2,i-1);if(p1.toString('hex')!=='0002'&&!reverse||p1.toString('hex')!=='0001'&&reverse){status++;}if(ps.length<8){status++;}if(status){throw new Error('decryption error');}return msg.slice(i);}function compare(a,b){a=Buffer.from(a);b=Buffer.from(b);var dif=0;var len=a.length;if(a.length!==b.length){dif++;len=Math.min(a.length,b.length);}var i=-1;while(++i<len){dif+=a[i]^b[i];}return dif;}

},{"./mgf":526,"./withPublic":529,"./xor":530,"bn.js":132,"browserify-rsa":154,"create-hash":173,"parse-asn1":503,"safe-buffer":639}],526:[function(require,module,exports){
var createHash=require('create-hash');var Buffer=require('safe-buffer').Buffer;module.exports=function(seed,len){var t=Buffer.alloc(0);var i=0;var c;while(t.length<len){c=i2ops(i++);t=Buffer.concat([t,createHash('sha1').update(seed).update(c).digest()]);}return t.slice(0,len);};function i2ops(c){var out=Buffer.allocUnsafe(4);out.writeUInt32BE(c,0);return out;}

},{"create-hash":173,"safe-buffer":639}],530:[function(require,module,exports){
module.exports=function xor(a,b){var len=a.length;var i=-1;while(++i<len){a[i]^=b[i];}return a;};

},{}],529:[function(require,module,exports){
var BN=require('bn.js');var Buffer=require('safe-buffer').Buffer;function withPublic(paddedMsg,key){return Buffer.from(paddedMsg.toRed(BN.mont(key.modulus)).redPow(new BN(key.publicExponent)).fromRed().toArray());}module.exports=withPublic;

},{"bn.js":132,"safe-buffer":639}],531:[function(require,module,exports){
'use strict';var has=Object.prototype.hasOwnProperty,undef;function decode(input){try{return decodeURIComponent(input.replace(/\+/g,' '));}catch(e){return null;}}function encode(input){try{return encodeURIComponent(input);}catch(e){return null;}}function querystring(query){var parser=/([^=?&]+)=?([^&]*)/g,result={},part;while(part=parser.exec(query)){var key=decode(part[1]),value=decode(part[2]);if(key===null||value===null||key in result)continue;result[key]=value;}return result;}function querystringify(obj,prefix){prefix=prefix||'';var pairs=[],value,key;if('string'!==typeof prefix)prefix='?';for(key in obj){if(has.call(obj,key)){value=obj[key];if(!value&&(value===null||value===undef||isNaN(value))){value='';}key=encodeURIComponent(key);value=encodeURIComponent(value);if(key===null||value===null)continue;pairs.push(key+'='+value);}}return pairs.length?prefix+pairs.join('&'):'';}exports.stringify=querystringify;exports.parse=querystring;

},{}],535:[function(require,module,exports){
'use strict';module.exports=function required(port,protocol){protocol=protocol.split(':')[0];port=+port;if(!port)return false;switch(protocol){case'http':case'ws':return port!==80;case'https':case'wss':return port!==443;case'ftp':return port!==21;case'gopher':return port!==70;case'file':return false;}return port!==0;};

},{}],538:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("./internal/Observable");exports.Observable=Observable_1.Observable;var ConnectableObservable_1=require("./internal/observable/ConnectableObservable");exports.ConnectableObservable=ConnectableObservable_1.ConnectableObservable;var groupBy_1=require("./internal/operators/groupBy");exports.GroupedObservable=groupBy_1.GroupedObservable;var observable_1=require("./internal/symbol/observable");exports.observable=observable_1.observable;var Subject_1=require("./internal/Subject");exports.Subject=Subject_1.Subject;var BehaviorSubject_1=require("./internal/BehaviorSubject");exports.BehaviorSubject=BehaviorSubject_1.BehaviorSubject;var ReplaySubject_1=require("./internal/ReplaySubject");exports.ReplaySubject=ReplaySubject_1.ReplaySubject;var AsyncSubject_1=require("./internal/AsyncSubject");exports.AsyncSubject=AsyncSubject_1.AsyncSubject;var asap_1=require("./internal/scheduler/asap");exports.asapScheduler=asap_1.asap;var async_1=require("./internal/scheduler/async");exports.asyncScheduler=async_1.async;var queue_1=require("./internal/scheduler/queue");exports.queueScheduler=queue_1.queue;var animationFrame_1=require("./internal/scheduler/animationFrame");exports.animationFrameScheduler=animationFrame_1.animationFrame;var VirtualTimeScheduler_1=require("./internal/scheduler/VirtualTimeScheduler");exports.VirtualTimeScheduler=VirtualTimeScheduler_1.VirtualTimeScheduler;exports.VirtualAction=VirtualTimeScheduler_1.VirtualAction;var Scheduler_1=require("./internal/Scheduler");exports.Scheduler=Scheduler_1.Scheduler;var Subscription_1=require("./internal/Subscription");exports.Subscription=Subscription_1.Subscription;var Subscriber_1=require("./internal/Subscriber");exports.Subscriber=Subscriber_1.Subscriber;var Notification_1=require("./internal/Notification");exports.Notification=Notification_1.Notification;exports.NotificationKind=Notification_1.NotificationKind;var pipe_1=require("./internal/util/pipe");exports.pipe=pipe_1.pipe;var noop_1=require("./internal/util/noop");exports.noop=noop_1.noop;var identity_1=require("./internal/util/identity");exports.identity=identity_1.identity;var isObservable_1=require("./internal/util/isObservable");exports.isObservable=isObservable_1.isObservable;var ArgumentOutOfRangeError_1=require("./internal/util/ArgumentOutOfRangeError");exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var EmptyError_1=require("./internal/util/EmptyError");exports.EmptyError=EmptyError_1.EmptyError;var ObjectUnsubscribedError_1=require("./internal/util/ObjectUnsubscribedError");exports.ObjectUnsubscribedError=ObjectUnsubscribedError_1.ObjectUnsubscribedError;var UnsubscriptionError_1=require("./internal/util/UnsubscriptionError");exports.UnsubscriptionError=UnsubscriptionError_1.UnsubscriptionError;var TimeoutError_1=require("./internal/util/TimeoutError");exports.TimeoutError=TimeoutError_1.TimeoutError;var bindCallback_1=require("./internal/observable/bindCallback");exports.bindCallback=bindCallback_1.bindCallback;var bindNodeCallback_1=require("./internal/observable/bindNodeCallback");exports.bindNodeCallback=bindNodeCallback_1.bindNodeCallback;var combineLatest_1=require("./internal/observable/combineLatest");exports.combineLatest=combineLatest_1.combineLatest;var concat_1=require("./internal/observable/concat");exports.concat=concat_1.concat;var defer_1=require("./internal/observable/defer");exports.defer=defer_1.defer;var empty_1=require("./internal/observable/empty");exports.empty=empty_1.empty;var forkJoin_1=require("./internal/observable/forkJoin");exports.forkJoin=forkJoin_1.forkJoin;var from_1=require("./internal/observable/from");exports.from=from_1.from;var fromEvent_1=require("./internal/observable/fromEvent");exports.fromEvent=fromEvent_1.fromEvent;var fromEventPattern_1=require("./internal/observable/fromEventPattern");exports.fromEventPattern=fromEventPattern_1.fromEventPattern;var generate_1=require("./internal/observable/generate");exports.generate=generate_1.generate;var iif_1=require("./internal/observable/iif");exports.iif=iif_1.iif;var interval_1=require("./internal/observable/interval");exports.interval=interval_1.interval;var merge_1=require("./internal/observable/merge");exports.merge=merge_1.merge;var never_1=require("./internal/observable/never");exports.never=never_1.never;var of_1=require("./internal/observable/of");exports.of=of_1.of;var onErrorResumeNext_1=require("./internal/observable/onErrorResumeNext");exports.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNext;var pairs_1=require("./internal/observable/pairs");exports.pairs=pairs_1.pairs;var partition_1=require("./internal/observable/partition");exports.partition=partition_1.partition;var race_1=require("./internal/observable/race");exports.race=race_1.race;var range_1=require("./internal/observable/range");exports.range=range_1.range;var throwError_1=require("./internal/observable/throwError");exports.throwError=throwError_1.throwError;var timer_1=require("./internal/observable/timer");exports.timer=timer_1.timer;var using_1=require("./internal/observable/using");exports.using=using_1.using;var zip_1=require("./internal/observable/zip");exports.zip=zip_1.zip;var scheduled_1=require("./internal/scheduled/scheduled");exports.scheduled=scheduled_1.scheduled;var empty_2=require("./internal/observable/empty");exports.EMPTY=empty_2.EMPTY;var never_2=require("./internal/observable/never");exports.NEVER=never_2.NEVER;var config_1=require("./internal/config");exports.config=config_1.config;

},{"./internal/AsyncSubject":539,"./internal/BehaviorSubject":540,"./internal/Notification":542,"./internal/Observable":543,"./internal/ReplaySubject":546,"./internal/Scheduler":547,"./internal/Subject":548,"./internal/Subscriber":550,"./internal/Subscription":551,"./internal/config":552,"./internal/observable/ConnectableObservable":553,"./internal/observable/bindCallback":554,"./internal/observable/bindNodeCallback":555,"./internal/observable/combineLatest":556,"./internal/observable/concat":557,"./internal/observable/defer":558,"./internal/observable/empty":559,"./internal/observable/forkJoin":560,"./internal/observable/from":561,"./internal/observable/fromEvent":563,"./internal/observable/fromEventPattern":564,"./internal/observable/generate":565,"./internal/observable/iif":566,"./internal/observable/interval":567,"./internal/observable/merge":568,"./internal/observable/never":569,"./internal/observable/of":570,"./internal/observable/onErrorResumeNext":571,"./internal/observable/pairs":572,"./internal/observable/partition":573,"./internal/observable/race":574,"./internal/observable/range":575,"./internal/observable/throwError":576,"./internal/observable/timer":577,"./internal/observable/using":578,"./internal/observable/zip":579,"./internal/operators/groupBy":582,"./internal/scheduled/scheduled":592,"./internal/scheduler/VirtualTimeScheduler":602,"./internal/scheduler/animationFrame":603,"./internal/scheduler/asap":604,"./internal/scheduler/async":605,"./internal/scheduler/queue":606,"./internal/symbol/observable":608,"./internal/util/ArgumentOutOfRangeError":610,"./internal/util/EmptyError":611,"./internal/util/ObjectUnsubscribedError":613,"./internal/util/TimeoutError":614,"./internal/util/UnsubscriptionError":615,"./internal/util/identity":618,"./internal/util/isObservable":626,"./internal/util/noop":629,"./internal/util/pipe":631}],547:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Scheduler=function(){function Scheduler(SchedulerAction,now){if(now===void 0){now=Scheduler.now;}this.SchedulerAction=SchedulerAction;this.now=now;}Scheduler.prototype.schedule=function(work,delay,state){if(delay===void 0){delay=0;}return new this.SchedulerAction(this,work).schedule(state,delay);};Scheduler.now=function(){return Date.now();};return Scheduler;}();exports.Scheduler=Scheduler;

},{}],552:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var _enable_super_gross_mode_that_will_cause_bad_things=false;exports.config={Promise:undefined,set useDeprecatedSynchronousErrorHandling(value){if(value){var error=new Error();console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n'+error.stack);}else if(_enable_super_gross_mode_that_will_cause_bad_things){console.log('RxJS: Back to a better error behavior. Thank you. <3');}_enable_super_gross_mode_that_will_cause_bad_things=value;},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things;}};

},{}],608:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports.observable=function(){return typeof Symbol==='function'&&Symbol.observable||'@@observable';}();

},{}],629:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function noop(){}exports.noop=noop;

},{}],618:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function identity(x){return x;}exports.identity=identity;

},{}],610:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var ArgumentOutOfRangeErrorImpl=function(){function ArgumentOutOfRangeErrorImpl(){Error.call(this);this.message='argument out of range';this.name='ArgumentOutOfRangeError';return this;}ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype);return ArgumentOutOfRangeErrorImpl;}();exports.ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;

},{}],611:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var EmptyErrorImpl=function(){function EmptyErrorImpl(){Error.call(this);this.message='no elements in sequence';this.name='EmptyError';return this;}EmptyErrorImpl.prototype=Object.create(Error.prototype);return EmptyErrorImpl;}();exports.EmptyError=EmptyErrorImpl;

},{}],613:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var ObjectUnsubscribedErrorImpl=function(){function ObjectUnsubscribedErrorImpl(){Error.call(this);this.message='object unsubscribed';this.name='ObjectUnsubscribedError';return this;}ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype);return ObjectUnsubscribedErrorImpl;}();exports.ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl;

},{}],614:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var TimeoutErrorImpl=function(){function TimeoutErrorImpl(){Error.call(this);this.message='Timeout has occurred';this.name='TimeoutError';return this;}TimeoutErrorImpl.prototype=Object.create(Error.prototype);return TimeoutErrorImpl;}();exports.TimeoutError=TimeoutErrorImpl;

},{}],615:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var UnsubscriptionErrorImpl=function(){function UnsubscriptionErrorImpl(errors){Error.call(this);this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString();}).join('\n  '):'';this.name='UnsubscriptionError';this.errors=errors;return this;}UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype);return UnsubscriptionErrorImpl;}();exports.UnsubscriptionError=UnsubscriptionErrorImpl;

},{}],539:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subject_1=require("./Subject");var Subscription_1=require("./Subscription");var AsyncSubject=function(_super){__extends(AsyncSubject,_super);function AsyncSubject(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.value=null;_this.hasNext=false;_this.hasCompleted=false;return _this;}AsyncSubject.prototype._subscribe=function(subscriber){if(this.hasError){subscriber.error(this.thrownError);return Subscription_1.Subscription.EMPTY;}else if(this.hasCompleted&&this.hasNext){subscriber.next(this.value);subscriber.complete();return Subscription_1.Subscription.EMPTY;}return _super.prototype._subscribe.call(this,subscriber);};AsyncSubject.prototype.next=function(value){if(!this.hasCompleted){this.value=value;this.hasNext=true;}};AsyncSubject.prototype.error=function(error){if(!this.hasCompleted){_super.prototype.error.call(this,error);}};AsyncSubject.prototype.complete=function(){this.hasCompleted=true;if(this.hasNext){_super.prototype.next.call(this,this.value);}_super.prototype.complete.call(this);};return AsyncSubject;}(Subject_1.Subject);exports.AsyncSubject=AsyncSubject;

},{"./Subject":548,"./Subscription":551}],540:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subject_1=require("./Subject");var ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError");var BehaviorSubject=function(_super){__extends(BehaviorSubject,_super);function BehaviorSubject(_value){var _this=_super.call(this)||this;_this._value=_value;return _this;}Object.defineProperty(BehaviorSubject.prototype,"value",{get:function get(){return this.getValue();},enumerable:true,configurable:true});BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);if(subscription&&!subscription.closed){subscriber.next(this._value);}return subscription;};BehaviorSubject.prototype.getValue=function(){if(this.hasError){throw this.thrownError;}else if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}else{return this._value;}};BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value);};return BehaviorSubject;}(Subject_1.Subject);exports.BehaviorSubject=BehaviorSubject;

},{"./Subject":548,"./util/ObjectUnsubscribedError":613}],542:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var empty_1=require("./observable/empty");var of_1=require("./observable/of");var throwError_1=require("./observable/throwError");var NotificationKind;(function(NotificationKind){NotificationKind["NEXT"]="N";NotificationKind["ERROR"]="E";NotificationKind["COMPLETE"]="C";})(NotificationKind=exports.NotificationKind||(exports.NotificationKind={}));var Notification=function(){function Notification(kind,value,error){this.kind=kind;this.value=value;this.error=error;this.hasValue=kind==='N';}Notification.prototype.observe=function(observer){switch(this.kind){case'N':return observer.next&&observer.next(this.value);case'E':return observer.error&&observer.error(this.error);case'C':return observer.complete&&observer.complete();}};Notification.prototype["do"]=function(next,error,complete){var kind=this.kind;switch(kind){case'N':return next&&next(this.value);case'E':return error&&error(this.error);case'C':return complete&&complete();}};Notification.prototype.accept=function(nextOrObserver,error,complete){if(nextOrObserver&&typeof nextOrObserver.next==='function'){return this.observe(nextOrObserver);}else{return this["do"](nextOrObserver,error,complete);}};Notification.prototype.toObservable=function(){var kind=this.kind;switch(kind){case'N':return of_1.of(this.value);case'E':return throwError_1.throwError(this.error);case'C':return empty_1.empty();}throw new Error('unexpected notification kind value');};Notification.createNext=function(value){if(typeof value!=='undefined'){return new Notification('N',value);}return Notification.undefinedValueNotification;};Notification.createError=function(err){return new Notification('E',undefined,err);};Notification.createComplete=function(){return Notification.completeNotification;};Notification.completeNotification=new Notification('C');Notification.undefinedValueNotification=new Notification('N',undefined);return Notification;}();exports.Notification=Notification;

},{"./observable/empty":559,"./observable/of":570,"./observable/throwError":576}],582:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");var Subscription_1=require("../Subscription");var Observable_1=require("../Observable");var Subject_1=require("../Subject");function groupBy(keySelector,elementSelector,durationSelector,subjectSelector){return function(source){return source.lift(new GroupByOperator(keySelector,elementSelector,durationSelector,subjectSelector));};}/* common-shake removed: exports.groupBy = */ void groupBy;var GroupByOperator=function(){function GroupByOperator(keySelector,elementSelector,durationSelector,subjectSelector){this.keySelector=keySelector;this.elementSelector=elementSelector;this.durationSelector=durationSelector;this.subjectSelector=subjectSelector;}GroupByOperator.prototype.call=function(subscriber,source){return source.subscribe(new GroupBySubscriber(subscriber,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector));};return GroupByOperator;}();var GroupBySubscriber=function(_super){__extends(GroupBySubscriber,_super);function GroupBySubscriber(destination,keySelector,elementSelector,durationSelector,subjectSelector){var _this=_super.call(this,destination)||this;_this.keySelector=keySelector;_this.elementSelector=elementSelector;_this.durationSelector=durationSelector;_this.subjectSelector=subjectSelector;_this.groups=null;_this.attemptedToUnsubscribe=false;_this.count=0;return _this;}GroupBySubscriber.prototype._next=function(value){var key;try{key=this.keySelector(value);}catch(err){this.error(err);return;}this._group(value,key);};GroupBySubscriber.prototype._group=function(value,key){var groups=this.groups;if(!groups){groups=this.groups=new Map();}var group=groups.get(key);var element;if(this.elementSelector){try{element=this.elementSelector(value);}catch(err){this.error(err);}}else{element=value;}if(!group){group=this.subjectSelector?this.subjectSelector():new Subject_1.Subject();groups.set(key,group);var groupedObservable=new GroupedObservable(key,group,this);this.destination.next(groupedObservable);if(this.durationSelector){var duration=void 0;try{duration=this.durationSelector(new GroupedObservable(key,group));}catch(err){this.error(err);return;}this.add(duration.subscribe(new GroupDurationSubscriber(key,group,this)));}}if(!group.closed){group.next(element);}};GroupBySubscriber.prototype._error=function(err){var groups=this.groups;if(groups){groups.forEach(function(group,key){group.error(err);});groups.clear();}this.destination.error(err);};GroupBySubscriber.prototype._complete=function(){var groups=this.groups;if(groups){groups.forEach(function(group,key){group.complete();});groups.clear();}this.destination.complete();};GroupBySubscriber.prototype.removeGroup=function(key){this.groups["delete"](key);};GroupBySubscriber.prototype.unsubscribe=function(){if(!this.closed){this.attemptedToUnsubscribe=true;if(this.count===0){_super.prototype.unsubscribe.call(this);}}};return GroupBySubscriber;}(Subscriber_1.Subscriber);var GroupDurationSubscriber=function(_super){__extends(GroupDurationSubscriber,_super);function GroupDurationSubscriber(key,group,parent){var _this=_super.call(this,group)||this;_this.key=key;_this.group=group;_this.parent=parent;return _this;}GroupDurationSubscriber.prototype._next=function(value){this.complete();};GroupDurationSubscriber.prototype._unsubscribe=function(){var _a=this,parent=_a.parent,key=_a.key;this.key=this.parent=null;if(parent){parent.removeGroup(key);}};return GroupDurationSubscriber;}(Subscriber_1.Subscriber);var GroupedObservable=function(_super){__extends(GroupedObservable,_super);function GroupedObservable(key,groupSubject,refCountSubscription){var _this=_super.call(this)||this;_this.key=key;_this.groupSubject=groupSubject;_this.refCountSubscription=refCountSubscription;return _this;}GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new Subscription_1.Subscription();var _a=this,refCountSubscription=_a.refCountSubscription,groupSubject=_a.groupSubject;if(refCountSubscription&&!refCountSubscription.closed){subscription.add(new InnerRefCountSubscription(refCountSubscription));}subscription.add(groupSubject.subscribe(subscriber));return subscription;};return GroupedObservable;}(Observable_1.Observable);exports.GroupedObservable=GroupedObservable;var InnerRefCountSubscription=function(_super){__extends(InnerRefCountSubscription,_super);function InnerRefCountSubscription(parent){var _this=_super.call(this)||this;_this.parent=parent;parent.count++;return _this;}InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;if(!parent.closed&&!this.closed){_super.prototype.unsubscribe.call(this);parent.count-=1;if(parent.count===0&&parent.attemptedToUnsubscribe){parent.unsubscribe();}}};return InnerRefCountSubscription;}(Subscription_1.Subscription);

},{"../Observable":543,"../Subject":548,"../Subscriber":550,"../Subscription":551}],626:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");function isObservable(obj){return!!obj&&(obj instanceof Observable_1.Observable||typeof obj.lift==='function'&&typeof obj.subscribe==='function');}exports.isObservable=isObservable;

},{"../Observable":543}],559:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");exports.EMPTY=new Observable_1.Observable(function(subscriber){return subscriber.complete();});function empty(scheduler){return scheduler?emptyScheduled(scheduler):exports.EMPTY;}exports.empty=empty;function emptyScheduled(scheduler){return new Observable_1.Observable(function(subscriber){return scheduler.schedule(function(){return subscriber.complete();});});}

},{"../Observable":543}],572:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var Subscription_1=require("../Subscription");function pairs(obj,scheduler){if(!scheduler){return new Observable_1.Observable(function(subscriber){var keys=Object.keys(obj);for(var i=0;i<keys.length&&!subscriber.closed;i++){var key=keys[i];if(obj.hasOwnProperty(key)){subscriber.next([key,obj[key]]);}}subscriber.complete();});}else{return new Observable_1.Observable(function(subscriber){var keys=Object.keys(obj);var subscription=new Subscription_1.Subscription();subscription.add(scheduler.schedule(dispatch,0,{keys:keys,index:0,subscriber:subscriber,subscription:subscription,obj:obj}));return subscription;});}}exports.pairs=pairs;function dispatch(state){var keys=state.keys,index=state.index,subscriber=state.subscriber,subscription=state.subscription,obj=state.obj;if(!subscriber.closed){if(index<keys.length){var key=keys[index];subscriber.next([key,obj[key]]);subscription.add(this.schedule({keys:keys,index:index+1,subscriber:subscriber,subscription:subscription,obj:obj}));}else{subscriber.complete();}}}/* common-shake removed: exports.dispatch = */ void dispatch;

},{"../Observable":543,"../Subscription":551}],576:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");function throwError(error,scheduler){if(!scheduler){return new Observable_1.Observable(function(subscriber){return subscriber.error(error);});}else{return new Observable_1.Observable(function(subscriber){return scheduler.schedule(dispatch,0,{error:error,subscriber:subscriber});});}}exports.throwError=throwError;function dispatch(_a){var error=_a.error,subscriber=_a.subscriber;subscriber.error(error);}

},{"../Observable":543}],575:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");function range(start,count,scheduler){if(start===void 0){start=0;}return new Observable_1.Observable(function(subscriber){if(count===undefined){count=start;start=0;}var index=0;var current=start;if(scheduler){return scheduler.schedule(dispatch,0,{index:index,count:count,start:start,subscriber:subscriber});}else{do{if(index++>=count){subscriber.complete();break;}subscriber.next(current++);if(subscriber.closed){break;}}while(true);}return undefined;});}exports.range=range;function dispatch(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;if(index>=count){subscriber.complete();return;}subscriber.next(start);if(subscriber.closed){return;}state.index=index+1;state.start=start+1;this.schedule(state);}/* common-shake removed: exports.dispatch = */ void dispatch;

},{"../Observable":543}],602:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var AsyncAction_1=require("./AsyncAction");var AsyncScheduler_1=require("./AsyncScheduler");var VirtualTimeScheduler=function(_super){__extends(VirtualTimeScheduler,_super);function VirtualTimeScheduler(SchedulerAction,maxFrames){if(SchedulerAction===void 0){SchedulerAction=VirtualAction;}if(maxFrames===void 0){maxFrames=Number.POSITIVE_INFINITY;}var _this=_super.call(this,SchedulerAction,function(){return _this.frame;})||this;_this.maxFrames=maxFrames;_this.frame=0;_this.index=-1;return _this;}VirtualTimeScheduler.prototype.flush=function(){var _a=this,actions=_a.actions,maxFrames=_a.maxFrames;var error,action;while((action=actions[0])&&action.delay<=maxFrames){actions.shift();this.frame=action.delay;if(error=action.execute(action.state,action.delay)){break;}}if(error){while(action=actions.shift()){action.unsubscribe();}throw error;}};VirtualTimeScheduler.frameTimeFactor=10;return VirtualTimeScheduler;}(AsyncScheduler_1.AsyncScheduler);exports.VirtualTimeScheduler=VirtualTimeScheduler;var VirtualAction=function(_super){__extends(VirtualAction,_super);function VirtualAction(scheduler,work,index){if(index===void 0){index=scheduler.index+=1;}var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.index=index;_this.active=true;_this.index=scheduler.index=index;return _this;}VirtualAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(!this.id){return _super.prototype.schedule.call(this,state,delay);}this.active=false;var action=new VirtualAction(this.scheduler,this.work);this.add(action);return action.schedule(state,delay);};VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}this.delay=scheduler.frame+delay;var actions=scheduler.actions;actions.push(this);actions.sort(VirtualAction.sortActions);return true;};VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}return undefined;};VirtualAction.prototype._execute=function(state,delay){if(this.active===true){return _super.prototype._execute.call(this,state,delay);}};VirtualAction.sortActions=function(a,b){if(a.delay===b.delay){if(a.index===b.index){return 0;}else if(a.index>b.index){return 1;}else{return-1;}}else if(a.delay>b.delay){return 1;}else{return-1;}};return VirtualAction;}(AsyncAction_1.AsyncAction);exports.VirtualAction=VirtualAction;

},{"./AsyncAction":598,"./AsyncScheduler":599}],631:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var noop_1=require("./noop");function pipe(){var fns=[];for(var _i=0;_i<arguments.length;_i++){fns[_i]=arguments[_i];}return pipeFromArray(fns);}exports.pipe=pipe;function pipeFromArray(fns){if(!fns){return noop_1.noop;}if(fns.length===1){return fns[0];}return function piped(input){return fns.reduce(function(prev,fn){return fn(prev);},input);};}exports.pipeFromArray=pipeFromArray;

},{"./noop":629}],555:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var AsyncSubject_1=require("../AsyncSubject");var map_1=require("../operators/map");var canReportError_1=require("../util/canReportError");var isScheduler_1=require("../util/isScheduler");var isArray_1=require("../util/isArray");function bindNodeCallback(callbackFunc,resultSelector,scheduler){if(resultSelector){if(isScheduler_1.isScheduler(resultSelector)){scheduler=resultSelector;}else{return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return bindNodeCallback(callbackFunc,scheduler).apply(void 0,args).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));};}}return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var params={subject:undefined,args:args,callbackFunc:callbackFunc,scheduler:scheduler,context:this};return new Observable_1.Observable(function(subscriber){var context=params.context;var subject=params.subject;if(!scheduler){if(!subject){subject=params.subject=new AsyncSubject_1.AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}var err=innerArgs.shift();if(err){subject.error(err);return;}subject.next(innerArgs.length<=1?innerArgs[0]:innerArgs);subject.complete();};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){if(canReportError_1.canReportError(subject)){subject.error(err);}else{console.warn(err);}}}return subject.subscribe(subscriber);}else{return scheduler.schedule(dispatch,0,{params:params,subscriber:subscriber,context:context});}});};}exports.bindNodeCallback=bindNodeCallback;function dispatch(state){var _this=this;var params=state.params,subscriber=state.subscriber,context=state.context;var callbackFunc=params.callbackFunc,args=params.args,scheduler=params.scheduler;var subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject_1.AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}var err=innerArgs.shift();if(err){_this.add(scheduler.schedule(dispatchError,0,{err:err,subject:subject}));}else{var value=innerArgs.length<=1?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}));}};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){this.add(scheduler.schedule(dispatchError,0,{err:err,subject:subject}));}}this.add(subject.subscribe(subscriber));}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value);subject.complete();}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err);}

},{"../AsyncSubject":539,"../Observable":543,"../operators/map":583,"../util/canReportError":616,"../util/isArray":619,"../util/isScheduler":628}],560:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var isArray_1=require("../util/isArray");var map_1=require("../operators/map");var isObject_1=require("../util/isObject");var from_1=require("./from");function forkJoin(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i];}if(sources.length===1){var first_1=sources[0];if(isArray_1.isArray(first_1)){return forkJoinInternal(first_1,null);}if(isObject_1.isObject(first_1)&&Object.getPrototypeOf(first_1)===Object.prototype){var keys=Object.keys(first_1);return forkJoinInternal(keys.map(function(key){return first_1[key];}),keys);}}if(typeof sources[sources.length-1]==='function'){var resultSelector_1=sources.pop();sources=sources.length===1&&isArray_1.isArray(sources[0])?sources[0]:sources;return forkJoinInternal(sources,null).pipe(map_1.map(function(args){return resultSelector_1.apply(void 0,args);}));}return forkJoinInternal(sources,null);}exports.forkJoin=forkJoin;function forkJoinInternal(sources,keys){return new Observable_1.Observable(function(subscriber){var len=sources.length;if(len===0){subscriber.complete();return;}var values=new Array(len);var completed=0;var emitted=0;var _loop_1=function _loop_1(i){var source=from_1.from(sources[i]);var hasValue=false;subscriber.add(source.subscribe({next:function next(value){if(!hasValue){hasValue=true;emitted++;}values[i]=value;},error:function error(err){return subscriber.error(err);},complete:function complete(){completed++;if(completed===len||!hasValue){if(emitted===len){subscriber.next(keys?keys.reduce(function(result,key,i){return result[key]=values[i],result;},{}):values);}subscriber.complete();}}}));};for(var i=0;i<len;i++){_loop_1(i);}});}

},{"../Observable":543,"../operators/map":583,"../util/isArray":619,"../util/isObject":625,"./from":561}],558:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var from_1=require("./from");var empty_1=require("./empty");function defer(observableFactory){return new Observable_1.Observable(function(subscriber){var input;try{input=observableFactory();}catch(err){subscriber.error(err);return undefined;}var source=input?from_1.from(input):empty_1.empty();return source.subscribe(subscriber);});}exports.defer=defer;

},{"../Observable":543,"./empty":559,"./from":561}],563:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var isArray_1=require("../util/isArray");var isFunction_1=require("../util/isFunction");var map_1=require("../operators/map");var toString=function(){return Object.prototype.toString;}();function fromEvent(target,eventName,options,resultSelector){if(isFunction_1.isFunction(options)){resultSelector=options;options=undefined;}if(resultSelector){return fromEvent(target,eventName,options).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));}return new Observable_1.Observable(function(subscriber){function handler(e){if(arguments.length>1){subscriber.next(Array.prototype.slice.call(arguments));}else{subscriber.next(e);}}setupSubscription(target,eventName,handler,subscriber,options);});}exports.fromEvent=fromEvent;function setupSubscription(sourceObj,eventName,handler,subscriber,options){var unsubscribe;if(isEventTarget(sourceObj)){var source_1=sourceObj;sourceObj.addEventListener(eventName,handler,options);unsubscribe=function unsubscribe(){return source_1.removeEventListener(eventName,handler,options);};}else if(isJQueryStyleEventEmitter(sourceObj)){var source_2=sourceObj;sourceObj.on(eventName,handler);unsubscribe=function unsubscribe(){return source_2.off(eventName,handler);};}else if(isNodeStyleEventEmitter(sourceObj)){var source_3=sourceObj;sourceObj.addListener(eventName,handler);unsubscribe=function unsubscribe(){return source_3.removeListener(eventName,handler);};}else if(sourceObj&&sourceObj.length){for(var i=0,len=sourceObj.length;i<len;i++){setupSubscription(sourceObj[i],eventName,handler,subscriber,options);}}else{throw new TypeError('Invalid event target');}subscriber.add(unsubscribe);}function isNodeStyleEventEmitter(sourceObj){return sourceObj&&typeof sourceObj.addListener==='function'&&typeof sourceObj.removeListener==='function';}function isJQueryStyleEventEmitter(sourceObj){return sourceObj&&typeof sourceObj.on==='function'&&typeof sourceObj.off==='function';}function isEventTarget(sourceObj){return sourceObj&&typeof sourceObj.addEventListener==='function'&&typeof sourceObj.removeEventListener==='function';}

},{"../Observable":543,"../operators/map":583,"../util/isArray":619,"../util/isFunction":621}],564:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var isArray_1=require("../util/isArray");var isFunction_1=require("../util/isFunction");var map_1=require("../operators/map");function fromEventPattern(addHandler,removeHandler,resultSelector){if(resultSelector){return fromEventPattern(addHandler,removeHandler).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));}return new Observable_1.Observable(function(subscriber){var handler=function handler(){var e=[];for(var _i=0;_i<arguments.length;_i++){e[_i]=arguments[_i];}return subscriber.next(e.length===1?e[0]:e);};var retValue;try{retValue=addHandler(handler);}catch(err){subscriber.error(err);return undefined;}if(!isFunction_1.isFunction(removeHandler)){return undefined;}return function(){return removeHandler(handler,retValue);};});}exports.fromEventPattern=fromEventPattern;

},{"../Observable":543,"../operators/map":583,"../util/isArray":619,"../util/isFunction":621}],566:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var defer_1=require("./defer");var empty_1=require("./empty");function iif(condition,trueResult,falseResult){if(trueResult===void 0){trueResult=empty_1.EMPTY;}if(falseResult===void 0){falseResult=empty_1.EMPTY;}return defer_1.defer(function(){return condition()?trueResult:falseResult;});}exports.iif=iif;

},{"./defer":558,"./empty":559}],565:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var identity_1=require("../util/identity");var isScheduler_1=require("../util/isScheduler");function generate(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){var resultSelector;var initialState;if(arguments.length==1){var options=initialStateOrOptions;initialState=options.initialState;condition=options.condition;iterate=options.iterate;resultSelector=options.resultSelector||identity_1.identity;scheduler=options.scheduler;}else if(resultSelectorOrObservable===undefined||isScheduler_1.isScheduler(resultSelectorOrObservable)){initialState=initialStateOrOptions;resultSelector=identity_1.identity;scheduler=resultSelectorOrObservable;}else{initialState=initialStateOrOptions;resultSelector=resultSelectorOrObservable;}return new Observable_1.Observable(function(subscriber){var state=initialState;if(scheduler){return scheduler.schedule(dispatch,0,{subscriber:subscriber,iterate:iterate,condition:condition,resultSelector:resultSelector,state:state});}do{if(condition){var conditionResult=void 0;try{conditionResult=condition(state);}catch(err){subscriber.error(err);return undefined;}if(!conditionResult){subscriber.complete();break;}}var value=void 0;try{value=resultSelector(state);}catch(err){subscriber.error(err);return undefined;}subscriber.next(value);if(subscriber.closed){break;}try{state=iterate(state);}catch(err){subscriber.error(err);return undefined;}}while(true);return undefined;});}exports.generate=generate;function dispatch(state){var subscriber=state.subscriber,condition=state.condition;if(subscriber.closed){return undefined;}if(state.needIterate){try{state.state=state.iterate(state.state);}catch(err){subscriber.error(err);return undefined;}}else{state.needIterate=true;}if(condition){var conditionResult=void 0;try{conditionResult=condition(state.state);}catch(err){subscriber.error(err);return undefined;}if(!conditionResult){subscriber.complete();return undefined;}if(subscriber.closed){return undefined;}}var value;try{value=state.resultSelector(state.state);}catch(err){subscriber.error(err);return undefined;}if(subscriber.closed){return undefined;}subscriber.next(value);if(subscriber.closed){return undefined;}return this.schedule(state);}

},{"../Observable":543,"../util/identity":618,"../util/isScheduler":628}],569:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var noop_1=require("../util/noop");exports.NEVER=new Observable_1.Observable(noop_1.noop);function never(){return exports.NEVER;}exports.never=never;

},{"../Observable":543,"../util/noop":629}],574:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var isArray_1=require("../util/isArray");var fromArray_1=require("./fromArray");var OuterSubscriber_1=require("../OuterSubscriber");var subscribeToResult_1=require("../util/subscribeToResult");function race(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}if(observables.length===1){if(isArray_1.isArray(observables[0])){observables=observables[0];}else{return observables[0];}}return fromArray_1.fromArray(observables,undefined).lift(new RaceOperator());}exports.race=race;var RaceOperator=function(){function RaceOperator(){}RaceOperator.prototype.call=function(subscriber,source){return source.subscribe(new RaceSubscriber(subscriber));};return RaceOperator;}();/* common-shake removed: exports.RaceOperator = */ void RaceOperator;var RaceSubscriber=function(_super){__extends(RaceSubscriber,_super);function RaceSubscriber(destination){var _this=_super.call(this,destination)||this;_this.hasFirst=false;_this.observables=[];_this.subscriptions=[];return _this;}RaceSubscriber.prototype._next=function(observable){this.observables.push(observable);};RaceSubscriber.prototype._complete=function(){var observables=this.observables;var len=observables.length;if(len===0){this.destination.complete();}else{for(var i=0;i<len&&!this.hasFirst;i++){var observable=observables[i];var subscription=subscribeToResult_1.subscribeToResult(this,observable,observable,i);if(this.subscriptions){this.subscriptions.push(subscription);}this.add(subscription);}this.observables=null;}};RaceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(!this.hasFirst){this.hasFirst=true;for(var i=0;i<this.subscriptions.length;i++){if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe();this.remove(subscription);}}this.subscriptions=null;}this.destination.next(innerValue);};return RaceSubscriber;}(OuterSubscriber_1.OuterSubscriber);/* common-shake removed: exports.RaceSubscriber = */ void RaceSubscriber;

},{"../OuterSubscriber":545,"../util/isArray":619,"../util/subscribeToResult":637,"./fromArray":562}],578:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var from_1=require("./from");var empty_1=require("./empty");function using(resourceFactory,observableFactory){return new Observable_1.Observable(function(subscriber){var resource;try{resource=resourceFactory();}catch(err){subscriber.error(err);return undefined;}var result;try{result=observableFactory(resource);}catch(err){subscriber.error(err);return undefined;}var source=result?from_1.from(result):empty_1.EMPTY;var subscription=source.subscribe(subscriber);return function(){subscription.unsubscribe();if(resource){resource.unsubscribe();}};});}exports.using=using;

},{"../Observable":543,"./empty":559,"./from":561}],571:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var from_1=require("./from");var isArray_1=require("../util/isArray");var empty_1=require("./empty");function onErrorResumeNext(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i];}if(sources.length===0){return empty_1.EMPTY;}var first=sources[0],remainder=sources.slice(1);if(sources.length===1&&isArray_1.isArray(first)){return onErrorResumeNext.apply(void 0,first);}return new Observable_1.Observable(function(subscriber){var subNext=function subNext(){return subscriber.add(onErrorResumeNext.apply(void 0,remainder).subscribe(subscriber));};return from_1.from(first).subscribe({next:function next(value){subscriber.next(value);},error:subNext,complete:subNext});});}exports.onErrorResumeNext=onErrorResumeNext;

},{"../Observable":543,"../util/isArray":619,"./empty":559,"./from":561}],567:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var async_1=require("../scheduler/async");var isNumeric_1=require("../util/isNumeric");function interval(period,scheduler){if(period===void 0){period=0;}if(scheduler===void 0){scheduler=async_1.async;}if(!isNumeric_1.isNumeric(period)||period<0){period=0;}if(!scheduler||typeof scheduler.schedule!=='function'){scheduler=async_1.async;}return new Observable_1.Observable(function(subscriber){subscriber.add(scheduler.schedule(dispatch,period,{subscriber:subscriber,counter:0,period:period}));return subscriber;});}exports.interval=interval;function dispatch(state){var subscriber=state.subscriber,counter=state.counter,period=state.period;subscriber.next(counter);this.schedule({subscriber:subscriber,counter:counter+1,period:period},period);}

},{"../Observable":543,"../scheduler/async":605,"../util/isNumeric":624}],579:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var fromArray_1=require("./fromArray");var isArray_1=require("../util/isArray");var Subscriber_1=require("../Subscriber");var OuterSubscriber_1=require("../OuterSubscriber");var subscribeToResult_1=require("../util/subscribeToResult");var iterator_1=require("../../internal/symbol/iterator");function zip(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}var resultSelector=observables[observables.length-1];if(typeof resultSelector==='function'){observables.pop();}return fromArray_1.fromArray(observables,undefined).lift(new ZipOperator(resultSelector));}exports.zip=zip;var ZipOperator=function(){function ZipOperator(resultSelector){this.resultSelector=resultSelector;}ZipOperator.prototype.call=function(subscriber,source){return source.subscribe(new ZipSubscriber(subscriber,this.resultSelector));};return ZipOperator;}();/* common-shake removed: exports.ZipOperator = */ void ZipOperator;var ZipSubscriber=function(_super){__extends(ZipSubscriber,_super);function ZipSubscriber(destination,resultSelector,values){if(values===void 0){values=Object.create(null);}var _this=_super.call(this,destination)||this;_this.iterators=[];_this.active=0;_this.resultSelector=typeof resultSelector==='function'?resultSelector:null;_this.values=values;return _this;}ZipSubscriber.prototype._next=function(value){var iterators=this.iterators;if(isArray_1.isArray(value)){iterators.push(new StaticArrayIterator(value));}else if(typeof value[iterator_1.iterator]==='function'){iterators.push(new StaticIterator(value[iterator_1.iterator]()));}else{iterators.push(new ZipBufferIterator(this.destination,this,value));}};ZipSubscriber.prototype._complete=function(){var iterators=this.iterators;var len=iterators.length;this.unsubscribe();if(len===0){this.destination.complete();return;}this.active=len;for(var i=0;i<len;i++){var iterator=iterators[i];if(iterator.stillUnsubscribed){var destination=this.destination;destination.add(iterator.subscribe(iterator,i));}else{this.active--;}}};ZipSubscriber.prototype.notifyInactive=function(){this.active--;if(this.active===0){this.destination.complete();}};ZipSubscriber.prototype.checkIterators=function(){var iterators=this.iterators;var len=iterators.length;var destination=this.destination;for(var i=0;i<len;i++){var iterator=iterators[i];if(typeof iterator.hasValue==='function'&&!iterator.hasValue()){return;}}var shouldComplete=false;var args=[];for(var i=0;i<len;i++){var iterator=iterators[i];var result=iterator.next();if(iterator.hasCompleted()){shouldComplete=true;}if(result.done){destination.complete();return;}args.push(result.value);}if(this.resultSelector){this._tryresultSelector(args);}else{destination.next(args);}if(shouldComplete){destination.complete();}};ZipSubscriber.prototype._tryresultSelector=function(args){var result;try{result=this.resultSelector.apply(this,args);}catch(err){this.destination.error(err);return;}this.destination.next(result);};return ZipSubscriber;}(Subscriber_1.Subscriber);/* common-shake removed: exports.ZipSubscriber = */ void ZipSubscriber;var StaticIterator=function(){function StaticIterator(iterator){this.iterator=iterator;this.nextResult=iterator.next();}StaticIterator.prototype.hasValue=function(){return true;};StaticIterator.prototype.next=function(){var result=this.nextResult;this.nextResult=this.iterator.next();return result;};StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return nextResult&&nextResult.done;};return StaticIterator;}();var StaticArrayIterator=function(){function StaticArrayIterator(array){this.array=array;this.index=0;this.length=0;this.length=array.length;}StaticArrayIterator.prototype[iterator_1.iterator]=function(){return this;};StaticArrayIterator.prototype.next=function(value){var i=this.index++;var array=this.array;return i<this.length?{value:array[i],done:false}:{value:null,done:true};};StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index;};StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index;};return StaticArrayIterator;}();var ZipBufferIterator=function(_super){__extends(ZipBufferIterator,_super);function ZipBufferIterator(destination,parent,observable){var _this=_super.call(this,destination)||this;_this.parent=parent;_this.observable=observable;_this.stillUnsubscribed=true;_this.buffer=[];_this.isComplete=false;return _this;}ZipBufferIterator.prototype[iterator_1.iterator]=function(){return this;};ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;if(buffer.length===0&&this.isComplete){return{value:null,done:true};}else{return{value:buffer.shift(),done:false};}};ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0;};ZipBufferIterator.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete;};ZipBufferIterator.prototype.notifyComplete=function(){if(this.buffer.length>0){this.isComplete=true;this.parent.notifyInactive();}else{this.destination.complete();}};ZipBufferIterator.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.buffer.push(innerValue);this.parent.checkIterators();};ZipBufferIterator.prototype.subscribe=function(value,index){return subscribeToResult_1.subscribeToResult(this,this.observable,this,index);};return ZipBufferIterator;}(OuterSubscriber_1.OuterSubscriber);

},{"../../internal/symbol/iterator":607,"../OuterSubscriber":545,"../Subscriber":550,"../util/isArray":619,"../util/subscribeToResult":637,"./fromArray":562}],548:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("./Observable");var Subscriber_1=require("./Subscriber");var Subscription_1=require("./Subscription");var ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError");var SubjectSubscription_1=require("./SubjectSubscription");var rxSubscriber_1=require("../internal/symbol/rxSubscriber");var SubjectSubscriber=function(_super){__extends(SubjectSubscriber,_super);function SubjectSubscriber(destination){var _this=_super.call(this,destination)||this;_this.destination=destination;return _this;}return SubjectSubscriber;}(Subscriber_1.Subscriber);exports.SubjectSubscriber=SubjectSubscriber;var Subject=function(_super){__extends(Subject,_super);function Subject(){var _this=_super.call(this)||this;_this.observers=[];_this.closed=false;_this.isStopped=false;_this.hasError=false;_this.thrownError=null;return _this;}Subject.prototype[rxSubscriber_1.rxSubscriber]=function(){return new SubjectSubscriber(this);};Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);subject.operator=operator;return subject;};Subject.prototype.next=function(value){if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}if(!this.isStopped){var observers=this.observers;var len=observers.length;var copy=observers.slice();for(var i=0;i<len;i++){copy[i].next(value);}}};Subject.prototype.error=function(err){if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}this.hasError=true;this.thrownError=err;this.isStopped=true;var observers=this.observers;var len=observers.length;var copy=observers.slice();for(var i=0;i<len;i++){copy[i].error(err);}this.observers.length=0;};Subject.prototype.complete=function(){if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}this.isStopped=true;var observers=this.observers;var len=observers.length;var copy=observers.slice();for(var i=0;i<len;i++){copy[i].complete();}this.observers.length=0;};Subject.prototype.unsubscribe=function(){this.isStopped=true;this.closed=true;this.observers=null;};Subject.prototype._trySubscribe=function(subscriber){if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}else{return _super.prototype._trySubscribe.call(this,subscriber);}};Subject.prototype._subscribe=function(subscriber){if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}else if(this.hasError){subscriber.error(this.thrownError);return Subscription_1.Subscription.EMPTY;}else if(this.isStopped){subscriber.complete();return Subscription_1.Subscription.EMPTY;}else{this.observers.push(subscriber);return new SubjectSubscription_1.SubjectSubscription(this,subscriber);}};Subject.prototype.asObservable=function(){var observable=new Observable_1.Observable();observable.source=this;return observable;};Subject.create=function(destination,source){return new AnonymousSubject(destination,source);};return Subject;}(Observable_1.Observable);exports.Subject=Subject;var AnonymousSubject=function(_super){__extends(AnonymousSubject,_super);function AnonymousSubject(destination,source){var _this=_super.call(this)||this;_this.destination=destination;_this.source=source;return _this;}AnonymousSubject.prototype.next=function(value){var destination=this.destination;if(destination&&destination.next){destination.next(value);}};AnonymousSubject.prototype.error=function(err){var destination=this.destination;if(destination&&destination.error){this.destination.error(err);}};AnonymousSubject.prototype.complete=function(){var destination=this.destination;if(destination&&destination.complete){this.destination.complete();}};AnonymousSubject.prototype._subscribe=function(subscriber){var source=this.source;if(source){return this.source.subscribe(subscriber);}else{return Subscription_1.Subscription.EMPTY;}};return AnonymousSubject;}(Subject);/* common-shake removed: exports.AnonymousSubject = */ void AnonymousSubject;

},{"../internal/symbol/rxSubscriber":609,"./Observable":543,"./SubjectSubscription":549,"./Subscriber":550,"./Subscription":551,"./util/ObjectUnsubscribedError":613}],546:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subject_1=require("./Subject");var queue_1=require("./scheduler/queue");var Subscription_1=require("./Subscription");var observeOn_1=require("./operators/observeOn");var ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError");var SubjectSubscription_1=require("./SubjectSubscription");var ReplaySubject=function(_super){__extends(ReplaySubject,_super);function ReplaySubject(bufferSize,windowTime,scheduler){if(bufferSize===void 0){bufferSize=Number.POSITIVE_INFINITY;}if(windowTime===void 0){windowTime=Number.POSITIVE_INFINITY;}var _this=_super.call(this)||this;_this.scheduler=scheduler;_this._events=[];_this._infiniteTimeWindow=false;_this._bufferSize=bufferSize<1?1:bufferSize;_this._windowTime=windowTime<1?1:windowTime;if(windowTime===Number.POSITIVE_INFINITY){_this._infiniteTimeWindow=true;_this.next=_this.nextInfiniteTimeWindow;}else{_this.next=_this.nextTimeWindow;}return _this;}ReplaySubject.prototype.nextInfiniteTimeWindow=function(value){var _events=this._events;_events.push(value);if(_events.length>this._bufferSize){_events.shift();}_super.prototype.next.call(this,value);};ReplaySubject.prototype.nextTimeWindow=function(value){this._events.push(new ReplayEvent(this._getNow(),value));this._trimBufferThenGetEvents();_super.prototype.next.call(this,value);};ReplaySubject.prototype._subscribe=function(subscriber){var _infiniteTimeWindow=this._infiniteTimeWindow;var _events=_infiniteTimeWindow?this._events:this._trimBufferThenGetEvents();var scheduler=this.scheduler;var len=_events.length;var subscription;if(this.closed){throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();}else if(this.isStopped||this.hasError){subscription=Subscription_1.Subscription.EMPTY;}else{this.observers.push(subscriber);subscription=new SubjectSubscription_1.SubjectSubscription(this,subscriber);}if(scheduler){subscriber.add(subscriber=new observeOn_1.ObserveOnSubscriber(subscriber,scheduler));}if(_infiniteTimeWindow){for(var i=0;i<len&&!subscriber.closed;i++){subscriber.next(_events[i]);}}else{for(var i=0;i<len&&!subscriber.closed;i++){subscriber.next(_events[i].value);}}if(this.hasError){subscriber.error(this.thrownError);}else if(this.isStopped){subscriber.complete();}return subscription;};ReplaySubject.prototype._getNow=function(){return(this.scheduler||queue_1.queue).now();};ReplaySubject.prototype._trimBufferThenGetEvents=function(){var now=this._getNow();var _bufferSize=this._bufferSize;var _windowTime=this._windowTime;var _events=this._events;var eventsCount=_events.length;var spliceCount=0;while(spliceCount<eventsCount){if(now-_events[spliceCount].time<_windowTime){break;}spliceCount++;}if(eventsCount>_bufferSize){spliceCount=Math.max(spliceCount,eventsCount-_bufferSize);}if(spliceCount>0){_events.splice(0,spliceCount);}return _events;};return ReplaySubject;}(Subject_1.Subject);exports.ReplaySubject=ReplaySubject;var ReplayEvent=function(){function ReplayEvent(time,value){this.time=time;this.value=value;}return ReplayEvent;}();

},{"./Subject":548,"./SubjectSubscription":549,"./Subscription":551,"./operators/observeOn":586,"./scheduler/queue":606,"./util/ObjectUnsubscribedError":613}],543:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var canReportError_1=require("./util/canReportError");var toSubscriber_1=require("./util/toSubscriber");var observable_1=require("./symbol/observable");var pipe_1=require("./util/pipe");var config_1=require("./config");var Observable=function(){function Observable(subscribe){this._isScalar=false;if(subscribe){this._subscribe=subscribe;}}Observable.prototype.lift=function(operator){var observable=new Observable();observable.source=this;observable.operator=operator;return observable;};Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator;var sink=toSubscriber_1.toSubscriber(observerOrNext,error,complete);if(operator){sink.add(operator.call(sink,this.source));}else{sink.add(this.source||config_1.config.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink));}if(config_1.config.useDeprecatedSynchronousErrorHandling){if(sink.syncErrorThrowable){sink.syncErrorThrowable=false;if(sink.syncErrorThrown){throw sink.syncErrorValue;}}}return sink;};Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink);}catch(err){if(config_1.config.useDeprecatedSynchronousErrorHandling){sink.syncErrorThrown=true;sink.syncErrorValue=err;}if(canReportError_1.canReportError(sink)){sink.error(err);}else{console.warn(err);}}};Observable.prototype.forEach=function(next,promiseCtor){var _this=this;promiseCtor=getPromiseCtor(promiseCtor);return new promiseCtor(function(resolve,reject){var subscription;subscription=_this.subscribe(function(value){try{next(value);}catch(err){reject(err);if(subscription){subscription.unsubscribe();}}},reject,resolve);});};Observable.prototype._subscribe=function(subscriber){var source=this.source;return source&&source.subscribe(subscriber);};Observable.prototype[observable_1.observable]=function(){return this;};Observable.prototype.pipe=function(){var operations=[];for(var _i=0;_i<arguments.length;_i++){operations[_i]=arguments[_i];}if(operations.length===0){return this;}return pipe_1.pipeFromArray(operations)(this);};Observable.prototype.toPromise=function(promiseCtor){var _this=this;promiseCtor=getPromiseCtor(promiseCtor);return new promiseCtor(function(resolve,reject){var value;_this.subscribe(function(x){return value=x;},function(err){return reject(err);},function(){return resolve(value);});});};Observable.create=function(subscribe){return new Observable(subscribe);};return Observable;}();exports.Observable=Observable;function getPromiseCtor(promiseCtor){if(!promiseCtor){promiseCtor=config_1.config.Promise||Promise;}if(!promiseCtor){throw new Error('no Promise impl found');}return promiseCtor;}

},{"./config":552,"./symbol/observable":608,"./util/canReportError":616,"./util/pipe":631,"./util/toSubscriber":638}],553:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subject_1=require("../Subject");var Observable_1=require("../Observable");var Subscriber_1=require("../Subscriber");var Subscription_1=require("../Subscription");var refCount_1=require("../operators/refCount");var ConnectableObservable=function(_super){__extends(ConnectableObservable,_super);function ConnectableObservable(source,subjectFactory){var _this=_super.call(this)||this;_this.source=source;_this.subjectFactory=subjectFactory;_this._refCount=0;_this._isComplete=false;return _this;}ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber);};ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;if(!subject||subject.isStopped){this._subject=this.subjectFactory();}return this._subject;};ConnectableObservable.prototype.connect=function(){var connection=this._connection;if(!connection){this._isComplete=false;connection=this._connection=new Subscription_1.Subscription();connection.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this)));if(connection.closed){this._connection=null;connection=Subscription_1.Subscription.EMPTY;}}return connection;};ConnectableObservable.prototype.refCount=function(){return refCount_1.refCount()(this);};return ConnectableObservable;}(Observable_1.Observable);exports.ConnectableObservable=ConnectableObservable;/* common-shake removed: exports.connectableObservableDescriptor = */ void function(){var connectableProto=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:true},_subject:{value:null,writable:true},_connection:{value:null,writable:true},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:true},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}};}();var ConnectableSubscriber=function(_super){__extends(ConnectableSubscriber,_super);function ConnectableSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;_this.connectable=connectable;return _this;}ConnectableSubscriber.prototype._error=function(err){this._unsubscribe();_super.prototype._error.call(this,err);};ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=true;this._unsubscribe();_super.prototype._complete.call(this);};ConnectableSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(connectable){this.connectable=null;var connection=connectable._connection;connectable._refCount=0;connectable._subject=null;connectable._connection=null;if(connection){connection.unsubscribe();}}};return ConnectableSubscriber;}(Subject_1.SubjectSubscriber);var RefCountOperator=function(){function RefCountOperator(connectable){this.connectable=connectable;}RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable);var subscription=source.subscribe(refCounter);if(!refCounter.closed){refCounter.connection=connectable.connect();}return subscription;};return RefCountOperator;}();var RefCountSubscriber=function(_super){__extends(RefCountSubscriber,_super);function RefCountSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;_this.connectable=connectable;return _this;}RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(!connectable){this.connection=null;return;}this.connectable=null;var refCount=connectable._refCount;if(refCount<=0){this.connection=null;return;}connectable._refCount=refCount-1;if(refCount>1){this.connection=null;return;}var connection=this.connection;var sharedConnection=connectable._connection;this.connection=null;if(sharedConnection&&(!connection||sharedConnection===connection)){sharedConnection.unsubscribe();}};return RefCountSubscriber;}(Subscriber_1.Subscriber);

},{"../Observable":543,"../Subject":548,"../Subscriber":550,"../Subscription":551,"../operators/refCount":587}],554:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var AsyncSubject_1=require("../AsyncSubject");var map_1=require("../operators/map");var canReportError_1=require("../util/canReportError");var isArray_1=require("../util/isArray");var isScheduler_1=require("../util/isScheduler");function bindCallback(callbackFunc,resultSelector,scheduler){if(resultSelector){if(isScheduler_1.isScheduler(resultSelector)){scheduler=resultSelector;}else{return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return bindCallback(callbackFunc,scheduler).apply(void 0,args).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));};}}return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var context=this;var subject;var params={context:context,subject:subject,callbackFunc:callbackFunc,scheduler:scheduler};return new Observable_1.Observable(function(subscriber){if(!scheduler){if(!subject){subject=new AsyncSubject_1.AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}subject.next(innerArgs.length<=1?innerArgs[0]:innerArgs);subject.complete();};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){if(canReportError_1.canReportError(subject)){subject.error(err);}else{console.warn(err);}}}return subject.subscribe(subscriber);}else{var state={args:args,subscriber:subscriber,params:params};return scheduler.schedule(dispatch,0,state);}});};}exports.bindCallback=bindCallback;function dispatch(state){var _this=this;var self=this;var args=state.args,subscriber=state.subscriber,params=state.params;var callbackFunc=params.callbackFunc,context=params.context,scheduler=params.scheduler;var subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject_1.AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}var value=innerArgs.length<=1?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}));};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){subject.error(err);}}this.add(subject.subscribe(subscriber));}function dispatchNext(state){var value=state.value,subject=state.subject;subject.next(value);subject.complete();}function dispatchError(state){var err=state.err,subject=state.subject;subject.error(err);}

},{"../AsyncSubject":539,"../Observable":543,"../operators/map":583,"../util/canReportError":616,"../util/isArray":619,"../util/isScheduler":628}],570:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var isScheduler_1=require("../util/isScheduler");var fromArray_1=require("./fromArray");var scheduleArray_1=require("../scheduled/scheduleArray");function of(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var scheduler=args[args.length-1];if(isScheduler_1.isScheduler(scheduler)){args.pop();return scheduleArray_1.scheduleArray(args,scheduler);}else{return fromArray_1.fromArray(args);}}exports.of=of;

},{"../scheduled/scheduleArray":588,"../util/isScheduler":628,"./fromArray":562}],573:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var not_1=require("../util/not");var subscribeTo_1=require("../util/subscribeTo");var filter_1=require("../operators/filter");var Observable_1=require("../Observable");function partition(source,predicate,thisArg){return[filter_1.filter(predicate,thisArg)(new Observable_1.Observable(subscribeTo_1.subscribeTo(source))),filter_1.filter(not_1.not(predicate,thisArg))(new Observable_1.Observable(subscribeTo_1.subscribeTo(source)))];}exports.partition=partition;

},{"../Observable":543,"../operators/filter":581,"../util/not":630,"../util/subscribeTo":632}],603:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var AnimationFrameAction_1=require("./AnimationFrameAction");var AnimationFrameScheduler_1=require("./AnimationFrameScheduler");exports.animationFrame=new AnimationFrameScheduler_1.AnimationFrameScheduler(AnimationFrameAction_1.AnimationFrameAction);

},{"./AnimationFrameAction":594,"./AnimationFrameScheduler":595}],606:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var QueueAction_1=require("./QueueAction");var QueueScheduler_1=require("./QueueScheduler");exports.queue=new QueueScheduler_1.QueueScheduler(QueueAction_1.QueueAction);

},{"./QueueAction":600,"./QueueScheduler":601}],557:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var of_1=require("./of");var concatAll_1=require("../operators/concatAll");function concat(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}return concatAll_1.concatAll()(of_1.of.apply(void 0,observables));}exports.concat=concat;

},{"../operators/concatAll":580,"./of":570}],577:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var async_1=require("../scheduler/async");var isNumeric_1=require("../util/isNumeric");var isScheduler_1=require("../util/isScheduler");function timer(dueTime,periodOrScheduler,scheduler){if(dueTime===void 0){dueTime=0;}var period=-1;if(isNumeric_1.isNumeric(periodOrScheduler)){period=Number(periodOrScheduler)<1&&1||Number(periodOrScheduler);}else if(isScheduler_1.isScheduler(periodOrScheduler)){scheduler=periodOrScheduler;}if(!isScheduler_1.isScheduler(scheduler)){scheduler=async_1.async;}return new Observable_1.Observable(function(subscriber){var due=isNumeric_1.isNumeric(dueTime)?dueTime:+dueTime-scheduler.now();return scheduler.schedule(dispatch,due,{index:0,period:period,subscriber:subscriber});});}exports.timer=timer;function dispatch(state){var index=state.index,period=state.period,subscriber=state.subscriber;subscriber.next(index);if(subscriber.closed){return;}else if(period===-1){return subscriber.complete();}state.index=index+1;this.schedule(state,period);}

},{"../Observable":543,"../scheduler/async":605,"../util/isNumeric":624,"../util/isScheduler":628}],550:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var isFunction_1=require("./util/isFunction");var Observer_1=require("./Observer");var Subscription_1=require("./Subscription");var rxSubscriber_1=require("../internal/symbol/rxSubscriber");var config_1=require("./config");var hostReportError_1=require("./util/hostReportError");var Subscriber=function(_super){__extends(Subscriber,_super);function Subscriber(destinationOrNext,error,complete){var _this=_super.call(this)||this;_this.syncErrorValue=null;_this.syncErrorThrown=false;_this.syncErrorThrowable=false;_this.isStopped=false;switch(arguments.length){case 0:_this.destination=Observer_1.empty;break;case 1:if(!destinationOrNext){_this.destination=Observer_1.empty;break;}if((0,_typeof2["default"])(destinationOrNext)==='object'){if(destinationOrNext instanceof Subscriber){_this.syncErrorThrowable=destinationOrNext.syncErrorThrowable;_this.destination=destinationOrNext;destinationOrNext.add(_this);}else{_this.syncErrorThrowable=true;_this.destination=new SafeSubscriber(_this,destinationOrNext);}break;}default:_this.syncErrorThrowable=true;_this.destination=new SafeSubscriber(_this,destinationOrNext,error,complete);break;}return _this;}Subscriber.prototype[rxSubscriber_1.rxSubscriber]=function(){return this;};Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);subscriber.syncErrorThrowable=false;return subscriber;};Subscriber.prototype.next=function(value){if(!this.isStopped){this._next(value);}};Subscriber.prototype.error=function(err){if(!this.isStopped){this.isStopped=true;this._error(err);}};Subscriber.prototype.complete=function(){if(!this.isStopped){this.isStopped=true;this._complete();}};Subscriber.prototype.unsubscribe=function(){if(this.closed){return;}this.isStopped=true;_super.prototype.unsubscribe.call(this);};Subscriber.prototype._next=function(value){this.destination.next(value);};Subscriber.prototype._error=function(err){this.destination.error(err);this.unsubscribe();};Subscriber.prototype._complete=function(){this.destination.complete();this.unsubscribe();};Subscriber.prototype._unsubscribeAndRecycle=function(){var _parentOrParents=this._parentOrParents;this._parentOrParents=null;this.unsubscribe();this.closed=false;this.isStopped=false;this._parentOrParents=_parentOrParents;return this;};return Subscriber;}(Subscription_1.Subscription);exports.Subscriber=Subscriber;var SafeSubscriber=function(_super){__extends(SafeSubscriber,_super);function SafeSubscriber(_parentSubscriber,observerOrNext,error,complete){var _this=_super.call(this)||this;_this._parentSubscriber=_parentSubscriber;var next;var context=_this;if(isFunction_1.isFunction(observerOrNext)){next=observerOrNext;}else if(observerOrNext){next=observerOrNext.next;error=observerOrNext.error;complete=observerOrNext.complete;if(observerOrNext!==Observer_1.empty){context=Object.create(observerOrNext);if(isFunction_1.isFunction(context.unsubscribe)){_this.add(context.unsubscribe.bind(context));}context.unsubscribe=_this.unsubscribe.bind(_this);}}_this._context=context;_this._next=next;_this._error=error;_this._complete=complete;return _this;}SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parentSubscriber=this._parentSubscriber;if(!config_1.config.useDeprecatedSynchronousErrorHandling||!_parentSubscriber.syncErrorThrowable){this.__tryOrUnsub(this._next,value);}else if(this.__tryOrSetError(_parentSubscriber,this._next,value)){this.unsubscribe();}}};SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;var useDeprecatedSynchronousErrorHandling=config_1.config.useDeprecatedSynchronousErrorHandling;if(this._error){if(!useDeprecatedSynchronousErrorHandling||!_parentSubscriber.syncErrorThrowable){this.__tryOrUnsub(this._error,err);this.unsubscribe();}else{this.__tryOrSetError(_parentSubscriber,this._error,err);this.unsubscribe();}}else if(!_parentSubscriber.syncErrorThrowable){this.unsubscribe();if(useDeprecatedSynchronousErrorHandling){throw err;}hostReportError_1.hostReportError(err);}else{if(useDeprecatedSynchronousErrorHandling){_parentSubscriber.syncErrorValue=err;_parentSubscriber.syncErrorThrown=true;}else{hostReportError_1.hostReportError(err);}this.unsubscribe();}}};SafeSubscriber.prototype.complete=function(){var _this=this;if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;if(this._complete){var wrappedComplete=function wrappedComplete(){return _this._complete.call(_this._context);};if(!config_1.config.useDeprecatedSynchronousErrorHandling||!_parentSubscriber.syncErrorThrowable){this.__tryOrUnsub(wrappedComplete);this.unsubscribe();}else{this.__tryOrSetError(_parentSubscriber,wrappedComplete);this.unsubscribe();}}else{this.unsubscribe();}}};SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value);}catch(err){this.unsubscribe();if(config_1.config.useDeprecatedSynchronousErrorHandling){throw err;}else{hostReportError_1.hostReportError(err);}}};SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){if(!config_1.config.useDeprecatedSynchronousErrorHandling){throw new Error('bad call');}try{fn.call(this._context,value);}catch(err){if(config_1.config.useDeprecatedSynchronousErrorHandling){parent.syncErrorValue=err;parent.syncErrorThrown=true;return true;}else{hostReportError_1.hostReportError(err);return true;}}return false;};SafeSubscriber.prototype._unsubscribe=function(){var _parentSubscriber=this._parentSubscriber;this._context=null;this._parentSubscriber=null;_parentSubscriber.unsubscribe();};return SafeSubscriber;}(Subscriber);/* common-shake removed: exports.SafeSubscriber = */ void SafeSubscriber;

},{"../internal/symbol/rxSubscriber":609,"./Observer":544,"./Subscription":551,"./config":552,"./util/hostReportError":617,"./util/isFunction":621,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],604:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var AsapAction_1=require("./AsapAction");var AsapScheduler_1=require("./AsapScheduler");exports.asap=new AsapScheduler_1.AsapScheduler(AsapAction_1.AsapAction);

},{"./AsapAction":596,"./AsapScheduler":597}],556:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var isScheduler_1=require("../util/isScheduler");var isArray_1=require("../util/isArray");var OuterSubscriber_1=require("../OuterSubscriber");var subscribeToResult_1=require("../util/subscribeToResult");var fromArray_1=require("./fromArray");var NONE={};function combineLatest(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}var resultSelector=null;var scheduler=null;if(isScheduler_1.isScheduler(observables[observables.length-1])){scheduler=observables.pop();}if(typeof observables[observables.length-1]==='function'){resultSelector=observables.pop();}if(observables.length===1&&isArray_1.isArray(observables[0])){observables=observables[0];}return fromArray_1.fromArray(observables,scheduler).lift(new CombineLatestOperator(resultSelector));}exports.combineLatest=combineLatest;var CombineLatestOperator=function(){function CombineLatestOperator(resultSelector){this.resultSelector=resultSelector;}CombineLatestOperator.prototype.call=function(subscriber,source){return source.subscribe(new CombineLatestSubscriber(subscriber,this.resultSelector));};return CombineLatestOperator;}();/* common-shake removed: exports.CombineLatestOperator = */ void CombineLatestOperator;var CombineLatestSubscriber=function(_super){__extends(CombineLatestSubscriber,_super);function CombineLatestSubscriber(destination,resultSelector){var _this=_super.call(this,destination)||this;_this.resultSelector=resultSelector;_this.active=0;_this.values=[];_this.observables=[];return _this;}CombineLatestSubscriber.prototype._next=function(observable){this.values.push(NONE);this.observables.push(observable);};CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables;var len=observables.length;if(len===0){this.destination.complete();}else{this.active=len;this.toRespond=len;for(var i=0;i<len;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i));}}};CombineLatestSubscriber.prototype.notifyComplete=function(unused){if((this.active-=1)===0){this.destination.complete();}};CombineLatestSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var values=this.values;var oldVal=values[outerIndex];var toRespond=!this.toRespond?0:oldVal===NONE?--this.toRespond:this.toRespond;values[outerIndex]=innerValue;if(toRespond===0){if(this.resultSelector){this._tryResultSelector(values);}else{this.destination.next(values.slice());}}};CombineLatestSubscriber.prototype._tryResultSelector=function(values){var result;try{result=this.resultSelector.apply(this,values);}catch(err){this.destination.error(err);return;}this.destination.next(result);};return CombineLatestSubscriber;}(OuterSubscriber_1.OuterSubscriber);/* common-shake removed: exports.CombineLatestSubscriber = */ void CombineLatestSubscriber;

},{"../OuterSubscriber":545,"../util/isArray":619,"../util/isScheduler":628,"../util/subscribeToResult":637,"./fromArray":562}],605:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var AsyncAction_1=require("./AsyncAction");var AsyncScheduler_1=require("./AsyncScheduler");exports.async=new AsyncScheduler_1.AsyncScheduler(AsyncAction_1.AsyncAction);

},{"./AsyncAction":598,"./AsyncScheduler":599}],561:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var subscribeTo_1=require("../util/subscribeTo");var scheduled_1=require("../scheduled/scheduled");function from(input,scheduler){if(!scheduler){if(input instanceof Observable_1.Observable){return input;}return new Observable_1.Observable(subscribeTo_1.subscribeTo(input));}else{return scheduled_1.scheduled(input,scheduler);}}exports.from=from;

},{"../Observable":543,"../scheduled/scheduled":592,"../util/subscribeTo":632}],568:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var isScheduler_1=require("../util/isScheduler");var mergeAll_1=require("../operators/mergeAll");var fromArray_1=require("./fromArray");function merge(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}var concurrent=Number.POSITIVE_INFINITY;var scheduler=null;var last=observables[observables.length-1];if(isScheduler_1.isScheduler(last)){scheduler=observables.pop();if(observables.length>1&&typeof observables[observables.length-1]==='number'){concurrent=observables.pop();}}else if(typeof last==='number'){concurrent=observables.pop();}if(scheduler===null&&observables.length===1&&observables[0]instanceof Observable_1.Observable){return observables[0];}return mergeAll_1.mergeAll(concurrent)(fromArray_1.fromArray(observables,scheduler));}exports.merge=merge;

},{"../Observable":543,"../operators/mergeAll":584,"../util/isScheduler":628,"./fromArray":562}],592:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:true});var scheduleObservable_1=require("./scheduleObservable");var schedulePromise_1=require("./schedulePromise");var scheduleArray_1=require("./scheduleArray");var scheduleIterable_1=require("./scheduleIterable");var isInteropObservable_1=require("../util/isInteropObservable");var isPromise_1=require("../util/isPromise");var isArrayLike_1=require("../util/isArrayLike");var isIterable_1=require("../util/isIterable");function scheduled(input,scheduler){if(input!=null){if(isInteropObservable_1.isInteropObservable(input)){return scheduleObservable_1.scheduleObservable(input,scheduler);}else if(isPromise_1.isPromise(input)){return schedulePromise_1.schedulePromise(input,scheduler);}else if(isArrayLike_1.isArrayLike(input)){return scheduleArray_1.scheduleArray(input,scheduler);}else if(isIterable_1.isIterable(input)||typeof input==='string'){return scheduleIterable_1.scheduleIterable(input,scheduler);}}throw new TypeError((input!==null&&(0,_typeof2["default"])(input)||input)+' is not observable');}exports.scheduled=scheduled;

},{"../util/isArrayLike":620,"../util/isInteropObservable":622,"../util/isIterable":623,"../util/isPromise":627,"./scheduleArray":588,"./scheduleIterable":589,"./scheduleObservable":590,"./schedulePromise":591,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],551:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:true});var isArray_1=require("./util/isArray");var isObject_1=require("./util/isObject");var isFunction_1=require("./util/isFunction");var UnsubscriptionError_1=require("./util/UnsubscriptionError");var Subscription=function(){function Subscription(unsubscribe){this.closed=false;this._parentOrParents=null;this._subscriptions=null;if(unsubscribe){this._unsubscribe=unsubscribe;}}Subscription.prototype.unsubscribe=function(){var errors;if(this.closed){return;}var _a=this,_parentOrParents=_a._parentOrParents,_unsubscribe=_a._unsubscribe,_subscriptions=_a._subscriptions;this.closed=true;this._parentOrParents=null;this._subscriptions=null;if(_parentOrParents instanceof Subscription){_parentOrParents.remove(this);}else if(_parentOrParents!==null){for(var index=0;index<_parentOrParents.length;++index){var parent_1=_parentOrParents[index];parent_1.remove(this);}}if(isFunction_1.isFunction(_unsubscribe)){try{_unsubscribe.call(this);}catch(e){errors=e instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e];}}if(isArray_1.isArray(_subscriptions)){var index=-1;var len=_subscriptions.length;while(++index<len){var sub=_subscriptions[index];if(isObject_1.isObject(sub)){try{sub.unsubscribe();}catch(e){errors=errors||[];if(e instanceof UnsubscriptionError_1.UnsubscriptionError){errors=errors.concat(flattenUnsubscriptionErrors(e.errors));}else{errors.push(e);}}}}}if(errors){throw new UnsubscriptionError_1.UnsubscriptionError(errors);}};Subscription.prototype.add=function(teardown){var subscription=teardown;if(!teardown){return Subscription.EMPTY;}switch((0,_typeof2["default"])(teardown)){case'function':subscription=new Subscription(teardown);case'object':if(subscription===this||subscription.closed||typeof subscription.unsubscribe!=='function'){return subscription;}else if(this.closed){subscription.unsubscribe();return subscription;}else if(!(subscription instanceof Subscription)){var tmp=subscription;subscription=new Subscription();subscription._subscriptions=[tmp];}break;default:{throw new Error('unrecognized teardown '+teardown+' added to Subscription.');}}var _parentOrParents=subscription._parentOrParents;if(_parentOrParents===null){subscription._parentOrParents=this;}else if(_parentOrParents instanceof Subscription){if(_parentOrParents===this){return subscription;}subscription._parentOrParents=[_parentOrParents,this];}else if(_parentOrParents.indexOf(this)===-1){_parentOrParents.push(this);}else{return subscription;}var subscriptions=this._subscriptions;if(subscriptions===null){this._subscriptions=[subscription];}else{subscriptions.push(subscription);}return subscription;};Subscription.prototype.remove=function(subscription){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);if(subscriptionIndex!==-1){subscriptions.splice(subscriptionIndex,1);}}};Subscription.EMPTY=function(empty){empty.closed=true;return empty;}(new Subscription());return Subscription;}();exports.Subscription=Subscription;function flattenUnsubscriptionErrors(errors){return errors.reduce(function(errs,err){return errs.concat(err instanceof UnsubscriptionError_1.UnsubscriptionError?err.errors:err);},[]);}

},{"./util/UnsubscriptionError":615,"./util/isArray":619,"./util/isFunction":621,"./util/isObject":625,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],541:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("./Subscriber");var InnerSubscriber=function(_super){__extends(InnerSubscriber,_super);function InnerSubscriber(parent,outerValue,outerIndex){var _this=_super.call(this)||this;_this.parent=parent;_this.outerValue=outerValue;_this.outerIndex=outerIndex;_this.index=0;return _this;}InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this);};InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this);this.unsubscribe();};InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe();};return InnerSubscriber;}(Subscriber_1.Subscriber);exports.InnerSubscriber=InnerSubscriber;

},{"./Subscriber":550}],616:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");function canReportError(observer){while(observer){var _a=observer,closed_1=_a.closed,destination=_a.destination,isStopped=_a.isStopped;if(closed_1||isStopped){return false;}else if(destination&&destination instanceof Subscriber_1.Subscriber){observer=destination;}else{observer=null;}}return true;}exports.canReportError=canReportError;

},{"../Subscriber":550}],638:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");var rxSubscriber_1=require("../symbol/rxSubscriber");var Observer_1=require("../Observer");function toSubscriber(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber_1.Subscriber){return nextOrObserver;}if(nextOrObserver[rxSubscriber_1.rxSubscriber]){return nextOrObserver[rxSubscriber_1.rxSubscriber]();}}if(!nextOrObserver&&!error&&!complete){return new Subscriber_1.Subscriber(Observer_1.empty);}return new Subscriber_1.Subscriber(nextOrObserver,error,complete);}exports.toSubscriber=toSubscriber;

},{"../Observer":544,"../Subscriber":550,"../symbol/rxSubscriber":609}],544:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var config_1=require("./config");var hostReportError_1=require("./util/hostReportError");exports.empty={closed:true,next:function next(value){},error:function error(err){if(config_1.config.useDeprecatedSynchronousErrorHandling){throw err;}else{hostReportError_1.hostReportError(err);}},complete:function complete(){}};

},{"./config":552,"./util/hostReportError":617}],617:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function hostReportError(err){setTimeout(function(){throw err;},0);}exports.hostReportError=hostReportError;

},{}],545:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("./Subscriber");var OuterSubscriber=function(_super){__extends(OuterSubscriber,_super);function OuterSubscriber(){return _super!==null&&_super.apply(this,arguments)||this;}OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue);};OuterSubscriber.prototype.notifyError=function(error,innerSub){this.destination.error(error);};OuterSubscriber.prototype.notifyComplete=function(innerSub){this.destination.complete();};return OuterSubscriber;}(Subscriber_1.Subscriber);exports.OuterSubscriber=OuterSubscriber;

},{"./Subscriber":550}],549:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscription_1=require("./Subscription");var SubjectSubscription=function(_super){__extends(SubjectSubscription,_super);function SubjectSubscription(subject,subscriber){var _this=_super.call(this)||this;_this.subject=subject;_this.subscriber=subscriber;_this.closed=false;return _this;}SubjectSubscription.prototype.unsubscribe=function(){if(this.closed){return;}this.closed=true;var subject=this.subject;var observers=subject.observers;this.subject=null;if(!observers||observers.length===0||subject.isStopped||subject.closed){return;}var subscriberIndex=observers.indexOf(this.subscriber);if(subscriberIndex!==-1){observers.splice(subscriberIndex,1);}};return SubjectSubscription;}(Subscription_1.Subscription);exports.SubjectSubscription=SubjectSubscription;

},{"./Subscription":551}],586:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");var Notification_1=require("../Notification");function observeOn(scheduler,delay){if(delay===void 0){delay=0;}return function observeOnOperatorFunction(source){return source.lift(new ObserveOnOperator(scheduler,delay));};}/* common-shake removed: exports.observeOn = */ void observeOn;var ObserveOnOperator=function(){function ObserveOnOperator(scheduler,delay){if(delay===void 0){delay=0;}this.scheduler=scheduler;this.delay=delay;}ObserveOnOperator.prototype.call=function(subscriber,source){return source.subscribe(new ObserveOnSubscriber(subscriber,this.scheduler,this.delay));};return ObserveOnOperator;}();/* common-shake removed: exports.ObserveOnOperator = */ void ObserveOnOperator;var ObserveOnSubscriber=function(_super){__extends(ObserveOnSubscriber,_super);function ObserveOnSubscriber(destination,scheduler,delay){if(delay===void 0){delay=0;}var _this=_super.call(this,destination)||this;_this.scheduler=scheduler;_this.delay=delay;return _this;}ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination);this.unsubscribe();};ObserveOnSubscriber.prototype.scheduleMessage=function(notification){var destination=this.destination;destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)));};ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(Notification_1.Notification.createNext(value));};ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(Notification_1.Notification.createError(err));this.unsubscribe();};ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete());this.unsubscribe();};return ObserveOnSubscriber;}(Subscriber_1.Subscriber);exports.ObserveOnSubscriber=ObserveOnSubscriber;var ObserveOnMessage=function(){function ObserveOnMessage(notification,destination){this.notification=notification;this.destination=destination;}return ObserveOnMessage;}();/* common-shake removed: exports.ObserveOnMessage = */ void ObserveOnMessage;

},{"../Notification":542,"../Subscriber":550}],609:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports.rxSubscriber=function(){return typeof Symbol==='function'?Symbol('rxSubscriber'):'@@rxSubscriber_'+Math.random();}();/* common-shake removed: exports.$$rxSubscriber = */ void exports.rxSubscriber;

},{}],621:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function isFunction(x){return typeof x==='function';}exports.isFunction=isFunction;

},{}],619:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports.isArray=function(){return Array.isArray||function(x){return x&&typeof x.length==='number';};}();

},{}],625:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));Object.defineProperty(exports,"__esModule",{value:true});function isObject(x){return x!==null&&(0,_typeof2["default"])(x)==='object';}exports.isObject=isObject;

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],587:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");function refCount(){return function refCountOperatorFunction(source){return source.lift(new RefCountOperator(source));};}exports.refCount=refCount;var RefCountOperator=function(){function RefCountOperator(connectable){this.connectable=connectable;}RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable);var subscription=source.subscribe(refCounter);if(!refCounter.closed){refCounter.connection=connectable.connect();}return subscription;};return RefCountOperator;}();var RefCountSubscriber=function(_super){__extends(RefCountSubscriber,_super);function RefCountSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;_this.connectable=connectable;return _this;}RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(!connectable){this.connection=null;return;}this.connectable=null;var refCount=connectable._refCount;if(refCount<=0){this.connection=null;return;}connectable._refCount=refCount-1;if(refCount>1){this.connection=null;return;}var connection=this.connection;var sharedConnection=connectable._connection;this.connection=null;if(sharedConnection&&(!connection||sharedConnection===connection)){sharedConnection.unsubscribe();}};return RefCountSubscriber;}(Subscriber_1.Subscriber);

},{"../Subscriber":550}],628:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function isScheduler(value){return value&&typeof value.schedule==='function';}exports.isScheduler=isScheduler;

},{}],583:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");function map(project,thisArg){return function mapOperation(source){if(typeof project!=='function'){throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');}return source.lift(new MapOperator(project,thisArg));};}exports.map=map;var MapOperator=function(){function MapOperator(project,thisArg){this.project=project;this.thisArg=thisArg;}MapOperator.prototype.call=function(subscriber,source){return source.subscribe(new MapSubscriber(subscriber,this.project,this.thisArg));};return MapOperator;}();/* common-shake removed: exports.MapOperator = */ void MapOperator;var MapSubscriber=function(_super){__extends(MapSubscriber,_super);function MapSubscriber(destination,project,thisArg){var _this=_super.call(this,destination)||this;_this.project=project;_this.count=0;_this.thisArg=thisArg||_this;return _this;}MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++);}catch(err){this.destination.error(err);return;}this.destination.next(result);};return MapSubscriber;}(Subscriber_1.Subscriber);

},{"../Subscriber":550}],562:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var subscribeToArray_1=require("../util/subscribeToArray");var scheduleArray_1=require("../scheduled/scheduleArray");function fromArray(input,scheduler){if(!scheduler){return new Observable_1.Observable(subscribeToArray_1.subscribeToArray(input));}else{return scheduleArray_1.scheduleArray(input,scheduler);}}exports.fromArray=fromArray;

},{"../Observable":543,"../scheduled/scheduleArray":588,"../util/subscribeToArray":633}],637:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var InnerSubscriber_1=require("../InnerSubscriber");var subscribeTo_1=require("./subscribeTo");var Observable_1=require("../Observable");function subscribeToResult(outerSubscriber,result,outerValue,outerIndex,destination){if(destination===void 0){destination=new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex);}if(destination.closed){return undefined;}if(result instanceof Observable_1.Observable){return result.subscribe(destination);}return subscribeTo_1.subscribeTo(result)(destination);}exports.subscribeToResult=subscribeToResult;

},{"../InnerSubscriber":541,"../Observable":543,"./subscribeTo":632}],580:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var mergeAll_1=require("./mergeAll");function concatAll(){return mergeAll_1.mergeAll(1);}exports.concatAll=concatAll;

},{"./mergeAll":584}],632:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var subscribeToArray_1=require("./subscribeToArray");var subscribeToPromise_1=require("./subscribeToPromise");var subscribeToIterable_1=require("./subscribeToIterable");var subscribeToObservable_1=require("./subscribeToObservable");var isArrayLike_1=require("./isArrayLike");var isPromise_1=require("./isPromise");var isObject_1=require("./isObject");var iterator_1=require("../symbol/iterator");var observable_1=require("../symbol/observable");exports.subscribeTo=function(result){if(!!result&&typeof result[observable_1.observable]==='function'){return subscribeToObservable_1.subscribeToObservable(result);}else if(isArrayLike_1.isArrayLike(result)){return subscribeToArray_1.subscribeToArray(result);}else if(isPromise_1.isPromise(result)){return subscribeToPromise_1.subscribeToPromise(result);}else if(!!result&&typeof result[iterator_1.iterator]==='function'){return subscribeToIterable_1.subscribeToIterable(result);}else{var value=isObject_1.isObject(result)?'an invalid object':"'"+result+"'";var msg="You provided "+value+" where a stream was expected."+' You can provide an Observable, Promise, Array, or Iterable.';throw new TypeError(msg);}};

},{"../symbol/iterator":607,"../symbol/observable":608,"./isArrayLike":620,"./isObject":625,"./isPromise":627,"./subscribeToArray":633,"./subscribeToIterable":634,"./subscribeToObservable":635,"./subscribeToPromise":636}],588:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var Subscription_1=require("../Subscription");function scheduleArray(input,scheduler){return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription();var i=0;sub.add(scheduler.schedule(function(){if(i===input.length){subscriber.complete();return;}subscriber.next(input[i++]);if(!subscriber.closed){sub.add(this.schedule());}}));return sub;});}exports.scheduleArray=scheduleArray;

},{"../Observable":543,"../Subscription":551}],633:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports.subscribeToArray=function(array){return function(subscriber){for(var i=0,len=array.length;i<len&&!subscriber.closed;i++){subscriber.next(array[i]);}subscriber.complete();};};

},{}],624:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var isArray_1=require("./isArray");function isNumeric(val){return!isArray_1.isArray(val)&&val-parseFloat(val)+1>=0;}exports.isNumeric=isNumeric;

},{"./isArray":619}],584:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var mergeMap_1=require("./mergeMap");var identity_1=require("../util/identity");function mergeAll(concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}return mergeMap_1.mergeMap(identity_1.identity,concurrent);}exports.mergeAll=mergeAll;

},{"../util/identity":618,"./mergeMap":585}],630:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function not(pred,thisArg){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments);}notPred.pred=pred;notPred.thisArg=thisArg;return notPred;}exports.not=not;

},{}],581:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscriber_1=require("../Subscriber");function filter(predicate,thisArg){return function filterOperatorFunction(source){return source.lift(new FilterOperator(predicate,thisArg));};}exports.filter=filter;var FilterOperator=function(){function FilterOperator(predicate,thisArg){this.predicate=predicate;this.thisArg=thisArg;}FilterOperator.prototype.call=function(subscriber,source){return source.subscribe(new FilterSubscriber(subscriber,this.predicate,this.thisArg));};return FilterOperator;}();var FilterSubscriber=function(_super){__extends(FilterSubscriber,_super);function FilterSubscriber(destination,predicate,thisArg){var _this=_super.call(this,destination)||this;_this.predicate=predicate;_this.thisArg=thisArg;_this.count=0;return _this;}FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++);}catch(err){this.destination.error(err);return;}if(result){this.destination.next(value);}};return FilterSubscriber;}(Subscriber_1.Subscriber);

},{"../Subscriber":550}],607:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function getSymbolIterator(){if(typeof Symbol!=='function'||!Symbol.iterator){return'@@iterator';}return Symbol.iterator;}/* common-shake removed: exports.getSymbolIterator = */ void getSymbolIterator;exports.iterator=getSymbolIterator();/* common-shake removed: exports.$$iterator = */ void exports.iterator;

},{}],585:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var subscribeToResult_1=require("../util/subscribeToResult");var OuterSubscriber_1=require("../OuterSubscriber");var InnerSubscriber_1=require("../InnerSubscriber");var map_1=require("./map");var from_1=require("../observable/from");function mergeMap(project,resultSelector,concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}if(typeof resultSelector==='function'){return function(source){return source.pipe(mergeMap(function(a,i){return from_1.from(project(a,i)).pipe(map_1.map(function(b,ii){return resultSelector(a,b,i,ii);}));},concurrent));};}else if(typeof resultSelector==='number'){concurrent=resultSelector;}return function(source){return source.lift(new MergeMapOperator(project,concurrent));};}exports.mergeMap=mergeMap;var MergeMapOperator=function(){function MergeMapOperator(project,concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}this.project=project;this.concurrent=concurrent;}MergeMapOperator.prototype.call=function(observer,source){return source.subscribe(new MergeMapSubscriber(observer,this.project,this.concurrent));};return MergeMapOperator;}();/* common-shake removed: exports.MergeMapOperator = */ void MergeMapOperator;var MergeMapSubscriber=function(_super){__extends(MergeMapSubscriber,_super);function MergeMapSubscriber(destination,project,concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}var _this=_super.call(this,destination)||this;_this.project=project;_this.concurrent=concurrent;_this.hasCompleted=false;_this.buffer=[];_this.active=0;_this.index=0;return _this;}MergeMapSubscriber.prototype._next=function(value){if(this.active<this.concurrent){this._tryNext(value);}else{this.buffer.push(value);}};MergeMapSubscriber.prototype._tryNext=function(value){var result;var index=this.index++;try{result=this.project(value,index);}catch(err){this.destination.error(err);return;}this.active++;this._innerSub(result,value,index);};MergeMapSubscriber.prototype._innerSub=function(ish,value,index){var innerSubscriber=new InnerSubscriber_1.InnerSubscriber(this,undefined,undefined);var destination=this.destination;destination.add(innerSubscriber);subscribeToResult_1.subscribeToResult(this,ish,value,index,innerSubscriber);};MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=true;if(this.active===0&&this.buffer.length===0){this.destination.complete();}this.unsubscribe();};MergeMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue);};MergeMapSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub);this.active--;if(buffer.length>0){this._next(buffer.shift());}else if(this.active===0&&this.hasCompleted){this.destination.complete();}};return MergeMapSubscriber;}(OuterSubscriber_1.OuterSubscriber);/* common-shake removed: exports.MergeMapSubscriber = */ void MergeMapSubscriber;

},{"../InnerSubscriber":541,"../OuterSubscriber":545,"../observable/from":561,"../util/subscribeToResult":637,"./map":583}],589:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var Subscription_1=require("../Subscription");var iterator_1=require("../symbol/iterator");function scheduleIterable(input,scheduler){if(!input){throw new Error('Iterable cannot be null');}return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription();var iterator;sub.add(function(){if(iterator&&typeof iterator["return"]==='function'){iterator["return"]();}});sub.add(scheduler.schedule(function(){iterator=input[iterator_1.iterator]();sub.add(scheduler.schedule(function(){if(subscriber.closed){return;}var value;var done;try{var result=iterator.next();value=result.value;done=result.done;}catch(err){subscriber.error(err);return;}if(done){subscriber.complete();}else{subscriber.next(value);this.schedule();}}));}));return sub;});}exports.scheduleIterable=scheduleIterable;

},{"../Observable":543,"../Subscription":551,"../symbol/iterator":607}],590:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var Subscription_1=require("../Subscription");var observable_1=require("../symbol/observable");function scheduleObservable(input,scheduler){return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription();sub.add(scheduler.schedule(function(){var observable=input[observable_1.observable]();sub.add(observable.subscribe({next:function next(value){sub.add(scheduler.schedule(function(){return subscriber.next(value);}));},error:function error(err){sub.add(scheduler.schedule(function(){return subscriber.error(err);}));},complete:function complete(){sub.add(scheduler.schedule(function(){return subscriber.complete();}));}}));}));return sub;});}exports.scheduleObservable=scheduleObservable;

},{"../Observable":543,"../Subscription":551,"../symbol/observable":608}],591:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var Observable_1=require("../Observable");var Subscription_1=require("../Subscription");function schedulePromise(input,scheduler){return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription();sub.add(scheduler.schedule(function(){return input.then(function(value){sub.add(scheduler.schedule(function(){subscriber.next(value);sub.add(scheduler.schedule(function(){return subscriber.complete();}));}));},function(err){sub.add(scheduler.schedule(function(){return subscriber.error(err);}));});}));return sub;});}exports.schedulePromise=schedulePromise;

},{"../Observable":543,"../Subscription":551}],627:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});function isPromise(value){return!!value&&typeof value.subscribe!=='function'&&typeof value.then==='function';}exports.isPromise=isPromise;

},{}],620:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});exports.isArrayLike=function(x){return x&&typeof x.length==='number'&&typeof x!=='function';};

},{}],622:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var observable_1=require("../symbol/observable");function isInteropObservable(input){return input&&typeof input[observable_1.observable]==='function';}exports.isInteropObservable=isInteropObservable;

},{"../symbol/observable":608}],623:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var iterator_1=require("../symbol/iterator");function isIterable(input){return input&&typeof input[iterator_1.iterator]==='function';}exports.isIterable=isIterable;

},{"../symbol/iterator":607}],593:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Subscription_1=require("../Subscription");var Action=function(_super){__extends(Action,_super);function Action(scheduler,work){return _super.call(this)||this;}Action.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}return this;};return Action;}(Subscription_1.Subscription);exports.Action=Action;

},{"../Subscription":551}],594:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var AsyncAction_1=require("./AsyncAction");var AnimationFrameAction=function(_super){__extends(AnimationFrameAction,_super);function AnimationFrameAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this;}AnimationFrameAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay);}scheduler.actions.push(this);return scheduler.scheduled||(scheduler.scheduled=requestAnimationFrame(function(){return scheduler.flush(null);}));};AnimationFrameAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0||delay===null&&this.delay>0){return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay);}if(scheduler.actions.length===0){cancelAnimationFrame(id);scheduler.scheduled=undefined;}return undefined;};return AnimationFrameAction;}(AsyncAction_1.AsyncAction);exports.AnimationFrameAction=AnimationFrameAction;

},{"./AsyncAction":598}],598:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Action_1=require("./Action");var AsyncAction=function(_super){__extends(AsyncAction,_super);function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.pending=false;return _this;}AsyncAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(this.closed){return this;}this.state=state;var id=this.id;var scheduler=this.scheduler;if(id!=null){this.id=this.recycleAsyncId(scheduler,id,delay);}this.pending=true;this.delay=delay;this.id=this.id||this.requestAsyncId(scheduler,this.id,delay);return this;};AsyncAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}return setInterval(scheduler.flush.bind(scheduler,this),delay);};AsyncAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&this.delay===delay&&this.pending===false){return id;}clearInterval(id);return undefined;};AsyncAction.prototype.execute=function(state,delay){if(this.closed){return new Error('executing a cancelled action');}this.pending=false;var error=this._execute(state,delay);if(error){return error;}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null);}};AsyncAction.prototype._execute=function(state,delay){var errored=false;var errorValue=undefined;try{this.work(state);}catch(e){errored=true;errorValue=!!e&&e||new Error(e);}if(errored){this.unsubscribe();return errorValue;}};AsyncAction.prototype._unsubscribe=function(){var id=this.id;var scheduler=this.scheduler;var actions=scheduler.actions;var index=actions.indexOf(this);this.work=null;this.state=null;this.pending=false;this.scheduler=null;if(index!==-1){actions.splice(index,1);}if(id!=null){this.id=this.recycleAsyncId(scheduler,id,null);}this.delay=null;};return AsyncAction;}(Action_1.Action);exports.AsyncAction=AsyncAction;

},{"./Action":593}],595:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var AsyncScheduler_1=require("./AsyncScheduler");var AnimationFrameScheduler=function(_super){__extends(AnimationFrameScheduler,_super);function AnimationFrameScheduler(){return _super!==null&&_super.apply(this,arguments)||this;}AnimationFrameScheduler.prototype.flush=function(action){this.active=true;this.scheduled=undefined;var actions=this.actions;var error;var index=-1;var count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay)){break;}}while(++index<count&&(action=actions.shift()));this.active=false;if(error){while(++index<count&&(action=actions.shift())){action.unsubscribe();}throw error;}};return AnimationFrameScheduler;}(AsyncScheduler_1.AsyncScheduler);exports.AnimationFrameScheduler=AnimationFrameScheduler;

},{"./AsyncScheduler":599}],599:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Scheduler_1=require("../Scheduler");var AsyncScheduler=function(_super){__extends(AsyncScheduler,_super);function AsyncScheduler(SchedulerAction,now){if(now===void 0){now=Scheduler_1.Scheduler.now;}var _this=_super.call(this,SchedulerAction,function(){if(AsyncScheduler.delegate&&AsyncScheduler.delegate!==_this){return AsyncScheduler.delegate.now();}else{return now();}})||this;_this.actions=[];_this.active=false;_this.scheduled=undefined;return _this;}AsyncScheduler.prototype.schedule=function(work,delay,state){if(delay===void 0){delay=0;}if(AsyncScheduler.delegate&&AsyncScheduler.delegate!==this){return AsyncScheduler.delegate.schedule(work,delay,state);}else{return _super.prototype.schedule.call(this,work,delay,state);}};AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this.active){actions.push(action);return;}var error;this.active=true;do{if(error=action.execute(action.state,action.delay)){break;}}while(action=actions.shift());this.active=false;if(error){while(action=actions.shift()){action.unsubscribe();}throw error;}};return AsyncScheduler;}(Scheduler_1.Scheduler);exports.AsyncScheduler=AsyncScheduler;

},{"../Scheduler":547}],596:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var Immediate_1=require("../util/Immediate");var AsyncAction_1=require("./AsyncAction");var AsapAction=function(_super){__extends(AsapAction,_super);function AsapAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this;}AsapAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay);}scheduler.actions.push(this);return scheduler.scheduled||(scheduler.scheduled=Immediate_1.Immediate.setImmediate(scheduler.flush.bind(scheduler,null)));};AsapAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0||delay===null&&this.delay>0){return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay);}if(scheduler.actions.length===0){Immediate_1.Immediate.clearImmediate(id);scheduler.scheduled=undefined;}return undefined;};return AsapAction;}(AsyncAction_1.AsyncAction);exports.AsapAction=AsapAction;

},{"../util/Immediate":612,"./AsyncAction":598}],612:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var nextHandle=1;var tasksByHandle={};function runIfPresent(handle){var cb=tasksByHandle[handle];if(cb){cb();}}exports.Immediate={setImmediate:function setImmediate(cb){var handle=nextHandle++;tasksByHandle[handle]=cb;Promise.resolve().then(function(){return runIfPresent(handle);});return handle;},clearImmediate:function clearImmediate(handle){delete tasksByHandle[handle];}};

},{}],597:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var AsyncScheduler_1=require("./AsyncScheduler");var AsapScheduler=function(_super){__extends(AsapScheduler,_super);function AsapScheduler(){return _super!==null&&_super.apply(this,arguments)||this;}AsapScheduler.prototype.flush=function(action){this.active=true;this.scheduled=undefined;var actions=this.actions;var error;var index=-1;var count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay)){break;}}while(++index<count&&(action=actions.shift()));this.active=false;if(error){while(++index<count&&(action=actions.shift())){action.unsubscribe();}throw error;}};return AsapScheduler;}(AsyncScheduler_1.AsyncScheduler);exports.AsapScheduler=AsapScheduler;

},{"./AsyncScheduler":599}],600:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var AsyncAction_1=require("./AsyncAction");var QueueAction=function(_super){__extends(QueueAction,_super);function QueueAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this;}QueueAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(delay>0){return _super.prototype.schedule.call(this,state,delay);}this.delay=delay;this.state=state;this.scheduler.flush(this);return this;};QueueAction.prototype.execute=function(state,delay){return delay>0||this.closed?_super.prototype.execute.call(this,state,delay):this._execute(state,delay);};QueueAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0||delay===null&&this.delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay);}return scheduler.flush(this);};return QueueAction;}(AsyncAction_1.AsyncAction);exports.QueueAction=QueueAction;

},{"./AsyncAction":598}],601:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var AsyncScheduler_1=require("./AsyncScheduler");var QueueScheduler=function(_super){__extends(QueueScheduler,_super);function QueueScheduler(){return _super!==null&&_super.apply(this,arguments)||this;}return QueueScheduler;}(AsyncScheduler_1.AsyncScheduler);exports.QueueScheduler=QueueScheduler;

},{"./AsyncScheduler":599}],636:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var hostReportError_1=require("./hostReportError");exports.subscribeToPromise=function(promise){return function(subscriber){promise.then(function(value){if(!subscriber.closed){subscriber.next(value);subscriber.complete();}},function(err){return subscriber.error(err);}).then(null,hostReportError_1.hostReportError);return subscriber;};};

},{"./hostReportError":617}],634:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var iterator_1=require("../symbol/iterator");exports.subscribeToIterable=function(iterable){return function(subscriber){var iterator=iterable[iterator_1.iterator]();do{var item=iterator.next();if(item.done){subscriber.complete();break;}subscriber.next(item.value);if(subscriber.closed){break;}}while(true);if(typeof iterator["return"]==='function'){subscriber.add(function(){if(iterator["return"]){iterator["return"]();}});}return subscriber;};};

},{"../symbol/iterator":607}],635:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var observable_1=require("../symbol/observable");exports.subscribeToObservable=function(obj){return function(subscriber){var obs=obj[observable_1.observable]();if(typeof obs.subscribe!=='function'){throw new TypeError('Provided object does not correctly implement Symbol.observable');}else{return obs.subscribe(subscriber);}};};

},{"../symbol/observable":608}],641:[function(require,module,exports){
var scrypt=require('./scryptSync');scrypt.async=require('./scrypt');module.exports=scrypt;

},{"./scrypt":642,"./scryptSync":643}],643:[function(require,module,exports){
var crypto=require('crypto');var _require=require('./utils'),checkAndInit=_require.checkAndInit,smixSync=_require.smixSync;function scrypt(key,salt,N,r,p,dkLen,progressCallback){var _checkAndInit=checkAndInit(key,salt,N,r,p,dkLen,progressCallback),XY=_checkAndInit.XY,V=_checkAndInit.V,B32=_checkAndInit.B32,x=_checkAndInit.x,_X=_checkAndInit._X,B=_checkAndInit.B,tickCallback=_checkAndInit.tickCallback;for(var i=0;i<p;i++){smixSync(B,i*128*r,r,N,V,XY,_X,B32,x,tickCallback);}return crypto.pbkdf2Sync(key,B,1,dkLen,'sha256');}module.exports=scrypt;

},{"./utils":644,"crypto":1142}],642:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var crypto=require('crypto');var _require=require('./utils'),checkAndInit=_require.checkAndInit,smix=_require.smix;function scrypt(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _scrypt.apply(this,arguments);}function _scrypt(){_scrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(key,salt,N,r,p,dkLen,progressCallback,promiseInterval){var _checkAndInit,XY,V,B32,x,_X,B,tickCallback,i;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_checkAndInit=checkAndInit(key,salt,N,r,p,dkLen,progressCallback),XY=_checkAndInit.XY,V=_checkAndInit.V,B32=_checkAndInit.B32,x=_checkAndInit.x,_X=_checkAndInit._X,B=_checkAndInit.B,tickCallback=_checkAndInit.tickCallback;i=0;case 2:if(!(i<p)){_context.next=8;break;}_context.next=5;return smix(B,i*128*r,r,N,V,XY,_X,B32,x,tickCallback,promiseInterval);case 5:i++;_context.next=2;break;case 8:return _context.abrupt("return",crypto.pbkdf2Sync(key,B,1,dkLen,'sha256'));case 9:case"end":return _context.stop();}}},_callee);}));return _scrypt.apply(this,arguments);}module.exports=scrypt;

},{"./utils":644,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/regenerator":67,"crypto":1142}],644:[function(require,module,exports){
(function (Buffer,setImmediate){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var crypto=require('crypto');var MAX_VALUE=0x7fffffff;var DEFAULT_PROMISE_INTERVAL=5000;function checkAndInit(key,salt,N,r,p,dkLen,progressCallback){if(N===0||(N&N-1)!==0)throw Error('N must be > 0 and a power of 2');if(N>MAX_VALUE/128/r)throw Error('Parameter N is too large');if(r>MAX_VALUE/128/p)throw Error('Parameter r is too large');var XY=Buffer.alloc(256*r);var V=Buffer.alloc(128*r*N);var B32=new Int32Array(16);var x=new Int32Array(16);var _X=Buffer.alloc(64);var B=crypto.pbkdf2Sync(key,salt,1,p*128*r,'sha256');var tickCallback;if(progressCallback){var totalOps=p*N*2;var currentOp=0;tickCallback=function tickCallback(){++currentOp;if(currentOp%1000===0){progressCallback({current:currentOp,total:totalOps,percent:currentOp/totalOps*100.0});}};}return{XY:XY,V:V,B32:B32,x:x,_X:_X,B:B,tickCallback:tickCallback};}function smix(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8,_x9,_x10,_x11){return _smix.apply(this,arguments);}function _smix(){_smix=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(B,Bi,r,N,V,XY,_X,B32,x,tickCallback,promiseInterval){var Xi,Yi,i,offset,j;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:promiseInterval=promiseInterval||DEFAULT_PROMISE_INTERVAL;Xi=0;Yi=128*r;B.copy(XY,Xi,Bi,Bi+Yi);i=0;case 5:if(!(i<N)){_context.next=15;break;}XY.copy(V,i*Yi,Xi,Xi+Yi);if(!(i%promiseInterval===0)){_context.next=10;break;}_context.next=10;return new Promise(function(resolve){return setImmediate(resolve);});case 10:blockmix_salsa8(XY,Xi,Yi,r,_X,B32,x);if(tickCallback)tickCallback();case 12:i++;_context.next=5;break;case 15:i=0;case 16:if(!(i<N)){_context.next=28;break;}offset=Xi+(2*r-1)*64;j=XY.readUInt32LE(offset)&N-1;blockxor(V,j*Yi,XY,Xi,Yi);if(!(i%promiseInterval===0)){_context.next=23;break;}_context.next=23;return new Promise(function(resolve){return setImmediate(resolve);});case 23:blockmix_salsa8(XY,Xi,Yi,r,_X,B32,x);if(tickCallback)tickCallback();case 25:i++;_context.next=16;break;case 28:XY.copy(B,Bi,Xi,Xi+Yi);case 29:case"end":return _context.stop();}}},_callee);}));return _smix.apply(this,arguments);}function smixSync(B,Bi,r,N,V,XY,_X,B32,x,tickCallback){var Xi=0;var Yi=128*r;var i;B.copy(XY,Xi,Bi,Bi+Yi);for(i=0;i<N;i++){XY.copy(V,i*Yi,Xi,Xi+Yi);blockmix_salsa8(XY,Xi,Yi,r,_X,B32,x);if(tickCallback)tickCallback();}for(i=0;i<N;i++){var offset=Xi+(2*r-1)*64;var j=XY.readUInt32LE(offset)&N-1;blockxor(V,j*Yi,XY,Xi,Yi);blockmix_salsa8(XY,Xi,Yi,r,_X,B32,x);if(tickCallback)tickCallback();}XY.copy(B,Bi,Xi,Xi+Yi);}function blockmix_salsa8(BY,Bi,Yi,r,_X,B32,x){var i;arraycopy(BY,Bi+(2*r-1)*64,_X,0,64);for(i=0;i<2*r;i++){blockxor(BY,i*64,_X,0,64);salsa20_8(_X,B32,x);arraycopy(_X,0,BY,Yi+i*64,64);}for(i=0;i<r;i++){arraycopy(BY,Yi+i*2*64,BY,Bi+i*64,64);}for(i=0;i<r;i++){arraycopy(BY,Yi+(i*2+1)*64,BY,Bi+(i+r)*64,64);}}function R(a,b){return a<<b|a>>>32-b;}function salsa20_8(B,B32,x){var i;for(i=0;i<16;i++){B32[i]=(B[i*4+0]&0xff)<<0;B32[i]|=(B[i*4+1]&0xff)<<8;B32[i]|=(B[i*4+2]&0xff)<<16;B32[i]|=(B[i*4+3]&0xff)<<24;}arraycopy(B32,0,x,0,16);for(i=8;i>0;i-=2){x[4]^=R(x[0]+x[12],7);x[8]^=R(x[4]+x[0],9);x[12]^=R(x[8]+x[4],13);x[0]^=R(x[12]+x[8],18);x[9]^=R(x[5]+x[1],7);x[13]^=R(x[9]+x[5],9);x[1]^=R(x[13]+x[9],13);x[5]^=R(x[1]+x[13],18);x[14]^=R(x[10]+x[6],7);x[2]^=R(x[14]+x[10],9);x[6]^=R(x[2]+x[14],13);x[10]^=R(x[6]+x[2],18);x[3]^=R(x[15]+x[11],7);x[7]^=R(x[3]+x[15],9);x[11]^=R(x[7]+x[3],13);x[15]^=R(x[11]+x[7],18);x[1]^=R(x[0]+x[3],7);x[2]^=R(x[1]+x[0],9);x[3]^=R(x[2]+x[1],13);x[0]^=R(x[3]+x[2],18);x[6]^=R(x[5]+x[4],7);x[7]^=R(x[6]+x[5],9);x[4]^=R(x[7]+x[6],13);x[5]^=R(x[4]+x[7],18);x[11]^=R(x[10]+x[9],7);x[8]^=R(x[11]+x[10],9);x[9]^=R(x[8]+x[11],13);x[10]^=R(x[9]+x[8],18);x[12]^=R(x[15]+x[14],7);x[13]^=R(x[12]+x[15],9);x[14]^=R(x[13]+x[12],13);x[15]^=R(x[14]+x[13],18);}for(i=0;i<16;++i){B32[i]=x[i]+B32[i];}for(i=0;i<16;i++){var bi=i*4;B[bi+0]=B32[i]>>0&0xff;B[bi+1]=B32[i]>>8&0xff;B[bi+2]=B32[i]>>16&0xff;B[bi+3]=B32[i]>>24&0xff;}}function blockxor(S,Si,D,Di,len){for(var i=0;i<len;i++){D[Di+i]^=S[Si+i];}}function arraycopy(src,srcPos,dest,destPos,length){if(Buffer.isBuffer(src)&&Buffer.isBuffer(dest)){src.copy(dest,destPos,srcPos,srcPos+length);}else{while(length--){dest[destPos++]=src[srcPos++];}}}module.exports={checkAndInit:checkAndInit,smix:smix,smixSync:smixSync};

}).call(this,require("buffer").Buffer,require("timers").setImmediate)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/regenerator":67,"buffer":1133,"crypto":1142,"timers":1280}],648:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var createHash=require('create-hash');var BN=require('bn.js');var EC=require('elliptic').ec;var messages=require('../messages.json');var ec=new EC('secp256k1');var ecparams=ec.curve;function loadCompressedPublicKey(first,xBuffer){var x=new BN(xBuffer);if(x.cmp(ecparams.p)>=0)return null;x=x.toRed(ecparams.red);var y=x.redSqr().redIMul(x).redIAdd(ecparams.b).redSqrt();if(first===0x03!==y.isOdd())y=y.redNeg();return ec.keyPair({pub:{x:x,y:y}});}function loadUncompressedPublicKey(first,xBuffer,yBuffer){var x=new BN(xBuffer);var y=new BN(yBuffer);if(x.cmp(ecparams.p)>=0||y.cmp(ecparams.p)>=0)return null;x=x.toRed(ecparams.red);y=y.toRed(ecparams.red);if((first===0x06||first===0x07)&&y.isOdd()!==(first===0x07))return null;var x3=x.redSqr().redIMul(x);if(!y.redSqr().redISub(x3.redIAdd(ecparams.b)).isZero())return null;return ec.keyPair({pub:{x:x,y:y}});}function loadPublicKey(publicKey){var first=publicKey[0];switch(first){case 0x02:case 0x03:if(publicKey.length!==33)return null;return loadCompressedPublicKey(first,publicKey.slice(1,33));case 0x04:case 0x06:case 0x07:if(publicKey.length!==65)return null;return loadUncompressedPublicKey(first,publicKey.slice(1,33),publicKey.slice(33,65));default:return null;}}exports.privateKeyVerify=function(privateKey){var bn=new BN(privateKey);return bn.cmp(ecparams.n)<0&&!bn.isZero();};exports.privateKeyExport=function(privateKey,compressed){var d=new BN(privateKey);if(d.cmp(ecparams.n)>=0||d.isZero())throw new Error(messages.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return Buffer.from(ec.keyFromPrivate(privateKey).getPublic(compressed,true));};exports.privateKeyNegate=function(privateKey){var bn=new BN(privateKey);return bn.isZero()?Buffer.alloc(32):ecparams.n.sub(bn).umod(ecparams.n).toArrayLike(Buffer,'be',32);};exports.privateKeyModInverse=function(privateKey){var bn=new BN(privateKey);if(bn.cmp(ecparams.n)>=0||bn.isZero())throw new Error(messages.EC_PRIVATE_KEY_RANGE_INVALID);return bn.invm(ecparams.n).toArrayLike(Buffer,'be',32);};exports.privateKeyTweakAdd=function(privateKey,tweak){var bn=new BN(tweak);if(bn.cmp(ecparams.n)>=0)throw new Error(messages.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);bn.iadd(new BN(privateKey));if(bn.cmp(ecparams.n)>=0)bn.isub(ecparams.n);if(bn.isZero())throw new Error(messages.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return bn.toArrayLike(Buffer,'be',32);};exports.privateKeyTweakMul=function(privateKey,tweak){var bn=new BN(tweak);if(bn.cmp(ecparams.n)>=0||bn.isZero())throw new Error(messages.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);bn.imul(new BN(privateKey));if(bn.cmp(ecparams.n))bn=bn.umod(ecparams.n);return bn.toArrayLike(Buffer,'be',32);};exports.publicKeyCreate=function(privateKey,compressed){var d=new BN(privateKey);if(d.cmp(ecparams.n)>=0||d.isZero())throw new Error(messages.EC_PUBLIC_KEY_CREATE_FAIL);return Buffer.from(ec.keyFromPrivate(privateKey).getPublic(compressed,true));};exports.publicKeyConvert=function(publicKey,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);return Buffer.from(pair.getPublic(compressed,true));};exports.publicKeyVerify=function(publicKey){return loadPublicKey(publicKey)!==null;};exports.publicKeyTweakAdd=function(publicKey,tweak,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);tweak=new BN(tweak);if(tweak.cmp(ecparams.n)>=0)throw new Error(messages.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var point=ecparams.g.mul(tweak).add(pair.pub);if(point.isInfinity())throw new Error(messages.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return Buffer.from(point.encode(true,compressed));};exports.publicKeyTweakMul=function(publicKey,tweak,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);tweak=new BN(tweak);if(tweak.cmp(ecparams.n)>=0||tweak.isZero())throw new Error(messages.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return Buffer.from(pair.pub.mul(tweak).encode(true,compressed));};exports.publicKeyCombine=function(publicKeys,compressed){var pairs=new Array(publicKeys.length);for(var i=0;i<publicKeys.length;++i){pairs[i]=loadPublicKey(publicKeys[i]);if(pairs[i]===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);}var point=pairs[0].pub;for(var j=1;j<pairs.length;++j){point=point.add(pairs[j].pub);}if(point.isInfinity())throw new Error(messages.EC_PUBLIC_KEY_COMBINE_FAIL);return Buffer.from(point.encode(true,compressed));};exports.signatureNormalize=function(signature){var r=new BN(signature.slice(0,32));var s=new BN(signature.slice(32,64));if(r.cmp(ecparams.n)>=0||s.cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);var result=Buffer.from(signature);if(s.cmp(ec.nh)===1)ecparams.n.sub(s).toArrayLike(Buffer,'be',32).copy(result,32);return result;};exports.signatureExport=function(signature){var r=signature.slice(0,32);var s=signature.slice(32,64);if(new BN(r).cmp(ecparams.n)>=0||new BN(s).cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);return{r:r,s:s};};exports.signatureImport=function(sigObj){var r=new BN(sigObj.r);if(r.cmp(ecparams.n)>=0)r=new BN(0);var s=new BN(sigObj.s);if(s.cmp(ecparams.n)>=0)s=new BN(0);return Buffer.concat([r.toArrayLike(Buffer,'be',32),s.toArrayLike(Buffer,'be',32)]);};exports.sign=function(message,privateKey,noncefn,data){if(typeof noncefn==='function'){var getNonce=noncefn;noncefn=function noncefn(counter){var nonce=getNonce(message,privateKey,null,data,counter);if(!Buffer.isBuffer(nonce)||nonce.length!==32)throw new Error(messages.ECDSA_SIGN_FAIL);return new BN(nonce);};}var d=new BN(privateKey);if(d.cmp(ecparams.n)>=0||d.isZero())throw new Error(messages.ECDSA_SIGN_FAIL);var result=ec.sign(message,privateKey,{canonical:true,k:noncefn,pers:data});return{signature:Buffer.concat([result.r.toArrayLike(Buffer,'be',32),result.s.toArrayLike(Buffer,'be',32)]),recovery:result.recoveryParam};};exports.verify=function(message,signature,publicKey){var sigObj={r:signature.slice(0,32),s:signature.slice(32,64)};var sigr=new BN(sigObj.r);var sigs=new BN(sigObj.s);if(sigr.cmp(ecparams.n)>=0||sigs.cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);if(sigs.cmp(ec.nh)===1||sigr.isZero()||sigs.isZero())return false;var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);return ec.verify(message,sigObj,{x:pair.pub.x,y:pair.pub.y});};exports.recover=function(message,signature,recovery,compressed){var sigObj={r:signature.slice(0,32),s:signature.slice(32,64)};var sigr=new BN(sigObj.r);var sigs=new BN(sigObj.s);if(sigr.cmp(ecparams.n)>=0||sigs.cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);try{if(sigr.isZero()||sigs.isZero())throw new Error();var point=ec.recoverPubKey(message,sigObj,recovery);return Buffer.from(point.encode(true,compressed));}catch(err){throw new Error(messages.ECDSA_RECOVER_FAIL);}};exports.ecdh=function(publicKey,privateKey){var shared=exports.ecdhUnsafe(publicKey,privateKey,true);return createHash('sha256').update(shared).digest();};exports.ecdhUnsafe=function(publicKey,privateKey,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);var scalar=new BN(privateKey);if(scalar.cmp(ecparams.n)>=0||scalar.isZero())throw new Error(messages.ECDH_FAIL);return Buffer.from(pair.pub.mul(scalar).encode(true,compressed));};

},{"../messages.json":650,"bn.js":132,"create-hash":173,"elliptic":222,"safe-buffer":639}],649:[function(require,module,exports){
'use strict';var assert=require('./assert');var der=require('./der');var messages=require('./messages.json');function initCompressedValue(value,defaultValue){if(value===undefined)return defaultValue;assert.isBoolean(value,messages.COMPRESSED_TYPE_INVALID);return value;}module.exports=function(secp256k1){return{privateKeyVerify:function privateKeyVerify(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);return privateKey.length===32&&secp256k1.privateKeyVerify(privateKey);},privateKeyExport:function privateKeyExport(privateKey,compressed){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);var publicKey=secp256k1.privateKeyExport(privateKey,compressed);return der.privateKeyExport(privateKey,publicKey,compressed);},privateKeyImport:function privateKeyImport(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);privateKey=der.privateKeyImport(privateKey);if(privateKey&&privateKey.length===32&&secp256k1.privateKeyVerify(privateKey))return privateKey;throw new Error(messages.EC_PRIVATE_KEY_IMPORT_DER_FAIL);},privateKeyNegate:function privateKeyNegate(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);return secp256k1.privateKeyNegate(privateKey);},privateKeyModInverse:function privateKeyModInverse(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);return secp256k1.privateKeyModInverse(privateKey);},privateKeyTweakAdd:function privateKeyTweakAdd(privateKey,tweak){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);return secp256k1.privateKeyTweakAdd(privateKey,tweak);},privateKeyTweakMul:function privateKeyTweakMul(privateKey,tweak){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);return secp256k1.privateKeyTweakMul(privateKey,tweak);},publicKeyCreate:function publicKeyCreate(privateKey,compressed){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyCreate(privateKey,compressed);},publicKeyConvert:function publicKeyConvert(publicKey,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyConvert(publicKey,compressed);},publicKeyVerify:function publicKeyVerify(publicKey){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);return secp256k1.publicKeyVerify(publicKey);},publicKeyTweakAdd:function publicKeyTweakAdd(publicKey,tweak,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyTweakAdd(publicKey,tweak,compressed);},publicKeyTweakMul:function publicKeyTweakMul(publicKey,tweak,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyTweakMul(publicKey,tweak,compressed);},publicKeyCombine:function publicKeyCombine(publicKeys,compressed){assert.isArray(publicKeys,messages.EC_PUBLIC_KEYS_TYPE_INVALID);assert.isLengthGTZero(publicKeys,messages.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<publicKeys.length;++i){assert.isBuffer(publicKeys[i],messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKeys[i],33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);}compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyCombine(publicKeys,compressed);},signatureNormalize:function signatureNormalize(signature){assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);return secp256k1.signatureNormalize(signature);},signatureExport:function signatureExport(signature){assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);var sigObj=secp256k1.signatureExport(signature);return der.signatureExport(sigObj);},signatureImport:function signatureImport(sig){assert.isBuffer(sig,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isLengthGTZero(sig,messages.ECDSA_SIGNATURE_LENGTH_INVALID);var sigObj=der.signatureImport(sig);if(sigObj)return secp256k1.signatureImport(sigObj);throw new Error(messages.ECDSA_SIGNATURE_PARSE_DER_FAIL);},signatureImportLax:function signatureImportLax(sig){assert.isBuffer(sig,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isLengthGTZero(sig,messages.ECDSA_SIGNATURE_LENGTH_INVALID);var sigObj=der.signatureImportLax(sig);if(sigObj)return secp256k1.signatureImport(sigObj);throw new Error(messages.ECDSA_SIGNATURE_PARSE_DER_FAIL);},sign:function sign(message,privateKey,options){assert.isBuffer(message,messages.MSG32_TYPE_INVALID);assert.isBufferLength(message,32,messages.MSG32_LENGTH_INVALID);assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);var data=null;var noncefn=null;if(options!==undefined){assert.isObject(options,messages.OPTIONS_TYPE_INVALID);if(options.data!==undefined){assert.isBuffer(options.data,messages.OPTIONS_DATA_TYPE_INVALID);assert.isBufferLength(options.data,32,messages.OPTIONS_DATA_LENGTH_INVALID);data=options.data;}if(options.noncefn!==undefined){assert.isFunction(options.noncefn,messages.OPTIONS_NONCEFN_TYPE_INVALID);noncefn=options.noncefn;}}return secp256k1.sign(message,privateKey,noncefn,data);},verify:function verify(message,signature,publicKey){assert.isBuffer(message,messages.MSG32_TYPE_INVALID);assert.isBufferLength(message,32,messages.MSG32_LENGTH_INVALID);assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);return secp256k1.verify(message,signature,publicKey);},recover:function recover(message,signature,recovery,compressed){assert.isBuffer(message,messages.MSG32_TYPE_INVALID);assert.isBufferLength(message,32,messages.MSG32_LENGTH_INVALID);assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);assert.isNumber(recovery,messages.RECOVERY_ID_TYPE_INVALID);assert.isNumberInInterval(recovery,-1,4,messages.RECOVERY_ID_VALUE_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.recover(message,signature,recovery,compressed);},ecdh:function ecdh(publicKey,privateKey){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);return secp256k1.ecdh(publicKey,privateKey);},ecdhUnsafe:function ecdhUnsafe(publicKey,privateKey,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.ecdhUnsafe(publicKey,privateKey,compressed);}};};

},{"./assert":646,"./der":647,"./messages.json":650}],646:[function(require,module,exports){
(function (Buffer){
'use strict';var toString=Object.prototype.toString;exports.isArray=function(value,message){if(!Array.isArray(value))throw TypeError(message);};exports.isBoolean=function(value,message){if(toString.call(value)!=='[object Boolean]')throw TypeError(message);};exports.isBuffer=function(value,message){if(!Buffer.isBuffer(value))throw TypeError(message);};exports.isFunction=function(value,message){if(toString.call(value)!=='[object Function]')throw TypeError(message);};exports.isNumber=function(value,message){if(toString.call(value)!=='[object Number]')throw TypeError(message);};exports.isObject=function(value,message){if(toString.call(value)!=='[object Object]')throw TypeError(message);};exports.isBufferLength=function(buffer,length,message){if(buffer.length!==length)throw RangeError(message);};exports.isBufferLength2=function(buffer,length1,length2,message){if(buffer.length!==length1&&buffer.length!==length2)throw RangeError(message);};exports.isLengthGTZero=function(value,message){if(value.length===0)throw RangeError(message);};exports.isNumberInInterval=function(number,x,y,message){if(number<=x||number>=y)throw RangeError(message);};

}).call(this,{"isBuffer":require("../../../../../ui/ui-dapps/node_modules/is-buffer/index.js")})

},{"../../../../../ui/ui-dapps/node_modules/is-buffer/index.js":1188}],647:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var bip66=require('bip66');var EC_PRIVKEY_EXPORT_DER_COMPRESSED=Buffer.from([0x30,0x81,0xd3,0x02,0x01,0x01,0x04,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x81,0x85,0x30,0x81,0x82,0x02,0x01,0x01,0x30,0x2c,0x06,0x07,0x2a,0x86,0x48,0xcE,0x3d,0x01,0x01,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xff,0xff,0xfc,0x2f,0x30,0x06,0x04,0x01,0x00,0x04,0x01,0x07,0x04,0x21,0x02,0x79,0xbE,0x66,0x7E,0xf9,0xdc,0xbb,0xac,0x55,0xa0,0x62,0x95,0xcE,0x87,0x0b,0x07,0x02,0x9b,0xfc,0xdb,0x2d,0xcE,0x28,0xd9,0x59,0xf2,0x81,0x5b,0x16,0xf8,0x17,0x98,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xba,0xaE,0xdc,0xE6,0xaf,0x48,0xa0,0x3b,0xbf,0xd2,0x5E,0x8c,0xd0,0x36,0x41,0x41,0x02,0x01,0x01,0xa1,0x24,0x03,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);var EC_PRIVKEY_EXPORT_DER_UNCOMPRESSED=Buffer.from([0x30,0x82,0x01,0x13,0x02,0x01,0x01,0x04,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x81,0xa5,0x30,0x81,0xa2,0x02,0x01,0x01,0x30,0x2c,0x06,0x07,0x2a,0x86,0x48,0xcE,0x3d,0x01,0x01,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xff,0xff,0xfc,0x2f,0x30,0x06,0x04,0x01,0x00,0x04,0x01,0x07,0x04,0x41,0x04,0x79,0xbE,0x66,0x7E,0xf9,0xdc,0xbb,0xac,0x55,0xa0,0x62,0x95,0xcE,0x87,0x0b,0x07,0x02,0x9b,0xfc,0xdb,0x2d,0xcE,0x28,0xd9,0x59,0xf2,0x81,0x5b,0x16,0xf8,0x17,0x98,0x48,0x3a,0xda,0x77,0x26,0xa3,0xc4,0x65,0x5d,0xa4,0xfb,0xfc,0x0E,0x11,0x08,0xa8,0xfd,0x17,0xb4,0x48,0xa6,0x85,0x54,0x19,0x9c,0x47,0xd0,0x8f,0xfb,0x10,0xd4,0xb8,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xba,0xaE,0xdc,0xE6,0xaf,0x48,0xa0,0x3b,0xbf,0xd2,0x5E,0x8c,0xd0,0x36,0x41,0x41,0x02,0x01,0x01,0xa1,0x44,0x03,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);exports.privateKeyExport=function(privateKey,publicKey,compressed){var result=Buffer.from(compressed?EC_PRIVKEY_EXPORT_DER_COMPRESSED:EC_PRIVKEY_EXPORT_DER_UNCOMPRESSED);privateKey.copy(result,compressed?8:9);publicKey.copy(result,compressed?181:214);return result;};exports.privateKeyImport=function(privateKey){var length=privateKey.length;var index=0;if(length<index+1||privateKey[index]!==0x30)return;index+=1;if(length<index+1||!(privateKey[index]&0x80))return;var lenb=privateKey[index]&0x7f;index+=1;if(lenb<1||lenb>2)return;if(length<index+lenb)return;var len=privateKey[index+lenb-1]|(lenb>1?privateKey[index+lenb-2]<<8:0);index+=lenb;if(length<index+len)return;if(length<index+3||privateKey[index]!==0x02||privateKey[index+1]!==0x01||privateKey[index+2]!==0x01){return;}index+=3;if(length<index+2||privateKey[index]!==0x04||privateKey[index+1]>0x20||length<index+2+privateKey[index+1]){return;}return privateKey.slice(index+2,index+2+privateKey[index+1]);};exports.signatureExport=function(sigObj){var r=Buffer.concat([Buffer.from([0]),sigObj.r]);for(var lenR=33,posR=0;lenR>1&&r[posR]===0x00&&!(r[posR+1]&0x80);--lenR,++posR){;}var s=Buffer.concat([Buffer.from([0]),sigObj.s]);for(var lenS=33,posS=0;lenS>1&&s[posS]===0x00&&!(s[posS+1]&0x80);--lenS,++posS){;}return bip66.encode(r.slice(posR),s.slice(posS));};exports.signatureImport=function(sig){var r=Buffer.alloc(32,0);var s=Buffer.alloc(32,0);try{var sigObj=bip66.decode(sig);if(sigObj.r.length===33&&sigObj.r[0]===0x00)sigObj.r=sigObj.r.slice(1);if(sigObj.r.length>32)throw new Error('R length is too long');if(sigObj.s.length===33&&sigObj.s[0]===0x00)sigObj.s=sigObj.s.slice(1);if(sigObj.s.length>32)throw new Error('S length is too long');}catch(err){return;}sigObj.r.copy(r,32-sigObj.r.length);sigObj.s.copy(s,32-sigObj.s.length);return{r:r,s:s};};exports.signatureImportLax=function(sig){var r=Buffer.alloc(32,0);var s=Buffer.alloc(32,0);var length=sig.length;var index=0;if(sig[index++]!==0x30)return;var lenbyte=sig[index++];if(lenbyte&0x80){index+=lenbyte-0x80;if(index>length)return;}if(sig[index++]!==0x02)return;var rlen=sig[index++];if(rlen&0x80){lenbyte=rlen-0x80;if(index+lenbyte>length)return;for(;lenbyte>0&&sig[index]===0x00;index+=1,lenbyte-=1){;}for(rlen=0;lenbyte>0;index+=1,lenbyte-=1){rlen=(rlen<<8)+sig[index];}}if(rlen>length-index)return;var rindex=index;index+=rlen;if(sig[index++]!==0x02)return;var slen=sig[index++];if(slen&0x80){lenbyte=slen-0x80;if(index+lenbyte>length)return;for(;lenbyte>0&&sig[index]===0x00;index+=1,lenbyte-=1){;}for(slen=0;lenbyte>0;index+=1,lenbyte-=1){slen=(slen<<8)+sig[index];}}if(slen>length-index)return;var sindex=index;index+=slen;for(;rlen>0&&sig[rindex]===0x00;rlen-=1,rindex+=1){;}if(rlen>32)return;var rvalue=sig.slice(rindex,rindex+rlen);rvalue.copy(r,32-rvalue.length);for(;slen>0&&sig[sindex]===0x00;slen-=1,sindex+=1){;}if(slen>32)return;var svalue=sig.slice(sindex,sindex+slen);svalue.copy(s,32-svalue.length);return{r:r,s:s};};

},{"bip66":73,"safe-buffer":639}],650:[function(require,module,exports){
module.exports={
  "COMPRESSED_TYPE_INVALID": "compressed should be a boolean",
  "EC_PRIVATE_KEY_TYPE_INVALID": "private key should be a Buffer",
  "EC_PRIVATE_KEY_LENGTH_INVALID": "private key length is invalid",
  "EC_PRIVATE_KEY_RANGE_INVALID": "private key range is invalid",
  "EC_PRIVATE_KEY_TWEAK_ADD_FAIL": "tweak out of range or resulting private key is invalid",
  "EC_PRIVATE_KEY_TWEAK_MUL_FAIL": "tweak out of range",
  "EC_PRIVATE_KEY_EXPORT_DER_FAIL": "couldn't export to DER format",
  "EC_PRIVATE_KEY_IMPORT_DER_FAIL": "couldn't import from DER format",
  "EC_PUBLIC_KEYS_TYPE_INVALID": "public keys should be an Array",
  "EC_PUBLIC_KEYS_LENGTH_INVALID": "public keys Array should have at least 1 element",
  "EC_PUBLIC_KEY_TYPE_INVALID": "public key should be a Buffer",
  "EC_PUBLIC_KEY_LENGTH_INVALID": "public key length is invalid",
  "EC_PUBLIC_KEY_PARSE_FAIL": "the public key could not be parsed or is invalid",
  "EC_PUBLIC_KEY_CREATE_FAIL": "private was invalid, try again",
  "EC_PUBLIC_KEY_TWEAK_ADD_FAIL": "tweak out of range or resulting public key is invalid",
  "EC_PUBLIC_KEY_TWEAK_MUL_FAIL": "tweak out of range",
  "EC_PUBLIC_KEY_COMBINE_FAIL": "the sum of the public keys is not valid",
  "ECDH_FAIL": "scalar was invalid (zero or overflow)",
  "ECDSA_SIGNATURE_TYPE_INVALID": "signature should be a Buffer",
  "ECDSA_SIGNATURE_LENGTH_INVALID": "signature length is invalid",
  "ECDSA_SIGNATURE_PARSE_FAIL": "couldn't parse signature",
  "ECDSA_SIGNATURE_PARSE_DER_FAIL": "couldn't parse DER signature",
  /* common-shake removed: "ECDSA_SIGNATURE_SERIALIZE_DER_FAIL": "couldn't serialize signature to DER format" */
  "ECDSA_SIGN_FAIL": "nonce generation function failed or private key is invalid",
  "ECDSA_RECOVER_FAIL": "couldn't recover public key from signature",
  "MSG32_TYPE_INVALID": "message should be a Buffer",
  "MSG32_LENGTH_INVALID": "message length is invalid",
  "OPTIONS_TYPE_INVALID": "options should be an Object",
  "OPTIONS_DATA_TYPE_INVALID": "options.data should be a Buffer",
  "OPTIONS_DATA_LENGTH_INVALID": "options.data length is invalid",
  "OPTIONS_NONCEFN_TYPE_INVALID": "options.noncefn should be a Function",
  "RECOVERY_ID_TYPE_INVALID": "recovery should be a Number",
  "RECOVERY_ID_VALUE_INVALID": "recovery should have value between -1 and 4",
  "TWEAK_TYPE_INVALID": "tweak should be a Buffer",
  "TWEAK_LENGTH_INVALID": "tweak length is invalid"
}

},{}],651:[function(require,module,exports){
var Buffer=require('safe-buffer').Buffer;function Hash(blockSize,finalSize){this._block=Buffer.alloc(blockSize);this._finalSize=finalSize;this._blockSize=blockSize;this._len=0;}Hash.prototype.update=function(data,enc){if(typeof data==='string'){enc=enc||'utf8';data=Buffer.from(data,enc);}var block=this._block;var blockSize=this._blockSize;var length=data.length;var accum=this._len;for(var offset=0;offset<length;){var assigned=accum%blockSize;var remainder=Math.min(length-offset,blockSize-assigned);for(var i=0;i<remainder;i++){block[assigned+i]=data[offset+i];}accum+=remainder;offset+=remainder;if(accum%blockSize===0){this._update(block);}}this._len+=length;return this;};Hash.prototype.digest=function(enc){var rem=this._len%this._blockSize;this._block[rem]=0x80;this._block.fill(0,rem+1);if(rem>=this._finalSize){this._update(this._block);this._block.fill(0);}var bits=this._len*8;if(bits<=0xffffffff){this._block.writeUInt32BE(bits,this._blockSize-4);}else{var lowBits=(bits&0xffffffff)>>>0;var highBits=(bits-lowBits)/0x100000000;this._block.writeUInt32BE(highBits,this._blockSize-8);this._block.writeUInt32BE(lowBits,this._blockSize-4);}this._update(this._block);var hash=this._hash();return enc?hash.toString(enc):hash;};Hash.prototype._update=function(){throw new Error('_update must be implemented by subclass');};module.exports=Hash;

},{"safe-buffer":639}],654:[function(require,module,exports){
var inherits=require('inherits');var Hash=require('./hash');var Buffer=require('safe-buffer').Buffer;var K=[0x5a827999,0x6ed9eba1,0x8f1bbcdc|0,0xca62c1d6|0];var W=new Array(80);function Sha1(){this.init();this._w=W;Hash.call(this,64,56);}inherits(Sha1,Hash);Sha1.prototype.init=function(){this._a=0x67452301;this._b=0xefcdab89;this._c=0x98badcfe;this._d=0x10325476;this._e=0xc3d2e1f0;return this;};function rotl1(num){return num<<1|num>>>31;}function rotl5(num){return num<<5|num>>>27;}function rotl30(num){return num<<30|num>>>2;}function ft(s,b,c,d){if(s===0)return b&c|~b&d;if(s===2)return b&c|b&d|c&d;return b^c^d;}Sha1.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i){W[i]=M.readInt32BE(i*4);}for(;i<80;++i){W[i]=rotl1(W[i-3]^W[i-8]^W[i-14]^W[i-16]);}for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d;d=c;c=rotl30(b);b=a;a=t;}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;};Sha1.prototype._hash=function(){var H=Buffer.allocUnsafe(20);H.writeInt32BE(this._a|0,0);H.writeInt32BE(this._b|0,4);H.writeInt32BE(this._c|0,8);H.writeInt32BE(this._d|0,12);H.writeInt32BE(this._e|0,16);return H;};module.exports=Sha1;

},{"./hash":651,"inherits":307,"safe-buffer":639}],656:[function(require,module,exports){
var inherits=require('inherits');var Hash=require('./hash');var Buffer=require('safe-buffer').Buffer;var K=[0x428A2F98,0x71374491,0xB5C0FBCF,0xE9B5DBA5,0x3956C25B,0x59F111F1,0x923F82A4,0xAB1C5ED5,0xD807AA98,0x12835B01,0x243185BE,0x550C7DC3,0x72BE5D74,0x80DEB1FE,0x9BDC06A7,0xC19BF174,0xE49B69C1,0xEFBE4786,0x0FC19DC6,0x240CA1CC,0x2DE92C6F,0x4A7484AA,0x5CB0A9DC,0x76F988DA,0x983E5152,0xA831C66D,0xB00327C8,0xBF597FC7,0xC6E00BF3,0xD5A79147,0x06CA6351,0x14292967,0x27B70A85,0x2E1B2138,0x4D2C6DFC,0x53380D13,0x650A7354,0x766A0ABB,0x81C2C92E,0x92722C85,0xA2BFE8A1,0xA81A664B,0xC24B8B70,0xC76C51A3,0xD192E819,0xD6990624,0xF40E3585,0x106AA070,0x19A4C116,0x1E376C08,0x2748774C,0x34B0BCB5,0x391C0CB3,0x4ED8AA4A,0x5B9CCA4F,0x682E6FF3,0x748F82EE,0x78A5636F,0x84C87814,0x8CC70208,0x90BEFFFA,0xA4506CEB,0xBEF9A3F7,0xC67178F2];var W=new Array(64);function Sha256(){this.init();this._w=W;Hash.call(this,64,56);}inherits(Sha256,Hash);Sha256.prototype.init=function(){this._a=0x6a09e667;this._b=0xbb67ae85;this._c=0x3c6ef372;this._d=0xa54ff53a;this._e=0x510e527f;this._f=0x9b05688c;this._g=0x1f83d9ab;this._h=0x5be0cd19;return this;};function ch(x,y,z){return z^x&(y^z);}function maj(x,y,z){return x&y|z&(x|y);}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10);}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7);}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3;}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10;}Sha256.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;var f=this._f|0;var g=this._g|0;var h=this._h|0;for(var i=0;i<16;++i){W[i]=M.readInt32BE(i*4);}for(;i<64;++i){W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0;}for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0;var T2=sigma0(a)+maj(a,b,c)|0;h=g;g=f;f=e;e=d+T1|0;d=c;c=b;b=a;a=T1+T2|0;}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;this._f=f+this._f|0;this._g=g+this._g|0;this._h=h+this._h|0;};Sha256.prototype._hash=function(){var H=Buffer.allocUnsafe(32);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);H.writeInt32BE(this._h,28);return H;};module.exports=Sha256;

},{"./hash":651,"inherits":307,"safe-buffer":639}],655:[function(require,module,exports){
var inherits=require('inherits');var Sha256=require('./sha256');var Hash=require('./hash');var Buffer=require('safe-buffer').Buffer;var W=new Array(64);function Sha224(){this.init();this._w=W;Hash.call(this,64,56);}inherits(Sha224,Sha256);Sha224.prototype.init=function(){this._a=0xc1059ed8;this._b=0x367cd507;this._c=0x3070dd17;this._d=0xf70e5939;this._e=0xffc00b31;this._f=0x68581511;this._g=0x64f98fa7;this._h=0xbefa4fa4;return this;};Sha224.prototype._hash=function(){var H=Buffer.allocUnsafe(28);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);return H;};module.exports=Sha224;

},{"./hash":651,"./sha256":656,"inherits":307,"safe-buffer":639}],657:[function(require,module,exports){
var inherits=require('inherits');var SHA512=require('./sha512');var Hash=require('./hash');var Buffer=require('safe-buffer').Buffer;var W=new Array(160);function Sha384(){this.init();this._w=W;Hash.call(this,128,112);}inherits(Sha384,SHA512);Sha384.prototype.init=function(){this._ah=0xcbbb9d5d;this._bh=0x629a292a;this._ch=0x9159015a;this._dh=0x152fecd8;this._eh=0x67332667;this._fh=0x8eb44a87;this._gh=0xdb0c2e0d;this._hh=0x47b5481d;this._al=0xc1059ed8;this._bl=0x367cd507;this._cl=0x3070dd17;this._dl=0xf70e5939;this._el=0xffc00b31;this._fl=0x68581511;this._gl=0x64f98fa7;this._hl=0xbefa4fa4;return this;};Sha384.prototype._hash=function(){var H=Buffer.allocUnsafe(48);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4);}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);return H;};module.exports=Sha384;

},{"./hash":651,"./sha512":658,"inherits":307,"safe-buffer":639}],658:[function(require,module,exports){
var inherits=require('inherits');var Hash=require('./hash');var Buffer=require('safe-buffer').Buffer;var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];var W=new Array(160);function Sha512(){this.init();this._w=W;Hash.call(this,128,112);}inherits(Sha512,Hash);Sha512.prototype.init=function(){this._ah=0x6a09e667;this._bh=0xbb67ae85;this._ch=0x3c6ef372;this._dh=0xa54ff53a;this._eh=0x510e527f;this._fh=0x9b05688c;this._gh=0x1f83d9ab;this._hh=0x5be0cd19;this._al=0xf3bcc908;this._bl=0x84caa73b;this._cl=0xfe94f82b;this._dl=0x5f1d36f1;this._el=0xade682d1;this._fl=0x2b3e6c1f;this._gl=0xfb41bd6b;this._hl=0x137e2179;return this;};function Ch(x,y,z){return z^x&(y^z);}function maj(x,y,z){return x&y|z&(x|y);}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25);}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23);}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7;}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25);}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6;}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26);}function getCarry(a,b){return a>>>0<b>>>0?1:0;}Sha512.prototype._update=function(M){var W=this._w;var ah=this._ah|0;var bh=this._bh|0;var ch=this._ch|0;var dh=this._dh|0;var eh=this._eh|0;var fh=this._fh|0;var gh=this._gh|0;var hh=this._hh|0;var al=this._al|0;var bl=this._bl|0;var cl=this._cl|0;var dl=this._dl|0;var el=this._el|0;var fl=this._fl|0;var gl=this._gl|0;var hl=this._hl|0;for(var i=0;i<32;i+=2){W[i]=M.readInt32BE(i*4);W[i+1]=M.readInt32BE(i*4+4);}for(;i<160;i+=2){var xh=W[i-15*2];var xl=W[i-15*2+1];var gamma0=Gamma0(xh,xl);var gamma0l=Gamma0l(xl,xh);xh=W[i-2*2];xl=W[i-2*2+1];var gamma1=Gamma1(xh,xl);var gamma1l=Gamma1l(xl,xh);var Wi7h=W[i-7*2];var Wi7l=W[i-7*2+1];var Wi16h=W[i-16*2];var Wi16l=W[i-16*2+1];var Wil=gamma0l+Wi7l|0;var Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wil=Wil+gamma1l|0;Wih=Wih+gamma1+getCarry(Wil,gamma1l)|0;Wil=Wil+Wi16l|0;Wih=Wih+Wi16h+getCarry(Wil,Wi16l)|0;W[i]=Wih;W[i+1]=Wil;}for(var j=0;j<160;j+=2){Wih=W[j];Wil=W[j+1];var majh=maj(ah,bh,ch);var majl=maj(al,bl,cl);var sigma0h=sigma0(ah,al);var sigma0l=sigma0(al,ah);var sigma1h=sigma1(eh,el);var sigma1l=sigma1(el,eh);var Kih=K[j];var Kil=K[j+1];var chh=Ch(eh,fh,gh);var chl=Ch(el,fl,gl);var t1l=hl+sigma1l|0;var t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1l=t1l+chl|0;t1h=t1h+chh+getCarry(t1l,chl)|0;t1l=t1l+Kil|0;t1h=t1h+Kih+getCarry(t1l,Kil)|0;t1l=t1l+Wil|0;t1h=t1h+Wih+getCarry(t1l,Wil)|0;var t2l=sigma0l+majl|0;var t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;el=dl+t1l|0;eh=dh+t1h+getCarry(el,dl)|0;dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;al=t1l+t2l|0;ah=t1h+t2h+getCarry(al,t1l)|0;}this._al=this._al+al|0;this._bl=this._bl+bl|0;this._cl=this._cl+cl|0;this._dl=this._dl+dl|0;this._el=this._el+el|0;this._fl=this._fl+fl|0;this._gl=this._gl+gl|0;this._hl=this._hl+hl|0;this._ah=this._ah+ah+getCarry(this._al,al)|0;this._bh=this._bh+bh+getCarry(this._bl,bl)|0;this._ch=this._ch+ch+getCarry(this._cl,cl)|0;this._dh=this._dh+dh+getCarry(this._dl,dl)|0;this._eh=this._eh+eh+getCarry(this._el,el)|0;this._fh=this._fh+fh+getCarry(this._fl,fl)|0;this._gh=this._gh+gh+getCarry(this._gl,gl)|0;this._hh=this._hh+hh+getCarry(this._hl,hl)|0;};Sha512.prototype._hash=function(){var H=Buffer.allocUnsafe(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4);}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);writeInt64BE(this._gh,this._gl,48);writeInt64BE(this._hh,this._hl,56);return H;};module.exports=Sha512;

},{"./hash":651,"inherits":307,"safe-buffer":639}],653:[function(require,module,exports){
var inherits=require('inherits');var Hash=require('./hash');var Buffer=require('safe-buffer').Buffer;var K=[0x5a827999,0x6ed9eba1,0x8f1bbcdc|0,0xca62c1d6|0];var W=new Array(80);function Sha(){this.init();this._w=W;Hash.call(this,64,56);}inherits(Sha,Hash);Sha.prototype.init=function(){this._a=0x67452301;this._b=0xefcdab89;this._c=0x98badcfe;this._d=0x10325476;this._e=0xc3d2e1f0;return this;};function rotl5(num){return num<<5|num>>>27;}function rotl30(num){return num<<30|num>>>2;}function ft(s,b,c,d){if(s===0)return b&c|~b&d;if(s===2)return b&c|b&d|c&d;return b^c^d;}Sha.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i){W[i]=M.readInt32BE(i*4);}for(;i<80;++i){W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];}for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d;d=c;c=rotl30(b);b=a;a=t;}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;};Sha.prototype._hash=function(){var H=Buffer.allocUnsafe(20);H.writeInt32BE(this._a|0,0);H.writeInt32BE(this._b|0,4);H.writeInt32BE(this._c|0,8);H.writeInt32BE(this._d|0,12);H.writeInt32BE(this._e|0,16);return H;};module.exports=Sha;

},{"./hash":651,"inherits":307,"safe-buffer":639}],662:[function(require,module,exports){
(function (global){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var required=require('requires-port'),qs=require('querystringify'),protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//;var rules=[['#','hash'],['?','query'],function sanitize(address){return address.replace('\\','/');},['/','pathname'],['@','auth',1],[NaN,'host',undefined,1,1],[/:(\d+)$/,'port',undefined,1],[NaN,'hostname',undefined,1,1]];var ignore={hash:1,query:1};function lolcation(loc){var globalVar;if(typeof window!=='undefined')globalVar=window;else if(typeof global!=='undefined')globalVar=global;else if(typeof self!=='undefined')globalVar=self;else globalVar={};var location=globalVar.location||{};loc=loc||location;var finaldestination={},type=(0,_typeof2["default"])(loc),key;if('blob:'===loc.protocol){finaldestination=new Url(unescape(loc.pathname),{});}else if('string'===type){finaldestination=new Url(loc,{});for(key in ignore){delete finaldestination[key];}}else if('object'===type){for(key in loc){if(key in ignore)continue;finaldestination[key]=loc[key];}if(finaldestination.slashes===undefined){finaldestination.slashes=slashes.test(loc.href);}}return finaldestination;}function extractProtocol(address){var match=protocolre.exec(address);return{protocol:match[1]?match[1].toLowerCase():'',slashes:!!match[2],rest:match[3]};}function resolve(relative,base){var path=(base||'/').split('/').slice(0,-1).concat(relative.split('/')),i=path.length,last=path[i-1],unshift=false,up=0;while(i--){if(path[i]==='.'){path.splice(i,1);}else if(path[i]==='..'){path.splice(i,1);up++;}else if(up){if(i===0)unshift=true;path.splice(i,1);up--;}}if(unshift)path.unshift('');if(last==='.'||last==='..')path.push('');return path.join('/');}function Url(address,location,parser){if(!(this instanceof Url)){return new Url(address,location,parser);}var relative,extracted,parse,instruction,index,key,instructions=rules.slice(),type=(0,_typeof2["default"])(location),url=this,i=0;if('object'!==type&&'string'!==type){parser=location;location=null;}if(parser&&'function'!==typeof parser)parser=qs.parse;location=lolcation(location);extracted=extractProtocol(address||'');relative=!extracted.protocol&&!extracted.slashes;url.slashes=extracted.slashes||relative&&location.slashes;url.protocol=extracted.protocol||location.protocol||'';address=extracted.rest;if(!extracted.slashes)instructions[3]=[/(.*)/,'pathname'];for(;i<instructions.length;i++){instruction=instructions[i];if(typeof instruction==='function'){address=instruction(address);continue;}parse=instruction[0];key=instruction[1];if(parse!==parse){url[key]=address;}else if('string'===typeof parse){if(~(index=address.indexOf(parse))){if('number'===typeof instruction[2]){url[key]=address.slice(0,index);address=address.slice(index+instruction[2]);}else{url[key]=address.slice(index);address=address.slice(0,index);}}}else if(index=parse.exec(address)){url[key]=index[1];address=address.slice(0,index.index);}url[key]=url[key]||(relative&&instruction[3]?location[key]||'':'');if(instruction[4])url[key]=url[key].toLowerCase();}if(parser)url.query=parser(url.query);if(relative&&location.slashes&&url.pathname.charAt(0)!=='/'&&(url.pathname!==''||location.pathname!=='')){url.pathname=resolve(url.pathname,location.pathname);}if(!required(url.port,url.protocol)){url.host=url.hostname;url.port='';}url.username=url.password='';if(url.auth){instruction=url.auth.split(':');url.username=instruction[0]||'';url.password=instruction[1]||'';}url.origin=url.protocol&&url.host&&url.protocol!=='file:'?url.protocol+'//'+url.host:'null';url.href=url.toString();}function set(part,value,fn){var url=this;switch(part){case'query':if('string'===typeof value&&value.length){value=(fn||qs.parse)(value);}url[part]=value;break;case'port':url[part]=value;if(!required(value,url.protocol)){url.host=url.hostname;url[part]='';}else if(value){url.host=url.hostname+':'+value;}break;case'hostname':url[part]=value;if(url.port)value+=':'+url.port;url.host=value;break;case'host':url[part]=value;if(/:\d+$/.test(value)){value=value.split(':');url.port=value.pop();url.hostname=value.join(':');}else{url.hostname=value;url.port='';}break;case'protocol':url.protocol=value.toLowerCase();url.slashes=!fn;break;case'pathname':case'hash':if(value){var _char=part==='pathname'?'/':'#';url[part]=value.charAt(0)!==_char?_char+value:value;}else{url[part]=value;}break;default:url[part]=value;}for(var i=0;i<rules.length;i++){var ins=rules[i];if(ins[4])url[ins[1]]=url[ins[1]].toLowerCase();}url.origin=url.protocol&&url.host&&url.protocol!=='file:'?url.protocol+'//'+url.host:'null';url.href=url.toString();return url;}function toString(stringify){if(!stringify||'function'!==typeof stringify)stringify=qs.stringify;var query,url=this,protocol=url.protocol;if(protocol&&protocol.charAt(protocol.length-1)!==':')protocol+=':';var result=protocol+(url.slashes?'//':'');if(url.username){result+=url.username;if(url.password)result+=':'+url.password;result+='@';}result+=url.host+url.pathname;query='object'===(0,_typeof2["default"])(url.query)?stringify(url.query):url.query;if(query)result+='?'!==query.charAt(0)?'?'+query:query;if(url.hash)result+=url.hash;return result;}Url.prototype={set:set,toString:toString};Url.extractProtocol=extractProtocol;Url.location=lolcation;Url.qs=qs;module.exports=Url;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"querystringify":531,"requires-port":535}],663:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root){var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports;var freeModule=(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&module.exports==freeExports&&module;var freeGlobal=(typeof global==="undefined"?"undefined":(0,_typeof2["default"])(global))=='object'&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal;}var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}return output;}function ucs2encode(array){var length=array.length;var index=-1;var value;var output='';while(++index<length){value=array[index];if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}output+=stringFromCharCode(value);}return output;}function checkScalarValue(codePoint){if(codePoint>=0xD800&&codePoint<=0xDFFF){throw Error('Lone surrogate U+'+codePoint.toString(16).toUpperCase()+' is not a scalar value');}}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&0x3F|0x80);}function encodeCodePoint(codePoint){if((codePoint&0xFFFFFF80)==0){return stringFromCharCode(codePoint);}var symbol='';if((codePoint&0xFFFFF800)==0){symbol=stringFromCharCode(codePoint>>6&0x1F|0xC0);}else if((codePoint&0xFFFF0000)==0){checkScalarValue(codePoint);symbol=stringFromCharCode(codePoint>>12&0x0F|0xE0);symbol+=createByte(codePoint,6);}else if((codePoint&0xFFE00000)==0){symbol=stringFromCharCode(codePoint>>18&0x07|0xF0);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6);}symbol+=stringFromCharCode(codePoint&0x3F|0x80);return symbol;}function utf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString='';while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint);}return byteString;}function readContinuationByte(){if(byteIndex>=byteCount){throw Error('Invalid byte index');}var continuationByte=byteArray[byteIndex]&0xFF;byteIndex++;if((continuationByte&0xC0)==0x80){return continuationByte&0x3F;}throw Error('Invalid continuation byte');}function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error('Invalid byte index');}if(byteIndex==byteCount){return false;}byte1=byteArray[byteIndex]&0xFF;byteIndex++;if((byte1&0x80)==0){return byte1;}if((byte1&0xE0)==0xC0){var byte2=readContinuationByte();codePoint=(byte1&0x1F)<<6|byte2;if(codePoint>=0x80){return codePoint;}else{throw Error('Invalid continuation byte');}}if((byte1&0xF0)==0xE0){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&0x0F)<<12|byte2<<6|byte3;if(codePoint>=0x0800){checkScalarValue(codePoint);return codePoint;}else{throw Error('Invalid continuation byte');}}if((byte1&0xF8)==0xF0){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&0x0F)<<0x12|byte2<<0x0C|byte3<<0x06|byte4;if(codePoint>=0x010000&&codePoint<=0x10FFFF){return codePoint;}}throw Error('Invalid UTF-8 detected');}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp);}return ucs2encode(codePoints);}var utf8={'version':'2.0.0','encode':utf8encode,'decode':utf8decode};if(typeof define=='function'&&(0,_typeof2["default"])(define.amd)=='object'&&define.amd){define(function(){return utf8;});}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=utf8;}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in utf8){hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key]);}}}else{root.utf8=utf8;}})(void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66}],664:[function(require,module,exports){
module.exports=read;var MSB=0x80,REST=0x7F;function read(buf,offset){var res=0,offset=offset||0,shift=0,counter=offset,b,l=buf.length;do{if(counter>=l){read.bytes=0;throw new RangeError('Could not decode varint');}b=buf[counter++];res+=shift<28?(b&REST)<<shift:(b&REST)*Math.pow(2,shift);shift+=7;}while(b>=MSB);read.bytes=counter-offset;return res;}

},{}],665:[function(require,module,exports){
module.exports=encode;var MSB=0x80,REST=0x7F,MSBALL=~REST,INT=Math.pow(2,31);function encode(num,out,offset){out=out||[];offset=offset||0;var oldOffset=offset;while(num>=INT){out[offset++]=num&0xFF|MSB;num/=128;}while(num&MSBALL){out[offset++]=num&0xFF|MSB;num>>>=7;}out[offset]=num|0;encode.bytes=offset-oldOffset+1;return out;}

},{}],667:[function(require,module,exports){
var N1=Math.pow(2,7);var N2=Math.pow(2,14);var N3=Math.pow(2,21);var N4=Math.pow(2,28);var N5=Math.pow(2,35);var N6=Math.pow(2,42);var N7=Math.pow(2,49);var N8=Math.pow(2,56);var N9=Math.pow(2,63);module.exports=function(value){return value<N1?1:value<N2?2:value<N3?3:value<N4?4:value<N5?5:value<N6?6:value<N7?7:value<N8?8:value<N9?9:10;};

},{}],668:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('lodash/isString'),require('lodash/isArray'),require('lodash/isObject'),require('lodash/isNumber'),require('web3-utils'),require('web3-eth-iban')):typeof define==='function'&&define.amd?define(['exports','lodash/isString','lodash/isArray','lodash/isObject','lodash/isNumber','web3-utils','web3-eth-iban'],factory):(global=global||self,factory(global.Web3CoreHelpers={},global.isString,global.isArray,global.isObject,global.isNumber,global.Utils,global.web3EthIban));})(void 0,function(exports,isString,isArray,isObject,isNumber,Utils,web3EthIban){'use strict';isString=isString&&isString.hasOwnProperty('default')?isString['default']:isString;isArray=isArray&&isArray.hasOwnProperty('default')?isArray['default']:isArray;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;isNumber=isNumber&&isNumber.hasOwnProperty('default')?isNumber['default']:isNumber;var outputBigNumberFormatter=function outputBigNumberFormatter(number){return Utils.toBN(number).toString(10);};var isPredefinedBlockNumber=function isPredefinedBlockNumber(blockNumber){return blockNumber==='latest'||blockNumber==='pending'||blockNumber==='earliest';};var inputDefaultBlockNumberFormatter=function inputDefaultBlockNumberFormatter(blockNumber,moduleInstance){if(blockNumber===undefined||blockNumber===null){return moduleInstance.defaultBlock;}return inputBlockNumberFormatter(blockNumber);};var inputBlockNumberFormatter=function inputBlockNumberFormatter(blockNumber){if(blockNumber===undefined||blockNumber===null||isPredefinedBlockNumber(blockNumber)){return blockNumber;}if(Utils.isHexStrict(blockNumber)){if(isString(blockNumber)){return blockNumber.toLowerCase();}return blockNumber;}return Utils.numberToHex(blockNumber);};var txInputFormatter=function txInputFormatter(txObject){if(txObject.to){txObject.to=inputAddressFormatter(txObject.to);}if(txObject.data&&txObject.input){throw new Error('You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.');}if(!txObject.data&&txObject.input){txObject.data=txObject.input;delete txObject.input;}if(txObject.data&&!Utils.isHex(txObject.data)){throw new Error('The data field must be HEX encoded data.');}if(txObject.gas||txObject.gasLimit){txObject.gas=txObject.gas||txObject.gasLimit;}['gasPrice','gas','value','nonce'].filter(function(key){return txObject[key]!==undefined;}).forEach(function(key){txObject[key]=Utils.numberToHex(txObject[key]);});return txObject;};var inputCallFormatter=function inputCallFormatter(txObject,moduleInstance){txObject=txInputFormatter(txObject);var from=moduleInstance.defaultAccount;if(txObject.from){from=txObject.from;}if(from){txObject.from=inputAddressFormatter(from);}return txObject;};var inputTransactionFormatter=function inputTransactionFormatter(txObject,moduleInstance){txObject=txInputFormatter(txObject);if(!isNumber(txObject.from)&&!isObject(txObject.from)){if(!txObject.from){txObject.from=moduleInstance.defaultAccount;}if(!txObject.from&&!isNumber(txObject.from)){throw new Error('The send transactions "from" field must be defined!');}txObject.from=inputAddressFormatter(txObject.from);}return txObject;};var inputSignFormatter=function inputSignFormatter(data){return Utils.isHexStrict(data)?data:Utils.utf8ToHex(data);};var outputTransactionFormatter=function outputTransactionFormatter(receipt){if(receipt.blockNumber!==null){receipt.blockNumber=Utils.hexToNumber(receipt.blockNumber);}if(receipt.transactionIndex!==null){receipt.transactionIndex=Utils.hexToNumber(receipt.transactionIndex);}if(receipt.gasPrice){receipt.gasPrice=outputBigNumberFormatter(receipt.gasPrice);}if(receipt.value){receipt.value=outputBigNumberFormatter(receipt.value);}receipt.nonce=Utils.hexToNumber(receipt.nonce);receipt.gas=Utils.hexToNumber(receipt.gas);if(receipt.to&&Utils.isAddress(receipt.to)){receipt.to=Utils.toChecksumAddress(receipt.to);}else{receipt.to=null;}if(receipt.from){receipt.from=Utils.toChecksumAddress(receipt.from);}return receipt;};var outputTransactionReceiptFormatter=function outputTransactionReceiptFormatter(receipt){if(receipt.blockNumber!==null){receipt.blockNumber=Utils.hexToNumber(receipt.blockNumber);}if(receipt.transactionIndex!==null){receipt.transactionIndex=Utils.hexToNumber(receipt.transactionIndex);}receipt.cumulativeGasUsed=Utils.hexToNumber(receipt.cumulativeGasUsed);receipt.gasUsed=Utils.hexToNumber(receipt.gasUsed);if(isArray(receipt.logs)){receipt.logs=receipt.logs.map(outputLogFormatter);}if(receipt.contractAddress){receipt.contractAddress=Utils.toChecksumAddress(receipt.contractAddress);}if(typeof receipt.status!=='undefined'&&receipt.status!==null){receipt.status=Boolean(parseInt(receipt.status));}else{receipt.status=true;}return receipt;};var outputBlockFormatter=function outputBlockFormatter(block){block.gasLimit=Utils.hexToNumber(block.gasLimit);block.gasUsed=Utils.hexToNumber(block.gasUsed);block.size=Utils.hexToNumber(block.size);var timestamp=Utils.toBN(block.timestamp);if(timestamp.bitLength()<=53){block.timestamp=timestamp.toNumber();}else{block.timestamp=timestamp.toString(10);}if(block.number!==null){block.number=Utils.hexToNumber(block.number);}if(block.difficulty){block.difficulty=outputBigNumberFormatter(block.difficulty);}if(block.totalDifficulty){block.totalDifficulty=outputBigNumberFormatter(block.totalDifficulty);}if(isArray(block.transactions)){block.transactions.forEach(function(item){if(!isString(item))return outputTransactionFormatter(item);});}if(block.miner){block.miner=Utils.toChecksumAddress(block.miner);}return block;};var inputLogFormatter=function inputLogFormatter(options){var toTopic=function toTopic(value){if(value===null||typeof value==='undefined'){return null;}value=String(value);if(value.indexOf('0x')===0){return value;}return Utils.fromUtf8(value);};if(options.fromBlock){options.fromBlock=inputBlockNumberFormatter(options.fromBlock);}if(options.toBlock){options.toBlock=inputBlockNumberFormatter(options.toBlock);}options.topics=options.topics||[];options.topics=options.topics.map(function(topic){return isArray(topic)?topic.map(toTopic):toTopic(topic);});toTopic=null;if(options.address){if(isArray(options.address)){options.address=options.address.map(function(addr){return inputAddressFormatter(addr);});}else{options.address=inputAddressFormatter(options.address);}}return options;};var outputLogFormatter=function outputLogFormatter(log){if(typeof log.blockHash==='string'&&typeof log.transactionHash==='string'&&typeof log.logIndex==='string'){var shaId=Utils.keccak256(log.blockHash.replace('0x','')+log.transactionHash.replace('0x','')+log.logIndex.replace('0x',''));shaId.replace('0x','').substr(0,8);log.id="log_".concat(shaId);}else if(!log.id){log.id=null;}if(log.blockNumber!==null){log.blockNumber=Utils.hexToNumber(log.blockNumber);}if(log.transactionIndex!==null){log.transactionIndex=Utils.hexToNumber(log.transactionIndex);}if(log.logIndex!==null){log.logIndex=Utils.hexToNumber(log.logIndex);}if(log.address){log.address=Utils.toChecksumAddress(log.address);}return log;};var inputPostFormatter=function inputPostFormatter(post){if(post.ttl){post.ttl=Utils.numberToHex(post.ttl);}if(post.workToProve){post.workToProve=Utils.numberToHex(post.workToProve);}if(post.priority){post.priority=Utils.numberToHex(post.priority);}if(!isArray(post.topics)){post.topics=post.topics?[post.topics]:[];}post.topics=post.topics.map(function(topic){return topic.indexOf('0x')===0?topic:Utils.fromUtf8(topic);});return post;};var outputPostFormatter=function outputPostFormatter(post){post.expiry=Utils.hexToNumber(post.expiry);post.sent=Utils.hexToNumber(post.sent);post.ttl=Utils.hexToNumber(post.ttl);post.workProved=Utils.hexToNumber(post.workProved);if(!post.topics){post.topics=[];}post.topics=post.topics.map(function(topic){return Utils.toUtf8(topic);});return post;};var inputAddressFormatter=function inputAddressFormatter(address){var iban=new web3EthIban.Iban(address);if(iban.isValid()&&iban.isDirect()){return iban.toAddress().toLowerCase();}if(Utils.isAddress(address)){return"0x".concat(address.toLowerCase().replace('0x',''));}throw new Error("Provided address \"".concat(address,"\" is invalid, the capitalization checksum test failed, or its an indrect IBAN address which can't be converted."));};var outputSyncingFormatter=function outputSyncingFormatter(result){result.startingBlock=Utils.hexToNumber(result.startingBlock);result.currentBlock=Utils.hexToNumber(result.currentBlock);result.highestBlock=Utils.hexToNumber(result.highestBlock);if(result.knownStates){result.knownStates=Utils.hexToNumber(result.knownStates);result.pulledStates=Utils.hexToNumber(result.pulledStates);}return result;};var Formatters=Object.freeze({outputBigNumberFormatter:outputBigNumberFormatter,isPredefinedBlockNumber:isPredefinedBlockNumber,inputDefaultBlockNumberFormatter:inputDefaultBlockNumberFormatter,inputBlockNumberFormatter:inputBlockNumberFormatter,txInputFormatter:txInputFormatter,inputCallFormatter:inputCallFormatter,inputTransactionFormatter:inputTransactionFormatter,inputSignFormatter:inputSignFormatter,outputTransactionFormatter:outputTransactionFormatter,outputTransactionReceiptFormatter:outputTransactionReceiptFormatter,outputBlockFormatter:outputBlockFormatter,inputLogFormatter:inputLogFormatter,outputLogFormatter:outputLogFormatter,inputPostFormatter:inputPostFormatter,outputPostFormatter:outputPostFormatter,inputAddressFormatter:inputAddressFormatter,outputSyncingFormatter:outputSyncingFormatter});exports.formatters=Formatters;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"lodash/isArray":453,"lodash/isNumber":461,"lodash/isObject":462,"lodash/isString":465,"web3-eth-iban":685,"web3-utils":700}],700:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof3=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof3["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/typeof'),require('lodash/isObject'),require('lodash/isString'),require('lodash/isArray'),require('lodash/isBoolean'),require('lodash/isNumber'),require('lodash/isNull'),require('number-to-bn'),require('utf8'),require('eth-lib/lib/hash'),require('bn.js'),require('ethjs-unit'),require('randombytes'),require('lodash/map')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/typeof','lodash/isObject','lodash/isString','lodash/isArray','lodash/isBoolean','lodash/isNumber','lodash/isNull','number-to-bn','utf8','eth-lib/lib/hash','bn.js','ethjs-unit','randombytes','lodash/map'],factory):(global=global||self,factory(global.Web3Utils={},global._typeof,global.isObject,global.isString,global.isArray,global.isBoolean,global.isNumber,global.isNull,global.numberToBN,global.utf8,global.Hash,global.BN,global.ethjsUnit,global.randombytes,global.map));})(void 0,function(exports,_typeof,isObject,isString,isArray,isBoolean,isNumber,isNull,numberToBN,utf8,Hash,BN,ethjsUnit,randombytes,map){'use strict';_typeof=_typeof&&_typeof.hasOwnProperty('default')?_typeof['default']:_typeof;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;isString=isString&&isString.hasOwnProperty('default')?isString['default']:isString;isArray=isArray&&isArray.hasOwnProperty('default')?isArray['default']:isArray;isBoolean=isBoolean&&isBoolean.hasOwnProperty('default')?isBoolean['default']:isBoolean;isNumber=isNumber&&isNumber.hasOwnProperty('default')?isNumber['default']:isNumber;isNull=isNull&&isNull.hasOwnProperty('default')?isNull['default']:isNull;numberToBN=numberToBN&&numberToBN.hasOwnProperty('default')?numberToBN['default']:numberToBN;utf8=utf8&&utf8.hasOwnProperty('default')?utf8['default']:utf8;Hash=Hash&&Hash.hasOwnProperty('default')?Hash['default']:Hash;BN=BN&&BN.hasOwnProperty('default')?BN['default']:BN;randombytes=randombytes&&randombytes.hasOwnProperty('default')?randombytes['default']:randombytes;map=map&&map.hasOwnProperty('default')?map['default']:map;var isBN=function isBN(object){return BN.isBN(object);};var isBigNumber=function isBigNumber(object){return object&&object.constructor&&object.constructor.name==='BigNumber';};var toBN=function toBN(number){try{return numberToBN(number);}catch(error){throw new Error("".concat(error," Given value: \"").concat(number,"\""));}};var toTwosComplement=function toTwosComplement(number){return"0x".concat(toBN(number).toTwos(256).toString(16,64));};var isAddress=function isAddress(address){var chainId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!/^(0x)?[0-9a-f]{40}$/i.test(address)){return false;}else if(/^(0x|0X)?[0-9a-f]{40}$/.test(address)||/^(0x|0X)?[0-9A-F]{40}$/.test(address)){return true;}else{return checkAddressChecksum(address,chainId);}};var stripHexPrefix=function stripHexPrefix(string){return string.startsWith('0x')||string.startsWith('0X')?string.slice(2):string;};var checkAddressChecksum=function checkAddressChecksum(address){var chainId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var stripAddress=stripHexPrefix(address).toLowerCase();var prefix=chainId!=null?chainId.toString()+'0x':'';var keccakHash=Hash.keccak256(prefix+stripAddress).toString('hex').replace(/^0x/i,'');for(var i=0;i<stripAddress.length;i++){var output=parseInt(keccakHash[i],16)>=8?stripAddress[i].toUpperCase():stripAddress[i];if(stripHexPrefix(address)[i]!==output){return false;}}return true;};var leftPad=function leftPad(string,chars,sign){var hasPrefix=/^0x/i.test(string)||typeof string==='number';string=string.toString(16).replace(/^0x/i,'');var padding=chars-string.length+1>=0?chars-string.length+1:0;return(hasPrefix?'0x':'')+new Array(padding).join(sign||'0')+string;};var rightPad=function rightPad(string,chars,sign){var hasPrefix=/^0x/i.test(string)||typeof string==='number';string=string.toString(16).replace(/^0x/i,'');var padding=chars-string.length+1>=0?chars-string.length+1:0;return(hasPrefix?'0x':'')+string+new Array(padding).join(sign||'0');};var utf8ToHex=function utf8ToHex(value){value=utf8.encode(value);var hex='';value=value.replace(/^(?:\u0000)*/,'');value=value.split('').reverse().join('');value=value.replace(/^(?:\u0000)*/,'');value=value.split('').reverse().join('');for(var i=0;i<value.length;i++){var code=value.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?"0".concat(n):n;}return"0x".concat(hex);};var hexToUtf8=function hexToUtf8(hex){if(!isHexStrict(hex))throw new Error("The parameter \"".concat(hex,"\" must be a valid HEX string."));var string='';var code=0;hex=hex.replace(/^0x/i,'');hex=hex.replace(/^(?:00)*/,'');hex=hex.split('').reverse().join('');hex=hex.replace(/^(?:00)*/,'');hex=hex.split('').reverse().join('');var l=hex.length;for(var i=0;i<l;i+=2){code=parseInt(hex.substr(i,2),16);string+=String.fromCharCode(code);}return utf8.decode(string);};var hexToNumber=function hexToNumber(value){if(!value){return value;}return toBN(value).toNumber();};var hexToNumberString=function hexToNumberString(value){if(!value)return value;if(isString(value)){if(!isHexStrict(value))throw new Error("Given value \"".concat(value,"\" is not a valid hex string."));}return toBN(value).toString(10);};var numberToHex=function numberToHex(value){if(isNull(value)||typeof value==='undefined'){return value;}if(!isFinite(value)&&!isHexStrict(value)){throw new Error("Given input \"".concat(value,"\" is not a number."));}var number=toBN(value);var result=number.toString(16);return number.lt(new BN(0))?"-0x".concat(result.substr(1)):"0x".concat(result);};var bytesToHex=function bytesToHex(bytes){var hex=[];for(var i=0;i<bytes.length;i++){hex.push((bytes[i]>>>4).toString(16));hex.push((bytes[i]&0xf).toString(16));}return"0x".concat(hex.join('').replace(/^0+/,''));};var hexToBytes=function hexToBytes(hex){hex=hex.toString(16);if(!isHexStrict(hex)){throw new Error("Given value \"".concat(hex,"\" is not a valid hex string."));}hex=hex.replace(/^0x/i,'');hex=hex.length%2?'0'+hex:hex;var bytes=[];for(var c=0;c<hex.length;c+=2){bytes.push(parseInt(hex.substr(c,2),16));}return bytes;};var toHex=function toHex(value,returnType){if(isAddress(value)){return returnType?'address':"0x".concat(value.toLowerCase().replace(/^0x/i,''));}if(isBoolean(value)){return returnType?'bool':value?'0x01':'0x00';}if(isObject(value)&&!isBigNumber(value)&&!isBN(value)){return returnType?'string':utf8ToHex(JSON.stringify(value));}if(isString(value)){if(value.indexOf('-0x')===0||value.indexOf('-0X')===0){return returnType?'int256':numberToHex(value);}else if(value.indexOf('0x')===0||value.indexOf('0X')===0){return returnType?'bytes':value;}else if(!isFinite(value)){return returnType?'string':utf8ToHex(value);}}return returnType?value<0?'int256':'uint256':numberToHex(value);};var isHexStrict=function isHexStrict(hex){return(isString(hex)||isNumber(hex))&&/^(-)?0x[0-9a-f]*$/i.test(hex);};var isHex=function isHex(hex){return(isString(hex)||isNumber(hex))&&/^(-0x|0x)?[0-9a-f]*$/i.test(hex);};var isBloom=function isBloom(bloom){if(!/^(0x)?[0-9a-f]{512}$/i.test(bloom)){return false;}else if(/^(0x)?[0-9a-f]{512}$/.test(bloom)||/^(0x)?[0-9A-F]{512}$/.test(bloom)){return true;}return false;};var isTopic=function isTopic(topic){if(!/^(0x)?[0-9a-f]{64}$/i.test(topic)){return false;}else if(/^(0x)?[0-9a-f]{64}$/.test(topic)||/^(0x)?[0-9A-F]{64}$/.test(topic)){return true;}return false;};var KECCAK256_NULL_S='0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';var keccak256=function keccak256(value){if(isHexStrict(value)&&/^0x/i.test(value.toString())){value=hexToBytes(value);}var returnValue=Hash.keccak256(value);if(returnValue===KECCAK256_NULL_S){return null;}else{return returnValue;}};keccak256._Hash=Hash;var getSignatureParameters=function getSignatureParameters(signature){if(!isHexStrict(signature)){throw new Error("Given value \"".concat(signature,"\" is not a valid hex string."));}var r=signature.slice(0,66);var s="0x".concat(signature.slice(66,130));var v="0x".concat(signature.slice(130,132));v=hexToNumber(v);if(![27,28].includes(v))v+=27;return{r:r,s:s,v:v};};var utils=Object.freeze({isBN:isBN,isBigNumber:isBigNumber,toBN:toBN,toTwosComplement:toTwosComplement,isAddress:isAddress,stripHexPrefix:stripHexPrefix,checkAddressChecksum:checkAddressChecksum,leftPad:leftPad,rightPad:rightPad,utf8ToHex:utf8ToHex,hexToUtf8:hexToUtf8,hexToNumber:hexToNumber,hexToNumberString:hexToNumberString,numberToHex:numberToHex,bytesToHex:bytesToHex,hexToBytes:hexToBytes,toHex:toHex,isHexStrict:isHexStrict,isHex:isHex,isBloom:isBloom,isTopic:isTopic,keccak256:keccak256,getSignatureParameters:getSignatureParameters});var _elementaryName=function _elementaryName(name){if(name.startsWith('int[')){return"int256".concat(name.slice(3));}if(name==='int'){return'int256';}if(name.startsWith('uint[')){return"uint256".concat(name.slice(4));}if(name==='uint'){return'uint256';}if(name.startsWith('fixed[')){return"fixed128x128".concat(name.slice(5));}if(name==='fixed'){return'fixed128x128';}if(name.startsWith('ufixed[')){return"ufixed128x128".concat(name.slice(6));}if(name==='ufixed'){return'ufixed128x128';}return name;};var _parseTypeN=function _parseTypeN(type){var typesize=/^\D+(\d+).*$/.exec(type);return typesize?parseInt(typesize[1],10):null;};var _parseTypeNArray=function _parseTypeNArray(type){var arraySize=/^\D+\d*\[(\d+)\]$/.exec(type);return arraySize?parseInt(arraySize[1],10):null;};var _parseNumber=function _parseNumber(argument){var type=_typeof(argument);if(type==='string'){if(isHexStrict(argument)){return new BN(argument.replace(/0x/i,''),16);}else{return new BN(argument,10);}}else if(type==='number'){return new BN(argument);}else if(isBigNumber(argument)){return new BN(argument.toString(10));}else if(isBN(argument)){return argument;}else{throw new Error("".concat(argument," is not a number"));}};var _solidityPack=function _solidityPack(type,value,arraySize){var size,number;type=_elementaryName(type);if(type==='bytes'){if(value.replace(/^0x/i,'').length%2!==0){throw new Error("Invalid bytes characters ".concat(value.length));}return value;}else if(type==='string'){return utf8ToHex(value);}else if(type==='bool'){return value?'01':'00';}else if(type.startsWith('address')){if(arraySize){size=64;}else{size=40;}if(!isAddress(value)){throw new Error("".concat(value," is not a valid address, or the checksum is invalid."));}return leftPad(value.toLowerCase(),size);}size=_parseTypeN(type);if(type.startsWith('bytes')){if(!size){throw new Error('bytes[] not yet supported in solidity');}if(arraySize){size=32;}if(size<1||size>32||size<value.replace(/^0x/i,'').length/2){throw new Error("Invalid bytes".concat(size," for ").concat(value));}return rightPad(value,size*2);}else if(type.startsWith('uint')){if(size%8||size<8||size>256){throw new Error("Invalid uint".concat(size," size"));}number=_parseNumber(value);if(number.bitLength()>size){throw new Error("Supplied uint exceeds width: ".concat(size," vs ").concat(number.bitLength()));}if(number.lt(new BN(0))){throw new Error("Supplied uint ".concat(number.toString()," is negative"));}return size?leftPad(number.toString('hex'),size/8*2):number;}else if(type.startsWith('int')){if(size%8||size<8||size>256){throw new Error("Invalid int".concat(size," size"));}number=_parseNumber(value);if(number.bitLength()>size){throw new Error("Supplied int exceeds width: ".concat(size," vs ").concat(number.bitLength()));}if(number.lt(new BN(0))){return number.toTwos(size).toString('hex');}else{return size?leftPad(number.toString('hex'),size/8*2):number;}}else{throw new Error("Unsupported or invalid type: ".concat(type));}};var _processSoliditySha3Arguments=function _processSoliditySha3Arguments(argument){if(isArray(argument)){throw new Error('Autodetection of array types is not supported.');}var type;var value='';var hexArgument,arraySize;if(isObject(argument)&&(argument.hasOwnProperty('v')||argument.hasOwnProperty('t')||argument.hasOwnProperty('value')||argument.hasOwnProperty('type'))){type=argument.hasOwnProperty('t')?argument.t:argument.type;value=argument.hasOwnProperty('v')?argument.v:argument.value;}else{type=toHex(argument,true);value=toHex(argument);if(!type.startsWith('int')&&!type.startsWith('uint')){type='bytes';}}if((type.startsWith('int')||type.startsWith('uint'))&&typeof value==='string'&&!/^(-)?0x/i.test(value)){value=new BN(value);}if(isArray(value)){arraySize=_parseTypeNArray(type);if(arraySize&&value.length!==arraySize){throw new Error("".concat(type," is not matching the given array ").concat(JSON.stringify(value)));}else{arraySize=value.length;}}if(isArray(value)){hexArgument=value.map(function(value_){return _solidityPack(type,value_,arraySize).toString('hex').replace('0x','');});return hexArgument.join('');}else{hexArgument=_solidityPack(type,value,arraySize);return hexArgument.toString('hex').replace('0x','');}};var soliditySha3=function soliditySha3(){var arguments_=Array.prototype.slice.call(arguments);var hexArguments=map(arguments_,_processSoliditySha3Arguments);return keccak256("0x".concat(hexArguments.join('')));};var randomHex=function randomHex(size){return'0x'+randombytes(size).toString('hex');};var jsonInterfaceMethodToString=function jsonInterfaceMethodToString(json){if(isObject(json)&&json.name&&json.name.includes('(')){return json.name;}return"".concat(json.name,"(").concat(_flattenTypes(false,json.inputs).join(','),")");};var _flattenTypes=function _flattenTypes(includeTuple,puts){var types=[];puts.forEach(function(param){if(_typeof(param.components)==='object'){if(param.type.substring(0,5)!=='tuple'){throw new Error('components found but type is not tuple; report on GitHub');}var suffix='';var arrayBracket=param.type.indexOf('[');if(arrayBracket>=0){suffix=param.type.substring(arrayBracket);}var result=_flattenTypes(includeTuple,param.components);if(isArray(result)&&includeTuple){types.push("tuple(".concat(result.join(','),")").concat(suffix));}else if(!includeTuple){types.push("(".concat(result.join(','),")").concat(suffix));}else{types.push("(".concat(result,")"));}}else{types.push(param.type);}});return types;};var hexToAscii=function hexToAscii(hex){if(!isHexStrict(hex))throw new Error('The parameter must be a valid HEX string.');var value='';var i=0;var l=hex.length;if(hex.substring(0,2)==='0x'){i=2;}for(;i<l;i+=2){var code=parseInt(hex.substr(i,2),16);value+=String.fromCharCode(code);}return value;};var asciiToHex=function asciiToHex(value){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:32;var hex='';for(var i=0;i<value.length;i++){var code=value.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?"0".concat(n):n;}return'0x'+rightPad(hex,length*2);};var getUnitValue=function getUnitValue(unit){unit=unit?unit.toLowerCase():'ether';if(!ethjsUnit.unitMap[unit]){throw new Error("This unit \"".concat(unit,"\" doesn't exist, please use the one of the following units").concat(JSON.stringify(ethjsUnit.unitMap,null,2)));}return unit;};var fromWei=function fromWei(number,unit){unit=getUnitValue(unit);if(!isBN(number)&&!isString(number)){throw new Error('Please pass numbers as strings or BN objects to avoid precision errors.');}return isBN(number)?ethjsUnit.fromWei(number,unit):ethjsUnit.fromWei(number,unit).toString(10);};var toWei=function toWei(number,unit){unit=getUnitValue(unit);if(!isBN(number)&&!isString(number)){throw new Error('Please pass numbers as strings or BN objects to avoid precision errors.');}return isBN(number)?ethjsUnit.toWei(number,unit):ethjsUnit.toWei(number,unit).toString(10);};var toChecksumAddress=function toChecksumAddress(address){var chainId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof address!=='string'){return'';}if(!/^(0x)?[0-9a-f]{40}$/i.test(address))throw new Error("Given address \"".concat(address,"\" is not a valid Ethereum address."));var stripAddress=stripHexPrefix$1(address).toLowerCase();var prefix=chainId!=null?chainId.toString()+'0x':'';var keccakHash=Hash.keccak256(prefix+stripAddress).toString('hex').replace(/^0x/i,'');var checksumAddress='0x';for(var i=0;i<stripAddress.length;i++){checksumAddress+=parseInt(keccakHash[i],16)>=8?stripAddress[i].toUpperCase():stripAddress[i];}return checksumAddress;};var keccak256$1=keccak256;var sha3=keccak256;var toDecimal=hexToNumber;var hexToNumber$1=hexToNumber;var fromDecimal=numberToHex;var numberToHex$1=numberToHex;var hexToUtf8$1=hexToUtf8;var hexToString=hexToUtf8;var toUtf8=hexToUtf8;var stringToHex=utf8ToHex;var fromUtf8=utf8ToHex;var utf8ToHex$1=utf8ToHex;var toAscii=hexToAscii;var fromAscii=asciiToHex;var padLeft=leftPad;var padRight=rightPad;var getSignatureParameters$1=getSignatureParameters;var isAddress$1=isAddress;var isBN$1=isBN;var checkAddressChecksum$1=checkAddressChecksum;var toBN$1=toBN;var toHex$1=toHex;var hexToNumberString$1=hexToNumberString;var toTwosComplement$1=toTwosComplement;var isHex$1=isHex;var isHexStrict$1=isHexStrict;var isBloom$1=isBloom;var isTopic$1=isTopic;var bytesToHex$1=bytesToHex;var hexToBytes$1=hexToBytes;var stripHexPrefix$1=stripHexPrefix;var isBigNumber$1=isBigNumber;exports.BN=BN;exports.asciiToHex=asciiToHex;exports.bytesToHex=bytesToHex$1;exports.checkAddressChecksum=checkAddressChecksum$1;exports.fromAscii=fromAscii;exports.fromDecimal=fromDecimal;exports.fromUtf8=fromUtf8;exports.fromWei=fromWei;exports.getSignatureParameters=getSignatureParameters$1;exports.getUnitValue=getUnitValue;exports.hexToAscii=hexToAscii;exports.hexToBytes=hexToBytes$1;exports.hexToNumber=hexToNumber$1;exports.hexToNumberString=hexToNumberString$1;exports.hexToString=hexToString;exports.hexToUtf8=hexToUtf8$1;exports.isAddress=isAddress$1;exports.isBN=isBN$1;exports.isBigNumber=isBigNumber$1;exports.isBloom=isBloom$1;exports.isHex=isHex$1;exports.isHexStrict=isHexStrict$1;exports.isTopic=isTopic$1;exports.jsonInterfaceMethodToString=jsonInterfaceMethodToString;exports.keccak256=keccak256$1;exports.numberToHex=numberToHex$1;exports.padLeft=padLeft;exports.padRight=padRight;exports.randomHex=randomHex;exports.sha3=sha3;exports.soliditySha3=soliditySha3;exports.stringToHex=stringToHex;exports.stripHexPrefix=stripHexPrefix$1;exports.toAscii=toAscii;exports.toBN=toBN$1;exports.toChecksumAddress=toChecksumAddress;exports.toDecimal=toDecimal;exports.toHex=toHex$1;exports.toTwosComplement=toTwosComplement$1;exports.toUtf8=toUtf8;exports.toWei=toWei;exports.utf8ToHex=utf8ToHex$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132,"eth-lib/lib/hash":244,"ethjs-unit":286,"lodash/isArray":453,"lodash/isBoolean":455,"lodash/isNull":460,"lodash/isNumber":461,"lodash/isObject":462,"lodash/isString":465,"lodash/map":472,"number-to-bn":498,"randombytes":532,"utf8":663}],685:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('web3-utils'),require('bn.js')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','web3-utils','bn.js'],factory):(global=global||self,factory(global.Web3EthIban={},global._classCallCheck,global._createClass,global.Utils,global.BigNumber));})(void 0,function(exports,_classCallCheck,_createClass,Utils,BigNumber){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;BigNumber=BigNumber&&BigNumber.hasOwnProperty('default')?BigNumber['default']:BigNumber;var leftPad=function leftPad(string,bytes){var result=string;while(result.length<bytes*2){result="0".concat(result);}return result;};var iso13616Prepare=function iso13616Prepare(iban){var A='A'.charCodeAt(0);var Z='Z'.charCodeAt(0);iban=iban.toUpperCase();iban=iban.substr(4)+iban.substr(0,4);return iban.split('').map(function(n){var code=n.charCodeAt(0);if(code>=A&&code<=Z){return code-A+10;}else{return n;}}).join('');};var module9710=function module9710(iban){var remainder=iban;var block;while(remainder.length>2){block=remainder.slice(0,9);remainder=parseInt(block,10)%97+remainder.slice(block.length);}return parseInt(remainder,10)%97;};var Iban=function(){function Iban(iban){_classCallCheck(this,Iban);this._iban=iban;}_createClass(Iban,[{key:"isValid",value:function isValid(){return /^XE\d{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(this._iban)&&module9710(iso13616Prepare(this._iban))===1;}},{key:"isDirect",value:function isDirect(){return this._iban.length===34||this._iban.length===35;}},{key:"isIndirect",value:function isIndirect(){return this._iban.length===20;}},{key:"checksum",value:function checksum(){return this._iban.substr(2,2);}},{key:"institution",value:function institution(){return this.isIndirect()?this._iban.substr(7,4):'';}},{key:"client",value:function client(){return this.isIndirect()?this._iban.substr(11):'';}},{key:"toAddress",value:function toAddress(){if(this.isDirect()){var base36=this._iban.substr(4);var asBn=new BigNumber(base36,36);return Utils.toChecksumAddress(asBn.toString(16,20));}return'';}},{key:"toString",value:function toString(){return this._iban;}}],[{key:"toAddress",value:function toAddress(iban){iban=new Iban(iban);if(!iban.isDirect()){throw new Error("IBAN is indirect and can't be converted");}return iban.toAddress();}},{key:"toIban",value:function toIban(address){return Iban.fromAddress(address).toString();}},{key:"fromAddress",value:function fromAddress(address){if(!Utils.isAddress(address)){throw new Error("Provided address is not a valid address: ".concat(address));}address=address.replace('0x','').replace('0X','');var asBn=new BigNumber(address,16);var base36=asBn.toString(36);var padded=leftPad(base36,15);return Iban.fromBban(padded.toUpperCase());}},{key:"fromBban",value:function fromBban(bban){var countryCode='XE';var remainder=module9710(iso13616Prepare("".concat(countryCode,"00").concat(bban)));var checkDigit="0".concat(98-remainder).slice(-2);return new Iban(countryCode+checkDigit+bban);}},{key:"createIndirect",value:function createIndirect(options){return Iban.fromBban("ETH".concat(options.institution).concat(options.identifier));}},{key:"isValid",value:function isValid(iban){var i=new Iban(iban);return i.isValid();}}]);return Iban;}();exports.Iban=Iban;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"bn.js":132,"web3-utils":700}],669:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('eventemitter3'),require('web3-core-subscriptions'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('lodash/isFunction'),require('@babel/runtime/helpers/toConsumableArray'),require('@babel/runtime/regenerator'),require('@babel/runtime/helpers/asyncToGenerator'),require('lodash/isString'),require('lodash/cloneDeep'),require('rxjs'),require('@babel/runtime/helpers/get')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','eventemitter3','web3-core-subscriptions','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','lodash/isFunction','@babel/runtime/helpers/toConsumableArray','@babel/runtime/regenerator','@babel/runtime/helpers/asyncToGenerator','lodash/isString','lodash/cloneDeep','rxjs','@babel/runtime/helpers/get'],factory):(global=global||self,factory(global.Web3CoreMethod={},global._classCallCheck,global._createClass,global.EventEmitter,global.web3CoreSubscriptions,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.isFunction,global._toConsumableArray,global._regeneratorRuntime,global._asyncToGenerator,global.isString,global.cloneDeep,global.rxjs,global._get));})(void 0,function(exports,_classCallCheck,_createClass,EventEmitter,web3CoreSubscriptions,_possibleConstructorReturn,_getPrototypeOf,_inherits,isFunction,_toConsumableArray,_regeneratorRuntime,_asyncToGenerator,isString,cloneDeep,rxjs,_get){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;EventEmitter=EventEmitter&&EventEmitter.hasOwnProperty('default')?EventEmitter['default']:EventEmitter;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;_toConsumableArray=_toConsumableArray&&_toConsumableArray.hasOwnProperty('default')?_toConsumableArray['default']:_toConsumableArray;_regeneratorRuntime=_regeneratorRuntime&&_regeneratorRuntime.hasOwnProperty('default')?_regeneratorRuntime['default']:_regeneratorRuntime;_asyncToGenerator=_asyncToGenerator&&_asyncToGenerator.hasOwnProperty('default')?_asyncToGenerator['default']:_asyncToGenerator;isString=isString&&isString.hasOwnProperty('default')?isString['default']:isString;cloneDeep=cloneDeep&&cloneDeep.hasOwnProperty('default')?cloneDeep['default']:cloneDeep;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;var PromiEvent=function(){function PromiEvent(){var _this=this;_classCallCheck(this,PromiEvent);this.promise=new Promise(function(resolve,reject){_this.resolve=resolve;_this.reject=reject;});this.eventEmitter=new EventEmitter();return new Proxy(this,{get:this.proxyHandler});}_createClass(PromiEvent,[{key:"proxyHandler",value:function proxyHandler(target,name){if(name==='resolve'||name==='reject'){return target[name];}if(name==='then'){return target.promise.then.bind(target.promise);}if(name==='catch'){return target.promise["catch"].bind(target.promise);}if(target.eventEmitter[name]){return target.eventEmitter[name];}}}]);return PromiEvent;}();var AbstractMethod=function(){function AbstractMethod(rpcMethod,parametersAmount,utils,formatters,moduleInstance){_classCallCheck(this,AbstractMethod);this.utils=utils;this.formatters=formatters;this.moduleInstance=moduleInstance;this._arguments={parameters:[]};this._rpcMethod=rpcMethod;this._parametersAmount=parametersAmount;}_createClass(AbstractMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){}},{key:"afterExecution",value:function afterExecution(response){return response;}},{key:"execute",value:function(){var _execute=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var error,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.beforeExecution(this.moduleInstance);if(!(this.parameters.length!==this.parametersAmount)){_context.next=7;break;}error=new Error("Invalid Arguments length: expected: ".concat(this.parametersAmount,", given: ").concat(this.parameters.length));if(!this.callback){_context.next=6;break;}this.callback(error,null);return _context.abrupt("return");case 6:throw error;case 7:_context.prev=7;_context.next=10;return this.moduleInstance.currentProvider.send(this.rpcMethod,this.parameters);case 10:response=_context.sent;if(response){response=this.afterExecution(response);}if(!this.callback){_context.next=15;break;}this.callback(false,response);return _context.abrupt("return");case 15:return _context.abrupt("return",response);case 18:_context.prev=18;_context.t0=_context["catch"](7);if(!this.callback){_context.next=23;break;}this.callback(_context.t0,null);return _context.abrupt("return");case 23:throw _context.t0;case 24:case"end":return _context.stop();}}},_callee,this,[[7,18]]);}));function execute(){return _execute.apply(this,arguments);}return execute;}()},{key:"setArguments",value:function setArguments(methodArguments){var parameters=cloneDeep(_toConsumableArray(methodArguments));var callback=null;if(parameters.length>this.parametersAmount){if(!isFunction(parameters[parameters.length-1])){throw new TypeError("The latest parameter should be a function otherwise it can't be used as callback");}callback=parameters.pop();}this._arguments={callback:callback,parameters:parameters};}},{key:"getArguments",value:function getArguments(){return this._arguments;}},{key:"isHash",value:function isHash(parameter){return isString(parameter)&&parameter.startsWith('0x');}},{key:"rpcMethod",set:function set(value){this._rpcMethod=value;},get:function get(){return this._rpcMethod;}},{key:"parametersAmount",set:function set(value){this._parametersAmount=value;},get:function get(){return this._parametersAmount;}},{key:"parameters",get:function get(){return this._arguments.parameters;},set:function set(value){this._arguments.parameters=value;}},{key:"callback",get:function get(){return this._arguments.callback;},set:function set(value){this._arguments.callback=value;}}]);return AbstractMethod;}();var AbstractGetBlockMethod=function(_AbstractMethod){_inherits(AbstractGetBlockMethod,_AbstractMethod);function AbstractGetBlockMethod(rpcMethod,utils,formatters,moduleInstance){_classCallCheck(this,AbstractGetBlockMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AbstractGetBlockMethod).call(this,rpcMethod,2,utils,formatters,moduleInstance));}_createClass(AbstractGetBlockMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputBlockNumberFormatter(this.parameters[0]);if(isFunction(this.parameters[1])){this.callback=this.parameters[1];this.parameters[1]=false;}else{this.parameters[1]=!!this.parameters[1];}}},{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputBlockFormatter(response);}}]);return AbstractGetBlockMethod;}(AbstractMethod);var GetBlockByNumberMethod=function(_AbstractGetBlockMeth){_inherits(GetBlockByNumberMethod,_AbstractGetBlockMeth);function GetBlockByNumberMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockByNumberMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockByNumberMethod).call(this,'eth_getBlockByNumber',utils,formatters,moduleInstance));}return GetBlockByNumberMethod;}(AbstractGetBlockMethod);var GetTransactionReceiptMethod=function(_AbstractMethod){_inherits(GetTransactionReceiptMethod,_AbstractMethod);function GetTransactionReceiptMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetTransactionReceiptMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetTransactionReceiptMethod).call(this,'eth_getTransactionReceipt',1,utils,formatters,moduleInstance));}_createClass(GetTransactionReceiptMethod,[{key:"afterExecution",value:function afterExecution(response){if(response!==null){return this.formatters.outputTransactionReceiptFormatter(response);}return response;}}]);return GetTransactionReceiptMethod;}(AbstractMethod);var TransactionObserver=function(){function TransactionObserver(provider,timeout,blockConfirmations,getTransactionReceiptMethod,getBlockByNumberMethod,newHeadsSubscription){_classCallCheck(this,TransactionObserver);this.provider=provider;this.timeout=timeout;this.blockConfirmations=blockConfirmations;this.getTransactionReceiptMethod=getTransactionReceiptMethod;this.getBlockByNumberMethod=getBlockByNumberMethod;this.newHeadsSubscription=newHeadsSubscription;this.blockNumbers=[];this.lastBlock=false;this.confirmations=0;this.confirmationChecks=0;this.interval=false;}_createClass(TransactionObserver,[{key:"observe",value:function observe(transactionHash){var _this=this;return rxjs.Observable.create(function(observer){if(_this.provider.supportsSubscriptions()){_this.startSocketObserver(transactionHash,observer);}else{_this.startHttpObserver(transactionHash,observer);}});}},{key:"startSocketObserver",value:function startSocketObserver(transactionHash,observer){var _this2=this;this.newHeadsSubscription.subscribe(function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(error,newHead){var receipt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!observer.closed){_context.next=5;break;}_context.next=4;return _this2.newHeadsSubscription.unsubscribe();case 4:return _context.abrupt("return");case 5:if(!error){_context.next=7;break;}throw error;case 7:_this2.getTransactionReceiptMethod.parameters=[transactionHash];_context.next=10;return _this2.getTransactionReceiptMethod.execute();case 10:receipt=_context.sent;if(_this2.blockNumbers.includes(newHead.number)){_context.next=25;break;}if(!receipt){_context.next=19;break;}_this2.confirmations++;_this2.emitNext(receipt,observer);if(!_this2.isConfirmed()){_context.next=19;break;}_context.next=18;return _this2.newHeadsSubscription.unsubscribe();case 18:observer.complete();case 19:_this2.blockNumbers.push(newHead.number);_this2.confirmationChecks++;if(!_this2.isTimeoutTimeExceeded()){_context.next=25;break;}_context.next=24;return _this2.newHeadsSubscription.unsubscribe();case 24:_this2.emitError(new Error('Timeout exceeded during the transaction confirmation process. Be aware the transaction could still get confirmed!'),receipt,observer);case 25:_context.next=30;break;case 27:_context.prev=27;_context.t0=_context["catch"](0);_this2.emitError(_context.t0,false,observer);case 30:case"end":return _context.stop();}}},_callee,null,[[0,27]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());}},{key:"startHttpObserver",value:function startHttpObserver(transactionHash,observer){var _this3=this;var interval=setInterval(_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var receipt,block;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!observer.closed){_context2.next=4;break;}clearInterval(interval);return _context2.abrupt("return");case 4:_this3.getTransactionReceiptMethod.parameters=[transactionHash];_context2.next=7;return _this3.getTransactionReceiptMethod.execute();case 7:receipt=_context2.sent;if(!(receipt&&receipt.blockNumber)){_context2.next=22;break;}if(!_this3.lastBlock){_context2.next=16;break;}_context2.next=12;return _this3.getBlockByNumber(_this3.lastBlock.number+1);case 12:block=_context2.sent;if(block&&_this3.isValidConfirmation(block)){_this3.lastBlock=block;_this3.confirmations++;_this3.emitNext(receipt,observer);}_context2.next=21;break;case 16:_context2.next=18;return _this3.getBlockByNumber(receipt.blockNumber);case 18:_this3.lastBlock=_context2.sent;_this3.confirmations++;_this3.emitNext(receipt,observer);case 21:if(_this3.isConfirmed()){observer.complete();clearInterval(interval);}case 22:_this3.confirmationChecks++;if(_this3.isTimeoutTimeExceeded()){clearInterval(interval);_this3.emitError(new Error('Timeout exceeded during the transaction confirmation process. Be aware the transaction could still get confirmed!'),receipt,observer);}_context2.next=30;break;case 26:_context2.prev=26;_context2.t0=_context2["catch"](0);clearInterval(interval);_this3.emitError(_context2.t0,false,observer);case 30:case"end":return _context2.stop();}}},_callee2,null,[[0,26]]);})),1000);}},{key:"emitNext",value:function emitNext(receipt,observer){observer.next({receipt:receipt,confirmations:this.confirmations});}},{key:"emitError",value:function emitError(error,receipt,observer){observer.error({error:error,receipt:receipt,confirmations:this.confirmations,confirmationChecks:this.confirmationChecks});}},{key:"getBlockByNumber",value:function getBlockByNumber(blockNumber){this.getBlockByNumberMethod.parameters=[blockNumber];return this.getBlockByNumberMethod.execute();}},{key:"isConfirmed",value:function isConfirmed(){return this.confirmations===this.blockConfirmations;}},{key:"isValidConfirmation",value:function isValidConfirmation(block){return this.lastBlock.hash===block.parentHash&&this.lastBlock.number!==block.number;}},{key:"isTimeoutTimeExceeded",value:function isTimeoutTimeExceeded(){return this.confirmationChecks===this.timeout;}}]);return TransactionObserver;}();var GetTransactionCountMethod=function(_AbstractMethod){_inherits(GetTransactionCountMethod,_AbstractMethod);function GetTransactionCountMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetTransactionCountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetTransactionCountMethod).call(this,'eth_getTransactionCount',2,utils,formatters,moduleInstance));}_createClass(GetTransactionCountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);if(isFunction(this.parameters[1])){this.callback=this.parameters[1];this.parameters[1]=moduleInstance.defaultBlock;}this.parameters[1]=this.formatters.inputDefaultBlockNumberFormatter(this.parameters[1],moduleInstance);}},{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return GetTransactionCountMethod;}(AbstractMethod);var ChainIdMethod=function(_AbstractMethod){_inherits(ChainIdMethod,_AbstractMethod);function ChainIdMethod(utils,formatters,moduleInstance){_classCallCheck(this,ChainIdMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ChainIdMethod).call(this,'eth_chainId',0,utils,formatters,moduleInstance));}_createClass(ChainIdMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return ChainIdMethod;}(AbstractMethod);var AbstractMethodFactory=function(){function AbstractMethodFactory(utils,formatters){_classCallCheck(this,AbstractMethodFactory);this.utils=utils;this.formatters=formatters;this._methods=null;}_createClass(AbstractMethodFactory,[{key:"hasMethod",value:function hasMethod(name){return typeof this.methods[name]!=='undefined';}},{key:"createMethod",value:function createMethod(name,moduleInstance){var method=this.methods[name];if(method.Type==='observed-transaction-method'){return new method(this.utils,this.formatters,moduleInstance,this.createTransactionObserver(moduleInstance));}if(method.Type==='eth-send-transaction-method'){return new method(this.utils,this.formatters,moduleInstance,this.createTransactionObserver(moduleInstance),new ChainIdMethod(this.utils,this.formatters,moduleInstance),new GetTransactionCountMethod(this.utils,this.formatters,moduleInstance));}return new method(this.utils,this.formatters,moduleInstance);}},{key:"getTimeout",value:function getTimeout(moduleInstance){var timeout=moduleInstance.transactionBlockTimeout;if(!moduleInstance.currentProvider.supportsSubscriptions()){timeout=moduleInstance.transactionPollingTimeout;}return timeout;}},{key:"createTransactionObserver",value:function createTransactionObserver(moduleInstance){return new TransactionObserver(moduleInstance.currentProvider,this.getTimeout(moduleInstance),moduleInstance.transactionConfirmationBlocks,new GetTransactionReceiptMethod(this.utils,this.formatters,moduleInstance),new GetBlockByNumberMethod(this.utils,this.formatters,moduleInstance),new web3CoreSubscriptions.NewHeadsSubscription(this.utils,this.formatters,moduleInstance));}},{key:"methods",get:function get(){if(this._methods){return this._methods;}throw new Error('No methods defined for MethodFactory!');},set:function set(value){this._methods=value;}}]);return AbstractMethodFactory;}();var MethodProxy=function MethodProxy(target,methodFactory){_classCallCheck(this,MethodProxy);return new Proxy(target,{get:function get(target,name){if(methodFactory.hasMethod(name)){var RpcMethod=function RpcMethod(){method.setArguments(arguments);return method.execute();};if(typeof target[name]!=='undefined'){throw new TypeError("Duplicated method ".concat(name,". This method is defined as RPC call and as Object method."));}var method=methodFactory.createMethod(name,target);RpcMethod.method=method;RpcMethod.request=function(){method.setArguments(arguments);return method;};return RpcMethod;}return Reflect.get(target,name);}});};var GetProtocolVersionMethod=function(_AbstractMethod){_inherits(GetProtocolVersionMethod,_AbstractMethod);function GetProtocolVersionMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetProtocolVersionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetProtocolVersionMethod).call(this,'eth_protocolVersion',0,utils,formatters,moduleInstance));}_createClass(GetProtocolVersionMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return GetProtocolVersionMethod;}(AbstractMethod);var VersionMethod=function(_AbstractMethod){_inherits(VersionMethod,_AbstractMethod);function VersionMethod(utils,formatters,moduleInstance){_classCallCheck(this,VersionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(VersionMethod).call(this,'net_version',0,utils,formatters,moduleInstance));}_createClass(VersionMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return VersionMethod;}(AbstractMethod);var ListeningMethod=function(_AbstractMethod){_inherits(ListeningMethod,_AbstractMethod);function ListeningMethod(utils,formatters,moduleInstance){_classCallCheck(this,ListeningMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ListeningMethod).call(this,'net_listening',0,utils,formatters,moduleInstance));}return ListeningMethod;}(AbstractMethod);var PeerCountMethod=function(_AbstractMethod){_inherits(PeerCountMethod,_AbstractMethod);function PeerCountMethod(utils,formatters,moduleInstance){_classCallCheck(this,PeerCountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(PeerCountMethod).call(this,'net_peerCount',0,utils,formatters,moduleInstance));}_createClass(PeerCountMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return PeerCountMethod;}(AbstractMethod);var GetNodeInfoMethod=function(_AbstractMethod){_inherits(GetNodeInfoMethod,_AbstractMethod);function GetNodeInfoMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetNodeInfoMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetNodeInfoMethod).call(this,'web3_clientVersion',0,utils,formatters,moduleInstance));}return GetNodeInfoMethod;}(AbstractMethod);var GetCoinbaseMethod=function(_AbstractMethod){_inherits(GetCoinbaseMethod,_AbstractMethod);function GetCoinbaseMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetCoinbaseMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetCoinbaseMethod).call(this,'eth_coinbase',0,utils,formatters,moduleInstance));}return GetCoinbaseMethod;}(AbstractMethod);var IsMiningMethod=function(_AbstractMethod){_inherits(IsMiningMethod,_AbstractMethod);function IsMiningMethod(utils,formatters,moduleInstance){_classCallCheck(this,IsMiningMethod);return _possibleConstructorReturn(this,_getPrototypeOf(IsMiningMethod).call(this,'eth_mining',0,utils,formatters,moduleInstance));}return IsMiningMethod;}(AbstractMethod);var GetHashrateMethod=function(_AbstractMethod){_inherits(GetHashrateMethod,_AbstractMethod);function GetHashrateMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetHashrateMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetHashrateMethod).call(this,'eth_hashrate',0,utils,formatters,moduleInstance));}_createClass(GetHashrateMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return GetHashrateMethod;}(AbstractMethod);var IsSyncingMethod=function(_AbstractMethod){_inherits(IsSyncingMethod,_AbstractMethod);function IsSyncingMethod(utils,formatters,moduleInstance){_classCallCheck(this,IsSyncingMethod);return _possibleConstructorReturn(this,_getPrototypeOf(IsSyncingMethod).call(this,'eth_syncing',0,utils,formatters,moduleInstance));}_createClass(IsSyncingMethod,[{key:"afterExecution",value:function afterExecution(response){if(typeof response!=='boolean'){return this.formatters.outputSyncingFormatter(response);}return response;}}]);return IsSyncingMethod;}(AbstractMethod);var GetGasPriceMethod=function(_AbstractMethod){_inherits(GetGasPriceMethod,_AbstractMethod);function GetGasPriceMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetGasPriceMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetGasPriceMethod).call(this,'eth_gasPrice',0,utils,formatters,moduleInstance));}_createClass(GetGasPriceMethod,[{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputBigNumberFormatter(response);}}]);return GetGasPriceMethod;}(AbstractMethod);var SubmitWorkMethod=function(_AbstractMethod){_inherits(SubmitWorkMethod,_AbstractMethod);function SubmitWorkMethod(utils,formatters,moduleInstance){_classCallCheck(this,SubmitWorkMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SubmitWorkMethod).call(this,'eth_submitWork',3,utils,formatters,moduleInstance));}return SubmitWorkMethod;}(AbstractMethod);var GetWorkMethod=function(_AbstractMethod){_inherits(GetWorkMethod,_AbstractMethod);function GetWorkMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetWorkMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetWorkMethod).call(this,'eth_getWork',0,utils,formatters,moduleInstance));}return GetWorkMethod;}(AbstractMethod);var GetProofMethod=function(_AbstractMethod){_inherits(GetProofMethod,_AbstractMethod);function GetProofMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetProofMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetProofMethod).call(this,'eth_getProof',3,utils,formatters,moduleInstance));}_createClass(GetProofMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);this.parameters[2]=this.formatters.inputDefaultBlockNumberFormatter(this.parameters[2],moduleInstance);}},{key:"afterExecution",value:function afterExecution(response){response.nonce=this.utils.toBN(response.nonce).toString(10);response.balance=this.utils.toBN(response.balance).toString(10);for(var i=0;i<response.storageProof.length;i++){response.storageProof[i].value=this.utils.toBN(response.storageProof[i].value).toString(10);}return response;}}]);return GetProofMethod;}(AbstractMethod);var GetAccountsMethod=function(_AbstractMethod){_inherits(GetAccountsMethod,_AbstractMethod);function GetAccountsMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetAccountsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetAccountsMethod).call(this,'eth_accounts',0,utils,formatters,moduleInstance));}_createClass(GetAccountsMethod,[{key:"afterExecution",value:function afterExecution(response){var _this=this;return response.map(function(responseItem){return _this.utils.toChecksumAddress(responseItem);});}}]);return GetAccountsMethod;}(AbstractMethod);var GetBalanceMethod=function(_AbstractMethod){_inherits(GetBalanceMethod,_AbstractMethod);function GetBalanceMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBalanceMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBalanceMethod).call(this,'eth_getBalance',2,utils,formatters,moduleInstance));}_createClass(GetBalanceMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);if(isFunction(this.parameters[1])){this.callback=this.parameters[1];this.parameters[1]=moduleInstance.defaultBlock;}this.parameters[1]=this.formatters.inputDefaultBlockNumberFormatter(this.parameters[1],moduleInstance);}},{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputBigNumberFormatter(response);}}]);return GetBalanceMethod;}(AbstractMethod);var RequestAccountsMethod=function(_AbstractMethod){_inherits(RequestAccountsMethod,_AbstractMethod);function RequestAccountsMethod(utils,formatters,moduleInstance){_classCallCheck(this,RequestAccountsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(RequestAccountsMethod).call(this,'eth_requestAccounts',0,utils,formatters,moduleInstance));}return RequestAccountsMethod;}(AbstractMethod);var AbstractGetUncleMethod=function(_AbstractMethod){_inherits(AbstractGetUncleMethod,_AbstractMethod);function AbstractGetUncleMethod(rpcMethod,utils,formatters,moduleInstance){_classCallCheck(this,AbstractGetUncleMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AbstractGetUncleMethod).call(this,rpcMethod,2,utils,formatters,moduleInstance));}_createClass(AbstractGetUncleMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputBlockNumberFormatter(this.parameters[0]);this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}},{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputBlockFormatter(response);}}]);return AbstractGetUncleMethod;}(AbstractMethod);var AbstractGetBlockTransactionCountMethod=function(_AbstractMethod){_inherits(AbstractGetBlockTransactionCountMethod,_AbstractMethod);function AbstractGetBlockTransactionCountMethod(rpcMethod,utils,formatters,moduleInstance){_classCallCheck(this,AbstractGetBlockTransactionCountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AbstractGetBlockTransactionCountMethod).call(this,rpcMethod,1,utils,formatters,moduleInstance));}_createClass(AbstractGetBlockTransactionCountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputBlockNumberFormatter(this.parameters[0]);}},{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return AbstractGetBlockTransactionCountMethod;}(AbstractMethod);var AbstractGetBlockUncleCountMethod=function(_AbstractMethod){_inherits(AbstractGetBlockUncleCountMethod,_AbstractMethod);function AbstractGetBlockUncleCountMethod(rpcMethod,utils,formatters,moduleInstance){_classCallCheck(this,AbstractGetBlockUncleCountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AbstractGetBlockUncleCountMethod).call(this,rpcMethod,1,utils,formatters,moduleInstance));}_createClass(AbstractGetBlockUncleCountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputBlockNumberFormatter(this.parameters[0]);}},{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return AbstractGetBlockUncleCountMethod;}(AbstractMethod);var GetBlockByHashMethod=function(_AbstractGetBlockMeth){_inherits(GetBlockByHashMethod,_AbstractGetBlockMeth);function GetBlockByHashMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockByHashMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockByHashMethod).call(this,'eth_getBlockByHash',utils,formatters,moduleInstance));}return GetBlockByHashMethod;}(AbstractGetBlockMethod);var GetBlockNumberMethod=function(_AbstractMethod){_inherits(GetBlockNumberMethod,_AbstractMethod);function GetBlockNumberMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockNumberMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockNumberMethod).call(this,'eth_blockNumber',0,utils,formatters,moduleInstance));}_createClass(GetBlockNumberMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return GetBlockNumberMethod;}(AbstractMethod);var GetBlockTransactionCountByHashMethod=function(_AbstractGetBlockTran){_inherits(GetBlockTransactionCountByHashMethod,_AbstractGetBlockTran);function GetBlockTransactionCountByHashMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockTransactionCountByHashMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockTransactionCountByHashMethod).call(this,'eth_getBlockTransactionCountByHash',utils,formatters,moduleInstance));}return GetBlockTransactionCountByHashMethod;}(AbstractGetBlockTransactionCountMethod);var GetBlockTransactionCountByNumberMethod=function(_AbstractGetBlockTran){_inherits(GetBlockTransactionCountByNumberMethod,_AbstractGetBlockTran);function GetBlockTransactionCountByNumberMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockTransactionCountByNumberMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockTransactionCountByNumberMethod).call(this,'eth_getBlockTransactionCountByNumber',utils,formatters,moduleInstance));}return GetBlockTransactionCountByNumberMethod;}(AbstractGetBlockTransactionCountMethod);var GetBlockUncleCountByBlockHashMethod=function(_AbstractGetBlockUncl){_inherits(GetBlockUncleCountByBlockHashMethod,_AbstractGetBlockUncl);function GetBlockUncleCountByBlockHashMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockUncleCountByBlockHashMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockUncleCountByBlockHashMethod).call(this,'eth_getUncleCountByBlockHash',utils,formatters,moduleInstance));}return GetBlockUncleCountByBlockHashMethod;}(AbstractGetBlockUncleCountMethod);var GetBlockUncleCountByBlockNumberMethod=function(_AbstractGetBlockUncl){_inherits(GetBlockUncleCountByBlockNumberMethod,_AbstractGetBlockUncl);function GetBlockUncleCountByBlockNumberMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockUncleCountByBlockNumberMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockUncleCountByBlockNumberMethod).call(this,'eth_getUncleCountByBlockNumber',utils,formatters,moduleInstance));}return GetBlockUncleCountByBlockNumberMethod;}(AbstractGetBlockUncleCountMethod);var GetUncleByBlockHashAndIndexMethod=function(_AbstractGetUncleMeth){_inherits(GetUncleByBlockHashAndIndexMethod,_AbstractGetUncleMeth);function GetUncleByBlockHashAndIndexMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetUncleByBlockHashAndIndexMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetUncleByBlockHashAndIndexMethod).call(this,'eth_getUncleByBlockHashAndIndex',utils,formatters,moduleInstance));}return GetUncleByBlockHashAndIndexMethod;}(AbstractGetUncleMethod);var GetUncleByBlockNumberAndIndexMethod=function(_AbstractGetUncleMeth){_inherits(GetUncleByBlockNumberAndIndexMethod,_AbstractGetUncleMeth);function GetUncleByBlockNumberAndIndexMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetUncleByBlockNumberAndIndexMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetUncleByBlockNumberAndIndexMethod).call(this,'eth_getUncleByBlockNumberAndIndex',utils,formatters,moduleInstance));}return GetUncleByBlockNumberAndIndexMethod;}(AbstractGetUncleMethod);var AbstractGetTransactionFromBlockMethod=function(_AbstractMethod){_inherits(AbstractGetTransactionFromBlockMethod,_AbstractMethod);function AbstractGetTransactionFromBlockMethod(rpcMethod,utils,formatters,moduleInstance){_classCallCheck(this,AbstractGetTransactionFromBlockMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AbstractGetTransactionFromBlockMethod).call(this,rpcMethod,2,utils,formatters,moduleInstance));}_createClass(AbstractGetTransactionFromBlockMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputBlockNumberFormatter(this.parameters[0]);this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}},{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputTransactionFormatter(response);}}]);return AbstractGetTransactionFromBlockMethod;}(AbstractMethod);var AbstractObservedTransactionMethod=function(_AbstractMethod){_inherits(AbstractObservedTransactionMethod,_AbstractMethod);function AbstractObservedTransactionMethod(rpcMethod,parametersAmount,utils,formatters,moduleInstance,transactionObserver){var _this;_classCallCheck(this,AbstractObservedTransactionMethod);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbstractObservedTransactionMethod).call(this,rpcMethod,parametersAmount,utils,formatters,moduleInstance));_this.transactionObserver=transactionObserver;_this.promiEvent=new PromiEvent();return _this;}_createClass(AbstractObservedTransactionMethod,[{key:"execute",value:function execute(){var _this2=this;this.beforeExecution(this.moduleInstance);this.moduleInstance.currentProvider.send(this.rpcMethod,this.parameters).then(function(transactionHash){var confirmations,receipt;if(_this2.callback){_this2.callback(false,transactionHash);return;}_this2.promiEvent.emit('transactionHash',transactionHash);var transactionConfirmationSubscription=_this2.transactionObserver.observe(transactionHash).subscribe(function(transactionConfirmation){confirmations=transactionConfirmation.confirmations;receipt=transactionConfirmation.receipt;if(!receipt.status){if(_this2.parameters[0].gas===receipt.gasUsed){_this2.handleError(new Error("Transaction ran out of gas. Please provide more gas:\n".concat(JSON.stringify(receipt,null,2))),receipt,confirmations);transactionConfirmationSubscription.unsubscribe();return;}_this2.handleError(new Error("Transaction has been reverted by the EVM:\n".concat(JSON.stringify(receipt,null,2))),receipt,confirmations);transactionConfirmationSubscription.unsubscribe();return;}_this2.promiEvent.emit('confirmation',confirmations,_this2.formatters.outputTransactionFormatter(receipt));},function(error){_this2.handleError(error,receipt,confirmations);},function(){if(_this2.promiEvent.listenerCount('receipt')>0){_this2.promiEvent.emit('receipt',_this2.afterExecution(receipt));_this2.promiEvent.removeAllListeners();return;}_this2.promiEvent.resolve(_this2.afterExecution(receipt));});})["catch"](function(error){if(_this2.callback){_this2.callback(error,null);return;}_this2.handleError(error,false,0);});return this.promiEvent;}},{key:"handleError",value:function handleError(error,receipt,confirmations){if(this.promiEvent.listenerCount('error')>0){this.promiEvent.emit('error',error,receipt,confirmations);this.promiEvent.removeAllListeners();return;}this.promiEvent.reject(error);}},{key:"Type",get:function get(){return'observed-transaction-method';}}],[{key:"Type",get:function get(){return'observed-transaction-method';}}]);return AbstractObservedTransactionMethod;}(AbstractMethod);var SendTransactionMethod=function(_AbstractObservedTran){_inherits(SendTransactionMethod,_AbstractObservedTran);function SendTransactionMethod(utils,formatters,moduleInstance,transactionObserver){_classCallCheck(this,SendTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SendTransactionMethod).call(this,'eth_sendTransaction',1,utils,formatters,moduleInstance,transactionObserver));}_createClass(SendTransactionMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputTransactionFormatter(this.parameters[0],moduleInstance);}},{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputTransactionFormatter(response);}}]);return SendTransactionMethod;}(AbstractObservedTransactionMethod);var EthSendTransactionMethod=function(_SendTransactionMetho){_inherits(EthSendTransactionMethod,_SendTransactionMetho);function EthSendTransactionMethod(utils,formatters,moduleInstance,transactionObserver,chainIdMethod,getTransactionCountMethod){var _this;_classCallCheck(this,EthSendTransactionMethod);_this=_possibleConstructorReturn(this,_getPrototypeOf(EthSendTransactionMethod).call(this,utils,formatters,moduleInstance,transactionObserver));_this.chainIdMethod=chainIdMethod;_this.getTransactionCountMethod=getTransactionCountMethod;return _this;}_createClass(EthSendTransactionMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.rpcMethod!=='eth_sendRawTransaction'){_get(_getPrototypeOf(EthSendTransactionMethod.prototype),"beforeExecution",this).call(this,moduleInstance);}}},{key:"execute",value:function execute(){var _this2=this;if(!this.parameters[0].gas&&this.moduleInstance.defaultGas){this.parameters[0]['gas']=this.moduleInstance.defaultGas;}if(!this.parameters[0].gasPrice&&this.parameters[0].gasPrice!==0){if(!this.moduleInstance.defaultGasPrice){this.moduleInstance.currentProvider.send('eth_gasPrice',[]).then(function(gasPrice){_this2.parameters[0].gasPrice=gasPrice;_this2.execute();})["catch"](function(error){_this2.handleError(error,false,0);});return this.promiEvent;}this.parameters[0]['gasPrice']=this.moduleInstance.defaultGasPrice;}if(this.hasAccounts()&&this.isDefaultSigner()){var account=this.moduleInstance.accounts.wallet[this.parameters[0].from];if(account){this.sendRawTransaction(account)["catch"](function(error){_this2.handleError(error,false,0);});return this.promiEvent;}}if(this.hasCustomSigner()){this.sendRawTransaction()["catch"](function(error){_this2.handleError(error,false,0);});return this.promiEvent;}return _get(_getPrototypeOf(EthSendTransactionMethod.prototype),"execute",this).call(this);}},{key:"sendRawTransaction",value:function(){var _sendRawTransaction=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var account,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:account=_args.length>0&&_args[0]!==undefined?_args[0]:{};_context.next=3;return this.signTransaction(account);case 3:response=_context.sent;this.parameters=[response.rawTransaction];this.rpcMethod='eth_sendRawTransaction';return _context.abrupt("return",_get(_getPrototypeOf(EthSendTransactionMethod.prototype),"execute",this).call(this));case 7:case"end":return _context.stop();}}},_callee,this);}));function sendRawTransaction(){return _sendRawTransaction.apply(this,arguments);}return sendRawTransaction;}()},{key:"signTransaction",value:function(){var _signTransaction=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var account,nonce,transaction,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:account=_args2.length>0&&_args2[0]!==undefined?_args2[0]:{};this.beforeExecution(this.moduleInstance);if(this.parameters[0].chainId){_context2.next=6;break;}_context2.next=5;return this.chainIdMethod.execute();case 5:this.parameters[0].chainId=_context2.sent;case 6:if(!(!this.parameters[0].nonce&&this.parameters[0].nonce!==0)){_context2.next=15;break;}if(account.nonce){account.nonce=account.nonce+1;nonce=account.nonce;}if(nonce){_context2.next=14;break;}this.getTransactionCountMethod.parameters=[this.parameters[0].from,'latest'];_context2.next=12;return this.getTransactionCountMethod.execute();case 12:nonce=_context2.sent;account.nonce=nonce;case 14:this.parameters[0].nonce=nonce;case 15:transaction=this.parameters[0];transaction.to=transaction.to||'0x';transaction.data=transaction.data||'0x';transaction.value=transaction.value||'0x';transaction.chainId=this.utils.numberToHex(transaction.chainId);delete transaction.from;return _context2.abrupt("return",this.moduleInstance.transactionSigner.sign(transaction,account.privateKey));case 22:case"end":return _context2.stop();}}},_callee2,this);}));function signTransaction(){return _signTransaction.apply(this,arguments);}return signTransaction;}()},{key:"isDefaultSigner",value:function isDefaultSigner(){return this.moduleInstance.transactionSigner.type==='TransactionSigner';}},{key:"hasAccounts",value:function hasAccounts(){return this.moduleInstance.accounts&&this.moduleInstance.accounts.wallet.accountsIndex>0;}},{key:"hasCustomSigner",value:function hasCustomSigner(){return this.moduleInstance.transactionSigner.type!=='TransactionSigner';}},{key:"Type",get:function get(){return'eth-send-transaction-method';}}],[{key:"Type",get:function get(){return'eth-send-transaction-method';}}]);return EthSendTransactionMethod;}(SendTransactionMethod);var GetTransactionMethod=function(_AbstractMethod){_inherits(GetTransactionMethod,_AbstractMethod);function GetTransactionMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetTransactionMethod).call(this,'eth_getTransactionByHash',1,utils,formatters,moduleInstance));}_createClass(GetTransactionMethod,[{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputTransactionFormatter(response);}}]);return GetTransactionMethod;}(AbstractMethod);var GetPendingTransactionsMethod=function(_AbstractMethod){_inherits(GetPendingTransactionsMethod,_AbstractMethod);function GetPendingTransactionsMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetPendingTransactionsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetPendingTransactionsMethod).call(this,'eth_pendingTransactions',0,utils,formatters,moduleInstance));}_createClass(GetPendingTransactionsMethod,[{key:"afterExecution",value:function afterExecution(response){var _this=this;if(response){return response.map(function(item){return _this.formatters.outputTransactionFormatter(item);});}return response;}}]);return GetPendingTransactionsMethod;}(AbstractMethod);var GetTransactionByBlockHashAndIndexMethod=function(_AbstractGetTransacti){_inherits(GetTransactionByBlockHashAndIndexMethod,_AbstractGetTransacti);function GetTransactionByBlockHashAndIndexMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetTransactionByBlockHashAndIndexMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetTransactionByBlockHashAndIndexMethod).call(this,'eth_getTransactionByBlockHashAndIndex',utils,formatters,moduleInstance));}return GetTransactionByBlockHashAndIndexMethod;}(AbstractGetTransactionFromBlockMethod);var GetTransactionByBlockNumberAndIndexMethod=function(_AbstractGetTransacti){_inherits(GetTransactionByBlockNumberAndIndexMethod,_AbstractGetTransacti);function GetTransactionByBlockNumberAndIndexMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetTransactionByBlockNumberAndIndexMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetTransactionByBlockNumberAndIndexMethod).call(this,'eth_getTransactionByBlockNumberAndIndex',utils,formatters,moduleInstance));}return GetTransactionByBlockNumberAndIndexMethod;}(AbstractGetTransactionFromBlockMethod);var SendRawTransactionMethod=function(_AbstractObservedTran){_inherits(SendRawTransactionMethod,_AbstractObservedTran);function SendRawTransactionMethod(utils,formatters,moduleInstance,transactionObserver){_classCallCheck(this,SendRawTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SendRawTransactionMethod).call(this,'eth_sendRawTransaction',1,utils,formatters,moduleInstance,transactionObserver));}_createClass(SendRawTransactionMethod,[{key:"afterExecution",value:function afterExecution(response){return this.formatters.outputTransactionFormatter(response);}}]);return SendRawTransactionMethod;}(AbstractObservedTransactionMethod);var SignTransactionMethod=function(_AbstractMethod){_inherits(SignTransactionMethod,_AbstractMethod);function SignTransactionMethod(utils,formatters,moduleInstance){_classCallCheck(this,SignTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SignTransactionMethod).call(this,'eth_signTransaction',1,utils,formatters,moduleInstance));}_createClass(SignTransactionMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputTransactionFormatter(this.parameters[0],moduleInstance);}}]);return SignTransactionMethod;}(AbstractMethod);var GetCodeMethod=function(_AbstractMethod){_inherits(GetCodeMethod,_AbstractMethod);function GetCodeMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetCodeMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetCodeMethod).call(this,'eth_getCode',2,utils,formatters,moduleInstance));}_createClass(GetCodeMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);if(isFunction(this.parameters[1])){this.callback=this.parameters[1];this.parameters[1]=moduleInstance.defaultBlock;}this.parameters[1]=this.formatters.inputDefaultBlockNumberFormatter(this.parameters[1],moduleInstance);}}]);return GetCodeMethod;}(AbstractMethod);var SignMethod=function(_AbstractMethod){_inherits(SignMethod,_AbstractMethod);function SignMethod(utils,formatters,moduleInstance){_classCallCheck(this,SignMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SignMethod).call(this,'eth_sign',2,utils,formatters,moduleInstance));}_createClass(SignMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputSignFormatter(this.parameters[0]);this.parameters[1]=this.formatters.inputAddressFormatter(this.parameters[1]);this.parameters.reverse();}}]);return SignMethod;}(AbstractMethod);var CallMethod=function(_AbstractMethod){_inherits(CallMethod,_AbstractMethod);function CallMethod(utils,formatters,moduleInstance){_classCallCheck(this,CallMethod);return _possibleConstructorReturn(this,_getPrototypeOf(CallMethod).call(this,'eth_call',2,utils,formatters,moduleInstance));}_createClass(CallMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputCallFormatter(this.parameters[0],moduleInstance);if(isFunction(this.parameters[1])){this.callback=this.parameters[1];this.parameters[1]=moduleInstance.defaultBlock;}this.parameters[1]=this.formatters.inputDefaultBlockNumberFormatter(this.parameters[1],moduleInstance);}}]);return CallMethod;}(AbstractMethod);var GetStorageAtMethod=function(_AbstractMethod){_inherits(GetStorageAtMethod,_AbstractMethod);function GetStorageAtMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetStorageAtMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetStorageAtMethod).call(this,'eth_getStorageAt',3,utils,formatters,moduleInstance));}_createClass(GetStorageAtMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);this.parameters[1]=this.utils.numberToHex(this.parameters[1]);if(isFunction(this.parameters[2])){this.callback=this.parameters[2];this.parameters[2]=moduleInstance.defaultBlock;}this.parameters[2]=this.formatters.inputDefaultBlockNumberFormatter(this.parameters[2],moduleInstance);}}]);return GetStorageAtMethod;}(AbstractMethod);var EstimateGasMethod=function(_AbstractMethod){_inherits(EstimateGasMethod,_AbstractMethod);function EstimateGasMethod(utils,formatters,moduleInstance){_classCallCheck(this,EstimateGasMethod);return _possibleConstructorReturn(this,_getPrototypeOf(EstimateGasMethod).call(this,'eth_estimateGas',1,utils,formatters,moduleInstance));}_createClass(EstimateGasMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputCallFormatter(this.parameters[0],moduleInstance);}},{key:"afterExecution",value:function afterExecution(response){return this.utils.hexToNumber(response);}}]);return EstimateGasMethod;}(AbstractMethod);var GetPastLogsMethod=function(_AbstractMethod){_inherits(GetPastLogsMethod,_AbstractMethod);function GetPastLogsMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetPastLogsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetPastLogsMethod).call(this,'eth_getLogs',1,utils,formatters,moduleInstance));}_createClass(GetPastLogsMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputLogFormatter(this.parameters[0]);}},{key:"afterExecution",value:function afterExecution(response){var _this=this;return response.map(function(responseItem){return _this.formatters.outputLogFormatter(responseItem);});}}]);return GetPastLogsMethod;}(AbstractMethod);var EcRecoverMethod=function(_AbstractMethod){_inherits(EcRecoverMethod,_AbstractMethod);function EcRecoverMethod(utils,formatters,moduleInstance){_classCallCheck(this,EcRecoverMethod);return _possibleConstructorReturn(this,_getPrototypeOf(EcRecoverMethod).call(this,'personal_ecRecover',2,utils,formatters,moduleInstance));}_createClass(EcRecoverMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputSignFormatter(this.parameters[0]);}}]);return EcRecoverMethod;}(AbstractMethod);var ImportRawKeyMethod=function(_AbstractMethod){_inherits(ImportRawKeyMethod,_AbstractMethod);function ImportRawKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,ImportRawKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ImportRawKeyMethod).call(this,'personal_importRawKey',2,utils,formatters,moduleInstance));}return ImportRawKeyMethod;}(AbstractMethod);var ListAccountsMethod=function(_AbstractMethod){_inherits(ListAccountsMethod,_AbstractMethod);function ListAccountsMethod(utils,formatters,moduleInstance){_classCallCheck(this,ListAccountsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ListAccountsMethod).call(this,'personal_listAccounts',0,utils,formatters,moduleInstance));}_createClass(ListAccountsMethod,[{key:"afterExecution",value:function afterExecution(response){var _this=this;return response.map(function(responseItem){return _this.utils.toChecksumAddress(responseItem);});}}]);return ListAccountsMethod;}(AbstractMethod);var LockAccountMethod=function(_AbstractMethod){_inherits(LockAccountMethod,_AbstractMethod);function LockAccountMethod(utils,formatters,moduleInstance){_classCallCheck(this,LockAccountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(LockAccountMethod).call(this,'personal_lockAccount',1,utils,formatters,moduleInstance));}_createClass(LockAccountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);}}]);return LockAccountMethod;}(AbstractMethod);var NewAccountMethod=function(_AbstractMethod){_inherits(NewAccountMethod,_AbstractMethod);function NewAccountMethod(utils,formatters,moduleInstance){_classCallCheck(this,NewAccountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(NewAccountMethod).call(this,'personal_newAccount',1,utils,formatters,moduleInstance));}_createClass(NewAccountMethod,[{key:"afterExecution",value:function afterExecution(response){return this.utils.toChecksumAddress(response);}}]);return NewAccountMethod;}(AbstractMethod);var PersonalSendTransactionMethod=function(_AbstractMethod){_inherits(PersonalSendTransactionMethod,_AbstractMethod);function PersonalSendTransactionMethod(utils,formatters,moduleInstance){_classCallCheck(this,PersonalSendTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(PersonalSendTransactionMethod).call(this,'personal_sendTransaction',2,utils,formatters,moduleInstance));}_createClass(PersonalSendTransactionMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputTransactionFormatter(this.parameters[0],moduleInstance);}}]);return PersonalSendTransactionMethod;}(AbstractMethod);var PersonalSignMethod=function(_AbstractMethod){_inherits(PersonalSignMethod,_AbstractMethod);function PersonalSignMethod(utils,formatters,moduleInstance){_classCallCheck(this,PersonalSignMethod);return _possibleConstructorReturn(this,_getPrototypeOf(PersonalSignMethod).call(this,'personal_sign',3,utils,formatters,moduleInstance));}_createClass(PersonalSignMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputSignFormatter(this.parameters[0]);this.parameters[1]=this.formatters.inputAddressFormatter(this.parameters[1]);if(isFunction(this.parameters[2])){this.callback=this.parameters[2];delete this.parameters[2];}}}]);return PersonalSignMethod;}(AbstractMethod);var PersonalSignTransactionMethod=function(_AbstractMethod){_inherits(PersonalSignTransactionMethod,_AbstractMethod);function PersonalSignTransactionMethod(utils,formatters,moduleInstance){_classCallCheck(this,PersonalSignTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(PersonalSignTransactionMethod).call(this,'personal_signTransaction',2,utils,formatters,moduleInstance));}_createClass(PersonalSignTransactionMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputTransactionFormatter(this.parameters[0],moduleInstance);}}]);return PersonalSignTransactionMethod;}(AbstractMethod);var UnlockAccountMethod=function(_AbstractMethod){_inherits(UnlockAccountMethod,_AbstractMethod);function UnlockAccountMethod(utils,formatters,moduleInstance){_classCallCheck(this,UnlockAccountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(UnlockAccountMethod).call(this,'personal_unlockAccount',3,utils,formatters,moduleInstance));}_createClass(UnlockAccountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);}}]);return UnlockAccountMethod;}(AbstractMethod);var AddPrivateKeyMethod=function(_AbstractMethod){_inherits(AddPrivateKeyMethod,_AbstractMethod);function AddPrivateKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,AddPrivateKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AddPrivateKeyMethod).call(this,'shh_addPrivateKey',1,utils,formatters,moduleInstance));}return AddPrivateKeyMethod;}(AbstractMethod);var AddSymKeyMethod=function(_AbstractMethod){_inherits(AddSymKeyMethod,_AbstractMethod);function AddSymKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,AddSymKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AddSymKeyMethod).call(this,'shh_addSymKey',1,utils,formatters,moduleInstance));}return AddSymKeyMethod;}(AbstractMethod);var DeleteKeyPairMethod=function(_AbstractMethod){_inherits(DeleteKeyPairMethod,_AbstractMethod);function DeleteKeyPairMethod(utils,formatters,moduleInstance){_classCallCheck(this,DeleteKeyPairMethod);return _possibleConstructorReturn(this,_getPrototypeOf(DeleteKeyPairMethod).call(this,'shh_deleteKeyPair',1,utils,formatters,moduleInstance));}return DeleteKeyPairMethod;}(AbstractMethod);var DeleteMessageFilterMethod=function(_AbstractMethod){_inherits(DeleteMessageFilterMethod,_AbstractMethod);function DeleteMessageFilterMethod(utils,formatters,moduleInstance){_classCallCheck(this,DeleteMessageFilterMethod);return _possibleConstructorReturn(this,_getPrototypeOf(DeleteMessageFilterMethod).call(this,'shh_deleteMessageFilter',1,utils,formatters,moduleInstance));}return DeleteMessageFilterMethod;}(AbstractMethod);var DeleteSymKeyMethod=function(_AbstractMethod){_inherits(DeleteSymKeyMethod,_AbstractMethod);function DeleteSymKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,DeleteSymKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(DeleteSymKeyMethod).call(this,'shh_deleteSymKey',1,utils,formatters,moduleInstance));}return DeleteSymKeyMethod;}(AbstractMethod);var GenerateSymKeyFromPasswordMethod=function(_AbstractMethod){_inherits(GenerateSymKeyFromPasswordMethod,_AbstractMethod);function GenerateSymKeyFromPasswordMethod(utils,formatters,moduleInstance){_classCallCheck(this,GenerateSymKeyFromPasswordMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GenerateSymKeyFromPasswordMethod).call(this,'shh_generateSymKeyFromPassword',1,utils,formatters,moduleInstance));}return GenerateSymKeyFromPasswordMethod;}(AbstractMethod);var GetFilterMessagesMethod=function(_AbstractMethod){_inherits(GetFilterMessagesMethod,_AbstractMethod);function GetFilterMessagesMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetFilterMessagesMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetFilterMessagesMethod).call(this,'shh_getFilterMessages',1,utils,formatters,moduleInstance));}return GetFilterMessagesMethod;}(AbstractMethod);var GetInfoMethod=function(_AbstractMethod){_inherits(GetInfoMethod,_AbstractMethod);function GetInfoMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetInfoMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetInfoMethod).call(this,'shh_info',0,utils,formatters,moduleInstance));}return GetInfoMethod;}(AbstractMethod);var GetPrivateKeyMethod=function(_AbstractMethod){_inherits(GetPrivateKeyMethod,_AbstractMethod);function GetPrivateKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetPrivateKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetPrivateKeyMethod).call(this,'shh_getPrivateKey',1,utils,formatters,moduleInstance));}return GetPrivateKeyMethod;}(AbstractMethod);var GetPublicKeyMethod=function(_AbstractMethod){_inherits(GetPublicKeyMethod,_AbstractMethod);function GetPublicKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetPublicKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetPublicKeyMethod).call(this,'shh_getPublicKey',1,utils,formatters,moduleInstance));}return GetPublicKeyMethod;}(AbstractMethod);var GetSymKeyMethod=function(_AbstractMethod){_inherits(GetSymKeyMethod,_AbstractMethod);function GetSymKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetSymKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetSymKeyMethod).call(this,'shh_getSymKey',1,utils,formatters,moduleInstance));}return GetSymKeyMethod;}(AbstractMethod);var HasKeyPairMethod=function(_AbstractMethod){_inherits(HasKeyPairMethod,_AbstractMethod);function HasKeyPairMethod(utils,formatters,moduleInstance){_classCallCheck(this,HasKeyPairMethod);return _possibleConstructorReturn(this,_getPrototypeOf(HasKeyPairMethod).call(this,'shh_hasKeyPair',1,utils,formatters,moduleInstance));}return HasKeyPairMethod;}(AbstractMethod);var HasSymKeyMethod=function(_AbstractMethod){_inherits(HasSymKeyMethod,_AbstractMethod);function HasSymKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,HasSymKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(HasSymKeyMethod).call(this,'shh_hasSymKey',1,utils,formatters,moduleInstance));}return HasSymKeyMethod;}(AbstractMethod);var MarkTrustedPeerMethod=function(_AbstractMethod){_inherits(MarkTrustedPeerMethod,_AbstractMethod);function MarkTrustedPeerMethod(utils,formatters,moduleInstance){_classCallCheck(this,MarkTrustedPeerMethod);return _possibleConstructorReturn(this,_getPrototypeOf(MarkTrustedPeerMethod).call(this,'shh_markTrustedPeer',1,utils,formatters,moduleInstance));}return MarkTrustedPeerMethod;}(AbstractMethod);var NewKeyPairMethod=function(_AbstractMethod){_inherits(NewKeyPairMethod,_AbstractMethod);function NewKeyPairMethod(utils,formatters,moduleInstance){_classCallCheck(this,NewKeyPairMethod);return _possibleConstructorReturn(this,_getPrototypeOf(NewKeyPairMethod).call(this,'shh_newKeyPair',0,utils,formatters,moduleInstance));}return NewKeyPairMethod;}(AbstractMethod);var NewMessageFilterMethod=function(_AbstractMethod){_inherits(NewMessageFilterMethod,_AbstractMethod);function NewMessageFilterMethod(utils,formatters,moduleInstance){_classCallCheck(this,NewMessageFilterMethod);return _possibleConstructorReturn(this,_getPrototypeOf(NewMessageFilterMethod).call(this,'shh_newMessageFilter',1,utils,formatters,moduleInstance));}return NewMessageFilterMethod;}(AbstractMethod);var NewSymKeyMethod=function(_AbstractMethod){_inherits(NewSymKeyMethod,_AbstractMethod);function NewSymKeyMethod(utils,formatters,moduleInstance){_classCallCheck(this,NewSymKeyMethod);return _possibleConstructorReturn(this,_getPrototypeOf(NewSymKeyMethod).call(this,'shh_newSymKey',0,utils,formatters,moduleInstance));}return NewSymKeyMethod;}(AbstractMethod);var PostMethod=function(_AbstractMethod){_inherits(PostMethod,_AbstractMethod);function PostMethod(utils,formatters,moduleInstance){_classCallCheck(this,PostMethod);return _possibleConstructorReturn(this,_getPrototypeOf(PostMethod).call(this,'shh_post',1,utils,formatters,moduleInstance));}return PostMethod;}(AbstractMethod);var SetMaxMessageSizeMethod=function(_AbstractMethod){_inherits(SetMaxMessageSizeMethod,_AbstractMethod);function SetMaxMessageSizeMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetMaxMessageSizeMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetMaxMessageSizeMethod).call(this,'shh_setMaxMessageSize',1,utils,formatters,moduleInstance));}return SetMaxMessageSizeMethod;}(AbstractMethod);var SetMinPoWMethod=function(_AbstractMethod){_inherits(SetMinPoWMethod,_AbstractMethod);function SetMinPoWMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetMinPoWMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetMinPoWMethod).call(this,'shh_setMinPoW',1,utils,formatters,moduleInstance));}return SetMinPoWMethod;}(AbstractMethod);var ShhVersionMethod=function(_AbstractMethod){_inherits(ShhVersionMethod,_AbstractMethod);function ShhVersionMethod(utils,formatters,moduleInstance){_classCallCheck(this,ShhVersionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ShhVersionMethod).call(this,'shh_version',0,utils,formatters,moduleInstance));}return ShhVersionMethod;}(AbstractMethod);var BackTraceAtMethod=function(_AbstractMethod){_inherits(BackTraceAtMethod,_AbstractMethod);function BackTraceAtMethod(utils,formatters,moduleInstance){_classCallCheck(this,BackTraceAtMethod);return _possibleConstructorReturn(this,_getPrototypeOf(BackTraceAtMethod).call(this,'debug_backtraceAt',1,utils,formatters,moduleInstance));}return BackTraceAtMethod;}(AbstractMethod);var BlockProfileMethod=function(_AbstractMethod){_inherits(BlockProfileMethod,_AbstractMethod);function BlockProfileMethod(utils,formatters,moduleInstance){_classCallCheck(this,BlockProfileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(BlockProfileMethod).call(this,'debug_blockProfile',2,utils,formatters,moduleInstance));}_createClass(BlockProfileMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}}]);return BlockProfileMethod;}(AbstractMethod);var CpuProfileMethod=function(_AbstractMethod){_inherits(CpuProfileMethod,_AbstractMethod);function CpuProfileMethod(utils,formatters,moduleInstance){_classCallCheck(this,CpuProfileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(CpuProfileMethod).call(this,'debug_cpuProfile',2,utils,formatters,moduleInstance));}_createClass(CpuProfileMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}}]);return CpuProfileMethod;}(AbstractMethod);var DumpBlockMethod=function(_AbstractMethod){_inherits(DumpBlockMethod,_AbstractMethod);function DumpBlockMethod(utils,formatters,moduleInstance){_classCallCheck(this,DumpBlockMethod);return _possibleConstructorReturn(this,_getPrototypeOf(DumpBlockMethod).call(this,'debug_dumpBlock',1,utils,formatters,moduleInstance));}_createClass(DumpBlockMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return DumpBlockMethod;}(AbstractMethod);var GcStatsMethod=function(_AbstractMethod){_inherits(GcStatsMethod,_AbstractMethod);function GcStatsMethod(utils,formatters,moduleInstance){_classCallCheck(this,GcStatsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GcStatsMethod).call(this,'debug_gcStats',0,utils,formatters,moduleInstance));}return GcStatsMethod;}(AbstractMethod);var GetBlockRlpMethod=function(_AbstractMethod){_inherits(GetBlockRlpMethod,_AbstractMethod);function GetBlockRlpMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockRlpMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockRlpMethod).call(this,'debug_getBlockRlp',1,utils,formatters,moduleInstance));}_createClass(GetBlockRlpMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return GetBlockRlpMethod;}(AbstractMethod);var GoTraceMethod=function(_AbstractMethod){_inherits(GoTraceMethod,_AbstractMethod);function GoTraceMethod(utils,formatters,moduleInstance){_classCallCheck(this,GoTraceMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GoTraceMethod).call(this,'debug_goTrace',2,utils,formatters,moduleInstance));}_createClass(GoTraceMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}}]);return GoTraceMethod;}(AbstractMethod);var MemStatsMethod=function(_AbstractMethod){_inherits(MemStatsMethod,_AbstractMethod);function MemStatsMethod(utils,formatters,moduleInstance){_classCallCheck(this,MemStatsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(MemStatsMethod).call(this,'debug_memStats',0,utils,formatters,moduleInstance));}return MemStatsMethod;}(AbstractMethod);var SeedHashMethod=function(_AbstractMethod){_inherits(SeedHashMethod,_AbstractMethod);function SeedHashMethod(utils,formatters,moduleInstance){_classCallCheck(this,SeedHashMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SeedHashMethod).call(this,'debug_seedHash',0,utils,formatters,moduleInstance));}_createClass(SeedHashMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return SeedHashMethod;}(AbstractMethod);var SetBlockProfileRateMethod=function(_AbstractMethod){_inherits(SetBlockProfileRateMethod,_AbstractMethod);function SetBlockProfileRateMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetBlockProfileRateMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetBlockProfileRateMethod).call(this,'debug_setBlockProfileRate',1,utils,formatters,moduleInstance));}_createClass(SetBlockProfileRateMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return SetBlockProfileRateMethod;}(AbstractMethod);var SetHeadMethod=function(_AbstractMethod){_inherits(SetHeadMethod,_AbstractMethod);function SetHeadMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetHeadMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetHeadMethod).call(this,'debug_setHead',1,utils,formatters,moduleInstance));}_createClass(SetHeadMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return SetHeadMethod;}(AbstractMethod);var StacksMethod=function(_AbstractMethod){_inherits(StacksMethod,_AbstractMethod);function StacksMethod(utils,formatters,moduleInstance){_classCallCheck(this,StacksMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StacksMethod).call(this,'debug_stacks',0,utils,formatters,moduleInstance));}return StacksMethod;}(AbstractMethod);var StartCpuProfileMethod=function(_AbstractMethod){_inherits(StartCpuProfileMethod,_AbstractMethod);function StartCpuProfileMethod(utils,formatters,moduleInstance){_classCallCheck(this,StartCpuProfileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StartCpuProfileMethod).call(this,'debug_startCPUProfile',1,utils,formatters,moduleInstance));}return StartCpuProfileMethod;}(AbstractMethod);var StartGoTraceMethod=function(_AbstractMethod){_inherits(StartGoTraceMethod,_AbstractMethod);function StartGoTraceMethod(utils,formatters,moduleInstance){_classCallCheck(this,StartGoTraceMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StartGoTraceMethod).call(this,'debug_startGoTrace',1,utils,formatters,moduleInstance));}return StartGoTraceMethod;}(AbstractMethod);var StopCpuProfileMethod=function(_AbstractMethod){_inherits(StopCpuProfileMethod,_AbstractMethod);function StopCpuProfileMethod(utils,formatters,moduleInstance){_classCallCheck(this,StopCpuProfileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StopCpuProfileMethod).call(this,'debug_stopCPUProfile',0,utils,formatters,moduleInstance));}return StopCpuProfileMethod;}(AbstractMethod);var StopGoTraceMethod=function(_AbstractMethod){_inherits(StopGoTraceMethod,_AbstractMethod);function StopGoTraceMethod(utils,formatters,moduleInstance){_classCallCheck(this,StopGoTraceMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StopGoTraceMethod).call(this,'debug_stopGoTrace',0,utils,formatters,moduleInstance));}return StopGoTraceMethod;}(AbstractMethod);var TraceBlockByHashMethod=function(_AbstractMethod){_inherits(TraceBlockByHashMethod,_AbstractMethod);function TraceBlockByHashMethod(utils,formatters,moduleInstance){_classCallCheck(this,TraceBlockByHashMethod);return _possibleConstructorReturn(this,_getPrototypeOf(TraceBlockByHashMethod).call(this,'debug_traceBlockByHash',2,utils,formatters,moduleInstance));}return TraceBlockByHashMethod;}(AbstractMethod);var TraceBlockByNumberMethod=function(_AbstractMethod){_inherits(TraceBlockByNumberMethod,_AbstractMethod);function TraceBlockByNumberMethod(utils,formatters,moduleInstance){_classCallCheck(this,TraceBlockByNumberMethod);return _possibleConstructorReturn(this,_getPrototypeOf(TraceBlockByNumberMethod).call(this,'debug_traceBlockByNumber',2,utils,formatters,moduleInstance));}_createClass(TraceBlockByNumberMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return TraceBlockByNumberMethod;}(AbstractMethod);var TraceBlockFromFileMethod=function(_AbstractMethod){_inherits(TraceBlockFromFileMethod,_AbstractMethod);function TraceBlockFromFileMethod(utils,formatters,moduleInstance){_classCallCheck(this,TraceBlockFromFileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(TraceBlockFromFileMethod).call(this,'debug_traceBlockFromFile',2,utils,formatters,moduleInstance));}return TraceBlockFromFileMethod;}(AbstractMethod);var TraceBlockMethod=function(_AbstractMethod){_inherits(TraceBlockMethod,_AbstractMethod);function TraceBlockMethod(utils,formatters,moduleInstance){_classCallCheck(this,TraceBlockMethod);return _possibleConstructorReturn(this,_getPrototypeOf(TraceBlockMethod).call(this,'debug_traceBlock',2,utils,formatters,moduleInstance));}return TraceBlockMethod;}(AbstractMethod);var TraceTransactionMethod=function(_AbstractMethod){_inherits(TraceTransactionMethod,_AbstractMethod);function TraceTransactionMethod(utils,formatters,moduleInstance){_classCallCheck(this,TraceTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(TraceTransactionMethod).call(this,'debug_traceTransaction',2,utils,formatters,moduleInstance));}return TraceTransactionMethod;}(AbstractMethod);var VerbosityMethod=function(_AbstractMethod){_inherits(VerbosityMethod,_AbstractMethod);function VerbosityMethod(utils,formatters,moduleInstance){_classCallCheck(this,VerbosityMethod);return _possibleConstructorReturn(this,_getPrototypeOf(VerbosityMethod).call(this,'debug_verbosity',1,utils,formatters,moduleInstance));}_createClass(VerbosityMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return VerbosityMethod;}(AbstractMethod);var VmoduleMethod=function(_AbstractMethod){_inherits(VmoduleMethod,_AbstractMethod);function VmoduleMethod(utils,formatters,moduleInstance){_classCallCheck(this,VmoduleMethod);return _possibleConstructorReturn(this,_getPrototypeOf(VmoduleMethod).call(this,'debug_vmodule',1,utils,formatters,moduleInstance));}return VmoduleMethod;}(AbstractMethod);var WriteBlockProfileMethod=function(_AbstractMethod){_inherits(WriteBlockProfileMethod,_AbstractMethod);function WriteBlockProfileMethod(utils,formatters,moduleInstance){_classCallCheck(this,WriteBlockProfileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(WriteBlockProfileMethod).call(this,'debug_writeBlockProfile',1,utils,formatters,moduleInstance));}return WriteBlockProfileMethod;}(AbstractMethod);var WriteMemProfileMethod=function(_AbstractMethod){_inherits(WriteMemProfileMethod,_AbstractMethod);function WriteMemProfileMethod(utils,formatters,moduleInstance){_classCallCheck(this,WriteMemProfileMethod);return _possibleConstructorReturn(this,_getPrototypeOf(WriteMemProfileMethod).call(this,'debug_writeMemProfile',1,utils,formatters,moduleInstance));}return WriteMemProfileMethod;}(AbstractMethod);var ContentMethod=function(_AbstractMethod){_inherits(ContentMethod,_AbstractMethod);function ContentMethod(utils,formatters,moduleInstance){_classCallCheck(this,ContentMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ContentMethod).call(this,'txpool_content',0,utils,formatters,moduleInstance));}return ContentMethod;}(AbstractMethod);var InspectMethod=function(_AbstractMethod){_inherits(InspectMethod,_AbstractMethod);function InspectMethod(utils,formatters,moduleInstance){_classCallCheck(this,InspectMethod);return _possibleConstructorReturn(this,_getPrototypeOf(InspectMethod).call(this,'txpool_inspect',0,utils,formatters,moduleInstance));}return InspectMethod;}(AbstractMethod);var StatusMethod=function(_AbstractMethod){_inherits(StatusMethod,_AbstractMethod);function StatusMethod(utils,formatters,moduleInstance){_classCallCheck(this,StatusMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StatusMethod).call(this,'txpool_status',0,utils,formatters,moduleInstance));}_createClass(StatusMethod,[{key:"afterExecution",value:function afterExecution(response){if(response){response.pending=this.utils.hexToNumber(response.pending);response.queued=this.utils.hexToNumber(response.queued);}return response;}}]);return StatusMethod;}(AbstractMethod);var AddPeerMethod=function(_AbstractMethod){_inherits(AddPeerMethod,_AbstractMethod);function AddPeerMethod(utils,formatters,moduleInstance){_classCallCheck(this,AddPeerMethod);return _possibleConstructorReturn(this,_getPrototypeOf(AddPeerMethod).call(this,'admin_addPeer',1,utils,formatters,moduleInstance));}return AddPeerMethod;}(AbstractMethod);var DataDirectoryMethod=function(_AbstractMethod){_inherits(DataDirectoryMethod,_AbstractMethod);function DataDirectoryMethod(utils,formatters,moduleInstance){_classCallCheck(this,DataDirectoryMethod);return _possibleConstructorReturn(this,_getPrototypeOf(DataDirectoryMethod).call(this,'admin_datadir',0,utils,formatters,moduleInstance));}return DataDirectoryMethod;}(AbstractMethod);var NodeInfoMethod=function(_AbstractMethod){_inherits(NodeInfoMethod,_AbstractMethod);function NodeInfoMethod(utils,formatters,moduleInstance){_classCallCheck(this,NodeInfoMethod);return _possibleConstructorReturn(this,_getPrototypeOf(NodeInfoMethod).call(this,'admin_nodeInfo',0,utils,formatters,moduleInstance));}_createClass(NodeInfoMethod,[{key:"afterExecution",value:function afterExecution(response){if(response){response.ports.discovery=this.utils.hexToNumber(response.ports.discovery);response.ports.listener=this.utils.hexToNumber(response.ports.listener);}return response;}}]);return NodeInfoMethod;}(AbstractMethod);var PeersMethod=function(_AbstractMethod){_inherits(PeersMethod,_AbstractMethod);function PeersMethod(utils,formatters,moduleInstance){_classCallCheck(this,PeersMethod);return _possibleConstructorReturn(this,_getPrototypeOf(PeersMethod).call(this,'admin_peers',0,utils,formatters,moduleInstance));}return PeersMethod;}(AbstractMethod);var SetSolcMethod=function(_AbstractMethod){_inherits(SetSolcMethod,_AbstractMethod);function SetSolcMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetSolcMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetSolcMethod).call(this,'admin_setSolc',1,utils,formatters,moduleInstance));}return SetSolcMethod;}(AbstractMethod);var StartRpcMethod=function(_AbstractMethod){_inherits(StartRpcMethod,_AbstractMethod);function StartRpcMethod(utils,formatters,moduleInstance){_classCallCheck(this,StartRpcMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StartRpcMethod).call(this,'admin_startRPC',4,utils,formatters,moduleInstance));}_createClass(StartRpcMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.parameters[1]){this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}}}]);return StartRpcMethod;}(AbstractMethod);var StartWsMethod=function(_AbstractMethod){_inherits(StartWsMethod,_AbstractMethod);function StartWsMethod(utils,formatters,moduleInstance){_classCallCheck(this,StartWsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StartWsMethod).call(this,'admin_startWS',4,utils,formatters,moduleInstance));}_createClass(StartWsMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.parameters[1]){this.parameters[1]=this.utils.numberToHex(this.parameters[1]);}}}]);return StartWsMethod;}(AbstractMethod);var StopRpcMethod=function(_AbstractMethod){_inherits(StopRpcMethod,_AbstractMethod);function StopRpcMethod(utils,formatters,moduleInstance){_classCallCheck(this,StopRpcMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StopRpcMethod).call(this,'admin_stopRPC',0,utils,formatters,moduleInstance));}return StopRpcMethod;}(AbstractMethod);var StopWsMethod=function(_AbstractMethod){_inherits(StopWsMethod,_AbstractMethod);function StopWsMethod(utils,formatters,moduleInstance){_classCallCheck(this,StopWsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StopWsMethod).call(this,'admin_stopWS',0,utils,formatters,moduleInstance));}return StopWsMethod;}(AbstractMethod);var SetEtherBaseMethod=function(_AbstractMethod){_inherits(SetEtherBaseMethod,_AbstractMethod);function SetEtherBaseMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetEtherBaseMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetEtherBaseMethod).call(this,'miner_setEtherbase',1,utils,formatters,moduleInstance));}_createClass(SetEtherBaseMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputAddressFormatter(this.parameters[0]);}}]);return SetEtherBaseMethod;}(AbstractMethod);var SetExtraMethod=function(_AbstractMethod){_inherits(SetExtraMethod,_AbstractMethod);function SetExtraMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetExtraMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetExtraMethod).call(this,'miner_setExtra',1,utils,formatters,moduleInstance));}return SetExtraMethod;}(AbstractMethod);var SetGasPriceMethod=function(_AbstractMethod){_inherits(SetGasPriceMethod,_AbstractMethod);function SetGasPriceMethod(utils,formatters,moduleInstance){_classCallCheck(this,SetGasPriceMethod);return _possibleConstructorReturn(this,_getPrototypeOf(SetGasPriceMethod).call(this,'miner_setGasPrice',1,utils,formatters,moduleInstance));}_createClass(SetGasPriceMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return SetGasPriceMethod;}(AbstractMethod);var StartMinerMethod=function(_AbstractMethod){_inherits(StartMinerMethod,_AbstractMethod);function StartMinerMethod(utils,formatters,moduleInstance){_classCallCheck(this,StartMinerMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StartMinerMethod).call(this,'miner_start',1,utils,formatters,moduleInstance));}_createClass(StartMinerMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.utils.numberToHex(this.parameters[0]);}}]);return StartMinerMethod;}(AbstractMethod);var StopMinerMethod=function(_AbstractMethod){_inherits(StopMinerMethod,_AbstractMethod);function StopMinerMethod(utils,formatters,moduleInstance){_classCallCheck(this,StopMinerMethod);return _possibleConstructorReturn(this,_getPrototypeOf(StopMinerMethod).call(this,'miner_stop',0,utils,formatters,moduleInstance));}return StopMinerMethod;}(AbstractMethod);exports.AbstractGetBlockMethod=AbstractGetBlockMethod;exports.AbstractGetBlockTransactionCountMethod=AbstractGetBlockTransactionCountMethod;exports.AbstractGetBlockUncleCountMethod=AbstractGetBlockUncleCountMethod;exports.AbstractGetTransactionFromBlockMethod=AbstractGetTransactionFromBlockMethod;exports.AbstractGetUncleMethod=AbstractGetUncleMethod;exports.AbstractMethod=AbstractMethod;exports.AbstractMethodFactory=AbstractMethodFactory;exports.AbstractObservedTransactionMethod=AbstractObservedTransactionMethod;exports.AddPeerMethod=AddPeerMethod;exports.AddPrivateKeyMethod=AddPrivateKeyMethod;exports.AddSymKeyMethod=AddSymKeyMethod;exports.BackTraceAtMethod=BackTraceAtMethod;exports.BlockProfileMethod=BlockProfileMethod;exports.CallMethod=CallMethod;exports.ChainIdMethod=ChainIdMethod;exports.ContentMethod=ContentMethod;exports.CpuProfileMethod=CpuProfileMethod;exports.DataDirectoryMethod=DataDirectoryMethod;exports.DeleteKeyPairMethod=DeleteKeyPairMethod;exports.DeleteMessageFilterMethod=DeleteMessageFilterMethod;exports.DeleteSymKeyMethod=DeleteSymKeyMethod;exports.DumpBlockMethod=DumpBlockMethod;exports.EcRecoverMethod=EcRecoverMethod;exports.EstimateGasMethod=EstimateGasMethod;exports.EthSendTransactionMethod=EthSendTransactionMethod;exports.GcStatsMethod=GcStatsMethod;exports.GenerateSymKeyFromPasswordMethod=GenerateSymKeyFromPasswordMethod;exports.GetAccountsMethod=GetAccountsMethod;exports.GetBalanceMethod=GetBalanceMethod;exports.GetBlockByHashMethod=GetBlockByHashMethod;exports.GetBlockByNumberMethod=GetBlockByNumberMethod;exports.GetBlockNumberMethod=GetBlockNumberMethod;exports.GetBlockRlpMethod=GetBlockRlpMethod;exports.GetBlockTransactionCountByHashMethod=GetBlockTransactionCountByHashMethod;exports.GetBlockTransactionCountByNumberMethod=GetBlockTransactionCountByNumberMethod;exports.GetBlockUncleCountByBlockHashMethod=GetBlockUncleCountByBlockHashMethod;exports.GetBlockUncleCountByBlockNumberMethod=GetBlockUncleCountByBlockNumberMethod;exports.GetCodeMethod=GetCodeMethod;exports.GetCoinbaseMethod=GetCoinbaseMethod;exports.GetFilterMessagesMethod=GetFilterMessagesMethod;exports.GetGasPriceMethod=GetGasPriceMethod;exports.GetHashrateMethod=GetHashrateMethod;exports.GetInfoMethod=GetInfoMethod;exports.GetNodeInfoMethod=GetNodeInfoMethod;exports.GetPastLogsMethod=GetPastLogsMethod;exports.GetPendingTransactionsMethod=GetPendingTransactionsMethod;exports.GetPrivateKeyMethod=GetPrivateKeyMethod;exports.GetProofMethod=GetProofMethod;exports.GetProtocolVersionMethod=GetProtocolVersionMethod;exports.GetPublicKeyMethod=GetPublicKeyMethod;exports.GetStorageAtMethod=GetStorageAtMethod;exports.GetSymKeyMethod=GetSymKeyMethod;exports.GetTransactionByBlockHashAndIndexMethod=GetTransactionByBlockHashAndIndexMethod;exports.GetTransactionByBlockNumberAndIndexMethod=GetTransactionByBlockNumberAndIndexMethod;exports.GetTransactionCountMethod=GetTransactionCountMethod;exports.GetTransactionMethod=GetTransactionMethod;exports.GetTransactionReceiptMethod=GetTransactionReceiptMethod;exports.GetUncleByBlockHashAndIndexMethod=GetUncleByBlockHashAndIndexMethod;exports.GetUncleByBlockNumberAndIndexMethod=GetUncleByBlockNumberAndIndexMethod;exports.GetWorkMethod=GetWorkMethod;exports.GoTraceMethod=GoTraceMethod;exports.HasKeyPairMethod=HasKeyPairMethod;exports.HasSymKeyMethod=HasSymKeyMethod;exports.ImportRawKeyMethod=ImportRawKeyMethod;exports.InspectMethod=InspectMethod;exports.IsMiningMethod=IsMiningMethod;exports.IsSyncingMethod=IsSyncingMethod;exports.ListAccountsMethod=ListAccountsMethod;exports.ListeningMethod=ListeningMethod;exports.LockAccountMethod=LockAccountMethod;exports.MarkTrustedPeerMethod=MarkTrustedPeerMethod;exports.MemStatsMethod=MemStatsMethod;exports.MethodProxy=MethodProxy;exports.NewAccountMethod=NewAccountMethod;exports.NewKeyPairMethod=NewKeyPairMethod;exports.NewMessageFilterMethod=NewMessageFilterMethod;exports.NewSymKeyMethod=NewSymKeyMethod;exports.NodeInfoMethod=NodeInfoMethod;exports.PeerCountMethod=PeerCountMethod;exports.PeersMethod=PeersMethod;exports.PersonalSendTransactionMethod=PersonalSendTransactionMethod;exports.PersonalSignMethod=PersonalSignMethod;exports.PersonalSignTransactionMethod=PersonalSignTransactionMethod;exports.PostMethod=PostMethod;exports.PromiEvent=PromiEvent;exports.RequestAccountsMethod=RequestAccountsMethod;exports.SeedHashMethod=SeedHashMethod;exports.SendRawTransactionMethod=SendRawTransactionMethod;exports.SendTransactionMethod=SendTransactionMethod;exports.SetBlockProfileRateMethod=SetBlockProfileRateMethod;exports.SetEtherBaseMethod=SetEtherBaseMethod;exports.SetExtraMethod=SetExtraMethod;exports.SetGasPriceMethod=SetGasPriceMethod;exports.SetHeadMethod=SetHeadMethod;exports.SetMaxMessageSizeMethod=SetMaxMessageSizeMethod;exports.SetMinPoWMethod=SetMinPoWMethod;exports.SetSolcMethod=SetSolcMethod;exports.ShhVersionMethod=ShhVersionMethod;exports.SignMethod=SignMethod;exports.SignTransactionMethod=SignTransactionMethod;exports.StacksMethod=StacksMethod;exports.StartCpuProfileMethod=StartCpuProfileMethod;exports.StartGoTraceMethod=StartGoTraceMethod;exports.StartMinerMethod=StartMinerMethod;exports.StartRpcMethod=StartRpcMethod;exports.StartWsMethod=StartWsMethod;exports.StatusMethod=StatusMethod;exports.StopCpuProfileMethod=StopCpuProfileMethod;exports.StopGoTraceMethod=StopGoTraceMethod;exports.StopMinerMethod=StopMinerMethod;exports.StopRpcMethod=StopRpcMethod;exports.StopWsMethod=StopWsMethod;exports.SubmitWorkMethod=SubmitWorkMethod;exports.TraceBlockByHashMethod=TraceBlockByHashMethod;exports.TraceBlockByNumberMethod=TraceBlockByNumberMethod;exports.TraceBlockFromFileMethod=TraceBlockFromFileMethod;exports.TraceBlockMethod=TraceBlockMethod;exports.TraceTransactionMethod=TraceTransactionMethod;exports.TransactionObserver=TransactionObserver;exports.UnlockAccountMethod=UnlockAccountMethod;exports.VerbosityMethod=VerbosityMethod;exports.VersionMethod=VersionMethod;exports.VmoduleMethod=VmoduleMethod;exports.WriteBlockProfileMethod=WriteBlockProfileMethod;exports.WriteMemProfileMethod=WriteMemProfileMethod;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/toConsumableArray":65,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"eventemitter3":289,"lodash/cloneDeep":447,"lodash/isFunction":457,"lodash/isString":465,"rxjs":538,"web3-core-subscriptions":670}],670:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('eventemitter3'),require('@babel/runtime/helpers/get'),require('lodash/isFunction')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','eventemitter3','@babel/runtime/helpers/get','lodash/isFunction'],factory):(global=global||self,factory(global.Web3CoreSubscriptions={},global._classCallCheck,global._createClass,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.EventEmitter,global._get,global.isFunction));})(void 0,function(exports,_classCallCheck,_createClass,_possibleConstructorReturn,_getPrototypeOf,_inherits,EventEmitter,_get,isFunction){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;EventEmitter=EventEmitter&&EventEmitter.hasOwnProperty('default')?EventEmitter['default']:EventEmitter;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;var AbstractSubscription=function(_EventEmitter){_inherits(AbstractSubscription,_EventEmitter);function AbstractSubscription(type,method){var _this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var utils=arguments.length>3?arguments[3]:undefined;var formatters=arguments.length>4?arguments[4]:undefined;var moduleInstance=arguments.length>5?arguments[5]:undefined;_classCallCheck(this,AbstractSubscription);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbstractSubscription).call(this));_this.type=type;_this.method=method;_this.options=options;_this.utils=utils;_this.formatters=formatters;_this.moduleInstance=moduleInstance;_this.id=null;return _this;}_createClass(AbstractSubscription,[{key:"beforeSubscription",value:function beforeSubscription(moduleInstance){}},{key:"onNewSubscriptionItem",value:function onNewSubscriptionItem(subscriptionItem){return subscriptionItem;}},{key:"subscribe",value:function subscribe(){var _this2=this;var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.callback=callback;this.beforeSubscription(this.moduleInstance);var subscriptionParameters=[];if(this.options!==null){subscriptionParameters=[this.options];}this.moduleInstance.currentProvider.subscribe(this.type,this.method,subscriptionParameters).then(function(subscriptionId){_this2.id=subscriptionId;_this2.moduleInstance.currentProvider.on('error',_this2.errorListener.bind(_this2));_this2.moduleInstance.currentProvider.on(_this2.id,_this2.subscriptionListener.bind(_this2));})["catch"](function(error){if(_this2.callback){_this2.callback(error,null);return;}_this2.emit('error',error);_this2.removeAllListeners();});return this;}},{key:"errorListener",value:function errorListener(error){if(this.callback){this.callback(error,false);return;}this.emit('error',error);}},{key:"subscriptionListener",value:function subscriptionListener(response){var formattedOutput=this.onNewSubscriptionItem(response.result);if(this.callback){this.callback(false,formattedOutput);return;}this.emit('data',formattedOutput);}},{key:"unsubscribe",value:function unsubscribe(callback){var _this3=this;return this.moduleInstance.currentProvider.unsubscribe(this.id,this.type.slice(0,3)+'_unsubscribe').then(function(response){if(!response){var error=new Error('Error on unsubscribe!');if(callback){callback(error,null);}throw error;}_this3.moduleInstance.currentProvider.removeListener('error',_this3.errorListener);_this3.moduleInstance.currentProvider.removeListener(_this3.id,_this3.subscriptionListener);_this3.id=null;_this3.removeAllListeners();if(callback){callback(false,true);}return true;});}}]);return AbstractSubscription;}(EventEmitter);var LogSubscription=function(_AbstractSubscription){_inherits(LogSubscription,_AbstractSubscription);function LogSubscription(options,utils,formatters,moduleInstance,getPastLogsMethod){var _this;_classCallCheck(this,LogSubscription);_this=_possibleConstructorReturn(this,_getPrototypeOf(LogSubscription).call(this,'eth_subscribe','logs',options,utils,formatters,moduleInstance));_this.getPastLogsMethod=getPastLogsMethod;return _this;}_createClass(LogSubscription,[{key:"subscribe",value:function subscribe(callback){var _this2=this;if(this.options.fromBlock&&this.options.fromBlock!=='latest'||this.options.fromBlock===0){this.getPastLogsMethod.parameters=[this.formatters.inputLogFormatter(this.options)];this.getPastLogsMethod.execute().then(function(logs){logs.forEach(function(log){var formattedLog=_this2.onNewSubscriptionItem(log);if(isFunction(callback)){callback(false,formattedLog);}_this2.emit('data',formattedLog);});delete _this2.options.fromBlock;_get(_getPrototypeOf(LogSubscription.prototype),"subscribe",_this2).call(_this2,callback);})["catch"](function(error){if(isFunction(callback)){callback(error,null);}_this2.emit('error',error);});return this;}_get(_getPrototypeOf(LogSubscription.prototype),"subscribe",this).call(this,callback);return this;}},{key:"onNewSubscriptionItem",value:function onNewSubscriptionItem(subscriptionItem){var log=this.formatters.outputLogFormatter(subscriptionItem);if(log.removed){this.emit('changed',log);}return log;}}]);return LogSubscription;}(AbstractSubscription);var NewHeadsSubscription=function(_AbstractSubscription){_inherits(NewHeadsSubscription,_AbstractSubscription);function NewHeadsSubscription(utils,formatters,moduleInstance){_classCallCheck(this,NewHeadsSubscription);return _possibleConstructorReturn(this,_getPrototypeOf(NewHeadsSubscription).call(this,'eth_subscribe','newHeads',null,utils,formatters,moduleInstance));}_createClass(NewHeadsSubscription,[{key:"onNewSubscriptionItem",value:function onNewSubscriptionItem(subscriptionItem){return this.formatters.outputBlockFormatter(subscriptionItem);}}]);return NewHeadsSubscription;}(AbstractSubscription);var NewPendingTransactionsSubscription=function(_AbstractSubscription){_inherits(NewPendingTransactionsSubscription,_AbstractSubscription);function NewPendingTransactionsSubscription(utils,formatters,moduleInstance){_classCallCheck(this,NewPendingTransactionsSubscription);return _possibleConstructorReturn(this,_getPrototypeOf(NewPendingTransactionsSubscription).call(this,'eth_subscribe','newPendingTransactions',null,utils,formatters,moduleInstance));}return NewPendingTransactionsSubscription;}(AbstractSubscription);var SyncingSubscription=function(_AbstractSubscription){_inherits(SyncingSubscription,_AbstractSubscription);function SyncingSubscription(utils,formatters,moduleInstance){var _this;_classCallCheck(this,SyncingSubscription);_this=_possibleConstructorReturn(this,_getPrototypeOf(SyncingSubscription).call(this,'eth_subscribe','syncing',null,utils,formatters,moduleInstance));_this.isSyncing=null;return _this;}_createClass(SyncingSubscription,[{key:"onNewSubscriptionItem",value:function onNewSubscriptionItem(subscriptionItem){if(typeof subscriptionItem!=='boolean'){var isSyncing=subscriptionItem.syncing;if(this.isSyncing===null){this.isSyncing=isSyncing;this.emit('changed',this.isSyncing);return subscriptionItem.status;}if(this.isSyncing!==isSyncing){this.isSyncing=isSyncing;this.emit('changed',this.isSyncing);}return subscriptionItem.status;}this.isSyncing=subscriptionItem;this.emit('changed',subscriptionItem);return subscriptionItem;}}]);return SyncingSubscription;}(AbstractSubscription);var MessagesSubscription=function(_AbstractSubscription){_inherits(MessagesSubscription,_AbstractSubscription);function MessagesSubscription(options,utils,formatters,moduleInstance){_classCallCheck(this,MessagesSubscription);return _possibleConstructorReturn(this,_getPrototypeOf(MessagesSubscription).call(this,'shh_subscribe','messages',options,utils,formatters,moduleInstance));}return MessagesSubscription;}(AbstractSubscription);exports.AbstractSubscription=AbstractSubscription;exports.LogSubscription=LogSubscription;exports.MessagesSubscription=MessagesSubscription;exports.NewHeadsSubscription=NewHeadsSubscription;exports.NewPendingTransactionsSubscription=NewPendingTransactionsSubscription;exports.SyncingSubscription=SyncingSubscription;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"eventemitter3":671,"lodash/isFunction":457}],671:[function(require,module,exports){
arguments[4][289][0].apply(exports,arguments)
},{"dup":289}],672:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('lodash/isObject'),require('web3-providers'),require('web3-core-method'),require('web3-utils')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','lodash/isObject','web3-providers','web3-core-method','web3-utils'],factory):(global=global||self,factory(global.Web3Core={},global._classCallCheck,global._createClass,global.isObject,global.web3Providers,global.web3CoreMethod,global.web3Utils));})(void 0,function(exports,_classCallCheck,_createClass,isObject,web3Providers,web3CoreMethod,web3Utils){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;var AbstractWeb3Module=function(){function AbstractWeb3Module(provider){var _this=this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var methodFactory=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var nodeNet=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;_classCallCheck(this,AbstractWeb3Module);this.providerResolver=new web3Providers.ProviderResolver();this.givenProvider=web3Providers.ProviderDetector.detect();this._currentProvider=this.providerResolver.resolve(provider,nodeNet);this._defaultAccount=options.defaultAccount?web3Utils.toChecksumAddress(options.defaultAccount):undefined;this._defaultBlock=options.defaultBlock||'latest';this._transactionBlockTimeout=options.transactionBlockTimeout||50;this._transactionConfirmationBlocks=options.transactionConfirmationBlocks||24;this._transactionPollingTimeout=options.transactionPollingTimeout||750;this._defaultGasPrice=options.defaultGasPrice;this._defaultGas=options.defaultGas;this.BatchRequest=function(){return new web3Providers.BatchRequest(_this);};if(methodFactory){return new web3CoreMethod.MethodProxy(this,methodFactory);}}_createClass(AbstractWeb3Module,[{key:"setProvider",value:function setProvider(provider,net){if(!this.isSameProvider(provider)){var resolvedProvider=this.providerResolver.resolve(provider,net);this.clearSubscriptions();this._currentProvider=resolvedProvider;return true;}return false;}},{key:"isSameProvider",value:function isSameProvider(provider){if(isObject(provider)){if(this.currentProvider&&this.currentProvider.constructor.name===provider.constructor.name){return this.currentProvider.host===provider.host;}return false;}return this.currentProvider.host===provider;}},{key:"clearSubscriptions",value:function clearSubscriptions(unsubscribeMethod){if(typeof this.currentProvider.clearSubscriptions!=='undefined'&&this.currentProvider.subscriptions.length>0){return this.currentProvider.clearSubscriptions(unsubscribeMethod);}return Promise.resolve(true);}},{key:"defaultBlock",get:function get(){return this._defaultBlock;},set:function set(value){this._defaultBlock=value;}},{key:"transactionBlockTimeout",get:function get(){return this._transactionBlockTimeout;},set:function set(value){this._transactionBlockTimeout=value;}},{key:"transactionConfirmationBlocks",get:function get(){return this._transactionConfirmationBlocks;},set:function set(value){this._transactionConfirmationBlocks=value;}},{key:"transactionPollingTimeout",get:function get(){return this._transactionPollingTimeout;},set:function set(value){this._transactionPollingTimeout=value;}},{key:"defaultGasPrice",get:function get(){return this._defaultGasPrice;},set:function set(value){this._defaultGasPrice=value;}},{key:"defaultGas",get:function get(){return this._defaultGas;},set:function set(value){this._defaultGas=value;}},{key:"defaultAccount",get:function get(){return this._defaultAccount;},set:function set(value){this._defaultAccount=web3Utils.toChecksumAddress(value);}},{key:"currentProvider",get:function get(){return this._currentProvider;},set:function set(value){throw new Error('The property currentProvider is read-only!');}}],[{key:"providers",get:function get(){return{HttpProvider:web3Providers.HttpProvider,WebsocketProvider:web3Providers.WebsocketProvider,IpcProvider:web3Providers.IpcProvider};}}]);return AbstractWeb3Module;}();exports.AbstractWeb3Module=AbstractWeb3Module;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"lodash/isObject":462,"web3-core-method":669,"web3-providers":698,"web3-utils":700}],698:[function(require,module,exports){
(function (process,Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof3=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof3["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('websocket'),require('xhr2-cookies'),require('url-parse'),require('@babel/runtime/helpers/typeof'),require('lodash/isFunction'),require('lodash/isObject'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/get'),require('@babel/runtime/helpers/inherits'),require('@babel/runtime/regenerator'),require('@babel/runtime/helpers/asyncToGenerator'),require('eventemitter3'),require('lodash/isArray'),require('http'),require('https')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','websocket','xhr2-cookies','url-parse','@babel/runtime/helpers/typeof','lodash/isFunction','lodash/isObject','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/get','@babel/runtime/helpers/inherits','@babel/runtime/regenerator','@babel/runtime/helpers/asyncToGenerator','eventemitter3','lodash/isArray','http','https'],factory):(global=global||self,factory(global.Web3Providers={},global._classCallCheck,global._createClass,global.websocket,global.xhr2Cookies,global.URL,global._typeof,global.isFunction,global.isObject,global._possibleConstructorReturn,global._getPrototypeOf,global._get,global._inherits,global._regeneratorRuntime,global._asyncToGenerator,global.EventEmitter,global.isArray,global.http,global.https));})(void 0,function(exports,_classCallCheck,_createClass,websocket,xhr2Cookies,URL,_typeof,isFunction,isObject,_possibleConstructorReturn,_getPrototypeOf,_get,_inherits,_regeneratorRuntime,_asyncToGenerator,EventEmitter,isArray,http,https){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;URL=URL&&URL.hasOwnProperty('default')?URL['default']:URL;_typeof=_typeof&&_typeof.hasOwnProperty('default')?_typeof['default']:_typeof;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;_regeneratorRuntime=_regeneratorRuntime&&_regeneratorRuntime.hasOwnProperty('default')?_regeneratorRuntime['default']:_regeneratorRuntime;_asyncToGenerator=_asyncToGenerator&&_asyncToGenerator.hasOwnProperty('default')?_asyncToGenerator['default']:_asyncToGenerator;EventEmitter=EventEmitter&&EventEmitter.hasOwnProperty('default')?EventEmitter['default']:EventEmitter;isArray=isArray&&isArray.hasOwnProperty('default')?isArray['default']:isArray;http=http&&http.hasOwnProperty('default')?http['default']:http;https=https&&https.hasOwnProperty('default')?https['default']:https;var global=function(){return this||(typeof self==="undefined"?"undefined":_typeof(self))==='object'&&self;}()||new Function('return this')();var ProviderResolver=function(){function ProviderResolver(providersModuleFactory){_classCallCheck(this,ProviderResolver);this.providersModuleFactory=providersModuleFactory;}_createClass(ProviderResolver,[{key:"resolve",value:function resolve(provider,net){if(!provider){return provider;}if(typeof provider==='string'){if(/^http(s)?:\/\//i.test(provider)){return this.providersModuleFactory.createHttpProvider(provider);}if(/^ws(s)?:\/\//i.test(provider)){return this.providersModuleFactory.createWebsocketProvider(provider);}if(provider&&isObject(net)&&isFunction(net.connect)){return this.providersModuleFactory.createIpcProvider(provider,net);}}if(provider.sendPayload&&provider.subscribe){return provider;}if(provider.host==='Web3EthereumProvider'){return provider;}if(typeof global.mist!=='undefined'&&provider.constructor.name==='EthereumProvider'){return this.providersModuleFactory.createMistEthereumProvider(provider);}if(provider.isEIP1193){return this.providersModuleFactory.createWeb3EthereumProvider(provider);}if(this.isMetamaskInpageProvider(provider)){return this.providersModuleFactory.createMetamaskProvider(provider);}return this.providersModuleFactory.createCustomProvider(provider);}},{key:"isMetamaskInpageProvider",value:function isMetamaskInpageProvider(provider){return provider.constructor.name==='MetamaskInpageProvider';}}]);return ProviderResolver;}();var messageId=0;var JsonRpcMapper=function(){function JsonRpcMapper(){_classCallCheck(this,JsonRpcMapper);}_createClass(JsonRpcMapper,null,[{key:"toPayload",value:function toPayload(method,params){if(!method){throw new Error("JSONRPC method should be specified for params: \"".concat(JSON.stringify(params),"\"!"));}var id=messageId;messageId++;return{jsonrpc:'2.0',id:id,method:method,params:params||[]};}}]);return JsonRpcMapper;}();var JsonRpcResponseValidator=function(){function JsonRpcResponseValidator(){_classCallCheck(this,JsonRpcResponseValidator);}_createClass(JsonRpcResponseValidator,null,[{key:"validate",value:function validate(response){var payload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(isObject(response)){if(response.error){if(response.error instanceof Error){return new Error("Node error: ".concat(response.error.message));}return new Error("Node error: ".concat(JSON.stringify(response.error)));}if(payload&&response.id!==payload.id){return new Error("Validation error: Invalid JSON-RPC response ID (request: ".concat(payload.id," / response: ").concat(response.id,")"));}if(response.result===undefined){return new Error('Validation error: Undefined JSON-RPC result');}return true;}return new Error('Validation error: Response should be of type Object');}}]);return JsonRpcResponseValidator;}();var AbstractSocketProvider=function(_EventEmitter){_inherits(AbstractSocketProvider,_EventEmitter);function AbstractSocketProvider(connection,timeout){var _this;_classCallCheck(this,AbstractSocketProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbstractSocketProvider).call(this));_this.connection=connection;_this.timeout=timeout;_this.subscriptions={};_this.registerEventListeners();_this.READY='ready';_this.CONNECT='connect';_this.ERROR='error';_this.CLOSE='close';_this.SOCKET_MESSAGE='socket_message';_this.SOCKET_READY='socket_ready';_this.SOCKET_CLOSE='socket_close';_this.SOCKET_ERROR='socket_error';_this.SOCKET_CONNECT='socket_connect';_this.SOCKET_NETWORK_CHANGED='socket_networkChanged';_this.SOCKET_ACCOUNTS_CHANGED='socket_accountsChanged';return _this;}_createClass(AbstractSocketProvider,[{key:"supportsSubscriptions",value:function supportsSubscriptions(){return true;}},{key:"registerEventListeners",value:function registerEventListeners(){}},{key:"removeAllSocketListeners",value:function removeAllSocketListeners(){this.removeAllListeners(this.SOCKET_MESSAGE);this.removeAllListeners(this.SOCKET_READY);this.removeAllListeners(this.SOCKET_CLOSE);this.removeAllListeners(this.SOCKET_ERROR);this.removeAllListeners(this.SOCKET_CONNECT);}},{key:"disconnect",value:function disconnect(code,reason){}},{key:"send",value:function(){var _send=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(method,parameters){var response,validationResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.sendPayload(JsonRpcMapper.toPayload(method,parameters));case 2:response=_context.sent;validationResult=JsonRpcResponseValidator.validate(response);if(!(validationResult instanceof Error)){_context.next=6;break;}throw validationResult;case 6:return _context.abrupt("return",response.result);case 7:case"end":return _context.stop();}}},_callee,this);}));function send(_x,_x2){return _send.apply(this,arguments);}return send;}()},{key:"sendBatch",value:function sendBatch(methods,moduleInstance){var payload=[];methods.forEach(function(method){method.beforeExecution(moduleInstance);payload.push(JsonRpcMapper.toPayload(method.rpcMethod,method.parameters));});return this.sendPayload(payload);}},{key:"onReady",value:function onReady(event){this.emit(this.READY,event);this.emit(this.SOCKET_READY,event);}},{key:"onError",value:function onError(error){this.emit(this.ERROR,error);this.emit(this.SOCKET_ERROR,error);this.removeAllSocketListeners();}},{key:"onClose",value:function onClose(){var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.emit(this.CLOSE,error);this.emit(this.SOCKET_CLOSE,error);this.removeAllSocketListeners();this.removeAllListeners();}},{key:"onConnect",value:function(){var _onConnect=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var subscriptionKeys,subscriptionId,_i,_subscriptionKeys,key;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:subscriptionKeys=Object.keys(this.subscriptions);if(!(subscriptionKeys.length>0)){_context2.next=13;break;}_i=0,_subscriptionKeys=subscriptionKeys;case 3:if(!(_i<_subscriptionKeys.length)){_context2.next=13;break;}key=_subscriptionKeys[_i];_context2.next=7;return this.subscribe(this.subscriptions[key].subscribeMethod,this.subscriptions[key].parameters[0],this.subscriptions[key].parameters.slice(1));case 7:subscriptionId=_context2.sent;if(key!==subscriptionId){delete this.subscriptions[subscriptionId];}this.subscriptions[key].id=subscriptionId;case 10:_i++;_context2.next=3;break;case 13:this.emit(this.SOCKET_CONNECT);this.emit(this.CONNECT);case 15:case"end":return _context2.stop();}}},_callee2,this);}));function onConnect(){return _onConnect.apply(this,arguments);}return onConnect;}()},{key:"onMessage",value:function onMessage(response){var event;if(!isObject(response)){response=JSON.parse(response);}if(isArray(response)){event=response[0].id;}else if(typeof response.id==='undefined'){event=this.getSubscriptionEvent(response.params.subscription);response=response.params;}else{event=response.id;}this.emit(this.SOCKET_MESSAGE,response);this.emit(event,response);}},{key:"reset",value:function reset(){this.removeAllListeners();this.registerEventListeners();}},{key:"subscribe",value:function subscribe(){var _this2=this;var subscribeMethod=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'eth_subscribe';var subscriptionMethod=arguments.length>1?arguments[1]:undefined;var parameters=arguments.length>2?arguments[2]:undefined;parameters.unshift(subscriptionMethod);return this.send(subscribeMethod,parameters).then(function(subscriptionId){_this2.subscriptions[subscriptionId]={id:subscriptionId,subscribeMethod:subscribeMethod,parameters:parameters};return subscriptionId;})["catch"](function(error){throw new Error("Provider error: ".concat(error));});}},{key:"unsubscribe",value:function unsubscribe(subscriptionId){var _this3=this;var unsubscribeMethod=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'eth_unsubscribe';if(this.hasSubscription(subscriptionId)){return this.send(unsubscribeMethod,[subscriptionId]).then(function(response){if(response){_this3.removeAllListeners(_this3.getSubscriptionEvent(subscriptionId));delete _this3.subscriptions[subscriptionId];}return response;});}return Promise.reject(new Error("Provider error: Subscription with ID ".concat(subscriptionId," does not exist.")));}},{key:"clearSubscriptions",value:function clearSubscriptions(){var _this4=this;var unsubscribeMethod=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'eth_unsubscribe';var unsubscribePromises=[];Object.keys(this.subscriptions).forEach(function(key){_this4.removeAllListeners(key);unsubscribePromises.push(_this4.unsubscribe(_this4.subscriptions[key].id,unsubscribeMethod));});return Promise.all(unsubscribePromises).then(function(results){if(results.includes(false)){throw new Error("Could not unsubscribe all subscriptions: ".concat(JSON.stringify(results)));}return true;});}},{key:"hasSubscription",value:function hasSubscription(subscriptionId){return typeof this.getSubscriptionEvent(subscriptionId)!=='undefined';}},{key:"getSubscriptionEvent",value:function getSubscriptionEvent(subscriptionId){var _this5=this;if(this.subscriptions[subscriptionId]){return subscriptionId;}var event;Object.keys(this.subscriptions).forEach(function(key){if(_this5.subscriptions[key].id===subscriptionId){event=key;}});return event;}},{key:"connected",get:function get(){}}]);return AbstractSocketProvider;}(EventEmitter);var WebsocketProvider=function(_AbstractSocketProvid){_inherits(WebsocketProvider,_AbstractSocketProvid);function WebsocketProvider(connection,timeout){var _this;_classCallCheck(this,WebsocketProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(WebsocketProvider).call(this,connection,timeout));_this.host=_this.connection.url;return _this;}_createClass(WebsocketProvider,[{key:"onMessage",value:function onMessage(messageEvent){_get(_getPrototypeOf(WebsocketProvider.prototype),"onMessage",this).call(this,messageEvent.data);}},{key:"onError",value:function onError(event){if(event.code==='ECONNREFUSED'){this.reconnect();return;}_get(_getPrototypeOf(WebsocketProvider.prototype),"onError",this).call(this,event);}},{key:"onClose",value:function onClose(closeEvent){if(closeEvent.code!==1000||closeEvent.wasClean===false){this.reconnect();return;}_get(_getPrototypeOf(WebsocketProvider.prototype),"onClose",this).call(this);}},{key:"reconnect",value:function reconnect(){var _this2=this;setTimeout(function(){_this2.removeAllSocketListeners();var connection=[];if(_this2.connection.constructor.name==='W3CWebsocket'){connection=new _this2.connection.constructor(_this2.host,_this2.connection._client.protocol,null,_this2.connection._client.headers,_this2.connection._client.requestOptions,_this2.connection._client.config);}else{connection=new _this2.connection.constructor(_this2.host,_this2.connection.protocol||undefined);}_this2.connection=connection;_this2.registerEventListeners();},5000);}},{key:"disconnect",value:function disconnect(){var code=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var reason=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.connection.close(code,reason);}},{key:"registerEventListeners",value:function registerEventListeners(){this.connection.addEventListener('message',this.onMessage.bind(this));this.connection.addEventListener('open',this.onReady.bind(this));this.connection.addEventListener('open',this.onConnect.bind(this));this.connection.addEventListener('close',this.onClose.bind(this));this.connection.addEventListener('error',this.onError.bind(this));}},{key:"removeAllListeners",value:function removeAllListeners(event){switch(event){case this.SOCKET_MESSAGE:this.connection.removeEventListener('message',this.onMessage);break;case this.SOCKET_READY:this.connection.removeEventListener('open',this.onReady);break;case this.SOCKET_CLOSE:this.connection.removeEventListener('close',this.onClose);break;case this.SOCKET_ERROR:this.connection.removeEventListener('error',this.onError);break;case this.SOCKET_CONNECT:this.connection.removeEventListener('connect',this.onConnect);break;}_get(_getPrototypeOf(WebsocketProvider.prototype),"removeAllListeners",this).call(this,event);}},{key:"isConnecting",value:function isConnecting(){return this.connection.readyState===this.connection.CONNECTING;}},{key:"sendPayload",value:function sendPayload(payload){var _this3=this;return new Promise(function(resolve,reject){_this3.once('error',reject);if(!_this3.isConnecting()){var timeout,id;if(_this3.connection.readyState!==_this3.connection.OPEN){_this3.removeListener('error',reject);return reject(new Error('Connection error: Connection is not open on send()'));}try{_this3.connection.send(JSON.stringify(payload));}catch(error){_this3.removeListener('error',reject);return reject(error);}if(_this3.timeout){timeout=setTimeout(function(){reject(new Error('Connection error: Timeout exceeded'));},_this3.timeout);}if(isArray(payload)){id=payload[0].id;}else{id=payload.id;}_this3.once(id,function(response){if(timeout){clearTimeout(timeout);}_this3.removeListener('error',reject);return resolve(response);});return;}_this3.once('connect',function(){_this3.sendPayload(payload).then(function(response){_this3.removeListener('error',reject);return resolve(response);})["catch"](function(error){_this3.removeListener('error',reject);return reject(error);});});});}},{key:"connected",get:function get(){return this.connection.readyState===this.connection.OPEN;}}]);return WebsocketProvider;}(AbstractSocketProvider);var IpcProvider=function(_AbstractSocketProvid){_inherits(IpcProvider,_AbstractSocketProvid);function IpcProvider(connection,path){var _this;_classCallCheck(this,IpcProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(IpcProvider).call(this,connection,null));_this.host=path;_this.lastChunk='';return _this;}_createClass(IpcProvider,[{key:"disconnect",value:function disconnect(){this.connection.destroy();}},{key:"reconnect",value:function reconnect(){this.connection.connect({path:this.path});}},{key:"onMessage",value:function onMessage(message){var _this2=this;var result=null;var returnValues=[];var dechunkedData=message.toString().replace(/\}[\n\r]?\{/g,'}|--|{').replace(/\}\][\n\r]?\[\{/g,'}]|--|[{').replace(/\}[\n\r]?\[\{/g,'}|--|[{').replace(/\}\][\n\r]?\{/g,'}]|--|{').split('|--|');dechunkedData.forEach(function(data){result=null;if(_this2.lastChunk){data=_this2.lastChunk+data;}try{result=JSON.parse(data);}catch(error){_this2.lastChunk=data;return;}_this2.lastChunk=null;returnValues.push(result);});returnValues.forEach(function(chunk){_get(_getPrototypeOf(IpcProvider.prototype),"onMessage",_this2).call(_this2,chunk);});}},{key:"registerEventListeners",value:function registerEventListeners(){this.connection.on('data',this.onMessage.bind(this));this.connection.on('connect',this.onConnect.bind(this));this.connection.on('error',this.onError.bind(this));this.connection.on('close',this.onClose.bind(this));this.connection.on('timeout',this.onClose.bind(this));this.connection.on('ready',this.onReady.bind(this));}},{key:"removeAllListeners",value:function removeAllListeners(event){switch(event){case this.SOCKET_MESSAGE:this.connection.removeListener('data',this.onMessage);break;case this.SOCKET_READY:this.connection.removeListener('ready',this.onReady);break;case this.SOCKET_CLOSE:this.connection.removeListener('close',this.onClose);break;case this.SOCKET_ERROR:this.connection.removeListener('error',this.onError);break;case this.SOCKET_CONNECT:this.connection.removeListener('connect',this.onConnect);break;}_get(_getPrototypeOf(IpcProvider.prototype),"removeAllListeners",this).call(this,event);}},{key:"sendPayload",value:function sendPayload(payload){var _this3=this;return new Promise(function(resolve,reject){_this3.once('error',reject);if(!_this3.connection.writable){_this3.connection.connect({path:_this3.path});}if(_this3.connection.write(JSON.stringify(payload))){var id;if(isArray(payload)){id=payload[0].id;}else{id=payload.id;}_this3.once(id,function(response){resolve(response);_this3.removeListener('error',reject);});return;}_this3.removeListener('error',reject);return reject(new Error("Connection error: Couldn't write on the socket with Socket.write(payload)"));});}},{key:"connected",get:function get(){return!this.connection.pending;}}]);return IpcProvider;}(AbstractSocketProvider);var HttpProvider=function(){function HttpProvider(){var host=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'http://localhost:8545';var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var providersModuleFactory=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,HttpProvider);this.host=host;this.timeout=options.timeout||0;this.headers=options.headers;this.withCredentials=options.withCredentials||false;this.connected=true;this.providersModuleFactory=providersModuleFactory;this.agent={};var keepAlive=false;if(options.keepAlive===true||options.keepAlive!==false){keepAlive=true;}if(host.substring(0,5)==='https'){this.agent['httpsAgent']=new https.Agent({keepAlive:keepAlive});}else{this.agent['httpAgent']=new http.Agent({keepAlive:keepAlive});}}_createClass(HttpProvider,[{key:"supportsSubscriptions",value:function supportsSubscriptions(){return false;}},{key:"subscribe",value:function subscribe(){throw new Error('Subscriptions are not supported with the HttpProvider.');}},{key:"unsubscribe",value:function unsubscribe(){throw new Error('Subscriptions are not supported with the HttpProvider.');}},{key:"disconnect",value:function disconnect(){return true;}},{key:"send",value:function(){var _send=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(method,parameters){var response,validationResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.sendPayload(JsonRpcMapper.toPayload(method,parameters));case 2:response=_context.sent;validationResult=JsonRpcResponseValidator.validate(response);if(!(validationResult instanceof Error)){_context.next=6;break;}throw validationResult;case 6:return _context.abrupt("return",response.result);case 7:case"end":return _context.stop();}}},_callee,this);}));function send(_x,_x2){return _send.apply(this,arguments);}return send;}()},{key:"sendBatch",value:function sendBatch(methods,moduleInstance){var payload=[];methods.forEach(function(method){method.beforeExecution(moduleInstance);payload.push(JsonRpcMapper.toPayload(method.rpcMethod,method.parameters));});return this.sendPayload(payload);}},{key:"sendPayload",value:function sendPayload(payload){var _this=this;return new Promise(function(resolve,reject){var request=_this.providersModuleFactory.createXMLHttpRequest(_this.host,_this.timeout,_this.headers,_this.agent,_this.withCredentials);request.onreadystatechange=function(){if(request.readyState!==0&&request.readyState!==1){_this.connected=true;}if(request.readyState===4){if(request.status===200){try{return resolve(JSON.parse(request.responseText));}catch(error){reject(new Error("Invalid JSON as response: ".concat(request.responseText)));}}if(_this.isInvalidHttpEndpoint(request)){reject(new Error("Connection refused or URL couldn't be resolved: ".concat(_this.host)));}if(request.status>=400&&request.status<=499){reject(new Error("HttpProvider ERROR: ".concat(request.responseText," (code: ").concat(request.status,")")));}}};request.ontimeout=function(){_this.connected=false;reject(new Error("Connection error: Timeout exceeded after ".concat(_this.timeout,"ms")));};try{request.send(JSON.stringify(payload));}catch(error){_this.connected=false;reject(error);}});}},{key:"isInvalidHttpEndpoint",value:function isInvalidHttpEndpoint(request){return request.response===null&&request.status===0;}}]);return HttpProvider;}();var BatchRequest=function(){function BatchRequest(moduleInstance){_classCallCheck(this,BatchRequest);this.moduleInstance=moduleInstance;this.methods=[];this.accounts=[];}_createClass(BatchRequest,[{key:"add",value:function add(method){if(!isObject(method)&&method){throw new Error('Please provide a object of type AbstractMethod.');}this.methods.push(method);}},{key:"execute",value:function(){var _execute=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _this=this;var payload,response,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.toPayload();case 2:payload=_context.sent;_context.next=5;return this.moduleInstance.currentProvider.sendPayload(payload);case 5:response=_context.sent;errors=[];this.methods.forEach(function(method,index){if(!isArray(response)){if(method.callback){method.callback(new Error("BatchRequest error: Response should be of type Array but is: ".concat(_typeof(response))),null);return;}throw new Error("BatchRequest error: Response should be of type Array but is: ".concat(_typeof(response)));}var responseItem=response[index]||null;var validationResult=JsonRpcResponseValidator.validate(responseItem);if(validationResult===true){try{var mappedResult;if(method.Type==='eth-send-transaction-method'||method.Type==='observed-transaction-method'){mappedResult=responseItem.result;}else{mappedResult=method.afterExecution(responseItem.result);}response[index]=mappedResult;if(method.callback){method.callback(false,mappedResult);}}catch(error){errors[index]={method:method,error:error};if(method.callback){method.callback(error,null);}}return;}errors[index]={method:method,error:validationResult};if(_this.accounts[index]&&_this.accounts[index].nonce){_this.accounts[index].nonce--;}if(method.callback){method.callback(validationResult,null);}});if(!(errors.length>0)){_context.next=10;break;}throw{errors:errors,response:response};case 10:return _context.abrupt("return",{methods:this.methods,response:response});case 11:case"end":return _context.stop();}}},_callee,this);}));function execute(){return _execute.apply(this,arguments);}return execute;}()},{key:"toPayload",value:function(){var _toPayload=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var payload,i,method,account,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=[];i=0;case 2:if(!(i<this.methods.length)){_context2.next=18;break;}method=this.methods[i];method.beforeExecution(this.moduleInstance);if(!(this.moduleInstance.accounts&&method.Type==='eth-send-transaction-method'&&method.hasAccounts())){_context2.next=14;break;}account=this.moduleInstance.accounts.wallet[method.parameters[0].from];if(!account){_context2.next=14;break;}_context2.next=10;return method.signTransaction(account);case 10:response=_context2.sent;method.parameters=[response.rawTransaction];method.rpcMethod='eth_sendRawTransaction';this.accounts[i]=account;case 14:payload.push(JsonRpcMapper.toPayload(method.rpcMethod,method.parameters));case 15:i++;_context2.next=2;break;case 18:return _context2.abrupt("return",payload);case 19:case"end":return _context2.stop();}}},_callee2,this);}));function toPayload(){return _toPayload.apply(this,arguments);}return toPayload;}()}]);return BatchRequest;}();var Web3EthereumProvider=function(_AbstractSocketProvid){_inherits(Web3EthereumProvider,_AbstractSocketProvid);function Web3EthereumProvider(connection){var _this;_classCallCheck(this,Web3EthereumProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(Web3EthereumProvider).call(this,connection,null));_this.host='Web3EthereumProvider';return _this;}_createClass(Web3EthereumProvider,[{key:"registerEventListeners",value:function registerEventListeners(){this.connection.on('notification',this.onMessage.bind(this));this.connection.on('connect',this.onConnect.bind(this));this.connection.on('connect',this.onReady.bind(this));this.connection.on('close',this.onClose.bind(this));this.connection.on('networkChanged',this.onNetworkChanged.bind(this));this.connection.on('accountsChanged',this.onAccountsChanged.bind(this));}},{key:"removeAllListeners",value:function removeAllListeners(event){switch(event){case this.SOCKET_NETWORK_CHANGED:this.connection.removeListener('networkChanged',this.onNetworkChanged);break;case this.SOCKET_ACCOUNTS_CHANGED:this.connection.removeListener('accountsChanged',this.onAccountsChanged);break;case this.SOCKET_MESSAGE:this.connection.removeListener('notification',this.onMessage);break;case this.SOCKET_READY:this.connection.removeListener('connect',this.onReady);break;case this.SOCKET_CLOSE:this.connection.removeListener('close',this.onClose);break;case this.SOCKET_ERROR:this.connection.removeListener('close',this.onError);break;case this.SOCKET_CONNECT:this.connection.removeListener('connect',this.onConnect);break;}_get(_getPrototypeOf(Web3EthereumProvider.prototype),"removeAllListeners",this).call(this,event);}},{key:"removeAllSocketListeners",value:function removeAllSocketListeners(){this.connection.removeAllListeners();}},{key:"onNetworkChanged",value:function onNetworkChanged(networkId){this.emit('networkChanged',networkId);}},{key:"onAccountsChanged",value:function onAccountsChanged(accounts){this.emit('accountsChanged',accounts);}},{key:"onMessage",value:function onMessage(response){this.emit(this.getSubscriptionEvent(response.subscription),response);}},{key:"send",value:function(){var _send=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(method,parameters){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.connection.send(method,parameters);case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);throw new Error("Node error: ".concat(_context.t0.message));case 9:case"end":return _context.stop();}}},_callee,this,[[0,6]]);}));function send(_x,_x2){return _send.apply(this,arguments);}return send;}()},{key:"sendBatch",value:function sendBatch(methods,moduleInstance){var _this2=this;var methodCalls=[];methods.forEach(function(method){method.beforeExecution(moduleInstance);methodCalls.push(_this2.connection.send(method.rpcMethod,method.parameters));});return Promise.all(methodCalls);}}]);return Web3EthereumProvider;}(AbstractSocketProvider);var MetamaskProvider=function(_AbstractSocketProvid){_inherits(MetamaskProvider,_AbstractSocketProvid);function MetamaskProvider(inpageProvider){var _this;_classCallCheck(this,MetamaskProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(MetamaskProvider).call(this,inpageProvider,null));_this.host='metamask';return _this;}_createClass(MetamaskProvider,[{key:"registerEventListeners",value:function registerEventListeners(){this.connection.on('accountsChanged',this.onAccountsChanged.bind(this));this.connection.on('networkChanged',this.onReady.bind(this));this.connection.on('networkChanged',this.onNetworkChanged.bind(this));this.connection.on('data',this.onMessage.bind(this));this.connection.on('error',this.onError.bind(this));}},{key:"onMessage",value:function onMessage(metamaskParam,payload){_get(_getPrototypeOf(MetamaskProvider.prototype),"onMessage",this).call(this,payload);}},{key:"removeAllListeners",value:function removeAllListeners(event){switch(event){case this.SOCKET_NETWORK_CHANGED:this.connection.removeListener('networkChanged',this.onNetworkChanged);break;case this.SOCKET_ACCOUNTS_CHANGED:this.connection.removeListener('accountsChanged',this.onAccountsChanged);break;case this.SOCKET_MESSAGE:this.connection.removeListener('data',this.onMessage);break;case this.SOCKET_ERROR:this.connection.removeListener('error',this.onError);break;}_get(_getPrototypeOf(MetamaskProvider.prototype),"removeAllListeners",this).call(this,event);}},{key:"removeAllSocketListeners",value:function removeAllSocketListeners(){this.connection.removeListener(this.SOCKET_NETWORK_CHANGED,this.onNetworkChanged);this.connection.removeListener(this.SOCKET_ACCOUNTS_CHANGED,this.onAccountsChanged);_get(_getPrototypeOf(MetamaskProvider.prototype),"removeAllSocketListeners",this).call(this);}},{key:"onNetworkChanged",value:function onNetworkChanged(networkId){this.emit('networkChanged',networkId);}},{key:"onAccountsChanged",value:function onAccountsChanged(accounts){this.emit('accountsChanged',accounts);}},{key:"disconnect",value:function disconnect(){return true;}},{key:"sendPayload",value:function sendPayload(payload){var _this2=this;return new Promise(function(resolve,reject){_this2.connection.send(payload,function(error,response){_this2.removeAllListeners(payload.id);if(!error){return resolve(response);}reject(error);});});}},{key:"connected",get:function get(){return this.connection.isConnected();}}]);return MetamaskProvider;}(AbstractSocketProvider);var MistEthereumProvider=function(_AbstractSocketProvid){_inherits(MistEthereumProvider,_AbstractSocketProvid);function MistEthereumProvider(connection){var _this;_classCallCheck(this,MistEthereumProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(MistEthereumProvider).call(this,connection,null));_this.host='mist';return _this;}_createClass(MistEthereumProvider,[{key:"registerEventListeners",value:function registerEventListeners(){this.connection.on('data',this.onMessage.bind(this));this.connection.on('error',this.onError.bind(this));this.connection.on('connect',this.onConnect.bind(this));this.connection.on('connect',this.onReady.bind(this));this.connection.on('end',this.onClose.bind(this));}},{key:"removeAllListeners",value:function removeAllListeners(event){switch(event){case this.SOCKET_MESSAGE:this.connection.removeListener('data',this.onMessage);break;case this.SOCKET_ERROR:this.connection.removeListener('error',this.onError);break;case this.SOCKET_CONNECT:this.connection.removeListener('connect',this.onConnect);break;case this.SOCKET_READY:this.connection.removeListener('connect',this.onConnect);break;case this.SOCKET_CLOSE:this.connection.removeListener('end',this.onClose);break;}_get(_getPrototypeOf(MistEthereumProvider.prototype),"removeAllListeners",this).call(this,event);}},{key:"disconnect",value:function disconnect(){return true;}},{key:"sendPayload",value:function sendPayload(payload){var _this2=this;return new Promise(function(resolve,reject){_this2.connection.send(payload,function(error,response){_this2.removeAllListeners(payload.id);if(!error){return resolve(response);}reject(error);});});}},{key:"connected",get:function get(){return this.connection.isConnected();}}]);return MistEthereumProvider;}(AbstractSocketProvider);var CustomProvider=function(){function CustomProvider(connection){_classCallCheck(this,CustomProvider);this.host='CustomProvider';this.connection=connection;this.checkConnectionMethods();}_createClass(CustomProvider,[{key:"supportsSubscriptions",value:function supportsSubscriptions(){return false;}},{key:"checkConnectionMethods",value:function checkConnectionMethods(){if(this.connection.send||this.connection.sendAsync){return true;}throw new Error('Invalid provider injected!');}},{key:"subscribe",value:function subscribe(){throw new Error('Subscriptions are not supported with the CustomProvider.');}},{key:"unsubscribe",value:function unsubscribe(){throw new Error('Subscriptions are not supported with the CustomProvider.');}},{key:"send",value:function(){var _send=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(method,parameters){var response,validationResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.sendPayload(JsonRpcMapper.toPayload(method,parameters));case 2:response=_context.sent;validationResult=JsonRpcResponseValidator.validate(response);if(!(validationResult instanceof Error)){_context.next=6;break;}throw validationResult;case 6:return _context.abrupt("return",response.result);case 7:case"end":return _context.stop();}}},_callee,this);}));function send(_x,_x2){return _send.apply(this,arguments);}return send;}()},{key:"sendBatch",value:function sendBatch(methods,moduleInstance){var payload=[];methods.forEach(function(method){method.beforeExecution(moduleInstance);payload.push(JsonRpcMapper.toPayload(method.rpcMethod,method.parameters));});return this.sendPayload(payload);}},{key:"sendPayload",value:function sendPayload(payload){var _this=this;return new Promise(function(resolve,reject){if(_this.connection.sendAsync){_this.connection.sendAsync(payload,function(error,response){if(!error){resolve(response);}reject(error);});return;}_this.connection.send(payload,function(error,response){if(!error){resolve(response);}reject(error);});});}}]);return CustomProvider;}();var ProvidersModuleFactory=function(){function ProvidersModuleFactory(){_classCallCheck(this,ProvidersModuleFactory);}_createClass(ProvidersModuleFactory,[{key:"createBatchRequest",value:function createBatchRequest(moduleInstance){return new BatchRequest(moduleInstance);}},{key:"createProviderResolver",value:function createProviderResolver(){return new ProviderResolver(this);}},{key:"createHttpProvider",value:function createHttpProvider(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new HttpProvider(url,options,this);}},{key:"createXMLHttpRequest",value:function createXMLHttpRequest(host,timeout,headers,agent,withCredentials){var request;if(typeof process!=='undefined'&&process.versions!=null&&process.versions.node!=null){request=new xhr2Cookies.XMLHttpRequest();request.nodejsSet(agent);}else{request=new XMLHttpRequest();}request.open('POST',host,true);request.setRequestHeader('Content-Type','application/json');request.timeout=timeout;request.withCredentials=withCredentials;if(headers){headers.forEach(function(header){request.setRequestHeader(header.name,header.value);});}return request;}},{key:"createWebsocketProvider",value:function createWebsocketProvider(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var connection='';if(typeof process!=='undefined'&&process.versions!=null&&process.versions.node!=null){var headers=options.headers||{};var urlObject=new URL(url);if(!headers.authorization&&urlObject.username&&urlObject.password){var authToken=Buffer.from("".concat(urlObject.username,":").concat(urlObject.password)).toString('base64');headers.authorization="Basic ".concat(authToken);}connection=new websocket.w3cwebsocket(url,options.protocol,null,headers,null,options.clientConfig);}else{connection=new window.WebSocket(url,options.protocol);}return new WebsocketProvider(connection,options.timeout);}},{key:"createIpcProvider",value:function createIpcProvider(path,net){return new IpcProvider(net.connect({path:path}),path);}},{key:"createWeb3EthereumProvider",value:function createWeb3EthereumProvider(connection){return new Web3EthereumProvider(connection);}},{key:"createMetamaskProvider",value:function createMetamaskProvider(inpageProvider){return new MetamaskProvider(inpageProvider);}},{key:"createMistEthereumProvider",value:function createMistEthereumProvider(mistEthereumProvider){return new MistEthereumProvider(mistEthereumProvider);}},{key:"createCustomProvider",value:function createCustomProvider(connection){return new CustomProvider(connection);}}]);return ProvidersModuleFactory;}();var global$1=function(){return this||(typeof self==="undefined"?"undefined":_typeof(self))==='object'&&self;}()||new Function('return this')();var ProviderDetector=function(){function ProviderDetector(){_classCallCheck(this,ProviderDetector);}_createClass(ProviderDetector,null,[{key:"detect",value:function detect(){if(typeof global$1.ethereumProvider!=='undefined'&&global$1.ethereumProvider.constructor.name==='EthereumProvider'){return global$1.ethereumProvider;}if(typeof global$1.web3!=='undefined'&&global$1.web3.currentProvider){return global$1.web3.currentProvider;}return null;}}]);return ProviderDetector;}();function HttpProvider$1(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new ProvidersModuleFactory().createHttpProvider(url,options);}function WebsocketProvider$1(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new ProvidersModuleFactory().createWebsocketProvider(url,options);}function IpcProvider$1(path,net){return new ProvidersModuleFactory().createIpcProvider(path,net);}function BatchRequest$1(moduleInstance){return new ProvidersModuleFactory().createBatchRequest(moduleInstance);}function ProviderResolver$1(){return new ProvidersModuleFactory().createProviderResolver();}exports.BatchRequest=BatchRequest$1;exports.HttpProvider=HttpProvider$1;exports.IpcProvider=IpcProvider$1;exports.ProviderDetector=ProviderDetector;exports.ProviderResolver=ProviderResolver$1;exports.ProvidersModuleFactory=ProvidersModuleFactory;exports.Web3EthereumProvider=Web3EthereumProvider;exports.WebsocketProvider=WebsocketProvider$1;Object.defineProperty(exports,'__esModule',{value:true});});

}).call(this,require('_process'),require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"_process":1221,"buffer":1133,"eventemitter3":289,"http":1260,"https":1185,"lodash/isArray":453,"lodash/isFunction":457,"lodash/isObject":462,"url-parse":662,"websocket":702,"xhr2-cookies":706}],674:[function(require,module,exports){
(function (process,Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-utils'),require('web3-core-helpers'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('@babel/runtime/regenerator'),require('@babel/runtime/helpers/asyncToGenerator'),require('@babel/runtime/helpers/createClass'),require('@babel/runtime/helpers/assertThisInitialized'),require('lodash/isFunction'),require('lodash/isObject'),require('eth-lib/lib/hash'),require('eth-lib/lib/rlp'),require('eth-lib/lib/bytes'),require('eth-lib/lib/account'),require('web3-core'),require('scryptsy'),require('lodash/isString'),require('uuid'),require('randombytes'),require('pbkdf2'),require('browserify-cipher')):typeof define==='function'&&define.amd?define(['exports','web3-utils','web3-core-helpers','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','web3-core-method','@babel/runtime/regenerator','@babel/runtime/helpers/asyncToGenerator','@babel/runtime/helpers/createClass','@babel/runtime/helpers/assertThisInitialized','lodash/isFunction','lodash/isObject','eth-lib/lib/hash','eth-lib/lib/rlp','eth-lib/lib/bytes','eth-lib/lib/account','web3-core','scryptsy','lodash/isString','uuid','randombytes','pbkdf2','browserify-cipher'],factory):(global=global||self,factory(global.Web3EthAccounts={},global.Utils,global.web3CoreHelpers,global._classCallCheck,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.web3CoreMethod,global._regeneratorRuntime,global._asyncToGenerator,global._createClass,global._assertThisInitialized,global.isFunction,global.isObject,global.Hash,global.RLP,global.Bytes,global.EthLibAccount,global.web3Core,global.scryptsy,global.isString,global.uuid,global.randomBytes,global.pbkdf2,global.browserifyCipher));})(void 0,function(exports,Utils,web3CoreHelpers,_classCallCheck,_possibleConstructorReturn,_getPrototypeOf,_inherits,web3CoreMethod,_regeneratorRuntime,_asyncToGenerator,_createClass,_assertThisInitialized,isFunction,isObject,Hash,RLP,Bytes,EthLibAccount,web3Core,scryptsy,isString,uuid,randomBytes,pbkdf2,browserifyCipher){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;_regeneratorRuntime=_regeneratorRuntime&&_regeneratorRuntime.hasOwnProperty('default')?_regeneratorRuntime['default']:_regeneratorRuntime;_asyncToGenerator=_asyncToGenerator&&_asyncToGenerator.hasOwnProperty('default')?_asyncToGenerator['default']:_asyncToGenerator;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;_assertThisInitialized=_assertThisInitialized&&_assertThisInitialized.hasOwnProperty('default')?_assertThisInitialized['default']:_assertThisInitialized;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;Hash=Hash&&Hash.hasOwnProperty('default')?Hash['default']:Hash;RLP=RLP&&RLP.hasOwnProperty('default')?RLP['default']:RLP;Bytes=Bytes&&Bytes.hasOwnProperty('default')?Bytes['default']:Bytes;scryptsy=scryptsy&&scryptsy.hasOwnProperty('default')?scryptsy['default']:scryptsy;isString=isString&&isString.hasOwnProperty('default')?isString['default']:isString;uuid=uuid&&uuid.hasOwnProperty('default')?uuid['default']:uuid;randomBytes=randomBytes&&randomBytes.hasOwnProperty('default')?randomBytes['default']:randomBytes;var MethodFactory=function(_AbstractMethodFactor){_inherits(MethodFactory,_AbstractMethodFactor);function MethodFactory(utils,formatters){var _this;_classCallCheck(this,MethodFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(MethodFactory).call(this,utils,formatters));_this.methods={getChainId:web3CoreMethod.ChainIdMethod,getGasPrice:web3CoreMethod.GetGasPriceMethod,getTransactionCount:web3CoreMethod.GetTransactionCountMethod};return _this;}return MethodFactory;}(web3CoreMethod.AbstractMethodFactory);var scrypt;var isNode=Object.prototype.toString.call(typeof process!=='undefined'?process:0)==='[object process]';if(isNode){var NODE_MIN_VER_WITH_BUILTIN_SCRYPT='10.5.0';var semver=require('semver');var useNodeBuiltin=isNode&&semver.Range('>='+NODE_MIN_VER_WITH_BUILTIN_SCRYPT).test(process.version);if(useNodeBuiltin){var crypto=require('crypto');scrypt=function scrypt(key,salt,N,r,p,dkLength){return crypto.scryptSync(key,salt,dkLength,{N:N,r:r,p:p});};}else{var scryptPackage;try{scryptPackage=require('scrypt');scrypt=function scrypt(key,salt,N,r,p,dkLength){return scryptPackage.hashSync(key,{N:N,r:r,p:p},dkLength,salt);};}catch(error){console.warn("\x1B[33m%s\x1B[0m","You can improve web3's peformance when running Node.js versions older than ".concat(NODE_MIN_VER_WITH_BUILTIN_SCRYPT," by installing the (deprecated) scrypt package in your project"));}}}scrypt=scrypt||scryptsy;var scrypt$1=scrypt;var Account=function(){function Account(options){var accounts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,Account);this.address=options.address;this.privateKey=options.privateKey;this.nonce=options.nonce;this.accounts=accounts;}_createClass(Account,[{key:"signTransaction",value:function signTransaction(tx,callback){return this.accounts.signTransaction(tx,this.privateKey,callback);}},{key:"sign",value:function sign(data){if(Utils.isHexStrict(data)){data=Utils.hexToBytes(data);}var messageBuffer=Buffer.from(data);var preamble="\x19Ethereum Signed Message:\n".concat(data.length);var preambleBuffer=Buffer.from(preamble);var ethMessage=Buffer.concat([preambleBuffer,messageBuffer]);var hash=Hash.keccak256s(ethMessage);var signature=EthLibAccount.sign(hash,this.privateKey);var vrs=EthLibAccount.decodeSignature(signature);return{message:data,messageHash:hash,v:vrs[0],r:vrs[1],s:vrs[2],signature:signature};}},{key:"encrypt",value:function encrypt(password,options){return Account.fromPrivateKey(this.privateKey,this.accounts).toV3Keystore(password,options);}},{key:"toV3Keystore",value:function toV3Keystore(password,options){options=options||{};var salt=options.salt||randomBytes(32);var iv=options.iv||randomBytes(16);var derivedKey;var kdf=options.kdf||'scrypt';var kdfparams={dklen:options.dklen||32,salt:salt.toString('hex')};if(kdf==='pbkdf2'){kdfparams.c=options.c||262144;kdfparams.prf='hmac-sha256';derivedKey=pbkdf2.pbkdf2Sync(Buffer.from(password),salt,kdfparams.c,kdfparams.dklen,'sha256');}else if(kdf==='scrypt'){kdfparams.n=options.n||8192;kdfparams.r=options.r||8;kdfparams.p=options.p||1;derivedKey=scrypt$1(Buffer.from(password),salt,kdfparams.n,kdfparams.r,kdfparams.p,kdfparams.dklen);}else{throw new Error('Unsupported kdf');}var cipher=browserifyCipher.createCipheriv(options.cipher||'aes-128-ctr',derivedKey.slice(0,16),iv);if(!cipher){throw new Error('Unsupported cipher');}var ciphertext=Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x',''),'hex')),cipher["final"]()]);var mac=Utils.keccak256(Buffer.concat([derivedKey.slice(16,32),Buffer.from(ciphertext,'hex')])).replace('0x','');return{version:3,id:uuid.v4({random:options.uuid||randomBytes(16)}),address:this.address.toLowerCase().replace('0x',''),crypto:{ciphertext:ciphertext.toString('hex'),cipherparams:{iv:iv.toString('hex')},cipher:options.cipher||'aes-128-ctr',kdf:kdf,kdfparams:kdfparams,mac:mac.toString('hex')}};}}],[{key:"from",value:function from(entropy){var accounts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Account(EthLibAccount.create(entropy||Utils.randomHex(32)),accounts);}},{key:"fromPrivateKey",value:function fromPrivateKey(privateKey){var accounts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Account(EthLibAccount.fromPrivate(privateKey),accounts);}},{key:"fromV3Keystore",value:function fromV3Keystore(v3Keystore,password){var nonStrict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var accounts=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(!isString(password)){throw new Error('No password given.');}var json=isObject(v3Keystore)?v3Keystore:JSON.parse(nonStrict?v3Keystore.toLowerCase():v3Keystore);if(json.version!==3){throw new Error('Not a valid V3 wallet');}var derivedKey;var kdfparams;if(json.crypto.kdf==='scrypt'){kdfparams=json.crypto.kdfparams;derivedKey=scrypt$1(Buffer.from(password),Buffer.from(kdfparams.salt,'hex'),kdfparams.n,kdfparams.r,kdfparams.p,kdfparams.dklen);}else if(json.crypto.kdf==='pbkdf2'){kdfparams=json.crypto.kdfparams;if(kdfparams.prf!=='hmac-sha256'){throw new Error('Unsupported parameters to PBKDF2');}derivedKey=pbkdf2.pbkdf2Sync(Buffer.from(password),Buffer.from(kdfparams.salt,'hex'),kdfparams.c,kdfparams.dklen,'sha256');}else{throw new Error('Unsupported key derivation scheme');}var ciphertext=Buffer.from(json.crypto.ciphertext,'hex');var mac=Utils.keccak256(Buffer.concat([derivedKey.slice(16,32),ciphertext])).replace('0x','');if(mac!==json.crypto.mac){throw new Error('Key derivation failed - possibly wrong password');}var decipher=browserifyCipher.createDecipheriv(json.crypto.cipher,derivedKey.slice(0,16),Buffer.from(json.crypto.cipherparams.iv,'hex'));var seed="0x".concat(Buffer.concat([decipher.update(ciphertext),decipher["final"]()]).toString('hex'));return Account.fromPrivateKey(seed,accounts);}}]);return Account;}();var Wallet=function(){function Wallet(utils,accountsModule){_classCallCheck(this,Wallet);this.utils=utils;this.accountsModule=accountsModule;this.defaultKeyName='web3js_wallet';this.accounts={};this.accountsIndex=0;return new Proxy(this,{get:function get(target,name){if(target.accounts[name]){return target.accounts[name];}if(name==='length'){return target.accountsIndex;}return target[name];}});}_createClass(Wallet,[{key:"create",value:function create(numberOfAccounts,entropy){for(var i=0;i<numberOfAccounts;++i){this.add(Account.from(entropy||this.utils.randomHex(32),this.accountsModule));}return this;}},{key:"get",value:function get(account){return this.accounts[account];}},{key:"add",value:function add(account){if(isString(account)){account=Account.fromPrivateKey(account,this.accountsModule);}if(!this.accounts[account.address]){this.accounts[this.accountsIndex]=account;this.accounts[account.address]=account;this.accounts[account.address.toLowerCase()]=account;this.accountsIndex++;return account;}return this.accounts[account.address];}},{key:"remove",value:function remove(addressOrIndex){var account=this.accounts[addressOrIndex];if(account){delete this.accounts[account.address];delete this.accounts[account.address.toLowerCase()];delete this.accounts[account.index];return true;}return false;}},{key:"clear",value:function clear(){for(var i=0;i<=this.accountsIndex;i++){this.remove(i);}this.accountsIndex=0;return this;}},{key:"encrypt",value:function encrypt(password,options){var encryptedAccounts=[];for(var i=0;i<this.accountsIndex;i++){encryptedAccounts.push(this.accounts[i].encrypt(password,options));}return encryptedAccounts;}},{key:"decrypt",value:function decrypt(encryptedWallet,password){var _this=this;encryptedWallet.forEach(function(keystore){var account=Account.fromV3Keystore(keystore,password,false,_this.accountsModule);if(!account){throw new Error("Couldn't decrypt accounts. Password wrong?");}_this.add(account);});return this;}},{key:"save",value:function save(password,keyName){console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');if(typeof localStorage==='undefined'){throw new TypeError('window.localStorage is undefined.');}try{localStorage.setItem(keyName||this.defaultKeyName,JSON.stringify(this.encrypt(password)));}catch(error){if(error.code===18){return true;}throw new Error(error);}return true;}},{key:"load",value:function load(password,keyName){console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');if(typeof localStorage==='undefined'){throw new TypeError('window.localStorage is undefined.');}var keystore;try{keystore=localStorage.getItem(keyName||this.defaultKeyName);if(keystore){keystore=JSON.parse(keystore);}}catch(error){if(error.code===18){keystore=this.defaultKeyName;}else{throw new Error(error);}}return this.decrypt(keystore||[],password);}}]);return Wallet;}();var Accounts=function(_AbstractWeb3Module){_inherits(Accounts,_AbstractWeb3Module);function Accounts(provider,utils,formatters,methodFactory,options,net){var _this;_classCallCheck(this,Accounts);_this=_possibleConstructorReturn(this,_getPrototypeOf(Accounts).call(this,provider,options,methodFactory,net));_this.utils=utils;_this.formatters=formatters;_this._transactionSigner=options.transactionSigner;_this.defaultKeyName='web3js_wallet';_this.accounts={};_this.accountsIndex=0;_this.wallet=new Wallet(utils,_assertThisInitialized(_this));return _this;}_createClass(Accounts,[{key:"create",value:function create(entropy){return Account.from(entropy,this);}},{key:"privateKeyToAccount",value:function privateKeyToAccount(privateKey){return Account.fromPrivateKey(privateKey,this);}},{key:"hashMessage",value:function hashMessage(data){if(this.utils.isHexStrict(data)){data=this.utils.hexToBytes(data);}var messageBuffer=Buffer.from(data);var preambleBuffer=Buffer.from("\x19Ethereum Signed Message:\n".concat(data.length));var ethMessage=Buffer.concat([preambleBuffer,messageBuffer]);return Hash.keccak256s(ethMessage);}},{key:"signTransaction",value:function(){var _signTransaction=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(tx,privateKey,callback){var account,signedTransaction;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;account=Account.fromPrivateKey(privateKey,this);if(tx.chainId){_context.next=6;break;}_context.next=5;return this.getChainId();case 5:tx.chainId=_context.sent;case 6:if(tx.gasPrice){_context.next=10;break;}_context.next=9;return this.getGasPrice();case 9:tx.gasPrice=_context.sent;case 10:if(!(!tx.nonce&&tx.nonce!==0)){_context.next=14;break;}_context.next=13;return this.getTransactionCount(account.address);case 13:tx.nonce=_context.sent;case 14:_context.next=16;return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx,this),account.privateKey);case 16:signedTransaction=_context.sent;if(isFunction(callback)){callback(false,signedTransaction);}return _context.abrupt("return",signedTransaction);case 21:_context.prev=21;_context.t0=_context["catch"](0);if(!isFunction(callback)){_context.next=26;break;}callback(_context.t0,null);return _context.abrupt("return");case 26:throw _context.t0;case 27:case"end":return _context.stop();}}},_callee,this,[[0,21]]);}));function signTransaction(_x,_x2,_x3){return _signTransaction.apply(this,arguments);}return signTransaction;}()},{key:"recoverTransaction",value:function recoverTransaction(rawTx){var values=RLP.decode(rawTx);var signature=EthLibAccount.encodeSignature(values.slice(6,9));var recovery=Bytes.toNumber(values[6]);var extraData=recovery<35?[]:[Bytes.fromNumber(recovery-35>>1),'0x','0x'];var signingData=values.slice(0,6).concat(extraData);var signingDataHex=RLP.encode(signingData);return EthLibAccount.recover(Hash.keccak256(signingDataHex),signature);}},{key:"sign",value:function sign(data,privateKey){if(this.utils.isHexStrict(data)){data=this.utils.hexToBytes(data);}return Account.fromPrivateKey(privateKey,this).sign(data);}},{key:"recover",value:function recover(message,signature,preFixed){if(isObject(message)){return this.recover(message.messageHash,EthLibAccount.encodeSignature([message.v,message.r,message.s]),true);}if(!preFixed){message=this.hashMessage(message);}if(arguments.length>=4){return this.recover(arguments[0],EthLibAccount.encodeSignature([arguments[1],arguments[2],arguments[3]]),!!arguments[4]);}return EthLibAccount.recover(message,signature);}},{key:"decrypt",value:function decrypt(v3Keystore,password,nonStrict){return Account.fromV3Keystore(v3Keystore,password,nonStrict,this);}},{key:"encrypt",value:function encrypt(privateKey,password,options){return Account.fromPrivateKey(privateKey,this).toV3Keystore(password,options);}},{key:"transactionSigner",get:function get(){return this._transactionSigner;},set:function set(transactionSigner){if(transactionSigner.type&&transactionSigner.type==='TransactionSigner'){throw new Error('Invalid TransactionSigner given!');}this._transactionSigner=transactionSigner;}}]);return Accounts;}(web3Core.AbstractWeb3Module);function Accounts$1(provider){var net=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return new Accounts(provider,Utils,web3CoreHelpers.formatters,new MethodFactory(Utils,web3CoreHelpers.formatters),options,net);}exports.Accounts=Accounts$1;Object.defineProperty(exports,'__esModule',{value:true});});

}).call(this,require('_process'),require("buffer").Buffer)

},{"@babel/runtime/helpers/assertThisInitialized":46,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"_process":1221,"browserify-cipher":151,"buffer":1133,"crypto":1142,"eth-lib/lib/account":241,"eth-lib/lib/bytes":243,"eth-lib/lib/hash":244,"eth-lib/lib/rlp":246,"lodash/isFunction":457,"lodash/isObject":462,"lodash/isString":465,"pbkdf2":518,"randombytes":532,"scrypt":undefined,"scryptsy":641,"semver":675,"uuid":676,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-utils":700}],675:[function(require,module,exports){
(function (process){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));exports=module.exports=SemVer;var debug;if((typeof process==="undefined"?"undefined":(0,_typeof2["default"])(process))==='object'&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){debug=function debug(){var args=Array.prototype.slice.call(arguments,0);args.unshift('SEMVER');console.log.apply(console,args);};}else{debug=function debug(){};}exports.SEMVER_SPEC_VERSION='2.0.0';var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MAX_SAFE_COMPONENT_LENGTH=16;var re=exports.re=[];var src=exports.src=[];var R=0;var NUMERICIDENTIFIER=R++;src[NUMERICIDENTIFIER]='0|[1-9]\\d*';var NUMERICIDENTIFIERLOOSE=R++;src[NUMERICIDENTIFIERLOOSE]='[0-9]+';var NONNUMERICIDENTIFIER=R++;src[NONNUMERICIDENTIFIER]='\\d*[a-zA-Z-][a-zA-Z0-9-]*';var MAINVERSION=R++;src[MAINVERSION]='('+src[NUMERICIDENTIFIER]+')\\.'+'('+src[NUMERICIDENTIFIER]+')\\.'+'('+src[NUMERICIDENTIFIER]+')';var MAINVERSIONLOOSE=R++;src[MAINVERSIONLOOSE]='('+src[NUMERICIDENTIFIERLOOSE]+')\\.'+'('+src[NUMERICIDENTIFIERLOOSE]+')\\.'+'('+src[NUMERICIDENTIFIERLOOSE]+')';var PRERELEASEIDENTIFIER=R++;src[PRERELEASEIDENTIFIER]='(?:'+src[NUMERICIDENTIFIER]+'|'+src[NONNUMERICIDENTIFIER]+')';var PRERELEASEIDENTIFIERLOOSE=R++;src[PRERELEASEIDENTIFIERLOOSE]='(?:'+src[NUMERICIDENTIFIERLOOSE]+'|'+src[NONNUMERICIDENTIFIER]+')';var PRERELEASE=R++;src[PRERELEASE]='(?:-('+src[PRERELEASEIDENTIFIER]+'(?:\\.'+src[PRERELEASEIDENTIFIER]+')*))';var PRERELEASELOOSE=R++;src[PRERELEASELOOSE]='(?:-?('+src[PRERELEASEIDENTIFIERLOOSE]+'(?:\\.'+src[PRERELEASEIDENTIFIERLOOSE]+')*))';var BUILDIDENTIFIER=R++;src[BUILDIDENTIFIER]='[0-9A-Za-z-]+';var BUILD=R++;src[BUILD]='(?:\\+('+src[BUILDIDENTIFIER]+'(?:\\.'+src[BUILDIDENTIFIER]+')*))';var FULL=R++;var FULLPLAIN='v?'+src[MAINVERSION]+src[PRERELEASE]+'?'+src[BUILD]+'?';src[FULL]='^'+FULLPLAIN+'$';var LOOSEPLAIN='[v=\\s]*'+src[MAINVERSIONLOOSE]+src[PRERELEASELOOSE]+'?'+src[BUILD]+'?';var LOOSE=R++;src[LOOSE]='^'+LOOSEPLAIN+'$';var GTLT=R++;src[GTLT]='((?:<|>)?=?)';var XRANGEIDENTIFIERLOOSE=R++;src[XRANGEIDENTIFIERLOOSE]=src[NUMERICIDENTIFIERLOOSE]+'|x|X|\\*';var XRANGEIDENTIFIER=R++;src[XRANGEIDENTIFIER]=src[NUMERICIDENTIFIER]+'|x|X|\\*';var XRANGEPLAIN=R++;src[XRANGEPLAIN]='[v=\\s]*('+src[XRANGEIDENTIFIER]+')'+'(?:\\.('+src[XRANGEIDENTIFIER]+')'+'(?:\\.('+src[XRANGEIDENTIFIER]+')'+'(?:'+src[PRERELEASE]+')?'+src[BUILD]+'?'+')?)?';var XRANGEPLAINLOOSE=R++;src[XRANGEPLAINLOOSE]='[v=\\s]*('+src[XRANGEIDENTIFIERLOOSE]+')'+'(?:\\.('+src[XRANGEIDENTIFIERLOOSE]+')'+'(?:\\.('+src[XRANGEIDENTIFIERLOOSE]+')'+'(?:'+src[PRERELEASELOOSE]+')?'+src[BUILD]+'?'+')?)?';var XRANGE=R++;src[XRANGE]='^'+src[GTLT]+'\\s*'+src[XRANGEPLAIN]+'$';var XRANGELOOSE=R++;src[XRANGELOOSE]='^'+src[GTLT]+'\\s*'+src[XRANGEPLAINLOOSE]+'$';var COERCE=R++;src[COERCE]='(^|[^\\d])'+'(\\d{1,'+MAX_SAFE_COMPONENT_LENGTH+'})'+'(?:\\.(\\d{1,'+MAX_SAFE_COMPONENT_LENGTH+'}))?'+'(?:\\.(\\d{1,'+MAX_SAFE_COMPONENT_LENGTH+'}))?'+'(?:$|[^\\d])';var COERCERTL=R++;re[COERCERTL]=new RegExp(src[COERCE],'g');var LONETILDE=R++;src[LONETILDE]='(?:~>?)';var TILDETRIM=R++;src[TILDETRIM]='(\\s*)'+src[LONETILDE]+'\\s+';re[TILDETRIM]=new RegExp(src[TILDETRIM],'g');var tildeTrimReplace='$1~';var TILDE=R++;src[TILDE]='^'+src[LONETILDE]+src[XRANGEPLAIN]+'$';var TILDELOOSE=R++;src[TILDELOOSE]='^'+src[LONETILDE]+src[XRANGEPLAINLOOSE]+'$';var LONECARET=R++;src[LONECARET]='(?:\\^)';var CARETTRIM=R++;src[CARETTRIM]='(\\s*)'+src[LONECARET]+'\\s+';re[CARETTRIM]=new RegExp(src[CARETTRIM],'g');var caretTrimReplace='$1^';var CARET=R++;src[CARET]='^'+src[LONECARET]+src[XRANGEPLAIN]+'$';var CARETLOOSE=R++;src[CARETLOOSE]='^'+src[LONECARET]+src[XRANGEPLAINLOOSE]+'$';var COMPARATORLOOSE=R++;src[COMPARATORLOOSE]='^'+src[GTLT]+'\\s*('+LOOSEPLAIN+')$|^$';var COMPARATOR=R++;src[COMPARATOR]='^'+src[GTLT]+'\\s*('+FULLPLAIN+')$|^$';var COMPARATORTRIM=R++;src[COMPARATORTRIM]='(\\s*)'+src[GTLT]+'\\s*('+LOOSEPLAIN+'|'+src[XRANGEPLAIN]+')';re[COMPARATORTRIM]=new RegExp(src[COMPARATORTRIM],'g');var comparatorTrimReplace='$1$2$3';var HYPHENRANGE=R++;src[HYPHENRANGE]='^\\s*('+src[XRANGEPLAIN]+')'+'\\s+-\\s+'+'('+src[XRANGEPLAIN]+')'+'\\s*$';var HYPHENRANGELOOSE=R++;src[HYPHENRANGELOOSE]='^\\s*('+src[XRANGEPLAINLOOSE]+')'+'\\s+-\\s+'+'('+src[XRANGEPLAINLOOSE]+')'+'\\s*$';var STAR=R++;src[STAR]='(<|>)?=?\\s*\\*';for(var i=0;i<R;i++){debug(i,src[i]);if(!re[i]){re[i]=new RegExp(src[i]);}}exports.parse=parse;function parse(version,options){if(!options||(0,_typeof2["default"])(options)!=='object'){options={loose:!!options,includePrerelease:false};}if(version instanceof SemVer){return version;}if(typeof version!=='string'){return null;}if(version.length>MAX_LENGTH){return null;}var r=options.loose?re[LOOSE]:re[FULL];if(!r.test(version)){return null;}try{return new SemVer(version,options);}catch(er){return null;}}exports.valid=valid;function valid(version,options){var v=parse(version,options);return v?v.version:null;}exports.clean=clean;function clean(version,options){var s=parse(version.trim().replace(/^[=v]+/,''),options);return s?s.version:null;}exports.SemVer=SemVer;function SemVer(version,options){if(!options||(0,_typeof2["default"])(options)!=='object'){options={loose:!!options,includePrerelease:false};}if(version instanceof SemVer){if(version.loose===options.loose){return version;}else{version=version.version;}}else if(typeof version!=='string'){throw new TypeError('Invalid Version: '+version);}if(version.length>MAX_LENGTH){throw new TypeError('version is longer than '+MAX_LENGTH+' characters');}if(!(this instanceof SemVer)){return new SemVer(version,options);}debug('SemVer',version,options);this.options=options;this.loose=!!options.loose;var m=version.trim().match(options.loose?re[LOOSE]:re[FULL]);if(!m){throw new TypeError('Invalid Version: '+version);}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError('Invalid major version');}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError('Invalid minor version');}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError('Invalid patch version');}if(!m[4]){this.prerelease=[];}else{this.prerelease=m[4].split('.').map(function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num;}}return id;});}this.build=m[5]?m[5].split('.'):[];this.format();}SemVer.prototype.format=function(){this.version=this.major+'.'+this.minor+'.'+this.patch;if(this.prerelease.length){this.version+='-'+this.prerelease.join('.');}return this.version;};SemVer.prototype.toString=function(){return this.version;};SemVer.prototype.compare=function(other){debug('SemVer.compare',this.version,this.options,other);if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}return this.compareMain(other)||this.comparePre(other);};SemVer.prototype.compareMain=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch);};SemVer.prototype.comparePre=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}if(this.prerelease.length&&!other.prerelease.length){return-1;}else if(!this.prerelease.length&&other.prerelease.length){return 1;}else if(!this.prerelease.length&&!other.prerelease.length){return 0;}var i=0;do{var a=this.prerelease[i];var b=other.prerelease[i];debug('prerelease compare',i,a,b);if(a===undefined&&b===undefined){return 0;}else if(b===undefined){return 1;}else if(a===undefined){return-1;}else if(a===b){continue;}else{return compareIdentifiers(a,b);}}while(++i);};SemVer.prototype.compareBuild=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options);}var i=0;do{var a=this.build[i];var b=other.build[i];debug('prerelease compare',i,a,b);if(a===undefined&&b===undefined){return 0;}else if(b===undefined){return 1;}else if(a===undefined){return-1;}else if(a===b){continue;}else{return compareIdentifiers(a,b);}}while(++i);};SemVer.prototype.inc=function(release,identifier){switch(release){case'premajor':this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc('pre',identifier);break;case'preminor':this.prerelease.length=0;this.patch=0;this.minor++;this.inc('pre',identifier);break;case'prepatch':this.prerelease.length=0;this.inc('patch',identifier);this.inc('pre',identifier);break;case'prerelease':if(this.prerelease.length===0){this.inc('patch',identifier);}this.inc('pre',identifier);break;case'major':if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++;}this.minor=0;this.patch=0;this.prerelease=[];break;case'minor':if(this.patch!==0||this.prerelease.length===0){this.minor++;}this.patch=0;this.prerelease=[];break;case'patch':if(this.prerelease.length===0){this.patch++;}this.prerelease=[];break;case'pre':if(this.prerelease.length===0){this.prerelease=[0];}else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==='number'){this.prerelease[i]++;i=-2;}}if(i===-1){this.prerelease.push(0);}}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1])){this.prerelease=[identifier,0];}}else{this.prerelease=[identifier,0];}}break;default:throw new Error('invalid increment argument: '+release);}this.format();this.raw=this.version;return this;};exports.inc=inc;function inc(version,release,loose,identifier){if(typeof loose==='string'){identifier=loose;loose=undefined;}try{return new SemVer(version,loose).inc(release,identifier).version;}catch(er){return null;}}exports.diff=diff;function diff(version1,version2){if(eq(version1,version2)){return null;}else{var v1=parse(version1);var v2=parse(version2);var prefix='';if(v1.prerelease.length||v2.prerelease.length){prefix='pre';var defaultResult='prerelease';}for(var key in v1){if(key==='major'||key==='minor'||key==='patch'){if(v1[key]!==v2[key]){return prefix+key;}}}return defaultResult;}}exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a);var bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b;}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1;}exports.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(a,b){return compareIdentifiers(b,a);}exports.major=major;function major(a,loose){return new SemVer(a,loose).major;}exports.minor=minor;function minor(a,loose){return new SemVer(a,loose).minor;}exports.patch=patch;function patch(a,loose){return new SemVer(a,loose).patch;}exports.compare=compare;function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose));}exports.compareLoose=compareLoose;function compareLoose(a,b){return compare(a,b,true);}exports.compareBuild=compareBuild;function compareBuild(a,b,loose){var versionA=new SemVer(a,loose);var versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB);}exports.rcompare=rcompare;function rcompare(a,b,loose){return compare(b,a,loose);}exports.sort=sort;function sort(list,loose){return list.sort(function(a,b){return exports.compareBuild(a,b,loose);});}exports.rsort=rsort;function rsort(list,loose){return list.sort(function(a,b){return exports.compareBuild(b,a,loose);});}exports.gt=gt;function gt(a,b,loose){return compare(a,b,loose)>0;}exports.lt=lt;function lt(a,b,loose){return compare(a,b,loose)<0;}exports.eq=eq;function eq(a,b,loose){return compare(a,b,loose)===0;}exports.neq=neq;function neq(a,b,loose){return compare(a,b,loose)!==0;}exports.gte=gte;function gte(a,b,loose){return compare(a,b,loose)>=0;}exports.lte=lte;function lte(a,b,loose){return compare(a,b,loose)<=0;}exports.cmp=cmp;function cmp(a,op,b,loose){switch(op){case'===':if((0,_typeof2["default"])(a)==='object')a=a.version;if((0,_typeof2["default"])(b)==='object')b=b.version;return a===b;case'!==':if((0,_typeof2["default"])(a)==='object')a=a.version;if((0,_typeof2["default"])(b)==='object')b=b.version;return a!==b;case'':case'=':case'==':return eq(a,b,loose);case'!=':return neq(a,b,loose);case'>':return gt(a,b,loose);case'>=':return gte(a,b,loose);case'<':return lt(a,b,loose);case'<=':return lte(a,b,loose);default:throw new TypeError('Invalid operator: '+op);}}exports.Comparator=Comparator;function Comparator(comp,options){if(!options||(0,_typeof2["default"])(options)!=='object'){options={loose:!!options,includePrerelease:false};}if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp;}else{comp=comp.value;}}if(!(this instanceof Comparator)){return new Comparator(comp,options);}debug('comparator',comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value='';}else{this.value=this.operator+this.semver.version;}debug('comp',this);}var ANY={};Comparator.prototype.parse=function(comp){var r=this.options.loose?re[COMPARATORLOOSE]:re[COMPARATOR];var m=comp.match(r);if(!m){throw new TypeError('Invalid comparator: '+comp);}this.operator=m[1]!==undefined?m[1]:'';if(this.operator==='='){this.operator='';}if(!m[2]){this.semver=ANY;}else{this.semver=new SemVer(m[2],this.options.loose);}};Comparator.prototype.toString=function(){return this.value;};Comparator.prototype.test=function(version){debug('Comparator.test',version,this.options.loose);if(this.semver===ANY||version===ANY){return true;}if(typeof version==='string'){try{version=new SemVer(version,this.options);}catch(er){return false;}}return cmp(version,this.operator,this.semver,this.options);};Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator)){throw new TypeError('a Comparator is required');}if(!options||(0,_typeof2["default"])(options)!=='object'){options={loose:!!options,includePrerelease:false};}var rangeTmp;if(this.operator===''){if(this.value===''){return true;}rangeTmp=new Range(comp.value,options);return satisfies(this.value,rangeTmp,options);}else if(comp.operator===''){if(comp.value===''){return true;}rangeTmp=new Range(this.value,options);return satisfies(comp.semver,rangeTmp,options);}var sameDirectionIncreasing=(this.operator==='>='||this.operator==='>')&&(comp.operator==='>='||comp.operator==='>');var sameDirectionDecreasing=(this.operator==='<='||this.operator==='<')&&(comp.operator==='<='||comp.operator==='<');var sameSemVer=this.semver.version===comp.semver.version;var differentDirectionsInclusive=(this.operator==='>='||this.operator==='<=')&&(comp.operator==='>='||comp.operator==='<=');var oppositeDirectionsLessThan=cmp(this.semver,'<',comp.semver,options)&&(this.operator==='>='||this.operator==='>')&&(comp.operator==='<='||comp.operator==='<');var oppositeDirectionsGreaterThan=cmp(this.semver,'>',comp.semver,options)&&(this.operator==='<='||this.operator==='<')&&(comp.operator==='>='||comp.operator==='>');return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan;};exports.Range=Range;function Range(range,options){if(!options||(0,_typeof2["default"])(options)!=='object'){options={loose:!!options,includePrerelease:false};}if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range;}else{return new Range(range.raw,options);}}if(range instanceof Comparator){return new Range(range.value,options);}if(!(this instanceof Range)){return new Range(range,options);}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map(function(range){return this.parseRange(range.trim());},this).filter(function(c){return c.length;});if(!this.set.length){throw new TypeError('Invalid SemVer Range: '+range);}this.format();}Range.prototype.format=function(){this.range=this.set.map(function(comps){return comps.join(' ').trim();}).join('||').trim();return this.range;};Range.prototype.toString=function(){return this.range;};Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[HYPHENRANGELOOSE]:re[HYPHENRANGE];range=range.replace(hr,hyphenReplace);debug('hyphen replace',range);range=range.replace(re[COMPARATORTRIM],comparatorTrimReplace);debug('comparator trim',range,re[COMPARATORTRIM]);range=range.replace(re[TILDETRIM],tildeTrimReplace);range=range.replace(re[CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(' ');var compRe=loose?re[COMPARATORLOOSE]:re[COMPARATOR];var set=range.split(' ').map(function(comp){return parseComparator(comp,this.options);},this).join(' ').split(/\s+/);if(this.options.loose){set=set.filter(function(comp){return!!comp.match(compRe);});}set=set.map(function(comp){return new Comparator(comp,this.options);},this);return set;};Range.prototype.intersects=function(range,options){if(!(range instanceof Range)){throw new TypeError('a Range is required');}return this.set.some(function(thisComparators){return isSatisfiable(thisComparators,options)&&range.set.some(function(rangeComparators){return isSatisfiable(rangeComparators,options)&&thisComparators.every(function(thisComparator){return rangeComparators.every(function(rangeComparator){return thisComparator.intersects(rangeComparator,options);});});});});};function isSatisfiable(comparators,options){var result=true;var remainingComparators=comparators.slice();var testComparator=remainingComparators.pop();while(result&&remainingComparators.length){result=remainingComparators.every(function(otherComparator){return testComparator.intersects(otherComparator,options);});testComparator=remainingComparators.pop();}return result;}exports.toComparators=toComparators;function toComparators(range,options){return new Range(range,options).set.map(function(comp){return comp.map(function(c){return c.value;}).join(' ').trim().split(' ');});}function parseComparator(comp,options){debug('comp',comp,options);comp=replaceCarets(comp,options);debug('caret',comp);comp=replaceTildes(comp,options);debug('tildes',comp);comp=replaceXRanges(comp,options);debug('xrange',comp);comp=replaceStars(comp,options);debug('stars',comp);return comp;}function isX(id){return!id||id.toLowerCase()==='x'||id==='*';}function replaceTildes(comp,options){return comp.trim().split(/\s+/).map(function(comp){return replaceTilde(comp,options);}).join(' ');}function replaceTilde(comp,options){var r=options.loose?re[TILDELOOSE]:re[TILDE];return comp.replace(r,function(_,M,m,p,pr){debug('tilde',comp,_,M,m,p,pr);var ret;if(isX(M)){ret='';}else if(isX(m)){ret='>='+M+'.0.0 <'+(+M+1)+'.0.0';}else if(isX(p)){ret='>='+M+'.'+m+'.0 <'+M+'.'+(+m+1)+'.0';}else if(pr){debug('replaceTilde pr',pr);ret='>='+M+'.'+m+'.'+p+'-'+pr+' <'+M+'.'+(+m+1)+'.0';}else{ret='>='+M+'.'+m+'.'+p+' <'+M+'.'+(+m+1)+'.0';}debug('tilde return',ret);return ret;});}function replaceCarets(comp,options){return comp.trim().split(/\s+/).map(function(comp){return replaceCaret(comp,options);}).join(' ');}function replaceCaret(comp,options){debug('caret',comp,options);var r=options.loose?re[CARETLOOSE]:re[CARET];return comp.replace(r,function(_,M,m,p,pr){debug('caret',comp,_,M,m,p,pr);var ret;if(isX(M)){ret='';}else if(isX(m)){ret='>='+M+'.0.0 <'+(+M+1)+'.0.0';}else if(isX(p)){if(M==='0'){ret='>='+M+'.'+m+'.0 <'+M+'.'+(+m+1)+'.0';}else{ret='>='+M+'.'+m+'.0 <'+(+M+1)+'.0.0';}}else if(pr){debug('replaceCaret pr',pr);if(M==='0'){if(m==='0'){ret='>='+M+'.'+m+'.'+p+'-'+pr+' <'+M+'.'+m+'.'+(+p+1);}else{ret='>='+M+'.'+m+'.'+p+'-'+pr+' <'+M+'.'+(+m+1)+'.0';}}else{ret='>='+M+'.'+m+'.'+p+'-'+pr+' <'+(+M+1)+'.0.0';}}else{debug('no pr');if(M==='0'){if(m==='0'){ret='>='+M+'.'+m+'.'+p+' <'+M+'.'+m+'.'+(+p+1);}else{ret='>='+M+'.'+m+'.'+p+' <'+M+'.'+(+m+1)+'.0';}}else{ret='>='+M+'.'+m+'.'+p+' <'+(+M+1)+'.0.0';}}debug('caret return',ret);return ret;});}function replaceXRanges(comp,options){debug('replaceXRanges',comp,options);return comp.split(/\s+/).map(function(comp){return replaceXRange(comp,options);}).join(' ');}function replaceXRange(comp,options){comp=comp.trim();var r=options.loose?re[XRANGELOOSE]:re[XRANGE];return comp.replace(r,function(ret,gtlt,M,m,p,pr){debug('xRange',comp,ret,gtlt,M,m,p,pr);var xM=isX(M);var xm=xM||isX(m);var xp=xm||isX(p);var anyX=xp;if(gtlt==='='&&anyX){gtlt='';}pr=options.includePrerelease?'-0':'';if(xM){if(gtlt==='>'||gtlt==='<'){ret='<0.0.0-0';}else{ret='*';}}else if(gtlt&&anyX){if(xm){m=0;}p=0;if(gtlt==='>'){gtlt='>=';if(xm){M=+M+1;m=0;p=0;}else{m=+m+1;p=0;}}else if(gtlt==='<='){gtlt='<';if(xm){M=+M+1;}else{m=+m+1;}}ret=gtlt+M+'.'+m+'.'+p+pr;}else if(xm){ret='>='+M+'.0.0'+pr+' <'+(+M+1)+'.0.0'+pr;}else if(xp){ret='>='+M+'.'+m+'.0'+pr+' <'+M+'.'+(+m+1)+'.0'+pr;}debug('xRange return',ret);return ret;});}function replaceStars(comp,options){debug('replaceStars',comp,options);return comp.trim().replace(re[STAR],'');}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){if(isX(fM)){from='';}else if(isX(fm)){from='>='+fM+'.0.0';}else if(isX(fp)){from='>='+fM+'.'+fm+'.0';}else{from='>='+from;}if(isX(tM)){to='';}else if(isX(tm)){to='<'+(+tM+1)+'.0.0';}else if(isX(tp)){to='<'+tM+'.'+(+tm+1)+'.0';}else if(tpr){to='<='+tM+'.'+tm+'.'+tp+'-'+tpr;}else{to='<='+to;}return(from+' '+to).trim();}Range.prototype.test=function(version){if(!version){return false;}if(typeof version==='string'){try{version=new SemVer(version,this.options);}catch(er){return false;}}for(var i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true;}}return false;};function testSet(set,version,options){for(var i=0;i<set.length;i++){if(!set[i].test(version)){return false;}}if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===ANY){continue;}if(set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true;}}}return false;}return true;}exports.satisfies=satisfies;function satisfies(version,range,options){try{range=new Range(range,options);}catch(er){return false;}return range.test(version);}exports.maxSatisfying=maxSatisfying;function maxSatisfying(versions,range,options){var max=null;var maxSV=null;try{var rangeObj=new Range(range,options);}catch(er){return null;}versions.forEach(function(v){if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options);}}});return max;}exports.minSatisfying=minSatisfying;function minSatisfying(versions,range,options){var min=null;var minSV=null;try{var rangeObj=new Range(range,options);}catch(er){return null;}versions.forEach(function(v){if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options);}}});return min;}exports.minVersion=minVersion;function minVersion(range,loose){range=new Range(range,loose);var minver=new SemVer('0.0.0');if(range.test(minver)){return minver;}minver=new SemVer('0.0.0-0');if(range.test(minver)){return minver;}minver=null;for(var i=0;i<range.set.length;++i){var comparators=range.set[i];comparators.forEach(function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case'>':if(compver.prerelease.length===0){compver.patch++;}else{compver.prerelease.push(0);}compver.raw=compver.format();case'':case'>=':if(!minver||gt(minver,compver)){minver=compver;}break;case'<':case'<=':break;default:throw new Error('Unexpected operation: '+comparator.operator);}});}if(minver&&range.test(minver)){return minver;}return null;}exports.validRange=validRange;function validRange(range,options){try{return new Range(range,options).range||'*';}catch(er){return null;}}exports.ltr=ltr;function ltr(version,range,options){return outside(version,range,'<',options);}exports.gtr=gtr;function gtr(version,range,options){return outside(version,range,'>',options);}exports.outside=outside;function outside(version,range,hilo,options){version=new SemVer(version,options);range=new Range(range,options);var gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case'>':gtfn=gt;ltefn=lte;ltfn=lt;comp='>';ecomp='>=';break;case'<':gtfn=lt;ltefn=gte;ltfn=gt;comp='<';ecomp='<=';break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(satisfies(version,range,options)){return false;}for(var i=0;i<range.set.length;++i){var comparators=range.set[i];var high=null;var low=null;comparators.forEach(function(comparator){if(comparator.semver===ANY){comparator=new Comparator('>=0.0.0');}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator;}else if(ltfn(comparator.semver,low.semver,options)){low=comparator;}});if(high.operator===comp||high.operator===ecomp){return false;}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false;}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false;}}return true;}exports.prerelease=prerelease;function prerelease(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null;}exports.intersects=intersects;function intersects(r1,r2,options){r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2);}exports.coerce=coerce;function coerce(version,options){if(version instanceof SemVer){return version;}if(typeof version==='number'){version=String(version);}if(typeof version!=='string'){return null;}options=options||{};var match=null;if(!options.rtl){match=version.match(re[COERCE]);}else{var next;while((next=re[COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length)){if(!match||next.index+next[0].length!==match.index+match[0].length){match=next;}re[COERCERTL].lastIndex=next.index+next[1].length+next[2].length;}re[COERCERTL].lastIndex=-1;}if(match===null){return null;}return parse(match[2]+'.'+(match[3]||'0')+'.'+(match[4]||'0'),options);}

}).call(this,require('_process'))

},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"_process":1221}],676:[function(require,module,exports){
var v1=require('./v1');var v4=require('./v4');var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid;

},{"./v1":679,"./v4":680}],680:[function(require,module,exports){
var rng=require('./lib/rng');var bytesToUuid=require('./lib/bytesToUuid');function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=='string'){buf=options==='binary'?new Array(16):null;options=null;}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&0x0f|0x40;rnds[8]=rnds[8]&0x3f|0x80;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii];}}return buf||bytesToUuid(rnds);}module.exports=v4;

},{"./lib/bytesToUuid":677,"./lib/rng":678}],679:[function(require,module,exports){
var rng=require('./lib/rng');var bytesToUuid=require('./lib/bytesToUuid');var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|0x01,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]];}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&0x3fff;}}var msecs=options.msecs!==undefined?options.msecs:new Date().getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/10000;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&0x3fff;}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0;}if(nsecs>=10000){throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=12219292800000;var tl=((msecs&0xfffffff)*10000+nsecs)%0x100000000;b[i++]=tl>>>24&0xff;b[i++]=tl>>>16&0xff;b[i++]=tl>>>8&0xff;b[i++]=tl&0xff;var tmh=msecs/0x100000000*10000&0xfffffff;b[i++]=tmh>>>8&0xff;b[i++]=tmh&0xff;b[i++]=tmh>>>24&0xf|0x10;b[i++]=tmh>>>16&0xff;b[i++]=clockseq>>>8|0x80;b[i++]=clockseq&0xff;for(var n=0;n<6;++n){b[i+n]=node[n];}return buf?buf:bytesToUuid(b);}module.exports=v1;

},{"./lib/bytesToUuid":677,"./lib/rng":678}],677:[function(require,module,exports){
var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+0x100).toString(16).substr(1);}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join('');}module.exports=bytesToUuid;

},{}],678:[function(require,module,exports){
var getRandomValues=typeof crypto!='undefined'&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!='undefined'&&typeof window.msCrypto.getRandomValues=='function'&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8;};}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&0x03)===0)r=Math.random()*0x100000000;rnds[i]=r>>>((i&0x03)<<3)&0xff;}return rnds;};}

},{}],681:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-utils'),require('web3-core-helpers'),require('web3-eth-abi'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('lodash/isArray'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/get'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('lodash/isFunction'),require('lodash/isUndefined'),require('lodash/cloneDeep'),require('web3-core-subscriptions'),require('@babel/runtime/helpers/assertThisInitialized'),require('web3-core')):typeof define==='function'&&define.amd?define(['exports','web3-utils','web3-core-helpers','web3-eth-abi','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','lodash/isArray','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/get','@babel/runtime/helpers/inherits','web3-core-method','lodash/isFunction','lodash/isUndefined','lodash/cloneDeep','web3-core-subscriptions','@babel/runtime/helpers/assertThisInitialized','web3-core'],factory):(global=global||self,factory(global.Web3EthContract={},global.Utils,global.web3CoreHelpers,global.web3EthAbi,global._classCallCheck,global._createClass,global.isArray,global._possibleConstructorReturn,global._getPrototypeOf,global._get,global._inherits,global.web3CoreMethod,global.isFunction,global.isUndefined,global.cloneDeep,global.web3CoreSubscriptions,global._assertThisInitialized,global.web3Core));})(void 0,function(exports,Utils,web3CoreHelpers,web3EthAbi,_classCallCheck,_createClass,isArray,_possibleConstructorReturn,_getPrototypeOf,_get,_inherits,web3CoreMethod,isFunction,isUndefined,cloneDeep,web3CoreSubscriptions,_assertThisInitialized,web3Core){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;isArray=isArray&&isArray.hasOwnProperty('default')?isArray['default']:isArray;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;isUndefined=isUndefined&&isUndefined.hasOwnProperty('default')?isUndefined['default']:isUndefined;cloneDeep=cloneDeep&&cloneDeep.hasOwnProperty('default')?cloneDeep['default']:cloneDeep;_assertThisInitialized=_assertThisInitialized&&_assertThisInitialized.hasOwnProperty('default')?_assertThisInitialized['default']:_assertThisInitialized;var AbiModel=function(){function AbiModel(mappedAbi){_classCallCheck(this,AbiModel);this.abi=mappedAbi;}_createClass(AbiModel,[{key:"getMethod",value:function getMethod(name){if(this.hasMethod(name)){return this.abi.methods[name];}return false;}},{key:"getMethods",value:function getMethods(){return this.abi.methods;}},{key:"getEvent",value:function getEvent(name){if(this.hasEvent(name)){return this.abi.events[name];}return false;}},{key:"getEvents",value:function getEvents(){return this.abi.events;}},{key:"getEventBySignature",value:function getEventBySignature(signature){var _this=this;var event;Object.keys(this.abi.events).forEach(function(key){if(_this.abi.events[key].signature===signature){event=_this.abi.events[key];}});return event;}},{key:"hasMethod",value:function hasMethod(name){return typeof this.abi.methods[name]!=='undefined';}},{key:"hasEvent",value:function hasEvent(name){return typeof this.abi.events[name]!=='undefined';}}]);return AbiModel;}();var AbiItemModel=function(){function AbiItemModel(abiItem){_classCallCheck(this,AbiItemModel);this.abiItem=abiItem;this.signature=this.abiItem.signature;this.name=this.abiItem.name;this.payable=this.abiItem.payable;this.anonymous=this.abiItem.anonymous;this.contractMethodParameters=[];}_createClass(AbiItemModel,[{key:"getInputLength",value:function getInputLength(){if(isArray(this.abiItem.inputs)){return this.abiItem.inputs.length;}return 0;}},{key:"getInputs",value:function getInputs(){if(isArray(this.abiItem.inputs)){return this.abiItem.inputs;}return[];}},{key:"getOutputs",value:function getOutputs(){if(isArray(this.abiItem.outputs)){return this.abiItem.outputs;}return[];}},{key:"getIndexedInputs",value:function getIndexedInputs(){return this.getInputs().filter(function(input){return input.indexed===true;});}},{key:"isOfType",value:function isOfType(type){return this.abiItem.type===type;}}]);return AbiItemModel;}();var MethodEncoder=function(){function MethodEncoder(abiCoder){_classCallCheck(this,MethodEncoder);this.abiCoder=abiCoder;}_createClass(MethodEncoder,[{key:"encode",value:function encode(abiItemModel,deployData){var encodedParameters=this.abiCoder.encodeParameters(abiItemModel.getInputs(),abiItemModel.contractMethodParameters);if(encodedParameters.startsWith('0x')){encodedParameters=encodedParameters.slice(2);}if(abiItemModel.isOfType('constructor')){if(!deployData){throw new Error('The contract has no contract data option set. This is necessary to append the constructor parameters.');}return deployData+encodedParameters;}if(abiItemModel.isOfType('function')){return abiItemModel.signature+encodedParameters;}return encodedParameters;}}]);return MethodEncoder;}();var EventFilterEncoder=function(){function EventFilterEncoder(abiCoder){_classCallCheck(this,EventFilterEncoder);this.abiCoder=abiCoder;}_createClass(EventFilterEncoder,[{key:"encode",value:function encode(abiItemModel,filter){var _this=this;var topics=[];abiItemModel.getIndexedInputs().forEach(function(input){if(filter[input.name]){var filterItem=filter[input.name];if(isArray(filterItem)){filterItem=filterItem.map(function(item){return _this.abiCoder.encodeParameter(input.type,item);});topics.push(filterItem);return;}topics.push(_this.abiCoder.encodeParameter(input.type,filterItem));return;}topics.push(null);});return topics;}}]);return EventFilterEncoder;}();var AllEventsFilterEncoder=function(_EventFilterEncoder){_inherits(AllEventsFilterEncoder,_EventFilterEncoder);function AllEventsFilterEncoder(){_classCallCheck(this,AllEventsFilterEncoder);return _possibleConstructorReturn(this,_getPrototypeOf(AllEventsFilterEncoder).apply(this,arguments));}_createClass(AllEventsFilterEncoder,[{key:"encode",value:function encode(abiModel,filter){var _this=this;var events=abiModel.getEvents();var topics=[];Object.keys(events).forEach(function(key){topics.push(_get(_getPrototypeOf(AllEventsFilterEncoder.prototype),"encode",_this).call(_this,events[key],filter));});return topics;}}]);return AllEventsFilterEncoder;}(EventFilterEncoder);var EventLogDecoder=function(){function EventLogDecoder(abiCoder){_classCallCheck(this,EventLogDecoder);this.abiCoder=abiCoder;}_createClass(EventLogDecoder,[{key:"decode",value:function decode(abiItemModel,response){var argumentTopics=response.topics;if(!abiItemModel.anonymous){argumentTopics=response.topics.slice(1);}if(response.data==='0x'){response.data=null;}response.returnValues=this.abiCoder.decodeLog(abiItemModel.getInputs(),response.data,argumentTopics);response.event=abiItemModel.name;response.signature=abiItemModel.signature;response.raw={data:response.data,topics:response.topics};if(abiItemModel.anonymous||!response.topics[0]){response.signature=null;}delete response.data;delete response.topics;return response;}}]);return EventLogDecoder;}();var AllEventsLogDecoder=function(_EventLogDecoder){_inherits(AllEventsLogDecoder,_EventLogDecoder);function AllEventsLogDecoder(abiCoder){_classCallCheck(this,AllEventsLogDecoder);return _possibleConstructorReturn(this,_getPrototypeOf(AllEventsLogDecoder).call(this,abiCoder));}_createClass(AllEventsLogDecoder,[{key:"decode",value:function decode(abiModel,response){var abiItemModel=abiModel.getEventBySignature(response.topics[0]);if(abiItemModel){return _get(_getPrototypeOf(AllEventsLogDecoder.prototype),"decode",this).call(this,abiItemModel,response);}return{raw:{data:response.data,topics:response.topics}};}}]);return AllEventsLogDecoder;}(EventLogDecoder);var AbiMapper=function(){function AbiMapper(contractModuleFactory,abiCoder,utils){_classCallCheck(this,AbiMapper);this.utils=utils;this.abiCoder=abiCoder;this.contractModuleFactory=contractModuleFactory;this.hasConstructor=false;}_createClass(AbiMapper,[{key:"map",value:function map(abi){var _this=this;var mappedAbiItems={methods:{},events:{}};abi.forEach(function(abiItem){abiItem.constant=_this.isConstant(abiItem);abiItem.payable=_this.isPayable(abiItem);if(abiItem.name){abiItem.funcName=_this.utils.jsonInterfaceMethodToString(abiItem);}var abiItemModel;if(abiItem.type==='function'){abiItem.signature=_this.abiCoder.encodeFunctionSignature(abiItem.funcName);abiItemModel=_this.contractModuleFactory.createAbiItemModel(abiItem);if(!mappedAbiItems.methods[abiItem.name]){mappedAbiItems.methods[abiItem.name]=abiItemModel;}else{if(isArray(mappedAbiItems.methods[abiItem.name])){mappedAbiItems.methods[abiItem.name].push(abiItemModel);}else{mappedAbiItems.methods[abiItem.name]=[mappedAbiItems.methods[abiItem.name],abiItemModel];}}mappedAbiItems.methods[abiItem.signature]=abiItemModel;mappedAbiItems.methods[abiItem.funcName]=abiItemModel;return;}if(abiItem.type==='event'){abiItem.signature=_this.abiCoder.encodeEventSignature(abiItem.funcName);abiItemModel=_this.contractModuleFactory.createAbiItemModel(abiItem);if(!mappedAbiItems.events[abiItem.name]||mappedAbiItems.events[abiItem.name].name==='bound '){mappedAbiItems.events[abiItem.name]=abiItemModel;}mappedAbiItems.events[abiItem.signature]=abiItemModel;mappedAbiItems.events[abiItem.funcName]=abiItemModel;}if(abiItem.type==='constructor'){abiItem.signature=abiItem.type;mappedAbiItems.methods['contractConstructor']=_this.contractModuleFactory.createAbiItemModel(abiItem);_this.hasConstructor=true;}});if(!this.hasConstructor){mappedAbiItems.methods['contractConstructor']=this.contractModuleFactory.createAbiItemModel({inputs:[],payable:false,constant:false,type:'constructor'});}return this.contractModuleFactory.createAbiModel(mappedAbiItems);}},{key:"isConstant",value:function isConstant(abiItem){return abiItem.stateMutability==='view'||abiItem.stateMutability==='pure'||abiItem.constant;}},{key:"isPayable",value:function isPayable(abiItem){return abiItem.stateMutability==='payable'||abiItem.payable;}}]);return AbiMapper;}();var MethodOptionsMapper=function(){function MethodOptionsMapper(utils,formatters){_classCallCheck(this,MethodOptionsMapper);this.utils=utils;this.formatters=formatters;}_createClass(MethodOptionsMapper,[{key:"map",value:function map(contract,options){var from=null;if(options.from){from=this.utils.toChecksumAddress(this.formatters.inputAddressFormatter(options.from));}options.to=contract.address;options.from=from||contract.defaultAccount;options.gasPrice=options.gasPrice||contract.defaultGasPrice;options.gas=options.gas||options.gasLimit||contract.defaultGas;delete options.gasLimit;return options;}}]);return MethodOptionsMapper;}();var EventOptionsMapper=function(){function EventOptionsMapper(formatters,eventFilterEncoder){_classCallCheck(this,EventOptionsMapper);this.formatters=formatters;this.eventFilterEncoder=eventFilterEncoder;}_createClass(EventOptionsMapper,[{key:"map",value:function map(abiItemModel,contract,options){if(!options){options={};}if(!isArray(options.topics)){options.topics=[];}if(typeof options.fromBlock!=='undefined'){options.fromBlock=this.formatters.inputBlockNumberFormatter(options.fromBlock);}else if(contract.defaultBlock!==null){options.fromBlock=contract.defaultBlock;}if(typeof options.toBlock!=='undefined'){options.toBlock=this.formatters.inputBlockNumberFormatter(options.toBlock);}if(typeof options.filter!=='undefined'){options.topics=options.topics.concat(this.eventFilterEncoder.encode(abiItemModel,options.filter));delete options.filter;}if(!abiItemModel.anonymous){options.topics.unshift(abiItemModel.signature);}if(!options.address){options.address=contract.address;}return options;}}]);return EventOptionsMapper;}();var AllEventsOptionsMapper=function(){function AllEventsOptionsMapper(formatters,allEventsFilterEncoder){_classCallCheck(this,AllEventsOptionsMapper);this.formatters=formatters;this.allEventsFilterEncoder=allEventsFilterEncoder;}_createClass(AllEventsOptionsMapper,[{key:"map",value:function map(abiModel,contract,options){if(!options){options={};}if(!isArray(options.topics)){options.topics=[];}if(typeof options.fromBlock!=='undefined'){options.fromBlock=this.formatters.inputBlockNumberFormatter(options.fromBlock);}else if(contract.defaultBlock!==null){options.fromBlock=contract.defaultBlock;}if(typeof options.toBlock!=='undefined'){options.toBlock=this.formatters.inputBlockNumberFormatter(options.toBlock);}if(typeof options.filter!=='undefined'){options.topics=options.topics.concat(this.allEventsFilterEncoder.encode(abiModel,options.filter));delete options.filter;}if(!options.address){options.address=contract.address;}return options;}}]);return AllEventsOptionsMapper;}();var MethodsProxy=function(){function MethodsProxy(contract,methodFactory,methodEncoder,methodOptionsValidator,methodOptionsMapper){var _this=this;_classCallCheck(this,MethodsProxy);this.contract=contract;this.methodFactory=methodFactory;this.methodEncoder=methodEncoder;this.methodOptionsValidator=methodOptionsValidator;this.methodOptionsMapper=methodOptionsMapper;return new Proxy(this,{get:function get(target,name){if(_this.contract.abiModel.hasMethod(name)){var ContractMethod=function ContractMethod(){var methodArguments=Array.prototype.slice.call(arguments);if(name==='contractConstructor'){if(methodArguments[0]){if(methodArguments[0]['data']){target.contract.data=methodArguments[0]['data'];}if(methodArguments[0]['arguments']){abiItemModel.contractMethodParameters=methodArguments[0]['arguments'];}return ContractMethod;}abiItemModel.contractMethodParameters=[];return ContractMethod;}if(isArray(abiItemModel)){var abiItemModelFound=abiItemModel.some(function(model){if(model.getInputLength()===methodArguments.length){abiItemModel=model;return true;}return false;});if(!abiItemModelFound){throw new Error("Methods with name \"".concat(name,"\" found but the given parameters are wrong"));}}abiItemModel.contractMethodParameters=methodArguments;return ContractMethod;};var abiItemModel=_this.contract.abiModel.getMethod(name);ContractMethod.call=function(){return target.executeMethod(abiItemModel,arguments,'call');};ContractMethod.send=function(){if(abiItemModel.isOfType('constructor')){return target.executeMethod(abiItemModel,arguments,'contract-deployment');}return target.executeMethod(abiItemModel,arguments,'send');};ContractMethod.call.request=function(){return target.createMethod(abiItemModel,arguments,'call');};ContractMethod.send.request=function(){return target.createMethod(abiItemModel,arguments,'send');};ContractMethod.estimateGas=function(){return target.executeMethod(abiItemModel,arguments,'estimate');};ContractMethod.encodeABI=function(){return target.methodEncoder.encode(abiItemModel,target.contract.data);};return ContractMethod;}return Reflect.get(target,name);}});}_createClass(MethodsProxy,[{key:"executeMethod",value:function executeMethod(abiItemModel,methodArguments,requestType){var method;try{method=this.createMethod(abiItemModel,methodArguments,requestType);}catch(error){var promiEvent=new web3CoreMethod.PromiEvent();method=this.methodFactory.createMethodByRequestType(abiItemModel,this.contract,requestType);method.setArguments(methodArguments);if(isFunction(method.callback)){method.callback(error,null);}promiEvent.reject(error);promiEvent.emit('error',error);return promiEvent;}return method.execute();}},{key:"createMethod",value:function createMethod(abiItemModel,methodArguments,requestType){var method=this.methodFactory.createMethodByRequestType(abiItemModel,this.contract,requestType);method.setArguments(methodArguments);if(!method.parameters[0]){method.parameters[0]={};}method.parameters[0]['data']=this.methodEncoder.encode(abiItemModel,this.contract.data);method.parameters[0]=this.methodOptionsMapper.map(this.contract,method.parameters[0]);this.methodOptionsValidator.validate(abiItemModel,method);return method;}}]);return MethodsProxy;}();var EventSubscriptionsProxy=function(){function EventSubscriptionsProxy(contract,eventSubscriptionFactory,eventOptionsMapper,eventLogDecoder,allEventsLogDecoder,allEventsOptionsMapper){var _this=this;_classCallCheck(this,EventSubscriptionsProxy);this.contract=contract;this.eventSubscriptionFactory=eventSubscriptionFactory;this.eventOptionsMapper=eventOptionsMapper;this.eventLogDecoder=eventLogDecoder;this.allEventsLogDecoder=allEventsLogDecoder;this.allEventsOptionsMapper=allEventsOptionsMapper;return new Proxy(this,{get:function get(target,name){if(_this.contract.abiModel.hasEvent(name)){return function(options,callback){return target.subscribe(target.contract.abiModel.getEvent(name),cloneDeep(options),callback);};}if(name==='allEvents'){return function(options,callback){return target.subscribeAll(cloneDeep(options),callback);};}return Reflect.get(target,name);}});}_createClass(EventSubscriptionsProxy,[{key:"subscribe",value:function subscribe(abiItemModel,options,callback){if(options&&!isUndefined(options.filter)&&!isUndefined(options.topics)){this.handleValidationError('Invalid subscription options: Only filter or topics are allowed and not both',callback);return;}return this.eventSubscriptionFactory.createEventLogSubscription(this.eventLogDecoder,this.contract,this.eventOptionsMapper.map(abiItemModel,this.contract,options),abiItemModel).subscribe(callback);}},{key:"subscribeAll",value:function subscribeAll(options,callback){if(options&&!isUndefined(options.filter)&&!isUndefined(options.topics)){this.handleValidationError('Invalid subscription options: Only filter or topics are allowed and not both',callback);return;}return this.eventSubscriptionFactory.createAllEventsLogSubscription(this.allEventsLogDecoder,this.contract,this.allEventsOptionsMapper.map(this.contract.abiModel,this.contract,options)).subscribe(callback);}},{key:"handleValidationError",value:function handleValidationError(errorMessage,callback){var error=new Error(errorMessage);if(isFunction(callback)){callback(error,null);}throw error;}}]);return EventSubscriptionsProxy;}();var SendContractMethod=function(_EthSendTransactionMe){_inherits(SendContractMethod,_EthSendTransactionMe);function SendContractMethod(utils,formatters,moduleInstance,transactionObserver,chainIdMethod,getTransactionCountMethod,allEventsLogDecoder,abiModel){var _this;_classCallCheck(this,SendContractMethod);_this=_possibleConstructorReturn(this,_getPrototypeOf(SendContractMethod).call(this,utils,formatters,moduleInstance,transactionObserver,chainIdMethod,getTransactionCountMethod));_this.allEventsLogDecoder=allEventsLogDecoder;_this.abiModel=abiModel;return _this;}_createClass(SendContractMethod,[{key:"afterExecution",value:function afterExecution(response){var _this2=this;if(isArray(response.logs)){response.events={};response.logs.forEach(function(log,index){log=_this2.allEventsLogDecoder.decode(_this2.abiModel,log);if(log.event){if(response.events[log.event]){if(isArray(response.events[log.event])){response.events[log.event].push(log);return;}response.events[log.event]=[response.events[log.event],log];return;}response.events[log.event]=log;return;}response.events[index]=log;});delete response.logs;}return _get(_getPrototypeOf(SendContractMethod.prototype),"afterExecution",this).call(this,response);}}]);return SendContractMethod;}(web3CoreMethod.EthSendTransactionMethod);var MethodOptionsValidator=function(){function MethodOptionsValidator(utils){_classCallCheck(this,MethodOptionsValidator);this.utils=utils;}_createClass(MethodOptionsValidator,[{key:"validate",value:function validate(abiItemModel,method){if(!this.isToSet(abiItemModel,method)){throw new Error("This contract object doesn't have address set yet, please set an address first.");}if(!this.isFromSet(method)&&method instanceof SendContractMethod){throw new Error('No valid "from" address specified in neither the given options, nor the default options.');}if(!this.isValueValid(abiItemModel,method)){throw new Error('Can not send value to non-payable contract method or constructor');}return true;}},{key:"isToSet",value:function isToSet(abiItemModel,method){if(abiItemModel.isOfType('constructor')){return true;}return this.utils.isAddress(method.parameters[0].to);}},{key:"isFromSet",value:function isFromSet(method){return this.utils.isAddress(method.parameters[0].from);}},{key:"isValueValid",value:function isValueValid(abiItemModel,method){return abiItemModel.payable||!abiItemModel.payable&&!method.parameters[0].value;}}]);return MethodOptionsValidator;}();var CallContractMethod=function(_CallMethod){_inherits(CallContractMethod,_CallMethod);function CallContractMethod(utils,formatters,moduleInstance,abiCoder,abiItemModel){var _this;_classCallCheck(this,CallContractMethod);_this=_possibleConstructorReturn(this,_getPrototypeOf(CallContractMethod).call(this,utils,formatters,moduleInstance));_this.abiCoder=abiCoder;_this.abiItemModel=abiItemModel;return _this;}_createClass(CallContractMethod,[{key:"afterExecution",value:function afterExecution(response){if(!response||response==='0x'){return null;}var outputs=this.abiItemModel.getOutputs();if(outputs.length>1){return this.abiCoder.decodeParameters(outputs,response);}return this.abiCoder.decodeParameter(outputs[0],response);}}]);return CallContractMethod;}(web3CoreMethod.CallMethod);var ContractDeployMethod=function(_EthSendTransactionMe){_inherits(ContractDeployMethod,_EthSendTransactionMe);function ContractDeployMethod(utils,formatters,moduleInstance,transactionObserver,chainIdMethod,getTransactionCountMethod){_classCallCheck(this,ContractDeployMethod);return _possibleConstructorReturn(this,_getPrototypeOf(ContractDeployMethod).call(this,utils,formatters,moduleInstance,transactionObserver,chainIdMethod,getTransactionCountMethod));}_createClass(ContractDeployMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.rpcMethod!=='eth_sendRawTransaction'){_get(_getPrototypeOf(ContractDeployMethod.prototype),"beforeExecution",this).call(this,moduleInstance);delete this.parameters[0].to;}}},{key:"afterExecution",value:function afterExecution(response){var clonedContract=this.moduleInstance.clone();clonedContract.address=response.contractAddress;if(this.promiEvent.listenerCount('receipt')>0){this.promiEvent.emit('receipt',_get(_getPrototypeOf(ContractDeployMethod.prototype),"afterExecution",this).call(this,response));this.promiEvent.removeAllListeners('receipt');}return clonedContract;}}]);return ContractDeployMethod;}(web3CoreMethod.EthSendTransactionMethod);var PastEventLogsMethod=function(_GetPastLogsMethod){_inherits(PastEventLogsMethod,_GetPastLogsMethod);function PastEventLogsMethod(utils,formatters,moduleInstance,eventLogDecoder,abiItemModel,eventOptionsMapper){var _this;_classCallCheck(this,PastEventLogsMethod);_this=_possibleConstructorReturn(this,_getPrototypeOf(PastEventLogsMethod).call(this,utils,formatters,moduleInstance));_this.abiItemModel=abiItemModel;_this.eventLogDecoder=eventLogDecoder;_this.eventOptionsMapper=eventOptionsMapper;return _this;}_createClass(PastEventLogsMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){_get(_getPrototypeOf(PastEventLogsMethod.prototype),"beforeExecution",this).call(this,moduleInstance);this.parameters[0]=this.eventOptionsMapper.map(this.abiItemModel,moduleInstance,this.parameters[0]);}},{key:"afterExecution",value:function afterExecution(response){var _this2=this;var formattedLogs=_get(_getPrototypeOf(PastEventLogsMethod.prototype),"afterExecution",this).call(this,response);return formattedLogs.map(function(logItem){return _this2.eventLogDecoder.decode(_this2.abiItemModel,logItem);});}}]);return PastEventLogsMethod;}(web3CoreMethod.GetPastLogsMethod);var AllPastEventLogsMethod=function(_GetPastLogsMethod){_inherits(AllPastEventLogsMethod,_GetPastLogsMethod);function AllPastEventLogsMethod(utils,formatters,moduleInstance,allEventsLogDecoder,abiModel,allEventsOptionsMapper){var _this;_classCallCheck(this,AllPastEventLogsMethod);_this=_possibleConstructorReturn(this,_getPrototypeOf(AllPastEventLogsMethod).call(this,utils,formatters,moduleInstance));_this.abiModel=abiModel;_this.allEventsLogDecoder=allEventsLogDecoder;_this.allEventsOptionsMapper=allEventsOptionsMapper;return _this;}_createClass(AllPastEventLogsMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){_get(_getPrototypeOf(AllPastEventLogsMethod.prototype),"beforeExecution",this).call(this,moduleInstance);this.parameters[0]=this.allEventsOptionsMapper.map(this.abiModel,moduleInstance,this.parameters[0]);}},{key:"afterExecution",value:function afterExecution(response){var _this2=this;var formattedLogs=_get(_getPrototypeOf(AllPastEventLogsMethod.prototype),"afterExecution",this).call(this,response);return formattedLogs.map(function(logItem){return _this2.allEventsLogDecoder.decode(_this2.abiModel,logItem);});}}]);return AllPastEventLogsMethod;}(web3CoreMethod.GetPastLogsMethod);var MethodFactory=function(){function MethodFactory(utils,formatters,contractModuleFactory,abiCoder){_classCallCheck(this,MethodFactory);this.utils=utils;this.formatters=formatters;this.contractModuleFactory=contractModuleFactory;this.abiCoder=abiCoder;}_createClass(MethodFactory,[{key:"createMethodByRequestType",value:function createMethodByRequestType(abiItem,contract,requestType){var rpcMethod;switch(requestType){case'call':rpcMethod=this.createCallContractMethod(abiItem,contract);break;case'send':rpcMethod=this.createSendContractMethod(contract);break;case'estimate':rpcMethod=this.createEstimateGasMethod(contract);break;case'contract-deployment':rpcMethod=this.createContractDeployMethod(contract);break;}if(typeof rpcMethod==='undefined'){throw new TypeError("RPC call not found with requestType: \"".concat(requestType,"\""));}return rpcMethod;}},{key:"createPastEventLogsMethod",value:function createPastEventLogsMethod(abiItem,contract){return new PastEventLogsMethod(this.utils,this.formatters,contract,this.contractModuleFactory.createEventLogDecoder(),abiItem,this.contractModuleFactory.createEventOptionsMapper());}},{key:"createAllPastEventLogsMethod",value:function createAllPastEventLogsMethod(abiModel,contract){return new AllPastEventLogsMethod(this.utils,this.formatters,contract,this.contractModuleFactory.createAllEventsLogDecoder(),abiModel,this.contractModuleFactory.createAllEventsOptionsMapper());}},{key:"createCallContractMethod",value:function createCallContractMethod(abiItem,contract){return new CallContractMethod(this.utils,this.formatters,contract,this.abiCoder,abiItem);}},{key:"createSendContractMethod",value:function createSendContractMethod(contract){return new SendContractMethod(this.utils,this.formatters,contract,this.createTransactionObserver(contract),new web3CoreMethod.ChainIdMethod(this.utils,this.formatters,contract),new web3CoreMethod.GetTransactionCountMethod(this.utils,this.formatters,contract),this.contractModuleFactory.createAllEventsLogDecoder(),contract.abiModel);}},{key:"createContractDeployMethod",value:function createContractDeployMethod(contract){return new ContractDeployMethod(this.utils,this.formatters,contract,this.createTransactionObserver(contract),new web3CoreMethod.ChainIdMethod(this.utils,this.formatters,contract),new web3CoreMethod.GetTransactionCountMethod(this.utils,this.formatters,contract));}},{key:"createEstimateGasMethod",value:function createEstimateGasMethod(contract){return new web3CoreMethod.EstimateGasMethod(this.utils,this.formatters,contract);}},{key:"getTimeout",value:function getTimeout(contract){var timeout=contract.transactionBlockTimeout;if(!contract.currentProvider.supportsSubscriptions()){timeout=contract.transactionPollingTimeout;}return timeout;}},{key:"createTransactionObserver",value:function createTransactionObserver(contract){return new web3CoreMethod.TransactionObserver(contract.currentProvider,this.getTimeout(contract),contract.transactionConfirmationBlocks,new web3CoreMethod.GetTransactionReceiptMethod(this.utils,this.formatters,contract),new web3CoreMethod.GetBlockByNumberMethod(this.utils,this.formatters,contract),new web3CoreSubscriptions.NewHeadsSubscription(this.utils,this.formatters,contract));}}]);return MethodFactory;}();var EventLogSubscription=function(_LogSubscription){_inherits(EventLogSubscription,_LogSubscription);function EventLogSubscription(options,utils,formatters,contract,getPastLogsMethod,eventLogDecoder,abiItemModel){var _this;_classCallCheck(this,EventLogSubscription);_this=_possibleConstructorReturn(this,_getPrototypeOf(EventLogSubscription).call(this,options,utils,formatters,contract,getPastLogsMethod));_this.eventLogDecoder=eventLogDecoder;_this.abiItemModel=abiItemModel;return _this;}_createClass(EventLogSubscription,[{key:"onNewSubscriptionItem",value:function onNewSubscriptionItem(subscriptionItem){return this.eventLogDecoder.decode(this.abiItemModel,this.formatters.outputLogFormatter(subscriptionItem));}}]);return EventLogSubscription;}(web3CoreSubscriptions.LogSubscription);var AllEventsLogSubscription=function(_LogSubscription){_inherits(AllEventsLogSubscription,_LogSubscription);function AllEventsLogSubscription(options,utils,formatters,contract,getPastLogsMethod,allEventsLogDecoder,abiModel){var _this;_classCallCheck(this,AllEventsLogSubscription);_this=_possibleConstructorReturn(this,_getPrototypeOf(AllEventsLogSubscription).call(this,options,utils,formatters,contract,getPastLogsMethod));_this.allEventsLogDecoder=allEventsLogDecoder;_this.abiModel=abiModel;return _this;}_createClass(AllEventsLogSubscription,[{key:"onNewSubscriptionItem",value:function onNewSubscriptionItem(subscriptionItem){return this.allEventsLogDecoder.decode(this.abiModel,this.formatters.outputLogFormatter(subscriptionItem));}}]);return AllEventsLogSubscription;}(web3CoreSubscriptions.LogSubscription);var EventSubscriptionFactory=function(){function EventSubscriptionFactory(utils,formatters){_classCallCheck(this,EventSubscriptionFactory);this.utils=utils;this.formatters=formatters;}_createClass(EventSubscriptionFactory,[{key:"createEventLogSubscription",value:function createEventLogSubscription(eventLogDecoder,contract,options,abiItemModel){return new EventLogSubscription(options,this.utils,this.formatters,contract,new web3CoreMethod.GetPastLogsMethod(this.utils,this.formatters,contract),eventLogDecoder,abiItemModel);}},{key:"createAllEventsLogSubscription",value:function createAllEventsLogSubscription(allEventsLogDecoder,contract,options){return new AllEventsLogSubscription(options,this.utils,this.formatters,contract,new web3CoreMethod.GetPastLogsMethod(this.utils,this.formatters,contract),allEventsLogDecoder,contract.abiModel);}}]);return EventSubscriptionFactory;}();var AbstractContract=function(_AbstractWeb3Module){_inherits(AbstractContract,_AbstractWeb3Module);function AbstractContract(provider,contractModuleFactory,accounts,abiCoder,utils,formatters){var _this;var abi=arguments.length>6&&arguments[6]!==undefined?arguments[6]:[];var address=arguments.length>7&&arguments[7]!==undefined?arguments[7]:'';var options=arguments.length>8&&arguments[8]!==undefined?arguments[8]:{};_classCallCheck(this,AbstractContract);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbstractContract).call(this,provider,options,null,null));_this.contractModuleFactory=contractModuleFactory;_this.abiCoder=abiCoder;_this.utils=utils;_this.formatters=formatters;_this.abiMapper=_this.contractModuleFactory.createAbiMapper();_this.options=options;_this.accounts=accounts;_this.methodFactory=_this.contractModuleFactory.createMethodFactory();_this.abiModel=_this.abiMapper.map(abi);_this.transactionSigner=options.transactionSigner;_this.methods=_this.contractModuleFactory.createMethodsProxy(_assertThisInitialized(_this));_this.events=_this.contractModuleFactory.createEventSubscriptionsProxy(_assertThisInitialized(_this));if(address){_this.address=address;}return _this;}_createClass(AbstractContract,[{key:"once",value:function once(eventName,options,callback){if(!callback){throw new Error('Once requires a callback function.');}if(options){delete options.fromBlock;}var eventSubscription=this.events[eventName](options,callback);eventSubscription.on('data',function(){eventSubscription.unsubscribe();});}},{key:"getPastEvents",value:function getPastEvents(eventName,options,callback){var method;if(eventName!=='allEvents'){if(!this.abiModel.hasEvent(eventName)){return Promise.reject(new Error("Event with name \"".concat(eventName,"\" does not exists.")));}method=this.methodFactory.createPastEventLogsMethod(this.abiModel.getEvent(eventName),this);}else{method=this.methodFactory.createAllPastEventLogsMethod(this.abiModel,this);}method.parameters=[options];method.callback=callback;return method.execute();}},{key:"deploy",value:function deploy(options){return this.methods.contractConstructor(options);}},{key:"clone",value:function clone(){var clone=this.contractModuleFactory.createContract(this.currentProvider,this.accounts,[],'',{defaultAccount:this.defaultAccount,defaultBlock:this.defaultBlock,defaultGas:this.defaultGas,defaultGasPrice:this.defaultGasPrice,transactionBlockTimeout:this.transactionBlockTimeout,transactionConfirmationBlocks:this.transactionConfirmationBlocks,transactionPollingTimeout:this.transactionPollingTimeout,transactionSigner:this.transactionSigner,data:this.options.data});clone.abiModel=this.abiModel;return clone;}},{key:"jsonInterface",get:function get(){return this.abiModel;},set:function set(value){this.abiModel=this.abiMapper.map(value);this.methods.abiModel=this.abiModel;this.events.abiModel=this.abiModel;}},{key:"address",get:function get(){return this.options.address;},set:function set(value){this.options.address=value;}},{key:"data",get:function get(){return this.options.data;},set:function set(value){this.options.data=value;}}]);return AbstractContract;}(web3Core.AbstractWeb3Module);var ContractModuleFactory=function(){function ContractModuleFactory(utils,formatters,abiCoder){_classCallCheck(this,ContractModuleFactory);this.utils=utils;this.formatters=formatters;this.abiCoder=abiCoder;}_createClass(ContractModuleFactory,[{key:"createContract",value:function createContract(provider,accounts,abi,address,options){return new AbstractContract(provider,this,accounts,this.abiCoder,this.utils,this.formatters,abi,address,options);}},{key:"createAbiModel",value:function createAbiModel(mappedAbi){return new AbiModel(mappedAbi);}},{key:"createAbiItemModel",value:function createAbiItemModel(abiItem){return new AbiItemModel(abiItem);}},{key:"createMethodEncoder",value:function createMethodEncoder(){return new MethodEncoder(this.abiCoder);}},{key:"createEventFilterEncoder",value:function createEventFilterEncoder(){return new EventFilterEncoder(this.abiCoder);}},{key:"createAllEventsFilterEncoder",value:function createAllEventsFilterEncoder(){return new AllEventsFilterEncoder(this.abiCoder);}},{key:"createAbiMapper",value:function createAbiMapper(){return new AbiMapper(this,this.abiCoder,this.utils);}},{key:"createEventLogDecoder",value:function createEventLogDecoder(){return new EventLogDecoder(this.abiCoder);}},{key:"createAllEventsLogDecoder",value:function createAllEventsLogDecoder(){return new AllEventsLogDecoder(this.abiCoder);}},{key:"createMethodOptionsValidator",value:function createMethodOptionsValidator(){return new MethodOptionsValidator(this.utils);}},{key:"createMethodOptionsMapper",value:function createMethodOptionsMapper(){return new MethodOptionsMapper(this.utils,this.formatters);}},{key:"createEventOptionsMapper",value:function createEventOptionsMapper(){return new EventOptionsMapper(this.formatters,this.createEventFilterEncoder());}},{key:"createAllEventsOptionsMapper",value:function createAllEventsOptionsMapper(){return new AllEventsOptionsMapper(this.formatters,this.createAllEventsFilterEncoder());}},{key:"createMethodFactory",value:function createMethodFactory(){return new MethodFactory(this.utils,this.formatters,this,this.abiCoder);}},{key:"createMethodsProxy",value:function createMethodsProxy(contract){return new MethodsProxy(contract,this.createMethodFactory(),this.createMethodEncoder(),this.createMethodOptionsValidator(),this.createMethodOptionsMapper());}},{key:"createEventSubscriptionsProxy",value:function createEventSubscriptionsProxy(contract){return new EventSubscriptionsProxy(contract,this.createEventSubscriptionFactory(),this.createEventOptionsMapper(),this.createEventLogDecoder(),this.createAllEventsLogDecoder(),this.createAllEventsOptionsMapper());}},{key:"createEventSubscriptionFactory",value:function createEventSubscriptionFactory(){return new EventSubscriptionFactory(this.utils,this.formatters);}}]);return ContractModuleFactory;}();function Contract(provider,abi,accounts,address,options){return new ContractModuleFactory(Utils,web3CoreHelpers.formatters,new web3EthAbi.AbiCoder()).createContract(provider,accounts,abi,address,options);}exports.AbstractContract=AbstractContract;exports.Contract=Contract;exports.ContractModuleFactory=ContractModuleFactory;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/assertThisInitialized":46,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"lodash/cloneDeep":447,"lodash/isArray":453,"lodash/isFunction":457,"lodash/isUndefined":468,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-core-subscriptions":670,"web3-eth-abi":682,"web3-utils":700}],682:[function(require,module,exports){
arguments[4][673][0].apply(exports,arguments)
},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"dup":673,"ethers/utils/abi-coder":278,"lodash/isArray":453,"lodash/isObject":462,"web3-utils":700}],683:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-utils'),require('web3-core-helpers'),require('web3-providers'),require('web3-eth-contract'),require('web3-eth-abi'),require('web3-net'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('@babel/runtime/regenerator'),require('@babel/runtime/helpers/asyncToGenerator'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/get'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('web3-core'),require('lodash/isFunction'),require('eth-ens-namehash')):typeof define==='function'&&define.amd?define(['exports','web3-utils','web3-core-helpers','web3-providers','web3-eth-contract','web3-eth-abi','web3-net','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','@babel/runtime/regenerator','@babel/runtime/helpers/asyncToGenerator','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/get','@babel/runtime/helpers/inherits','web3-core-method','web3-core','lodash/isFunction','eth-ens-namehash'],factory):(global=global||self,factory(global.Web3EthEns={},global.Utils,global.web3CoreHelpers,global.web3Providers,global['web3-eth-contract'],global.web3EthAbi,global.web3Net,global._classCallCheck,global._createClass,global._regeneratorRuntime,global._asyncToGenerator,global._possibleConstructorReturn,global._getPrototypeOf,global._get,global._inherits,global.web3CoreMethod,global.web3Core,global.isFunction,global['eth-ens-namehash']));})(void 0,function(exports,Utils,web3CoreHelpers,web3Providers,web3EthContract,web3EthAbi,web3Net,_classCallCheck,_createClass,_regeneratorRuntime,_asyncToGenerator,_possibleConstructorReturn,_getPrototypeOf,_get,_inherits,web3CoreMethod,web3Core,isFunction,namehash){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;_regeneratorRuntime=_regeneratorRuntime&&_regeneratorRuntime.hasOwnProperty('default')?_regeneratorRuntime['default']:_regeneratorRuntime;_asyncToGenerator=_asyncToGenerator&&_asyncToGenerator.hasOwnProperty('default')?_asyncToGenerator['default']:_asyncToGenerator;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;namehash=namehash&&namehash.hasOwnProperty('default')?namehash['default']:namehash;var Ens=function(_AbstractWeb3Module){_inherits(Ens,_AbstractWeb3Module);function Ens(provider,options,ensModuleFactory,contractModuleFactory,accounts,abiCoder,utils,formatters,net,nodeNet){var _this;_classCallCheck(this,Ens);_this=_possibleConstructorReturn(this,_getPrototypeOf(Ens).call(this,provider,options,null,nodeNet));_this.accounts=accounts;_this.ensModuleFactory=ensModuleFactory;_this.contractModuleFactory=contractModuleFactory;_this.abiCoder=abiCoder;_this.utils=utils;_this.formatters=formatters;_this.registryOptions=options;_this.net=net;_this.transactionSigner=options.transactionSigner;_this._registry=false;return _this;}_createClass(Ens,[{key:"setProvider",value:function setProvider(provider,net){return _get(_getPrototypeOf(Ens.prototype),"setProvider",this).call(this,provider,net)&&this.registry.setProvider(provider,net);}},{key:"resolver",value:function resolver(name){return this.registry.resolver(name);}},{key:"supportsInterface",value:function(){var _supportsInterface=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(name,interfaceId,callback){var resolver;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.registry.resolver(name);case 2:resolver=_context.sent;return _context.abrupt("return",resolver.methods.supportsInterface(interfaceId).call(callback));case 4:case"end":return _context.stop();}}},_callee,this);}));function supportsInterface(_x,_x2,_x3){return _supportsInterface.apply(this,arguments);}return supportsInterface;}()},{key:"getAddress",value:function(){var _getAddress=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(name,callback){var resolver;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.registry.resolver(name);case 2:resolver=_context2.sent;return _context2.abrupt("return",resolver.methods.addr(namehash.hash(name)).call(callback));case 4:case"end":return _context2.stop();}}},_callee2,this);}));function getAddress(_x4,_x5){return _getAddress.apply(this,arguments);}return getAddress;}()},{key:"setAddress",value:function setAddress(name,address,sendOptions,callback){var promiEvent=new web3CoreMethod.PromiEvent();this.registry.resolver(name).then(function(resolver){resolver.methods.setAddr(namehash.hash(name),address).send(sendOptions,callback).on('transactionHash',function(transactionHash){promiEvent.emit('transactionHash',transactionHash);}).on('confirmation',function(confirmationNumber,receipt){promiEvent.emit('confirmation',confirmationNumber,receipt);}).on('receipt',function(receipt){if(isFunction(callback)){callback(receipt);}promiEvent.emit('receipt',receipt);promiEvent.resolve(receipt);}).on('error',function(error){if(isFunction(callback)){callback(error);}promiEvent.emit('error',error);promiEvent.reject(error);});});return promiEvent;}},{key:"getPubkey",value:function(){var _getPubkey=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(name,callback){var resolver;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.registry.resolver(name);case 2:resolver=_context3.sent;return _context3.abrupt("return",resolver.methods.pubkey(namehash.hash(name)).call(callback));case 4:case"end":return _context3.stop();}}},_callee3,this);}));function getPubkey(_x6,_x7){return _getPubkey.apply(this,arguments);}return getPubkey;}()},{key:"setPubkey",value:function setPubkey(name,x,y,sendOptions,callback){var promiEvent=new web3CoreMethod.PromiEvent();this.registry.resolver(name).then(function(resolver){resolver.methods.setPubkey(namehash.hash(name),x,y).send(sendOptions,callback).on('transactionHash',function(transactionHash){promiEvent.emit('transactionHash',transactionHash);}).on('confirmation',function(confirmationNumber,receipt){promiEvent.emit('confirmation',confirmationNumber,receipt);}).on('receipt',function(receipt){if(isFunction(callback)){callback(receipt);}promiEvent.emit('receipt',receipt);promiEvent.resolve(receipt);}).on('error',function(error){if(isFunction(callback)){callback(error);}promiEvent.emit('error',error);promiEvent.reject(error);});});return promiEvent;}},{key:"getText",value:function(){var _getText=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(name,key,callback){var resolver;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.registry.resolver(name);case 2:resolver=_context4.sent;return _context4.abrupt("return",resolver.methods.text(namehash.hash(name),key).call(callback));case 4:case"end":return _context4.stop();}}},_callee4,this);}));function getText(_x8,_x9,_x10){return _getText.apply(this,arguments);}return getText;}()},{key:"setText",value:function setText(name,key,value,sendOptions,callback){var promiEvent=new web3CoreMethod.PromiEvent();this.registry.resolver(name).then(function(resolver){resolver.methods.setText(namehash.hash(name),key,value).send(sendOptions,callback).on('transactionHash',function(transactionHash){promiEvent.emit('transactionHash',transactionHash);}).on('confirmation',function(confirmationNumber,receipt){promiEvent.emit('confirmation',confirmationNumber,receipt);}).on('receipt',function(receipt){if(isFunction(callback)){callback(receipt);}promiEvent.emit('receipt',receipt);promiEvent.resolve(receipt);}).on('error',function(error){if(isFunction(callback)){callback(error);}promiEvent.emit('error',error);promiEvent.reject(error);});});return promiEvent;}},{key:"getContent",value:function(){var _getContent=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(name,callback){var resolver;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.registry.resolver(name);case 2:resolver=_context5.sent;return _context5.abrupt("return",resolver.methods.content(namehash.hash(name)).call(callback));case 4:case"end":return _context5.stop();}}},_callee5,this);}));function getContent(_x11,_x12){return _getContent.apply(this,arguments);}return getContent;}()},{key:"setContent",value:function setContent(name,hash,sendOptions,callback){var promiEvent=new web3CoreMethod.PromiEvent();this.registry.resolver(name).then(function(resolver){resolver.methods.setContent(namehash.hash(name),hash).send(sendOptions,callback).on('transactionHash',function(transactionHash){promiEvent.emit('transactionHash',transactionHash);}).on('confirmation',function(confirmationNumber,receipt){promiEvent.emit('confirmation',confirmationNumber,receipt);}).on('receipt',function(receipt){if(isFunction(callback)){callback(receipt);}promiEvent.emit('receipt',receipt);promiEvent.resolve(receipt);}).on('error',function(error){if(isFunction(callback)){callback(error);}promiEvent.emit('error',error);promiEvent.reject(error);});});return promiEvent;}},{key:"getMultihash",value:function(){var _getMultihash=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(name,callback){var resolver;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.registry.resolver(name);case 2:resolver=_context6.sent;return _context6.abrupt("return",resolver.methods.multihash(namehash.hash(name)).call(callback));case 4:case"end":return _context6.stop();}}},_callee6,this);}));function getMultihash(_x13,_x14){return _getMultihash.apply(this,arguments);}return getMultihash;}()},{key:"setMultihash",value:function setMultihash(name,hash,sendOptions,callback){var promiEvent=new web3CoreMethod.PromiEvent();this.registry.resolver(name).then(function(resolver){resolver.methods.setMultihash(namehash.hash(name),hash).send(sendOptions,callback).on('transactionHash',function(transactionHash){promiEvent.emit('transactionHash',transactionHash);}).on('confirmation',function(confirmationNumber,receipt){promiEvent.emit('confirmation',confirmationNumber,receipt);}).on('receipt',function(receipt){if(isFunction(callback)){callback(receipt);}promiEvent.emit('receipt',receipt);promiEvent.resolve(receipt);}).on('error',function(error){if(isFunction(callback)){callback(error);}promiEvent.emit('error',error);promiEvent.reject(error);});});return promiEvent;}},{key:"getContenthash",value:function(){var _getContenthash=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(name,callback){var resolver;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.registry.resolver(name);case 2:resolver=_context7.sent;return _context7.abrupt("return",resolver.methods.contenthash(namehash.hash(name)).call(callback));case 4:case"end":return _context7.stop();}}},_callee7,this);}));function getContenthash(_x15,_x16){return _getContenthash.apply(this,arguments);}return getContenthash;}()},{key:"setContenthash",value:function setContenthash(name,hash,sendOptions,callback){var promiEvent=new web3CoreMethod.PromiEvent();this.registry.resolver(name).then(function(resolver){resolver.methods.setContenthash(namehash.hash(name),hash).send(sendOptions,callback).on('transactionHash',function(transactionHash){promiEvent.emit('transactionHash',transactionHash);}).on('confirmation',function(confirmationNumber,receipt){promiEvent.emit('confirmation',confirmationNumber,receipt);}).on('receipt',function(receipt){if(isFunction(callback)){callback(receipt);}promiEvent.emit('receipt',receipt);promiEvent.resolve(receipt);}).on('error',function(error){if(isFunction(callback)){callback(error);}promiEvent.emit('error',error);promiEvent.reject(error);});});return promiEvent;}},{key:"registry",get:function get(){if(!this._registry){this._registry=this.ensModuleFactory.createRegistry(this.currentProvider,this.contractModuleFactory,this.accounts,this.abiCoder,this.utils,this.formatters,this.registryOptions,this.net);}return this._registry;}}]);return Ens;}(web3Core.AbstractWeb3Module);var REGISTRY_ABI=[{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'resolver',outputs:[{name:'',type:'address'}],payable:false,type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'owner',outputs:[{name:'',type:'address'}],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'label',type:'bytes32'},{name:'owner',type:'address'}],name:'setSubnodeOwner',outputs:[],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'ttl',type:'uint64'}],name:'setTTL',outputs:[],payable:false,type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'ttl',outputs:[{name:'',type:'uint64'}],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'resolver',type:'address'}],name:'setResolver',outputs:[],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'owner',type:'address'}],name:'setOwner',outputs:[],payable:false,type:'function'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'owner',type:'address'}],name:'Transfer',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:true,name:'label',type:'bytes32'},{indexed:false,name:'owner',type:'address'}],name:'NewOwner',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'resolver',type:'address'}],name:'NewResolver',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'ttl',type:'uint64'}],name:'NewTTL',type:'event'}];var RESOLVER_ABI=[{constant:true,inputs:[{name:'node',type:'bytes32'},{name:'key',type:'string'}],name:'text',outputs:[{name:'',type:'string'}],payable:false,stateMutability:'view',type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'key',type:'string'},{name:'value',type:'string'}],name:'setText',outputs:[],payable:false,stateMutability:'nonpayable',type:'function'},{constant:true,inputs:[{name:'interfaceID',type:'bytes4'}],name:'supportsInterface',outputs:[{name:'',type:'bool'}],payable:false,stateMutability:'pure',type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'},{name:'contentTypes',type:'uint256'}],name:'ABI',outputs:[{name:'contentType',type:'uint256'},{name:'data',type:'bytes'}],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'hash',type:'bytes'}],name:'setMultihash',outputs:[],payable:false,stateMutability:'nonpayable',type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'multihash',outputs:[{name:'',type:'bytes'}],payable:false,stateMutability:'view',type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'hash',type:'bytes'}],name:'setContenthash',outputs:[],payable:false,stateMutability:'nonpayable',type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'contenthash',outputs:[{name:'',type:'bytes'}],payable:false,stateMutability:'view',type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'x',type:'bytes32'},{name:'y',type:'bytes32'}],name:'setPubkey',outputs:[],payable:false,type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'content',outputs:[{name:'ret',type:'bytes32'}],payable:false,type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'addr',outputs:[{name:'ret',type:'address'}],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'contentType',type:'uint256'},{name:'data',type:'bytes'}],name:'setABI',outputs:[],payable:false,type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'name',outputs:[{name:'ret',type:'string'}],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'name',type:'string'}],name:'setName',outputs:[],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'hash',type:'bytes32'}],name:'setContent',outputs:[],payable:false,type:'function'},{constant:true,inputs:[{name:'node',type:'bytes32'}],name:'pubkey',outputs:[{name:'x',type:'bytes32'},{name:'y',type:'bytes32'}],payable:false,type:'function'},{constant:false,inputs:[{name:'node',type:'bytes32'},{name:'addr',type:'address'}],name:'setAddr',outputs:[],payable:false,type:'function'},{inputs:[{name:'ensAddr',type:'address'}],payable:false,type:'constructor'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'a',type:'address'}],name:'AddrChanged',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'hash',type:'bytes32'}],name:'ContentChanged',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'indexedKey',type:'string'},{indexed:false,name:'key',type:'string'}],name:'TextChanged',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'hash',type:'bytes'}],name:'ContenthashChanged',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'name',type:'string'}],name:'NameChanged',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:true,name:'contentType',type:'uint256'}],name:'ABIChanged',type:'event'},{anonymous:false,inputs:[{indexed:true,name:'node',type:'bytes32'},{indexed:false,name:'x',type:'bytes32'},{indexed:false,name:'y',type:'bytes32'}],name:'PubkeyChanged',type:'event'}];var Registry=function(_AbstractContract){_inherits(Registry,_AbstractContract);function Registry(provider,contractModuleFactory,accounts,abiCoder,utils,formatters,options,net){var _this;_classCallCheck(this,Registry);_this=_possibleConstructorReturn(this,_getPrototypeOf(Registry).call(this,provider,contractModuleFactory,accounts,abiCoder,utils,formatters,REGISTRY_ABI,'',options));_this.net=net;_this.resolverContract=null;_this.resolverName=null;return _this;}_createClass(Registry,[{key:"owner",value:function(){var _owner=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(name,callback){var _owner2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.address){_context.next=4;break;}_context.next=3;return this.checkNetwork();case 3:this.address=_context.sent;case 4:_context.prev=4;_context.next=7;return this.methods.owner(namehash.hash(name)).call();case 7:_owner2=_context.sent;if(isFunction(callback)){callback(false,_owner2);}return _context.abrupt("return",_owner2);case 12:_context.prev=12;_context.t0=_context["catch"](4);if(isFunction(callback)){callback(_context.t0,null);}throw _context.t0;case 16:case"end":return _context.stop();}}},_callee,this,[[4,12]]);}));function owner(_x,_x2){return _owner.apply(this,arguments);}return owner;}()},{key:"setProvider",value:function setProvider(provider,net){if(this.resolverContract){return this.resolverContract.setProvider(provider,net)&&_get(_getPrototypeOf(Registry.prototype),"setProvider",this).call(this,provider,net);}return _get(_getPrototypeOf(Registry.prototype),"setProvider",this).call(this,provider,net);}},{key:"resolver",value:function(){var _resolver=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(name){var address,clone;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.resolverName===name&&this.resolverContract)){_context2.next=2;break;}return _context2.abrupt("return",this.resolverContract);case 2:if(this.address){_context2.next=6;break;}_context2.next=5;return this.checkNetwork();case 5:this.address=_context2.sent;case 6:_context2.next=8;return this.methods.resolver(namehash.hash(name)).call();case 8:address=_context2.sent;clone=this.clone();clone.jsonInterface=RESOLVER_ABI;clone.address=address;this.resolverName=name;this.resolverContract=clone;return _context2.abrupt("return",clone);case 15:case"end":return _context2.stop();}}},_callee2,this);}));function resolver(_x3){return _resolver.apply(this,arguments);}return resolver;}()},{key:"checkNetwork",value:function(){var _checkNetwork=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var ensAddresses,block,headAge,networkType,address;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ensAddresses={main:'0x314159265dD8dbb310642f98f50C066173C1259b',ropsten:'0x112234455c3a32fd11230c42e7bccd4a84e02010',rinkeby:'0xe7410170f87102df0055eb195163a03b7f2bff4a'};_context3.next=3;return this.net.getBlockByNumber('latest',false);case 3:block=_context3.sent;headAge=new Date()/1000-block.timestamp;if(!(headAge>3600)){_context3.next=7;break;}throw new Error("Network not synced; last block was ".concat(headAge," seconds ago"));case 7:_context3.next=9;return this.net.getNetworkType();case 9:networkType=_context3.sent;address=ensAddresses[networkType];if(!(typeof address==='undefined')){_context3.next=13;break;}throw new TypeError("ENS is not supported on network: \"".concat(networkType,"\""));case 13:return _context3.abrupt("return",address);case 14:case"end":return _context3.stop();}}},_callee3,this);}));function checkNetwork(){return _checkNetwork.apply(this,arguments);}return checkNetwork;}()}]);return Registry;}(web3EthContract.AbstractContract);var EnsModuleFactory=function(){function EnsModuleFactory(){_classCallCheck(this,EnsModuleFactory);}_createClass(EnsModuleFactory,[{key:"createENS",value:function createENS(provider,contractModuleFactory,accounts,abiCoder,utils,formatters,net,ensModuleOptions,nodeNet){return new Ens(provider,ensModuleOptions,this,contractModuleFactory,accounts,abiCoder,utils,formatters,net,nodeNet);}},{key:"createRegistry",value:function createRegistry(provider,contractModuleFactory,accounts,abiCoder,utils,formatters,options,net){return new Registry(provider,contractModuleFactory,accounts,abiCoder,utils,formatters,options,net);}}]);return EnsModuleFactory;}();function Ens$1(provider){var net=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var accounts=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var abiCoder=new web3EthAbi.AbiCoder();var resolvedProvider=new web3Providers.ProviderResolver().resolve(provider,net);return new EnsModuleFactory().createENS(resolvedProvider,new web3EthContract.ContractModuleFactory(Utils,web3CoreHelpers.formatters,abiCoder),accounts,abiCoder,Utils,web3CoreHelpers.formatters,new web3Net.Network(resolvedProvider,null,options),options,null);}exports.Ens=Ens$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"eth-ens-namehash":239,"lodash/isFunction":457,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-eth-abi":684,"web3-eth-contract":681,"web3-net":697,"web3-providers":698,"web3-utils":700}],697:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-core-helpers'),require('web3-utils'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('@babel/runtime/regenerator'),require('@babel/runtime/helpers/asyncToGenerator'),require('@babel/runtime/helpers/createClass'),require('web3-core'),require('lodash/isFunction')):typeof define==='function'&&define.amd?define(['exports','web3-core-helpers','web3-utils','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','web3-core-method','@babel/runtime/regenerator','@babel/runtime/helpers/asyncToGenerator','@babel/runtime/helpers/createClass','web3-core','lodash/isFunction'],factory):(global=global||self,factory(global.Web3Net={},global.web3CoreHelpers,global.Utils,global._classCallCheck,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.web3CoreMethod,global._regeneratorRuntime,global._asyncToGenerator,global._createClass,global.web3Core,global.isFunction));})(void 0,function(exports,web3CoreHelpers,Utils,_classCallCheck,_possibleConstructorReturn,_getPrototypeOf,_inherits,web3CoreMethod,_regeneratorRuntime,_asyncToGenerator,_createClass,web3Core,isFunction){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;_regeneratorRuntime=_regeneratorRuntime&&_regeneratorRuntime.hasOwnProperty('default')?_regeneratorRuntime['default']:_regeneratorRuntime;_asyncToGenerator=_asyncToGenerator&&_asyncToGenerator.hasOwnProperty('default')?_asyncToGenerator['default']:_asyncToGenerator;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;isFunction=isFunction&&isFunction.hasOwnProperty('default')?isFunction['default']:isFunction;var MethodFactory=function(_AbstractMethodFactor){_inherits(MethodFactory,_AbstractMethodFactor);function MethodFactory(utils,formatters){var _this;_classCallCheck(this,MethodFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(MethodFactory).call(this,utils,formatters));_this.methods={getId:web3CoreMethod.VersionMethod,getBlockByNumber:web3CoreMethod.GetBlockByNumberMethod,isListening:web3CoreMethod.ListeningMethod,getPeerCount:web3CoreMethod.PeerCountMethod};return _this;}return MethodFactory;}(web3CoreMethod.AbstractMethodFactory);var Network=function(_AbstractWeb3Module){_inherits(Network,_AbstractWeb3Module);function Network(provider,methodFactory,utils,formatters,options,nodeNet){var _this;_classCallCheck(this,Network);_this=_possibleConstructorReturn(this,_getPrototypeOf(Network).call(this,provider,options,methodFactory,nodeNet));_this.utils=utils;_this.formatters=formatters;return _this;}_createClass(Network,[{key:"getNetworkType",value:function(){var _getNetworkType=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(callback){var id,networkType;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.getId();case 3:id=_context.sent;networkType='private';_context.t0=id;_context.next=_context.t0===1?8:_context.t0===2?10:_context.t0===3?12:_context.t0===4?14:_context.t0===42?16:18;break;case 8:networkType='main';return _context.abrupt("break",18);case 10:networkType='morden';return _context.abrupt("break",18);case 12:networkType='ropsten';return _context.abrupt("break",18);case 14:networkType='rinkeby';return _context.abrupt("break",18);case 16:networkType='kovan';return _context.abrupt("break",18);case 18:if(isFunction(callback)){callback(null,networkType);}return _context.abrupt("return",networkType);case 22:_context.prev=22;_context.t1=_context["catch"](0);if(isFunction(callback)){callback(_context.t1,null);}throw _context.t1;case 26:case"end":return _context.stop();}}},_callee,this,[[0,22]]);}));function getNetworkType(_x){return _getNetworkType.apply(this,arguments);}return getNetworkType;}()}]);return Network;}(web3Core.AbstractWeb3Module);function Network$1(provider){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return new Network(provider,new MethodFactory(Utils,web3CoreHelpers.formatters),Utils,web3CoreHelpers.formatters,options,null);}exports.Network=Network$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"lodash/isFunction":457,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-utils":700}],684:[function(require,module,exports){
arguments[4][673][0].apply(exports,arguments)
},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"dup":673,"ethers/utils/abi-coder":278,"lodash/isArray":453,"lodash/isObject":462,"web3-utils":700}],686:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-net'),require('web3-utils'),require('web3-core-helpers'),require('web3-providers'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('@babel/runtime/helpers/createClass'),require('@babel/runtime/helpers/set'),require('@babel/runtime/helpers/get'),require('web3-core')):typeof define==='function'&&define.amd?define(['exports','web3-net','web3-utils','web3-core-helpers','web3-providers','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','web3-core-method','@babel/runtime/helpers/createClass','@babel/runtime/helpers/set','@babel/runtime/helpers/get','web3-core'],factory):(global=global||self,factory(global.Web3EthPersonal={},global.web3Net,global.Utils,global.web3CoreHelpers,global.web3Providers,global._classCallCheck,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.web3CoreMethod,global._createClass,global._set,global._get,global.web3Core));})(void 0,function(exports,web3Net,Utils,web3CoreHelpers,web3Providers,_classCallCheck,_possibleConstructorReturn,_getPrototypeOf,_inherits,web3CoreMethod,_createClass,_set,_get,web3Core){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;_set=_set&&_set.hasOwnProperty('default')?_set['default']:_set;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;var MethodFactory=function(_AbstractMethodFactor){_inherits(MethodFactory,_AbstractMethodFactor);function MethodFactory(utils,formatters){var _this;_classCallCheck(this,MethodFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(MethodFactory).call(this,utils,formatters));_this.methods={getAccounts:web3CoreMethod.GetAccountsMethod,newAccount:web3CoreMethod.NewAccountMethod,unlockAccount:web3CoreMethod.UnlockAccountMethod,lockAccount:web3CoreMethod.LockAccountMethod,importRawKey:web3CoreMethod.ImportRawKeyMethod,sendTransaction:web3CoreMethod.PersonalSendTransactionMethod,signTransaction:web3CoreMethod.PersonalSignTransactionMethod,sign:web3CoreMethod.PersonalSignMethod,ecRecover:web3CoreMethod.EcRecoverMethod};return _this;}return MethodFactory;}(web3CoreMethod.AbstractMethodFactory);var Personal=function(_AbstractWeb3Module){_inherits(Personal,_AbstractWeb3Module);function Personal(provider,methodFactory,net,utils,formatters,options,nodeNet){var _this;_classCallCheck(this,Personal);_this=_possibleConstructorReturn(this,_getPrototypeOf(Personal).call(this,provider,options,methodFactory,nodeNet));_this.utils=utils;_this.formatters=formatters;_this.net=net;return _this;}_createClass(Personal,[{key:"setProvider",value:function setProvider(provider,net){return!!(_get(_getPrototypeOf(Personal.prototype),"setProvider",this).call(this,provider,net)&&this.net.setProvider(provider,net));}},{key:"defaultGasPrice",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"defaultGasPrice",value,this,true);this.net.defaultGasPrice=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"defaultGasPrice",this);}},{key:"defaultGas",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"defaultGas",value,this,true);this.net.defaultGas=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"defaultGas",this);}},{key:"transactionBlockTimeout",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"transactionBlockTimeout",value,this,true);this.net.transactionBlockTimeout=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"transactionBlockTimeout",this);}},{key:"transactionConfirmationBlocks",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"transactionConfirmationBlocks",value,this,true);this.net.transactionConfirmationBlocks=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"transactionConfirmationBlocks",this);}},{key:"transactionPollingTimeout",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"transactionPollingTimeout",value,this,true);this.net.transactionPollingTimeout=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"transactionPollingTimeout",this);}},{key:"defaultAccount",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"defaultAccount",value,this,true);this.net.defaultAccount=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"defaultAccount",this);}},{key:"defaultBlock",set:function set(value){_set(_getPrototypeOf(Personal.prototype),"defaultBlock",value,this,true);this.net.defaultBlock=value;},get:function get(){return _get(_getPrototypeOf(Personal.prototype),"defaultBlock",this);}}]);return Personal;}(web3Core.AbstractWeb3Module);function Personal$1(provider){var net=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var resolvedProvider=new web3Providers.ProviderResolver().resolve(provider,net);return new Personal(resolvedProvider,new MethodFactory(Utils,web3CoreHelpers.formatters),new web3Net.Network(resolvedProvider,null,options),Utils,web3CoreHelpers.formatters,options,null);}exports.Personal=Personal$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/set":61,"@babel/runtime/helpers/typeof":66,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-net":697,"web3-providers":698,"web3-utils":700}],687:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-core-helpers'),require('web3-eth-accounts'),require('web3-eth-ens'),require('web3-eth-contract'),require('web3-eth-personal'),require('web3-eth-abi'),require('web3-eth-iban'),require('web3-net'),require('web3-utils'),require('@babel/runtime/regenerator'),require('@babel/runtime/helpers/asyncToGenerator'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/createClass'),require('ethereumjs-tx'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('@babel/runtime/helpers/get'),require('lodash/isString'),require('web3-core-subscriptions'),require('web3-providers'),require('@babel/runtime/helpers/set'),require('web3-core')):typeof define==='function'&&define.amd?define(['exports','web3-core-helpers','web3-eth-accounts','web3-eth-ens','web3-eth-contract','web3-eth-personal','web3-eth-abi','web3-eth-iban','web3-net','web3-utils','@babel/runtime/regenerator','@babel/runtime/helpers/asyncToGenerator','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/createClass','ethereumjs-tx','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','web3-core-method','@babel/runtime/helpers/get','lodash/isString','web3-core-subscriptions','web3-providers','@babel/runtime/helpers/set','web3-core'],factory):(global=global||self,factory(global.Web3Eth={},global.web3CoreHelpers,global.web3EthAccounts,global.web3EthEns,global.web3EthContract,global.web3EthPersonal,global.web3EthAbi,global.web3EthIban,global.web3Net,global.Utils,global._regeneratorRuntime,global._asyncToGenerator,global._classCallCheck,global._createClass,global.EthereumTx,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.web3CoreMethod,global._get,global.isString,global.web3CoreSubscriptions,global.web3Providers,global._set,global.web3Core));})(void 0,function(exports,web3CoreHelpers,web3EthAccounts,web3EthEns,web3EthContract,web3EthPersonal,web3EthAbi,web3EthIban,web3Net,Utils,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,EthereumTx,_possibleConstructorReturn,_getPrototypeOf,_inherits,web3CoreMethod,_get,isString,web3CoreSubscriptions,web3Providers,_set,web3Core){'use strict';_regeneratorRuntime=_regeneratorRuntime&&_regeneratorRuntime.hasOwnProperty('default')?_regeneratorRuntime['default']:_regeneratorRuntime;_asyncToGenerator=_asyncToGenerator&&_asyncToGenerator.hasOwnProperty('default')?_asyncToGenerator['default']:_asyncToGenerator;_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;EthereumTx=EthereumTx&&EthereumTx.hasOwnProperty('default')?EthereumTx['default']:EthereumTx;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;isString=isString&&isString.hasOwnProperty('default')?isString['default']:isString;_set=_set&&_set.hasOwnProperty('default')?_set['default']:_set;var TransactionSigner=function(){function TransactionSigner(utils,formatters){_classCallCheck(this,TransactionSigner);this.utils=utils;this.formatters=formatters;}_createClass(TransactionSigner,[{key:"sign",value:function(){var _sign=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(transaction,privateKey){var ethTx,validationResult,rlpEncoded,rawTransaction,transactionHash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(privateKey){_context.next=2;break;}throw new Error('No privateKey given to the TransactionSigner.');case 2:if(privateKey.startsWith('0x')){privateKey=privateKey.substring(2);}ethTx=new EthereumTx(transaction);ethTx.sign(Buffer.from(privateKey,'hex'));validationResult=ethTx.validate(true);if(!(validationResult!=='')){_context.next=8;break;}throw new Error("TransactionSigner Error: ".concat(validationResult));case 8:rlpEncoded=ethTx.serialize().toString('hex');rawTransaction='0x'+rlpEncoded;transactionHash=this.utils.keccak256(rawTransaction);return _context.abrupt("return",{messageHash:Buffer.from(ethTx.hash(false)).toString('hex'),v:'0x'+Buffer.from(ethTx.v).toString('hex'),r:'0x'+Buffer.from(ethTx.r).toString('hex'),s:'0x'+Buffer.from(ethTx.s).toString('hex'),rawTransaction:rawTransaction,transactionHash:transactionHash});case 12:case"end":return _context.stop();}}},_callee,this);}));function sign(_x,_x2){return _sign.apply(this,arguments);}return sign;}()},{key:"type",get:function get(){return'TransactionSigner';}}]);return TransactionSigner;}();var GetBlockMethod=function(_AbstractGetBlockMeth){_inherits(GetBlockMethod,_AbstractGetBlockMeth);function GetBlockMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockMethod).call(this,'eth_getBlockByNumber',utils,formatters,moduleInstance));}_createClass(GetBlockMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.isHash(this.parameters[0])){this.rpcMethod='eth_getBlockByHash';}_get(_getPrototypeOf(GetBlockMethod.prototype),"beforeExecution",this).call(this,moduleInstance);}}]);return GetBlockMethod;}(web3CoreMethod.AbstractGetBlockMethod);var GetUncleMethod=function(_AbstractGetUncleMeth){_inherits(GetUncleMethod,_AbstractGetUncleMeth);function GetUncleMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetUncleMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetUncleMethod).call(this,'eth_getUncleByBlockNumberAndIndex',utils,formatters,moduleInstance));}_createClass(GetUncleMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.isHash(this.parameters[0])){this.rpcMethod='eth_getUncleByBlockHashAndIndex';}_get(_getPrototypeOf(GetUncleMethod.prototype),"beforeExecution",this).call(this,moduleInstance);}}]);return GetUncleMethod;}(web3CoreMethod.AbstractGetUncleMethod);var GetBlockTransactionCountMethod=function(_AbstractGetBlockTran){_inherits(GetBlockTransactionCountMethod,_AbstractGetBlockTran);function GetBlockTransactionCountMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockTransactionCountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockTransactionCountMethod).call(this,'eth_getBlockTransactionCountByNumber',utils,formatters,moduleInstance));}_createClass(GetBlockTransactionCountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.isHash(this.parameters[0])){this.rpcMethod='eth_getBlockTransactionCountByHash';}_get(_getPrototypeOf(GetBlockTransactionCountMethod.prototype),"beforeExecution",this).call(this,moduleInstance);}}]);return GetBlockTransactionCountMethod;}(web3CoreMethod.AbstractGetBlockTransactionCountMethod);var GetBlockUncleCountMethod=function(_AbstractGetBlockUncl){_inherits(GetBlockUncleCountMethod,_AbstractGetBlockUncl);function GetBlockUncleCountMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetBlockUncleCountMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetBlockUncleCountMethod).call(this,'eth_getUncleCountByBlockNumber',utils,formatters,moduleInstance));}_createClass(GetBlockUncleCountMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.isHash(this.parameters[0])){this.rpcMethod='eth_getUncleCountByBlockHash';}_get(_getPrototypeOf(GetBlockUncleCountMethod.prototype),"beforeExecution",this).call(this,moduleInstance);}}]);return GetBlockUncleCountMethod;}(web3CoreMethod.AbstractGetBlockUncleCountMethod);var GetTransactionFromBlockMethod=function(_AbstractGetTransacti){_inherits(GetTransactionFromBlockMethod,_AbstractGetTransacti);function GetTransactionFromBlockMethod(utils,formatters,moduleInstance){_classCallCheck(this,GetTransactionFromBlockMethod);return _possibleConstructorReturn(this,_getPrototypeOf(GetTransactionFromBlockMethod).call(this,'eth_getTransactionByBlockNumberAndIndex',utils,formatters,moduleInstance));}_createClass(GetTransactionFromBlockMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){if(this.isHash(this.parameters[0])){this.rpcMethod='eth_getTransactionByBlockHashAndIndex';}_get(_getPrototypeOf(GetTransactionFromBlockMethod.prototype),"beforeExecution",this).call(this,moduleInstance);}}]);return GetTransactionFromBlockMethod;}(web3CoreMethod.AbstractGetTransactionFromBlockMethod);var EthSignTransactionMethod=function(_SignTransactionMetho){_inherits(EthSignTransactionMethod,_SignTransactionMetho);function EthSignTransactionMethod(utils,formatters,moduleInstance){_classCallCheck(this,EthSignTransactionMethod);return _possibleConstructorReturn(this,_getPrototypeOf(EthSignTransactionMethod).call(this,utils,formatters,moduleInstance));}_createClass(EthSignTransactionMethod,[{key:"beforeExecution",value:function beforeExecution(moduleInstance){this.parameters[0]=this.formatters.inputTransactionFormatter(this.parameters[0],moduleInstance);}},{key:"execute",value:function execute(){if(isString(this.parameters[1])){var account=this.moduleInstance.accounts.wallet[this.parameters[1]];if(account){return this.moduleInstance.transactionSigner.sign(this.parameters[0],account.privateKey);}}return _get(_getPrototypeOf(EthSignTransactionMethod.prototype),"execute",this).call(this);}}]);return EthSignTransactionMethod;}(web3CoreMethod.SignTransactionMethod);var EthSignMethod=function(_SignMethod){_inherits(EthSignMethod,_SignMethod);function EthSignMethod(utils,formatters,moduleInstance){_classCallCheck(this,EthSignMethod);return _possibleConstructorReturn(this,_getPrototypeOf(EthSignMethod).call(this,utils,formatters,moduleInstance));}_createClass(EthSignMethod,[{key:"execute",value:function execute(){if(this.moduleInstance.accounts.wallet[this.parameters[1]]){return this.signLocally();}return _get(_getPrototypeOf(EthSignMethod.prototype),"execute",this).call(this);}},{key:"signLocally",value:function(){var _signLocally=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var signedMessage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;this.beforeExecution(this.moduleInstance);signedMessage=this.moduleInstance.accounts.sign(this.parameters[1],this.moduleInstance.accounts.wallet[this.parameters[0]].privateKey);if(!this.callback){_context.next=6;break;}this.callback(false,signedMessage);return _context.abrupt("return");case 6:return _context.abrupt("return",signedMessage);case 9:_context.prev=9;_context.t0=_context["catch"](0);if(!this.callback){_context.next=14;break;}this.callback(_context.t0,null);return _context.abrupt("return");case 14:throw _context.t0;case 15:case"end":return _context.stop();}}},_callee,this,[[0,9]]);}));function signLocally(){return _signLocally.apply(this,arguments);}return signLocally;}()}]);return EthSignMethod;}(web3CoreMethod.SignMethod);var EthGetAccountsMethod=function(_GetAccountsMethod){_inherits(EthGetAccountsMethod,_GetAccountsMethod);function EthGetAccountsMethod(utils,formatters,moduleInstance){_classCallCheck(this,EthGetAccountsMethod);return _possibleConstructorReturn(this,_getPrototypeOf(EthGetAccountsMethod).call(this,utils,formatters,moduleInstance));}_createClass(EthGetAccountsMethod,[{key:"execute",value:function execute(){if(this.moduleInstance.accounts.wallet.accountsIndex){var accounts=[];for(var i=0;i<this.moduleInstance.accounts.wallet.accountsIndex;i++){accounts.push(this.moduleInstance.accounts.wallet[i].address);}return Promise.resolve(accounts);}return _get(_getPrototypeOf(EthGetAccountsMethod.prototype),"execute",this).call(this);}}]);return EthGetAccountsMethod;}(web3CoreMethod.GetAccountsMethod);var MethodFactory=function(_AbstractMethodFactor){_inherits(MethodFactory,_AbstractMethodFactor);function MethodFactory(utils,formatters){var _this;_classCallCheck(this,MethodFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(MethodFactory).call(this,utils,formatters));_this.methods={getNodeInfo:web3CoreMethod.GetNodeInfoMethod,getProtocolVersion:web3CoreMethod.GetProtocolVersionMethod,getCoinbase:web3CoreMethod.GetCoinbaseMethod,isMining:web3CoreMethod.IsMiningMethod,getHashrate:web3CoreMethod.GetHashrateMethod,isSyncing:web3CoreMethod.IsSyncingMethod,getGasPrice:web3CoreMethod.GetGasPriceMethod,getAccounts:EthGetAccountsMethod,getBlockNumber:web3CoreMethod.GetBlockNumberMethod,getBalance:web3CoreMethod.GetBalanceMethod,getStorageAt:web3CoreMethod.GetStorageAtMethod,getCode:web3CoreMethod.GetCodeMethod,getBlock:GetBlockMethod,getUncle:GetUncleMethod,getBlockTransactionCount:GetBlockTransactionCountMethod,getBlockUncleCount:GetBlockUncleCountMethod,getTransaction:web3CoreMethod.GetTransactionMethod,getPendingTransactions:web3CoreMethod.GetPendingTransactionsMethod,getTransactionFromBlock:GetTransactionFromBlockMethod,getTransactionReceipt:web3CoreMethod.GetTransactionReceiptMethod,getTransactionCount:web3CoreMethod.GetTransactionCountMethod,sendSignedTransaction:web3CoreMethod.SendRawTransactionMethod,signTransaction:EthSignTransactionMethod,sendTransaction:web3CoreMethod.EthSendTransactionMethod,sign:EthSignMethod,call:web3CoreMethod.CallMethod,estimateGas:web3CoreMethod.EstimateGasMethod,submitWork:web3CoreMethod.SubmitWorkMethod,getWork:web3CoreMethod.GetWorkMethod,getPastLogs:web3CoreMethod.GetPastLogsMethod,requestAccounts:web3CoreMethod.RequestAccountsMethod,getId:web3CoreMethod.VersionMethod,getChainId:web3CoreMethod.ChainIdMethod,getProof:web3CoreMethod.GetProofMethod};return _this;}return MethodFactory;}(web3CoreMethod.AbstractMethodFactory);var SubscriptionsFactory=function(){function SubscriptionsFactory(utils,formatters){_classCallCheck(this,SubscriptionsFactory);this.utils=utils;this.formatters=formatters;}_createClass(SubscriptionsFactory,[{key:"getSubscription",value:function getSubscription(moduleInstance,type,options){switch(type){case'logs':return new web3CoreSubscriptions.LogSubscription(options,this.utils,this.formatters,moduleInstance,new web3CoreMethod.GetPastLogsMethod(this.utils,this.formatters,moduleInstance));case'newBlockHeaders':return new web3CoreSubscriptions.NewHeadsSubscription(this.utils,this.formatters,moduleInstance);case'pendingTransactions':return new web3CoreSubscriptions.NewPendingTransactionsSubscription(this.utils,this.formatters,moduleInstance);case'syncing':return new web3CoreSubscriptions.SyncingSubscription(this.utils,this.formatters,moduleInstance);default:throw new Error("Unknown subscription: ".concat(type));}}}]);return SubscriptionsFactory;}();var Eth=function(_AbstractWeb3Module){_inherits(Eth,_AbstractWeb3Module);function Eth(provider,methodFactory,net,accounts,personal,Iban,abiCoder,ens,utils,formatters,subscriptionsFactory,contractModuleFactory,options,nodeNet){var _this;_classCallCheck(this,Eth);_this=_possibleConstructorReturn(this,_getPrototypeOf(Eth).call(this,provider,options,methodFactory,nodeNet));_this.net=net;_this.accounts=accounts;_this.personal=personal;_this.Iban=Iban;_this.abi=abiCoder;_this.ens=ens;_this.utils=utils;_this.formatters=formatters;_this.subscriptionsFactory=subscriptionsFactory;_this.contractModuleFactory=contractModuleFactory;_this.initiatedContracts=[];_this._transactionSigner=options.transactionSigner;_this.Contract=function(abi,address){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var contract=_this.contractModuleFactory.createContract(_this.currentProvider,_this.accounts,abi,address,{defaultAccount:options.from||options.defaultAccount||_this.defaultAccount,defaultBlock:options.defaultBlock||_this.defaultBlock,defaultGas:options.gas||options.defaultGas||_this.defaultGas,defaultGasPrice:options.gasPrice||options.defaultGasPrice||_this.defaultGasPrice,transactionBlockTimeout:options.transactionBlockTimeout||_this.transactionBlockTimeout,transactionConfirmationBlocks:options.transactionConfirmationBlocks||_this.transactionConfirmationBlocks,transactionPollingTimeout:options.transactionPollingTimeout||_this.transactionPollingTimeout,transactionSigner:_this.transactionSigner,data:options.data});_this.initiatedContracts.push(contract);return contract;};return _this;}_createClass(Eth,[{key:"clearSubscriptions",value:function clearSubscriptions(){return _get(_getPrototypeOf(Eth.prototype),"clearSubscriptions",this).call(this,'eth_unsubscribe');}},{key:"subscribe",value:function subscribe(type,options,callback){return this.subscriptionsFactory.getSubscription(this,type,options).subscribe(callback);}},{key:"setProvider",value:function setProvider(provider,net){var setContractProviders=this.initiatedContracts.every(function(contract){return contract.setProvider(provider,net);});return this.net.setProvider(provider,net)&&this.personal.setProvider(provider,net)&&_get(_getPrototypeOf(Eth.prototype),"setProvider",this).call(this,provider,net)&&setContractProviders;}},{key:"transactionSigner",get:function get(){return this._transactionSigner;},set:function set(transactionSigner){if(transactionSigner.type&&transactionSigner.type==='TransactionSigner'){throw new Error('Invalid TransactionSigner given!');}this._transactionSigner=transactionSigner;this.accounts.transactionSigner=transactionSigner;this.ens.transactionSigner=transactionSigner;this.initiatedContracts.forEach(function(contract){contract.transactionSigner=transactionSigner;});}},{key:"defaultGasPrice",set:function set(value){this.initiatedContracts.forEach(function(contract){contract.defaultGasPrice=value;});this.net.defaultGasPrice=value;this.personal.defaultGasPrice=value;_set(_getPrototypeOf(Eth.prototype),"defaultGasPrice",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"defaultGasPrice",this);}},{key:"defaultGas",set:function set(value){this.initiatedContracts.forEach(function(contract){contract.defaultGas=value;});this.net.defaultGas=value;this.personal.defaultGas=value;_set(_getPrototypeOf(Eth.prototype),"defaultGas",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"defaultGas",this);}},{key:"transactionBlockTimeout",set:function set(value){this.initiatedContracts.forEach(function(contract){contract.transactionBlockTimeout=value;});this.net.transactionBlockTimeout=value;this.personal.transactionBlockTimeout=value;_set(_getPrototypeOf(Eth.prototype),"transactionBlockTimeout",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"transactionBlockTimeout",this);}},{key:"transactionConfirmationBlocks",set:function set(value){this.initiatedContracts.forEach(function(contract){contract.transactionConfirmationBlocks=value;});this.net.transactionConfirmationBlocks=value;this.personal.transactionConfirmationBlocks=value;_set(_getPrototypeOf(Eth.prototype),"transactionConfirmationBlocks",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"transactionConfirmationBlocks",this);}},{key:"transactionPollingTimeout",set:function set(value){this.initiatedContracts.forEach(function(contract){contract.transactionPollingTimeout=value;});this.net.transactionPollingTimeout=value;this.personal.transactionPollingTimeout=value;_set(_getPrototypeOf(Eth.prototype),"transactionPollingTimeout",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"transactionPollingTimeout",this);}},{key:"defaultAccount",set:function set(value){var _this2=this;this.initiatedContracts.forEach(function(contract){contract.defaultAccount=_this2.utils.toChecksumAddress(value);});this.net.defaultAccount=value;this.personal.defaultAccount=value;_set(_getPrototypeOf(Eth.prototype),"defaultAccount",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"defaultAccount",this);}},{key:"defaultBlock",set:function set(value){this.initiatedContracts.forEach(function(contract){contract.defaultBlock=value;});this.net.defaultBlock=value;this.personal.defaultBlock=value;_set(_getPrototypeOf(Eth.prototype),"defaultBlock",value,this,true);},get:function get(){return _get(_getPrototypeOf(Eth.prototype),"defaultBlock",this);}}]);return Eth;}(web3Core.AbstractWeb3Module);function TransactionSigner$1(){return new TransactionSigner(Utils,web3CoreHelpers.formatters);}function Eth$1(provider){var net=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!options.transactionSigner||options.transactionSigner.type==='TransactionSigner'){options.transactionSigner=new TransactionSigner$1();}var resolvedProvider=new web3Providers.ProviderResolver().resolve(provider,net);var accounts=new web3EthAccounts.Accounts(resolvedProvider,null,options);var abiCoder=new web3EthAbi.AbiCoder();return new Eth(resolvedProvider,new MethodFactory(Utils,web3CoreHelpers.formatters),new web3Net.Network(resolvedProvider,null,options),accounts,new web3EthPersonal.Personal(resolvedProvider,null,accounts,options),web3EthIban.Iban,abiCoder,new web3EthEns.Ens(resolvedProvider,null,accounts,options),Utils,web3CoreHelpers.formatters,new SubscriptionsFactory(Utils,web3CoreHelpers.formatters),new web3EthContract.ContractModuleFactory(Utils,web3CoreHelpers.formatters,abiCoder,accounts),options,net);}exports.Eth=Eth$1;exports.TransactionSigner=TransactionSigner$1;Object.defineProperty(exports,'__esModule',{value:true});});

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/set":61,"@babel/runtime/helpers/typeof":66,"@babel/runtime/regenerator":67,"buffer":1133,"ethereumjs-tx":688,"lodash/isString":465,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-core-subscriptions":670,"web3-eth-abi":696,"web3-eth-accounts":674,"web3-eth-contract":681,"web3-eth-ens":683,"web3-eth-iban":685,"web3-eth-personal":686,"web3-net":697,"web3-providers":698,"web3-utils":700}],696:[function(require,module,exports){
arguments[4][673][0].apply(exports,arguments)
},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"dup":673,"ethers/utils/abi-coder":278,"lodash/isArray":453,"lodash/isObject":462,"web3-utils":700}],688:[function(require,module,exports){
(function (Buffer){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ethUtil=require('ethereumjs-util');var fees=require('ethereum-common/params.json');var BN=ethUtil.BN;var N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var Transaction=function(){function Transaction(data){_classCallCheck(this,Transaction);data=data||{};var fields=[{name:'nonce',length:32,allowLess:true,"default":new Buffer([])},{name:'gasPrice',length:32,allowLess:true,"default":new Buffer([])},{name:'gasLimit',alias:'gas',length:32,allowLess:true,"default":new Buffer([])},{name:'to',allowZero:true,length:20,"default":new Buffer([])},{name:'value',length:32,allowLess:true,"default":new Buffer([])},{name:'data',alias:'input',allowZero:true,"default":new Buffer([])},{name:'v',allowZero:true,"default":new Buffer([0x1c])},{name:'r',length:32,allowZero:true,allowLess:true,"default":new Buffer([])},{name:'s',length:32,allowZero:true,allowLess:true,"default":new Buffer([])}];ethUtil.defineProperties(this,fields,data);Object.defineProperty(this,'from',{enumerable:true,configurable:true,get:this.getSenderAddress.bind(this)});var sigV=ethUtil.bufferToInt(this.v);var chainId=Math.floor((sigV-35)/2);if(chainId<0)chainId=0;this._chainId=chainId||data.chainId||0;this._homestead=true;}Transaction.prototype.toCreationAddress=function toCreationAddress(){return this.to.toString('hex')==='';};Transaction.prototype.hash=function hash(includeSignature){if(includeSignature===undefined)includeSignature=true;var items=void 0;if(includeSignature){items=this.raw;}else{if(this._chainId>0){var raw=this.raw.slice();this.v=this._chainId;this.r=0;this.s=0;items=this.raw;this.raw=raw;}else{items=this.raw.slice(0,6);}}return ethUtil.rlphash(items);};Transaction.prototype.getChainId=function getChainId(){return this._chainId;};Transaction.prototype.getSenderAddress=function getSenderAddress(){if(this._from){return this._from;}var pubkey=this.getSenderPublicKey();this._from=ethUtil.publicToAddress(pubkey);return this._from;};Transaction.prototype.getSenderPublicKey=function getSenderPublicKey(){if(!this._senderPubKey||!this._senderPubKey.length){if(!this.verifySignature())throw new Error('Invalid Signature');}return this._senderPubKey;};Transaction.prototype.verifySignature=function verifySignature(){var msgHash=this.hash(false);if(this._homestead&&new BN(this.s).cmp(N_DIV_2)===1){return false;}try{var v=ethUtil.bufferToInt(this.v);if(this._chainId>0){v-=this._chainId*2+8;}this._senderPubKey=ethUtil.ecrecover(msgHash,v,this.r,this.s);}catch(e){return false;}return!!this._senderPubKey;};Transaction.prototype.sign=function sign(privateKey){var msgHash=this.hash(false);var sig=ethUtil.ecsign(msgHash,privateKey);if(this._chainId>0){sig.v+=this._chainId*2+8;}Object.assign(this,sig);};Transaction.prototype.getDataFee=function getDataFee(){var data=this.raw[5];var cost=new BN(0);for(var i=0;i<data.length;i++){data[i]===0?cost.iaddn(fees.txDataZeroGas.v):cost.iaddn(fees.txDataNonZeroGas.v);}return cost;};Transaction.prototype.getBaseFee=function getBaseFee(){var fee=this.getDataFee().iaddn(fees.txGas.v);if(this._homestead&&this.toCreationAddress()){fee.iaddn(fees.txCreation.v);}return fee;};Transaction.prototype.getUpfrontCost=function getUpfrontCost(){return new BN(this.gasLimit).imul(new BN(this.gasPrice)).iadd(new BN(this.value));};Transaction.prototype.validate=function validate(stringError){var errors=[];if(!this.verifySignature()){errors.push('Invalid Signature');}if(this.getBaseFee().cmp(new BN(this.gasLimit))>0){errors.push(['gas limit is too low. Need at least '+this.getBaseFee()]);}if(stringError===undefined||stringError===false){return errors.length===0;}else{return errors.join(' ');}};return Transaction;}();module.exports=Transaction;

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"ethereum-common/params.json":255,"ethereumjs-util":689}],689:[function(require,module,exports){
arguments[4][248][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/typeof":66,"assert":1100,"bn.js":132,"create-hash":173,"dup":248,"ethjs-util":288,"keccak":690,"rlp":537,"safe-buffer":639,"secp256k1":645}],690:[function(require,module,exports){
arguments[4][249][0].apply(exports,arguments)
},{"./lib/api":691,"./lib/keccak":695,"dup":249}],695:[function(require,module,exports){
arguments[4][254][0].apply(exports,arguments)
},{"./keccak-state-unroll":694,"dup":254,"safe-buffer":639}],691:[function(require,module,exports){
arguments[4][250][0].apply(exports,arguments)
},{"./keccak":692,"./shake":693,"dup":250}],692:[function(require,module,exports){
arguments[4][251][0].apply(exports,arguments)
},{"dup":251,"inherits":307,"safe-buffer":639,"stream":1259}],693:[function(require,module,exports){
arguments[4][252][0].apply(exports,arguments)
},{"dup":252,"inherits":307,"safe-buffer":639,"stream":1259}],694:[function(require,module,exports){
arguments[4][253][0].apply(exports,arguments)
},{"dup":253}],706:[function(require,module,exports){
function __export(m){for(var p in m){if(!exports.hasOwnProperty(p))exports[p]=m[p];}}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./xml-http-request"));var xml_http_request_event_target_1=require("./xml-http-request-event-target");exports.XMLHttpRequestEventTarget=xml_http_request_event_target_1.XMLHttpRequestEventTarget;

},{"./xml-http-request":710,"./xml-http-request-event-target":708}],702:[function(require,module,exports){
var _globalThis;try{_globalThis=require('es5-ext/global');}catch(error){}finally{if(!_globalThis&&typeof window!=='undefined'){_globalThis=window;}if(!_globalThis){throw new Error('Could not determine global this');}}var NativeWebSocket=_globalThis.WebSocket||_globalThis.MozWebSocket;var websocket_version=require('./version');function W3CWebSocket(uri,protocols){var native_instance;if(protocols){native_instance=new NativeWebSocket(uri,protocols);}else{native_instance=new NativeWebSocket(uri);}return native_instance;}if(NativeWebSocket){['CONNECTING','OPEN','CLOSING','CLOSED'].forEach(function(prop){Object.defineProperty(W3CWebSocket,prop,{get:function get(){return NativeWebSocket[prop];}});});}module.exports={'w3cwebsocket':NativeWebSocket?W3CWebSocket:null,'version':websocket_version};

},{"./version":703,"es5-ext/global":238}],699:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('web3-net'),require('web3-utils'),require('web3-core-helpers'),require('web3-providers'),require('@babel/runtime/helpers/classCallCheck'),require('@babel/runtime/helpers/possibleConstructorReturn'),require('@babel/runtime/helpers/getPrototypeOf'),require('@babel/runtime/helpers/inherits'),require('web3-core-method'),require('@babel/runtime/helpers/createClass'),require('web3-core-subscriptions'),require('@babel/runtime/helpers/set'),require('@babel/runtime/helpers/get'),require('web3-core')):typeof define==='function'&&define.amd?define(['exports','web3-net','web3-utils','web3-core-helpers','web3-providers','@babel/runtime/helpers/classCallCheck','@babel/runtime/helpers/possibleConstructorReturn','@babel/runtime/helpers/getPrototypeOf','@babel/runtime/helpers/inherits','web3-core-method','@babel/runtime/helpers/createClass','web3-core-subscriptions','@babel/runtime/helpers/set','@babel/runtime/helpers/get','web3-core'],factory):(global=global||self,factory(global.Web3Shh={},global.web3Net,global.Utils,global.web3CoreHelpers,global.web3Providers,global._classCallCheck,global._possibleConstructorReturn,global._getPrototypeOf,global._inherits,global.web3CoreMethod,global._createClass,global.web3CoreSubscriptions,global._set,global._get,global.web3Core));})(void 0,function(exports,web3Net,Utils,web3CoreHelpers,web3Providers,_classCallCheck,_possibleConstructorReturn,_getPrototypeOf,_inherits,web3CoreMethod,_createClass,web3CoreSubscriptions,_set,_get,web3Core){'use strict';_classCallCheck=_classCallCheck&&_classCallCheck.hasOwnProperty('default')?_classCallCheck['default']:_classCallCheck;_possibleConstructorReturn=_possibleConstructorReturn&&_possibleConstructorReturn.hasOwnProperty('default')?_possibleConstructorReturn['default']:_possibleConstructorReturn;_getPrototypeOf=_getPrototypeOf&&_getPrototypeOf.hasOwnProperty('default')?_getPrototypeOf['default']:_getPrototypeOf;_inherits=_inherits&&_inherits.hasOwnProperty('default')?_inherits['default']:_inherits;_createClass=_createClass&&_createClass.hasOwnProperty('default')?_createClass['default']:_createClass;_set=_set&&_set.hasOwnProperty('default')?_set['default']:_set;_get=_get&&_get.hasOwnProperty('default')?_get['default']:_get;var MethodFactory=function(_AbstractMethodFactor){_inherits(MethodFactory,_AbstractMethodFactor);function MethodFactory(utils,formatters){var _this;_classCallCheck(this,MethodFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(MethodFactory).call(this,utils,formatters));_this.methods={getVersion:web3CoreMethod.ShhVersionMethod,getInfo:web3CoreMethod.GetInfoMethod,setMaxMessageSize:web3CoreMethod.SetMaxMessageSizeMethod,setMinPoW:web3CoreMethod.SetMinPoWMethod,markTrustedPeer:web3CoreMethod.MarkTrustedPeerMethod,newKeyPair:web3CoreMethod.NewKeyPairMethod,addPrivateKey:web3CoreMethod.AddPrivateKeyMethod,deleteKeyPair:web3CoreMethod.DeleteKeyPairMethod,hasKeyPair:web3CoreMethod.HasKeyPairMethod,getPublicKey:web3CoreMethod.GetPublicKeyMethod,getPrivateKey:web3CoreMethod.GetPrivateKeyMethod,newSymKey:web3CoreMethod.NewSymKeyMethod,addSymKey:web3CoreMethod.AddSymKeyMethod,generateSymKeyFromPassword:web3CoreMethod.GenerateSymKeyFromPasswordMethod,hasSymKey:web3CoreMethod.HasSymKeyMethod,getSymKey:web3CoreMethod.GetSymKeyMethod,deleteSymKey:web3CoreMethod.DeleteSymKeyMethod,newMessageFilter:web3CoreMethod.NewMessageFilterMethod,getFilterMessages:web3CoreMethod.GetFilterMessagesMethod,deleteMessageFilter:web3CoreMethod.DeleteMessageFilterMethod,post:web3CoreMethod.PostMethod};return _this;}return MethodFactory;}(web3CoreMethod.AbstractMethodFactory);var SubscriptionsFactory=function(){function SubscriptionsFactory(utils,formatters){_classCallCheck(this,SubscriptionsFactory);this.utils=utils;this.formatters=formatters;}_createClass(SubscriptionsFactory,[{key:"getSubscription",value:function getSubscription(moduleInstance,type,options){switch(type){case'messages':return new web3CoreSubscriptions.MessagesSubscription(options,this.utils,this.formatters,moduleInstance);default:throw new Error("Unknown subscription: ".concat(type));}}}]);return SubscriptionsFactory;}();var Shh=function(_AbstractWeb3Module){_inherits(Shh,_AbstractWeb3Module);function Shh(provider,methodFactory,subscriptionsFactory,net,options,nodeNet){var _this;_classCallCheck(this,Shh);_this=_possibleConstructorReturn(this,_getPrototypeOf(Shh).call(this,provider,options,methodFactory,nodeNet));_this.subscriptionsFactory=subscriptionsFactory;_this.net=net;return _this;}_createClass(Shh,[{key:"subscribe",value:function subscribe(type,options,callback){return this.subscriptionsFactory.getSubscription(this,type,options).subscribe(callback);}},{key:"clearSubscriptions",value:function clearSubscriptions(){return _get(_getPrototypeOf(Shh.prototype),"clearSubscriptions",this).call(this,'shh_unsubscribe');}},{key:"setProvider",value:function setProvider(provider,net){return this.net.setProvider(provider,net)&&_get(_getPrototypeOf(Shh.prototype),"setProvider",this).call(this,provider,net);}},{key:"defaultGasPrice",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"defaultGasPrice",value,this,true);this.net.defaultGasPrice=this.defaultGasPrice;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"defaultGasPrice",this);}},{key:"defaultGas",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"defaultGas",value,this,true);this.net.defaultGas=this.defaultGas;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"defaultGas",this);}},{key:"transactionBlockTimeout",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"transactionBlockTimeout",value,this,true);this.net.transactionBlockTimeout=this.transactionBlockTimeout;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"transactionBlockTimeout",this);}},{key:"transactionConfirmationBlocks",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"transactionConfirmationBlocks",value,this,true);this.net.transactionConfirmationBlocks=this.transactionConfirmationBlocks;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"transactionConfirmationBlocks",this);}},{key:"transactionPollingTimeout",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"transactionPollingTimeout",value,this,true);this.net.transactionPollingTimeout=this.transactionPollingTimeout;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"transactionPollingTimeout",this);}},{key:"defaultAccount",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"defaultAccount",value,this,true);this.net.defaultAccount=this.defaultAccount;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"defaultAccount",this);}},{key:"defaultBlock",set:function set(value){_set(_getPrototypeOf(Shh.prototype),"defaultBlock",value,this,true);this.net.defaultBlock=this.defaultBlock;},get:function get(){return _get(_getPrototypeOf(Shh.prototype),"defaultBlock",this);}}]);return Shh;}(web3Core.AbstractWeb3Module);function Shh$1(provider){var net=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var resolvedProvider=new web3Providers.ProviderResolver().resolve(provider,net);return new Shh(resolvedProvider,new MethodFactory(Utils,web3CoreHelpers.formatters),new SubscriptionsFactory(Utils,web3CoreHelpers.formatters),new web3Net.Network(resolvedProvider,null,options),options,null);}exports.Shh=Shh$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":60,"@babel/runtime/helpers/set":61,"@babel/runtime/helpers/typeof":66,"web3-core":672,"web3-core-helpers":668,"web3-core-method":669,"web3-core-subscriptions":670,"web3-net":697,"web3-providers":698,"web3-utils":700}],703:[function(require,module,exports){
module.exports=require('../package.json').version;

},{"../package.json":704}],704:[function(require,module,exports){
module.exports={
  /* common-shake removed: "name": "websocket" */
  /* common-shake removed: "description": "Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455." */
  /* common-shake removed: "keywords": [
    "websocket",
    "websockets",
    "socket",
    "networking",
    "comet",
    "push",
    "RFC-6455",
    "realtime",
    "server",
    "client"
  ] */
  /* common-shake removed: "author": "Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)" */
  /* common-shake removed: "contributors": [
    "Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"
  ] */
  "version": "1.0.31",
  /* common-shake removed: "repository": {
    "type": "git",
    "url": "https://github.com/theturtle32/WebSocket-Node.git"
  } */
  /* common-shake removed: "homepage": "https://github.com/theturtle32/WebSocket-Node" */
  /* common-shake removed: "engines": {
    "node": ">=0.10.0"
  } */
  /* common-shake removed: "dependencies": {
    "debug": "^2.2.0",
    "es5-ext": "^0.10.50",
    "nan": "^2.14.0",
    "typedarray-to-buffer": "^3.1.5",
    "yaeti": "^0.0.6"
  } */
  /* common-shake removed: "devDependencies": {
    "buffer-equal": "^1.0.0",
    "faucet": "^0.0.1",
    "gulp": "^4.0.2",
    "gulp-jshint": "^2.0.4",
    "jshint-stylish": "^2.2.1",
    "jshint": "^2.0.0",
    "tape": "^4.9.1"
  } */
  /* common-shake removed: "config": {
    "verbose": false
  } */
  /* common-shake removed: "scripts": {
    "install": "(node-gyp rebuild 2> builderror.log) || (exit 0)",
    "test": "faucet test/unit",
    "gulp": "gulp"
  } */
  /* common-shake removed: "main": "index" */
  /* common-shake removed: "directories": {
    "lib": "./lib"
  } */
  /* common-shake removed: "browser": "lib/browser.js" */
  /* common-shake removed: "license": "Apache-2.0" */
}

},{}],705:[function(require,module,exports){
var __extends=void 0&&(void 0).__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var SecurityError=function(_super){__extends(SecurityError,_super);function SecurityError(){return _super!==null&&_super.apply(this,arguments)||this;}return SecurityError;}(Error);exports.SecurityError=SecurityError;var InvalidStateError=function(_super){__extends(InvalidStateError,_super);function InvalidStateError(){return _super!==null&&_super.apply(this,arguments)||this;}return InvalidStateError;}(Error);exports.InvalidStateError=InvalidStateError;var NetworkError=function(_super){__extends(NetworkError,_super);function NetworkError(){return _super!==null&&_super.apply(this,arguments)||this;}return NetworkError;}(Error);exports.NetworkError=NetworkError;var SyntaxError=function(_super){__extends(SyntaxError,_super);function SyntaxError(){return _super!==null&&_super.apply(this,arguments)||this;}return SyntaxError;}(Error);exports.SyntaxError=SyntaxError;

},{}],708:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var XMLHttpRequestEventTarget=function(){function XMLHttpRequestEventTarget(){this.listeners={};}XMLHttpRequestEventTarget.prototype.addEventListener=function(eventType,listener){eventType=eventType.toLowerCase();this.listeners[eventType]=this.listeners[eventType]||[];this.listeners[eventType].push(listener.handleEvent||listener);};XMLHttpRequestEventTarget.prototype.removeEventListener=function(eventType,listener){eventType=eventType.toLowerCase();if(!this.listeners[eventType]){return;}var index=this.listeners[eventType].indexOf(listener.handleEvent||listener);if(index<0){return;}this.listeners[eventType].splice(index,1);};XMLHttpRequestEventTarget.prototype.dispatchEvent=function(event){var eventType=event.type.toLowerCase();event.target=this;if(this.listeners[eventType]){for(var _i=0,_a=this.listeners[eventType];_i<_a.length;_i++){var listener_1=_a[_i];listener_1.call(this,event);}}var listener=this["on"+eventType];if(listener){listener.call(this,event);}return true;};return XMLHttpRequestEventTarget;}();exports.XMLHttpRequestEventTarget=XMLHttpRequestEventTarget;

},{}],710:[function(require,module,exports){
(function (process,Buffer){
var __extends=void 0&&(void 0).__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var __assign=void 0&&(void 0).__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}}return t;};Object.defineProperty(exports,"__esModule",{value:true});var http=require("http");var https=require("https");var os=require("os");var url=require("url");var progress_event_1=require("./progress-event");var errors_1=require("./errors");var xml_http_request_event_target_1=require("./xml-http-request-event-target");var xml_http_request_upload_1=require("./xml-http-request-upload");var Cookie=require("cookiejar");var XMLHttpRequest=function(_super){__extends(XMLHttpRequest,_super);function XMLHttpRequest(options){if(options===void 0){options={};}var _this=_super.call(this)||this;_this.UNSENT=XMLHttpRequest.UNSENT;_this.OPENED=XMLHttpRequest.OPENED;_this.HEADERS_RECEIVED=XMLHttpRequest.HEADERS_RECEIVED;_this.LOADING=XMLHttpRequest.LOADING;_this.DONE=XMLHttpRequest.DONE;_this.onreadystatechange=null;_this.readyState=XMLHttpRequest.UNSENT;_this.response=null;_this.responseText='';_this.responseType='';_this.status=0;_this.statusText='';_this.timeout=0;_this.upload=new xml_http_request_upload_1.XMLHttpRequestUpload();_this.responseUrl='';_this.withCredentials=false;_this._method=null;_this._url=null;_this._sync=false;_this._headers={};_this._loweredHeaders={};_this._mimeOverride=null;_this._request=null;_this._response=null;_this._responseParts=null;_this._responseHeaders=null;_this._aborting=null;_this._error=null;_this._loadedBytes=0;_this._totalBytes=0;_this._lengthComputable=false;_this._restrictedMethods={CONNECT:true,TRACE:true,TRACK:true};_this._restrictedHeaders={'accept-charset':true,'accept-encoding':true,'access-control-request-headers':true,'access-control-request-method':true,connection:true,'content-length':true,cookie:true,cookie2:true,date:true,dnt:true,expect:true,host:true,'keep-alive':true,origin:true,referer:true,te:true,trailer:true,'transfer-encoding':true,upgrade:true,'user-agent':true,via:true};_this._privateHeaders={'set-cookie':true,'set-cookie2':true};_this._userAgent="Mozilla/5.0 ("+os.type()+" "+os.arch()+") node.js/"+process.versions.node+" v8/"+process.versions.v8;_this._anonymous=options.anon||false;return _this;}XMLHttpRequest.prototype.open=function(method,url,async,user,password){if(async===void 0){async=true;}method=method.toUpperCase();if(this._restrictedMethods[method]){throw new XMLHttpRequest.SecurityError("HTTP method "+method+" is not allowed in XHR");};var xhrUrl=this._parseUrl(url,user,password);if(this.readyState===XMLHttpRequest.HEADERS_RECEIVED||this.readyState===XMLHttpRequest.LOADING){}this._method=method;this._url=xhrUrl;this._sync=!async;this._headers={};this._loweredHeaders={};this._mimeOverride=null;this._setReadyState(XMLHttpRequest.OPENED);this._request=null;this._response=null;this.status=0;this.statusText='';this._responseParts=[];this._responseHeaders=null;this._loadedBytes=0;this._totalBytes=0;this._lengthComputable=false;};XMLHttpRequest.prototype.setRequestHeader=function(name,value){if(this.readyState!==XMLHttpRequest.OPENED){throw new XMLHttpRequest.InvalidStateError('XHR readyState must be OPENED');}var loweredName=name.toLowerCase();if(this._restrictedHeaders[loweredName]||/^sec-/.test(loweredName)||/^proxy-/.test(loweredName)){console.warn("Refused to set unsafe header \""+name+"\"");return;}value=value.toString();if(this._loweredHeaders[loweredName]!=null){name=this._loweredHeaders[loweredName];this._headers[name]=this._headers[name]+", "+value;}else{this._loweredHeaders[loweredName]=name;this._headers[name]=value;}};XMLHttpRequest.prototype.send=function(data){if(this.readyState!==XMLHttpRequest.OPENED){throw new XMLHttpRequest.InvalidStateError('XHR readyState must be OPENED');}if(this._request){throw new XMLHttpRequest.InvalidStateError('send() already called');}switch(this._url.protocol){case'file:':return this._sendFile(data);case'http:':case'https:':return this._sendHttp(data);default:throw new XMLHttpRequest.NetworkError("Unsupported protocol "+this._url.protocol);}};XMLHttpRequest.prototype.abort=function(){if(this._request==null){return;}this._request.abort();this._setError();this._dispatchProgress('abort');this._dispatchProgress('loadend');};XMLHttpRequest.prototype.getResponseHeader=function(name){if(this._responseHeaders==null||name==null){return null;}var loweredName=name.toLowerCase();return this._responseHeaders.hasOwnProperty(loweredName)?this._responseHeaders[name.toLowerCase()]:null;};XMLHttpRequest.prototype.getAllResponseHeaders=function(){var _this=this;if(this._responseHeaders==null){return'';}return Object.keys(this._responseHeaders).map(function(key){return key+": "+_this._responseHeaders[key];}).join('\r\n');};XMLHttpRequest.prototype.overrideMimeType=function(mimeType){if(this.readyState===XMLHttpRequest.LOADING||this.readyState===XMLHttpRequest.DONE){throw new XMLHttpRequest.InvalidStateError('overrideMimeType() not allowed in LOADING or DONE');}this._mimeOverride=mimeType.toLowerCase();};XMLHttpRequest.prototype.nodejsSet=function(options){this.nodejsHttpAgent=options.httpAgent||this.nodejsHttpAgent;this.nodejsHttpsAgent=options.httpsAgent||this.nodejsHttpsAgent;if(options.hasOwnProperty('baseUrl')){if(options.baseUrl!=null){var parsedUrl=url.parse(options.baseUrl,false,true);if(!parsedUrl.protocol){throw new XMLHttpRequest.SyntaxError("baseUrl must be an absolute URL");}}this.nodejsBaseUrl=options.baseUrl;}};XMLHttpRequest.nodejsSet=function(options){XMLHttpRequest.prototype.nodejsSet(options);};XMLHttpRequest.prototype._setReadyState=function(readyState){this.readyState=readyState;this.dispatchEvent(new progress_event_1.ProgressEvent('readystatechange'));};XMLHttpRequest.prototype._sendFile=function(data){throw new Error('Protocol file: not implemented');};XMLHttpRequest.prototype._sendHttp=function(data){if(this._sync){throw new Error('Synchronous XHR processing not implemented');}if(data&&(this._method==='GET'||this._method==='HEAD')){console.warn("Discarding entity body for "+this._method+" requests");data=null;}else{data=data||'';}this.upload._setData(data);this._finalizeHeaders();this._sendHxxpRequest();};XMLHttpRequest.prototype._sendHxxpRequest=function(){var _this=this;if(this.withCredentials){var cookie=XMLHttpRequest.cookieJar.getCookies(Cookie.CookieAccessInfo(this._url.hostname,this._url.pathname,this._url.protocol==='https:')).toValueString();this._headers.cookie=this._headers.cookie2=cookie;}var _a=this._url.protocol==='http:'?[http,this.nodejsHttpAgent]:[https,this.nodejsHttpsAgent],hxxp=_a[0],agent=_a[1];var requestMethod=hxxp.request.bind(hxxp);var request=requestMethod({hostname:this._url.hostname,port:+this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:agent});this._request=request;if(this.timeout){request.setTimeout(this.timeout,function(){return _this._onHttpTimeout(request);});}request.on('response',function(response){return _this._onHttpResponse(request,response);});request.on('error',function(error){return _this._onHttpRequestError(request,error);});this.upload._startUpload(request);if(this._request===request){this._dispatchProgress('loadstart');}};XMLHttpRequest.prototype._finalizeHeaders=function(){this._headers=__assign({},this._headers,{Connection:'keep-alive',Host:this._url.host,'User-Agent':this._userAgent},this._anonymous?{Referer:'about:blank'}:{});this.upload._finalizeHeaders(this._headers,this._loweredHeaders);};XMLHttpRequest.prototype._onHttpResponse=function(request,response){var _this=this;if(this._request!==request){return;}if(this.withCredentials&&(response.headers['set-cookie']||response.headers['set-cookie2'])){XMLHttpRequest.cookieJar.setCookies(response.headers['set-cookie']||response.headers['set-cookie2']);}if([301,302,303,307,308].indexOf(response.statusCode)>=0){this._url=this._parseUrl(response.headers.location);this._method='GET';if(this._loweredHeaders['content-type']){delete this._headers[this._loweredHeaders['content-type']];delete this._loweredHeaders['content-type'];}if(this._headers['Content-Type']!=null){delete this._headers['Content-Type'];}delete this._headers['Content-Length'];this.upload._reset();this._finalizeHeaders();this._sendHxxpRequest();return;}this._response=response;this._response.on('data',function(data){return _this._onHttpResponseData(response,data);});this._response.on('end',function(){return _this._onHttpResponseEnd(response);});this._response.on('close',function(){return _this._onHttpResponseClose(response);});this.responseUrl=this._url.href.split('#')[0];this.status=response.statusCode;this.statusText=http.STATUS_CODES[this.status];this._parseResponseHeaders(response);var lengthString=this._responseHeaders['content-length']||'';this._totalBytes=+lengthString;this._lengthComputable=!!lengthString;this._setReadyState(XMLHttpRequest.HEADERS_RECEIVED);};XMLHttpRequest.prototype._onHttpResponseData=function(response,data){if(this._response!==response){return;}this._responseParts.push(new Buffer(data));this._loadedBytes+=data.length;if(this.readyState!==XMLHttpRequest.LOADING){this._setReadyState(XMLHttpRequest.LOADING);}this._dispatchProgress('progress');};XMLHttpRequest.prototype._onHttpResponseEnd=function(response){if(this._response!==response){return;}this._parseResponse();this._request=null;this._response=null;this._setReadyState(XMLHttpRequest.DONE);this._dispatchProgress('load');this._dispatchProgress('loadend');};XMLHttpRequest.prototype._onHttpResponseClose=function(response){if(this._response!==response){return;}var request=this._request;this._setError();request.abort();this._setReadyState(XMLHttpRequest.DONE);this._dispatchProgress('error');this._dispatchProgress('loadend');};XMLHttpRequest.prototype._onHttpTimeout=function(request){if(this._request!==request){return;}this._setError();request.abort();this._setReadyState(XMLHttpRequest.DONE);this._dispatchProgress('timeout');this._dispatchProgress('loadend');};XMLHttpRequest.prototype._onHttpRequestError=function(request,error){if(this._request!==request){return;}this._setError();request.abort();this._setReadyState(XMLHttpRequest.DONE);this._dispatchProgress('error');this._dispatchProgress('loadend');};XMLHttpRequest.prototype._dispatchProgress=function(eventType){var event=new XMLHttpRequest.ProgressEvent(eventType);event.lengthComputable=this._lengthComputable;event.loaded=this._loadedBytes;event.total=this._totalBytes;this.dispatchEvent(event);};XMLHttpRequest.prototype._setError=function(){this._request=null;this._response=null;this._responseHeaders=null;this._responseParts=null;};XMLHttpRequest.prototype._parseUrl=function(urlString,user,password){var absoluteUrl=this.nodejsBaseUrl==null?urlString:url.resolve(this.nodejsBaseUrl,urlString);var xhrUrl=url.parse(absoluteUrl,false,true);xhrUrl.hash=null;var _a=(xhrUrl.auth||'').split(':'),xhrUser=_a[0],xhrPassword=_a[1];if(xhrUser||xhrPassword||user||password){xhrUrl.auth=(user||xhrUser||'')+":"+(password||xhrPassword||'');}return xhrUrl;};XMLHttpRequest.prototype._parseResponseHeaders=function(response){this._responseHeaders={};for(var name_1 in response.headers){var loweredName=name_1.toLowerCase();if(this._privateHeaders[loweredName]){continue;}this._responseHeaders[loweredName]=response.headers[name_1];}if(this._mimeOverride!=null){this._responseHeaders['content-type']=this._mimeOverride;}};XMLHttpRequest.prototype._parseResponse=function(){var buffer=Buffer.concat(this._responseParts);this._responseParts=null;switch(this.responseType){case'json':this.responseText=null;try{this.response=JSON.parse(buffer.toString('utf-8'));}catch(_a){this.response=null;}return;case'buffer':this.responseText=null;this.response=buffer;return;case'arraybuffer':this.responseText=null;var arrayBuffer=new ArrayBuffer(buffer.length);var view=new Uint8Array(arrayBuffer);for(var i=0;i<buffer.length;i++){view[i]=buffer[i];}this.response=arrayBuffer;return;case'text':default:try{this.responseText=buffer.toString(this._parseResponseEncoding());}catch(_b){this.responseText=buffer.toString('binary');}this.response=this.responseText;}};XMLHttpRequest.prototype._parseResponseEncoding=function(){return /;\s*charset=(.*)$/.exec(this._responseHeaders['content-type']||'')[1]||'utf-8';};XMLHttpRequest.ProgressEvent=progress_event_1.ProgressEvent;XMLHttpRequest.InvalidStateError=errors_1.InvalidStateError;XMLHttpRequest.NetworkError=errors_1.NetworkError;XMLHttpRequest.SecurityError=errors_1.SecurityError;XMLHttpRequest.SyntaxError=errors_1.SyntaxError;XMLHttpRequest.XMLHttpRequestUpload=xml_http_request_upload_1.XMLHttpRequestUpload;XMLHttpRequest.UNSENT=0;XMLHttpRequest.OPENED=1;XMLHttpRequest.HEADERS_RECEIVED=2;XMLHttpRequest.LOADING=3;XMLHttpRequest.DONE=4;XMLHttpRequest.cookieJar=Cookie.CookieJar();return XMLHttpRequest;}(xml_http_request_event_target_1.XMLHttpRequestEventTarget);exports.XMLHttpRequest=XMLHttpRequest;XMLHttpRequest.prototype.nodejsHttpAgent=http.globalAgent;XMLHttpRequest.prototype.nodejsHttpsAgent=https.globalAgent;XMLHttpRequest.prototype.nodejsBaseUrl=null;

}).call(this,require('_process'),require("buffer").Buffer)

},{"./errors":705,"./progress-event":707,"./xml-http-request-event-target":708,"./xml-http-request-upload":709,"_process":1221,"buffer":1133,"cookiejar":171,"http":1260,"https":1185,"os":1195,"url":1281}],707:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var ProgressEvent=function(){function ProgressEvent(type){this.type=type;this.bubbles=false;this.cancelable=false;this.loaded=0;this.lengthComputable=false;this.total=0;}return ProgressEvent;}();exports.ProgressEvent=ProgressEvent;

},{}],709:[function(require,module,exports){
(function (Buffer){
var __extends=void 0&&(void 0).__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();Object.defineProperty(exports,"__esModule",{value:true});var xml_http_request_event_target_1=require("./xml-http-request-event-target");var XMLHttpRequestUpload=function(_super){__extends(XMLHttpRequestUpload,_super);function XMLHttpRequestUpload(){var _this=_super.call(this)||this;_this._contentType=null;_this._body=null;_this._reset();return _this;}XMLHttpRequestUpload.prototype._reset=function(){this._contentType=null;this._body=null;};XMLHttpRequestUpload.prototype._setData=function(data){if(data==null){return;}if(typeof data==='string'){if(data.length!==0){this._contentType='text/plain;charset=UTF-8';}this._body=new Buffer(data,'utf-8');}else if(Buffer.isBuffer(data)){this._body=data;}else if(data instanceof ArrayBuffer){var body=new Buffer(data.byteLength);var view=new Uint8Array(data);for(var i=0;i<data.byteLength;i++){body[i]=view[i];}this._body=body;}else if(data.buffer&&data.buffer instanceof ArrayBuffer){var body=new Buffer(data.byteLength);var offset=data.byteOffset;var view=new Uint8Array(data.buffer);for(var i=0;i<data.byteLength;i++){body[i]=view[i+offset];}this._body=body;}else{throw new Error("Unsupported send() data "+data);}};XMLHttpRequestUpload.prototype._finalizeHeaders=function(headers,loweredHeaders){if(this._contentType&&!loweredHeaders['content-type']){headers['Content-Type']=this._contentType;}if(this._body){headers['Content-Length']=this._body.length.toString();}};XMLHttpRequestUpload.prototype._startUpload=function(request){if(this._body){request.write(this._body);}request.end();};return XMLHttpRequestUpload;}(xml_http_request_event_target_1.XMLHttpRequestEventTarget);exports.XMLHttpRequestUpload=XMLHttpRequestUpload;

}).call(this,require("buffer").Buffer)

},{"./xml-http-request-event-target":708,"buffer":1133}],1195:[function(require,module,exports){
/* common-shake removed: exports.endianness = */ void function(){return'LE';};/* common-shake removed: exports.hostname = */ void function(){if(typeof location!=='undefined'){return location.hostname;}else return'';};/* common-shake removed: exports.loadavg = */ void function(){return[];};/* common-shake removed: exports.uptime = */ void function(){return 0;};/* common-shake removed: exports.freemem = */ void function(){return Number.MAX_VALUE;};/* common-shake removed: exports.totalmem = */ void function(){return Number.MAX_VALUE;};/* common-shake removed: exports.cpus = */ void function(){return[];};exports.type=function(){return'Browser';};/* common-shake removed: exports.release = */ void function(){if(typeof navigator!=='undefined'){return navigator.appVersion;}return'';};/* common-shake removed: exports.networkInterfaces = */ void 0, /* common-shake removed: exports.getNetworkInterfaces = */ function(){return{};};exports.arch=function(){return'javascript';};/* common-shake removed: exports.platform = */ void function(){return'browser';};/* common-shake removed: exports.tmpdir = */ void 0, /* common-shake removed: exports.tmpDir = */ function(){return'/tmp';};/* common-shake removed: exports.EOL = */ void '\n';/* common-shake removed: exports.homedir = */ void function(){return'/';};

},{}],711:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var logger_1=require("./common/logger");var AccountStore=function(_logger_1$Logger){(0,_inherits2["default"])(AccountStore,_logger_1$Logger);function AccountStore(options){var _this;(0,_classCallCheck2["default"])(this,AccountStore);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(AccountStore).call(this,options));if(options.accounts){_this.accounts=options.accounts;}else{_this.accounts={};}return _this;}(0,_createClass2["default"])(AccountStore,[{key:"getPrivateKey",value:function getPrivateKey(accountId){return Promise.resolve(this.accounts[accountId]);}}]);return AccountStore;}(logger_1.Logger);exports.AccountStore=AccountStore;

},{"./common/logger":712,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743}],712:[function(require,module,exports){
(function (process,global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:true});var LogLevel;(function(LogLevel){LogLevel[LogLevel["debug"]=0]="debug";LogLevel[LogLevel["info"]=1]="info";LogLevel[LogLevel["notice"]=2]="notice";LogLevel[LogLevel["warning"]=3]="warning";LogLevel[LogLevel["error"]=4]="error";LogLevel[LogLevel["technical"]=100]="technical";LogLevel[LogLevel["gasLog"]=101]="gasLog";LogLevel[LogLevel["disabled"]=999]="disabled";})(LogLevel=exports.LogLevel||(exports.LogLevel={}));var Logger=function(){function Logger(options){(0,_classCallCheck2["default"])(this,Logger);this.logLog=[];this.logLog=options&&options.logLog?options.logLog:this.logLog;this.logFunction=options&&options.log?options.log:Logger.getDefaultLog();this.logLevel=options&&typeof options.logLevel!=='undefined'?options.logLevel:LogLevel.error;this.logLogLevel=options&&typeof options.logLogLevel!=='undefined'?options.logLogLevel:LogLevel.error;if(options&&options.logLevel){this.logLevel=LogLevel[options.logLevel];}else if(typeof global!=='undefined'&&global.localStorage&&global.localStorage['bc-dev-logs']){this.logLevel=LogLevel[global.localStorage['bc-dev-logs']];}else if(process.env.DBCP_LOGLEVEL){this.logLevel=LogLevel[process.env.DBCP_LOGLEVEL];}else{this.logLevel=LogLevel.error;}}(0,_createClass2["default"])(Logger,[{key:"log",value:function log(message){var level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';if(LogLevel[level]>=this.logLogLevel){this.logLog.push({timestamp:new Date().getTime(),level:level,message:message});}if(LogLevel[level]>=this.logLevel&&LogLevel[level]<LogLevel.technical){this.logFunction(message,level);}}}],[{key:"getDefaultLog",value:function getDefaultLog(){return function(message,level){var logFunction;switch(level){case'debug':case'info':case'error':logFunction=level;break;case'warning':logFunction='warn';break;case'notice':default:logFunction='log';}console[logFunction]("[".concat(level||'info',"] ").concat(message));};}}]);return Logger;}();exports.Logger=Logger;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/interopRequireDefault":738,"_process":1221}],735:[function(require,module,exports){
arguments[4][50][0].apply(exports,arguments)
},{"dup":50}],738:[function(require,module,exports){
arguments[4][55][0].apply(exports,arguments)
},{"dup":55}],734:[function(require,module,exports){
arguments[4][48][0].apply(exports,arguments)
},{"dup":48}],736:[function(require,module,exports){
arguments[4][53][0].apply(exports,arguments)
},{"dup":53}],743:[function(require,module,exports){
arguments[4][60][0].apply(exports,arguments)
},{"../helpers/typeof":747,"./assertThisInitialized":732,"dup":60}],737:[function(require,module,exports){
arguments[4][54][0].apply(exports,arguments)
},{"./setPrototypeOf":744,"dup":54}],713:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));Object.defineProperty(exports,"__esModule",{value:true});function createExceptionLogger(log,task){return function(ex){log("error occurred while ".concat(task,"; ").concat(ex.message||ex).concat(ex.stack||''),'error');};}/* common-shake removed: exports.createExceptionLogger = */ void createExceptionLogger;function obfuscate(text){return text?"".concat((0,_toConsumableArray2["default"])(Array(text.length-2)).map(function(){return'x';}).join('')).concat(text.substr(text.length-2)):text;}exports.obfuscate=obfuscate;function promisify(_x,_x2){return _promisify.apply(this,arguments);}function _promisify(){_promisify=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(funThis,functionName){var _len,args,_key,functionArguments,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(_len=_args.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=_args[_key];}functionArguments=args.slice(0);return _context.abrupt("return",new Promise(function(resolve,reject){try{functionArguments.push(function(error,result){if(error){reject(error);}else{resolve(result);}});funThis[functionName].apply(funThis,(0,_toConsumableArray2["default"])(functionArguments));}catch(ex){reject(ex.message);}}));case 3:case"end":return _context.stop();}}},_callee);}));return _promisify.apply(this,arguments);}exports.promisify=promisify;

},{"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/toConsumableArray":746,"@babel/runtime/regenerator":748}],748:[function(require,module,exports){
arguments[4][67][0].apply(exports,arguments)
},{"dup":67,"regenerator-runtime":1069}],733:[function(require,module,exports){
arguments[4][47][0].apply(exports,arguments)
},{"dup":47}],746:[function(require,module,exports){
arguments[4][65][0].apply(exports,arguments)
},{"./arrayWithoutHoles":731,"./iterableToArray":739,"./nonIterableSpread":742,"dup":65}],714:[function(require,module,exports){
(function (process){
Object.defineProperty(exports,"__esModule",{value:true});var config={alwaysAutoGasLimit:1.1,nameResolver:{ensAddress:process.env.ENS_ADDRESS||'0x937bbC1d3874961CA38726E9cD07317ba81eD2e1',ensResolver:process.env.ENS_RESOLVER||'0xDC18774FA2E472D26aB91deCC4CDd20D9E82047e',labels:{businessCenterRoot:process.env.BC_ROOT||'testbc.evan',ensRoot:process.env.ENS_ROOT||'evan',factory:'factory',eventhub:'eventhub'},domains:{root:['ensRoot'],factory:['factory','businessCenterRoot'],businessCenter:['businessCenterRoot'],eventhub:process.env.ENS_EVENTS||['eventhub','ensRoot']}}};exports.config=config;

}).call(this,require('_process'))

},{"_process":1221}],715:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var logger_1=require("../common/logger");var ContractLoader=function(_logger_1$Logger){(0,_inherits2["default"])(ContractLoader,_logger_1$Logger);function ContractLoader(options){var _this;(0,_classCallCheck2["default"])(this,ContractLoader);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(ContractLoader).call(this,options));_this.contracts=Object.assign({},ContractLoader.defaultAbis,options.contracts);_this.web3=options.web3;return _this;}(0,_createClass2["default"])(ContractLoader,[{key:"getCompiledContract",value:function getCompiledContract(name){return this.contracts[name];}},{key:"loadContract",value:function loadContract(name,address){if(!this.contracts[name]){throw new Error("description for contract type \"".concat(name,"\" not found, ")+"supported interfaces are \"".concat(Object.keys(this.contracts).join(','),"\""));}var contract=new this.web3.eth.Contract(JSON.parse(this.contracts[name]["interface"]),address);if(this.web3.eth.initiatedContracts){this.web3.eth.initiatedContracts=[];}return contract;}}]);return ContractLoader;}(logger_1.Logger);exports.ContractLoader=ContractLoader;ContractLoader.defaultAbis={"AbstractENS":{"interface":"[{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"resolver\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"label\",\"type\":\"bytes32\"},{\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"setSubnodeOwner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"ttl\",\"type\":\"uint64\"}],\"name\":\"setTTL\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"ttl\",\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"resolver\",\"type\":\"address\"}],\"name\":\"setResolver\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"label\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"NewOwner\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"resolver\",\"type\":\"address\"}],\"name\":\"NewResolver\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"ttl\",\"type\":\"uint64\"}],\"name\":\"NewTTL\",\"type\":\"event\"}]","bytecode":""},"Described":{"interface":"[{\"constant\":true,\"inputs\":[],\"name\":\"contractDescription\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_contractDescription\",\"type\":\"bytes32\"}],\"name\":\"setContractDescription\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","bytecode":"6060604052341561000f57600080fd5b60018054600160a060020a03191633600160a060020a031617905561014c806100396000396000f3006060604052600436106100565763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663872db889811461005b5780638da5cb5b14610080578063de48362a146100bc575b600080fd5b341561006657600080fd5b61006e6100d4565b60405190815260200160405180910390f35b341561008b57600080fd5b6100936100da565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b34156100c757600080fd5b6100d26004356100f6565b005b60005481565b60015473ffffffffffffffffffffffffffffffffffffffff1681565b6001543373ffffffffffffffffffffffffffffffffffffffff90811691161461011b57fe5b6000555600a165627a7a72305820e9fe6179fe50b4db2505871d5f15799a1930b6885f470158d55f5aa2e591ea430029"},"EventHub":{"interface":"[{\"constant\":false,\"inputs\":[{\"name\":\"propertyType\",\"type\":\"bytes32\"},{\"name\":\"propertyKeys\",\"type\":\"bytes32[]\"},{\"name\":\"updateType\",\"type\":\"bytes32\"},{\"name\":\"updated\",\"type\":\"uint256\"}],\"name\":\"sendDataContractEvent\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"eventType\",\"type\":\"uint256\"},{\"name\":\"contractAddress\",\"type\":\"address\"},{\"name\":\"label\",\"type\":\"bytes32\"}],\"name\":\"sendAssetContractEvent\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"mailId\",\"type\":\"uint256\"}],\"name\":\"sendMailEvent\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"eventType\",\"type\":\"uint256\"},{\"name\":\"contractType\",\"type\":\"bytes32\"},{\"name\":\"contractAddress\",\"type\":\"address\"},{\"name\":\"member\",\"type\":\"address\"}],\"name\":\"sendContractEvent\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"VERSION_ID\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"eventType\",\"type\":\"uint256\"},{\"name\":\"member\",\"type\":\"address\"}],\"name\":\"sendMemberEvent\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"propertyType\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"propertyKeys\",\"type\":\"bytes32[]\"},{\"indexed\":false,\"name\":\"updateType\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"updated\",\"type\":\"uint256\"}],\"name\":\"DataContractEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"mailId\",\"type\":\"uint256\"}],\"name\":\"MailEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"eventType\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"contractAddress\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"label\",\"type\":\"bytes32\"}],\"name\":\"AssetContractEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"eventType\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"contractType\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"contractAddress\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"member\",\"type\":\"address\"}],\"name\":\"ContractEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"eventType\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"member\",\"type\":\"address\"}],\"name\":\"MemberEvent\",\"type\":\"event\"}]","bytecode":""},"Owned":{"interface":"[{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","bytecode":"6060604052341561000f57600080fd5b60008054600160a060020a033316600160a060020a03199091161790556101638061003b6000396000f30060606040526004361061004b5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416638da5cb5b8114610050578063f2fde38b1461008c575b600080fd5b341561005b57600080fd5b6100636100ba565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b341561009757600080fd5b6100b873ffffffffffffffffffffffffffffffffffffffff600435166100d6565b005b60005473ffffffffffffffffffffffffffffffffffffffff1681565b6000543373ffffffffffffffffffffffffffffffffffffffff9081169116146100fb57fe5b6000805473ffffffffffffffffffffffffffffffffffffffff191673ffffffffffffffffffffffffffffffffffffffff929092169190911790555600a165627a7a723058205bcbbe67c81dbadcf4149f31bd066a9c96607c1fda5a08082592cf0cc2974b620029"},"PublicResolver":{"interface":"[{\"constant\":true,\"inputs\":[{\"name\":\"interfaceID\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"key\",\"type\":\"string\"},{\"name\":\"value\",\"type\":\"string\"}],\"name\":\"setText\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"contentTypes\",\"type\":\"uint256\"}],\"name\":\"ABI\",\"outputs\":[{\"name\":\"contentType\",\"type\":\"uint256\"},{\"name\":\"data\",\"type\":\"bytes\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"x\",\"type\":\"bytes32\"},{\"name\":\"y\",\"type\":\"bytes32\"}],\"name\":\"setPubkey\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"content\",\"outputs\":[{\"name\":\"ret\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"addr\",\"outputs\":[{\"name\":\"ret\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"key\",\"type\":\"string\"}],\"name\":\"text\",\"outputs\":[{\"name\":\"ret\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"contentType\",\"type\":\"uint256\"},{\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"setABI\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"name\",\"outputs\":[{\"name\":\"ret\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"name\",\"type\":\"string\"}],\"name\":\"setName\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"hash\",\"type\":\"bytes32\"}],\"name\":\"setContent\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"}],\"name\":\"pubkey\",\"outputs\":[{\"name\":\"x\",\"type\":\"bytes32\"},{\"name\":\"y\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"node\",\"type\":\"bytes32\"},{\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"setAddr\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"ensAddr\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"a\",\"type\":\"address\"}],\"name\":\"AddrChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"hash\",\"type\":\"bytes32\"}],\"name\":\"ContentChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"name\",\"type\":\"string\"}],\"name\":\"NameChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"contentType\",\"type\":\"uint256\"}],\"name\":\"ABIChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"x\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"y\",\"type\":\"bytes32\"}],\"name\":\"PubkeyChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"node\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"indexedKey\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"key\",\"type\":\"string\"}],\"name\":\"TextChanged\",\"type\":\"event\"}]","bytecode":""}};

},{"../common/logger":712,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743}],716:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var logger_1=require("../common/logger");var Executor=function(_logger_1$Logger){(0,_inherits2["default"])(Executor,_logger_1$Logger);function Executor(options){var _this;(0,_classCallCheck2["default"])(this,Executor);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Executor).call(this,options));_this.config=options.config;_this.defaultOptions=options.defaultOptions;_this.signer=options.signer;_this.web3=options.web3;return _this;}(0,_createClass2["default"])(Executor,[{key:"init",value:function init(options){this.eventHub=options.eventHub;}},{key:"executeContractCall",value:function(){var _executeContractCall=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(contract,functionName){var options,_len,args,_key,_contract$methods,_contract$methods2,_contract$methods3,_args=arguments;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.log("starting contract call \"".concat(functionName,"\""),'debug');if(!(!contract.options.address||contract.options.address==='0x0000000000000000000000000000000000000000')){_context.next=3;break;}throw new Error("trying to execute contract call \"".concat(functionName,"\" ")+'against invalid contract address');case 3:if(contract.methods[functionName]){_context.next=5;break;}throw new Error("contract does not support method \"".concat(functionName,"\", ")+"supported methods are ".concat(Object.keys(contract.methods)));case 5:if(!(!contract||!contract.options||!contract.options.address)){_context.next=7;break;}throw new Error('contract undefined or contract has no address');case 7:options=this.defaultOptions?Object.assign({},this.defaultOptions):null;if(options){this.scrubOptions(options);}for(_len=_args.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=_args[_key];}if(!(args.length&&(0,_typeof2["default"])(args[args.length-1])==='object')){_context.next=15;break;}options=Object.assign(options||{},args[args.length-1]);return _context.abrupt("return",(_contract$methods=contract.methods)[functionName].apply(_contract$methods,(0,_toConsumableArray2["default"])(args.slice(0,-1))).call(options));case 15:if(!options){_context.next=19;break;}return _context.abrupt("return",(_contract$methods2=contract.methods)[functionName].apply(_contract$methods2,args).call(options));case 19:return _context.abrupt("return",(_contract$methods3=contract.methods)[functionName].apply(_contract$methods3,args).call());case 20:case"end":return _context.stop();}}},_callee,this);}));function executeContractCall(_x,_x2){return _executeContractCall.apply(this,arguments);}return executeContractCall;}()},{key:"executeContractTransaction",value:function(){var _executeContractTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(contract,functionName,inputOptions){var _this2=this;var _len2,functionArguments,_key2,options,transactionTimeout,autoGas,initialArguments,logGas,_args7=arguments;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:for(_len2=_args7.length,functionArguments=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){functionArguments[_key2-3]=_args7[_key2];}this.log("starting contract transaction \"".concat(functionName,"\""),'debug');if(this.signer){_context7.next=4;break;}throw new Error('signer is undefined');case 4:if(contract.methods[functionName]){_context7.next=6;break;}throw new Error("contract does not support method \"".concat(functionName,"\", ")+"supported methods are ".concat(Object.keys(contract.methods)));case 6:if(!(!contract||!contract.options||!contract.options.address)){_context7.next=8;break;}throw new Error('contract undefined or contract has no address');case 8:if(!(!contract.options.address||contract.options.address==='0x0000000000000000000000000000000000000000')){_context7.next=10;break;}throw new Error("trying to execute contract transaction \"".concat(functionName,"\" ")+'against invalid contract address');case 10:options=Object.assign({timeout:300000},this.defaultOptions||{},inputOptions);transactionTimeout=options.eventTimeout||options.timeout;this.scrubOptions(options);if(inputOptions.autoGas){autoGas=inputOptions.autoGas;}else if(this.config&&this.config.alwaysAutoGasLimit){autoGas=this.config.alwaysAutoGasLimit;}else{autoGas=false;}initialArguments=functionArguments.slice(0);logGas=function logGas(extraParams){var staticEntries={arguments:initialArguments,contract:contract.address||contract._address,from:inputOptions.from,gasEstimated:null,gasGiven:options.gas,gasUsed:0,status:'unknown',transaction:functionName,transactionHash:null};var level='gasLog';_this2.log(JSON.stringify(Object.assign(staticEntries,extraParams)),level);};return _context7.abrupt("return",new Promise(function(){var _ref=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(resolve,reject){var isPending,transactionHash,eventResults,subscription,stopWatching,_contract$methods4,gasEstimated,executeCallback,estimationCallback;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:isPending=true;eventResults={};stopWatching=function(){var _ref2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(isError){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",new Promise(function(resolveStop){setTimeout(function(){if(inputOptions.event&&subscription){if(_this2.eventHub){_this2.eventHub.unsubscribe({subscription:subscription}).then(function(){resolveStop();})["catch"](function(ex){_this2.log("error occurred while unsubscribing from transaction event; "+"".concat(ex.message||ex,", ").concat(ex.stack||''),'error');}).then(function(){isPending=false;});}else{isPending=false;reject('passed an event to a transaction but no event hub registered');}}else{isPending=false;resolveStop();}},isError?1000:0);}));case 1:case"end":return _context2.stop();}}},_callee2);}));return function stopWatching(_x8){return _ref2.apply(this,arguments);};}();_context6.prev=3;setTimeout((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!isPending){_context3.next=5;break;}_context3.next=3;return stopWatching(true);case 3:logGas({status:'error',message:'timeout'});reject(new Error("timeout after ".concat(transactionTimeout,"ms during ").concat(functionName)));case 5:case"end":return _context3.stop();}}},_callee3);})),transactionTimeout);if(!inputOptions.event){_context6.next=11;break;}if(!_this2.eventHub){_context6.next=10;break;}_this2.eventHub.subscribe(inputOptions.event.target,inputOptions.event.targetAddress||contract.options.address,inputOptions.event.eventName,function(){return true;},function(event){if(transactionHash===event.transactionHash){if(inputOptions.getEventResult){resolve(inputOptions.getEventResult(event,event.args||event.returnValues));}else{resolve(event);}}else{eventResults[event.transactionHash]=event;}}).then(function(result){subscription=result;})["catch"](function(ex){_this2.log("error occurred while subscribing to transaction event; ".concat(ex.message||ex).concat(ex.stack||''),'error');});_context6.next=11;break;case 10:throw new Error('passed an event to a transaction but no event hub registered');case 11:functionArguments.push(options);executeCallback=function(){var _ref4=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(err,receipt){var optionsGas,errorText;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!err){_context4.next=2;break;}return _context4.abrupt("return",reject("".concat(functionName," failed: ").concat(err)));case 2:_context4.prev=2;transactionHash=receipt&&receipt.transactionHash?receipt.transactionHash:'';if(!err){_context4.next=10;break;}_this2.log("".concat(functionName," failed: ").concat(err.message||err),'error');logGas({status:'error',message:'transaction submit error',gasEstimated:gasEstimated,transactionHash:transactionHash});reject(err);_context4.next=33;break;case 10:if(typeof options.gas==='string'&&options.gas.startsWith('0x')){optionsGas=parseInt(options.gas,16);}else{optionsGas=parseInt(options.gas,10);}if(!(optionsGas!==receipt.gasUsed)){_context4.next=25;break;}logGas({status:'success',gasUsed:receipt.gasUsed,gasEstimated:gasEstimated,transactionHash:transactionHash});if(autoGas){logGas({status:'autoGas.success',gasEstimated:gasEstimated,gasGiven:options.gas,gasUsed:receipt.gasUsed,message:"estimated with ".concat(autoGas)});}if(!(!inputOptions.event||!_this2.eventHub)){_context4.next=19;break;}isPending=false;resolve();_context4.next=23;break;case 19:if(!eventResults[transactionHash]){_context4.next=23;break;}_context4.next=22;return stopWatching();case 22:if(inputOptions.getEventResult){resolve(inputOptions.getEventResult(eventResults[transactionHash],eventResults[transactionHash].args||eventResults[transactionHash].returnValues));}else{resolve(eventResults[transactionHash]);}case 23:_context4.next=33;break;case 25:errorText='all gas used up';_this2.log("".concat(functionName," failed: ").concat(errorText),'error');if(autoGas){logGas({status:'autoGas.error',gasEstimated:gasEstimated,gasGiven:options.gas,gasUsed:receipt.gasUsed,message:"estimated with ".concat(autoGas)});}if(!(inputOptions.event&&_this2.eventHub)){_context4.next=31;break;}_context4.next=31;return stopWatching(true);case 31:logGas({status:'error',message:'transaction failed',gasUsed:receipt.gasUsed,gasEstimated:gasEstimated,transactionHash:transactionHash});reject(errorText);case 33:_context4.next=38;break;case 35:_context4.prev=35;_context4.t0=_context4["catch"](2);return _context4.abrupt("return",reject("".concat(functionName," failed: ").concat(_context4.t0.message)));case 38:case"end":return _context4.stop();}}},_callee4,null,[[2,35]]);}));return function executeCallback(_x9,_x10){return _ref4.apply(this,arguments);};}();estimationCallback=function(){var _ref5=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(error,gasAmount){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:gasEstimated=gasAmount;if(!error){_context5.next=8;break;}_context5.next=4;return stopWatching(true);case 4:logGas({status:'error',message:"could not estimate; ".concat(error)});reject("could not estimate gas usage for ".concat(functionName,": ").concat(error,"; ").concat(error.stack));_context5.next=23;break;case 8:if(!inputOptions.estimate){_context5.next=14;break;}_context5.next=11;return stopWatching();case 11:resolve(gasAmount);_context5.next=23;break;case 14:if(!(!inputOptions.force&&parseInt(inputOptions.gas,10)===parseInt(gasAmount,10))){_context5.next=21;break;}_context5.next=17;return stopWatching(true);case 17:logGas({status:'error',message:'out of gas estimated'});reject("transaction ".concat(functionName," by ").concat(options.from," would most likely fail"));_context5.next=23;break;case 21:options.from=inputOptions.from;if(autoGas){_this2.web3.eth.getBlock('latest',function(blockError,result){if(blockError){reject("could not get latest block for ".concat(functionName,": ").concat(blockError,"; ").concat(blockError.stack));}else{var currentLimit=result.gasLimit;var gas=Math.floor(Math.min(gasEstimated*autoGas,currentLimit*(255/256)));logGas({status:'autoGas.estimation',gasEstimated:gasEstimated,gasGiven:gas,message:"estimated with ".concat(autoGas)});options.gas=gas;_this2.signer.signAndExecuteTransaction(contract,functionName,functionArguments.slice(0,-1),Object.assign({},options),function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}executeCallback.apply(_this2,args)["catch"](function(ex){reject(ex);});});}});}else{_this2.signer.signAndExecuteTransaction(contract,functionName,functionArguments.slice(0,-1),Object.assign({},options),function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}executeCallback.apply(_this2,args)["catch"](function(ex){reject(ex);});});}case 23:case"end":return _context5.stop();}}},_callee5);}));return function estimationCallback(_x11,_x12){return _ref5.apply(this,arguments);};}();(_contract$methods4=contract.methods)[functionName].apply(_contract$methods4,(0,_toConsumableArray2["default"])(initialArguments)).estimateGas(Object.assign({},options),function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}estimationCallback.apply(_this2,args)["catch"](function(ex){reject(ex);});});_context6.next=24;break;case 17:_context6.prev=17;_context6.t0=_context6["catch"](3);_this2.log("".concat(functionName," failed: ").concat(_context6.t0.message),'error');_context6.next=22;return stopWatching(true);case 22:logGas({status:'error',message:'transaction could not be started'});reject(_context6.t0);case 24:case"end":return _context6.stop();}}},_callee6,null,[[3,17]]);}));return function(_x6,_x7){return _ref.apply(this,arguments);};}()));case 17:case"end":return _context7.stop();}}},_callee7,this);}));function executeContractTransaction(_x3,_x4,_x5){return _executeContractTransaction.apply(this,arguments);}return executeContractTransaction;}()},{key:"executeSend",value:function(){var _executeSend=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(inputOptions){var _this3=this;var options,transactionTimeout,logGas;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:this.log('starting contract EVE transfer transaction','debug');if(this.signer){_context8.next=3;break;}throw new Error('signer is undefined');case 3:options=Object.assign({timeout:300000},this.defaultOptions||{},inputOptions);transactionTimeout=options.eventTimeout||options.timeout;this.scrubOptions(options);logGas=function logGas(extraParams){var staticEntries={from:options.from,gasEstimated:null,gasGiven:options.gas,gasUsed:0,status:'unknown',transactionHash:null};_this3.log(JSON.stringify(Object.assign(staticEntries,extraParams)),'gasLog');};return _context8.abrupt("return",new Promise(function(resolve,reject){var isPending=true;var transactionHash;try{setTimeout(function(){if(isPending){logGas({status:'error',message:'timeout'});reject(new Error('timeout after ${transactionTimeout}ms during executeSend'));}},transactionTimeout);var gasEstimated;var executeCallback=function executeCallback(err,receipt){if(err){return reject("executeSend failed: ".concat(err));}try{if(err){_this3.log("executeSend failed: ".concat(err.message||err),'error');logGas({status:'error',message:'transaction submit error',gasEstimated:gasEstimated,transactionHash:transactionHash});reject(err);}else{var optionsGas;if(typeof options.gas==='string'&&options.gas.startsWith('0x')){optionsGas=parseInt(options.gas,16);}else{optionsGas=parseInt(options.gas,10);}if(optionsGas!==receipt.gasUsed){logGas({status:'success',gasUsed:receipt.gasUsed,gasEstimated:gasEstimated,transactionHash:transactionHash});isPending=false;resolve();}else{var errorText='all gas used up';_this3.log("executeSend failed: ".concat(errorText),'error');isPending=false;logGas({status:'error',message:'transaction failed',gasUsed:receipt.gasUsed,gasEstimated:gasEstimated,transactionHash:transactionHash});reject(errorText);}}}catch(ex){return reject("executeSend failed: ".concat(ex.message));}};_this3.signer.signAndExecuteSend(options,executeCallback);}catch(ex){_this3.log("executeSend failed: ".concat(ex.message),'error');isPending=false;logGas({status:'error',message:'transaction could not be started'});reject(ex);}}));case 8:case"end":return _context8.stop();}}},_callee8,this);}));function executeSend(_x13){return _executeSend.apply(this,arguments);}return executeSend;}()},{key:"createContract",value:function(){var _createContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(contractName,functionArguments,inputOptions){var options;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:this.log("starting contract creation transaction for \"".concat(contractName,"\""),'debug');options=Object.assign({},this.defaultOptions||{},inputOptions);this.scrubOptions(options);if(this.signer){_context9.next=5;break;}throw new Error('signer is undefined');case 5:return _context9.abrupt("return",this.signer.createContract(contractName,functionArguments,options));case 6:case"end":return _context9.stop();}}},_callee9,this);}));function createContract(_x14,_x15,_x16){return _createContract.apply(this,arguments);}return createContract;}()},{key:"scrubOptions",value:function scrubOptions(options){var validProperties=['from','to','gasPrice','gas','value','data','nonce'];Object.keys(options).forEach(function(option){if(!validProperties.includes(option)){delete options[option];}});}}]);return Executor;}(logger_1.Logger);exports.Executor=Executor;

},{"../common/logger":712,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/helpers/toConsumableArray":746,"@babel/runtime/helpers/typeof":747,"@babel/runtime/regenerator":748}],747:[function(require,module,exports){
arguments[4][66][0].apply(exports,arguments)
},{"dup":66}],717:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:true});var SignerExternal=function(){function SignerExternal(){(0,_classCallCheck2["default"])(this,SignerExternal);}(0,_createClass2["default"])(SignerExternal,[{key:"createContract",value:function(){var _createContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:throw new Error('not implemented');case 1:case"end":return _context.stop();}}},_callee);}));function createContract(){return _createContract.apply(this,arguments);}return createContract;}()},{key:"getPublicKey",value:function(){var _getPublicKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:throw new Error('not implemented');case 1:case"end":return _context2.stop();}}},_callee2);}));function getPublicKey(){return _getPublicKey.apply(this,arguments);}return getPublicKey;}()},{key:"signAndExecuteSend",value:function signAndExecuteSend(options,handleTxResult){handleTxResult('not implemented');}},{key:"signAndExecuteTransaction",value:function signAndExecuteTransaction(contract,functionName,functionArguments,options,handleTxResult){var _contract$methods;var execution=(_contract$methods=contract.methods)[functionName].apply(_contract$methods,(0,_toConsumableArray2["default"])(functionArguments)).send(options);execution.on('confirmation',function(confirmation,receipt){if(confirmation===0){execution.off('confirmation');setTimeout(function(){handleTxResult(null,receipt);},6000);}}).on('error',function(error){handleTxResult(error);});}},{key:"signMessage",value:function(){var _signMessage=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:throw new Error('not implemented');case 1:case"end":return _context3.stop();}}},_callee3);}));function signMessage(){return _signMessage.apply(this,arguments);}return signMessage;}()}]);return SignerExternal;}();exports.SignerExternal=SignerExternal;

},{"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/toConsumableArray":746,"@babel/runtime/regenerator":748}],718:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var BigNumber=require("bignumber.js");var Transaction=require("ethereumjs-tx");var crypto=require("crypto-browserify");var web3_eth_abi_1=require("web3-eth-abi");var logger_1=require("../common/logger");var coder=new web3_eth_abi_1.AbiCoder();var nonces={};var SignerInternal=function(_logger_1$Logger){(0,_inherits2["default"])(SignerInternal,_logger_1$Logger);function SignerInternal(options){var _this;(0,_classCallCheck2["default"])(this,SignerInternal);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(SignerInternal).call(this,options));_this.pendingTransactions={};_this.accountStore=options.accountStore;_this.contractLoader=options.contractLoader;_this.config=options.config;_this.web3=options.web3;_this.newBlockSubscription=_this.web3.eth.subscribe('newBlockHeaders').on('data',function(){var _ref=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(blockHeader){var pendingTransactionHashes,blockNumber,blockStart,checkInterval;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:pendingTransactionHashes=Object.keys(_this.pendingTransactions);if(pendingTransactionHashes.length!==0){blockNumber=blockHeader.number;blockStart=Date.now();checkInterval=setInterval((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){var blockDetails;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.log("checking for block ".concat(blockNumber),'debug');_context.next=3;return _this.web3.eth.getBlock(blockHeader.number);case 3:blockDetails=_context.sent;if(blockDetails){clearInterval(checkInterval);_this.log("received block details for block ".concat(blockNumber," after ").concat(Date.now()-blockStart,"ms"),'debug');Object.keys(_this.pendingTransactions).forEach(function(transactionHash){if(blockDetails.transactions.indexOf(transactionHash)!==-1){_this.pendingTransactions[transactionHash].forEach(function(callback){return callback(blockHeader);});delete _this.pendingTransactions[transactionHash];}});}case 5:case"end":return _context.stop();}}},_callee);})),500);}case 2:case"end":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}());return _this;}(0,_createClass2["default"])(SignerInternal,[{key:"getPrivateKey",value:function getPrivateKey(accountId){return this.accountStore.getPrivateKey(accountId);}},{key:"getPublicKey",value:function(){var _getPublicKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(accountId){var ecdh;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ecdh=crypto.createECDH('secp256k1');_context3.t0=ecdh;_context3.next=4;return this.getPrivateKey(accountId);case 4:_context3.t1=_context3.sent;_context3.t0.setPrivateKey.call(_context3.t0,_context3.t1,'hex');return _context3.abrupt("return",ecdh.getPublicKey().toString('hex'));case 7:case"end":return _context3.stop();}}},_callee3,this);}));function getPublicKey(_x2){return _getPublicKey.apply(this,arguments);}return getPublicKey;}()},{key:"ensureHashWithPrefix",value:function ensureHashWithPrefix(input){if(typeof input==='number'){return"0x".concat(input.toString(16));}else if(!input.toString().startsWith('0x')){return"0x".concat(input);}return input;}},{key:"getGasPrice",value:function getGasPrice(){var _this2=this;var chain;if(this.config.gasPrice){chain=Promise.resolve(this.config.gasPrice);}else{chain=this.web3.eth.getGasPrice().then(function(gp){if(gp==='0'||gp===0){_this2.log("returned gas price was 0, using fallback 20GWei",'debug');return'200000000000';}else{return gp;}});}return chain.then(function(priceWei){return _this2.ensureHashWithPrefix(parseInt(priceWei,10).toString(16));});}},{key:"getNonce",value:function getNonce(accountId){var _this3=this;return this.web3.eth.getTransactionCount(accountId).then(function(count){var nonce=Math.max(nonces[accountId]||0,count);nonces[accountId]=nonce+1;_this3.log("current nonce: ".concat(nonce),'debug');return nonce;});}},{key:"encodeConstructorParams",value:function encodeConstructorParams(abi,params){if(params.length){return abi.filter(function(json){return json.type==='constructor'&&json.inputs.length===params.length;}).map(function(json){return json.inputs.map(function(input){return input.type;});}).map(function(types){return coder.encodeParameters(types,params);}).map(function(encodedParams){return encodedParams.replace(/^0x/,'');})[0]||'';}else{return'';}}},{key:"sendSignedTransaction",value:function(){var _sendSignedTransaction=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(signedTx){var _this4=this;var receipt,txHash,resolved;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:resolved=false;_context5.next=3;return new Promise(function(resolve,reject){var checkReceipt=function(){var _ref3=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(){var newReceipt;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!receipt||!receipt.blockHash)){_context4.next=8;break;}_context4.next=3;return _this4.web3.eth.getTransactionReceipt(txHash);case 3:newReceipt=_context4.sent;if(!receipt||!receipt.blockHash){receipt=newReceipt;}if(!receipt||!receipt.blockHash){_this4.pendingTransactions[txHash]=_this4.pendingTransactions[txHash]||[];_this4.pendingTransactions[txHash].push(function(){return checkReceipt();});}else if(!resolved){resolved=true;resolve();}_context4.next=9;break;case 8:if(!resolved){resolved=true;resolve();}case 9:case"end":return _context4.stop();}}},_callee4);}));return function checkReceipt(){return _ref3.apply(this,arguments);};}();_this4.web3.eth.sendSignedTransaction(signedTx).on('transactionHash',function(transactionHash){txHash=transactionHash;checkReceipt();}).on('receipt',function(newReceipt){if(!receipt||!receipt.blockHash){receipt=newReceipt;checkReceipt();}}).on('error',function(error){return reject(error);});});case 3:return _context5.abrupt("return",receipt);case 4:case"end":return _context5.stop();}}},_callee5);}));function sendSignedTransaction(_x3){return _sendSignedTransaction.apply(this,arguments);}return sendSignedTransaction;}()},{key:"signAndExecuteSend",value:function signAndExecuteSend(options,handleTxResult){var _this5=this;this.log('will sign tx for eth for transaction','debug');Promise.all([this.getPrivateKey(options.from),typeof options.gasPrice!=='undefined'?options.gasPrice:this.getGasPrice(),this.getNonce(options.from)]).then(function(){var _ref5=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(_ref4){var _ref6,privateKey,gasPrice,nonce,txParams,privateKeyBuffer,txObject,signedTx;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref6=(0,_slicedToArray2["default"])(_ref4,3),privateKey=_ref6[0],gasPrice=_ref6[1],nonce=_ref6[2];txParams={nonce:nonce,gasPrice:gasPrice,gasLimit:options.gas||53000,to:options.to,value:options.value?'0x'+new BigNumber(options.value,10).toString(16):0,chainId:NaN};privateKeyBuffer=Buffer.from(privateKey,'hex');txObject=new Transaction(txParams);txObject.sign(privateKeyBuffer);signedTx=_this5.ensureHashWithPrefix(txObject.serialize().toString('hex'));_context6.prev=6;_context6.t0=handleTxResult;_context6.next=10;return _this5.sendSignedTransaction(signedTx);case 10:_context6.t1=_context6.sent;(0,_context6.t0)(null,_context6.t1);_context6.next=17;break;case 14:_context6.prev=14;_context6.t2=_context6["catch"](6);handleTxResult(_context6.t2);case 17:case"end":return _context6.stop();}}},_callee6,null,[[6,14]]);}));return function(_x4){return _ref5.apply(this,arguments);};}())["catch"](function(ex){var msg="could not sign transaction; \"".concat(ex.message||ex).concat(ex.stack?ex.stack:'',"\"");handleTxResult(msg);});}},{key:"signAndExecuteTransaction",value:function signAndExecuteTransaction(contract,functionName,functionArguments,options,handleTxResult){var _this6=this;this.log("will sign tx for function \"".concat(functionName,"\""),'debug');Promise.all([this.getPrivateKey(options.from),typeof options.gasPrice!=='undefined'?options.gasPrice:this.getGasPrice(),this.getNonce(options.from)]).then(function(){var _ref8=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(_ref7){var _contract$methods;var _ref9,privateKey,gasPrice,nonce,data,txParams,privateKeyBuffer,txObject,signedTx;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_ref9=(0,_slicedToArray2["default"])(_ref7,3),privateKey=_ref9[0],gasPrice=_ref9[1],nonce=_ref9[2];_this6.log("using gas price of ".concat(gasPrice," Wei"),'debug');data=(_contract$methods=contract.methods)[functionName].apply(_contract$methods,(0,_toConsumableArray2["default"])(functionArguments)).encodeABI();txParams={nonce:nonce,gasPrice:gasPrice,gasLimit:_this6.ensureHashWithPrefix(options.gas),to:contract.options.address,value:options.value?'0x'+new BigNumber(options.value,10).toString(16):0,data:_this6.ensureHashWithPrefix(data),chainId:NaN};privateKeyBuffer=Buffer.from(privateKey,'hex');txObject=new Transaction(txParams);txObject.sign(privateKeyBuffer);signedTx=_this6.ensureHashWithPrefix(txObject.serialize().toString('hex'));_context7.prev=8;_context7.t0=handleTxResult;_context7.next=12;return _this6.sendSignedTransaction(signedTx);case 12:_context7.t1=_context7.sent;(0,_context7.t0)(null,_context7.t1);_context7.next=19;break;case 16:_context7.prev=16;_context7.t2=_context7["catch"](8);handleTxResult(_context7.t2);case 19:case"end":return _context7.stop();}}},_callee7,null,[[8,16]]);}));return function(_x5){return _ref8.apply(this,arguments);};}())["catch"](function(ex){var msg="could not sign transaction; \"".concat(ex.message||ex).concat(ex.stack?ex.stack:'',"\"");handleTxResult(msg);});}},{key:"createContract",value:function createContract(contractName,functionArguments,options){var _this7=this;this.log('will sign tx for contract creation','debug');var compiledContract=this.contractLoader.getCompiledContract(contractName);if(!compiledContract){throw new Error("cannot find contract description for contract \"".concat(contractName,"\""));}return Promise.all([this.getPrivateKey(options.from),typeof options.gasPrice!=='undefined'?options.gasPrice:this.getGasPrice(),this.getNonce(options.from)]).then(function(){var _ref11=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(_ref10){var _ref12,privateKey,gasPrice,nonce,abi,txParams,txObject,privateKeyBuffer,signedTx,receipt;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_ref12=(0,_slicedToArray2["default"])(_ref10,3),privateKey=_ref12[0],gasPrice=_ref12[1],nonce=_ref12[2];abi=JSON.parse(compiledContract["interface"]);txParams={nonce:nonce,gasPrice:gasPrice,gasLimit:_this7.ensureHashWithPrefix(options.gas),value:options.value||0,data:_this7.ensureHashWithPrefix("".concat(compiledContract.bytecode)+"".concat(_this7.encodeConstructorParams(abi,functionArguments))),chainId:NaN};txObject=new Transaction(txParams);privateKeyBuffer=Buffer.from(privateKey,'hex');txObject.sign(privateKeyBuffer);signedTx=_this7.ensureHashWithPrefix(txObject.serialize().toString('hex'));_context8.next=9;return _this7.sendSignedTransaction(signedTx);case 9:receipt=_context8.sent;if(!(options.gas===receipt.gasUsed)){_context8.next=14;break;}throw new Error('all gas used up');case 14:_this7.log("contract creation of \"".concat(contractName,"\" used ").concat(receipt.gasUsed," gas"));return _context8.abrupt("return",new _this7.web3.eth.Contract(abi,receipt.contractAddress));case 16:case"end":return _context8.stop();}}},_callee8);}));return function(_x6){return _ref11.apply(this,arguments);};}())["catch"](function(ex){var msg="could not sign contract creation of \"".concat(contractName,"\"; \"").concat(ex.message||ex,"\"");_this7.log(msg,'error');throw ex;});}},{key:"signMessage",value:function(){var _signMessage=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(accountId,message){var privateKey,_ref13,signature;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.accountStore.getPrivateKey(accountId);case 2:privateKey=_context9.sent;_context9.next=5;return this.web3.eth.accounts.sign(message,"0x".concat(privateKey));case 5:_ref13=_context9.sent;signature=_ref13.signature;return _context9.abrupt("return",signature);case 8:case"end":return _context9.stop();}}},_callee9,this);}));function signMessage(_x7,_x8){return _signMessage.apply(this,arguments);}return signMessage;}()}]);return SignerInternal;}(logger_1.Logger);exports.SignerInternal=SignerInternal;

}).call(this,require("buffer").Buffer)

},{"../common/logger":712,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/helpers/slicedToArray":745,"@babel/runtime/helpers/toConsumableArray":746,"@babel/runtime/regenerator":748,"bignumber.js":793,"buffer":1133,"crypto-browserify":833,"ethereumjs-tx":862,"web3-eth-abi":1095}],745:[function(require,module,exports){
arguments[4][63][0].apply(exports,arguments)
},{"./arrayWithHoles":730,"./iterableToArrayLimit":740,"./nonIterableRest":741,"dup":63}],793:[function(require,module,exports){
arguments[4][72][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":72}],862:[function(require,module,exports){
(function (Buffer){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ethUtil=require('ethereumjs-util');var fees=require('ethereum-common/params.json');var BN=ethUtil.BN;var N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var Transaction=function(){function Transaction(data){_classCallCheck(this,Transaction);data=data||{};var fields=[{name:'nonce',length:32,allowLess:true,"default":new Buffer([])},{name:'gasPrice',length:32,allowLess:true,"default":new Buffer([])},{name:'gasLimit',alias:'gas',length:32,allowLess:true,"default":new Buffer([])},{name:'to',allowZero:true,length:20,"default":new Buffer([])},{name:'value',length:32,allowLess:true,"default":new Buffer([])},{name:'data',alias:'input',allowZero:true,"default":new Buffer([])},{name:'v',allowZero:true,"default":new Buffer([0x1c])},{name:'r',length:32,allowZero:true,allowLess:true,"default":new Buffer([])},{name:'s',length:32,allowZero:true,allowLess:true,"default":new Buffer([])}];ethUtil.defineProperties(this,fields,data);Object.defineProperty(this,'from',{enumerable:true,configurable:true,get:this.getSenderAddress.bind(this)});var sigV=ethUtil.bufferToInt(this.v);var chainId=Math.floor((sigV-35)/2);if(chainId<0)chainId=0;this._chainId=chainId||data.chainId||0;this._homestead=true;}Transaction.prototype.toCreationAddress=function toCreationAddress(){return this.to.toString('hex')==='';};Transaction.prototype.hash=function hash(includeSignature){if(includeSignature===undefined)includeSignature=true;var items=void 0;if(includeSignature){items=this.raw;}else{if(this._chainId>0){var raw=this.raw.slice();this.v=this._chainId;this.r=0;this.s=0;items=this.raw;this.raw=raw;}else{items=this.raw.slice(0,6);}}return ethUtil.rlphash(items);};Transaction.prototype.getChainId=function getChainId(){return this._chainId;};Transaction.prototype.getSenderAddress=function getSenderAddress(){if(this._from){return this._from;}var pubkey=this.getSenderPublicKey();this._from=ethUtil.publicToAddress(pubkey);return this._from;};Transaction.prototype.getSenderPublicKey=function getSenderPublicKey(){if(!this._senderPubKey||!this._senderPubKey.length){if(!this.verifySignature())throw new Error('Invalid Signature');}return this._senderPubKey;};Transaction.prototype.verifySignature=function verifySignature(){var msgHash=this.hash(false);if(this._homestead&&new BN(this.s).cmp(N_DIV_2)===1){return false;}try{var v=ethUtil.bufferToInt(this.v);if(this._chainId>0){v-=this._chainId*2+8;}this._senderPubKey=ethUtil.ecrecover(msgHash,v,this.r,this.s);}catch(e){return false;}return!!this._senderPubKey;};Transaction.prototype.sign=function sign(privateKey){var msgHash=this.hash(false);var sig=ethUtil.ecsign(msgHash,privateKey);if(this._chainId>0){sig.v+=this._chainId*2+8;}Object.assign(this,sig);};Transaction.prototype.getDataFee=function getDataFee(){var data=this.raw[5];var cost=new BN(0);for(var i=0;i<data.length;i++){data[i]===0?cost.iaddn(fees.txDataZeroGas.v):cost.iaddn(fees.txDataNonZeroGas.v);}return cost;};Transaction.prototype.getBaseFee=function getBaseFee(){var fee=this.getDataFee().iaddn(fees.txGas.v);if(this._homestead&&this.toCreationAddress()){fee.iaddn(fees.txCreation.v);}return fee;};Transaction.prototype.getUpfrontCost=function getUpfrontCost(){return new BN(this.gasLimit).imul(new BN(this.gasPrice)).iadd(new BN(this.value));};Transaction.prototype.validate=function validate(stringError){var errors=[];if(!this.verifySignature()){errors.push('Invalid Signature');}if(this.getBaseFee().cmp(new BN(this.gasLimit))>0){errors.push(['gas limit is too low. Need at least '+this.getBaseFee()]);}if(stringError===undefined||stringError===false){return errors.length===0;}else{return errors.join(' ');}};return Transaction;}();module.exports=Transaction;

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"ethereum-common/params.json":861,"ethereumjs-util":863}],833:[function(require,module,exports){
arguments[4][177][0].apply(exports,arguments)
},{"browserify-cipher":814,"browserify-sign":821,"browserify-sign/algos":818,"create-ecdh":828,"create-hash":829,"create-hmac":831,"diffie-hellman":840,"dup":177,"pbkdf2":1055,"public-encrypt":1061,"randombytes":1067,"randomfill":1068}],1095:[function(require,module,exports){
arguments[4][673][0].apply(exports,arguments)
},{"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":673,"ethers/utils/abi-coder":867,"lodash/isArray":1010,"lodash/isObject":1018,"web3-utils":1096}],719:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var description_schemas_1=require("./description.schemas");var logger_1=require("./common/logger");var validator_1=require("./validator");var Description=function(_logger_1$Logger){(0,_inherits2["default"])(Description,_logger_1$Logger);function Description(options){var _this;(0,_classCallCheck2["default"])(this,Description);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Description).call(this,options));_this.encodingUnencrypted='binary';_this.encodingEncrypted='hex';_this.encodingEnvelope='binary';_this.contractLoader=options.contractLoader;_this.cryptoProvider=options.cryptoProvider;_this.dfs=options.dfs;_this.executor=options.executor;_this.keyProvider=options.keyProvider;_this.nameResolver=options.nameResolver;_this.web3=options.web3;return _this;}(0,_createClass2["default"])(Description,[{key:"getDescription",value:function(){var _getDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(address,accountId){var contractDescription,contractAddress,validation;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!address.startsWith('0x')){_context.next=6;break;}_context.next=3;return this.getDescriptionFromContract(address,accountId);case 3:contractDescription=_context.sent;_context.next=23;break;case 6:_context.next=8;return this.nameResolver.getAddress(address);case 8:contractAddress=_context.sent;if(!(contractAddress&&contractAddress!=='0x0000000000000000000000000000000000000000')){_context.next=19;break;}_context.prev=10;_context.next=13;return this.getDescriptionFromContract(contractAddress,accountId);case 13:contractDescription=_context.sent;_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](10);this.log("getDescription: getDescriptionFromContract call failed for address\n            ".concat(address," with accountId ").concat(accountId,": ").concat(_context.t0.message),'debug');case 19:if(contractDescription){_context.next=23;break;}_context.next=22;return this.getDescriptionFromEns(address);case 22:contractDescription=_context.sent;case 23:validation=this.validateDescription(contractDescription);if(validation!==true){this.log("description \"".concat(address,"\" is invalid: ").concat(JSON.stringify(validation),"; ")+'this may invalidate the entire description in the near future','warning');}return _context.abrupt("return",contractDescription);case 26:case"end":return _context.stop();}}},_callee,this,[[10,16]]);}));function getDescription(_x,_x2){return _getDescription.apply(this,arguments);}return getDescription;}()},{key:"getDescriptionFromContract",value:function(){var _getDescriptionFromContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(contractAddress,accountId){var result,contract,hash,content,cryptor,key,privateData;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:result=null;contract=this.contractLoader.loadContract('Described',contractAddress);_context2.next=4;return this.executor.executeContractCall(contract,'contractDescription');case 4:hash=_context2.sent;if(!(hash&&hash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context2.next=26;break;}_context2.next=8;return this.dfs.get(hash);case 8:_context2.t0=this.encodingEnvelope;content=_context2.sent.toString(_context2.t0);result=JSON.parse(content);if(!(result["private"]&&result.cryptoInfo)){_context2.next=26;break;}_context2.prev=12;cryptor=this.cryptoProvider.getCryptorByCryptoInfo(result.cryptoInfo);_context2.next=16;return this.keyProvider.getKey(result.cryptoInfo);case 16:key=_context2.sent;_context2.next=19;return cryptor.decrypt(Buffer.from(result["private"],this.encodingEncrypted),{key:key});case 19:privateData=_context2.sent;result["private"]=privateData;_context2.next=26;break;case 23:_context2.prev=23;_context2.t1=_context2["catch"](12);result["private"]=new Error("wrong key for ".concat(accountId));case 26:return _context2.abrupt("return",result);case 27:case"end":return _context2.stop();}}},_callee2,this,[[12,23]]);}));function getDescriptionFromContract(_x3,_x4){return _getDescriptionFromContract.apply(this,arguments);}return getDescriptionFromContract;}()},{key:"getDescriptionFromEns",value:function(){var _getDescriptionFromEns=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(ensAddress){var result,hash,content,cryptor,key,privateData;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:result=null;_context3.next=3;return this.nameResolver.getContent(ensAddress);case 3:hash=_context3.sent;if(!(hash&&hash!=='0x0000000000000000000000000000000000000000000000000000000000000000')){_context3.next=19;break;}_context3.next=7;return this.dfs.get(hash);case 7:_context3.t0=this.encodingEnvelope;content=_context3.sent.toString(_context3.t0);result=JSON.parse(content);if(!(result["private"]&&result.cryptoInfo)){_context3.next=19;break;}cryptor=this.cryptoProvider.getCryptorByCryptoInfo(result.cryptoInfo);_context3.next=14;return this.keyProvider.getKey(result.cryptoInfo);case 14:key=_context3.sent;_context3.next=17;return cryptor.decrypt(Buffer.from(result["private"],this.encodingEncrypted),{key:key});case 17:privateData=_context3.sent;result["private"]=privateData;case 19:return _context3.abrupt("return",result);case 20:case"end":return _context3.stop();}}},_callee3,this);}));function getDescriptionFromEns(_x5){return _getDescriptionFromEns.apply(this,arguments);}return getDescriptionFromEns;}()},{key:"loadContract",value:function(){var _loadContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(address,accountId){var contractAddress,contractDescription,ownAbi;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!address.startsWith('0x')){_context4.next=4;break;}contractAddress=address;_context4.next=9;break;case 4:_context4.next=6;return this.nameResolver.getAddress(address);case 6:contractAddress=_context4.sent;if(!(!contractAddress||contractAddress==='0x0000000000000000000000000000000000000000')){_context4.next=9;break;}throw new Error("could not find contract address at \"".concat(address,"\""));case 9:_context4.next=11;return this.getDescription(address,accountId);case 11:contractDescription=_context4.sent;if(contractDescription){_context4.next=14;break;}throw new Error("could not find contract description (dbcp) for address \"".concat(address,"\""));case 14:if(!(contractDescription["private"]&&contractDescription["private"].abis&&contractDescription["private"].abis.own)){_context4.next=18;break;}ownAbi=contractDescription["private"].abis.own;_context4.next=23;break;case 18:if(!(contractDescription["public"]&&contractDescription["public"].abis&&contractDescription["public"].abis.own)){_context4.next=22;break;}ownAbi=contractDescription["public"].abis.own;_context4.next=23;break;case 22:throw new Error("could not find own abi for contract in description (dbcp)");case 23:return _context4.abrupt("return",new this.web3.eth.Contract(ownAbi,contractAddress));case 24:case"end":return _context4.stop();}}},_callee4,this);}));function loadContract(_x6,_x7){return _loadContract.apply(this,arguments);}return loadContract;}()},{key:"setDescription",value:function(){var _setDescription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(address,envelope,accountId){return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!address.startsWith('0x')){_context5.next=4;break;}return _context5.abrupt("return",this.setDescriptionToContract(address,envelope,accountId));case 4:return _context5.abrupt("return",this.setDescriptionToEns(address,envelope,accountId));case 5:case"end":return _context5.stop();}}},_callee5,this);}));function setDescription(_x8,_x9,_x10){return _setDescription.apply(this,arguments);}return setDescription;}()},{key:"setDescriptionToContract",value:function(){var _setDescriptionToContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(contractAddress,envelope,accountId){var hash,content,validation,msg,cryptor,blockNr,key,encrypted,contract;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(typeof envelope==='string')){_context6.next=4;break;}hash=envelope;_context6.next=27;break;case 4:content=Object.assign({},envelope);if(!content["public"].dbcpVersion){this.log('dbcpVersion not set, using fallback of version 1','warning');content["public"].dbcpVersion=1;}validation=this.validateDescription(content);if(!(validation!==true)){_context6.next=11;break;}msg="description invalid: ".concat(JSON.stringify(validation));this.log(msg,'error');throw new Error(msg);case 11:if(!(content["private"]&&content.cryptoInfo)){_context6.next=24;break;}cryptor=this.cryptoProvider.getCryptorByCryptoInfo(content.cryptoInfo);_context6.next=15;return this.web3.eth.getBlockNumber();case 15:blockNr=_context6.sent;_context6.next=18;return this.keyProvider.getKey(content.cryptoInfo);case 18:key=_context6.sent;_context6.next=21;return cryptor.encrypt(content["private"],{key:key});case 21:encrypted=_context6.sent;content["private"]=encrypted.toString(this.encodingEncrypted);content.cryptoInfo.block=blockNr;case 24:_context6.next=26;return this.dfs.add('description',Buffer.from(JSON.stringify(content),this.encodingEnvelope));case 26:hash=_context6.sent;case 27:contract=this.contractLoader.loadContract('Described',contractAddress);_context6.next=30;return this.executor.executeContractTransaction(contract,'setContractDescription',{from:accountId,gas:200000},hash);case 30:case"end":return _context6.stop();}}},_callee6,this);}));function setDescriptionToContract(_x11,_x12,_x13){return _setDescriptionToContract.apply(this,arguments);}return setDescriptionToContract;}()},{key:"setDescriptionToEns",value:function(){var _setDescriptionToEns=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(ensAddress,envelope,accountId){var _this2=this;var promises,_ref2,_ref3,hash,currentOwner,finalNodeOwner;return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:promises=[];if(typeof envelope==='string'){promises.push(envelope);}else{promises.push((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(){var content,validation,msg,cryptor,key,encrypted;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:content=Object.assign({},envelope);if(!content["public"].dbcpVersion){_this2.log('dbcpVersion not set, using fallback of version 1','warning');content["public"].dbcpVersion=content["public"].dbcpVersion||1;}validation=_this2.validateDescription(content);if(!(validation!==true)){_context7.next=7;break;}msg="description invalid: ".concat(JSON.stringify(validation));_this2.log(msg,'error');throw new Error(msg);case 7:if(!(content["private"]&&content.cryptoInfo)){_context7.next=16;break;}cryptor=_this2.cryptoProvider.getCryptorByCryptoInfo(content.cryptoInfo);_context7.next=11;return _this2.keyProvider.getKey(content.cryptoInfo);case 11:key=_context7.sent;_context7.next=14;return cryptor.encrypt(content["private"],{key:key});case 14:encrypted=_context7.sent;content["private"]=encrypted.toString(_this2.encodingEncrypted);case 16:_context7.next=18;return _this2.dfs.add('description',Buffer.from(JSON.stringify(content),_this2.encodingEnvelope));case 18:return _context7.abrupt("return",_context7.sent);case 19:case"end":return _context7.stop();}}},_callee7);}))());}promises.push(this.executor.executeContractCall(this.nameResolver.ensContract,'owner',this.nameResolver.namehash(ensAddress)));_context8.next=5;return Promise.all(promises);case 5:_ref2=_context8.sent;_ref3=(0,_slicedToArray2["default"])(_ref2,2);hash=_ref3[0];currentOwner=_ref3[1];finalNodeOwner=null;if(currentOwner!=='0x0000000000000000000000000000000000000000'){finalNodeOwner=currentOwner;}_context8.next=13;return this.nameResolver.setContent(ensAddress,hash,accountId,finalNodeOwner);case 13:case"end":return _context8.stop();}}},_callee8,this);}));function setDescriptionToEns(_x14,_x15,_x16){return _setDescriptionToEns.apply(this,arguments);}return setDescriptionToEns;}()},{key:"validateDescription",value:function validateDescription(envelope){var combinedDescription=Object.assign({},envelope["public"],envelope["private"]);if(!combinedDescription.dbcpVersion){this.log('dbcpVersion not set, using fallback of version 1','warning');combinedDescription.dbcpVersion=combinedDescription.dbcpVersion||1;}var validator=new validator_1.Validator({schema:description_schemas_1["default"][combinedDescription.dbcpVersion]});this.log("validating DBCP definition with schema version ".concat(combinedDescription.dbcpVersion),'info');return validator.validate(combinedDescription);}}]);return Description;}(logger_1.Logger);exports.Description=Description;

}).call(this,require("buffer").Buffer)

},{"./common/logger":712,"./description.schemas":720,"./validator":729,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/helpers/slicedToArray":745,"@babel/runtime/regenerator":748,"buffer":1133}],729:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var ajv=require("ajv");var logger_1=require("./common/logger");var Validator=function(_logger_1$Logger){(0,_inherits2["default"])(Validator,_logger_1$Logger);function Validator(options){var _this;(0,_classCallCheck2["default"])(this,Validator);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Validator).call(this,options));_this.schema=options.schema;_this.ajv=new ajv({allErrors:true});_this.validator=_this.ajv.compile(_this.schema);return _this;}(0,_createClass2["default"])(Validator,[{key:"validate",value:function validate(data){var validationResult=this.validator(data);if(!validationResult){return this.validator.errors;}return validationResult;}},{key:"getErrorsAsText",value:function getErrorsAsText(){return this.ajv.errorsText(this.validator.errors);}}]);return Validator;}(logger_1.Logger);exports.Validator=Validator;

},{"./common/logger":712,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"ajv":749}],720:[function(require,module,exports){
Object.defineProperty(exports,"__esModule",{value:true});var definitions={1:{"$id":"dbcpVersion_1","type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"description":{"type":"string"},"author":{"type":"string"},"version":{"type":"string","pattern":"^(?:\\^|~)?\\d+\\.\\d+\\.\\d+$"},"dbcpVersion":{"type":"number"},"abis":{"type":"object","additionalProperties":false,"properties":{"own":{"type":"array","items":{"type":"object"}},"related":{"type":"object","patternProperties":{"^.*$":{"type":"array","items":{"type":"object"}}}}}},"source":{"type":"string"},"dataSchema":{"type":"object"},"tags":{"type":"array","items":{"type":"string"}},"i18n":{"type":"object","patternProperties":{"^.*$":{"type":"object"}}},"imgSquare":{"type":"string"},"imgWide":{"type":"string"},"dapp":{"type":"object","additionalProperties":false,"properties":{"dependencies":{"type":"object","patternProperties":{"^.*$":{"type":"string","pattern":"^(?:\\^|~)?\\d+\\.\\d+\\.\\d+$"}}},"entrypoint":{"type":"string"},"files":{"type":"array","items":{"type":"string"}},"origin":{"type":"string"},"primaryColor":{"type":"string"},"secondaryColor":{"type":"string"},"standalone":{"type":"boolean"},"type":{"type":"string"}},"required":["entrypoint","files","type","origin"]},"blockchain":{"type":"object","additionalProperties":false,"properties":{"referenceType":{"type":"string"},"referenceValue":{"type":"string"}},"required":["referenceType","referenceValue"]},"dfs":{"type":"object","additionalProperties":false,"properties":{"referenceType":{"type":"string"},"referenceValue":{"type":"string"}},"required":["referenceType","referenceValue"]},"versions":{"type":"object","additionalProperties":false,"patternProperties":{"^\\d+\\.\\d+\\.\\d+$":{"type":"string"}}}},"required":["name","description","author","version","dbcpVersion"]},2:{"$id":"dbcpVersion_1","type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"description":{"type":"string"},"author":{"type":"string"},"version":{"type":"string","pattern":"^(?:\\^|~)?\\d+\\.\\d+\\.\\d+$"},"dbcpVersion":{"type":"number"},"abis":{"type":"object","additionalProperties":false,"properties":{"own":{"type":"array","items":{"type":"object"}},"related":{"type":"object","patternProperties":{"^.*$":{"type":"array","items":{"type":"object"}}}}}},"source":{"type":"string"},"dataSchema":{"type":"object"},"tags":{"type":"array","items":{"type":"string"}},"i18n":{"type":"object","patternProperties":{"^.*$":{"type":"object"}}},"imgSquare":{"type":"string"},"imgWide":{"type":"string"},"dapp":{"type":"object","additionalProperties":false,"properties":{"dependencies":{"type":"object","patternProperties":{"^.*$":{"type":"string","pattern":"^(?:\\^|~)?\\d+\\.\\d+\\.\\d+$"}}},"entrypoint":{"type":"string"},"files":{"type":"array","items":{"type":"string"}},"origin":{"type":"string"},"primaryColor":{"type":"string"},"secondaryColor":{"type":"string"},"standalone":{"type":"boolean"},"type":{"type":"string"}},"required":["entrypoint","files","type","origin"]},"blockchain":{"type":"object","additionalProperties":false,"properties":{"referenceType":{"type":"string"},"referenceValue":{"type":"string"}},"required":["referenceType","referenceValue"]},"dfs":{"type":"object","additionalProperties":false,"properties":{"referenceType":{"type":"string"},"referenceValue":{"type":"string"}},"required":["referenceType","referenceValue"]},"versions":{"type":"object","additionalProperties":false,"patternProperties":{"^\\d+\\.\\d+\\.\\d+$":{"type":"string"}}},"identity":{"type":"string"},"license":{"type":"object"}},"required":["name","description","author","version","dbcpVersion"]}};exports["default"]=definitions;

},{}],721:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var https=require("https");var timers_1=require("timers");var bs58=require("bs58");var prottle=require("prottle");var logger_1=require("../common/logger");var utils=require("./../common/utils");var IPFS_TIMEOUT=120000;var runFunctionAsPromise=utils.promisify;var requestWindowSize=10;var Ipfs=function(_logger_1$Logger){(0,_inherits2["default"])(Ipfs,_logger_1$Logger);function Ipfs(options){var _this;(0,_classCallCheck2["default"])(this,Ipfs);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Ipfs).call(this,options));_this.remoteNode=options.remoteNode;if(options.cache){_this.cache=options.cache;}return _this;}(0,_createClass2["default"])(Ipfs,[{key:"add",value:function(){var _add=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(name,data){var files;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:files=[{path:name,content:data}];_context.next=3;return this.addMultiple(files);case 3:return _context.abrupt("return",_context.sent[0]);case 4:case"end":return _context.stop();}}},_callee,this);}));function add(_x,_x2){return _add.apply(this,arguments);}return add;}()},{key:"addMultiple",value:function(){var _addMultiple=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(files){var _this2=this;var remoteFiles,msg;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:remoteFiles=[];_context2.prev=1;_context2.next=4;return runFunctionAsPromise(this.remoteNode.files,'add',files);case 4:remoteFiles=_context2.sent;if(remoteFiles.length){_context2.next=7;break;}throw new Error('no hash was returned');case 7:remoteFiles=remoteFiles.map(function(fileHash){if(!fileHash.hash){fileHash.hash=fileHash.Hash;}return fileHash;});_context2.next=15;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](1);msg="could not add file to ipfs: ".concat(_context2.t0.message||_context2.t0);this.log(msg);throw new Error(msg);case 15:if(!this.cache){_context2.next=18;break;}_context2.next=18;return Promise.all(remoteFiles.map(function(remoteFile,i){_this2.cache.add(remoteFile.hash,files[i].content);}));case 18:_context2.next=20;return prottle(requestWindowSize,remoteFiles.map(function(fileHash){return function(){return _this2.pinFileHash(fileHash.hash);};}));case 20:return _context2.abrupt("return",remoteFiles.map(function(remoteFile){return Ipfs.ipfsHashToBytes32(remoteFile.hash);}));case 21:case"end":return _context2.stop();}}},_callee2,this,[[1,10]]);}));function addMultiple(_x3){return _addMultiple.apply(this,arguments);}return addMultiple;}()},{key:"pinFileHash",value:function(){var _pinFileHash=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(hash){var _this3=this;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",new Promise(function(){var _ref=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(resolve,reject){var options,req;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:options={hostname:'ipfs.test.evan.network',port:'443',path:"/pins/".concat(hash),method:'POST'};req=https.request(options,function(res){res.setEncoding('utf8');res.on('data',function(){});res.on('end',(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:resolve();case 1:case"end":return _context3.stop();}}},_callee3);})));});req.on('error',function(e){reject(e);});req.on('timeout',function(){_this3.log("timeout during pinning of hash \"".concat(hash,"\""));resolve();});req.write('');req.end();case 6:case"end":return _context4.stop();}}},_callee4);}));return function(_x5,_x6){return _ref.apply(this,arguments);};}()));case 1:case"end":return _context5.stop();}}},_callee5);}));function pinFileHash(_x4){return _pinFileHash.apply(this,arguments);}return pinFileHash;}()},{key:"get",value:function(){var _get=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(hash){var _this4=this;var returnBuffer,ipfsHash,buffer,timeout,getRemoteHash,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:returnBuffer=_args6.length>1&&_args6[1]!==undefined?_args6[1]:false;ipfsHash=hash.startsWith('Qm')?hash:Ipfs.bytes32ToIpfsHash(hash);if(!(ipfsHash==='QmNLei78zWmzUdbeRB3CiUfAizWUrbeeZh5K1rhAQKCh51')){_context6.next=4;break;}return _context6.abrupt("return",Buffer.from('{}'));case 4:this.log("Getting IPFS Hash ".concat(ipfsHash),'debug');if(!this.cache){_context6.next=15;break;}_context6.next=8;return this.cache.get(ipfsHash);case 8:buffer=_context6.sent;if(!buffer){_context6.next=15;break;}if(!returnBuffer){_context6.next=14;break;}return _context6.abrupt("return",Buffer.from(buffer));case 14:return _context6.abrupt("return",Buffer.from(buffer).toString('binary'));case 15:timeout=new Promise(function(resolve,reject){var wait=timers_1.setTimeout(function(){timers_1.clearTimeout(wait);reject(new Error("error while getting ipfs hash ".concat(ipfsHash,": rejected after ").concat(IPFS_TIMEOUT,"ms")));},IPFS_TIMEOUT);});getRemoteHash=runFunctionAsPromise(this.remoteNode.files,'cat',ipfsHash).then(function(buffer){var ret=buffer.toString('binary');if(_this4.cache){_this4.cache.add(ipfsHash,buffer);}if(returnBuffer){return buffer;}else{return ret;}})["catch"](function(){_this4.log("error while getting ipfs hash ".concat(ipfsHash));});return _context6.abrupt("return",Promise.race([getRemoteHash,timeout]));case 18:case"end":return _context6.stop();}}},_callee6,this);}));function get(_x7){return _get.apply(this,arguments);}return get;}()},{key:"remove",value:function(){var _remove=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(){return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:throw new Error('not implemented');case 1:case"end":return _context7.stop();}}},_callee7);}));function remove(){return _remove.apply(this,arguments);}return remove;}()}],[{key:"ipfsHashToBytes32",value:function ipfsHashToBytes32(hash){var bytes=bs58.decode(hash);var multiHashId=2;return"0x".concat(bytes.slice(multiHashId,bytes.length).toString('hex'));}},{key:"bytes32ToIpfsHash",value:function bytes32ToIpfsHash(str){var remove0x=str.slice(2,str.length);var bytes=Buffer.from("1220".concat(remove0x),'hex');var hash=bs58.encode(bytes);return hash;}}]);return Ipfs;}(logger_1.Logger);exports.Ipfs=Ipfs;

}).call(this,require("buffer").Buffer)

},{"../common/logger":712,"./../common/utils":713,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/regenerator":748,"bs58":824,"buffer":1133,"https":1185,"prottle":1060,"timers":1280}],1060:[function(require,module,exports){
arguments[4][524][0].apply(exports,arguments)
},{"dup":524,"events":1169}],824:[function(require,module,exports){
arguments[4][163][0].apply(exports,arguments)
},{"base-x":825,"dup":163}],722:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));Object.defineProperty(exports,"__esModule",{value:true});var CryptoProvider=function(){function CryptoProvider(cryptors){(0,_classCallCheck2["default"])(this,CryptoProvider);this.cryptors=cryptors;}(0,_createClass2["default"])(CryptoProvider,[{key:"getCryptorByCryptoAlgo",value:function getCryptorByCryptoAlgo(cryptoAlgo){if(!this.cryptors[cryptoAlgo]){throw new Error("algorithm \"".concat(cryptoAlgo,"\" unsupported"));}return this.cryptors[cryptoAlgo];}},{key:"getCryptorByCryptoInfo",value:function getCryptorByCryptoInfo(info){switch(info.algorithm){case'unencrypted':return this.cryptors.unencrypted;default:throw new Error("algorithm unsupported ".concat(info.algorithm));}}}]);return CryptoProvider;}();exports.CryptoProvider=CryptoProvider;

},{"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/interopRequireDefault":738}],723:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var logger_1=require("../common/logger");var utils_1=require("../common/utils");var KeyProvider=function(_logger_1$Logger){(0,_inherits2["default"])(KeyProvider,_logger_1$Logger);function KeyProvider(options){var _this;(0,_classCallCheck2["default"])(this,KeyProvider);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(KeyProvider).call(this,options));_this.keys=options&&options.keys?options.keys:{};return _this;}(0,_createClass2["default"])(KeyProvider,[{key:"init",value:function init(_profile){this.profile=_profile;}},{key:"getKey",value:function(){var _getKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(info){var key;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.log(JSON.stringify(info),'debug');if(!(info.algorithm==='unencrypted')){_context.next=3;break;}return _context.abrupt("return",Promise.resolve('unencrypted'));case 3:if(!this.keys[info.originator]){_context.next=8;break;}this.log(JSON.stringify(utils_1.obfuscate(this.keys[info.originator])),'debug');return _context.abrupt("return",this.keys[info.originator]);case 8:if(!this.profile){_context.next=30;break;}if(!(info.originator===this.currentAccountHash)){_context.next=17;break;}this.log("key lookup: dataKey for \"".concat(this.currentAccount,"\", info \"").concat(JSON.stringify(info),"\""),'debug');_context.next=13;return this.profile.getContactKey(info.originator,'dataKey');case 13:key=_context.sent;this.log("key found: \"".concat(utils_1.obfuscate(key),"\""),'debug');_context.next=27;break;case 17:this.log("key lookup: commKey for \"".concat(info.originator,"\", info \"").concat(JSON.stringify(info),"\""),'debug');_context.next=20;return this.profile.getContactKey(info.originator,'commKey');case 20:key=_context.sent;if(key){_context.next=26;break;}this.log("no key found for \"".concat(JSON.stringify(info),"\"; ")+"only have local keys for ".concat(JSON.stringify(Object.keys(this.keys))),'debug');return _context.abrupt("return",Promise.resolve(null));case 26:this.log("key found: \"".concat(utils_1.obfuscate(key),"\""),'debug');case 27:return _context.abrupt("return",key);case 30:this.log("no key found for \"".concat(JSON.stringify(info),"\"; only have local keys for ").concat(JSON.stringify(Object.keys(this.keys))),'debug');return _context.abrupt("return",Promise.resolve(null));case 32:case"end":return _context.stop();}}},_callee,this);}));function getKey(_x){return _getKey.apply(this,arguments);}return getKey;}()}]);return KeyProvider;}(logger_1.Logger);exports.KeyProvider=KeyProvider;

},{"../common/logger":712,"../common/utils":713,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/regenerator":748}],724:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var logger_1=require("../common/logger");var Unencrypted=function(_logger_1$Logger){(0,_inherits2["default"])(Unencrypted,_logger_1$Logger);function Unencrypted(options){var _this;(0,_classCallCheck2["default"])(this,Unencrypted);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Unencrypted).call(this,options));_this.encodingUnencrypted='utf-8';_this.encodingEncrypted='hex';_this.options=Object.assign({algorithm:'unencrypted'},options||{});return _this;}(0,_createClass2["default"])(Unencrypted,[{key:"getCryptoInfo",value:function getCryptoInfo(){return Object.assign({},this.options);}},{key:"generateKey",value:function(){var _generateKey=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",'unencrypted');case 1:case"end":return _context.stop();}}},_callee);}));function generateKey(){return _generateKey.apply(this,arguments);}return generateKey;}()},{key:"encrypt",value:function(){var _encrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(message){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",Buffer.from(JSON.stringify(message),this.encodingUnencrypted));case 1:case"end":return _context2.stop();}}},_callee2,this);}));function encrypt(_x){return _encrypt.apply(this,arguments);}return encrypt;}()},{key:"decrypt",value:function(){var _decrypt=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(message){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",JSON.parse(message.toString(this.encodingUnencrypted)));case 1:case"end":return _context3.stop();}}},_callee3,this);}));function decrypt(_x2){return _decrypt.apply(this,arguments);}return decrypt;}()}]);return Unencrypted;}(logger_1.Logger);exports.Unencrypted=Unencrypted;Unencrypted.defaultOptions={};

}).call(this,require("buffer").Buffer)

},{"../common/logger":712,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/regenerator":748,"buffer":1133}],725:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var uuid=require("uuid");var async_mutex_1=require("async-mutex");var logger_1=require("./common/logger");var EventHub=function(_logger_1$Logger){(0,_inherits2["default"])(EventHub,_logger_1$Logger);function EventHub(options){var _this;(0,_classCallCheck2["default"])(this,EventHub);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(EventHub).call(this,options));_this.continueBlock=0;_this.contractInstances={};_this.contractSubscriptions={};_this.eventEmitter={};_this.subscriptionToContractMapping={};_this.config=options.config;_this.contractLoader=options.contractLoader;_this.nameResolver=options.nameResolver;_this.eventWeb3=options.eventWeb3;_this.mutexes={};return _this;}(0,_createClass2["default"])(EventHub,[{key:"bindResubscribe",value:function bindResubscribe(web3){var _this2=this;web3.currentProvider.connection.addEventListener('dbcp-reconnected',function(){_this2.resubscribe(web3.currentProvider);_this2.bindResubscribe(web3);});}},{key:"once",value:function once(contractName,address,eventName,filterFunction,onEvent){var _this3=this;var fromBlock=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'latest';var alreadyFired;var subscription;return this.subscribe(contractName,address,eventName,filterFunction,function(event){if(!alreadyFired){alreadyFired=true;return Promise.resolve().then(function(){return onEvent(event);}).then(function(){return _this3.unsubscribe({subscription:subscription});});}},fromBlock).then(function(result){subscription=result;}).then(function(){return subscription;});}},{key:"subscribe",value:function subscribe(contractName,contractAddress,eventName,filterFunction,onEvent){var _this4=this;var fromBlock=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'latest';this.log("subscribing to event \"".concat(eventName,"\" at event hub initializer"),'debug');var chain=Promise.resolve();if(this.eventWeb3){if(contractName==='EventHub'){if(!this.contractLoader.contracts[contractName]){throw new Error("abi for contract type \"".concat(contractName,"\" not found, ")+"supported interfaces are \"".concat(Object.keys(this.contractLoader.contracts).join(','),"\""));}chain=chain.then(function(){return _this4.nameResolver.getAddress(_this4.nameResolver.getDomainName(_this4.config.domains.eventhub));});}chain=chain.then(function(address){address=address?address:contractAddress;return _this4.eventWeb3.eth.contract(JSON.parse(_this4.contractLoader.contracts[contractName]["interface"])).at(address);});}else{if(contractName==='EventHub'){chain=chain.then(function(){return _this4.nameResolver.getAddress(_this4.nameResolver.getDomainName(_this4.config.domains.eventhub));});}chain=chain.then(function(address){address=address?address:contractAddress;return _this4.contractLoader.loadContract(contractName,address);});}return chain.then(function(eventTarget){var contractId=eventTarget.address||eventTarget.options.address;var subscription=uuid.v4();if(!_this4.contractSubscriptions[contractId]){_this4.contractSubscriptions[contractId]={};}if(!_this4.contractSubscriptions[contractId][eventName]){_this4.contractSubscriptions[contractId][eventName]={};}if(!_this4.eventEmitter[contractId]){_this4.eventEmitter[contractId]={};}_this4.contractSubscriptions[contractId][eventName][subscription]=function(event){var innerChain;if(event.event===eventName){var filterResult=filterFunction(event);if(filterResult&&filterResult.hasOwnProperty('then')){innerChain=filterResult;}else{innerChain=Promise.resolve(filterResult);}innerChain=innerChain.then(function(match){if(match){return onEvent(event);}})["catch"](function(ex){_this4.log("error occurred while handling contract event; ".concat(ex.message||ex).concat(ex.stack||''),'error');});}else{innerChain=Promise.resolve();}return innerChain;};_this4.subscriptionToContractMapping[subscription]=[contractId,eventName];_this4.ensureSubscription(contractId,eventName,eventTarget,fromBlock);return subscription;});}},{key:"unsubscribe",value:function(){var _unsubscribe=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(toRemove){var _this5=this;var _this$subscriptionToC,contractId,eventName,chain,_i,_Object$keys,_contractId,_i2,_Object$keys2,_eventName,_loop,_i3,_Object$keys3,_chain,_i4,_Object$keys4,_eventName2,_loop2,_i5,_Object$keys5;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.log("unsubscribing from \"".concat(JSON.stringify(toRemove),"\""),'debug');if(!(toRemove.hasOwnProperty('subscription')&&this.subscriptionToContractMapping[toRemove.subscription])){_context2.next=10;break;}_this$subscriptionToC=(0,_slicedToArray2["default"])(this.subscriptionToContractMapping[toRemove.subscription],2),contractId=_this$subscriptionToC[0],eventName=_this$subscriptionToC[1];if(!contractId){_context2.next=8;break;}delete this.subscriptionToContractMapping[toRemove.subscription];delete this.contractSubscriptions[contractId][eventName][toRemove.subscription];_context2.next=8;return this.getMutex("".concat(contractId.toLowerCase(),",").concat(eventName)).runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(Object.keys(_this5.contractSubscriptions[contractId][eventName]).length===0)){_context.next=2;break;}return _context.abrupt("return",new Promise(function(resolve,reject){if(_this5.eventEmitter[contractId][eventName]&&_this5.eventEmitter[contractId][eventName].unsubscribe){_this5.eventEmitter[contractId][eventName].unsubscribe(function(error,success){delete _this5.eventEmitter[contractId][eventName];if(!error&&success){resolve();}else{reject("unsubscribing failed; ".concat(error||'no reason given for failure'));}});}else if(_this5.eventEmitter[contractId][eventName]&&_this5.eventEmitter[contractId][eventName].stopWatching){_this5.eventEmitter[contractId][eventName].stopWatching(function(){delete _this5.eventEmitter[contractId][eventName];resolve();});}else{_this5.log("all events already removed for \"".concat(JSON.stringify(toRemove),"\""),'debug');}}));case 2:case"end":return _context.stop();}}},_callee);})));case 8:_context2.next=23;break;case 10:if(!toRemove.hasOwnProperty('contractId')){_context2.next=22;break;}if(!(toRemove.contractId==='all')){_context2.next=17;break;}chain=Promise.resolve();for(_i=0,_Object$keys=Object.keys(this.contractSubscriptions);_i<_Object$keys.length;_i++){_contractId=_Object$keys[_i];for(_i2=0,_Object$keys2=Object.keys(this.contractSubscriptions[_contractId]);_i2<_Object$keys2.length;_i2++){_eventName=_Object$keys2[_i2];_loop=function _loop(){var subscription=_Object$keys3[_i3];chain=chain.then(function(){_this5.unsubscribe({subscription:subscription});});};for(_i3=0,_Object$keys3=Object.keys(this.contractSubscriptions[_contractId][_eventName]);_i3<_Object$keys3.length;_i3++){_loop();}}}return _context2.abrupt("return",chain);case 17:_chain=Promise.resolve();for(_i4=0,_Object$keys4=Object.keys(this.contractSubscriptions[toRemove.contractId]);_i4<_Object$keys4.length;_i4++){_eventName2=_Object$keys4[_i4];_loop2=function _loop2(){var subscription=_Object$keys5[_i5];_chain=_chain.then(function(){_this5.unsubscribe({subscription:subscription});});};for(_i5=0,_Object$keys5=Object.keys(this.contractSubscriptions[toRemove.contractId][_eventName2]);_i5<_Object$keys5.length;_i5++){_loop2();}}return _context2.abrupt("return",_chain);case 20:_context2.next=23;break;case 22:return _context2.abrupt("return",Promise.reject('unsupported unsubscribe criteria'));case 23:case"end":return _context2.stop();}}},_callee2,this);}));function unsubscribe(_x){return _unsubscribe.apply(this,arguments);}return unsubscribe;}()},{key:"ensureSubscription",value:function(){var _ensureSubscription=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(contractId,eventName,eventTarget){var _this6=this;var fromBlock,_args4=arguments;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fromBlock=_args4.length>3&&_args4[3]!==undefined?_args4[3]:this.continueBlock+1;_context4.next=3;return this.getMutex("".concat(contractId.toLowerCase(),",").concat(eventName)).runExclusive((0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!_this6.eventEmitter[contractId][eventName]){_this6.contractInstances[contractId]=eventTarget;_this6.eventEmitter[contractId][eventName]=eventTarget.events?eventTarget.events[eventName]({fromBlock:fromBlock}):eventTarget[eventName](null,{fromBlock:fromBlock});if(_this6.eventEmitter[contractId][eventName].on){_this6.subscribeWeb3Gte1(contractId,eventName,fromBlock);}else{_this6.subscribeWeb3Lt1(contractId,eventName,fromBlock);}}case 1:case"end":return _context3.stop();}}},_callee3);})));case 3:case"end":return _context4.stop();}}},_callee4,this);}));function ensureSubscription(_x2,_x3,_x4){return _ensureSubscription.apply(this,arguments);}return ensureSubscription;}()},{key:"getMutex",value:function getMutex(name){if(!this.mutexes[name]){this.mutexes[name]=new async_mutex_1.Mutex();}return this.mutexes[name];}},{key:"resubscribe",value:function resubscribe(newProvider){for(var _i6=0,_Object$keys6=Object.keys(this.subscriptionToContractMapping);_i6<_Object$keys6.length;_i6++){var subscription=_Object$keys6[_i6];var _this$subscriptionToC2=(0,_slicedToArray2["default"])(this.subscriptionToContractMapping[subscription],2),contractId=_this$subscriptionToC2[0],eventName=_this$subscriptionToC2[1];delete this.eventEmitter[contractId][eventName];}for(var _i7=0,_Object$keys7=Object.keys(this.contractInstances);_i7<_Object$keys7.length;_i7++){var contract=_Object$keys7[_i7];this.contractInstances[contract].setProvider(newProvider);}for(var _i8=0,_Object$keys8=Object.keys(this.subscriptionToContractMapping);_i8<_Object$keys8.length;_i8++){var _subscription=_Object$keys8[_i8];var _this$subscriptionToC3=(0,_slicedToArray2["default"])(this.subscriptionToContractMapping[_subscription],2),_contractId2=_this$subscriptionToC3[0],_eventName3=_this$subscriptionToC3[1];var eventTarget=this.contractInstances[_contractId2];this.ensureSubscription(_contractId2,_eventName3,eventTarget);}}},{key:"subscribeWeb3Gte1",value:function subscribeWeb3Gte1(contractId,eventName,fromBlock){var _this7=this;this.eventEmitter[contractId][eventName].on('data',function(event){_this7.continueBlock=Math.max(event.blockNumber,_this7.continueBlock);if(typeof fromBlock==='number'&&event.blockNumber<fromBlock){return;}Promise.all(Object.keys(_this7.contractSubscriptions[contractId][eventName]).map(function(key){return _this7.contractSubscriptions[contractId][eventName][key](event);}));});}},{key:"subscribeWeb3Lt1",value:function subscribeWeb3Lt1(contractId,eventName,fromBlock){var _this8=this;this.eventEmitter[contractId][eventName].watch(function(error,result){_this8.continueBlock=Math.max(result.blockNumber,_this8.continueBlock);if(typeof fromBlock==='number'&&result.blockNumber<fromBlock){return;}Promise.all(Object.keys(_this8.contractSubscriptions[contractId][eventName]).map(function(key){return _this8.contractSubscriptions[contractId][eventName][key](result);}));});}}]);return EventHub;}(logger_1.Logger);exports.EventHub=EventHub;

},{"./common/logger":712,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/helpers/slicedToArray":745,"@babel/runtime/regenerator":748,"async-mutex":792,"uuid":1090}],792:[function(require,module,exports){
arguments[4][69][0].apply(exports,arguments)
},{"./Mutex":791,"dup":69}],1090:[function(require,module,exports){
arguments[4][676][0].apply(exports,arguments)
},{"./v1":1093,"./v4":1094,"dup":676}],728:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));Object.defineProperty(exports,"__esModule",{value:true});var account_store_1=require("./account-store");var config_1=require("./config");var contract_loader_1=require("./contracts/contract-loader");var crypto_provider_1=require("./encryption/crypto-provider");var description_1=require("./description");var event_hub_1=require("./event-hub");var executor_1=require("./contracts/executor");var key_provider_1=require("./encryption/key-provider");var name_resolver_1=require("./name-resolver");var signer_internal_1=require("./contracts/signer-internal");var unencrypted_1=require("./encryption/unencrypted");;function createDefaultRuntime(_x,_x2,_x3){return _createDefaultRuntime.apply(this,arguments);}function _createDefaultRuntime(){_createDefaultRuntime=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(web3,dfs,runtimeConfig){var contractLoader,accountStore,signer,executor,nameResolver,eventHub,cryptoConfig,cryptoProvider,keyProvider,description;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:contractLoader=new contract_loader_1.ContractLoader({web3:web3});accountStore=new account_store_1.AccountStore({accounts:runtimeConfig.accountMap});signer=new signer_internal_1.SignerInternal({accountStore:accountStore,contractLoader:contractLoader,config:{},web3:web3});executor=new executor_1.Executor({config:config_1.config,signer:signer,web3:web3});_context.next=6;return executor.init({});case 6:nameResolver=new name_resolver_1.NameResolver({config:config_1.config.nameResolver,executor:executor,contractLoader:contractLoader,web3:web3});eventHub=new event_hub_1.EventHub({config:config_1.config.nameResolver,contractLoader:contractLoader,nameResolver:nameResolver});executor.eventHub=eventHub;cryptoConfig={unencrypted:new unencrypted_1.Unencrypted()};cryptoProvider=new crypto_provider_1.CryptoProvider(cryptoConfig);keyProvider=new key_provider_1.KeyProvider(runtimeConfig.keyConfig);description=new description_1.Description({contractLoader:contractLoader,cryptoProvider:cryptoProvider,dfs:dfs,executor:executor,keyProvider:keyProvider,nameResolver:nameResolver,web3:web3});return _context.abrupt("return",{accountStore:accountStore,contractLoader:contractLoader,cryptoProvider:cryptoProvider,description:description,dfs:dfs,executor:executor,keyProvider:keyProvider,nameResolver:nameResolver,signer:signer,web3:web3});case 14:case"end":return _context.stop();}}},_callee);}));return _createDefaultRuntime.apply(this,arguments);}exports.createDefaultRuntime=createDefaultRuntime;;

},{"./account-store":711,"./config":714,"./contracts/contract-loader":715,"./contracts/executor":716,"./contracts/signer-internal":718,"./description":719,"./encryption/crypto-provider":722,"./encryption/key-provider":723,"./encryption/unencrypted":724,"./event-hub":725,"./name-resolver":727,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/regenerator":748}],727:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));Object.defineProperty(exports,"__esModule",{value:true});var prottle=require("prottle");var logger_1=require("./common/logger");var requestWindowSize=200;var NameResolver=function(_logger_1$Logger){(0,_inherits2["default"])(NameResolver,_logger_1$Logger);function NameResolver(options){var _this;(0,_classCallCheck2["default"])(this,NameResolver);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(NameResolver).call(this,options));_this.config=options.config;_this.executor=options.executor;_this.contractLoader=options.contractLoader;_this.web3=options.web3;_this.ensContract=_this.contractLoader.loadContract('AbstractENS',_this.config.ensAddress);_this.log("nameresolver uses ens root domain "+"\"".concat(_this.getDomainName(_this.config.domains.root),"\" ")+" and ENS at ".concat(_this.config.ensAddress),'notice');return _this;}(0,_createClass2["default"])(NameResolver,[{key:"getAddressOrContent",value:function(){var _getAddressOrContent=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(name,type){var getter,node,resolver,contract;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.log("looking up ENS name \"".concat(name,"\""),'debug');_context.t0=type;_context.next=_context.t0==='address'?4:_context.t0==='content'?6:8;break;case 4:getter='addr';return _context.abrupt("break",9);case 6:getter='content';return _context.abrupt("break",9);case 8:throw new Error("unknown or unsupported type given to get in resolver: \"".concat(type,"\""));case 9:node=this.namehash(name);_context.next=12;return this.executor.executeContractCall(this.ensContract,'resolver',node);case 12:resolver=_context.sent;if(!(resolver!=='0x0000000000000000000000000000000000000000')){_context.next=18;break;}contract=this.contractLoader.loadContract('PublicResolver',resolver);return _context.abrupt("return",this.executor.executeContractCall(contract,getter,node));case 18:return _context.abrupt("return",null);case 19:case"end":return _context.stop();}}},_callee,this);}));function getAddressOrContent(_x,_x2){return _getAddressOrContent.apply(this,arguments);}return getAddressOrContent;}()},{key:"getAddress",value:function(){var _getAddress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(name){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this.getAddressOrContent(name,'address'));case 1:case"end":return _context2.stop();}}},_callee2,this);}));function getAddress(_x3){return _getAddress.apply(this,arguments);}return getAddress;}()},{key:"getContent",value:function(){var _getContent=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(name){return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",this.getAddressOrContent(name,'content'));case 1:case"end":return _context3.stop();}}},_callee3,this);}));function getContent(_x4){return _getContent.apply(this,arguments);}return getContent;}()},{key:"setAddressOrContent",value:function(){var _setAddressOrContent=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(name,value,accountId,domainOwnerId,type){var setter,split,parentName,getOptions,finalNodeOwner,nodeNotDirectlyOwned,nameOwner,parentOwner,msg,resolverAddress,resolver;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=type;_context4.next=_context4.t0==='address'?3:_context4.t0==='content'?5:7;break;case 3:setter='setAddr';return _context4.abrupt("break",8);case 5:setter='setContent';return _context4.abrupt("break",8);case 7:throw new Error("unknown or unsupported type given to set in resolver: \"".concat(type,"\""));case 8:split=name.split('.');parentName=split.slice(1).join('.');getOptions=function getOptions(){return{from:accountId,gas:200000};};finalNodeOwner=domainOwnerId||accountId;_context4.next=14;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(name));case 14:nameOwner=_context4.sent;if(!(nameOwner!==accountId)){_context4.next=28;break;}_context4.next=18;return this.executor.executeContractCall(this.ensContract,'owner',this.namehash(parentName));case 18:parentOwner=_context4.sent;if(!(parentOwner!==accountId)){_context4.next=23;break;}msg="cannot set ens value neither node \"".concat(name,"\" nor its parent owned by \"").concat(accountId,"\"");this.log(msg,'error');throw new Error(msg);case 23:if(!value){_context4.next=27;break;}_context4.next=26;return this.executor.executeContractTransaction(this.ensContract,'setSubnodeOwner',getOptions(),this.namehash(parentName),this.sha3(name.substr(0,name.indexOf('.'))),accountId);case 26:nameOwner=accountId;case 27:nodeNotDirectlyOwned=true;case 28:_context4.next=30;return this.executor.executeContractCall(this.ensContract,'resolver',this.namehash(name));case 30:resolverAddress=_context4.sent;if(!value){_context4.next=45;break;}if(!(resolverAddress==='0x0000000000000000000000000000000000000000')){_context4.next=40;break;}if(!(split.length>2)){_context4.next=37;break;}_context4.next=36;return this.executor.executeContractCall(this.ensContract,'resolver',this.namehash(parentName));case 36:resolverAddress=_context4.sent;case 37:if(resolverAddress==='0x0000000000000000000000000000000000000000'){resolverAddress=this.config.ensResolver;}_context4.next=40;return this.executor.executeContractTransaction(this.ensContract,'setResolver',getOptions(),this.namehash(name),resolverAddress);case 40:_context4.next=42;return this.contractLoader.loadContract('PublicResolver',resolverAddress);case 42:resolver=_context4.sent;_context4.next=45;return this.executor.executeContractTransaction(resolver,setter,getOptions(),this.namehash(name),value);case 45:if(!(nameOwner!==finalNodeOwner)){_context4.next=54;break;}this.log("assigning node to specified user \"".concat(finalNodeOwner,"\""),'debug');if(!nodeNotDirectlyOwned){_context4.next=52;break;}_context4.next=50;return this.executor.executeContractTransaction(this.ensContract,'setSubnodeOwner',getOptions(),this.namehash(parentName),this.sha3(name.substr(0,name.indexOf('.'))),finalNodeOwner);case 50:_context4.next=54;break;case 52:_context4.next=54;return this.executor.executeContractTransaction(this.ensContract,'setOwner',getOptions(),this.namehash(name),finalNodeOwner);case 54:case"end":return _context4.stop();}}},_callee4,this);}));function setAddressOrContent(_x5,_x6,_x7,_x8,_x9){return _setAddressOrContent.apply(this,arguments);}return setAddressOrContent;}()},{key:"setAddress",value:function setAddress(name,address,accountId){var domainOwnerId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this.log("setting address \"".concat(address,"\" to name \"").concat(name,"\""),'info');return this.setAddressOrContent(name,address,accountId,domainOwnerId,'address');}},{key:"setContent",value:function setContent(name,content,accountId){var domainOwnerId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this.log("setting content \"".concat(content,"\" to name \"").concat(name,"\""),'info');return this.setAddressOrContent(name,content,accountId,domainOwnerId,'content');}},{key:"getFactory",value:function(){var _getFactory=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(contractName){var _this2=this;var factoryDomain;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:factoryDomain=[contractName].concat(this.config.domains.factory.map(function(label){return _this2.config.labels[label];})).join('.').toLowerCase();return _context5.abrupt("return",this.getAddress(factoryDomain));case 2:case"end":return _context5.stop();}}},_callee5,this);}));function getFactory(_x10){return _getFactory.apply(this,arguments);}return getFactory;}()},{key:"getDomainName",value:function getDomainName(domainConfig){var _this3=this;if(Array.isArray(domainConfig)){for(var _len=arguments.length,subLabels=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){subLabels[_key-1]=arguments[_key];}return subLabels.filter(function(label){return label;}).concat(domainConfig.map(function(label){return _this3.config.labels[label];})).join('.').toLowerCase();}else{return domainConfig;}}},{key:"getArrayFromIndexContract",value:function(){var _getArrayFromIndexContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(indexContract,listHash){var _this4=this;var retrievers,chain,triesLeft,lastModified,results,bytes32address,_args6=arguments;return _regenerator["default"].wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:retrievers=_args6.length>2&&_args6[2]!==undefined?_args6[2]:{listEntryGet:'listEntryGet',listLastModified:'listLastModified',listLength:'listLength'};chain=_args6.length>3&&_args6[3]!==undefined?_args6[3]:Promise.resolve();triesLeft=_args6.length>4&&_args6[4]!==undefined?_args6[4]:10;results=[];bytes32address=/^0x0{24}(.*)/;this.log('retrieving list contract elements without limitation for maxcount','debug');return _context6.abrupt("return",chain.then(function(){return _this4.executor.executeContractCall(indexContract,retrievers.listLength,listHash);}).then(function(length){if(length==='0'){return'0';}else{return _this4.executor.executeContractCall(indexContract,retrievers.listLastModified,listHash);}}).then(function(result){if(result==='0'){return[];}else{lastModified=result;return _this4.executor.executeContractCall(indexContract,retrievers.listLength,listHash).then(function(length){var retrievals=(0,_toConsumableArray2["default"])(Array(parseInt(length,10))).map(function(_,i){return function(){return _this4.executor.executeContractCall(indexContract,retrievers.listEntryGet,listHash,i).then(function(element){results.push(element.replace(bytes32address,'0x$1'));});};});return retrievals.reduce(function(innerChain,fun){return innerChain.then(fun);},chain);}).then(function(){return _this4.executor.executeContractCall(indexContract,retrievers.listLastModified,listHash);}).then(function(newLastMofified){if(lastModified.toString()===newLastMofified.toString()){return results;}else if(triesLeft){_this4.log("getArrayFromIndexContract failed with ".concat(lastModified!==newLastMofified),'debug');return _this4.getArrayFromIndexContract(indexContract,listHash,retrievers,chain,triesLeft-1);}else{_this4.log("getArrayFromIndexContract couldn't complete after 10 tries with ".concat(lastModified!==newLastMofified),'warning');throw new Error('max tries for retrieving index data exceeded');}});}}));case 7:case"end":return _context6.stop();}}},_callee6,this);}));function getArrayFromIndexContract(_x11,_x12){return _getArrayFromIndexContract.apply(this,arguments);}return getArrayFromIndexContract;}()},{key:"getArrayFromListContract",value:function(){var _getArrayFromListContract=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(listContract){var _this5=this;var count,offset,reverse,chain,triesLeft,lastModified,results,bytes32address,_args7=arguments;return _regenerator["default"].wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:count=_args7.length>1&&_args7[1]!==undefined?_args7[1]:10;offset=_args7.length>2&&_args7[2]!==undefined?_args7[2]:0;reverse=_args7.length>3&&_args7[3]!==undefined?_args7[3]:false;chain=_args7.length>4&&_args7[4]!==undefined?_args7[4]:Promise.resolve();triesLeft=_args7.length>5&&_args7[5]!==undefined?_args7[5]:10;results=[];bytes32address=/^0x0{24}(.*)/;this.log('retrieving list contract elements without limitation for maxcount','warning');return _context7.abrupt("return",chain.then(function(){return _this5.executor.executeContractCall(listContract,'length');}).then(function(length){var listLength=length.toString();if(listLength==='0'){return'0';}else{return _this5.executor.executeContractCall(listContract,'lastModified');}}).then(function(result){var listLastModified=result.toString();if(listLastModified==='0'){return[];}else{lastModified=listLastModified;return _this5.executor.executeContractCall(listContract,'length').then(function(lengthString){var length=parseInt(lengthString.toString(),10);var indices=[];if(reverse){var stop=Math.max(-1,length-1-count-offset);for(var i=length-1-offset;i>stop;i--){indices.push(i);}}else{var _stop=Math.min(count,length);for(var _i=offset;_i<_stop;_i++){indices.push(_i);}}var retrievals=indices.map(function(i){return function(){return _this5.executor.executeContractCall(listContract,'get',i).then(function(element){return results.push(element.replace(bytes32address,'0x$1'));});};});return prottle(requestWindowSize,retrievals);}).then(function(){return _this5.executor.executeContractCall(listContract,'lastModified');}).then(function(newLastMofified){if(lastModified===newLastMofified.toString()){return results;}else if(triesLeft){_this5.log("getArrayFromIndexContract failed with ".concat(lastModified!==newLastMofified),'debug');return _this5.getArrayFromListContract(listContract,count,offset,reverse,chain,triesLeft-1);}else{_this5.log("getArrayFromIndexContract couldn't complete after 10 tries with ".concat(lastModified!==newLastMofified),'warning');throw new Error('max tries for retrieving index data exceeded');}});}}));case 9:case"end":return _context7.stop();}}},_callee7,this);}));function getArrayFromListContract(_x13){return _getArrayFromListContract.apply(this,arguments);}return getArrayFromListContract;}()},{key:"getArrayFromUintMapping",value:function(){var _getArrayFromUintMapping=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(contract,countRetriever,elementRetriever){var count,offset,reverse,results,length,indicesToGet,retrievals,_args9=arguments;return _regenerator["default"].wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:count=_args9.length>3&&_args9[3]!==undefined?_args9[3]:10;offset=_args9.length>4&&_args9[4]!==undefined?_args9[4]:0;reverse=_args9.length>5&&_args9[5]!==undefined?_args9[5]:false;results=[];_context9.t0=parseInt;_context9.next=7;return countRetriever();case 7:_context9.t1=_context9.sent;length=(0,_context9.t0)(_context9.t1,10);if(!(length!==0)){_context9.next=18;break;}indicesToGet=(0,_toConsumableArray2["default"])(Array(length)).map(function(_,i){return i;});if(reverse){indicesToGet=indicesToGet.reverse();}indicesToGet=indicesToGet.slice(offset,offset+count);results=new Array(indicesToGet.length);retrievals=indicesToGet.map(function(i,j){return(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(){return _regenerator["default"].wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",elementRetriever(i).then(function(elem){results[j]=elem;}));case 1:case"end":return _context8.stop();}}},_callee8);}));});if(!retrievals.length){_context9.next=18;break;}_context9.next=18;return prottle(requestWindowSize,retrievals);case 18:return _context9.abrupt("return",results);case 19:case"end":return _context9.stop();}}},_callee9);}));function getArrayFromUintMapping(_x14,_x15,_x16){return _getArrayFromUintMapping.apply(this,arguments);}return getArrayFromUintMapping;}()},{key:"sha3",value:function sha3(input){return this.web3.utils.sha3(input).toString();}},{key:"soliditySha3",value:function soliditySha3(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return this.web3.utils.soliditySha3.apply(this.web3.utils.soliditySha3,args);}},{key:"namehash",value:function namehash(inputName){function dropPrefix0x(input){return input.replace(/^0x/,'');}var node='';for(var i=0;i<32;i++){node+='00';}if(inputName){var labels=inputName.split('.');for(var _i2=labels.length-1;_i2>=0;_i2--){var labelSha=this.sha3(labels[_i2]);var buffer=new Buffer(dropPrefix0x(node)+dropPrefix0x(labelSha),'hex');node=this.sha3(buffer);}}else{node="0x".concat(node);}return node;}},{key:"bytes32ToAddress",value:function bytes32ToAddress(hash){return"0x".concat(hash.substr(26));}}]);return NameResolver;}(logger_1.Logger);exports.NameResolver=NameResolver;

}).call(this,require("buffer").Buffer)

},{"./common/logger":712,"@babel/runtime/helpers/asyncToGenerator":733,"@babel/runtime/helpers/classCallCheck":734,"@babel/runtime/helpers/createClass":735,"@babel/runtime/helpers/getPrototypeOf":736,"@babel/runtime/helpers/inherits":737,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/possibleConstructorReturn":743,"@babel/runtime/helpers/toConsumableArray":746,"@babel/runtime/regenerator":748,"buffer":1133,"prottle":1060}],749:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var compileSchema=require('./compile'),resolve=require('./compile/resolve'),Cache=require('./cache'),SchemaObject=require('./compile/schema_obj'),stableStringify=require('fast-json-stable-stringify'),formats=require('./compile/formats'),rules=require('./compile/rules'),$dataMetaSchema=require('./data'),util=require('./compile/util');module.exports=Ajv;Ajv.prototype.validate=validate;Ajv.prototype.compile=compile;Ajv.prototype.addSchema=addSchema;Ajv.prototype.addMetaSchema=addMetaSchema;Ajv.prototype.validateSchema=validateSchema;Ajv.prototype.getSchema=getSchema;Ajv.prototype.removeSchema=removeSchema;Ajv.prototype.addFormat=addFormat;Ajv.prototype.errorsText=errorsText;Ajv.prototype._addSchema=_addSchema;Ajv.prototype._compile=_compile;Ajv.prototype.compileAsync=require('./compile/async');var customKeyword=require('./keyword');Ajv.prototype.addKeyword=customKeyword.add;Ajv.prototype.getKeyword=customKeyword.get;Ajv.prototype.removeKeyword=customKeyword.remove;Ajv.prototype.validateKeyword=customKeyword.validate;var errorClasses=require('./compile/error_classes');Ajv.ValidationError=errorClasses.Validation;Ajv.MissingRefError=errorClasses.MissingRef;Ajv.$dataMetaSchema=$dataMetaSchema;var META_SCHEMA_ID='http://json-schema.org/draft-07/schema';var META_IGNORE_OPTIONS=['removeAdditional','useDefaults','coerceTypes','strictDefaults'];var META_SUPPORT_DATA=['/properties'];function Ajv(opts){if(!(this instanceof Ajv))return new Ajv(opts);opts=this._opts=util.copy(opts)||{};setLogger(this);this._schemas={};this._refs={};this._fragments={};this._formats=formats(opts.format);this._cache=opts.cache||new Cache();this._loadingSchemas={};this._compilations=[];this.RULES=rules();this._getId=chooseGetId(opts);opts.loopRequired=opts.loopRequired||Infinity;if(opts.errorDataPath=='property')opts._errorDataPathProperty=true;if(opts.serialize===undefined)opts.serialize=stableStringify;this._metaOpts=getMetaSchemaOptions(this);if(opts.formats)addInitialFormats(this);addDefaultMetaSchema(this);if((0,_typeof2["default"])(opts.meta)=='object')this.addMetaSchema(opts.meta);if(opts.nullable)this.addKeyword('nullable',{metaSchema:{type:'boolean'}});addInitialSchemas(this);}function validate(schemaKeyRef,data){var v;if(typeof schemaKeyRef=='string'){v=this.getSchema(schemaKeyRef);if(!v)throw new Error('no schema with key or ref "'+schemaKeyRef+'"');}else{var schemaObj=this._addSchema(schemaKeyRef);v=schemaObj.validate||this._compile(schemaObj);}var valid=v(data);if(v.$async!==true)this.errors=v.errors;return valid;}function compile(schema,_meta){var schemaObj=this._addSchema(schema,undefined,_meta);return schemaObj.validate||this._compile(schemaObj);}function addSchema(schema,key,_skipValidation,_meta){if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){this.addSchema(schema[i],undefined,_skipValidation,_meta);}return this;}var id=this._getId(schema);if(id!==undefined&&typeof id!='string')throw new Error('schema id must be string');key=resolve.normalizeId(key||id);checkUnique(this,key);this._schemas[key]=this._addSchema(schema,_skipValidation,_meta,true);return this;}function addMetaSchema(schema,key,skipValidation){this.addSchema(schema,key,skipValidation,true);return this;}function validateSchema(schema,throwOrLogError){var $schema=schema.$schema;if($schema!==undefined&&typeof $schema!='string')throw new Error('$schema must be a string');$schema=$schema||this._opts.defaultMeta||defaultMeta(this);if(!$schema){this.logger.warn('meta-schema not available');this.errors=null;return true;}var valid=this.validate($schema,schema);if(!valid&&throwOrLogError){var message='schema is invalid: '+this.errorsText();if(this._opts.validateSchema=='log')this.logger.error(message);else throw new Error(message);}return valid;}function defaultMeta(self){var meta=self._opts.meta;self._opts.defaultMeta=(0,_typeof2["default"])(meta)=='object'?self._getId(meta)||meta:self.getSchema(META_SCHEMA_ID)?META_SCHEMA_ID:undefined;return self._opts.defaultMeta;}function getSchema(keyRef){var schemaObj=_getSchemaObj(this,keyRef);switch((0,_typeof2["default"])(schemaObj)){case'object':return schemaObj.validate||this._compile(schemaObj);case'string':return this.getSchema(schemaObj);case'undefined':return _getSchemaFragment(this,keyRef);}}function _getSchemaFragment(self,ref){var res=resolve.schema.call(self,{schema:{}},ref);if(res){var schema=res.schema,root=res.root,baseId=res.baseId;var v=compileSchema.call(self,schema,root,undefined,baseId);self._fragments[ref]=new SchemaObject({ref:ref,fragment:true,schema:schema,root:root,baseId:baseId,validate:v});return v;}}function _getSchemaObj(self,keyRef){keyRef=resolve.normalizeId(keyRef);return self._schemas[keyRef]||self._refs[keyRef]||self._fragments[keyRef];}function removeSchema(schemaKeyRef){if(schemaKeyRef instanceof RegExp){_removeAllSchemas(this,this._schemas,schemaKeyRef);_removeAllSchemas(this,this._refs,schemaKeyRef);return this;}switch((0,_typeof2["default"])(schemaKeyRef)){case'undefined':_removeAllSchemas(this,this._schemas);_removeAllSchemas(this,this._refs);this._cache.clear();return this;case'string':var schemaObj=_getSchemaObj(this,schemaKeyRef);if(schemaObj)this._cache.del(schemaObj.cacheKey);delete this._schemas[schemaKeyRef];delete this._refs[schemaKeyRef];return this;case'object':var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schemaKeyRef):schemaKeyRef;this._cache.del(cacheKey);var id=this._getId(schemaKeyRef);if(id){id=resolve.normalizeId(id);delete this._schemas[id];delete this._refs[id];}}return this;}function _removeAllSchemas(self,schemas,regex){for(var keyRef in schemas){var schemaObj=schemas[keyRef];if(!schemaObj.meta&&(!regex||regex.test(keyRef))){self._cache.del(schemaObj.cacheKey);delete schemas[keyRef];}}}function _addSchema(schema,skipValidation,meta,shouldAddSchema){if((0,_typeof2["default"])(schema)!='object'&&typeof schema!='boolean')throw new Error('schema should be object or boolean');var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schema):schema;var cached=this._cache.get(cacheKey);if(cached)return cached;shouldAddSchema=shouldAddSchema||this._opts.addUsedSchema!==false;var id=resolve.normalizeId(this._getId(schema));if(id&&shouldAddSchema)checkUnique(this,id);var willValidate=this._opts.validateSchema!==false&&!skipValidation;var recursiveMeta;if(willValidate&&!(recursiveMeta=id&&id==resolve.normalizeId(schema.$schema)))this.validateSchema(schema,true);var localRefs=resolve.ids.call(this,schema);var schemaObj=new SchemaObject({id:id,schema:schema,localRefs:localRefs,cacheKey:cacheKey,meta:meta});if(id[0]!='#'&&shouldAddSchema)this._refs[id]=schemaObj;this._cache.put(cacheKey,schemaObj);if(willValidate&&recursiveMeta)this.validateSchema(schema,true);return schemaObj;}function _compile(schemaObj,root){if(schemaObj.compiling){schemaObj.validate=callValidate;callValidate.schema=schemaObj.schema;callValidate.errors=null;callValidate.root=root?root:callValidate;if(schemaObj.schema.$async===true)callValidate.$async=true;return callValidate;}schemaObj.compiling=true;var currentOpts;if(schemaObj.meta){currentOpts=this._opts;this._opts=this._metaOpts;}var v;try{v=compileSchema.call(this,schemaObj.schema,root,schemaObj.localRefs);}catch(e){delete schemaObj.validate;throw e;}finally{schemaObj.compiling=false;if(schemaObj.meta)this._opts=currentOpts;}schemaObj.validate=v;schemaObj.refs=v.refs;schemaObj.refVal=v.refVal;schemaObj.root=v.root;return v;function callValidate(){var _validate=schemaObj.validate;var result=_validate.apply(this,arguments);callValidate.errors=_validate.errors;return result;}}function chooseGetId(opts){switch(opts.schemaId){case'auto':return _get$IdOrId;case'id':return _getId;default:return _get$Id;}}function _getId(schema){if(schema.$id)this.logger.warn('schema $id ignored',schema.$id);return schema.id;}function _get$Id(schema){if(schema.id)this.logger.warn('schema id ignored',schema.id);return schema.$id;}function _get$IdOrId(schema){if(schema.$id&&schema.id&&schema.$id!=schema.id)throw new Error('schema $id is different from id');return schema.$id||schema.id;}function errorsText(errors,options){errors=errors||this.errors;if(!errors)return'No errors';options=options||{};var separator=options.separator===undefined?', ':options.separator;var dataVar=options.dataVar===undefined?'data':options.dataVar;var text='';for(var i=0;i<errors.length;i++){var e=errors[i];if(e)text+=dataVar+e.dataPath+' '+e.message+separator;}return text.slice(0,-separator.length);}function addFormat(name,format){if(typeof format=='string')format=new RegExp(format);this._formats[name]=format;return this;}function addDefaultMetaSchema(self){var $dataSchema;if(self._opts.$data){$dataSchema=require('./refs/data.json');self.addMetaSchema($dataSchema,$dataSchema.$id,true);}if(self._opts.meta===false)return;var metaSchema=require('./refs/json-schema-draft-07.json');if(self._opts.$data)metaSchema=$dataMetaSchema(metaSchema,META_SUPPORT_DATA);self.addMetaSchema(metaSchema,META_SCHEMA_ID,true);self._refs['http://json-schema.org/schema']=META_SCHEMA_ID;}function addInitialSchemas(self){var optsSchemas=self._opts.schemas;if(!optsSchemas)return;if(Array.isArray(optsSchemas))self.addSchema(optsSchemas);else for(var key in optsSchemas){self.addSchema(optsSchemas[key],key);}}function addInitialFormats(self){for(var name in self._opts.formats){var format=self._opts.formats[name];self.addFormat(name,format);}}function checkUnique(self,id){if(self._schemas[id]||self._refs[id])throw new Error('schema with key or id "'+id+'" already exists');}function getMetaSchemaOptions(self){var metaOpts=util.copy(self._opts);for(var i=0;i<META_IGNORE_OPTIONS.length;i++){delete metaOpts[META_IGNORE_OPTIONS[i]];}return metaOpts;}function setLogger(self){var logger=self._opts.logger;if(logger===false){self.logger={log:noop,warn:noop,error:noop};}else{if(logger===undefined)logger=console;if(!((0,_typeof2["default"])(logger)=='object'&&logger.log&&logger.warn&&logger.error))throw new Error('logger must implement log, warn and error methods');self.logger=logger;}}function noop(){}

},{"./cache":750,"./compile":754,"./compile/async":751,"./compile/error_classes":752,"./compile/formats":753,"./compile/resolve":755,"./compile/rules":756,"./compile/schema_obj":757,"./compile/util":759,"./data":760,"./keyword":788,"./refs/data.json":789,"./refs/json-schema-draft-07.json":790,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"fast-json-stable-stringify":880}],730:[function(require,module,exports){
arguments[4][44][0].apply(exports,arguments)
},{"dup":44}],731:[function(require,module,exports){
arguments[4][45][0].apply(exports,arguments)
},{"dup":45}],732:[function(require,module,exports){
arguments[4][46][0].apply(exports,arguments)
},{"dup":46}],744:[function(require,module,exports){
arguments[4][62][0].apply(exports,arguments)
},{"dup":62}],739:[function(require,module,exports){
arguments[4][56][0].apply(exports,arguments)
},{"dup":56}],740:[function(require,module,exports){
arguments[4][57][0].apply(exports,arguments)
},{"dup":57}],741:[function(require,module,exports){
arguments[4][58][0].apply(exports,arguments)
},{"dup":58}],742:[function(require,module,exports){
arguments[4][59][0].apply(exports,arguments)
},{"dup":59}],1069:[function(require,module,exports){
arguments[4][534][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":534}],750:[function(require,module,exports){
'use strict';var Cache=module.exports=function Cache(){this._cache={};};Cache.prototype.put=function Cache_put(key,value){this._cache[key]=value;};Cache.prototype.get=function Cache_get(key){return this._cache[key];};Cache.prototype.del=function Cache_del(key){delete this._cache[key];};Cache.prototype.clear=function Cache_clear(){this._cache={};};

},{}],760:[function(require,module,exports){
'use strict';var KEYWORDS=['multipleOf','maximum','exclusiveMaximum','minimum','exclusiveMinimum','maxLength','minLength','pattern','additionalItems','maxItems','minItems','uniqueItems','maxProperties','minProperties','required','additionalProperties','enum','format','const'];module.exports=function(metaSchema,keywordsJsonPointers){for(var i=0;i<keywordsJsonPointers.length;i++){metaSchema=JSON.parse(JSON.stringify(metaSchema));var segments=keywordsJsonPointers[i].split('/');var keywords=metaSchema;var j;for(j=1;j<segments.length;j++){keywords=keywords[segments[j]];}for(j=0;j<KEYWORDS.length;j++){var key=KEYWORDS[j];var schema=keywords[key];if(schema){keywords[key]={anyOf:[schema,{$ref:'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#'}]};}}}return metaSchema;};

},{}],790:[function(require,module,exports){
module.exports={
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://json-schema.org/draft-07/schema#",
    "title": "Core schema meta-schema",
    "definitions": {
        "schemaArray": {
            "type": "array",
            "minItems": 1,
            "items": { "$ref": "#" }
        },
        "nonNegativeInteger": {
            "type": "integer",
            "minimum": 0
        },
        "nonNegativeIntegerDefault0": {
            "allOf": [
                { "$ref": "#/definitions/nonNegativeInteger" },
                { "default": 0 }
            ]
        },
        "simpleTypes": {
            "enum": [
                "array",
                "boolean",
                "integer",
                "null",
                "number",
                "object",
                "string"
            ]
        },
        "stringArray": {
            "type": "array",
            "items": { "type": "string" },
            "uniqueItems": true,
            "default": []
        }
    },
    "type": ["object", "boolean"],
    "properties": {
        "$id": {
            "type": "string",
            "format": "uri-reference"
        },
        "$schema": {
            "type": "string",
            "format": "uri"
        },
        "$ref": {
            "type": "string",
            "format": "uri-reference"
        },
        "$comment": {
            "type": "string"
        },
        "title": {
            "type": "string"
        },
        "description": {
            "type": "string"
        },
        "default": true,
        "readOnly": {
            "type": "boolean",
            "default": false
        },
        "examples": {
            "type": "array",
            "items": true
        },
        "multipleOf": {
            "type": "number",
            "exclusiveMinimum": 0
        },
        "maximum": {
            "type": "number"
        },
        "exclusiveMaximum": {
            "type": "number"
        },
        "minimum": {
            "type": "number"
        },
        "exclusiveMinimum": {
            "type": "number"
        },
        "maxLength": { "$ref": "#/definitions/nonNegativeInteger" },
        "minLength": { "$ref": "#/definitions/nonNegativeIntegerDefault0" },
        "pattern": {
            "type": "string",
            "format": "regex"
        },
        "additionalItems": { "$ref": "#" },
        "items": {
            "anyOf": [
                { "$ref": "#" },
                { "$ref": "#/definitions/schemaArray" }
            ],
            "default": true
        },
        "maxItems": { "$ref": "#/definitions/nonNegativeInteger" },
        "minItems": { "$ref": "#/definitions/nonNegativeIntegerDefault0" },
        "uniqueItems": {
            "type": "boolean",
            "default": false
        },
        "contains": { "$ref": "#" },
        "maxProperties": { "$ref": "#/definitions/nonNegativeInteger" },
        "minProperties": { "$ref": "#/definitions/nonNegativeIntegerDefault0" },
        "required": { "$ref": "#/definitions/stringArray" },
        "additionalProperties": { "$ref": "#" },
        "definitions": {
            "type": "object",
            "additionalProperties": { "$ref": "#" },
            "default": {}
        },
        "properties": {
            "type": "object",
            "additionalProperties": { "$ref": "#" },
            "default": {}
        },
        "patternProperties": {
            "type": "object",
            "additionalProperties": { "$ref": "#" },
            "propertyNames": { "format": "regex" },
            "default": {}
        },
        "dependencies": {
            "type": "object",
            "additionalProperties": {
                "anyOf": [
                    { "$ref": "#" },
                    { "$ref": "#/definitions/stringArray" }
                ]
            }
        },
        "propertyNames": { "$ref": "#" },
        "const": true,
        "enum": {
            "type": "array",
            "items": true,
            "minItems": 1,
            "uniqueItems": true
        },
        "type": {
            "anyOf": [
                { "$ref": "#/definitions/simpleTypes" },
                {
                    "type": "array",
                    "items": { "$ref": "#/definitions/simpleTypes" },
                    "minItems": 1,
                    "uniqueItems": true
                }
            ]
        },
        "format": { "type": "string" },
        "contentMediaType": { "type": "string" },
        "contentEncoding": { "type": "string" },
        "if": {"$ref": "#"},
        "then": {"$ref": "#"},
        "else": {"$ref": "#"},
        "allOf": { "$ref": "#/definitions/schemaArray" },
        "anyOf": { "$ref": "#/definitions/schemaArray" },
        "oneOf": { "$ref": "#/definitions/schemaArray" },
        "not": { "$ref": "#" }
    },
    "default": true
}

},{}],789:[function(require,module,exports){
module.exports={
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",
    "description": "Meta-schema for $data reference (JSON Schema extension proposal)",
    "type": "object",
    "required": [ "$data" ],
    "properties": {
        "$data": {
            "type": "string",
            "anyOf": [
                { "format": "relative-json-pointer" }, 
                { "format": "json-pointer" }
            ]
        }
    },
    "additionalProperties": false
}

},{}],757:[function(require,module,exports){
'use strict';var util=require('./util');module.exports=SchemaObject;function SchemaObject(obj){util.copy(obj,this);}

},{"./util":759}],751:[function(require,module,exports){
'use strict';var MissingRefError=require('./error_classes').MissingRef;module.exports=compileAsync;function compileAsync(schema,meta,callback){var self=this;if(typeof this._opts.loadSchema!='function')throw new Error('options.loadSchema should be a function');if(typeof meta=='function'){callback=meta;meta=undefined;}var p=loadMetaSchemaOf(schema).then(function(){var schemaObj=self._addSchema(schema,undefined,meta);return schemaObj.validate||_compileAsync(schemaObj);});if(callback){p.then(function(v){callback(null,v);},callback);}return p;function loadMetaSchemaOf(sch){var $schema=sch.$schema;return $schema&&!self.getSchema($schema)?compileAsync.call(self,{$ref:$schema},true):Promise.resolve();}function _compileAsync(schemaObj){try{return self._compile(schemaObj);}catch(e){if(e instanceof MissingRefError)return loadMissingSchema(e);throw e;}function loadMissingSchema(e){var ref=e.missingSchema;if(added(ref))throw new Error('Schema '+ref+' is loaded but '+e.missingRef+' cannot be resolved');var schemaPromise=self._loadingSchemas[ref];if(!schemaPromise){schemaPromise=self._loadingSchemas[ref]=self._opts.loadSchema(ref);schemaPromise.then(removePromise,removePromise);}return schemaPromise.then(function(sch){if(!added(ref)){return loadMetaSchemaOf(sch).then(function(){if(!added(ref))self.addSchema(sch,ref,undefined,meta);});}}).then(function(){return _compileAsync(schemaObj);});function removePromise(){delete self._loadingSchemas[ref];}function added(ref){return self._refs[ref]||self._schemas[ref];}}}}

},{"./error_classes":752}],752:[function(require,module,exports){
'use strict';var resolve=require('./resolve');module.exports={Validation:errorSubclass(ValidationError),MissingRef:errorSubclass(MissingRefError)};function ValidationError(errors){this.message='validation failed';this.errors=errors;this.ajv=this.validation=true;}MissingRefError.message=function(baseId,ref){return'can\'t resolve reference '+ref+' from id '+baseId;};function MissingRefError(baseId,ref,message){this.message=message||MissingRefError.message(baseId,ref);this.missingRef=resolve.url(baseId,ref);this.missingSchema=resolve.normalizeId(resolve.fullPath(this.missingRef));}function errorSubclass(Subclass){Subclass.prototype=Object.create(Error.prototype);Subclass.prototype.constructor=Subclass;return Subclass;}

},{"./resolve":755}],753:[function(require,module,exports){
'use strict';var util=require('./util');var DATE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/;var DAYS=[0,31,28,31,30,31,30,31,31,30,31,30,31];var TIME=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i;var HOSTNAME=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;var URI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URIREF=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URITEMPLATE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i;var URL=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i;var UUID=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;var JSON_POINTER=/^(?:\/(?:[^~/]|~0|~1)*)*$/;var JSON_POINTER_URI_FRAGMENT=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;var RELATIVE_JSON_POINTER=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;module.exports=formats;function formats(mode){mode=mode=='full'?'full':'fast';return util.copy(formats[mode]);}formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,'date-time':/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,'uri-reference':/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,'uri-template':URITEMPLATE,url:URL,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:UUID,'json-pointer':JSON_POINTER,'json-pointer-uri-fragment':JSON_POINTER_URI_FRAGMENT,'relative-json-pointer':RELATIVE_JSON_POINTER};formats.full={date:date,time:time,'date-time':date_time,uri:uri,'uri-reference':URIREF,'uri-template':URITEMPLATE,url:URL,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:hostname,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:UUID,'json-pointer':JSON_POINTER,'json-pointer-uri-fragment':JSON_POINTER_URI_FRAGMENT,'relative-json-pointer':RELATIVE_JSON_POINTER};function isLeapYear(year){return year%4===0&&(year%100!==0||year%400===0);}function date(str){var matches=str.match(DATE);if(!matches)return false;var year=+matches[1];var month=+matches[2];var day=+matches[3];return month>=1&&month<=12&&day>=1&&day<=(month==2&&isLeapYear(year)?29:DAYS[month]);}function time(str,full){var matches=str.match(TIME);if(!matches)return false;var hour=matches[1];var minute=matches[2];var second=matches[3];var timeZone=matches[5];return(hour<=23&&minute<=59&&second<=59||hour==23&&minute==59&&second==60)&&(!full||timeZone);}var DATE_TIME_SEPARATOR=/t|\s/i;function date_time(str){var dateTime=str.split(DATE_TIME_SEPARATOR);return dateTime.length==2&&date(dateTime[0])&&time(dateTime[1],true);}function hostname(str){return str.length<=255&&HOSTNAME.test(str);}var NOT_URI_FRAGMENT=/\/|:/;function uri(str){return NOT_URI_FRAGMENT.test(str)&&URI.test(str);}var Z_ANCHOR=/[^\\]\\Z/;function regex(str){if(Z_ANCHOR.test(str))return false;try{new RegExp(str);return true;}catch(e){return false;}}

},{"./util":759}],759:[function(require,module,exports){
'use strict';module.exports={copy:copy,checkDataType:checkDataType,checkDataTypes:checkDataTypes,coerceToTypes:coerceToTypes,toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:require('fast-deep-equal'),ucs2length:require('./ucs2length'),varOccurences:varOccurences,varReplace:varReplace,cleanUpCode:cleanUpCode,finalCleanUpCode:finalCleanUpCode,schemaHasRules:schemaHasRules,schemaHasRulesExcept:schemaHasRulesExcept,schemaUnknownRules:schemaUnknownRules,toQuotedString:toQuotedString,getPathExpr:getPathExpr,getPath:getPath,getData:getData,unescapeFragment:unescapeFragment,unescapeJsonPointer:unescapeJsonPointer,escapeFragment:escapeFragment,escapeJsonPointer:escapeJsonPointer};function copy(o,to){to=to||{};for(var key in o){to[key]=o[key];}return to;}function checkDataType(dataType,data,negate){var EQUAL=negate?' !== ':' === ',AND=negate?' || ':' && ',OK=negate?'!':'',NOT=negate?'':'!';switch(dataType){case'null':return data+EQUAL+'null';case'array':return OK+'Array.isArray('+data+')';case'object':return'('+OK+data+AND+'typeof '+data+EQUAL+'"object"'+AND+NOT+'Array.isArray('+data+'))';case'integer':return'(typeof '+data+EQUAL+'"number"'+AND+NOT+'('+data+' % 1)'+AND+data+EQUAL+data+')';default:return'typeof '+data+EQUAL+'"'+dataType+'"';}}function checkDataTypes(dataTypes,data){switch(dataTypes.length){case 1:return checkDataType(dataTypes[0],data,true);default:var code='';var types=toHash(dataTypes);if(types.array&&types.object){code=types["null"]?'(':'(!'+data+' || ';code+='typeof '+data+' !== "object")';delete types["null"];delete types.array;delete types.object;}if(types.number)delete types.integer;for(var t in types){code+=(code?' && ':'')+checkDataType(t,data,true);}return code;}}var COERCE_TO_TYPES=toHash(['string','number','integer','boolean','null']);function coerceToTypes(optionCoerceTypes,dataTypes){if(Array.isArray(dataTypes)){var types=[];for(var i=0;i<dataTypes.length;i++){var t=dataTypes[i];if(COERCE_TO_TYPES[t])types[types.length]=t;else if(optionCoerceTypes==='array'&&t==='array')types[types.length]=t;}if(types.length)return types;}else if(COERCE_TO_TYPES[dataTypes]){return[dataTypes];}else if(optionCoerceTypes==='array'&&dataTypes==='array'){return['array'];}}function toHash(arr){var hash={};for(var i=0;i<arr.length;i++){hash[arr[i]]=true;}return hash;}var IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var SINGLE_QUOTE=/'|\\/g;function getProperty(key){return typeof key=='number'?'['+key+']':IDENTIFIER.test(key)?'.'+key:"['"+escapeQuotes(key)+"']";}function escapeQuotes(str){return str.replace(SINGLE_QUOTE,'\\$&').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/\f/g,'\\f').replace(/\t/g,'\\t');}function varOccurences(str,dataVar){dataVar+='[^0-9]';var matches=str.match(new RegExp(dataVar,'g'));return matches?matches.length:0;}function varReplace(str,dataVar,expr){dataVar+='([^0-9])';expr=expr.replace(/\$/g,'$$$$');return str.replace(new RegExp(dataVar,'g'),expr+'$1');}var EMPTY_ELSE=/else\s*{\s*}/g,EMPTY_IF_NO_ELSE=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,EMPTY_IF_WITH_ELSE=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;function cleanUpCode(out){return out.replace(EMPTY_ELSE,'').replace(EMPTY_IF_NO_ELSE,'').replace(EMPTY_IF_WITH_ELSE,'if (!($1))');}var ERRORS_REGEXP=/[^v.]errors/g,REMOVE_ERRORS=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,REMOVE_ERRORS_ASYNC=/var errors = 0;|var vErrors = null;/g,RETURN_VALID='return errors === 0;',RETURN_TRUE='validate.errors = null; return true;',RETURN_ASYNC=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,RETURN_DATA_ASYNC='return data;',ROOTDATA_REGEXP=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,REMOVE_ROOTDATA=/if \(rootData === undefined\) rootData = data;/;function finalCleanUpCode(out,async){var matches=out.match(ERRORS_REGEXP);if(matches&&matches.length==2){out=async?out.replace(REMOVE_ERRORS_ASYNC,'').replace(RETURN_ASYNC,RETURN_DATA_ASYNC):out.replace(REMOVE_ERRORS,'').replace(RETURN_VALID,RETURN_TRUE);}matches=out.match(ROOTDATA_REGEXP);if(!matches||matches.length!==3)return out;return out.replace(REMOVE_ROOTDATA,'');}function schemaHasRules(schema,rules){if(typeof schema=='boolean')return!schema;for(var key in schema){if(rules[key])return true;}}function schemaHasRulesExcept(schema,rules,exceptKeyword){if(typeof schema=='boolean')return!schema&&exceptKeyword!='not';for(var key in schema){if(key!=exceptKeyword&&rules[key])return true;}}function schemaUnknownRules(schema,rules){if(typeof schema=='boolean')return;for(var key in schema){if(!rules[key])return key;}}function toQuotedString(str){return'\''+escapeQuotes(str)+'\'';}function getPathExpr(currentPath,expr,jsonPointers,isNumber){var path=jsonPointers?'\'/\' + '+expr+(isNumber?'':'.replace(/~/g, \'~0\').replace(/\\//g, \'~1\')'):isNumber?'\'[\' + '+expr+' + \']\'':'\'[\\\'\' + '+expr+' + \'\\\']\'';return joinPaths(currentPath,path);}function getPath(currentPath,prop,jsonPointers){var path=jsonPointers?toQuotedString('/'+escapeJsonPointer(prop)):toQuotedString(getProperty(prop));return joinPaths(currentPath,path);}var JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/;var RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData($data,lvl,paths){var up,jsonPointer,data,matches;if($data==='')return'rootData';if($data[0]=='/'){if(!JSON_POINTER.test($data))throw new Error('Invalid JSON-pointer: '+$data);jsonPointer=$data;data='rootData';}else{matches=$data.match(RELATIVE_JSON_POINTER);if(!matches)throw new Error('Invalid JSON-pointer: '+$data);up=+matches[1];jsonPointer=matches[2];if(jsonPointer=='#'){if(up>=lvl)throw new Error('Cannot access property/index '+up+' levels up, current level is '+lvl);return paths[lvl-up];}if(up>lvl)throw new Error('Cannot access data '+up+' levels up, current level is '+lvl);data='data'+(lvl-up||'');if(!jsonPointer)return data;}var expr=data;var segments=jsonPointer.split('/');for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment){data+=getProperty(unescapeJsonPointer(segment));expr+=' && '+data;}}return expr;}function joinPaths(a,b){if(a=='""')return b;return(a+' + '+b).replace(/' \+ '/g,'');}function unescapeFragment(str){return unescapeJsonPointer(decodeURIComponent(str));}function escapeFragment(str){return encodeURIComponent(escapeJsonPointer(str));}function escapeJsonPointer(str){return str.replace(/~/g,'~0').replace(/\//g,'~1');}function unescapeJsonPointer(str){return str.replace(/~1/g,'/').replace(/~0/g,'~');}

},{"./ucs2length":758,"fast-deep-equal":879}],788:[function(require,module,exports){
'use strict';var IDENTIFIER=/^[a-z_$][a-z0-9_$-]*$/i;var customRuleCode=require('./dotjs/custom');var definitionSchema=require('./definition_schema');module.exports={add:addKeyword,get:getKeyword,remove:removeKeyword,validate:validateKeyword};function addKeyword(keyword,definition){var RULES=this.RULES;if(RULES.keywords[keyword])throw new Error('Keyword '+keyword+' is already defined');if(!IDENTIFIER.test(keyword))throw new Error('Keyword '+keyword+' is not a valid identifier');if(definition){this.validateKeyword(definition,true);var dataType=definition.type;if(Array.isArray(dataType)){for(var i=0;i<dataType.length;i++){_addRule(keyword,dataType[i],definition);}}else{_addRule(keyword,dataType,definition);}var metaSchema=definition.metaSchema;if(metaSchema){if(definition.$data&&this._opts.$data){metaSchema={anyOf:[metaSchema,{'$ref':'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#'}]};}definition.validateSchema=this.compile(metaSchema,true);}}RULES.keywords[keyword]=RULES.all[keyword]=true;function _addRule(keyword,dataType,definition){var ruleGroup;for(var i=0;i<RULES.length;i++){var rg=RULES[i];if(rg.type==dataType){ruleGroup=rg;break;}}if(!ruleGroup){ruleGroup={type:dataType,rules:[]};RULES.push(ruleGroup);}var rule={keyword:keyword,definition:definition,custom:true,code:customRuleCode,"implements":definition["implements"]};ruleGroup.rules.push(rule);RULES.custom[keyword]=rule;}return this;}function getKeyword(keyword){var rule=this.RULES.custom[keyword];return rule?rule.definition:this.RULES.keywords[keyword]||false;}function removeKeyword(keyword){var RULES=this.RULES;delete RULES.keywords[keyword];delete RULES.all[keyword];delete RULES.custom[keyword];for(var i=0;i<RULES.length;i++){var rules=RULES[i].rules;for(var j=0;j<rules.length;j++){if(rules[j].keyword==keyword){rules.splice(j,1);break;}}}return this;}function validateKeyword(definition,throwError){validateKeyword.errors=null;var v=this._validateKeyword=this._validateKeyword||this.compile(definitionSchema,true);if(v(definition))return true;validateKeyword.errors=v.errors;if(throwError)throw new Error('custom keyword definition is invalid: '+this.errorsText(v.errors));else return false;}

},{"./definition_schema":761,"./dotjs/custom":771}],880:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function(data,opts){if(!opts)opts={};if(typeof opts==='function')opts={cmp:opts};var cycles=typeof opts.cycles==='boolean'?opts.cycles:false;var cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj);};};}(opts.cmp);var seen=[];return function stringify(node){if(node&&node.toJSON&&typeof node.toJSON==='function'){node=node.toJSON();}if(node===undefined)return;if(typeof node=='number')return isFinite(node)?''+node:'null';if((0,_typeof2["default"])(node)!=='object')return JSON.stringify(node);var i,out;if(Array.isArray(node)){out='[';for(i=0;i<node.length;i++){if(i)out+=',';out+=stringify(node[i])||'null';}return out+']';}if(node===null)return'null';if(seen.indexOf(node)!==-1){if(cycles)return JSON.stringify('__cycle__');throw new TypeError('Converting circular structure to JSON');}var seenIndex=seen.push(node)-1;var keys=Object.keys(node).sort(cmp&&cmp(node));out='';for(i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node[key]);if(!value)continue;if(out)out+=',';out+=JSON.stringify(key)+':'+value;}seen.splice(seenIndex,1);return'{'+out+'}';}(data);};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],754:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var resolve=require('./resolve'),util=require('./util'),errorClasses=require('./error_classes'),stableStringify=require('fast-json-stable-stringify');var validateGenerator=require('../dotjs/validate');var ucs2length=util.ucs2length;var equal=require('fast-deep-equal');var ValidationError=errorClasses.Validation;module.exports=compile;function compile(schema,root,localRefs,baseId){var self=this,opts=this._opts,refVal=[undefined],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema:schema,refVal:refVal,refs:refs};var c=checkCompiling.call(this,schema,root,baseId);var compilation=this._compilations[c.index];if(c.compiling)return compilation.callValidate=callValidate;var formats=this._formats;var RULES=this.RULES;try{var v=localCompile(schema,root,localRefs,baseId);compilation.validate=v;var cv=compilation.callValidate;if(cv){cv.schema=v.schema;cv.errors=null;cv.refs=v.refs;cv.refVal=v.refVal;cv.root=v.root;cv.$async=v.$async;if(opts.sourceCode)cv.source=v.source;}return v;}finally{endCompiling.call(this,schema,root,baseId);}function callValidate(){var validate=compilation.validate;var result=validate.apply(this,arguments);callValidate.errors=validate.errors;return result;}function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===true;var sourceCode=validateGenerator({isTop:true,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:'',errSchemaPath:'#',errorPath:'""',MissingRefError:errorClasses.MissingRef,RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:opts,formats:formats,logger:self.logger,self:self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)+vars(defaults,defaultCode)+vars(customRules,customRuleCode)+sourceCode;if(opts.processCode)sourceCode=opts.processCode(sourceCode);var validate;try{var makeValidate=new Function('self','RULES','formats','root','refVal','defaults','customRules','equal','ucs2length','ValidationError',sourceCode);validate=makeValidate(self,RULES,formats,root,refVal,defaults,customRules,equal,ucs2length,ValidationError);refVal[0]=validate;}catch(e){self.logger.error('Error compiling schema, function code:',sourceCode);throw e;}validate.schema=_schema;validate.errors=null;validate.refs=refs;validate.refVal=refVal;validate.root=isRoot?validate:_root;if($async)validate.$async=true;if(opts.sourceCode===true){validate.source={code:sourceCode,patterns:patterns,defaults:defaults};}return validate;}function resolveRef(baseId,ref,isRoot){ref=resolve.url(baseId,ref);var refIndex=refs[ref];var _refVal,refCode;if(refIndex!==undefined){_refVal=refVal[refIndex];refCode='refVal['+refIndex+']';return resolvedRef(_refVal,refCode);}if(!isRoot&&root.refs){var rootRefId=root.refs[ref];if(rootRefId!==undefined){_refVal=root.refVal[rootRefId];refCode=addLocalRef(ref,_refVal);return resolvedRef(_refVal,refCode);}}refCode=addLocalRef(ref);var v=resolve.call(self,localCompile,root,ref);if(v===undefined){var localSchema=localRefs&&localRefs[ref];if(localSchema){v=resolve.inlineRef(localSchema,opts.inlineRefs)?localSchema:compile.call(self,localSchema,root,localRefs,baseId);}}if(v===undefined){removeLocalRef(ref);}else{replaceLocalRef(ref,v);return resolvedRef(v,refCode);}}function addLocalRef(ref,v){var refId=refVal.length;refVal[refId]=v;refs[ref]=refId;return'refVal'+refId;}function removeLocalRef(ref){delete refs[ref];}function replaceLocalRef(ref,v){var refId=refs[ref];refVal[refId]=v;}function resolvedRef(refVal,code){return(0,_typeof2["default"])(refVal)=='object'||typeof refVal=='boolean'?{code:code,schema:refVal,inline:true}:{code:code,$async:refVal&&!!refVal.$async};}function usePattern(regexStr){var index=patternsHash[regexStr];if(index===undefined){index=patternsHash[regexStr]=patterns.length;patterns[index]=regexStr;}return'pattern'+index;}function useDefault(value){switch((0,_typeof2["default"])(value)){case'boolean':case'number':return''+value;case'string':return util.toQuotedString(value);case'object':if(value===null)return'null';var valueStr=stableStringify(value);var index=defaultsHash[valueStr];if(index===undefined){index=defaultsHash[valueStr]=defaults.length;defaults[index]=value;}return'default'+index;}}function useCustomRule(rule,schema,parentSchema,it){if(self._opts.validateSchema!==false){var deps=rule.definition.dependencies;if(deps&&!deps.every(function(keyword){return Object.prototype.hasOwnProperty.call(parentSchema,keyword);}))throw new Error('parent schema must have all required keywords: '+deps.join(','));var validateSchema=rule.definition.validateSchema;if(validateSchema){var valid=validateSchema(schema);if(!valid){var message='keyword schema is invalid: '+self.errorsText(validateSchema.errors);if(self._opts.validateSchema=='log')self.logger.error(message);else throw new Error(message);}}}var compile=rule.definition.compile,inline=rule.definition.inline,macro=rule.definition.macro;var validate;if(compile){validate=compile.call(self,schema,parentSchema,it);}else if(macro){validate=macro.call(self,schema,parentSchema,it);if(opts.validateSchema!==false)self.validateSchema(validate,true);}else if(inline){validate=inline.call(self,it,rule.keyword,schema,parentSchema);}else{validate=rule.definition.validate;if(!validate)return;}if(validate===undefined)throw new Error('custom keyword "'+rule.keyword+'"failed to compile');var index=customRules.length;customRules[index]=validate;return{code:'customRule'+index,validate:validate};}}function checkCompiling(schema,root,baseId){var index=compIndex.call(this,schema,root,baseId);if(index>=0)return{index:index,compiling:true};index=this._compilations.length;this._compilations[index]={schema:schema,root:root,baseId:baseId};return{index:index,compiling:false};}function endCompiling(schema,root,baseId){var i=compIndex.call(this,schema,root,baseId);if(i>=0)this._compilations.splice(i,1);}function compIndex(schema,root,baseId){for(var i=0;i<this._compilations.length;i++){var c=this._compilations[i];if(c.schema==schema&&c.root==root&&c.baseId==baseId)return i;}return-1;}function patternCode(i,patterns){return'var pattern'+i+' = new RegExp('+util.toQuotedString(patterns[i])+');';}function defaultCode(i){return'var default'+i+' = defaults['+i+'];';}function refValCode(i,refVal){return refVal[i]===undefined?'':'var refVal'+i+' = refVal['+i+'];';}function customRuleCode(i){return'var customRule'+i+' = customRules['+i+'];';}function vars(arr,statement){if(!arr.length)return'';var code='';for(var i=0;i<arr.length;i++){code+=statement(i,arr);}return code;}

},{"../dotjs/validate":787,"./error_classes":752,"./resolve":755,"./util":759,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"fast-deep-equal":879,"fast-json-stable-stringify":880}],755:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var URI=require('uri-js'),equal=require('fast-deep-equal'),util=require('./util'),SchemaObject=require('./schema_obj'),traverse=require('json-schema-traverse');module.exports=resolve;resolve.normalizeId=normalizeId;resolve.fullPath=getFullPath;resolve.url=resolveUrl;resolve.ids=resolveIds;resolve.inlineRef=inlineRef;resolve.schema=resolveSchema;function resolve(compile,root,ref){var refVal=this._refs[ref];if(typeof refVal=='string'){if(this._refs[refVal])refVal=this._refs[refVal];else return resolve.call(this,compile,root,refVal);}refVal=refVal||this._schemas[ref];if(refVal instanceof SchemaObject){return inlineRef(refVal.schema,this._opts.inlineRefs)?refVal.schema:refVal.validate||this._compile(refVal);}var res=resolveSchema.call(this,root,ref);var schema,v,baseId;if(res){schema=res.schema;root=res.root;baseId=res.baseId;}if(schema instanceof SchemaObject){v=schema.validate||compile.call(this,schema.schema,root,undefined,baseId);}else if(schema!==undefined){v=inlineRef(schema,this._opts.inlineRefs)?schema:compile.call(this,schema,root,undefined,baseId);}return v;}function resolveSchema(root,ref){var p=URI.parse(ref),refPath=_getFullPath(p),baseId=getFullPath(this._getId(root.schema));if(Object.keys(root.schema).length===0||refPath!==baseId){var id=normalizeId(refPath);var refVal=this._refs[id];if(typeof refVal=='string'){return resolveRecursive.call(this,root,refVal,p);}else if(refVal instanceof SchemaObject){if(!refVal.validate)this._compile(refVal);root=refVal;}else{refVal=this._schemas[id];if(refVal instanceof SchemaObject){if(!refVal.validate)this._compile(refVal);if(id==normalizeId(ref))return{schema:refVal,root:root,baseId:baseId};root=refVal;}else{return;}}if(!root.schema)return;baseId=getFullPath(this._getId(root.schema));}return getJsonPointer.call(this,p,baseId,root.schema,root);}function resolveRecursive(root,ref,parsedRef){var res=resolveSchema.call(this,root,ref);if(res){var schema=res.schema;var baseId=res.baseId;root=res.root;var id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);return getJsonPointer.call(this,parsedRef,baseId,schema,root);}}var PREVENT_SCOPE_CHANGE=util.toHash(['properties','patternProperties','enum','dependencies','definitions']);function getJsonPointer(parsedRef,baseId,schema,root){parsedRef.fragment=parsedRef.fragment||'';if(parsedRef.fragment.slice(0,1)!='/')return;var parts=parsedRef.fragment.split('/');for(var i=1;i<parts.length;i++){var part=parts[i];if(part){part=util.unescapeFragment(part);schema=schema[part];if(schema===undefined)break;var id;if(!PREVENT_SCOPE_CHANGE[part]){id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);if(schema.$ref){var $ref=resolveUrl(baseId,schema.$ref);var res=resolveSchema.call(this,root,$ref);if(res){schema=res.schema;root=res.root;baseId=res.baseId;}}}}}if(schema!==undefined&&schema!==root.schema)return{schema:schema,root:root,baseId:baseId};}var SIMPLE_INLINED=util.toHash(['type','format','pattern','maxLength','minLength','maxProperties','minProperties','maxItems','minItems','maximum','minimum','uniqueItems','multipleOf','required','enum']);function inlineRef(schema,limit){if(limit===false)return false;if(limit===undefined||limit===true)return checkNoRef(schema);else if(limit)return countKeys(schema)<=limit;}function checkNoRef(schema){var item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if((0,_typeof2["default"])(item)=='object'&&!checkNoRef(item))return false;}}else{for(var key in schema){if(key=='$ref')return false;item=schema[key];if((0,_typeof2["default"])(item)=='object'&&!checkNoRef(item))return false;}}return true;}function countKeys(schema){var count=0,item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if((0,_typeof2["default"])(item)=='object')count+=countKeys(item);if(count==Infinity)return Infinity;}}else{for(var key in schema){if(key=='$ref')return Infinity;if(SIMPLE_INLINED[key]){count++;}else{item=schema[key];if((0,_typeof2["default"])(item)=='object')count+=countKeys(item)+1;if(count==Infinity)return Infinity;}}}return count;}function getFullPath(id,normalize){if(normalize!==false)id=normalizeId(id);var p=URI.parse(id);return _getFullPath(p);}function _getFullPath(p){return URI.serialize(p).split('#')[0]+'#';}var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(id){return id?id.replace(TRAILING_SLASH_HASH,''):'';}function resolveUrl(baseId,id){id=normalizeId(id);return URI.resolve(baseId,id);}function resolveIds(schema){var schemaId=normalizeId(this._getId(schema));var baseIds={'':schemaId};var fullPaths={'':getFullPath(schemaId,false)};var localRefs={};var self=this;traverse(schema,{allKeys:true},function(sch,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(jsonPtr==='')return;var id=self._getId(sch);var baseId=baseIds[parentJsonPtr];var fullPath=fullPaths[parentJsonPtr]+'/'+parentKeyword;if(keyIndex!==undefined)fullPath+='/'+(typeof keyIndex=='number'?keyIndex:util.escapeFragment(keyIndex));if(typeof id=='string'){id=baseId=normalizeId(baseId?URI.resolve(baseId,id):id);var refVal=self._refs[id];if(typeof refVal=='string')refVal=self._refs[refVal];if(refVal&&refVal.schema){if(!equal(sch,refVal.schema))throw new Error('id "'+id+'" resolves to more than one schema');}else if(id!=normalizeId(fullPath)){if(id[0]=='#'){if(localRefs[id]&&!equal(sch,localRefs[id]))throw new Error('id "'+id+'" resolves to more than one schema');localRefs[id]=sch;}else{self._refs[id]=fullPath;}}}baseIds[jsonPtr]=baseId;fullPaths[jsonPtr]=fullPath;});return localRefs;}

},{"./schema_obj":757,"./util":759,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"fast-deep-equal":879,"json-schema-traverse":898,"uri-js":1088}],756:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var ruleModules=require('../dotjs'),toHash=require('./util').toHash;module.exports=function rules(){var RULES=[{type:'number',rules:[{'maximum':['exclusiveMaximum']},{'minimum':['exclusiveMinimum']},'multipleOf','format']},{type:'string',rules:['maxLength','minLength','pattern','format']},{type:'array',rules:['maxItems','minItems','items','contains','uniqueItems']},{type:'object',rules:['maxProperties','minProperties','required','dependencies','propertyNames',{'properties':['additionalProperties','patternProperties']}]},{rules:['$ref','const','enum','not','anyOf','oneOf','allOf','if']}];var ALL=['type','$comment'];var KEYWORDS=['$schema','$id','id','$data','$async','title','description','default','definitions','examples','readOnly','writeOnly','contentMediaType','contentEncoding','additionalItems','then','else'];var TYPES=['number','integer','string','array','object','boolean','null'];RULES.all=toHash(ALL);RULES.types=toHash(TYPES);RULES.forEach(function(group){group.rules=group.rules.map(function(keyword){var implKeywords;if((0,_typeof2["default"])(keyword)=='object'){var key=Object.keys(keyword)[0];implKeywords=keyword[key];keyword=key;implKeywords.forEach(function(k){ALL.push(k);RULES.all[k]=true;});}ALL.push(keyword);var rule=RULES.all[keyword]={keyword:keyword,code:ruleModules[keyword],"implements":implKeywords};return rule;});RULES.all.$comment={keyword:'$comment',code:ruleModules.$comment};if(group.type)RULES.types[group.type]=group;});RULES.keywords=toHash(ALL.concat(KEYWORDS));RULES.custom={};return RULES;};

},{"../dotjs":776,"./util":759,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],787:[function(require,module,exports){
'use strict';module.exports=function generate_validate(it,$keyword,$ruleType){var out='';var $async=it.schema.$async===true,$refKeywords=it.util.schemaHasRulesExcept(it.schema,it.RULES.all,'$ref'),$id=it.self._getId(it.schema);if(it.opts.strictKeywords){var $unknownKwd=it.util.schemaUnknownRules(it.schema,it.RULES.keywords);if($unknownKwd){var $keywordsMsg='unknown keyword: '+$unknownKwd;if(it.opts.strictKeywords==='log')it.logger.warn($keywordsMsg);else throw new Error($keywordsMsg);}}if(it.isTop){out+=' var validate = ';if($async){it.async=true;out+='async ';}out+='function(data, dataPath, parentData, parentDataProperty, rootData) { \'use strict\'; ';if($id&&(it.opts.sourceCode||it.opts.processCode)){out+=' '+('/\*# sourceURL='+$id+' */')+' ';}}if(typeof it.schema=='boolean'||!($refKeywords||it.schema.$ref)){var $keyword='false schema';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;if(it.schema===false){if(it.isTop){$breakOnError=true;}else{out+=' var '+$valid+' = false; ';}var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'false schema')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'boolean schema is false\' ';}if(it.opts.verbose){out+=' , schema: false , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}}else{if(it.isTop){if($async){out+=' return data; ';}else{out+=' validate.errors = null; return true; ';}}else{out+=' var '+$valid+' = true; ';}}if(it.isTop){out+=' }; return validate; ';}return out;}if(it.isTop){var $top=it.isTop,$lvl=it.level=0,$dataLvl=it.dataLevel=0,$data='data';it.rootId=it.resolve.fullPath(it.self._getId(it.root.schema));it.baseId=it.baseId||it.rootId;delete it.isTop;it.dataPathArr=[undefined];if(it.schema["default"]!==undefined&&it.opts.useDefaults&&it.opts.strictDefaults){var $defaultMsg='default is ignored in the schema root';if(it.opts.strictDefaults==='log')it.logger.warn($defaultMsg);else throw new Error($defaultMsg);}out+=' var vErrors = null; ';out+=' var errors = 0;     ';out+=' if (rootData === undefined) rootData = data; ';}else{var $lvl=it.level,$dataLvl=it.dataLevel,$data='data'+($dataLvl||'');if($id)it.baseId=it.resolve.url(it.baseId,$id);if($async&&!it.async)throw new Error('async schema in sync schema');out+=' var errs_'+$lvl+' = errors;';}var $valid='valid'+$lvl,$breakOnError=!it.opts.allErrors,$closingBraces1='',$closingBraces2='';var $errorKeyword;var $typeSchema=it.schema.type,$typeIsArray=Array.isArray($typeSchema);if($typeSchema&&it.opts.nullable&&it.schema.nullable===true){if($typeIsArray){if($typeSchema.indexOf('null')==-1)$typeSchema=$typeSchema.concat('null');}else if($typeSchema!='null'){$typeSchema=[$typeSchema,'null'];$typeIsArray=true;}}if($typeIsArray&&$typeSchema.length==1){$typeSchema=$typeSchema[0];$typeIsArray=false;}if(it.schema.$ref&&$refKeywords){if(it.opts.extendRefs=='fail'){throw new Error('$ref: validation keywords used in schema at path "'+it.errSchemaPath+'" (see option extendRefs)');}else if(it.opts.extendRefs!==true){$refKeywords=false;it.logger.warn('$ref: keywords ignored in schema at path "'+it.errSchemaPath+'"');}}if(it.schema.$comment&&it.opts.$comment){out+=' '+it.RULES.all.$comment.code(it,'$comment');}if($typeSchema){if(it.opts.coerceTypes){var $coerceToTypes=it.util.coerceToTypes(it.opts.coerceTypes,$typeSchema);}var $rulesGroup=it.RULES.types[$typeSchema];if($coerceToTypes||$typeIsArray||$rulesGroup===true||$rulesGroup&&!$shouldUseGroup($rulesGroup)){var $schemaPath=it.schemaPath+'.type',$errSchemaPath=it.errSchemaPath+'/type';var $schemaPath=it.schemaPath+'.type',$errSchemaPath=it.errSchemaPath+'/type',$method=$typeIsArray?'checkDataTypes':'checkDataType';out+=' if ('+it.util[$method]($typeSchema,$data,true)+') { ';if($coerceToTypes){var $dataType='dataType'+$lvl,$coerced='coerced'+$lvl;out+=' var '+$dataType+' = typeof '+$data+'; ';if(it.opts.coerceTypes=='array'){out+=' if ('+$dataType+' == \'object\' && Array.isArray('+$data+')) '+$dataType+' = \'array\'; ';}out+=' var '+$coerced+' = undefined; ';var $bracesCoercion='';var arr1=$coerceToTypes;if(arr1){var $type,$i=-1,l1=arr1.length-1;while($i<l1){$type=arr1[$i+=1];if($i){out+=' if ('+$coerced+' === undefined) { ';$bracesCoercion+='}';}if(it.opts.coerceTypes=='array'&&$type!='array'){out+=' if ('+$dataType+' == \'array\' && '+$data+'.length == 1) { '+$coerced+' = '+$data+' = '+$data+'[0]; '+$dataType+' = typeof '+$data+';  } ';}if($type=='string'){out+=' if ('+$dataType+' == \'number\' || '+$dataType+' == \'boolean\') '+$coerced+' = \'\' + '+$data+'; else if ('+$data+' === null) '+$coerced+' = \'\'; ';}else if($type=='number'||$type=='integer'){out+=' if ('+$dataType+' == \'boolean\' || '+$data+' === null || ('+$dataType+' == \'string\' && '+$data+' && '+$data+' == +'+$data+' ';if($type=='integer'){out+=' && !('+$data+' % 1)';}out+=')) '+$coerced+' = +'+$data+'; ';}else if($type=='boolean'){out+=' if ('+$data+' === \'false\' || '+$data+' === 0 || '+$data+' === null) '+$coerced+' = false; else if ('+$data+' === \'true\' || '+$data+' === 1) '+$coerced+' = true; ';}else if($type=='null'){out+=' if ('+$data+' === \'\' || '+$data+' === 0 || '+$data+' === false) '+$coerced+' = null; ';}else if(it.opts.coerceTypes=='array'&&$type=='array'){out+=' if ('+$dataType+' == \'string\' || '+$dataType+' == \'number\' || '+$dataType+' == \'boolean\' || '+$data+' == null) '+$coerced+' = ['+$data+']; ';}}}out+=' '+$bracesCoercion+' if ('+$coerced+' === undefined) {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'type')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { type: \'';if($typeIsArray){out+=''+$typeSchema.join(",");}else{out+=''+$typeSchema;}out+='\' } ';if(it.opts.messages!==false){out+=' , message: \'should be ';if($typeIsArray){out+=''+$typeSchema.join(",");}else{out+=''+$typeSchema;}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } else {  ';var $parentData=$dataLvl?'data'+($dataLvl-1||''):'parentData',$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:'parentDataProperty';out+=' '+$data+' = '+$coerced+'; ';if(!$dataLvl){out+='if ('+$parentData+' !== undefined)';}out+=' '+$parentData+'['+$parentDataProperty+'] = '+$coerced+'; } ';}else{var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'type')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { type: \'';if($typeIsArray){out+=''+$typeSchema.join(",");}else{out+=''+$typeSchema;}out+='\' } ';if(it.opts.messages!==false){out+=' , message: \'should be ';if($typeIsArray){out+=''+$typeSchema.join(",");}else{out+=''+$typeSchema;}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}}out+=' } ';}}if(it.schema.$ref&&!$refKeywords){out+=' '+it.RULES.all.$ref.code(it,'$ref')+' ';if($breakOnError){out+=' } if (errors === ';if($top){out+='0';}else{out+='errs_'+$lvl;}out+=') { ';$closingBraces2+='}';}}else{var arr2=it.RULES;if(arr2){var $rulesGroup,i2=-1,l2=arr2.length-1;while(i2<l2){$rulesGroup=arr2[i2+=1];if($shouldUseGroup($rulesGroup)){if($rulesGroup.type){out+=' if ('+it.util.checkDataType($rulesGroup.type,$data)+') { ';}if(it.opts.useDefaults){if($rulesGroup.type=='object'&&it.schema.properties){var $schema=it.schema.properties,$schemaKeys=Object.keys($schema);var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if($sch["default"]!==undefined){var $passData=$data+it.util.getProperty($propertyKey);if(it.compositeRule){if(it.opts.strictDefaults){var $defaultMsg='default is ignored for: '+$passData;if(it.opts.strictDefaults==='log')it.logger.warn($defaultMsg);else throw new Error($defaultMsg);}}else{out+=' if ('+$passData+' === undefined ';if(it.opts.useDefaults=='empty'){out+=' || '+$passData+' === null || '+$passData+' === \'\' ';}out+=' ) '+$passData+' = ';if(it.opts.useDefaults=='shared'){out+=' '+it.useDefault($sch["default"])+' ';}else{out+=' '+JSON.stringify($sch["default"])+' ';}out+='; ';}}}}}else if($rulesGroup.type=='array'&&Array.isArray(it.schema.items)){var arr4=it.schema.items;if(arr4){var $sch,$i=-1,l4=arr4.length-1;while($i<l4){$sch=arr4[$i+=1];if($sch["default"]!==undefined){var $passData=$data+'['+$i+']';if(it.compositeRule){if(it.opts.strictDefaults){var $defaultMsg='default is ignored for: '+$passData;if(it.opts.strictDefaults==='log')it.logger.warn($defaultMsg);else throw new Error($defaultMsg);}}else{out+=' if ('+$passData+' === undefined ';if(it.opts.useDefaults=='empty'){out+=' || '+$passData+' === null || '+$passData+' === \'\' ';}out+=' ) '+$passData+' = ';if(it.opts.useDefaults=='shared'){out+=' '+it.useDefault($sch["default"])+' ';}else{out+=' '+JSON.stringify($sch["default"])+' ';}out+='; ';}}}}}}var arr5=$rulesGroup.rules;if(arr5){var $rule,i5=-1,l5=arr5.length-1;while(i5<l5){$rule=arr5[i5+=1];if($shouldUseRule($rule)){var $code=$rule.code(it,$rule.keyword,$rulesGroup.type);if($code){out+=' '+$code+' ';if($breakOnError){$closingBraces1+='}';}}}}}if($breakOnError){out+=' '+$closingBraces1+' ';$closingBraces1='';}if($rulesGroup.type){out+=' } ';if($typeSchema&&$typeSchema===$rulesGroup.type&&!$coerceToTypes){out+=' else { ';var $schemaPath=it.schemaPath+'.type',$errSchemaPath=it.errSchemaPath+'/type';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'type')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { type: \'';if($typeIsArray){out+=''+$typeSchema.join(",");}else{out+=''+$typeSchema;}out+='\' } ';if(it.opts.messages!==false){out+=' , message: \'should be ';if($typeIsArray){out+=''+$typeSchema.join(",");}else{out+=''+$typeSchema;}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } ';}}if($breakOnError){out+=' if (errors === ';if($top){out+='0';}else{out+='errs_'+$lvl;}out+=') { ';$closingBraces2+='}';}}}}}if($breakOnError){out+=' '+$closingBraces2+' ';}if($top){if($async){out+=' if (errors === 0) return data;           ';out+=' else throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; ';out+=' return errors === 0;       ';}out+=' }; return validate;';}else{out+=' var '+$valid+' = errors === errs_'+$lvl+';';}out=it.util.cleanUpCode(out);if($top){out=it.util.finalCleanUpCode(out,$async);}function $shouldUseGroup($rulesGroup){var rules=$rulesGroup.rules;for(var i=0;i<rules.length;i++){if($shouldUseRule(rules[i]))return true;}}function $shouldUseRule($rule){return it.schema[$rule.keyword]!==undefined||$rule["implements"]&&$ruleImplementsSomeKeyword($rule);}function $ruleImplementsSomeKeyword($rule){var impl=$rule["implements"];for(var i=0;i<impl.length;i++){if(it.schema[impl[i]]!==undefined)return true;}}return out;};

},{}],879:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var isArray=Array.isArray;var keyList=Object.keys;var hasProp=Object.prototype.hasOwnProperty;module.exports=function equal(a,b){if(a===b)return true;if(a&&b&&(0,_typeof2["default"])(a)=='object'&&(0,_typeof2["default"])(b)=='object'){var arrA=isArray(a),arrB=isArray(b),i,length,key;if(arrA&&arrB){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;){if(!equal(a[i],b[i]))return false;}return true;}if(arrA!=arrB)return false;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA!=dateB)return false;if(dateA&&dateB)return a.getTime()==b.getTime();var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA!=regexpB)return false;if(regexpA&&regexpB)return a.toString()==b.toString();var keys=keyList(a);length=keys.length;if(length!==keyList(b).length)return false;for(i=length;i--!==0;){if(!hasProp.call(b,keys[i]))return false;}for(i=length;i--!==0;){key=keys[i];if(!equal(a[key],b[key]))return false;}return true;}return a!==a&&b!==b;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],898:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var traverse=module.exports=function(schema,opts,cb){if(typeof opts=='function'){cb=opts;opts={};}cb=opts.cb||cb;var pre=typeof cb=='function'?cb:cb.pre||function(){};var post=cb.post||function(){};_traverse(opts,pre,post,schema,'',schema);};traverse.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true};traverse.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};traverse.propsKeywords={definitions:true,properties:true,patternProperties:true,dependencies:true};traverse.skipKeywords={"default":true,"enum":true,"const":true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse(opts,pre,post,schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(schema&&(0,_typeof2["default"])(schema)=='object'&&!Array.isArray(schema)){pre(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);for(var key in schema){var sch=schema[key];if(Array.isArray(sch)){if(key in traverse.arrayKeywords){for(var i=0;i<sch.length;i++){_traverse(opts,pre,post,sch[i],jsonPtr+'/'+key+'/'+i,rootSchema,jsonPtr,key,schema,i);}}}else if(key in traverse.propsKeywords){if(sch&&(0,_typeof2["default"])(sch)=='object'){for(var prop in sch){_traverse(opts,pre,post,sch[prop],jsonPtr+'/'+key+'/'+escapeJsonPtr(prop),rootSchema,jsonPtr,key,schema,prop);}}}else if(key in traverse.keywords||opts.allKeys&&!(key in traverse.skipKeywords)){_traverse(opts,pre,post,sch,jsonPtr+'/'+key,rootSchema,jsonPtr,key,schema);}}post(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);}}function escapeJsonPtr(str){return str.replace(/~/g,'~0').replace(/\//g,'~1');}

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],1088:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):factory(global.URI=global.URI||{});})(void 0,function(exports){'use strict';function merge(){for(var _len=arguments.length,sets=Array(_len),_key=0;_key<_len;_key++){sets[_key]=arguments[_key];}if(sets.length>1){sets[0]=sets[0].slice(0,-1);var xl=sets.length-1;for(var x=1;x<xl;++x){sets[x]=sets[x].slice(1,-1);}sets[xl]=sets[xl].slice(1);return sets.join('');}else{return sets[0];}}function subexp(str){return"(?:"+str+")";}function typeOf(o){return o===undefined?"undefined":o===null?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase();}function toUpperCase(str){return str.toUpperCase();}function toArray(obj){return obj!==undefined&&obj!==null?obj instanceof Array?obj:typeof obj.length!=="number"||obj.split||obj.setInterval||obj.call?[obj]:Array.prototype.slice.call(obj):[];}function assign(target,source){var obj=target;if(source){for(var key in source){obj[key]=source[key];}}return obj;}function buildExps(isIRI){var ALPHA$$="[A-Za-z]",CR$="[\\x0D]",DIGIT$$="[0-9]",DQUOTE$$="[\\x22]",HEXDIG$$=merge(DIGIT$$,"[A-Fa-f]"),LF$$="[\\x0A]",SP$$="[\\x20]",PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$)),GEN_DELIMS$$="[\\:\\/\\?\\#\\[\\]\\@]",SUB_DELIMS$$="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",RESERVED$$=merge(GEN_DELIMS$$,SUB_DELIMS$$),UCSCHAR$$=isIRI?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",IPRIVATE$$=isIRI?"[\\uE000-\\uF8FF]":"[]",UNRESERVED$$=merge(ALPHA$$,DIGIT$$,"[\\-\\.\\_\\~]",UCSCHAR$$),SCHEME$=subexp(ALPHA$$+merge(ALPHA$$,DIGIT$$,"[\\+\\-\\.]")+"*"),USERINFO$=subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]"))+"*"),DEC_OCTET$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("[1-9]"+DIGIT$$)+"|"+DIGIT$$),DEC_OCTET_RELAXED$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("0?[1-9]"+DIGIT$$)+"|0?0?"+DIGIT$$),IPV4ADDRESS$=subexp(DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$),H16$=subexp(HEXDIG$$+"{1,4}"),LS32$=subexp(subexp(H16$+"\\:"+H16$)+"|"+IPV4ADDRESS$),IPV6ADDRESS1$=subexp(subexp(H16$+"\\:")+"{6}"+LS32$),IPV6ADDRESS2$=subexp("\\:\\:"+subexp(H16$+"\\:")+"{5}"+LS32$),IPV6ADDRESS3$=subexp(subexp(H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{4}"+LS32$),IPV6ADDRESS4$=subexp(subexp(subexp(H16$+"\\:")+"{0,1}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{3}"+LS32$),IPV6ADDRESS5$=subexp(subexp(subexp(H16$+"\\:")+"{0,2}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{2}"+LS32$),IPV6ADDRESS6$=subexp(subexp(subexp(H16$+"\\:")+"{0,3}"+H16$)+"?\\:\\:"+H16$+"\\:"+LS32$),IPV6ADDRESS7$=subexp(subexp(subexp(H16$+"\\:")+"{0,4}"+H16$)+"?\\:\\:"+LS32$),IPV6ADDRESS8$=subexp(subexp(subexp(H16$+"\\:")+"{0,5}"+H16$)+"?\\:\\:"+H16$),IPV6ADDRESS9$=subexp(subexp(subexp(H16$+"\\:")+"{0,6}"+H16$)+"?\\:\\:"),IPV6ADDRESS$=subexp([IPV6ADDRESS1$,IPV6ADDRESS2$,IPV6ADDRESS3$,IPV6ADDRESS4$,IPV6ADDRESS5$,IPV6ADDRESS6$,IPV6ADDRESS7$,IPV6ADDRESS8$,IPV6ADDRESS9$].join("|")),ZONEID$=subexp(subexp(UNRESERVED$$+"|"+PCT_ENCODED$)+"+"),IPV6ADDRZ$=subexp(IPV6ADDRESS$+"\\%25"+ZONEID$),IPV6ADDRZ_RELAXED$=subexp(IPV6ADDRESS$+subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+ZONEID$),IPVFUTURE$=subexp("[vV]"+HEXDIG$$+"+\\."+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+"),IP_LITERAL$=subexp("\\["+subexp(IPV6ADDRZ_RELAXED$+"|"+IPV6ADDRESS$+"|"+IPVFUTURE$)+"\\]"),REG_NAME$=subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$))+"*"),HOST$=subexp(IP_LITERAL$+"|"+IPV4ADDRESS$+"(?!"+REG_NAME$+")"+"|"+REG_NAME$),PORT$=subexp(DIGIT$$+"*"),AUTHORITY$=subexp(subexp(USERINFO$+"@")+"?"+HOST$+subexp("\\:"+PORT$)+"?"),PCHAR$=subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@]")),SEGMENT$=subexp(PCHAR$+"*"),SEGMENT_NZ$=subexp(PCHAR$+"+"),SEGMENT_NZ_NC$=subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\@]"))+"+"),PATH_ABEMPTY$=subexp(subexp("\\/"+SEGMENT$)+"*"),PATH_ABSOLUTE$=subexp("\\/"+subexp(SEGMENT_NZ$+PATH_ABEMPTY$)+"?"),PATH_NOSCHEME$=subexp(SEGMENT_NZ_NC$+PATH_ABEMPTY$),PATH_ROOTLESS$=subexp(SEGMENT_NZ$+PATH_ABEMPTY$),PATH_EMPTY$="(?!"+PCHAR$+")",PATH$=subexp(PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$),QUERY$=subexp(subexp(PCHAR$+"|"+merge("[\\/\\?]",IPRIVATE$$))+"*"),FRAGMENT$=subexp(subexp(PCHAR$+"|[\\/\\?]")+"*"),HIER_PART$=subexp(subexp("\\/\\/"+AUTHORITY$+PATH_ABEMPTY$)+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$),URI$=subexp(SCHEME$+"\\:"+HIER_PART$+subexp("\\?"+QUERY$)+"?"+subexp("\\#"+FRAGMENT$)+"?"),RELATIVE_PART$=subexp(subexp("\\/\\/"+AUTHORITY$+PATH_ABEMPTY$)+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_EMPTY$),RELATIVE$=subexp(RELATIVE_PART$+subexp("\\?"+QUERY$)+"?"+subexp("\\#"+FRAGMENT$)+"?"),URI_REFERENCE$=subexp(URI$+"|"+RELATIVE$),ABSOLUTE_URI$=subexp(SCHEME$+"\\:"+HIER_PART$+subexp("\\?"+QUERY$)+"?"),GENERIC_REF$="^("+SCHEME$+")\\:"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?"+subexp("\\#("+FRAGMENT$+")")+"?$",RELATIVE_REF$="^(){0}"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?"+subexp("\\#("+FRAGMENT$+")")+"?$",ABSOLUTE_REF$="^("+SCHEME$+")\\:"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?$",SAMEDOC_REF$="^"+subexp("\\#("+FRAGMENT$+")")+"?$",AUTHORITY_REF$="^"+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?$";return{NOT_SCHEME:new RegExp(merge("[^]",ALPHA$$,DIGIT$$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]",IPRIVATE$$),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",UNRESERVED$$,SUB_DELIMS$$),"g"),UNRESERVED:new RegExp(UNRESERVED$$,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",UNRESERVED$$,RESERVED$$),"g"),PCT_ENCODED:new RegExp(PCT_ENCODED$,"g"),IPV4ADDRESS:new RegExp("^("+IPV4ADDRESS$+")$"),IPV6ADDRESS:new RegExp("^\\[?("+IPV6ADDRESS$+")"+subexp(subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+"("+ZONEID$+")")+"?\\]?$")};}var URI_PROTOCOL=buildExps(false);var IRI_PROTOCOL=buildExps(true);var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();var toConsumableArray=function toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}};var maxInt=2147483647;var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;var delimiter='-';var regexPunycode=/^xn--/;var regexNonASCII=/[^\0-\x7E]/;var regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g;var errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'};var baseMinusTMin=base-tMin;var floor=Math.floor;var stringFromCharCode=String.fromCharCode;function error$1(type){throw new RangeError(errors[type]);}function map(array,fn){var result=[];var length=array.length;while(length--){result[length]=fn(array[length]);}return result;}function mapDomain(string,fn){var parts=string.split('@');var result='';if(parts.length>1){result=parts[0]+'@';string=parts[1];}string=string.replace(regexSeparators,'\x2E');var labels=string.split('.');var encoded=map(labels,fn).join('.');return result+encoded;}function ucs2decode(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){var extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}return output;}var ucs2encode=function ucs2encode(array){return String.fromCodePoint.apply(String,toConsumableArray(array));};var basicToDigit=function basicToDigit(codePoint){if(codePoint-0x30<0x0A){return codePoint-0x16;}if(codePoint-0x41<0x1A){return codePoint-0x41;}if(codePoint-0x61<0x1A){return codePoint-0x61;}return base;};var digitToBasic=function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5);};var adapt=function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin);}return floor(k+(baseMinusTMin+1)*delta/(delta+skew));};var decode=function decode(input){var output=[];var inputLength=input.length;var i=0;var n=initialN;var bias=initialBias;var basic=input.lastIndexOf(delimiter);if(basic<0){basic=0;}for(var j=0;j<basic;++j){if(input.charCodeAt(j)>=0x80){error$1('not-basic');}output.push(input.charCodeAt(j));}for(var index=basic>0?basic+1:0;index<inputLength;){var oldi=i;for(var w=1,k=base;;k+=base){if(index>=inputLength){error$1('invalid-input');}var digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error$1('overflow');}i+=digit*w;var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break;}var baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error$1('overflow');}w*=baseMinusT;}var out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error$1('overflow');}n+=floor(i/out);i%=out;output.splice(i++,0,n);}return String.fromCodePoint.apply(String,output);};var encode=function encode(input){var output=[];input=ucs2decode(input);var inputLength=input.length;var n=initialN;var delta=0;var bias=initialBias;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _currentValue2=_step.value;if(_currentValue2<0x80){output.push(stringFromCharCode(_currentValue2));}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}var basicLength=output.length;var handledCPCount=basicLength;if(basicLength){output.push(delimiter);}while(handledCPCount<inputLength){var m=maxInt;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=input[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var currentValue=_step2.value;if(currentValue>=n&&currentValue<m){m=currentValue;}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error$1('overflow');}delta+=(m-n)*handledCPCountPlusOne;n=m;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=input[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _currentValue=_step3.value;if(_currentValue<n&&++delta>maxInt){error$1('overflow');}if(_currentValue==n){var q=delta;for(var k=base;;k+=base){var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break;}var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT);}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}++delta;++n;}return output.join('');};var toUnicode=function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string;});};var toASCII=function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string;});};var punycode={'version':'2.1.0','ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode};var SCHEMES={};function pctEncChar(chr){var c=chr.charCodeAt(0);var e=void 0;if(c<16)e="%0"+c.toString(16).toUpperCase();else if(c<128)e="%"+c.toString(16).toUpperCase();else if(c<2048)e="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();else e="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();return e;}function pctDecChars(str){var newStr="";var i=0;var il=str.length;while(i<il){var c=parseInt(str.substr(i+1,2),16);if(c<128){newStr+=String.fromCharCode(c);i+=3;}else if(c>=194&&c<224){if(il-i>=6){var c2=parseInt(str.substr(i+4,2),16);newStr+=String.fromCharCode((c&31)<<6|c2&63);}else{newStr+=str.substr(i,6);}i+=6;}else if(c>=224){if(il-i>=9){var _c=parseInt(str.substr(i+4,2),16);var c3=parseInt(str.substr(i+7,2),16);newStr+=String.fromCharCode((c&15)<<12|(_c&63)<<6|c3&63);}else{newStr+=str.substr(i,9);}i+=9;}else{newStr+=str.substr(i,3);i+=3;}}return newStr;}function _normalizeComponentEncoding(components,protocol){function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(protocol.UNRESERVED)?str:decStr;}if(components.scheme)components.scheme=String(components.scheme).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME,"");if(components.userinfo!==undefined)components.userinfo=String(components.userinfo).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_USERINFO,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.host!==undefined)components.host=String(components.host).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.path!==undefined)components.path=String(components.path).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(components.scheme?protocol.NOT_PATH:protocol.NOT_PATH_NOSCHEME,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.query!==undefined)components.query=String(components.query).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_QUERY,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.fragment!==undefined)components.fragment=String(components.fragment).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_FRAGMENT,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);return components;}function _stripLeadingZeros(str){return str.replace(/^0*(.*)/,"$1")||"0";}function _normalizeIPv4(host,protocol){var matches=host.match(protocol.IPV4ADDRESS)||[];var _matches=slicedToArray(matches,2),address=_matches[1];if(address){return address.split(".").map(_stripLeadingZeros).join(".");}else{return host;}}function _normalizeIPv6(host,protocol){var matches=host.match(protocol.IPV6ADDRESS)||[];var _matches2=slicedToArray(matches,3),address=_matches2[1],zone=_matches2[2];if(address){var _address$toLowerCase$=address.toLowerCase().split('::').reverse(),_address$toLowerCase$2=slicedToArray(_address$toLowerCase$,2),last=_address$toLowerCase$2[0],first=_address$toLowerCase$2[1];var firstFields=first?first.split(":").map(_stripLeadingZeros):[];var lastFields=last.split(":").map(_stripLeadingZeros);var isLastFieldIPv4Address=protocol.IPV4ADDRESS.test(lastFields[lastFields.length-1]);var fieldCount=isLastFieldIPv4Address?7:8;var lastFieldsStart=lastFields.length-fieldCount;var fields=Array(fieldCount);for(var x=0;x<fieldCount;++x){fields[x]=firstFields[x]||lastFields[lastFieldsStart+x]||'';}if(isLastFieldIPv4Address){fields[fieldCount-1]=_normalizeIPv4(fields[fieldCount-1],protocol);}var allZeroFields=fields.reduce(function(acc,field,index){if(!field||field==="0"){var lastLongest=acc[acc.length-1];if(lastLongest&&lastLongest.index+lastLongest.length===index){lastLongest.length++;}else{acc.push({index:index,length:1});}}return acc;},[]);var longestZeroFields=allZeroFields.sort(function(a,b){return b.length-a.length;})[0];var newHost=void 0;if(longestZeroFields&&longestZeroFields.length>1){var newFirst=fields.slice(0,longestZeroFields.index);var newLast=fields.slice(longestZeroFields.index+longestZeroFields.length);newHost=newFirst.join(":")+"::"+newLast.join(":");}else{newHost=fields.join(":");}if(zone){newHost+="%"+zone;}return newHost;}else{return host;}}var URI_PARSE=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;var NO_MATCH_IS_UNDEFINED="".match(/(){0}/)[1]===undefined;function parse(uriString){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var components={};var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;if(options.reference==="suffix")uriString=(options.scheme?options.scheme+":":"")+"//"+uriString;var matches=uriString.match(URI_PARSE);if(matches){if(NO_MATCH_IS_UNDEFINED){components.scheme=matches[1];components.userinfo=matches[3];components.host=matches[4];components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=matches[7];components.fragment=matches[8];if(isNaN(components.port)){components.port=matches[5];}}else{components.scheme=matches[1]||undefined;components.userinfo=uriString.indexOf("@")!==-1?matches[3]:undefined;components.host=uriString.indexOf("//")!==-1?matches[4]:undefined;components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=uriString.indexOf("?")!==-1?matches[7]:undefined;components.fragment=uriString.indexOf("#")!==-1?matches[8]:undefined;if(isNaN(components.port)){components.port=uriString.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?matches[4]:undefined;}}if(components.host){components.host=_normalizeIPv6(_normalizeIPv4(components.host,protocol),protocol);}if(components.scheme===undefined&&components.userinfo===undefined&&components.host===undefined&&components.port===undefined&&!components.path&&components.query===undefined){components.reference="same-document";}else if(components.scheme===undefined){components.reference="relative";}else if(components.fragment===undefined){components.reference="absolute";}else{components.reference="uri";}if(options.reference&&options.reference!=="suffix"&&options.reference!==components.reference){components.error=components.error||"URI is not a "+options.reference+" reference.";}var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(!options.unicodeSupport&&(!schemeHandler||!schemeHandler.unicodeSupport)){if(components.host&&(options.domainHost||schemeHandler&&schemeHandler.domainHost)){try{components.host=punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase());}catch(e){components.error=components.error||"Host's domain name can not be converted to ASCII via punycode: "+e;}}_normalizeComponentEncoding(components,URI_PROTOCOL);}else{_normalizeComponentEncoding(components,protocol);}if(schemeHandler&&schemeHandler.parse){schemeHandler.parse(components,options);}}else{components.error=components.error||"URI can not be parsed.";}return components;}function _recomposeAuthority(components,options){var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];if(components.userinfo!==undefined){uriTokens.push(components.userinfo);uriTokens.push("@");}if(components.host!==undefined){uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host),protocol),protocol).replace(protocol.IPV6ADDRESS,function(_,$1,$2){return"["+$1+($2?"%25"+$2:"")+"]";}));}if(typeof components.port==="number"){uriTokens.push(":");uriTokens.push(components.port.toString(10));}return uriTokens.length?uriTokens.join(""):undefined;}var RDS1=/^\.\.?\//;var RDS2=/^\/\.(\/|$)/;var RDS3=/^\/\.\.(\/|$)/;var RDS5=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(input){var output=[];while(input.length){if(input.match(RDS1)){input=input.replace(RDS1,"");}else if(input.match(RDS2)){input=input.replace(RDS2,"/");}else if(input.match(RDS3)){input=input.replace(RDS3,"/");output.pop();}else if(input==="."||input===".."){input="";}else{var im=input.match(RDS5);if(im){var s=im[0];input=input.slice(s.length);output.push(s);}else{throw new Error("Unexpected dot segment condition");}}}return output.join("");}function serialize(components){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var protocol=options.iri?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(schemeHandler&&schemeHandler.serialize)schemeHandler.serialize(components,options);if(components.host){if(protocol.IPV6ADDRESS.test(components.host)){}else if(options.domainHost||schemeHandler&&schemeHandler.domainHost){try{components.host=!options.iri?punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase()):punycode.toUnicode(components.host);}catch(e){components.error=components.error||"Host's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e;}}}_normalizeComponentEncoding(components,protocol);if(options.reference!=="suffix"&&components.scheme){uriTokens.push(components.scheme);uriTokens.push(":");}var authority=_recomposeAuthority(components,options);if(authority!==undefined){if(options.reference!=="suffix"){uriTokens.push("//");}uriTokens.push(authority);if(components.path&&components.path.charAt(0)!=="/"){uriTokens.push("/");}}if(components.path!==undefined){var s=components.path;if(!options.absolutePath&&(!schemeHandler||!schemeHandler.absolutePath)){s=removeDotSegments(s);}if(authority===undefined){s=s.replace(/^\/\//,"/%2F");}uriTokens.push(s);}if(components.query!==undefined){uriTokens.push("?");uriTokens.push(components.query);}if(components.fragment!==undefined){uriTokens.push("#");uriTokens.push(components.fragment);}return uriTokens.join("");}function resolveComponents(base,relative){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var skipNormalization=arguments[3];var target={};if(!skipNormalization){base=parse(serialize(base,options),options);relative=parse(serialize(relative,options),options);}options=options||{};if(!options.tolerant&&relative.scheme){target.scheme=relative.scheme;target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query;}else{if(relative.userinfo!==undefined||relative.host!==undefined||relative.port!==undefined){target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query;}else{if(!relative.path){target.path=base.path;if(relative.query!==undefined){target.query=relative.query;}else{target.query=base.query;}}else{if(relative.path.charAt(0)==="/"){target.path=removeDotSegments(relative.path);}else{if((base.userinfo!==undefined||base.host!==undefined||base.port!==undefined)&&!base.path){target.path="/"+relative.path;}else if(!base.path){target.path=relative.path;}else{target.path=base.path.slice(0,base.path.lastIndexOf("/")+1)+relative.path;}target.path=removeDotSegments(target.path);}target.query=relative.query;}target.userinfo=base.userinfo;target.host=base.host;target.port=base.port;}target.scheme=base.scheme;}target.fragment=relative.fragment;return target;}function resolve(baseURI,relativeURI,options){var schemelessOptions=assign({scheme:'null'},options);return serialize(resolveComponents(parse(baseURI,schemelessOptions),parse(relativeURI,schemelessOptions),schemelessOptions,true),schemelessOptions);}function normalize(uri,options){if(typeof uri==="string"){uri=serialize(parse(uri,options),options);}else if(typeOf(uri)==="object"){uri=parse(serialize(uri,options),options);}return uri;}function equal(uriA,uriB,options){if(typeof uriA==="string"){uriA=serialize(parse(uriA,options),options);}else if(typeOf(uriA)==="object"){uriA=serialize(uriA,options);}if(typeof uriB==="string"){uriB=serialize(parse(uriB,options),options);}else if(typeOf(uriB)==="object"){uriB=serialize(uriB,options);}return uriA===uriB;}function escapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.ESCAPE:IRI_PROTOCOL.ESCAPE,pctEncChar);}function unescapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.PCT_ENCODED:IRI_PROTOCOL.PCT_ENCODED,pctDecChars);}var handler={scheme:"http",domainHost:true,parse:function parse(components,options){if(!components.host){components.error=components.error||"HTTP URIs must have a host.";}return components;},serialize:function serialize(components,options){if(components.port===(String(components.scheme).toLowerCase()!=="https"?80:443)||components.port===""){components.port=undefined;}if(!components.path){components.path="/";}return components;}};var handler$1={scheme:"https",domainHost:handler.domainHost,parse:handler.parse,serialize:handler.serialize};var O={};var isIRI=true;var UNRESERVED$$="[A-Za-z0-9\\-\\.\\_\\~"+(isIRI?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]";var HEXDIG$$="[0-9A-Fa-f]";var PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$));var ATEXT$$="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]";var QTEXT$$="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]";var VCHAR$$=merge(QTEXT$$,"[\\\"\\\\]");var SOME_DELIMS$$="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]";var UNRESERVED=new RegExp(UNRESERVED$$,"g");var PCT_ENCODED=new RegExp(PCT_ENCODED$,"g");var NOT_LOCAL_PART=new RegExp(merge("[^]",ATEXT$$,"[\\.]",'[\\"]',VCHAR$$),"g");var NOT_HFNAME=new RegExp(merge("[^]",UNRESERVED$$,SOME_DELIMS$$),"g");var NOT_HFVALUE=NOT_HFNAME;function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(UNRESERVED)?str:decStr;}var handler$2={scheme:"mailto",parse:function parse$$1(components,options){var mailtoComponents=components;var to=mailtoComponents.to=mailtoComponents.path?mailtoComponents.path.split(","):[];mailtoComponents.path=undefined;if(mailtoComponents.query){var unknownHeaders=false;var headers={};var hfields=mailtoComponents.query.split("&");for(var x=0,xl=hfields.length;x<xl;++x){var hfield=hfields[x].split("=");switch(hfield[0]){case"to":var toAddrs=hfield[1].split(",");for(var _x=0,_xl=toAddrs.length;_x<_xl;++_x){to.push(toAddrs[_x]);}break;case"subject":mailtoComponents.subject=unescapeComponent(hfield[1],options);break;case"body":mailtoComponents.body=unescapeComponent(hfield[1],options);break;default:unknownHeaders=true;headers[unescapeComponent(hfield[0],options)]=unescapeComponent(hfield[1],options);break;}}if(unknownHeaders)mailtoComponents.headers=headers;}mailtoComponents.query=undefined;for(var _x2=0,_xl2=to.length;_x2<_xl2;++_x2){var addr=to[_x2].split("@");addr[0]=unescapeComponent(addr[0]);if(!options.unicodeSupport){try{addr[1]=punycode.toASCII(unescapeComponent(addr[1],options).toLowerCase());}catch(e){mailtoComponents.error=mailtoComponents.error||"Email address's domain name can not be converted to ASCII via punycode: "+e;}}else{addr[1]=unescapeComponent(addr[1],options).toLowerCase();}to[_x2]=addr.join("@");}return mailtoComponents;},serialize:function serialize$$1(mailtoComponents,options){var components=mailtoComponents;var to=toArray(mailtoComponents.to);if(to){for(var x=0,xl=to.length;x<xl;++x){var toAddr=String(to[x]);var atIdx=toAddr.lastIndexOf("@");var localPart=toAddr.slice(0,atIdx).replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_LOCAL_PART,pctEncChar);var domain=toAddr.slice(atIdx+1);try{domain=!options.iri?punycode.toASCII(unescapeComponent(domain,options).toLowerCase()):punycode.toUnicode(domain);}catch(e){components.error=components.error||"Email address's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e;}to[x]=localPart+"@"+domain;}components.path=to.join(",");}var headers=mailtoComponents.headers=mailtoComponents.headers||{};if(mailtoComponents.subject)headers["subject"]=mailtoComponents.subject;if(mailtoComponents.body)headers["body"]=mailtoComponents.body;var fields=[];for(var name in headers){if(headers[name]!==O[name]){fields.push(name.replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFNAME,pctEncChar)+"="+headers[name].replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFVALUE,pctEncChar));}}if(fields.length){components.query=fields.join("&");}return components;}};var URN_PARSE=/^([^\:]+)\:(.*)/;var handler$3={scheme:"urn",parse:function parse$$1(components,options){var matches=components.path&&components.path.match(URN_PARSE);var urnComponents=components;if(matches){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=matches[1].toLowerCase();var nss=matches[2];var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];urnComponents.nid=nid;urnComponents.nss=nss;urnComponents.path=undefined;if(schemeHandler){urnComponents=schemeHandler.parse(urnComponents,options);}}else{urnComponents.error=urnComponents.error||"URN can not be parsed.";}return urnComponents;},serialize:function serialize$$1(urnComponents,options){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=urnComponents.nid;var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];if(schemeHandler){urnComponents=schemeHandler.serialize(urnComponents,options);}var uriComponents=urnComponents;var nss=urnComponents.nss;uriComponents.path=(nid||options.nid)+":"+nss;return uriComponents;}};var UUID=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;var handler$4={scheme:"urn:uuid",parse:function parse(urnComponents,options){var uuidComponents=urnComponents;uuidComponents.uuid=uuidComponents.nss;uuidComponents.nss=undefined;if(!options.tolerant&&(!uuidComponents.uuid||!uuidComponents.uuid.match(UUID))){uuidComponents.error=uuidComponents.error||"UUID is not valid.";}return uuidComponents;},serialize:function serialize(uuidComponents,options){var urnComponents=uuidComponents;urnComponents.nss=(uuidComponents.uuid||"").toLowerCase();return urnComponents;}};SCHEMES[handler.scheme]=handler;SCHEMES[handler$1.scheme]=handler$1;SCHEMES[handler$2.scheme]=handler$2;SCHEMES[handler$3.scheme]=handler$3;SCHEMES[handler$4.scheme]=handler$4;/* common-shake removed: exports.SCHEMES = */ void SCHEMES;/* common-shake removed: exports.pctEncChar = */ void pctEncChar;/* common-shake removed: exports.pctDecChars = */ void pctDecChars;exports.parse=parse;/* common-shake removed: exports.removeDotSegments = */ void removeDotSegments;exports.serialize=serialize;/* common-shake removed: exports.resolveComponents = */ void resolveComponents;exports.resolve=resolve;/* common-shake removed: exports.normalize = */ void normalize;/* common-shake removed: exports.equal = */ void equal;/* common-shake removed: exports.escapeComponent = */ void escapeComponent;/* common-shake removed: exports.unescapeComponent = */ void unescapeComponent;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],776:[function(require,module,exports){
'use strict';module.exports={'$ref':require('./ref'),allOf:require('./allOf'),anyOf:require('./anyOf'),'$comment':require('./comment'),"const":require('./const'),contains:require('./contains'),dependencies:require('./dependencies'),'enum':require('./enum'),format:require('./format'),'if':require('./if'),items:require('./items'),maximum:require('./_limit'),minimum:require('./_limit'),maxItems:require('./_limitItems'),minItems:require('./_limitItems'),maxLength:require('./_limitLength'),minLength:require('./_limitLength'),maxProperties:require('./_limitProperties'),minProperties:require('./_limitProperties'),multipleOf:require('./multipleOf'),not:require('./not'),oneOf:require('./oneOf'),pattern:require('./pattern'),properties:require('./properties'),propertyNames:require('./propertyNames'),required:require('./required'),uniqueItems:require('./uniqueItems'),validate:require('./validate')};

},{"./_limit":762,"./_limitItems":763,"./_limitLength":764,"./_limitProperties":765,"./allOf":766,"./anyOf":767,"./comment":768,"./const":769,"./contains":770,"./dependencies":772,"./enum":773,"./format":774,"./if":775,"./items":777,"./multipleOf":778,"./not":779,"./oneOf":780,"./pattern":781,"./properties":782,"./propertyNames":783,"./ref":784,"./required":785,"./uniqueItems":786,"./validate":787}],758:[function(require,module,exports){
'use strict';module.exports=function ucs2length(str){var length=0,len=str.length,pos=0,value;while(pos<len){length++;value=str.charCodeAt(pos++);if(value>=0xD800&&value<=0xDBFF&&pos<len){value=str.charCodeAt(pos);if((value&0xFC00)==0xDC00)pos++;}}return length;};

},{}],761:[function(require,module,exports){
'use strict';var metaSchema=require('./refs/json-schema-draft-07.json');module.exports={$id:'https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js',definitions:{simpleTypes:metaSchema.definitions.simpleTypes},type:'object',dependencies:{schema:['validate'],$data:['validate'],statements:['inline'],valid:{not:{required:['macro']}}},properties:{type:metaSchema.properties.type,schema:{type:'boolean'},statements:{type:'boolean'},dependencies:{type:'array',items:{type:'string'}},metaSchema:{type:'object'},modifying:{type:'boolean'},valid:{type:'boolean'},$data:{type:'boolean'},async:{type:'boolean'},errors:{anyOf:[{type:'boolean'},{"const":'full'}]}}};

},{"./refs/json-schema-draft-07.json":790}],762:[function(require,module,exports){
'use strict';module.exports=function generate__limit(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $isMax=$keyword=='maximum',$exclusiveKeyword=$isMax?'exclusiveMaximum':'exclusiveMinimum',$schemaExcl=it.schema[$exclusiveKeyword],$isDataExcl=it.opts.$data&&$schemaExcl&&$schemaExcl.$data,$op=$isMax?'<':'>',$notOp=$isMax?'>':'<',$errorKeyword=undefined;if($isDataExcl){var $schemaValueExcl=it.util.getData($schemaExcl.$data,$dataLvl,it.dataPathArr),$exclusive='exclusive'+$lvl,$exclType='exclType'+$lvl,$exclIsNumber='exclIsNumber'+$lvl,$opExpr='op'+$lvl,$opStr='\' + '+$opExpr+' + \'';out+=' var schemaExcl'+$lvl+' = '+$schemaValueExcl+'; ';$schemaValueExcl='schemaExcl'+$lvl;out+=' var '+$exclusive+'; var '+$exclType+' = typeof '+$schemaValueExcl+'; if ('+$exclType+' != \'boolean\' && '+$exclType+' != \'undefined\' && '+$exclType+' != \'number\') { ';var $errorKeyword=$exclusiveKeyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_exclusiveLimit')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \''+$exclusiveKeyword+' should be boolean\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } else if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'number\') || ';}out+=' '+$exclType+' == \'number\' ? ( ('+$exclusive+' = '+$schemaValue+' === undefined || '+$schemaValueExcl+' '+$op+'= '+$schemaValue+') ? '+$data+' '+$notOp+'= '+$schemaValueExcl+' : '+$data+' '+$notOp+' '+$schemaValue+' ) : ( ('+$exclusive+' = '+$schemaValueExcl+' === true) ? '+$data+' '+$notOp+'= '+$schemaValue+' : '+$data+' '+$notOp+' '+$schemaValue+' ) || '+$data+' !== '+$data+') { var op'+$lvl+' = '+$exclusive+' ? \''+$op+'\' : \''+$op+'=\'; ';if($schema===undefined){$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+'/'+$exclusiveKeyword;$schemaValue=$schemaValueExcl;$isData=$isDataExcl;}}else{var $exclIsNumber=typeof $schemaExcl=='number',$opStr=$op;if($exclIsNumber&&$isData){var $opExpr='\''+$opStr+'\'';out+=' if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'number\') || ';}out+=' ( '+$schemaValue+' === undefined || '+$schemaExcl+' '+$op+'= '+$schemaValue+' ? '+$data+' '+$notOp+'= '+$schemaExcl+' : '+$data+' '+$notOp+' '+$schemaValue+' ) || '+$data+' !== '+$data+') { ';}else{if($exclIsNumber&&$schema===undefined){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+'/'+$exclusiveKeyword;$schemaValue=$schemaExcl;$notOp+='=';}else{if($exclIsNumber)$schemaValue=Math[$isMax?'min':'max']($schemaExcl,$schema);if($schemaExcl===($exclIsNumber?$schemaValue:true)){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+'/'+$exclusiveKeyword;$notOp+='=';}else{$exclusive=false;$opStr+='=';}}var $opExpr='\''+$opStr+'\'';out+=' if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'number\') || ';}out+=' '+$data+' '+$notOp+' '+$schemaValue+' || '+$data+' !== '+$data+') { ';}}$errorKeyword=$errorKeyword||$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limit')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { comparison: '+$opExpr+', limit: '+$schemaValue+', exclusive: '+$exclusive+' } ';if(it.opts.messages!==false){out+=' , message: \'should be '+$opStr+' ';if($isData){out+='\' + '+$schemaValue;}else{out+=''+$schemaValue+'\'';}}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+$schema;}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } ';if($breakOnError){out+=' else { ';}return out;};

},{}],763:[function(require,module,exports){
'use strict';module.exports=function generate__limitItems(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $op=$keyword=='maxItems'?'>':'<';out+='if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'number\') || ';}out+=' '+$data+'.length '+$op+' '+$schemaValue+') { ';var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limitItems')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { limit: '+$schemaValue+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have ';if($keyword=='maxItems'){out+='more';}else{out+='fewer';}out+=' than ';if($isData){out+='\' + '+$schemaValue+' + \'';}else{out+=''+$schema;}out+=' items\' ';}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+$schema;}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+='} ';if($breakOnError){out+=' else { ';}return out;};

},{}],764:[function(require,module,exports){
'use strict';module.exports=function generate__limitLength(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $op=$keyword=='maxLength'?'>':'<';out+='if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'number\') || ';}if(it.opts.unicode===false){out+=' '+$data+'.length ';}else{out+=' ucs2length('+$data+') ';}out+=' '+$op+' '+$schemaValue+') { ';var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limitLength')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { limit: '+$schemaValue+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT be ';if($keyword=='maxLength'){out+='longer';}else{out+='shorter';}out+=' than ';if($isData){out+='\' + '+$schemaValue+' + \'';}else{out+=''+$schema;}out+=' characters\' ';}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+$schema;}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+='} ';if($breakOnError){out+=' else { ';}return out;};

},{}],765:[function(require,module,exports){
'use strict';module.exports=function generate__limitProperties(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $op=$keyword=='maxProperties'?'>':'<';out+='if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'number\') || ';}out+=' Object.keys('+$data+').length '+$op+' '+$schemaValue+') { ';var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limitProperties')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { limit: '+$schemaValue+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have ';if($keyword=='maxProperties'){out+='more';}else{out+='fewer';}out+=' than ';if($isData){out+='\' + '+$schemaValue+' + \'';}else{out+=''+$schema;}out+=' properties\' ';}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+$schema;}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+='} ';if($breakOnError){out+=' else { ';}return out;};

},{}],766:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_allOf(it,$keyword,$ruleType){var out=' ';var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $currentBaseId=$it.baseId,$allSchemasEmpty=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all)){$allSchemasEmpty=false;$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}}}if($breakOnError){if($allSchemasEmpty){out+=' if (true) { ';}else{out+=' '+$closingBraces.slice(0,-1)+' ';}}out=it.util.cleanUpCode(out);return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],767:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_anyOf(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $noEmptySchema=$schema.every(function($sch){return it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all);});if($noEmptySchema){var $currentBaseId=$it.baseId;out+=' var '+$errs+' = errors; var '+$valid+' = false;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;out+=' '+$valid+' = '+$valid+' || '+$nextValid+'; if (!'+$valid+') { ';$closingBraces+='}';}}it.compositeRule=$it.compositeRule=$wasComposite;out+=' '+$closingBraces+' if (!'+$valid+') {   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'anyOf'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should match some schema in anyOf\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}out+=' } else {  errors = '+$errs+'; if (vErrors !== null) { if ('+$errs+') vErrors.length = '+$errs+'; else vErrors = null; } ';if(it.opts.allErrors){out+=' } ';}out=it.util.cleanUpCode(out);}else{if($breakOnError){out+=' if (true) { ';}}return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],768:[function(require,module,exports){
'use strict';module.exports=function generate_comment(it,$keyword,$ruleType){var out=' ';var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $comment=it.util.toQuotedString($schema);if(it.opts.$comment===true){out+=' console.log('+$comment+');';}else if(typeof it.opts.$comment=='function'){out+=' self._opts.$comment('+$comment+', '+it.util.toQuotedString($errSchemaPath)+', validate.root.schema);';}return out;};

},{}],769:[function(require,module,exports){
'use strict';module.exports=function generate_const(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}if(!$isData){out+=' var schema'+$lvl+' = validate.schema'+$schemaPath+';';}out+='var '+$valid+' = equal('+$data+', schema'+$lvl+'); if (!'+$valid+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'const'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { allowedValue: schema'+$lvl+' } ';if(it.opts.messages!==false){out+=' , message: \'should be equal to constant\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' }';if($breakOnError){out+=' else { ';}return out;};

},{}],770:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_contains(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $idx='i'+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$currentBaseId=it.baseId,$nonEmptySchema=it.opts.strictKeywords?(0,_typeof2["default"])($schema)=='object'&&Object.keys($schema).length>0:it.util.schemaHasRules($schema,it.RULES.all);out+='var '+$errs+' = errors;var '+$valid+';';if($nonEmptySchema){var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=' var '+$nextValid+' = false; for (var '+$idx+' = 0; '+$idx+' < '+$data+'.length; '+$idx+'++) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+'['+$idx+']';$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}out+=' if ('+$nextValid+') break; }  ';it.compositeRule=$it.compositeRule=$wasComposite;out+=' '+$closingBraces+' if (!'+$nextValid+') {';}else{out+=' if ('+$data+'.length == 0) {';}var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'contains'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should contain a valid item\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } else { ';if($nonEmptySchema){out+='  errors = '+$errs+'; if (vErrors !== null) { if ('+$errs+') vErrors.length = '+$errs+'; else vErrors = null; } ';}if(it.opts.allErrors){out+=' } ';}out=it.util.cleanUpCode(out);return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],771:[function(require,module,exports){
'use strict';module.exports=function generate_custom(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $rule=this,$definition='definition'+$lvl,$rDef=$rule.definition,$closingBraces='';var $compile,$inline,$macro,$ruleValidate,$validateCode;if($isData&&$rDef.$data){$validateCode='keywordValidate'+$lvl;var $validateSchema=$rDef.validateSchema;out+=' var '+$definition+' = RULES.custom[\''+$keyword+'\'].definition; var '+$validateCode+' = '+$definition+'.validate;';}else{$ruleValidate=it.useCustomRule($rule,$schema,it.schema,it);if(!$ruleValidate)return;$schemaValue='validate.schema'+$schemaPath;$validateCode=$ruleValidate.code;$compile=$rDef.compile;$inline=$rDef.inline;$macro=$rDef.macro;}var $ruleErrs=$validateCode+'.errors',$i='i'+$lvl,$ruleErr='ruleErr'+$lvl,$asyncKeyword=$rDef.async;if($asyncKeyword&&!it.async)throw new Error('async keyword in sync schema');if(!($inline||$macro)){out+=''+$ruleErrs+' = null;';}out+='var '+$errs+' = errors;var '+$valid+';';if($isData&&$rDef.$data){$closingBraces+='}';out+=' if ('+$schemaValue+' === undefined) { '+$valid+' = true; } else { ';if($validateSchema){$closingBraces+='}';out+=' '+$valid+' = '+$definition+'.validateSchema('+$schemaValue+'); if ('+$valid+') { ';}}if($inline){if($rDef.statements){out+=' '+$ruleValidate.validate+' ';}else{out+=' '+$valid+' = '+$ruleValidate.validate+'; ';}}else if($macro){var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;$it.schema=$ruleValidate.validate;$it.schemaPath='';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it).replace(/validate\.schema/g,$validateCode);it.compositeRule=$it.compositeRule=$wasComposite;out+=' '+$code;}else{var $$outStack=$$outStack||[];$$outStack.push(out);out='';out+='  '+$validateCode+'.call( ';if(it.opts.passContext){out+='this';}else{out+='self';}if($compile||$rDef.schema===false){out+=' , '+$data+' ';}else{out+=' , '+$schemaValue+' , '+$data+' , validate.schema'+it.schemaPath+' ';}out+=' , (dataPath || \'\')';if(it.errorPath!='""'){out+=' + '+it.errorPath;}var $parentData=$dataLvl?'data'+($dataLvl-1||''):'parentData',$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:'parentDataProperty';out+=' , '+$parentData+' , '+$parentDataProperty+' , rootData )  ';var def_callRuleValidate=out;out=$$outStack.pop();if($rDef.errors===false){out+=' '+$valid+' = ';if($asyncKeyword){out+='await ';}out+=''+def_callRuleValidate+'; ';}else{if($asyncKeyword){$ruleErrs='customErrors'+$lvl;out+=' var '+$ruleErrs+' = null; try { '+$valid+' = await '+def_callRuleValidate+'; } catch (e) { '+$valid+' = false; if (e instanceof ValidationError) '+$ruleErrs+' = e.errors; else throw e; } ';}else{out+=' '+$ruleErrs+' = null; '+$valid+' = '+def_callRuleValidate+'; ';}}}if($rDef.modifying){out+=' if ('+$parentData+') '+$data+' = '+$parentData+'['+$parentDataProperty+'];';}out+=''+$closingBraces;if($rDef.valid){if($breakOnError){out+=' if (true) { ';}}else{out+=' if ( ';if($rDef.valid===undefined){out+=' !';if($macro){out+=''+$nextValid;}else{out+=''+$valid;}}else{out+=' '+!$rDef.valid+' ';}out+=') { ';$errorKeyword=$rule.keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'custom')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { keyword: \''+$rule.keyword+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should pass "'+$rule.keyword+'" keyword validation\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}var def_customError=out;out=$$outStack.pop();if($inline){if($rDef.errors){if($rDef.errors!='full'){out+='  for (var '+$i+'='+$errs+'; '+$i+'<errors; '+$i+'++) { var '+$ruleErr+' = vErrors['+$i+']; if ('+$ruleErr+'.dataPath === undefined) '+$ruleErr+'.dataPath = (dataPath || \'\') + '+it.errorPath+'; if ('+$ruleErr+'.schemaPath === undefined) { '+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=' '+$ruleErr+'.schema = '+$schemaValue+'; '+$ruleErr+'.data = '+$data+'; ';}out+=' } ';}}else{if($rDef.errors===false){out+=' '+def_customError+' ';}else{out+=' if ('+$errs+' == errors) { '+def_customError+' } else {  for (var '+$i+'='+$errs+'; '+$i+'<errors; '+$i+'++) { var '+$ruleErr+' = vErrors['+$i+']; if ('+$ruleErr+'.dataPath === undefined) '+$ruleErr+'.dataPath = (dataPath || \'\') + '+it.errorPath+'; if ('+$ruleErr+'.schemaPath === undefined) { '+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=' '+$ruleErr+'.schema = '+$schemaValue+'; '+$ruleErr+'.data = '+$data+'; ';}out+=' } } ';}}}else if($macro){out+='   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'custom')+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { keyword: \''+$rule.keyword+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should pass "'+$rule.keyword+'" keyword validation\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}}else{if($rDef.errors===false){out+=' '+def_customError+' ';}else{out+=' if (Array.isArray('+$ruleErrs+')) { if (vErrors === null) vErrors = '+$ruleErrs+'; else vErrors = vErrors.concat('+$ruleErrs+'); errors = vErrors.length;  for (var '+$i+'='+$errs+'; '+$i+'<errors; '+$i+'++) { var '+$ruleErr+' = vErrors['+$i+']; if ('+$ruleErr+'.dataPath === undefined) '+$ruleErr+'.dataPath = (dataPath || \'\') + '+it.errorPath+';  '+$ruleErr+'.schemaPath = "'+$errSchemaPath+'";  ';if(it.opts.verbose){out+=' '+$ruleErr+'.schema = '+$schemaValue+'; '+$ruleErr+'.data = '+$data+'; ';}out+=' } } else { '+def_customError+' } ';}}out+=' } ';if($breakOnError){out+=' else { ';}}return out;};

},{}],772:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_dependencies(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $schemaDeps={},$propertyDeps={},$ownProperties=it.opts.ownProperties;for($property in $schema){var $sch=$schema[$property];var $deps=Array.isArray($sch)?$propertyDeps:$schemaDeps;$deps[$property]=$sch;}out+='var '+$errs+' = errors;';var $currentErrorPath=it.errorPath;out+='var missing'+$lvl+';';for(var $property in $propertyDeps){$deps=$propertyDeps[$property];if($deps.length){out+=' if ( '+$data+it.util.getProperty($property)+' !== undefined ';if($ownProperties){out+=' && Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($property)+'\') ';}if($breakOnError){out+=' && ( ';var arr1=$deps;if(arr1){var $propertyKey,$i=-1,l1=arr1.length-1;while($i<l1){$propertyKey=arr1[$i+=1];if($i){out+=' || ';}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=' ( ( '+$useData+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=') && (missing'+$lvl+' = '+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+') ) ';}}out+=')) {  ';var $propertyPath='missing'+$lvl,$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+' + '+$propertyPath;}var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'dependencies'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { property: \''+it.util.escapeQuotes($property)+'\', missingProperty: \''+$missingProperty+'\', depsCount: '+$deps.length+', deps: \''+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should have ';if($deps.length==1){out+='property '+it.util.escapeQuotes($deps[0]);}else{out+='properties '+it.util.escapeQuotes($deps.join(", "));}out+=' when property '+it.util.escapeQuotes($property)+' is present\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}}else{out+=' ) { ';var arr2=$deps;if(arr2){var $propertyKey,i2=-1,l2=arr2.length-1;while(i2<l2){$propertyKey=arr2[i2+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers);}out+=' if ( '+$useData+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=') {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'dependencies'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { property: \''+it.util.escapeQuotes($property)+'\', missingProperty: \''+$missingProperty+'\', depsCount: '+$deps.length+', deps: \''+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should have ';if($deps.length==1){out+='property '+it.util.escapeQuotes($deps[0]);}else{out+='properties '+it.util.escapeQuotes($deps.join(", "));}out+=' when property '+it.util.escapeQuotes($property)+' is present\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';}}}out+=' }   ';if($breakOnError){$closingBraces+='}';out+=' else { ';}}}it.errorPath=$currentErrorPath;var $currentBaseId=$it.baseId;for(var $property in $schemaDeps){var $sch=$schemaDeps[$property];if(it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all)){out+=' '+$nextValid+' = true; if ( '+$data+it.util.getProperty($property)+' !== undefined ';if($ownProperties){out+=' && Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($property)+'\') ';}out+=') { ';$it.schema=$sch;$it.schemaPath=$schemaPath+it.util.getProperty($property);$it.errSchemaPath=$errSchemaPath+'/'+it.util.escapeFragment($property);out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;out+=' }  ';if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}}if($breakOnError){out+='   '+$closingBraces+' if ('+$errs+' == errors) {';}out=it.util.cleanUpCode(out);return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],773:[function(require,module,exports){
'use strict';module.exports=function generate_enum(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $i='i'+$lvl,$vSchema='schema'+$lvl;if(!$isData){out+=' var '+$vSchema+' = validate.schema'+$schemaPath+';';}out+='var '+$valid+';';if($isData){out+=' if (schema'+$lvl+' === undefined) '+$valid+' = true; else if (!Array.isArray(schema'+$lvl+')) '+$valid+' = false; else {';}out+=''+$valid+' = false;for (var '+$i+'=0; '+$i+'<'+$vSchema+'.length; '+$i+'++) if (equal('+$data+', '+$vSchema+'['+$i+'])) { '+$valid+' = true; break; }';if($isData){out+='  }  ';}out+=' if (!'+$valid+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'enum'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { allowedValues: schema'+$lvl+' } ';if(it.opts.messages!==false){out+=' , message: \'should be equal to one of the allowed values\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' }';if($breakOnError){out+=' else { ';}return out;};

},{}],774:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_format(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');if(it.opts.format===false){if($breakOnError){out+=' if (true) { ';}return out;}var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $unknownFormats=it.opts.unknownFormats,$allowUnknown=Array.isArray($unknownFormats);if($isData){var $format='format'+$lvl,$isObject='isObject'+$lvl,$formatType='formatType'+$lvl;out+=' var '+$format+' = formats['+$schemaValue+']; var '+$isObject+' = typeof '+$format+' == \'object\' && !('+$format+' instanceof RegExp) && '+$format+'.validate; var '+$formatType+' = '+$isObject+' && '+$format+'.type || \'string\'; if ('+$isObject+') { ';if(it.async){out+=' var async'+$lvl+' = '+$format+'.async; ';}out+=' '+$format+' = '+$format+'.validate; } if (  ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'string\') || ';}out+=' (';if($unknownFormats!='ignore'){out+=' ('+$schemaValue+' && !'+$format+' ';if($allowUnknown){out+=' && self._opts.unknownFormats.indexOf('+$schemaValue+') == -1 ';}out+=') || ';}out+=' ('+$format+' && '+$formatType+' == \''+$ruleType+'\' && !(typeof '+$format+' == \'function\' ? ';if(it.async){out+=' (async'+$lvl+' ? await '+$format+'('+$data+') : '+$format+'('+$data+')) ';}else{out+=' '+$format+'('+$data+') ';}out+=' : '+$format+'.test('+$data+'))))) {';}else{var $format=it.formats[$schema];if(!$format){if($unknownFormats=='ignore'){it.logger.warn('unknown format "'+$schema+'" ignored in schema at path "'+it.errSchemaPath+'"');if($breakOnError){out+=' if (true) { ';}return out;}else if($allowUnknown&&$unknownFormats.indexOf($schema)>=0){if($breakOnError){out+=' if (true) { ';}return out;}else{throw new Error('unknown format "'+$schema+'" is used in schema at path "'+it.errSchemaPath+'"');}}var $isObject=(0,_typeof2["default"])($format)=='object'&&!($format instanceof RegExp)&&$format.validate;var $formatType=$isObject&&$format.type||'string';if($isObject){var $async=$format.async===true;$format=$format.validate;}if($formatType!=$ruleType){if($breakOnError){out+=' if (true) { ';}return out;}if($async){if(!it.async)throw new Error('async format in sync schema');var $formatRef='formats'+it.util.getProperty($schema)+'.validate';out+=' if (!(await '+$formatRef+'('+$data+'))) { ';}else{out+=' if (! ';var $formatRef='formats'+it.util.getProperty($schema);if($isObject)$formatRef+='.validate';if(typeof $format=='function'){out+=' '+$formatRef+'('+$data+') ';}else{out+=' '+$formatRef+'.test('+$data+') ';}out+=') { ';}}var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'format'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { format:  ';if($isData){out+=''+$schemaValue;}else{out+=''+it.util.toQuotedString($schema);}out+='  } ';if(it.opts.messages!==false){out+=' , message: \'should match format "';if($isData){out+='\' + '+$schemaValue+' + \'';}else{out+=''+it.util.escapeQuotes($schema);}out+='"\' ';}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+it.util.toQuotedString($schema);}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } ';if($breakOnError){out+=' else { ';}return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],775:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_if(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid='valid'+$it.level;var $thenSch=it.schema['then'],$elseSch=it.schema['else'],$thenPresent=$thenSch!==undefined&&(it.opts.strictKeywords?(0,_typeof2["default"])($thenSch)=='object'&&Object.keys($thenSch).length>0:it.util.schemaHasRules($thenSch,it.RULES.all)),$elsePresent=$elseSch!==undefined&&(it.opts.strictKeywords?(0,_typeof2["default"])($elseSch)=='object'&&Object.keys($elseSch).length>0:it.util.schemaHasRules($elseSch,it.RULES.all)),$currentBaseId=$it.baseId;if($thenPresent||$elsePresent){var $ifClause;$it.createErrors=false;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=' var '+$errs+' = errors; var '+$valid+' = true;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;$it.createErrors=true;out+='  errors = '+$errs+'; if (vErrors !== null) { if ('+$errs+') vErrors.length = '+$errs+'; else vErrors = null; }  ';it.compositeRule=$it.compositeRule=$wasComposite;if($thenPresent){out+=' if ('+$nextValid+') {  ';$it.schema=it.schema['then'];$it.schemaPath=it.schemaPath+'.then';$it.errSchemaPath=it.errSchemaPath+'/then';out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;out+=' '+$valid+' = '+$nextValid+'; ';if($thenPresent&&$elsePresent){$ifClause='ifClause'+$lvl;out+=' var '+$ifClause+' = \'then\'; ';}else{$ifClause='\'then\'';}out+=' } ';if($elsePresent){out+=' else { ';}}else{out+=' if (!'+$nextValid+') { ';}if($elsePresent){$it.schema=it.schema['else'];$it.schemaPath=it.schemaPath+'.else';$it.errSchemaPath=it.errSchemaPath+'/else';out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;out+=' '+$valid+' = '+$nextValid+'; ';if($thenPresent&&$elsePresent){$ifClause='ifClause'+$lvl;out+=' var '+$ifClause+' = \'else\'; ';}else{$ifClause='\'else\'';}out+=' } ';}out+=' if (!'+$valid+') {   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'if'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { failingKeyword: '+$ifClause+' } ';if(it.opts.messages!==false){out+=' , message: \'should match "\' + '+$ifClause+' + \'" schema\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}out+=' }   ';if($breakOnError){out+=' else { ';}out=it.util.cleanUpCode(out);}else{if($breakOnError){out+=' if (true) { ';}}return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],784:[function(require,module,exports){
'use strict';module.exports=function generate_ref(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $async,$refCode;if($schema=='#'||$schema=='#/'){if(it.isRoot){$async=it.async;$refCode='validate';}else{$async=it.root.schema.$async===true;$refCode='root.refVal[0]';}}else{var $refVal=it.resolveRef(it.baseId,$schema,it.isRoot);if($refVal===undefined){var $message=it.MissingRefError.message(it.baseId,$schema);if(it.opts.missingRefs=='fail'){it.logger.error($message);var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'$ref'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { ref: \''+it.util.escapeQuotes($schema)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'can\\\'t resolve reference '+it.util.escapeQuotes($schema)+'\' ';}if(it.opts.verbose){out+=' , schema: '+it.util.toQuotedString($schema)+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}if($breakOnError){out+=' if (false) { ';}}else if(it.opts.missingRefs=='ignore'){it.logger.warn($message);if($breakOnError){out+=' if (true) { ';}}else{throw new it.MissingRefError(it.baseId,$schema,$message);}}else if($refVal.inline){var $it=it.util.copy(it);$it.level++;var $nextValid='valid'+$it.level;$it.schema=$refVal.schema;$it.schemaPath='';$it.errSchemaPath=$schema;var $code=it.validate($it).replace(/validate\.schema/g,$refVal.code);out+=' '+$code+' ';if($breakOnError){out+=' if ('+$nextValid+') { ';}}else{$async=$refVal.$async===true||it.async&&$refVal.$async!==false;$refCode=$refVal.code;}}if($refCode){var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.opts.passContext){out+=' '+$refCode+'.call(this, ';}else{out+=' '+$refCode+'( ';}out+=' '+$data+', (dataPath || \'\')';if(it.errorPath!='""'){out+=' + '+it.errorPath;}var $parentData=$dataLvl?'data'+($dataLvl-1||''):'parentData',$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:'parentDataProperty';out+=' , '+$parentData+' , '+$parentDataProperty+', rootData)  ';var __callValidate=out;out=$$outStack.pop();if($async){if(!it.async)throw new Error('async schema referenced by sync schema');if($breakOnError){out+=' var '+$valid+'; ';}out+=' try { await '+__callValidate+'; ';if($breakOnError){out+=' '+$valid+' = true; ';}out+=' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';if($breakOnError){out+=' '+$valid+' = false; ';}out+=' } ';if($breakOnError){out+=' if ('+$valid+') { ';}}else{out+=' if (!'+__callValidate+') { if (vErrors === null) vErrors = '+$refCode+'.errors; else vErrors = vErrors.concat('+$refCode+'.errors); errors = vErrors.length; } ';if($breakOnError){out+=' else { ';}}}return out;};

},{}],778:[function(require,module,exports){
'use strict';module.exports=function generate_multipleOf(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}out+='var division'+$lvl+';if (';if($isData){out+=' '+$schemaValue+' !== undefined && ( typeof '+$schemaValue+' != \'number\' || ';}out+=' (division'+$lvl+' = '+$data+' / '+$schemaValue+', ';if(it.opts.multipleOfPrecision){out+=' Math.abs(Math.round(division'+$lvl+') - division'+$lvl+') > 1e-'+it.opts.multipleOfPrecision+' ';}else{out+=' division'+$lvl+' !== parseInt(division'+$lvl+') ';}out+=' ) ';if($isData){out+='  )  ';}out+=' ) {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'multipleOf'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { multipleOf: '+$schemaValue+' } ';if(it.opts.messages!==false){out+=' , message: \'should be multiple of ';if($isData){out+='\' + '+$schemaValue;}else{out+=''+$schemaValue+'\'';}}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+$schema;}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+='} ';if($breakOnError){out+=' else { ';}return out;};

},{}],781:[function(require,module,exports){
'use strict';module.exports=function generate_pattern(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $regexp=$isData?'(new RegExp('+$schemaValue+'))':it.usePattern($schema);out+='if ( ';if($isData){out+=' ('+$schemaValue+' !== undefined && typeof '+$schemaValue+' != \'string\') || ';}out+=' !'+$regexp+'.test('+$data+') ) {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'pattern'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { pattern:  ';if($isData){out+=''+$schemaValue;}else{out+=''+it.util.toQuotedString($schema);}out+='  } ';if(it.opts.messages!==false){out+=' , message: \'should match pattern "';if($isData){out+='\' + '+$schemaValue+' + \'';}else{out+=''+it.util.escapeQuotes($schema);}out+='"\' ';}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+it.util.toQuotedString($schema);}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+='} ';if($breakOnError){out+=' else { ';}return out;};

},{}],786:[function(require,module,exports){
'use strict';module.exports=function generate_uniqueItems(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}if(($schema||$isData)&&it.opts.uniqueItems!==false){if($isData){out+=' var '+$valid+'; if ('+$schemaValue+' === false || '+$schemaValue+' === undefined) '+$valid+' = true; else if (typeof '+$schemaValue+' != \'boolean\') '+$valid+' = false; else { ';}out+=' var i = '+$data+'.length , '+$valid+' = true , j; if (i > 1) { ';var $itemType=it.schema.items&&it.schema.items.type,$typeIsArray=Array.isArray($itemType);if(!$itemType||$itemType=='object'||$itemType=='array'||$typeIsArray&&($itemType.indexOf('object')>=0||$itemType.indexOf('array')>=0)){out+=' outer: for (;i--;) { for (j = i; j--;) { if (equal('+$data+'[i], '+$data+'[j])) { '+$valid+' = false; break outer; } } } ';}else{out+=' var itemIndices = {}, item; for (;i--;) { var item = '+$data+'[i]; ';var $method='checkDataType'+($typeIsArray?'s':'');out+=' if ('+it.util[$method]($itemType,'item',true)+') continue; ';if($typeIsArray){out+=' if (typeof item == \'string\') item = \'"\' + item; ';}out+=' if (typeof itemIndices[item] == \'number\') { '+$valid+' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';}out+=' } ';if($isData){out+='  }  ';}out+=' if (!'+$valid+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'uniqueItems'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { i: i, j: j } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have duplicate items (items ## \' + j + \' and \' + i + \' are identical)\' ';}if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+$schemaPath;}else{out+=''+$schema;}out+='         , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } ';if($breakOnError){out+=' else { ';}}else{if($breakOnError){out+=' if (true) { ';}}return out;};

},{}],780:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_oneOf(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $currentBaseId=$it.baseId,$prevValid='prevValid'+$lvl,$passingSchemas='passingSchemas'+$lvl;out+='var '+$errs+' = errors , '+$prevValid+' = false , '+$valid+' = false , '+$passingSchemas+' = null; ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;out+='  '+it.validate($it)+' ';$it.baseId=$currentBaseId;}else{out+=' var '+$nextValid+' = true; ';}if($i){out+=' if ('+$nextValid+' && '+$prevValid+') { '+$valid+' = false; '+$passingSchemas+' = ['+$passingSchemas+', '+$i+']; } else { ';$closingBraces+='}';}out+=' if ('+$nextValid+') { '+$valid+' = '+$prevValid+' = true; '+$passingSchemas+' = '+$i+'; }';}}it.compositeRule=$it.compositeRule=$wasComposite;out+=''+$closingBraces+'if (!'+$valid+') {   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'oneOf'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { passingSchemas: '+$passingSchemas+' } ';if(it.opts.messages!==false){out+=' , message: \'should match exactly one schema in oneOf\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}out+='} else {  errors = '+$errs+'; if (vErrors !== null) { if ('+$errs+') vErrors.length = '+$errs+'; else vErrors = null; }';if(it.opts.allErrors){out+=' } ';}return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],777:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_items(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $idx='i'+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$currentBaseId=it.baseId;out+='var '+$errs+' = errors;var '+$valid+';';if(Array.isArray($schema)){var $additionalItems=it.schema.additionalItems;if($additionalItems===false){out+=' '+$valid+' = '+$data+'.length <= '+$schema.length+'; ';var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+'/additionalItems';out+='  if (!'+$valid+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'additionalItems'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { limit: '+$schema.length+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have more than '+$schema.length+' items\' ';}if(it.opts.verbose){out+=' , schema: false , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } ';$errSchemaPath=$currErrSchemaPath;if($breakOnError){$closingBraces+='}';out+=' else { ';}}var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all)){out+=' '+$nextValid+' = true; if ('+$data+'.length > '+$i+') { ';var $passData=$data+'['+$i+']';$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;$it.errorPath=it.util.getPathExpr(it.errorPath,$i,it.opts.jsonPointers,true);$it.dataPathArr[$dataNxt]=$i;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}out+=' }  ';if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}}}if((0,_typeof2["default"])($additionalItems)=='object'&&(it.opts.strictKeywords?(0,_typeof2["default"])($additionalItems)=='object'&&Object.keys($additionalItems).length>0:it.util.schemaHasRules($additionalItems,it.RULES.all))){$it.schema=$additionalItems;$it.schemaPath=it.schemaPath+'.additionalItems';$it.errSchemaPath=it.errSchemaPath+'/additionalItems';out+=' '+$nextValid+' = true; if ('+$data+'.length > '+$schema.length+') {  for (var '+$idx+' = '+$schema.length+'; '+$idx+' < '+$data+'.length; '+$idx+'++) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+'['+$idx+']';$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}if($breakOnError){out+=' if (!'+$nextValid+') break; ';}out+=' } }  ';if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}}else if(it.opts.strictKeywords?(0,_typeof2["default"])($schema)=='object'&&Object.keys($schema).length>0:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+='  for (var '+$idx+' = '+0+'; '+$idx+' < '+$data+'.length; '+$idx+'++) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+'['+$idx+']';$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}if($breakOnError){out+=' if (!'+$nextValid+') break; ';}out+=' }';}if($breakOnError){out+=' '+$closingBraces+' if ('+$errs+' == errors) {';}out=it.util.cleanUpCode(out);return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],782:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_properties(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $key='key'+$lvl,$idx='idx'+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$dataProperties='dataProperties'+$lvl;var $schemaKeys=Object.keys($schema||{}),$pProperties=it.schema.patternProperties||{},$pPropertyKeys=Object.keys($pProperties),$aProperties=it.schema.additionalProperties,$someProperties=$schemaKeys.length||$pPropertyKeys.length,$noAdditional=$aProperties===false,$additionalIsSchema=(0,_typeof2["default"])($aProperties)=='object'&&Object.keys($aProperties).length,$removeAdditional=it.opts.removeAdditional,$checkAdditional=$noAdditional||$additionalIsSchema||$removeAdditional,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;var $required=it.schema.required;if($required&&!(it.opts.$data&&$required.$data)&&$required.length<it.opts.loopRequired)var $requiredHash=it.util.toHash($required);out+='var '+$errs+' = errors;var '+$nextValid+' = true;';if($ownProperties){out+=' var '+$dataProperties+' = undefined;';}if($checkAdditional){if($ownProperties){out+=' '+$dataProperties+' = '+$dataProperties+' || Object.keys('+$data+'); for (var '+$idx+'=0; '+$idx+'<'+$dataProperties+'.length; '+$idx+'++) { var '+$key+' = '+$dataProperties+'['+$idx+']; ';}else{out+=' for (var '+$key+' in '+$data+') { ';}if($someProperties){out+=' var isAdditional'+$lvl+' = !(false ';if($schemaKeys.length){if($schemaKeys.length>8){out+=' || validate.schema'+$schemaPath+'.hasOwnProperty('+$key+') ';}else{var arr1=$schemaKeys;if(arr1){var $propertyKey,i1=-1,l1=arr1.length-1;while(i1<l1){$propertyKey=arr1[i1+=1];out+=' || '+$key+' == '+it.util.toQuotedString($propertyKey)+' ';}}}}if($pPropertyKeys.length){var arr2=$pPropertyKeys;if(arr2){var $pProperty,$i=-1,l2=arr2.length-1;while($i<l2){$pProperty=arr2[$i+=1];out+=' || '+it.usePattern($pProperty)+'.test('+$key+') ';}}}out+=' ); if (isAdditional'+$lvl+') { ';}if($removeAdditional=='all'){out+=' delete '+$data+'['+$key+']; ';}else{var $currentErrorPath=it.errorPath;var $additionalProperty='\' + '+$key+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);}if($noAdditional){if($removeAdditional){out+=' delete '+$data+'['+$key+']; ';}else{out+=' '+$nextValid+' = false; ';var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+'/additionalProperties';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'additionalProperties'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { additionalProperty: \''+$additionalProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is an invalid additional property';}else{out+='should NOT have additional properties';}out+='\' ';}if(it.opts.verbose){out+=' , schema: false , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}$errSchemaPath=$currErrSchemaPath;if($breakOnError){out+=' break; ';}}}else if($additionalIsSchema){if($removeAdditional=='failing'){out+=' var '+$errs+' = errors;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$aProperties;$it.schemaPath=it.schemaPath+'.additionalProperties';$it.errSchemaPath=it.errSchemaPath+'/additionalProperties';$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+'['+$key+']';$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}out+=' if (!'+$nextValid+') { errors = '+$errs+'; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete '+$data+'['+$key+']; }  ';it.compositeRule=$it.compositeRule=$wasComposite;}else{$it.schema=$aProperties;$it.schemaPath=it.schemaPath+'.additionalProperties';$it.errSchemaPath=it.errSchemaPath+'/additionalProperties';$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+'['+$key+']';$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}if($breakOnError){out+=' if (!'+$nextValid+') break; ';}}}it.errorPath=$currentErrorPath;}if($someProperties){out+=' } ';}out+=' }  ';if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}var $useDefaults=it.opts.useDefaults&&!it.compositeRule;if($schemaKeys.length){var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if(it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all)){var $prop=it.util.getProperty($propertyKey),$passData=$data+$prop,$hasDefault=$useDefaults&&$sch["default"]!==undefined;$it.schema=$sch;$it.schemaPath=$schemaPath+$prop;$it.errSchemaPath=$errSchemaPath+'/'+it.util.escapeFragment($propertyKey);$it.errorPath=it.util.getPath(it.errorPath,$propertyKey,it.opts.jsonPointers);$it.dataPathArr[$dataNxt]=it.util.toQuotedString($propertyKey);var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){$code=it.util.varReplace($code,$nextData,$passData);var $useData=$passData;}else{var $useData=$nextData;out+=' var '+$nextData+' = '+$passData+'; ';}if($hasDefault){out+=' '+$code+' ';}else{if($requiredHash&&$requiredHash[$propertyKey]){out+=' if ( '+$useData+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=') { '+$nextValid+' = false; ';var $currentErrorPath=it.errorPath,$currErrSchemaPath=$errSchemaPath,$missingProperty=it.util.escapeQuotes($propertyKey);if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers);}$errSchemaPath=it.errSchemaPath+'/required';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'required'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { missingProperty: \''+$missingProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+$missingProperty+'\\\'';}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}$errSchemaPath=$currErrSchemaPath;it.errorPath=$currentErrorPath;out+=' } else { ';}else{if($breakOnError){out+=' if ( '+$useData+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=') { '+$nextValid+' = true; } else { ';}else{out+=' if ('+$useData+' !== undefined ';if($ownProperties){out+=' &&   Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=' ) { ';}}out+=' '+$code+' } ';}}if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}}}if($pPropertyKeys.length){var arr4=$pPropertyKeys;if(arr4){var $pProperty,i4=-1,l4=arr4.length-1;while(i4<l4){$pProperty=arr4[i4+=1];var $sch=$pProperties[$pProperty];if(it.opts.strictKeywords?(0,_typeof2["default"])($sch)=='object'&&Object.keys($sch).length>0:it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=it.schemaPath+'.patternProperties'+it.util.getProperty($pProperty);$it.errSchemaPath=it.errSchemaPath+'/patternProperties/'+it.util.escapeFragment($pProperty);if($ownProperties){out+=' '+$dataProperties+' = '+$dataProperties+' || Object.keys('+$data+'); for (var '+$idx+'=0; '+$idx+'<'+$dataProperties+'.length; '+$idx+'++) { var '+$key+' = '+$dataProperties+'['+$idx+']; ';}else{out+=' for (var '+$key+' in '+$data+') { ';}out+=' if ('+it.usePattern($pProperty)+'.test('+$key+')) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+'['+$key+']';$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}if($breakOnError){out+=' if (!'+$nextValid+') break; ';}out+=' } ';if($breakOnError){out+=' else '+$nextValid+' = true; ';}out+=' }  ';if($breakOnError){out+=' if ('+$nextValid+') { ';$closingBraces+='}';}}}}}if($breakOnError){out+=' '+$closingBraces+' if ('+$errs+' == errors) {';}out=it.util.cleanUpCode(out);return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],779:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_not(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid='valid'+$it.level;if(it.opts.strictKeywords?(0,_typeof2["default"])($schema)=='object'&&Object.keys($schema).length>0:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=' var '+$errs+' = errors;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.createErrors=false;var $allErrorsOption;if($it.opts.allErrors){$allErrorsOption=$it.opts.allErrors;$it.opts.allErrors=false;}out+=' '+it.validate($it)+' ';$it.createErrors=true;if($allErrorsOption)$it.opts.allErrors=$allErrorsOption;it.compositeRule=$it.compositeRule=$wasComposite;out+=' if ('+$nextValid+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'not'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should NOT be valid\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } else {  errors = '+$errs+'; if (vErrors !== null) { if ('+$errs+') vErrors.length = '+$errs+'; else vErrors = null; } ';if(it.opts.allErrors){out+=' } ';}}else{out+='  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'not'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should NOT be valid\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if($breakOnError){out+=' if (false) { ';}}return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],785:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_required(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+$lvl+' = '+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}var $vSchema='schema'+$lvl;if(!$isData){if($schema.length<it.opts.loopRequired&&it.schema.properties&&Object.keys(it.schema.properties).length){var $required=[];var arr1=$schema;if(arr1){var $property,i1=-1,l1=arr1.length-1;while(i1<l1){$property=arr1[i1+=1];var $propertySch=it.schema.properties[$property];if(!($propertySch&&(it.opts.strictKeywords?(0,_typeof2["default"])($propertySch)=='object'&&Object.keys($propertySch).length>0:it.util.schemaHasRules($propertySch,it.RULES.all)))){$required[$required.length]=$property;}}}}else{var $required=$schema;}}if($isData||$required.length){var $currentErrorPath=it.errorPath,$loopRequired=$isData||$required.length>=it.opts.loopRequired,$ownProperties=it.opts.ownProperties;if($breakOnError){out+=' var missing'+$lvl+'; ';if($loopRequired){if(!$isData){out+=' var '+$vSchema+' = validate.schema'+$schemaPath+'; ';}var $i='i'+$lvl,$propertyPath='schema'+$lvl+'['+$i+']',$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers);}out+=' var '+$valid+' = true; ';if($isData){out+=' if (schema'+$lvl+' === undefined) '+$valid+' = true; else if (!Array.isArray(schema'+$lvl+')) '+$valid+' = false; else {';}out+=' for (var '+$i+' = 0; '+$i+' < '+$vSchema+'.length; '+$i+'++) { '+$valid+' = '+$data+'['+$vSchema+'['+$i+']] !== undefined ';if($ownProperties){out+=' &&   Object.prototype.hasOwnProperty.call('+$data+', '+$vSchema+'['+$i+']) ';}out+='; if (!'+$valid+') break; } ';if($isData){out+='  }  ';}out+='  if (!'+$valid+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'required'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { missingProperty: \''+$missingProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+$missingProperty+'\\\'';}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } else { ';}else{out+=' if ( ';var arr2=$required;if(arr2){var $propertyKey,$i=-1,l2=arr2.length-1;while($i<l2){$propertyKey=arr2[$i+=1];if($i){out+=' || ';}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=' ( ( '+$useData+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=') && (missing'+$lvl+' = '+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+') ) ';}}out+=') {  ';var $propertyPath='missing'+$lvl,$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+' + '+$propertyPath;}var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+'required'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { missingProperty: \''+$missingProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+$missingProperty+'\\\'';}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+__err+']); ';}else{out+=' validate.errors = ['+__err+']; return false; ';}}else{out+=' var err = '+__err+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}out+=' } else { ';}}else{if($loopRequired){if(!$isData){out+=' var '+$vSchema+' = validate.schema'+$schemaPath+'; ';}var $i='i'+$lvl,$propertyPath='schema'+$lvl+'['+$i+']',$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers);}if($isData){out+=' if ('+$vSchema+' && !Array.isArray('+$vSchema+')) {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'required'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { missingProperty: \''+$missingProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+$missingProperty+'\\\'';}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ('+$vSchema+' !== undefined) { ';}out+=' for (var '+$i+' = 0; '+$i+' < '+$vSchema+'.length; '+$i+'++) { if ('+$data+'['+$vSchema+'['+$i+']] === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', '+$vSchema+'['+$i+']) ';}out+=') {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'required'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { missingProperty: \''+$missingProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+$missingProperty+'\\\'';}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';if($isData){out+='  }  ';}}else{var arr3=$required;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers);}out+=' if ( '+$useData+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+$data+', \''+it.util.escapeQuotes($propertyKey)+'\') ';}out+=') {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'required'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { missingProperty: \''+$missingProperty+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+$missingProperty+'\\\'';}out+='\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';}}}}it.errorPath=$currentErrorPath;}else if($breakOnError){out+=' if (true) {';}return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],783:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function generate_propertyNames(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;out+='var '+$errs+' = errors;';if(it.opts.strictKeywords?(0,_typeof2["default"])($schema)=='object'&&Object.keys($schema).length>0:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;var $key='key'+$lvl,$idx='idx'+$lvl,$i='i'+$lvl,$invalidName='\' + '+$key+' + \'',$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$dataProperties='dataProperties'+$lvl,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;if($ownProperties){out+=' var '+$dataProperties+' = undefined; ';}if($ownProperties){out+=' '+$dataProperties+' = '+$dataProperties+' || Object.keys('+$data+'); for (var '+$idx+'=0; '+$idx+'<'+$dataProperties+'.length; '+$idx+'++) { var '+$key+' = '+$dataProperties+'['+$idx+']; ';}else{out+=' for (var '+$key+' in '+$data+') { ';}out+=' var startErrs'+$lvl+' = errors; ';var $passData=$key;var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+it.util.varReplace($code,$nextData,$passData)+' ';}else{out+=' var '+$nextData+' = '+$passData+'; '+$code+' ';}it.compositeRule=$it.compositeRule=$wasComposite;out+=' if (!'+$nextValid+') { for (var '+$i+'=startErrs'+$lvl+'; '+$i+'<errors; '+$i+'++) { vErrors['+$i+'].propertyName = '+$key+'; }   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+'propertyNames'+'\' , dataPath: (dataPath || \'\') + '+it.errorPath+' , schemaPath: '+it.util.toQuotedString($errSchemaPath)+' , params: { propertyName: \''+$invalidName+'\' } ';if(it.opts.messages!==false){out+=' , message: \'property name \\\''+$invalidName+'\\\' is invalid\' ';}if(it.opts.verbose){out+=' , schema: validate.schema'+$schemaPath+' , parentSchema: validate.schema'+it.schemaPath+' , data: '+$data+' ';}out+=' } ';}else{out+=' {} ';}out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}if($breakOnError){out+=' break; ';}out+=' } }';}if($breakOnError){out+=' '+$closingBraces+' if ('+$errs+' == errors) {';}out=it.util.cleanUpCode(out);return out;};

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],791:[function(require,module,exports){
arguments[4][68][0].apply(exports,arguments)
},{"dup":68}],794:[function(require,module,exports){
arguments[4][73][0].apply(exports,arguments)
},{"dup":73,"safe-buffer":1072}],1072:[function(require,module,exports){
arguments[4][639][0].apply(exports,arguments)
},{"buffer":1133,"dup":639}],795:[function(require,module,exports){
arguments[4][132][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"buffer":1104,"dup":132}],796:[function(require,module,exports){
arguments[4][133][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"crypto":1104,"dup":133}],797:[function(require,module,exports){
arguments[4][134][0].apply(exports,arguments)
},{"dup":134,"safe-buffer":1072}],798:[function(require,module,exports){
arguments[4][135][0].apply(exports,arguments)
},{"./aes":797,"./ghash":802,"./incr32":803,"buffer-xor":826,"cipher-base":827,"dup":135,"inherits":895,"safe-buffer":1072}],803:[function(require,module,exports){
arguments[4][140][0].apply(exports,arguments)
},{"dup":140}],827:[function(require,module,exports){
arguments[4][169][0].apply(exports,arguments)
},{"dup":169,"inherits":895,"safe-buffer":1072,"stream":1259,"string_decoder":1279}],826:[function(require,module,exports){
(function (Buffer){
module.exports=function xor(a,b){var length=Math.min(a.length,b.length);var buffer=new Buffer(length);for(var i=0;i<length;++i){buffer[i]=a[i]^b[i];}return buffer;};

}).call(this,require("buffer").Buffer)

},{"buffer":1133}],895:[function(require,module,exports){
arguments[4][129][0].apply(exports,arguments)
},{"dup":129}],802:[function(require,module,exports){
arguments[4][139][0].apply(exports,arguments)
},{"dup":139,"safe-buffer":1072}],799:[function(require,module,exports){
arguments[4][136][0].apply(exports,arguments)
},{"./decrypter":800,"./encrypter":801,"./modes/list.json":811,"dup":136}],811:[function(require,module,exports){
arguments[4][148][0].apply(exports,arguments)
},{"dup":148}],800:[function(require,module,exports){
arguments[4][137][0].apply(exports,arguments)
},{"./aes":797,"./authCipher":798,"./modes":810,"./streamCipher":813,"cipher-base":827,"dup":137,"evp_bytestokey":878,"inherits":895,"safe-buffer":1072}],801:[function(require,module,exports){
arguments[4][138][0].apply(exports,arguments)
},{"./aes":797,"./authCipher":798,"./modes":810,"./streamCipher":813,"cipher-base":827,"dup":138,"evp_bytestokey":878,"inherits":895,"safe-buffer":1072}],813:[function(require,module,exports){
arguments[4][150][0].apply(exports,arguments)
},{"./aes":797,"cipher-base":827,"dup":150,"inherits":895,"safe-buffer":1072}],810:[function(require,module,exports){
arguments[4][147][0].apply(exports,arguments)
},{"./cbc":804,"./cfb":805,"./cfb1":806,"./cfb8":807,"./ctr":808,"./ecb":809,"./list.json":811,"./ofb":812,"dup":147}],878:[function(require,module,exports){
arguments[4][290][0].apply(exports,arguments)
},{"dup":290,"md5.js":1030,"safe-buffer":1072}],804:[function(require,module,exports){
arguments[4][141][0].apply(exports,arguments)
},{"buffer-xor":826,"dup":141}],805:[function(require,module,exports){
arguments[4][142][0].apply(exports,arguments)
},{"buffer-xor":826,"dup":142,"safe-buffer":1072}],806:[function(require,module,exports){
arguments[4][143][0].apply(exports,arguments)
},{"dup":143,"safe-buffer":1072}],807:[function(require,module,exports){
arguments[4][144][0].apply(exports,arguments)
},{"dup":144,"safe-buffer":1072}],808:[function(require,module,exports){
arguments[4][145][0].apply(exports,arguments)
},{"../incr32":803,"buffer-xor":826,"dup":145,"safe-buffer":1072}],809:[function(require,module,exports){
arguments[4][146][0].apply(exports,arguments)
},{"dup":146}],812:[function(require,module,exports){
(function (Buffer){
var xor=require('buffer-xor');function getBlock(self){self._prev=self._cipher.encryptBlock(self._prev);return self._prev;}exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)]);}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad);};

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"buffer-xor":826}],814:[function(require,module,exports){
arguments[4][151][0].apply(exports,arguments)
},{"browserify-aes/browser":799,"browserify-aes/modes":810,"browserify-des":815,"browserify-des/modes":816,"dup":151,"evp_bytestokey":878}],816:[function(require,module,exports){
arguments[4][153][0].apply(exports,arguments)
},{"dup":153}],815:[function(require,module,exports){
arguments[4][152][0].apply(exports,arguments)
},{"cipher-base":827,"des.js":834,"dup":152,"inherits":895,"safe-buffer":1072}],834:[function(require,module,exports){
arguments[4][212][0].apply(exports,arguments)
},{"./des/cbc":835,"./des/cipher":836,"./des/des":837,"./des/ede":838,"./des/utils":839,"dup":212}],817:[function(require,module,exports){
(function (Buffer){
var bn=require('bn.js');var randomBytes=require('randombytes');module.exports=crt;function blind(priv){var r=getr(priv);var blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)};}function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var mod=bn.mont(priv.modulus);var blinded=new bn(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(bn.mont(priv.prime1));var c2=blinded.toRed(bn.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1);var m2=c2.redPow(priv.exponent2);m1=m1.fromRed();m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);h.imul(q);m2.iadd(h);return new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(false,len));}crt.getr=getr;function getr(priv){var len=priv.modulus.byteLength();var r=new bn(randomBytes(len));while(r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2)){r=new bn(randomBytes(len));}return r;}

}).call(this,require("buffer").Buffer)

},{"bn.js":795,"buffer":1133,"randombytes":1067}],1067:[function(require,module,exports){
(function (process,global){
'use strict';var MAX_BYTES=65536;var MAX_UINT32=4294967295;function oldBrowser(){throw new Error('Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11');}var Buffer=require('safe-buffer').Buffer;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){module.exports=randomBytes;}else{module.exports=oldBrowser;}function randomBytes(size,cb){if(size>MAX_UINT32)throw new RangeError('requested too many random bytes');var bytes=Buffer.allocUnsafe(size);if(size>0){if(size>MAX_BYTES){for(var generated=0;generated<size;generated+=MAX_BYTES){crypto.getRandomValues(bytes.slice(generated,generated+MAX_BYTES));}}else{crypto.getRandomValues(bytes);}}if(typeof cb==='function'){return process.nextTick(function(){cb(null,bytes);});}return bytes;}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1221,"safe-buffer":1072}],818:[function(require,module,exports){
arguments[4][157][0].apply(exports,arguments)
},{"./browser/algorithms.json":819,"dup":157}],819:[function(require,module,exports){
arguments[4][158][0].apply(exports,arguments)
},{"dup":158}],820:[function(require,module,exports){
arguments[4][159][0].apply(exports,arguments)
},{"dup":159}],821:[function(require,module,exports){
(function (Buffer){
var createHash=require('create-hash');var stream=require('stream');var inherits=require('inherits');var sign=require('./sign');var verify=require('./verify');var algorithms=require('./algorithms.json');Object.keys(algorithms).forEach(function(key){algorithms[key].id=new Buffer(algorithms[key].id,'hex');algorithms[key.toLowerCase()]=algorithms[key];});function Sign(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hashType=data.hash;this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign;}inherits(Sign,stream.Writable);Sign.prototype._write=function _write(data,_,done){this._hash.update(data);done();};Sign.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc);this._hash.update(data);return this;};Sign.prototype.sign=function signMethod(key,enc){this.end();var hash=this._hash.digest();var sig=sign(hash,key,this._hashType,this._signType,this._tag);return enc?sig.toString(enc):sig;};function Verify(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign;}inherits(Verify,stream.Writable);Verify.prototype._write=function _write(data,_,done){this._hash.update(data);done();};Verify.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc);this._hash.update(data);return this;};Verify.prototype.verify=function verifyMethod(key,sig,enc){if(typeof sig==='string')sig=new Buffer(sig,enc);this.end();var hash=this._hash.digest();return verify(sig,hash,key,this._signType,this._tag);};function createSign(algorithm){return new Sign(algorithm);}function createVerify(algorithm){return new Verify(algorithm);}module.exports={/* common-shake removed: Sign:createSign *//* common-shake removed: Verify:createVerify *//* common-shake removed: createSign:createSign *//* common-shake removed: createVerify:createVerify */};

}).call(this,require("buffer").Buffer)

},{"./algorithms.json":819,"./sign":822,"./verify":823,"buffer":1133,"create-hash":829,"inherits":895,"stream":1259}],829:[function(require,module,exports){
arguments[4][173][0].apply(exports,arguments)
},{"cipher-base":827,"dup":173,"inherits":895,"md5.js":1030,"ripemd160":1070,"sha.js":1080}],823:[function(require,module,exports){
(function (Buffer){
var BN=require('bn.js');var EC=require('elliptic').ec;var parseKeys=require('parse-asn1');var curves=require('./curves.json');function verify(sig,hash,key,signType,tag){var pub=parseKeys(key);if(pub.type==='ec'){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');return ecVerify(sig,hash,pub);}else if(pub.type==='dsa'){if(signType!=='dsa')throw new Error('wrong public key type');return dsaVerify(sig,hash,pub);}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');}hash=Buffer.concat([tag,hash]);var len=pub.modulus.byteLength();var pad=[1];var padNum=0;while(hash.length+pad.length+2<len){pad.push(0xff);padNum++;}pad.push(0x00);var i=-1;while(++i<hash.length){pad.push(hash[i]);}pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red);sig=sig.redPow(new BN(pub.publicExponent));sig=new Buffer(sig.fromRed().toArray());var out=padNum<8?1:0;len=Math.min(sig.length,pad.length);if(sig.length!==pad.length)out=1;i=-1;while(++i<len){out|=sig[i]^pad[i];}return out===0;}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join('.')];if(!curveId)throw new Error('unknown curve '+pub.data.algorithm.curve.join('.'));var curve=new EC(curveId);var pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey);}function dsaVerify(sig,hash,pub){var p=pub.data.p;var q=pub.data.q;var g=pub.data.g;var y=pub.data.pub_key;var unpacked=parseKeys.signature.decode(sig,'der');var s=unpacked.s;var r=unpacked.r;checkValue(s,q);checkValue(r,q);var montp=BN.mont(p);var w=s.invm(q);var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return v.cmp(r)===0;}function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error('invalid sig');if(b.cmp(q)>=q)throw new Error('invalid sig');}module.exports=verify;

}).call(this,require("buffer").Buffer)

},{"./curves.json":820,"bn.js":795,"buffer":1133,"elliptic":844,"parse-asn1":1040}],822:[function(require,module,exports){
(function (Buffer){
var createHmac=require('create-hmac');var crt=require('browserify-rsa');var EC=require('elliptic').ec;var BN=require('bn.js');var parseKeys=require('parse-asn1');var curves=require('./curves.json');function sign(hash,key,hashType,signType,tag){var priv=parseKeys(key);if(priv.curve){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');return ecSign(hash,priv);}else if(priv.type==='dsa'){if(signType!=='dsa')throw new Error('wrong private key type');return dsaSign(hash,priv,hashType);}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');}hash=Buffer.concat([tag,hash]);var len=priv.modulus.byteLength();var pad=[0,1];while(hash.length+pad.length+1<len){pad.push(0xff);}pad.push(0x00);var i=-1;while(++i<hash.length){pad.push(hash[i]);}var out=crt(pad,priv);return out;}function ecSign(hash,priv){var curveId=curves[priv.curve.join('.')];if(!curveId)throw new Error('unknown curve '+priv.curve.join('.'));var curve=new EC(curveId);var key=curve.keyFromPrivate(priv.privateKey);var out=key.sign(hash);return new Buffer(out.toDER());}function dsaSign(hash,priv,algo){var x=priv.params.priv_key;var p=priv.params.p;var q=priv.params.q;var g=priv.params.g;var r=new BN(0);var k;var H=bits2int(hash,q).mod(q);var s=false;var kv=getKey(x,q,hash,algo);while(s===false){k=makeKey(q,kv,algo);r=makeR(g,k,p,q);s=k.invm(q).imul(H.add(x.mul(r))).mod(q);if(s.cmpn(0)===0){s=false;r=new BN(0);}}return toDER(r,s);}function toDER(r,s){r=r.toArray();s=s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);var total=r.length+s.length+4;var res=[0x30,total,0x02,r.length];res=res.concat(r,[0x02,s.length],s);return new Buffer(res);}function getKey(x,q,hash,algo){x=new Buffer(x.toArray());if(x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0);x=Buffer.concat([zeros,x]);}var hlen=hash.length;var hbits=bits2octets(hash,q);var v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);k.fill(0);k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();return{k:k,v:v};}function bits2int(obits,q){var bits=new BN(obits);var shift=(obits.length<<3)-q.bitLength();if(shift>0)bits.ishrn(shift);return bits;}function bits2octets(bits,q){bits=bits2int(bits,q);bits=bits.mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0);out=Buffer.concat([zeros,out]);}return out;}function makeKey(q,kv,algo){var t;var k;do{t=new Buffer(0);while(t.length*8<q.bitLength()){kv.v=createHmac(algo,kv.k).update(kv.v).digest();t=Buffer.concat([t,kv.v]);}k=bits2int(t,q);kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest();kv.v=createHmac(algo,kv.k).update(kv.v).digest();}while(k.cmp(q)!==-1);return k;}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q);}module.exports=sign;module.exports.getKey=getKey;module.exports.makeKey=makeKey;

}).call(this,require("buffer").Buffer)

},{"./curves.json":820,"bn.js":795,"browserify-rsa":817,"buffer":1133,"create-hmac":831,"elliptic":844,"parse-asn1":1040}],831:[function(require,module,exports){
arguments[4][175][0].apply(exports,arguments)
},{"./legacy":832,"cipher-base":827,"create-hash/md5":830,"dup":175,"inherits":895,"ripemd160":1070,"safe-buffer":1072,"sha.js":1080}],1040:[function(require,module,exports){
arguments[4][503][0].apply(exports,arguments)
},{"./aesid.json":1036,"./asn1":1037,"./fixProc":1039,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"browserify-aes":799,"dup":503,"pbkdf2":1055,"safe-buffer":1072}],844:[function(require,module,exports){
arguments[4][114][0].apply(exports,arguments)
},{"../package.json":859,"./elliptic/curve":847,"./elliptic/curves":850,"./elliptic/ec":851,"./elliptic/eddsa":854,"./elliptic/utils":858,"brorand":796,"dup":114}],825:[function(require,module,exports){
arguments[4][164][0].apply(exports,arguments)
},{"dup":164,"safe-buffer":1072}],828:[function(require,module,exports){
(function (Buffer){
var elliptic=require('elliptic');var BN=require('bn.js');module.exports=function createECDH(curve){return new ECDH(curve);};var aliases={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}};aliases.p224=aliases.secp224r1;aliases.p256=aliases.secp256r1=aliases.prime256v1;aliases.p192=aliases.secp192r1=aliases.prime192v1;aliases.p384=aliases.secp384r1;aliases.p521=aliases.secp521r1;function ECDH(curve){this.curveType=aliases[curve];if(!this.curveType){this.curveType={name:curve};}this.curve=new elliptic.ec(this.curveType.name);this.keys=void 0;}ECDH.prototype.generateKeys=function(enc,format){this.keys=this.curve.genKeyPair();return this.getPublicKey(enc,format);};ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||'utf8';if(!Buffer.isBuffer(other)){other=new Buffer(other,inenc);}var otherPub=this.curve.keyFromPublic(other).getPublic();var out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength);};ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==='compressed',true);if(format==='hybrid'){if(key[key.length-1]%2){key[0]=7;}else{key[0]=6;}}return formatReturnValue(key,enc);};ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc);};ECDH.prototype.setPublicKey=function(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}this.keys._importPublic(pub);return this;};ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}var _priv=new BN(priv);_priv=_priv.toString(16);this.keys=this.curve.genKeyPair();this.keys._importPrivate(_priv);return this;};function formatReturnValue(bn,enc,len){if(!Array.isArray(bn)){bn=bn.toArray();}var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0);buf=Buffer.concat([zeros,buf]);}if(!enc){return buf;}else{return buf.toString(enc);}}

}).call(this,require("buffer").Buffer)

},{"bn.js":795,"buffer":1133,"elliptic":844}],1070:[function(require,module,exports){
arguments[4][536][0].apply(exports,arguments)
},{"buffer":1133,"dup":536,"hash-base":881,"inherits":895}],1030:[function(require,module,exports){
arguments[4][478][0].apply(exports,arguments)
},{"dup":478,"hash-base":881,"inherits":895,"safe-buffer":1072}],1080:[function(require,module,exports){
arguments[4][652][0].apply(exports,arguments)
},{"./sha":1081,"./sha1":1082,"./sha224":1083,"./sha256":1084,"./sha384":1085,"./sha512":1086,"dup":652}],830:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"dup":174,"md5.js":1030}],832:[function(require,module,exports){
arguments[4][176][0].apply(exports,arguments)
},{"cipher-base":827,"dup":176,"inherits":895,"safe-buffer":1072}],1068:[function(require,module,exports){
(function (process,global){
'use strict';function oldBrowser(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11');}var safeBuffer=require('safe-buffer');var randombytes=require('randombytes');var Buffer=safeBuffer.Buffer;var kBufferMaxLength=safeBuffer.kMaxLength;var crypto=global.crypto||global.msCrypto;var kMaxUint32=Math.pow(2,32)-1;function assertOffset(offset,length){if(typeof offset!=='number'||offset!==offset){throw new TypeError('offset must be a number');}if(offset>kMaxUint32||offset<0){throw new TypeError('offset must be a uint32');}if(offset>kBufferMaxLength||offset>length){throw new RangeError('offset out of range');}}function assertSize(size,offset,length){if(typeof size!=='number'||size!==size){throw new TypeError('size must be a number');}if(size>kMaxUint32||size<0){throw new TypeError('size must be a uint32');}if(size+offset>length||size>kBufferMaxLength){throw new RangeError('buffer too small');}}if(crypto&&crypto.getRandomValues||!process.browser){/* common-shake removed: exports.randomFill = */ void randomFill;/* common-shake removed: exports.randomFillSync = */ void randomFillSync;}else{/* common-shake removed: exports.randomFill = */ void oldBrowser;/* common-shake removed: exports.randomFillSync = */ void oldBrowser;}function randomFill(buf,offset,size,cb){if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array');}if(typeof offset==='function'){cb=offset;offset=0;size=buf.length;}else if(typeof size==='function'){cb=size;size=buf.length-offset;}else if(typeof cb!=='function'){throw new TypeError('"cb" argument must be a function');}assertOffset(offset,buf.length);assertSize(size,offset,buf.length);return actualFill(buf,offset,size,cb);}function actualFill(buf,offset,size,cb){if(process.browser){var ourBuf=buf.buffer;var uint=new Uint8Array(ourBuf,offset,size);crypto.getRandomValues(uint);if(cb){process.nextTick(function(){cb(null,buf);});return;}return buf;}if(cb){randombytes(size,function(err,bytes){if(err){return cb(err);}bytes.copy(buf,offset);cb(null,buf);});return;}var bytes=randombytes(size);bytes.copy(buf,offset);return buf;}function randomFillSync(buf,offset,size){if(typeof offset==='undefined'){offset=0;}if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array');}assertOffset(offset,buf.length);if(size===undefined)size=buf.length-offset;assertSize(size,offset,buf.length);return actualFill(buf,offset,size);}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1221,"randombytes":1067,"safe-buffer":1072}],1055:[function(require,module,exports){
arguments[4][518][0].apply(exports,arguments)
},{"./lib/async":1056,"./lib/sync":1059,"dup":518}],840:[function(require,module,exports){
(function (Buffer){
var generatePrime=require('./lib/generatePrime');var primes=require('./lib/primes.json');var DH=require('./lib/dh');function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,'hex');var gen=new Buffer(primes[mod].gen,'hex');return new DH(prime,gen);}var ENCODINGS={'binary':true,'hex':true,'base64':true};function createDiffieHellman(prime,enc,generator,genc){if(Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined){return createDiffieHellman(prime,'binary',enc,generator);}enc=enc||'binary';genc=genc||'binary';generator=generator||new Buffer([2]);if(!Buffer.isBuffer(generator)){generator=new Buffer(generator,genc);}if(typeof prime==='number'){return new DH(generatePrime(prime,generator),generator,true);}if(!Buffer.isBuffer(prime)){prime=new Buffer(prime,enc);}return new DH(prime,generator,true);}/* common-shake removed: exports.DiffieHellmanGroup = */ void 0, /* common-shake removed: exports.createDiffieHellmanGroup = */ void 0, /* common-shake removed: exports.getDiffieHellman = */ getDiffieHellman;/* common-shake removed: exports.createDiffieHellman = */ void 0, /* common-shake removed: exports.DiffieHellman = */ createDiffieHellman;

}).call(this,require("buffer").Buffer)

},{"./lib/dh":841,"./lib/generatePrime":842,"./lib/primes.json":843,"buffer":1133}],1061:[function(require,module,exports){
arguments[4][525][0].apply(exports,arguments)
},{"./privateDecrypt":1063,"./publicEncrypt":1064,"dup":525}],839:[function(require,module,exports){
arguments[4][217][0].apply(exports,arguments)
},{"dup":217}],836:[function(require,module,exports){
arguments[4][214][0].apply(exports,arguments)
},{"dup":214,"minimalistic-assert":1032}],837:[function(require,module,exports){
arguments[4][215][0].apply(exports,arguments)
},{"./cipher":836,"./utils":839,"dup":215,"inherits":895,"minimalistic-assert":1032}],835:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"dup":213,"inherits":895,"minimalistic-assert":1032}],838:[function(require,module,exports){
arguments[4][216][0].apply(exports,arguments)
},{"./cipher":836,"./des":837,"dup":216,"inherits":895,"minimalistic-assert":1032}],1032:[function(require,module,exports){
arguments[4][480][0].apply(exports,arguments)
},{"dup":480}],843:[function(require,module,exports){
arguments[4][221][0].apply(exports,arguments)
},{"dup":221}],842:[function(require,module,exports){
arguments[4][220][0].apply(exports,arguments)
},{"bn.js":795,"dup":220,"miller-rabin":1031,"randombytes":1067}],841:[function(require,module,exports){
(function (Buffer){
var BN=require('bn.js');var MillerRabin=require('miller-rabin');var millerRabin=new MillerRabin();var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=require('./generatePrime');var randomBytes=require('randombytes');module.exports=DH;function setPublicKey(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}this._pub=new BN(pub);return this;}function setPrivateKey(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}this._priv=new BN(priv);return this;}var primeCache={};function checkPrime(prime,generator){var gen=generator.toString('hex');var hex=[gen,prime.toString(16)].join('_');if(hex in primeCache){return primeCache[hex];}var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime)){error+=1;if(gen==='02'||gen==='05'){error+=8;}else{error+=4;}primeCache[hex]=error;return error;}if(!millerRabin.test(prime.shrn(1))){error+=2;}var rem;switch(gen){case'02':if(prime.mod(TWENTYFOUR).cmp(ELEVEN)){error+=8;}break;case'05':rem=prime.mod(TEN);if(rem.cmp(THREE)&&rem.cmp(SEVEN)){error+=8;}break;default:error+=4;}primeCache[hex]=error;return error;}function DH(prime,generator,malleable){this.setGenerator(generator);this.__prime=new BN(prime);this._prime=BN.mont(this.__prime);this._primeLen=prime.length;this._pub=undefined;this._priv=undefined;this._primeCode=undefined;if(malleable){this.setPublicKey=setPublicKey;this.setPrivateKey=setPrivateKey;}else{this._primeCode=8;}}Object.defineProperty(DH.prototype,'verifyError',{enumerable:true,get:function get(){if(typeof this._primeCode!=='number'){this._primeCode=checkPrime(this.__prime,this.__gen);}return this._primeCode;}});DH.prototype.generateKeys=function(){if(!this._priv){this._priv=new BN(randomBytes(this._primeLen));}this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed();return this.getPublicKey();};DH.prototype.computeSecret=function(other){other=new BN(other);other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0);out=Buffer.concat([front,out]);}return out;};DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc);};DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc);};DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc);};DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc);};DH.prototype.setGenerator=function(gen,enc){enc=enc||'utf8';if(!Buffer.isBuffer(gen)){gen=new Buffer(gen,enc);}this.__gen=gen;this._gen=new BN(gen);return this;};function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());if(!enc){return buf;}else{return buf.toString(enc);}}

}).call(this,require("buffer").Buffer)

},{"./generatePrime":842,"bn.js":795,"buffer":1133,"miller-rabin":1031,"randombytes":1067}],1031:[function(require,module,exports){
arguments[4][479][0].apply(exports,arguments)
},{"bn.js":795,"brorand":796,"dup":479}],859:[function(require,module,exports){
arguments[4][237][0].apply(exports,arguments)
},{"dup":237}],858:[function(require,module,exports){
arguments[4][236][0].apply(exports,arguments)
},{"bn.js":795,"dup":236,"minimalistic-assert":1032,"minimalistic-crypto-utils":1033}],847:[function(require,module,exports){
arguments[4][117][0].apply(exports,arguments)
},{"./base":845,"./edwards":846,"./mont":848,"./short":849,"dup":117}],851:[function(require,module,exports){
arguments[4][229][0].apply(exports,arguments)
},{"../curves":850,"../utils":858,"./key":852,"./signature":853,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"bn.js":795,"brorand":796,"dup":229,"hmac-drbg":894}],854:[function(require,module,exports){
arguments[4][232][0].apply(exports,arguments)
},{"../curves":850,"../utils":858,"./key":855,"./signature":856,"dup":232,"hash.js":882}],850:[function(require,module,exports){
arguments[4][228][0].apply(exports,arguments)
},{"./curve":847,"./precomputed/secp256k1":857,"./utils":858,"dup":228,"hash.js":882}],845:[function(require,module,exports){
arguments[4][223][0].apply(exports,arguments)
},{"../utils":858,"bn.js":795,"dup":223}],846:[function(require,module,exports){
arguments[4][224][0].apply(exports,arguments)
},{"../utils":858,"./base":845,"bn.js":795,"dup":224,"inherits":895}],849:[function(require,module,exports){
arguments[4][227][0].apply(exports,arguments)
},{"../utils":858,"./base":845,"bn.js":795,"dup":227,"inherits":895}],848:[function(require,module,exports){
arguments[4][226][0].apply(exports,arguments)
},{"../utils":858,"./base":845,"bn.js":795,"dup":226,"inherits":895}],857:[function(require,module,exports){
arguments[4][127][0].apply(exports,arguments)
},{"dup":127}],882:[function(require,module,exports){
arguments[4][292][0].apply(exports,arguments)
},{"./hash/common":883,"./hash/hmac":884,"./hash/ripemd":885,"./hash/sha":886,"./hash/utils":893,"dup":292}],853:[function(require,module,exports){
arguments[4][231][0].apply(exports,arguments)
},{"../utils":858,"bn.js":795,"dup":231}],852:[function(require,module,exports){
arguments[4][230][0].apply(exports,arguments)
},{"../utils":858,"bn.js":795,"dup":230}],894:[function(require,module,exports){
arguments[4][304][0].apply(exports,arguments)
},{"dup":304,"hash.js":882,"minimalistic-assert":1032,"minimalistic-crypto-utils":1033}],855:[function(require,module,exports){
arguments[4][233][0].apply(exports,arguments)
},{"../utils":858,"dup":233}],856:[function(require,module,exports){
arguments[4][234][0].apply(exports,arguments)
},{"../utils":858,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"bn.js":795,"dup":234}],1033:[function(require,module,exports){
arguments[4][481][0].apply(exports,arguments)
},{"dup":481}],860:[function(require,module,exports){
arguments[4][244][0].apply(exports,arguments)
},{"dup":244}],861:[function(require,module,exports){
arguments[4][255][0].apply(exports,arguments)
},{"dup":255}],863:[function(require,module,exports){
arguments[4][248][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"assert":1100,"bn.js":795,"create-hash":829,"dup":248,"ethjs-util":877,"keccak":899,"rlp":1071,"safe-buffer":1072,"secp256k1":1073}],1071:[function(require,module,exports){
(function (Buffer){
Object.defineProperty(exports,"__esModule",{value:true});var BN=require("bn.js");function encode(input){if(Array.isArray(input)){var output=[];for(var i=0;i<input.length;i++){output.push(encode(input[i]));}var buf=Buffer.concat(output);return Buffer.concat([encodeLength(buf.length,192),buf]);}else{var inputBuf=toBuffer(input);return inputBuf.length===1&&inputBuf[0]<128?inputBuf:Buffer.concat([encodeLength(inputBuf.length,128),inputBuf]);}}exports.encode=encode;function safeParseInt(v,base){if(v.slice(0,2)==='00'){throw new Error('invalid RLP: extra zeros');}return parseInt(v,base);}function encodeLength(len,offset){if(len<56){return Buffer.from([len+offset]);}else{var hexLength=intToHex(len);var lLength=hexLength.length/2;var firstByte=intToHex(offset+55+lLength);return Buffer.from(firstByte+hexLength,'hex');}}function decode(input,stream){if(stream===void 0){stream=false;}if(!input||input.length===0){return Buffer.from([]);}var inputBuffer=toBuffer(input);var decoded=_decode(inputBuffer);if(stream){return decoded;}if(decoded.remainder.length!==0){throw new Error('invalid remainder');}return decoded.data;}exports.decode=decode;function getLength(input){if(!input||input.length===0){return Buffer.from([]);}var inputBuffer=toBuffer(input);var firstByte=inputBuffer[0];if(firstByte<=0x7f){return inputBuffer.length;}else if(firstByte<=0xb7){return firstByte-0x7f;}else if(firstByte<=0xbf){return firstByte-0xb6;}else if(firstByte<=0xf7){return firstByte-0xbf;}else{var llength=firstByte-0xf6;var length=safeParseInt(inputBuffer.slice(1,llength).toString('hex'),16);return llength+length;}}exports.getLength=getLength;function _decode(input){var length,llength,data,innerRemainder,d;var decoded=[];var firstByte=input[0];if(firstByte<=0x7f){return{data:input.slice(0,1),remainder:input.slice(1)};}else if(firstByte<=0xb7){length=firstByte-0x7f;if(firstByte===0x80){data=Buffer.from([]);}else{data=input.slice(1,length);}if(length===2&&data[0]<0x80){throw new Error('invalid rlp encoding: byte must be less 0x80');}return{data:data,remainder:input.slice(length)};}else if(firstByte<=0xbf){llength=firstByte-0xb6;length=safeParseInt(input.slice(1,llength).toString('hex'),16);data=input.slice(llength,length+llength);if(data.length<length){throw new Error('invalid RLP');}return{data:data,remainder:input.slice(length+llength)};}else if(firstByte<=0xf7){length=firstByte-0xbf;innerRemainder=input.slice(1,length);while(innerRemainder.length){d=_decode(innerRemainder);decoded.push(d.data);innerRemainder=d.remainder;}return{data:decoded,remainder:input.slice(length)};}else{llength=firstByte-0xf6;length=safeParseInt(input.slice(1,llength).toString('hex'),16);var totalLength=llength+length;if(totalLength>input.length){throw new Error('invalid rlp: total length is larger than the data');}innerRemainder=input.slice(llength,totalLength);if(innerRemainder.length===0){throw new Error('invalid rlp, List has a invalid length');}while(innerRemainder.length){d=_decode(innerRemainder);decoded.push(d.data);innerRemainder=d.remainder;}return{data:decoded,remainder:input.slice(totalLength)};}}function isHexPrefixed(str){return str.slice(0,2)==='0x';}function stripHexPrefix(str){if(typeof str!=='string'){return str;}return isHexPrefixed(str)?str.slice(2):str;}function intToHex(integer){if(integer<0){throw new Error('Invalid integer as argument, must be unsigned!');}var hex=integer.toString(16);return hex.length%2?"0"+hex:hex;}function padToEven(a){return a.length%2?"0"+a:a;}function intToBuffer(integer){var hex=intToHex(integer);return Buffer.from(hex,'hex');}function toBuffer(v){if(!Buffer.isBuffer(v)){if(typeof v==='string'){if(isHexPrefixed(v)){return Buffer.from(padToEven(stripHexPrefix(v)),'hex');}else{return Buffer.from(v);}}else if(typeof v==='number'){if(!v){return Buffer.from([]);}else{return intToBuffer(v);}}else if(v===null||v===undefined){return Buffer.from([]);}else if(v instanceof Uint8Array){return Buffer.from(v);}else if(BN.isBN(v)){return Buffer.from(v.toArray());}else{throw new Error('invalid type');}}return v;}

}).call(this,require("buffer").Buffer)

},{"bn.js":795,"buffer":1133}],899:[function(require,module,exports){
arguments[4][249][0].apply(exports,arguments)
},{"./lib/api":900,"./lib/keccak":904,"dup":249}],877:[function(require,module,exports){
(function (Buffer){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var isHexPrefixed=require('is-hex-prefixed');var stripHexPrefix=require('strip-hex-prefix');function padToEven(value){var a=value;if(typeof a!=='string'){throw new Error('[ethjs-util] while padding to even, value must be string, is currently '+(0,_typeof2["default"])(a)+', while padToEven.');}if(a.length%2){a='0'+a;}return a;}function intToHex(i){var hex=i.toString(16);return'0x'+hex;}function intToBuffer(i){var hex=intToHex(i);return new Buffer(padToEven(hex.slice(2)),'hex');}function getBinarySize(str){if(typeof str!=='string'){throw new Error('[ethjs-util] while getting binary size, method getBinarySize requires input \'str\' to be type String, got \''+(0,_typeof2["default"])(str)+'\'.');}return Buffer.byteLength(str,'utf8');}function arrayContainsArray(superset,subset,some){if(Array.isArray(superset)!==true){throw new Error('[ethjs-util] method arrayContainsArray requires input \'superset\' to be an array got type \''+(0,_typeof2["default"])(superset)+'\'');}if(Array.isArray(subset)!==true){throw new Error('[ethjs-util] method arrayContainsArray requires input \'subset\' to be an array got type \''+(0,_typeof2["default"])(subset)+'\'');}return subset[Boolean(some)&&'some'||'every'](function(value){return superset.indexOf(value)>=0;});}function toUtf8(hex){var bufferValue=new Buffer(padToEven(stripHexPrefix(hex).replace(/^0+|0+$/g,'')),'hex');return bufferValue.toString('utf8');}function toAscii(hex){var str='';var i=0,l=hex.length;if(hex.substring(0,2)==='0x'){i=2;}for(;i<l;i+=2){var code=parseInt(hex.substr(i,2),16);str+=String.fromCharCode(code);}return str;}function fromUtf8(stringValue){var str=new Buffer(stringValue,'utf8');return'0x'+padToEven(str.toString('hex')).replace(/^0+|0+$/g,'');}function fromAscii(stringValue){var hex='';for(var i=0;i<stringValue.length;i++){var code=stringValue.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?'0'+n:n;}return'0x'+hex;}function getKeys(params,key,allowEmpty){if(!Array.isArray(params)){throw new Error('[ethjs-util] method getKeys expecting type Array as \'params\' input, got \''+(0,_typeof2["default"])(params)+'\'');}if(typeof key!=='string'){throw new Error('[ethjs-util] method getKeys expecting type String for input \'key\' got \''+(0,_typeof2["default"])(key)+'\'.');}var result=[];for(var i=0;i<params.length;i++){var value=params[i][key];if(allowEmpty&&!value){value='';}else if(typeof value!=='string'){throw new Error('invalid abi');}result.push(value);}return result;}function isHexString(value,length){if(typeof value!=='string'||!value.match(/^0x[0-9A-Fa-f]*$/)){return false;}if(length&&value.length!==2+2*length){return false;}return true;}module.exports={arrayContainsArray:arrayContainsArray,intToBuffer:intToBuffer,getBinarySize:getBinarySize,isHexPrefixed:isHexPrefixed,stripHexPrefix:stripHexPrefix,padToEven:padToEven,intToHex:intToHex,fromAscii:fromAscii,fromUtf8:fromUtf8,toAscii:toAscii,toUtf8:toUtf8,getKeys:getKeys,isHexString:isHexString};

}).call(this,require("buffer").Buffer)

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"buffer":1133,"is-hex-prefixed":896,"strip-hex-prefix":1087}],1073:[function(require,module,exports){
arguments[4][645][0].apply(exports,arguments)
},{"./lib":1077,"./lib/elliptic":1076,"dup":645}],864:[function(require,module,exports){
arguments[4][274][0].apply(exports,arguments)
},{"dup":274}],865:[function(require,module,exports){
arguments[4][275][0].apply(exports,arguments)
},{"./utils/bignumber":869,"dup":275}],869:[function(require,module,exports){
arguments[4][280][0].apply(exports,arguments)
},{"../errors":866,"./bytes":870,"./properties":872,"bn.js":795,"dup":280}],866:[function(require,module,exports){
arguments[4][276][0].apply(exports,arguments)
},{"./_version":864,"dup":276}],867:[function(require,module,exports){
arguments[4][278][0].apply(exports,arguments)
},{"../constants":865,"../errors":866,"./address":868,"./bignumber":869,"./bytes":870,"./properties":872,"./utf8":874,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":278}],874:[function(require,module,exports){
arguments[4][285][0].apply(exports,arguments)
},{"../constants":865,"../errors":866,"./bytes":870,"dup":285}],870:[function(require,module,exports){
arguments[4][281][0].apply(exports,arguments)
},{"../errors":866,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":281}],872:[function(require,module,exports){
arguments[4][283][0].apply(exports,arguments)
},{"../errors":866,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":283}],868:[function(require,module,exports){
arguments[4][279][0].apply(exports,arguments)
},{"../errors":866,"./bytes":870,"./keccak256":871,"./rlp":873,"bn.js":795,"dup":279}],873:[function(require,module,exports){
arguments[4][284][0].apply(exports,arguments)
},{"./bytes":870,"dup":284}],871:[function(require,module,exports){
arguments[4][282][0].apply(exports,arguments)
},{"./bytes":870,"dup":282,"js-sha3":897}],897:[function(require,module,exports){
(function (process,global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.5.7
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2016
 * @license MIT
 */(function(){'use strict';var root=(typeof window==="undefined"?"undefined":(0,_typeof2["default"])(window))==='object'?window:{};var NODE_JS=!root.JS_SHA3_NO_NODE_JS&&(typeof process==="undefined"?"undefined":(0,_typeof2["default"])(process))==='object'&&process.versions&&process.versions.node;if(NODE_JS){root=global;}var COMMON_JS=!root.JS_SHA3_NO_COMMON_JS&&(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))==='object'&&module.exports;var HEX_CHARS='0123456789abcdef'.split('');var SHAKE_PADDING=[31,7936,2031616,520093696];var KECCAK_PADDING=[1,256,65536,16777216];var PADDING=[6,1536,393216,100663296];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var BITS=[224,256,384,512];var SHAKE_BITS=[128,256];var OUTPUT_TYPES=['hex','buffer','arrayBuffer','array'];var createOutputMethod=function createOutputMethod(bits,padding,outputType){return function(message){return new Keccak(bits,padding,bits).update(message)[outputType]();};};var createShakeOutputMethod=function createShakeOutputMethod(bits,padding,outputType){return function(message,outputBits){return new Keccak(bits,padding,outputBits).update(message)[outputType]();};};var createMethod=function createMethod(bits,padding){var method=createOutputMethod(bits,padding,'hex');method.create=function(){return new Keccak(bits,padding,bits);};method.update=function(message){return method.create().update(message);};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(bits,padding,type);}return method;};var createShakeMethod=function createShakeMethod(bits,padding){var method=createShakeOutputMethod(bits,padding,'hex');method.create=function(outputBits){return new Keccak(bits,padding,outputBits);};method.update=function(message,outputBits){return method.create(outputBits).update(message);};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createShakeOutputMethod(bits,padding,type);}return method;};var algorithms=[{name:'keccak',padding:KECCAK_PADDING,bits:BITS,createMethod:createMethod},{name:'sha3',padding:PADDING,bits:BITS,createMethod:createMethod},{name:'shake',padding:SHAKE_PADDING,bits:SHAKE_BITS,createMethod:createShakeMethod}];var methods={},methodNames=[];for(var i=0;i<algorithms.length;++i){var algorithm=algorithms[i];var bits=algorithm.bits;for(var j=0;j<bits.length;++j){var methodName=algorithm.name+'_'+bits[j];methodNames.push(methodName);methods[methodName]=algorithm.createMethod(bits[j],algorithm.padding);}}function Keccak(bits,padding,outputBits){this.blocks=[];this.s=[];this.padding=padding;this.outputBits=outputBits;this.reset=true;this.block=0;this.start=0;this.blockCount=1600-(bits<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=outputBits>>5;this.extraBytes=(outputBits&31)>>3;for(var i=0;i<50;++i){this.s[i]=0;}}Keccak.prototype.update=function(message){var notString=typeof message!=='string';if(notString&&message.constructor===ArrayBuffer){message=new Uint8Array(message);}var length=message.length,blocks=this.blocks,byteCount=this.byteCount,blockCount=this.blockCount,index=0,s=this.s,i,code;while(index<length){if(this.reset){this.reset=false;blocks[0]=this.block;for(i=1;i<blockCount+1;++i){blocks[i]=0;}}if(notString){for(i=this.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3];}}else{for(i=this.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<0x80){blocks[i>>2]|=code<<SHIFT[i++&3];}else if(code<0x800){blocks[i>>2]|=(0xc0|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else if(code<0xd800||code>=0xe000){blocks[i>>2]|=(0xe0|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else{code=0x10000+((code&0x3ff)<<10|message.charCodeAt(++index)&0x3ff);blocks[i>>2]|=(0xf0|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>12&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}}}this.lastByteIndex=i;if(i>=byteCount){this.start=i-byteCount;this.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);this.reset=true;}else{this.start=i;}}return this;};Keccak.prototype.finalize=function(){var blocks=this.blocks,i=this.lastByteIndex,blockCount=this.blockCount,s=this.s;blocks[i>>2]|=this.padding[i&3];if(this.lastByteIndex===this.byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0;}}blocks[blockCount-1]|=0x80000000;for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);};Keccak.prototype.toString=Keccak.prototype.hex=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var hex='',block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F]+HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F]+HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F]+HEX_CHARS[block>>28&0x0F]+HEX_CHARS[block>>24&0x0F];}if(j%blockCount===0){f(s);i=0;}}if(extraBytes){block=s[i];if(extraBytes>0){hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F];}if(extraBytes>1){hex+=HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F];}if(extraBytes>2){hex+=HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F];}}return hex;};Keccak.prototype.arrayBuffer=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var bytes=this.outputBits>>3;var buffer;if(extraBytes){buffer=new ArrayBuffer(outputBlocks+1<<2);}else{buffer=new ArrayBuffer(bytes);}var array=new Uint32Array(buffer);while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){array[j]=s[i];}if(j%blockCount===0){f(s);}}if(extraBytes){array[i]=s[i];buffer=buffer.slice(0,bytes);}return buffer;};Keccak.prototype.buffer=Keccak.prototype.arrayBuffer;Keccak.prototype.digest=Keccak.prototype.array=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var array=[],offset,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){offset=j<<2;block=s[i];array[offset]=block&0xFF;array[offset+1]=block>>8&0xFF;array[offset+2]=block>>16&0xFF;array[offset+3]=block>>24&0xFF;}if(j%blockCount===0){f(s);}}if(extraBytes){offset=j<<2;block=s[i];if(extraBytes>0){array[offset]=block&0xFF;}if(extraBytes>1){array[offset+1]=block>>8&0xFF;}if(extraBytes>2){array[offset+2]=block>>16&0xFF;}}return array;};var f=function f(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1];}};if(COMMON_JS){module.exports=methods;}else{for(var i=0;i<methodNames.length;++i){root[methodNames[i]]=methods[methodNames[i]];}}})();

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"_process":1221}],875:[function(require,module,exports){
arguments[4][286][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"bn.js":876,"dup":286,"number-to-bn":1035}],1035:[function(require,module,exports){
arguments[4][498][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"bn.js":1034,"dup":498,"strip-hex-prefix":1087}],876:[function(require,module,exports){
arguments[4][287][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":287}],1087:[function(require,module,exports){
arguments[4][659][0].apply(exports,arguments)
},{"dup":659,"is-hex-prefixed":896}],896:[function(require,module,exports){
arguments[4][310][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":310}],881:[function(require,module,exports){
arguments[4][291][0].apply(exports,arguments)
},{"dup":291,"inherits":895,"safe-buffer":1072,"stream":1259}],885:[function(require,module,exports){
arguments[4][295][0].apply(exports,arguments)
},{"./common":883,"./utils":893,"dup":295}],893:[function(require,module,exports){
arguments[4][303][0].apply(exports,arguments)
},{"dup":303,"inherits":895,"minimalistic-assert":1032}],883:[function(require,module,exports){
arguments[4][293][0].apply(exports,arguments)
},{"./utils":893,"dup":293,"minimalistic-assert":1032}],884:[function(require,module,exports){
arguments[4][294][0].apply(exports,arguments)
},{"./utils":893,"dup":294,"minimalistic-assert":1032}],886:[function(require,module,exports){
arguments[4][296][0].apply(exports,arguments)
},{"./sha/1":887,"./sha/224":888,"./sha/256":889,"./sha/384":890,"./sha/512":891,"dup":296}],890:[function(require,module,exports){
arguments[4][300][0].apply(exports,arguments)
},{"../utils":893,"./512":891,"dup":300}],888:[function(require,module,exports){
arguments[4][298][0].apply(exports,arguments)
},{"../utils":893,"./256":889,"dup":298}],891:[function(require,module,exports){
arguments[4][301][0].apply(exports,arguments)
},{"../common":883,"../utils":893,"dup":301,"minimalistic-assert":1032}],889:[function(require,module,exports){
arguments[4][299][0].apply(exports,arguments)
},{"../common":883,"../utils":893,"./common":892,"dup":299,"minimalistic-assert":1032}],887:[function(require,module,exports){
arguments[4][297][0].apply(exports,arguments)
},{"../common":883,"../utils":893,"./common":892,"dup":297}],892:[function(require,module,exports){
arguments[4][302][0].apply(exports,arguments)
},{"../utils":893,"dup":302}],904:[function(require,module,exports){
arguments[4][254][0].apply(exports,arguments)
},{"./keccak-state-unroll":903,"dup":254,"safe-buffer":1072}],900:[function(require,module,exports){
arguments[4][250][0].apply(exports,arguments)
},{"./keccak":901,"./shake":902,"dup":250}],901:[function(require,module,exports){
arguments[4][251][0].apply(exports,arguments)
},{"dup":251,"inherits":895,"safe-buffer":1072,"stream":1259}],902:[function(require,module,exports){
arguments[4][252][0].apply(exports,arguments)
},{"dup":252,"inherits":895,"safe-buffer":1072,"stream":1259}],903:[function(require,module,exports){
arguments[4][253][0].apply(exports,arguments)
},{"dup":253}],905:[function(require,module,exports){
arguments[4][319][0].apply(exports,arguments)
},{"./_getNative":958,"./_root":993,"dup":319}],993:[function(require,module,exports){
arguments[4][435][0].apply(exports,arguments)
},{"./_freeGlobal":954,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":435}],958:[function(require,module,exports){
arguments[4][394][0].apply(exports,arguments)
},{"./_baseIsNative":934,"./_getValue":962,"dup":394}],906:[function(require,module,exports){
arguments[4][320][0].apply(exports,arguments)
},{"./_hashClear":964,"./_hashDelete":965,"./_hashGet":966,"./_hashHas":967,"./_hashSet":968,"dup":320}],965:[function(require,module,exports){
arguments[4][403][0].apply(exports,arguments)
},{"dup":403}],968:[function(require,module,exports){
arguments[4][406][0].apply(exports,arguments)
},{"./_nativeCreate":988,"dup":406}],967:[function(require,module,exports){
arguments[4][405][0].apply(exports,arguments)
},{"./_nativeCreate":988,"dup":405}],964:[function(require,module,exports){
arguments[4][402][0].apply(exports,arguments)
},{"./_nativeCreate":988,"dup":402}],966:[function(require,module,exports){
arguments[4][404][0].apply(exports,arguments)
},{"./_nativeCreate":988,"dup":404}],907:[function(require,module,exports){
arguments[4][321][0].apply(exports,arguments)
},{"./_listCacheClear":975,"./_listCacheDelete":976,"./_listCacheGet":977,"./_listCacheHas":978,"./_listCacheSet":979,"dup":321}],975:[function(require,module,exports){
arguments[4][416][0].apply(exports,arguments)
},{"dup":416}],976:[function(require,module,exports){
arguments[4][417][0].apply(exports,arguments)
},{"./_assocIndexOf":922,"dup":417}],978:[function(require,module,exports){
arguments[4][419][0].apply(exports,arguments)
},{"./_assocIndexOf":922,"dup":419}],979:[function(require,module,exports){
arguments[4][420][0].apply(exports,arguments)
},{"./_assocIndexOf":922,"dup":420}],977:[function(require,module,exports){
arguments[4][418][0].apply(exports,arguments)
},{"./_assocIndexOf":922,"dup":418}],908:[function(require,module,exports){
arguments[4][322][0].apply(exports,arguments)
},{"./_getNative":958,"./_root":993,"dup":322}],909:[function(require,module,exports){
arguments[4][323][0].apply(exports,arguments)
},{"./_mapCacheClear":980,"./_mapCacheDelete":981,"./_mapCacheGet":982,"./_mapCacheHas":983,"./_mapCacheSet":984,"dup":323}],982:[function(require,module,exports){
arguments[4][423][0].apply(exports,arguments)
},{"./_getMapData":956,"dup":423}],981:[function(require,module,exports){
arguments[4][422][0].apply(exports,arguments)
},{"./_getMapData":956,"dup":422}],983:[function(require,module,exports){
arguments[4][424][0].apply(exports,arguments)
},{"./_getMapData":956,"dup":424}],980:[function(require,module,exports){
arguments[4][421][0].apply(exports,arguments)
},{"./_Hash":906,"./_ListCache":907,"./_Map":908,"dup":421}],984:[function(require,module,exports){
arguments[4][425][0].apply(exports,arguments)
},{"./_getMapData":956,"dup":425}],910:[function(require,module,exports){
arguments[4][324][0].apply(exports,arguments)
},{"./_getNative":958,"./_root":993,"dup":324}],911:[function(require,module,exports){
arguments[4][325][0].apply(exports,arguments)
},{"./_getNative":958,"./_root":993,"dup":325}],912:[function(require,module,exports){
arguments[4][326][0].apply(exports,arguments)
},{"./_MapCache":909,"./_setCacheAdd":994,"./_setCacheHas":995,"dup":326}],994:[function(require,module,exports){
arguments[4][436][0].apply(exports,arguments)
},{"dup":436}],995:[function(require,module,exports){
arguments[4][437][0].apply(exports,arguments)
},{"dup":437}],913:[function(require,module,exports){
arguments[4][327][0].apply(exports,arguments)
},{"./_ListCache":907,"./_stackClear":997,"./_stackDelete":998,"./_stackGet":999,"./_stackHas":1000,"./_stackSet":1001,"dup":327}],999:[function(require,module,exports){
arguments[4][441][0].apply(exports,arguments)
},{"dup":441}],998:[function(require,module,exports){
arguments[4][440][0].apply(exports,arguments)
},{"dup":440}],1000:[function(require,module,exports){
arguments[4][442][0].apply(exports,arguments)
},{"dup":442}],997:[function(require,module,exports){
arguments[4][439][0].apply(exports,arguments)
},{"./_ListCache":907,"dup":439}],1001:[function(require,module,exports){
arguments[4][443][0].apply(exports,arguments)
},{"./_ListCache":907,"./_Map":908,"./_MapCache":909,"dup":443}],914:[function(require,module,exports){
arguments[4][328][0].apply(exports,arguments)
},{"./_root":993,"dup":328}],915:[function(require,module,exports){
arguments[4][329][0].apply(exports,arguments)
},{"./_root":993,"dup":329}],916:[function(require,module,exports){
arguments[4][330][0].apply(exports,arguments)
},{"./_getNative":958,"./_root":993,"dup":330}],917:[function(require,module,exports){
arguments[4][332][0].apply(exports,arguments)
},{"dup":332}],918:[function(require,module,exports){
arguments[4][333][0].apply(exports,arguments)
},{"./_baseTimes":943,"./_isIndex":969,"./isArguments":1009,"./isArray":1010,"./isBuffer":1013,"./isTypedArray":1022,"dup":333}],1009:[function(require,module,exports){
arguments[4][452][0].apply(exports,arguments)
},{"./_baseIsArguments":930,"./isObjectLike":1019,"dup":452}],1010:[function(require,module,exports){
arguments[4][453][0].apply(exports,arguments)
},{"dup":453}],1013:[function(require,module,exports){
arguments[4][456][0].apply(exports,arguments)
},{"./_root":993,"./stubFalse":1028,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":456}],1022:[function(require,module,exports){
arguments[4][467][0].apply(exports,arguments)
},{"./_baseIsTypedArray":935,"./_baseUnary":945,"./_nodeUtil":990,"dup":467}],969:[function(require,module,exports){
arguments[4][410][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":410}],943:[function(require,module,exports){
arguments[4][367][0].apply(exports,arguments)
},{"dup":367}],919:[function(require,module,exports){
arguments[4][334][0].apply(exports,arguments)
},{"dup":334}],920:[function(require,module,exports){
arguments[4][335][0].apply(exports,arguments)
},{"dup":335}],921:[function(require,module,exports){
arguments[4][336][0].apply(exports,arguments)
},{"dup":336}],922:[function(require,module,exports){
arguments[4][338][0].apply(exports,arguments)
},{"./eq":1005,"dup":338}],1005:[function(require,module,exports){
arguments[4][448][0].apply(exports,arguments)
},{"dup":448}],923:[function(require,module,exports){
arguments[4][344][0].apply(exports,arguments)
},{"./_baseForOwn":925,"./_createBaseEach":949,"dup":344}],949:[function(require,module,exports){
arguments[4][383][0].apply(exports,arguments)
},{"./isArrayLike":1011,"dup":383}],925:[function(require,module,exports){
arguments[4][346][0].apply(exports,arguments)
},{"./_baseFor":924,"./keys":1023,"dup":346}],924:[function(require,module,exports){
arguments[4][345][0].apply(exports,arguments)
},{"./_createBaseFor":950,"dup":345}],950:[function(require,module,exports){
arguments[4][384][0].apply(exports,arguments)
},{"dup":384}],1023:[function(require,module,exports){
arguments[4][469][0].apply(exports,arguments)
},{"./_arrayLikeKeys":918,"./_baseKeys":937,"./isArrayLike":1011,"dup":469}],926:[function(require,module,exports){
arguments[4][347][0].apply(exports,arguments)
},{"./_castPath":947,"./_toKey":1003,"dup":347}],1003:[function(require,module,exports){
arguments[4][445][0].apply(exports,arguments)
},{"./isSymbol":1021,"dup":445}],947:[function(require,module,exports){
arguments[4][371][0].apply(exports,arguments)
},{"./_isKey":970,"./_stringToPath":1002,"./isArray":1010,"./toString":1029,"dup":371}],927:[function(require,module,exports){
arguments[4][348][0].apply(exports,arguments)
},{"./_arrayPush":920,"./isArray":1010,"dup":348}],928:[function(require,module,exports){
arguments[4][349][0].apply(exports,arguments)
},{"./_Symbol":914,"./_getRawTag":959,"./_objectToString":991,"dup":349}],991:[function(require,module,exports){
arguments[4][433][0].apply(exports,arguments)
},{"dup":433}],959:[function(require,module,exports){
arguments[4][396][0].apply(exports,arguments)
},{"./_Symbol":914,"dup":396}],929:[function(require,module,exports){
arguments[4][350][0].apply(exports,arguments)
},{"dup":350}],930:[function(require,module,exports){
arguments[4][351][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isObjectLike":1019,"dup":351}],1019:[function(require,module,exports){
arguments[4][463][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":463}],931:[function(require,module,exports){
arguments[4][352][0].apply(exports,arguments)
},{"./_baseIsEqualDeep":932,"./isObjectLike":1019,"dup":352}],932:[function(require,module,exports){
arguments[4][353][0].apply(exports,arguments)
},{"./_Stack":913,"./_equalArrays":951,"./_equalByTag":952,"./_equalObjects":953,"./_getTag":961,"./isArray":1010,"./isBuffer":1013,"./isTypedArray":1022,"dup":353}],952:[function(require,module,exports){
arguments[4][387][0].apply(exports,arguments)
},{"./_Symbol":914,"./_Uint8Array":915,"./_equalArrays":951,"./_mapToArray":985,"./_setToArray":996,"./eq":1005,"dup":387}],951:[function(require,module,exports){
arguments[4][386][0].apply(exports,arguments)
},{"./_SetCache":912,"./_arraySome":921,"./_cacheHas":946,"dup":386}],953:[function(require,module,exports){
arguments[4][388][0].apply(exports,arguments)
},{"./_getAllKeys":955,"dup":388}],961:[function(require,module,exports){
arguments[4][399][0].apply(exports,arguments)
},{"./_DataView":905,"./_Map":908,"./_Promise":910,"./_Set":911,"./_WeakMap":916,"./_baseGetTag":928,"./_toSource":1004,"dup":399}],933:[function(require,module,exports){
arguments[4][355][0].apply(exports,arguments)
},{"./_Stack":913,"./_baseIsEqual":931,"dup":355}],934:[function(require,module,exports){
arguments[4][356][0].apply(exports,arguments)
},{"./_isMasked":972,"./_toSource":1004,"./isFunction":1014,"./isObject":1018,"dup":356}],1014:[function(require,module,exports){
arguments[4][457][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isObject":1018,"dup":457}],1004:[function(require,module,exports){
arguments[4][446][0].apply(exports,arguments)
},{"dup":446}],1018:[function(require,module,exports){
arguments[4][462][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":462}],972:[function(require,module,exports){
arguments[4][413][0].apply(exports,arguments)
},{"./_coreJsData":948,"dup":413}],935:[function(require,module,exports){
arguments[4][358][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isLength":1015,"./isObjectLike":1019,"dup":358}],1015:[function(require,module,exports){
arguments[4][458][0].apply(exports,arguments)
},{"dup":458}],936:[function(require,module,exports){
arguments[4][359][0].apply(exports,arguments)
},{"./_baseMatches":939,"./_baseMatchesProperty":940,"./identity":1008,"./isArray":1010,"./property":1026,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":359}],1008:[function(require,module,exports){
arguments[4][451][0].apply(exports,arguments)
},{"dup":451}],1026:[function(require,module,exports){
arguments[4][474][0].apply(exports,arguments)
},{"./_baseProperty":941,"./_basePropertyDeep":942,"./_isKey":970,"./_toKey":1003,"dup":474}],939:[function(require,module,exports){
arguments[4][363][0].apply(exports,arguments)
},{"./_baseIsMatch":933,"./_getMatchData":957,"./_matchesStrictComparable":986,"dup":363}],940:[function(require,module,exports){
arguments[4][364][0].apply(exports,arguments)
},{"./_baseIsEqual":931,"./_isKey":970,"./_isStrictComparable":974,"./_matchesStrictComparable":986,"./_toKey":1003,"./get":1006,"./hasIn":1007,"dup":364}],937:[function(require,module,exports){
arguments[4][360][0].apply(exports,arguments)
},{"./_isPrototype":973,"./_nativeKeys":989,"dup":360}],973:[function(require,module,exports){
arguments[4][414][0].apply(exports,arguments)
},{"dup":414}],989:[function(require,module,exports){
arguments[4][430][0].apply(exports,arguments)
},{"./_overArg":992,"dup":430}],938:[function(require,module,exports){
arguments[4][362][0].apply(exports,arguments)
},{"./_baseEach":923,"./isArrayLike":1011,"dup":362}],1011:[function(require,module,exports){
arguments[4][454][0].apply(exports,arguments)
},{"./isFunction":1014,"./isLength":1015,"dup":454}],986:[function(require,module,exports){
arguments[4][427][0].apply(exports,arguments)
},{"dup":427}],957:[function(require,module,exports){
arguments[4][393][0].apply(exports,arguments)
},{"./_isStrictComparable":974,"./keys":1023,"dup":393}],974:[function(require,module,exports){
arguments[4][415][0].apply(exports,arguments)
},{"./isObject":1018,"dup":415}],970:[function(require,module,exports){
arguments[4][411][0].apply(exports,arguments)
},{"./isArray":1010,"./isSymbol":1021,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":411}],1007:[function(require,module,exports){
arguments[4][450][0].apply(exports,arguments)
},{"./_baseHasIn":929,"./_hasPath":963,"dup":450}],1006:[function(require,module,exports){
arguments[4][449][0].apply(exports,arguments)
},{"./_baseGet":926,"dup":449}],941:[function(require,module,exports){
arguments[4][365][0].apply(exports,arguments)
},{"dup":365}],942:[function(require,module,exports){
arguments[4][366][0].apply(exports,arguments)
},{"./_baseGet":926,"dup":366}],944:[function(require,module,exports){
arguments[4][368][0].apply(exports,arguments)
},{"./_Symbol":914,"./_arrayMap":919,"./isArray":1010,"./isSymbol":1021,"dup":368}],1021:[function(require,module,exports){
arguments[4][466][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isObjectLike":1019,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":466}],945:[function(require,module,exports){
arguments[4][369][0].apply(exports,arguments)
},{"dup":369}],946:[function(require,module,exports){
arguments[4][370][0].apply(exports,arguments)
},{"dup":370}],1029:[function(require,module,exports){
arguments[4][477][0].apply(exports,arguments)
},{"./_baseToString":944,"dup":477}],1002:[function(require,module,exports){
arguments[4][444][0].apply(exports,arguments)
},{"./_memoizeCapped":987,"dup":444}],948:[function(require,module,exports){
arguments[4][382][0].apply(exports,arguments)
},{"./_root":993,"dup":382}],996:[function(require,module,exports){
arguments[4][438][0].apply(exports,arguments)
},{"dup":438}],985:[function(require,module,exports){
arguments[4][426][0].apply(exports,arguments)
},{"dup":426}],955:[function(require,module,exports){
arguments[4][390][0].apply(exports,arguments)
},{"./_baseGetAllKeys":927,"./_getSymbols":960,"./keys":1023,"dup":390}],954:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var freeGlobal=(typeof global==="undefined"?"undefined":(0,_typeof2["default"])(global))=='object'&&global&&global.Object===Object&&global;module.exports=freeGlobal;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],960:[function(require,module,exports){
arguments[4][397][0].apply(exports,arguments)
},{"./_arrayFilter":917,"./stubArray":1027,"dup":397}],956:[function(require,module,exports){
arguments[4][392][0].apply(exports,arguments)
},{"./_isKeyable":971,"dup":392}],971:[function(require,module,exports){
arguments[4][412][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":412}],962:[function(require,module,exports){
arguments[4][400][0].apply(exports,arguments)
},{"dup":400}],1027:[function(require,module,exports){
arguments[4][475][0].apply(exports,arguments)
},{"dup":475}],963:[function(require,module,exports){
arguments[4][401][0].apply(exports,arguments)
},{"./_castPath":947,"./_isIndex":969,"./_toKey":1003,"./isArguments":1009,"./isArray":1010,"./isLength":1015,"dup":401}],988:[function(require,module,exports){
arguments[4][429][0].apply(exports,arguments)
},{"./_getNative":958,"dup":429}],987:[function(require,module,exports){
arguments[4][428][0].apply(exports,arguments)
},{"./memoize":1025,"dup":428}],1025:[function(require,module,exports){
arguments[4][473][0].apply(exports,arguments)
},{"./_MapCache":909,"dup":473}],992:[function(require,module,exports){
arguments[4][434][0].apply(exports,arguments)
},{"dup":434}],990:[function(require,module,exports){
arguments[4][432][0].apply(exports,arguments)
},{"./_freeGlobal":954,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":432}],1012:[function(require,module,exports){
arguments[4][455][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isObjectLike":1019,"dup":455}],1028:[function(require,module,exports){
arguments[4][476][0].apply(exports,arguments)
},{"dup":476}],1016:[function(require,module,exports){
arguments[4][460][0].apply(exports,arguments)
},{"dup":460}],1017:[function(require,module,exports){
arguments[4][461][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isObjectLike":1019,"dup":461}],1020:[function(require,module,exports){
arguments[4][465][0].apply(exports,arguments)
},{"./_baseGetTag":928,"./isArray":1010,"./isObjectLike":1019,"dup":465}],1024:[function(require,module,exports){
arguments[4][472][0].apply(exports,arguments)
},{"./_arrayMap":919,"./_baseIteratee":936,"./_baseMap":938,"./isArray":1010,"dup":472}],1034:[function(require,module,exports){
arguments[4][287][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":287}],1036:[function(require,module,exports){
arguments[4][499][0].apply(exports,arguments)
},{"dup":499}],1037:[function(require,module,exports){
arguments[4][500][0].apply(exports,arguments)
},{"./certificate":1038,"asn1.js":1041,"dup":500}],1038:[function(require,module,exports){
arguments[4][501][0].apply(exports,arguments)
},{"asn1.js":1041,"dup":501}],1041:[function(require,module,exports){
arguments[4][504][0].apply(exports,arguments)
},{"./asn1/api":1042,"./asn1/base":1044,"./asn1/constants":1048,"./asn1/decoders":1050,"./asn1/encoders":1053,"bn.js":795,"dup":504}],1039:[function(require,module,exports){
arguments[4][502][0].apply(exports,arguments)
},{"browserify-aes":799,"dup":502,"evp_bytestokey":878,"safe-buffer":1072}],1042:[function(require,module,exports){
arguments[4][505][0].apply(exports,arguments)
},{"../asn1":1041,"dup":505,"inherits":895,"vm":1287}],1048:[function(require,module,exports){
arguments[4][511][0].apply(exports,arguments)
},{"./der":1047,"dup":511}],1050:[function(require,module,exports){
arguments[4][513][0].apply(exports,arguments)
},{"./der":1049,"./pem":1051,"dup":513}],1053:[function(require,module,exports){
arguments[4][516][0].apply(exports,arguments)
},{"./der":1052,"./pem":1054,"dup":516}],1044:[function(require,module,exports){
arguments[4][507][0].apply(exports,arguments)
},{"./buffer":1043,"./node":1045,"./reporter":1046,"dup":507}],1043:[function(require,module,exports){
arguments[4][506][0].apply(exports,arguments)
},{"../base":1044,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"buffer":1133,"dup":506,"inherits":895}],1046:[function(require,module,exports){
arguments[4][509][0].apply(exports,arguments)
},{"dup":509,"inherits":895}],1045:[function(require,module,exports){
arguments[4][508][0].apply(exports,arguments)
},{"../base":1044,"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"dup":508,"minimalistic-assert":1032}],1047:[function(require,module,exports){
arguments[4][510][0].apply(exports,arguments)
},{"../constants":1048,"dup":510}],1049:[function(require,module,exports){
arguments[4][512][0].apply(exports,arguments)
},{"../../asn1":1041,"dup":512,"inherits":895}],1051:[function(require,module,exports){
arguments[4][514][0].apply(exports,arguments)
},{"./der":1049,"buffer":1133,"dup":514,"inherits":895}],1052:[function(require,module,exports){
arguments[4][515][0].apply(exports,arguments)
},{"../../asn1":1041,"buffer":1133,"dup":515,"inherits":895}],1054:[function(require,module,exports){
arguments[4][517][0].apply(exports,arguments)
},{"./der":1052,"dup":517,"inherits":895}],1059:[function(require,module,exports){
arguments[4][522][0].apply(exports,arguments)
},{"./default-encoding":1057,"./precondition":1058,"create-hash/md5":830,"dup":522,"ripemd160":1070,"safe-buffer":1072,"sha.js":1080}],1056:[function(require,module,exports){
(function (process,global){
var checkParameters=require('./precondition');var defaultEncoding=require('./default-encoding');var sync=require('./sync');var Buffer=require('safe-buffer').Buffer;var ZERO_BUF;var subtle=global.crypto&&global.crypto.subtle;var toBrowser={'sha':'SHA-1','sha-1':'SHA-1','sha1':'SHA-1','sha256':'SHA-256','sha-256':'SHA-256','sha384':'SHA-384','sha-384':'SHA-384','sha-512':'SHA-512','sha512':'SHA-512'};var checks=[];function checkNative(algo){if(global.process&&!global.process.browser){return Promise.resolve(false);}if(!subtle||!subtle.importKey||!subtle.deriveBits){return Promise.resolve(false);}if(checks[algo]!==undefined){return checks[algo];}ZERO_BUF=ZERO_BUF||Buffer.alloc(8);var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return true;})["catch"](function(){return false;});checks[algo]=prom;return prom;}function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey('raw',password,{name:'PBKDF2'},false,['deriveBits']).then(function(key){return subtle.deriveBits({name:'PBKDF2',salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3);}).then(function(res){return Buffer.from(res);});}function resolvePromise(promise,callback){promise.then(function(out){process.nextTick(function(){callback(null,out);});},function(e){process.nextTick(function(){callback(e);});});}module.exports=function(password,salt,iterations,keylen,digest,callback){if(typeof digest==='function'){callback=digest;digest=undefined;}digest=digest||'sha1';var algo=toBrowser[digest.toLowerCase()];if(!algo||typeof global.Promise!=='function'){return process.nextTick(function(){var out;try{out=sync(password,salt,iterations,keylen,digest);}catch(e){return callback(e);}callback(null,out);});}checkParameters(password,salt,iterations,keylen);if(typeof callback!=='function')throw new Error('No callback provided to pbkdf2');if(!Buffer.isBuffer(password))password=Buffer.from(password,defaultEncoding);if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,defaultEncoding);resolvePromise(checkNative(algo).then(function(resp){if(resp)return browserPbkdf2(password,salt,iterations,keylen,algo);return sync(password,salt,iterations,keylen,digest);}),callback);};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./default-encoding":1057,"./precondition":1058,"./sync":1059,"_process":1221,"safe-buffer":1072}],1057:[function(require,module,exports){
(function (process){
var defaultEncoding;if(process.browser){defaultEncoding='utf-8';}else{var pVersionMajor=parseInt(process.version.split('.')[0].slice(1),10);defaultEncoding=pVersionMajor>=6?'utf-8':'binary';}module.exports=defaultEncoding;

}).call(this,require('_process'))

},{"_process":1221}],1058:[function(require,module,exports){
(function (Buffer){
var MAX_ALLOC=Math.pow(2,30)-1;function checkBuffer(buf,name){if(typeof buf!=='string'&&!Buffer.isBuffer(buf)){throw new TypeError(name+' must be a buffer or string');}}module.exports=function(password,salt,iterations,keylen){checkBuffer(password,'Password');checkBuffer(salt,'Salt');if(typeof iterations!=='number'){throw new TypeError('Iterations not a number');}if(iterations<0){throw new TypeError('Bad iterations');}if(typeof keylen!=='number'){throw new TypeError('Key length not a number');}if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen){throw new TypeError('Bad key length');}};

}).call(this,{"isBuffer":require("../../../../../ui/ui-dapps/node_modules/is-buffer/index.js")})

},{"../../../../../ui/ui-dapps/node_modules/is-buffer/index.js":1188}],1063:[function(require,module,exports){
arguments[4][527][0].apply(exports,arguments)
},{"./mgf":1062,"./withPublic":1065,"./xor":1066,"bn.js":795,"browserify-rsa":817,"create-hash":829,"dup":527,"parse-asn1":1040,"safe-buffer":1072}],1064:[function(require,module,exports){
arguments[4][528][0].apply(exports,arguments)
},{"./mgf":1062,"./withPublic":1065,"./xor":1066,"bn.js":795,"browserify-rsa":817,"create-hash":829,"dup":528,"parse-asn1":1040,"randombytes":1067,"safe-buffer":1072}],1062:[function(require,module,exports){
arguments[4][526][0].apply(exports,arguments)
},{"create-hash":829,"dup":526,"safe-buffer":1072}],1066:[function(require,module,exports){
arguments[4][530][0].apply(exports,arguments)
},{"dup":530}],1065:[function(require,module,exports){
arguments[4][529][0].apply(exports,arguments)
},{"bn.js":795,"dup":529,"safe-buffer":1072}],1076:[function(require,module,exports){
arguments[4][648][0].apply(exports,arguments)
},{"../messages.json":1078,"bn.js":795,"create-hash":829,"dup":648,"elliptic":844,"safe-buffer":1072}],1077:[function(require,module,exports){
arguments[4][649][0].apply(exports,arguments)
},{"./assert":1074,"./der":1075,"./messages.json":1078,"dup":649}],1074:[function(require,module,exports){
(function (Buffer){
'use strict';var toString=Object.prototype.toString;exports.isArray=function(value,message){if(!Array.isArray(value))throw TypeError(message);};exports.isBoolean=function(value,message){if(toString.call(value)!=='[object Boolean]')throw TypeError(message);};exports.isBuffer=function(value,message){if(!Buffer.isBuffer(value))throw TypeError(message);};exports.isFunction=function(value,message){if(toString.call(value)!=='[object Function]')throw TypeError(message);};exports.isNumber=function(value,message){if(toString.call(value)!=='[object Number]')throw TypeError(message);};exports.isObject=function(value,message){if(toString.call(value)!=='[object Object]')throw TypeError(message);};exports.isBufferLength=function(buffer,length,message){if(buffer.length!==length)throw RangeError(message);};exports.isBufferLength2=function(buffer,length1,length2,message){if(buffer.length!==length1&&buffer.length!==length2)throw RangeError(message);};exports.isLengthGTZero=function(value,message){if(value.length===0)throw RangeError(message);};exports.isNumberInInterval=function(number,x,y,message){if(number<=x||number>=y)throw RangeError(message);};

}).call(this,{"isBuffer":require("../../../../../ui/ui-dapps/node_modules/is-buffer/index.js")})

},{"../../../../../ui/ui-dapps/node_modules/is-buffer/index.js":1188}],1075:[function(require,module,exports){
arguments[4][647][0].apply(exports,arguments)
},{"bip66":794,"dup":647,"safe-buffer":1072}],1078:[function(require,module,exports){
arguments[4][650][0].apply(exports,arguments)
},{"dup":650}],1079:[function(require,module,exports){
arguments[4][651][0].apply(exports,arguments)
},{"dup":651,"safe-buffer":1072}],1082:[function(require,module,exports){
arguments[4][654][0].apply(exports,arguments)
},{"./hash":1079,"dup":654,"inherits":895,"safe-buffer":1072}],1083:[function(require,module,exports){
arguments[4][655][0].apply(exports,arguments)
},{"./hash":1079,"./sha256":1084,"dup":655,"inherits":895,"safe-buffer":1072}],1086:[function(require,module,exports){
arguments[4][658][0].apply(exports,arguments)
},{"./hash":1079,"dup":658,"inherits":895,"safe-buffer":1072}],1085:[function(require,module,exports){
arguments[4][657][0].apply(exports,arguments)
},{"./hash":1079,"./sha512":1086,"dup":657,"inherits":895,"safe-buffer":1072}],1084:[function(require,module,exports){
arguments[4][656][0].apply(exports,arguments)
},{"./hash":1079,"dup":656,"inherits":895,"safe-buffer":1072}],1081:[function(require,module,exports){
arguments[4][653][0].apply(exports,arguments)
},{"./hash":1079,"dup":653,"inherits":895,"safe-buffer":1072}],1089:[function(require,module,exports){
(function (global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));;(function(root){var freeExports=(typeof exports==="undefined"?"undefined":(0,_typeof2["default"])(exports))=='object'&&exports;var freeModule=(typeof module==="undefined"?"undefined":(0,_typeof2["default"])(module))=='object'&&module&&module.exports==freeExports&&module;var freeGlobal=(typeof global==="undefined"?"undefined":(0,_typeof2["default"])(global))=='object'&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal;}var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}return output;}function ucs2encode(array){var length=array.length;var index=-1;var value;var output='';while(++index<length){value=array[index];if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}output+=stringFromCharCode(value);}return output;}function checkScalarValue(codePoint){if(codePoint>=0xD800&&codePoint<=0xDFFF){throw Error('Lone surrogate U+'+codePoint.toString(16).toUpperCase()+' is not a scalar value');}}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&0x3F|0x80);}function encodeCodePoint(codePoint){if((codePoint&0xFFFFFF80)==0){return stringFromCharCode(codePoint);}var symbol='';if((codePoint&0xFFFFF800)==0){symbol=stringFromCharCode(codePoint>>6&0x1F|0xC0);}else if((codePoint&0xFFFF0000)==0){checkScalarValue(codePoint);symbol=stringFromCharCode(codePoint>>12&0x0F|0xE0);symbol+=createByte(codePoint,6);}else if((codePoint&0xFFE00000)==0){symbol=stringFromCharCode(codePoint>>18&0x07|0xF0);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6);}symbol+=stringFromCharCode(codePoint&0x3F|0x80);return symbol;}function utf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString='';while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint);}return byteString;}function readContinuationByte(){if(byteIndex>=byteCount){throw Error('Invalid byte index');}var continuationByte=byteArray[byteIndex]&0xFF;byteIndex++;if((continuationByte&0xC0)==0x80){return continuationByte&0x3F;}throw Error('Invalid continuation byte');}function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error('Invalid byte index');}if(byteIndex==byteCount){return false;}byte1=byteArray[byteIndex]&0xFF;byteIndex++;if((byte1&0x80)==0){return byte1;}if((byte1&0xE0)==0xC0){var byte2=readContinuationByte();codePoint=(byte1&0x1F)<<6|byte2;if(codePoint>=0x80){return codePoint;}else{throw Error('Invalid continuation byte');}}if((byte1&0xF0)==0xE0){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&0x0F)<<12|byte2<<6|byte3;if(codePoint>=0x0800){checkScalarValue(codePoint);return codePoint;}else{throw Error('Invalid continuation byte');}}if((byte1&0xF8)==0xF0){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&0x0F)<<0x12|byte2<<0x0C|byte3<<0x06|byte4;if(codePoint>=0x010000&&codePoint<=0x10FFFF){return codePoint;}}throw Error('Invalid UTF-8 detected');}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp);}return ucs2encode(codePoints);}var utf8={'version':'2.0.0','encode':utf8encode,'decode':utf8decode};if(typeof define=='function'&&(0,_typeof2["default"])(define.amd)=='object'&&define.amd){define(function(){return utf8;});}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=utf8;}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in utf8){hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key]);}}}else{root.utf8=utf8;}})(void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747}],1094:[function(require,module,exports){
arguments[4][680][0].apply(exports,arguments)
},{"./lib/bytesToUuid":1091,"./lib/rng":1092,"dup":680}],1093:[function(require,module,exports){
arguments[4][679][0].apply(exports,arguments)
},{"./lib/bytesToUuid":1091,"./lib/rng":1092,"dup":679}],1091:[function(require,module,exports){
arguments[4][677][0].apply(exports,arguments)
},{"dup":677}],1092:[function(require,module,exports){
arguments[4][678][0].apply(exports,arguments)
},{"dup":678}],1096:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof3=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));(function(global,factory){(typeof exports==="undefined"?"undefined":(0,_typeof3["default"])(exports))==='object'&&typeof module!=='undefined'?factory(exports,require('@babel/runtime/helpers/typeof'),require('lodash/isObject'),require('lodash/isString'),require('lodash/isArray'),require('lodash/isBoolean'),require('lodash/isNumber'),require('lodash/isNull'),require('number-to-bn'),require('utf8'),require('eth-lib/lib/hash'),require('bn.js'),require('ethjs-unit'),require('randombytes'),require('lodash/map')):typeof define==='function'&&define.amd?define(['exports','@babel/runtime/helpers/typeof','lodash/isObject','lodash/isString','lodash/isArray','lodash/isBoolean','lodash/isNumber','lodash/isNull','number-to-bn','utf8','eth-lib/lib/hash','bn.js','ethjs-unit','randombytes','lodash/map'],factory):(global=global||self,factory(global.Web3Utils={},global._typeof,global.isObject,global.isString,global.isArray,global.isBoolean,global.isNumber,global.isNull,global.numberToBN,global.utf8,global.Hash,global.BN,global.ethjsUnit,global.randombytes,global.map));})(void 0,function(exports,_typeof,isObject,isString,isArray,isBoolean,isNumber,isNull,numberToBN,utf8,Hash,BN,ethjsUnit,randombytes,map){'use strict';_typeof=_typeof&&_typeof.hasOwnProperty('default')?_typeof['default']:_typeof;isObject=isObject&&isObject.hasOwnProperty('default')?isObject['default']:isObject;isString=isString&&isString.hasOwnProperty('default')?isString['default']:isString;isArray=isArray&&isArray.hasOwnProperty('default')?isArray['default']:isArray;isBoolean=isBoolean&&isBoolean.hasOwnProperty('default')?isBoolean['default']:isBoolean;isNumber=isNumber&&isNumber.hasOwnProperty('default')?isNumber['default']:isNumber;isNull=isNull&&isNull.hasOwnProperty('default')?isNull['default']:isNull;numberToBN=numberToBN&&numberToBN.hasOwnProperty('default')?numberToBN['default']:numberToBN;utf8=utf8&&utf8.hasOwnProperty('default')?utf8['default']:utf8;Hash=Hash&&Hash.hasOwnProperty('default')?Hash['default']:Hash;BN=BN&&BN.hasOwnProperty('default')?BN['default']:BN;randombytes=randombytes&&randombytes.hasOwnProperty('default')?randombytes['default']:randombytes;map=map&&map.hasOwnProperty('default')?map['default']:map;var isBN=function isBN(object){return BN.isBN(object);};var isBigNumber=function isBigNumber(object){return object&&object.constructor&&object.constructor.name==='BigNumber';};var toBN=function toBN(number){try{return numberToBN(number);}catch(error){throw new Error("".concat(error," Given value: \"").concat(number,"\""));}};var toTwosComplement=function toTwosComplement(number){return"0x".concat(toBN(number).toTwos(256).toString(16,64));};var isAddress=function isAddress(address){var chainId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!/^(0x)?[0-9a-f]{40}$/i.test(address)){return false;}else if(/^(0x|0X)?[0-9a-f]{40}$/.test(address)||/^(0x|0X)?[0-9A-F]{40}$/.test(address)){return true;}else{return checkAddressChecksum(address,chainId);}};var stripHexPrefix=function stripHexPrefix(string){return string.slice(0,2)==='0x'?string.slice(2):string;};var checkAddressChecksum=function checkAddressChecksum(address){var chainId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var stripAddress=stripHexPrefix(address).toLowerCase();var prefix=chainId!=null?chainId.toString()+'0x':'';var keccakHash=Hash.keccak256(prefix+stripAddress).toString('hex').replace(/^0x/i,'');for(var i=0;i<stripAddress.length;i++){var output=parseInt(keccakHash[i],16)>=8?stripAddress[i].toUpperCase():stripAddress[i];if(stripHexPrefix(address)[i]!==output){return false;}}return true;};var leftPad=function leftPad(string,chars,sign){var hasPrefix=/^0x/i.test(string)||typeof string==='number';string=string.toString(16).replace(/^0x/i,'');var padding=chars-string.length+1>=0?chars-string.length+1:0;return(hasPrefix?'0x':'')+new Array(padding).join(sign||'0')+string;};var rightPad=function rightPad(string,chars,sign){var hasPrefix=/^0x/i.test(string)||typeof string==='number';string=string.toString(16).replace(/^0x/i,'');var padding=chars-string.length+1>=0?chars-string.length+1:0;return(hasPrefix?'0x':'')+string+new Array(padding).join(sign||'0');};var utf8ToHex=function utf8ToHex(value){value=utf8.encode(value);var hex='';value=value.replace(/^(?:\u0000)*/,'');value=value.split('').reverse().join('');value=value.replace(/^(?:\u0000)*/,'');value=value.split('').reverse().join('');for(var i=0;i<value.length;i++){var code=value.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?"0".concat(n):n;}return"0x".concat(hex);};var hexToUtf8=function hexToUtf8(hex){if(!isHexStrict(hex))throw new Error("The parameter \"".concat(hex,"\" must be a valid HEX string."));var string='';var code=0;hex=hex.replace(/^0x/i,'');hex=hex.replace(/^(?:00)*/,'');hex=hex.split('').reverse().join('');hex=hex.replace(/^(?:00)*/,'');hex=hex.split('').reverse().join('');var l=hex.length;for(var i=0;i<l;i+=2){code=parseInt(hex.substr(i,2),16);string+=String.fromCharCode(code);}return utf8.decode(string);};var hexToNumber=function hexToNumber(value){if(!value){return value;}return toBN(value).toNumber();};var hexToNumberString=function hexToNumberString(value){if(!value)return value;if(isString(value)){if(!isHexStrict(value))throw new Error("Given value \"".concat(value,"\" is not a valid hex string."));}return toBN(value).toString(10);};var numberToHex=function numberToHex(value){if(isNull(value)||typeof value==='undefined'){return value;}if(!isFinite(value)&&!isHexStrict(value)){throw new Error("Given input \"".concat(value,"\" is not a number."));}var number=toBN(value);var result=number.toString(16);return number.lt(new BN(0))?"-0x".concat(result.substr(1)):"0x".concat(result);};var bytesToHex=function bytesToHex(bytes){var hex=[];for(var i=0;i<bytes.length;i++){hex.push((bytes[i]>>>4).toString(16));hex.push((bytes[i]&0xf).toString(16));}return"0x".concat(hex.join('').replace(/^0+/,''));};var hexToBytes=function hexToBytes(hex){hex=hex.toString(16);if(!isHexStrict(hex)){throw new Error("Given value \"".concat(hex,"\" is not a valid hex string."));}hex=hex.replace(/^0x/i,'');hex=hex.length%2?'0'+hex:hex;var bytes=[];for(var c=0;c<hex.length;c+=2){bytes.push(parseInt(hex.substr(c,2),16));}return bytes;};var toHex=function toHex(value,returnType){if(isAddress(value)){return returnType?'address':"0x".concat(value.toLowerCase().replace(/^0x/i,''));}if(isBoolean(value)){return returnType?'bool':value?'0x01':'0x00';}if(isObject(value)&&!isBigNumber(value)&&!isBN(value)){return returnType?'string':utf8ToHex(JSON.stringify(value));}if(isString(value)){if(value.indexOf('-0x')===0||value.indexOf('-0X')===0){return returnType?'int256':numberToHex(value);}else if(value.indexOf('0x')===0||value.indexOf('0X')===0){return returnType?'bytes':value;}else if(!isFinite(value)){return returnType?'string':utf8ToHex(value);}}return returnType?value<0?'int256':'uint256':numberToHex(value);};var isHexStrict=function isHexStrict(hex){return(isString(hex)||isNumber(hex))&&/^(-)?0x[0-9a-f]*$/i.test(hex);};var isHex=function isHex(hex){return(isString(hex)||isNumber(hex))&&/^(-0x|0x)?[0-9a-f]*$/i.test(hex);};var isBloom=function isBloom(bloom){if(!/^(0x)?[0-9a-f]{512}$/i.test(bloom)){return false;}else if(/^(0x)?[0-9a-f]{512}$/.test(bloom)||/^(0x)?[0-9A-F]{512}$/.test(bloom)){return true;}return false;};var isTopic=function isTopic(topic){if(!/^(0x)?[0-9a-f]{64}$/i.test(topic)){return false;}else if(/^(0x)?[0-9a-f]{64}$/.test(topic)||/^(0x)?[0-9A-F]{64}$/.test(topic)){return true;}return false;};var KECCAK256_NULL_S='0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';var keccak256=function keccak256(value){if(isHexStrict(value)&&/^0x/i.test(value.toString())){value=hexToBytes(value);}var returnValue=Hash.keccak256(value);if(returnValue===KECCAK256_NULL_S){return null;}else{return returnValue;}};keccak256._Hash=Hash;var getSignatureParameters=function getSignatureParameters(signature){if(!isHexStrict(signature)){throw new Error("Given value \"".concat(signature,"\" is not a valid hex string."));}var r=signature.slice(0,66);var s="0x".concat(signature.slice(66,130));var v="0x".concat(signature.slice(130,132));v=hexToNumber(v);if(![27,28].includes(v))v+=27;return{r:r,s:s,v:v};};var utils=Object.freeze({isBN:isBN,isBigNumber:isBigNumber,toBN:toBN,toTwosComplement:toTwosComplement,isAddress:isAddress,stripHexPrefix:stripHexPrefix,checkAddressChecksum:checkAddressChecksum,leftPad:leftPad,rightPad:rightPad,utf8ToHex:utf8ToHex,hexToUtf8:hexToUtf8,hexToNumber:hexToNumber,hexToNumberString:hexToNumberString,numberToHex:numberToHex,bytesToHex:bytesToHex,hexToBytes:hexToBytes,toHex:toHex,isHexStrict:isHexStrict,isHex:isHex,isBloom:isBloom,isTopic:isTopic,keccak256:keccak256,getSignatureParameters:getSignatureParameters});var _elementaryName=function _elementaryName(name){if(name.startsWith('int[')){return"int256".concat(name.slice(3));}if(name==='int'){return'int256';}if(name.startsWith('uint[')){return"uint256".concat(name.slice(4));}if(name==='uint'){return'uint256';}if(name.startsWith('fixed[')){return"fixed128x128".concat(name.slice(5));}if(name==='fixed'){return'fixed128x128';}if(name.startsWith('ufixed[')){return"ufixed128x128".concat(name.slice(6));}if(name==='ufixed'){return'ufixed128x128';}return name;};var _parseTypeN=function _parseTypeN(type){var typesize=/^\D+(\d+).*$/.exec(type);return typesize?parseInt(typesize[1],10):null;};var _parseTypeNArray=function _parseTypeNArray(type){var arraySize=/^\D+\d*\[(\d+)\]$/.exec(type);return arraySize?parseInt(arraySize[1],10):null;};var _parseNumber=function _parseNumber(argument){var type=_typeof(argument);if(type==='string'){if(isHexStrict(argument)){return new BN(argument.replace(/0x/i,''),16);}else{return new BN(argument,10);}}else if(type==='number'){return new BN(argument);}else if(isBigNumber(argument)){return new BN(argument.toString(10));}else if(isBN(argument)){return argument;}else{throw new Error("".concat(argument," is not a number"));}};var _solidityPack=function _solidityPack(type,value,arraySize){var size,number;type=_elementaryName(type);if(type==='bytes'){if(value.replace(/^0x/i,'').length%2!==0){throw new Error("Invalid bytes characters ".concat(value.length));}return value;}else if(type==='string'){return utf8ToHex(value);}else if(type==='bool'){return value?'01':'00';}else if(type.startsWith('address')){if(arraySize){size=64;}else{size=40;}if(!isAddress(value)){throw new Error("".concat(value," is not a valid address, or the checksum is invalid."));}return leftPad(value.toLowerCase(),size);}size=_parseTypeN(type);if(type.startsWith('bytes')){if(!size){throw new Error('bytes[] not yet supported in solidity');}if(arraySize){size=32;}if(size<1||size>32||size<value.replace(/^0x/i,'').length/2){throw new Error("Invalid bytes".concat(size," for ").concat(value));}return rightPad(value,size*2);}else if(type.startsWith('uint')){if(size%8||size<8||size>256){throw new Error("Invalid uint".concat(size," size"));}number=_parseNumber(value);if(number.bitLength()>size){throw new Error("Supplied uint exceeds width: ".concat(size," vs ").concat(number.bitLength()));}if(number.lt(new BN(0))){throw new Error("Supplied uint ".concat(number.toString()," is negative"));}return size?leftPad(number.toString('hex'),size/8*2):number;}else if(type.startsWith('int')){if(size%8||size<8||size>256){throw new Error("Invalid int".concat(size," size"));}number=_parseNumber(value);if(number.bitLength()>size){throw new Error("Supplied int exceeds width: ".concat(size," vs ").concat(number.bitLength()));}if(number.lt(new BN(0))){return number.toTwos(size).toString('hex');}else{return size?leftPad(number.toString('hex'),size/8*2):number;}}else{throw new Error("Unsupported or invalid type: ".concat(type));}};var _processSoliditySha3Arguments=function _processSoliditySha3Arguments(argument){if(isArray(argument)){throw new Error('Autodetection of array types is not supported.');}var type;var value='';var hexArgument,arraySize;if(isObject(argument)&&(argument.hasOwnProperty('v')||argument.hasOwnProperty('t')||argument.hasOwnProperty('value')||argument.hasOwnProperty('type'))){type=argument.hasOwnProperty('t')?argument.t:argument.type;value=argument.hasOwnProperty('v')?argument.v:argument.value;}else{type=toHex(argument,true);value=toHex(argument);if(!type.startsWith('int')&&!type.startsWith('uint')){type='bytes';}}if((type.startsWith('int')||type.startsWith('uint'))&&typeof value==='string'&&!/^(-)?0x/i.test(value)){value=new BN(value);}if(isArray(value)){arraySize=_parseTypeNArray(type);if(arraySize&&value.length!==arraySize){throw new Error("".concat(type," is not matching the given array ").concat(JSON.stringify(value)));}else{arraySize=value.length;}}if(isArray(value)){hexArgument=value.map(function(value_){return _solidityPack(type,value_,arraySize).toString('hex').replace('0x','');});return hexArgument.join('');}else{hexArgument=_solidityPack(type,value,arraySize);return hexArgument.toString('hex').replace('0x','');}};var soliditySha3=function soliditySha3(){var arguments_=Array.prototype.slice.call(arguments);var hexArguments=map(arguments_,_processSoliditySha3Arguments);return keccak256("0x".concat(hexArguments.join('')));};var randomHex=function randomHex(size){return'0x'+randombytes(size).toString('hex');};var jsonInterfaceMethodToString=function jsonInterfaceMethodToString(json){if(isObject(json)&&json.name&&json.name.includes('(')){return json.name;}return"".concat(json.name,"(").concat(_flattenTypes(false,json.inputs).join(','),")");};var _flattenTypes=function _flattenTypes(includeTuple,puts){var types=[];puts.forEach(function(param){if(_typeof(param.components)==='object'){if(param.type.substring(0,5)!=='tuple'){throw new Error('components found but type is not tuple; report on GitHub');}var suffix='';var arrayBracket=param.type.indexOf('[');if(arrayBracket>=0){suffix=param.type.substring(arrayBracket);}var result=_flattenTypes(includeTuple,param.components);if(isArray(result)&&includeTuple){types.push("tuple(".concat(result.join(','),")").concat(suffix));}else if(!includeTuple){types.push("(".concat(result.join(','),")").concat(suffix));}else{types.push("(".concat(result,")"));}}else{types.push(param.type);}});return types;};var hexToAscii=function hexToAscii(hex){if(!isHexStrict(hex))throw new Error('The parameter must be a valid HEX string.');var value='';var i=0;var l=hex.length;if(hex.substring(0,2)==='0x'){i=2;}for(;i<l;i+=2){var code=parseInt(hex.substr(i,2),16);value+=String.fromCharCode(code);}return value;};var asciiToHex=function asciiToHex(value){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:32;var hex='';for(var i=0;i<value.length;i++){var code=value.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?"0".concat(n):n;}return'0x'+rightPad(hex,length*2);};var getUnitValue=function getUnitValue(unit){unit=unit?unit.toLowerCase():'ether';if(!ethjsUnit.unitMap[unit]){throw new Error("This unit \"".concat(unit,"\" doesn't exist, please use the one of the following units").concat(JSON.stringify(ethjsUnit.unitMap,null,2)));}return unit;};var fromWei=function fromWei(number,unit){unit=getUnitValue(unit);if(!isBN(number)&&!isString(number)){throw new Error('Please pass numbers as strings or BN objects to avoid precision errors.');}return isBN(number)?ethjsUnit.fromWei(number,unit):ethjsUnit.fromWei(number,unit).toString(10);};var toWei=function toWei(number,unit){unit=getUnitValue(unit);if(!isBN(number)&&!isString(number)){throw new Error('Please pass numbers as strings or BN objects to avoid precision errors.');}return isBN(number)?ethjsUnit.toWei(number,unit):ethjsUnit.toWei(number,unit).toString(10);};var toChecksumAddress=function toChecksumAddress(address){var chainId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof address!=='string'){return'';}if(!/^(0x)?[0-9a-f]{40}$/i.test(address))throw new Error("Given address \"".concat(address,"\" is not a valid Ethereum address."));var stripAddress=stripHexPrefix$1(address).toLowerCase();var prefix=chainId!=null?chainId.toString()+'0x':'';var keccakHash=Hash.keccak256(prefix+stripAddress).toString('hex').replace(/^0x/i,'');var checksumAddress='0x';for(var i=0;i<stripAddress.length;i++){checksumAddress+=parseInt(keccakHash[i],16)>=8?stripAddress[i].toUpperCase():stripAddress[i];}return checksumAddress;};var keccak256$1=keccak256;var sha3=keccak256;var toDecimal=hexToNumber;var hexToNumber$1=hexToNumber;var fromDecimal=numberToHex;var numberToHex$1=numberToHex;var hexToUtf8$1=hexToUtf8;var hexToString=hexToUtf8;var toUtf8=hexToUtf8;var stringToHex=utf8ToHex;var fromUtf8=utf8ToHex;var utf8ToHex$1=utf8ToHex;var toAscii=hexToAscii;var fromAscii=asciiToHex;var padLeft=leftPad;var padRight=rightPad;var getSignatureParameters$1=getSignatureParameters;var isAddress$1=isAddress;var isBN$1=isBN;var checkAddressChecksum$1=checkAddressChecksum;var toBN$1=toBN;var toHex$1=toHex;var hexToNumberString$1=hexToNumberString;var toTwosComplement$1=toTwosComplement;var isHex$1=isHex;var isHexStrict$1=isHexStrict;var isBloom$1=isBloom;var isTopic$1=isTopic;var bytesToHex$1=bytesToHex;var hexToBytes$1=hexToBytes;var stripHexPrefix$1=stripHexPrefix;var isBigNumber$1=isBigNumber;exports.BN=BN;exports.asciiToHex=asciiToHex;exports.bytesToHex=bytesToHex$1;exports.checkAddressChecksum=checkAddressChecksum$1;exports.fromAscii=fromAscii;exports.fromDecimal=fromDecimal;exports.fromUtf8=fromUtf8;exports.fromWei=fromWei;exports.getSignatureParameters=getSignatureParameters$1;exports.getUnitValue=getUnitValue;exports.hexToAscii=hexToAscii;exports.hexToBytes=hexToBytes$1;exports.hexToNumber=hexToNumber$1;exports.hexToNumberString=hexToNumberString$1;exports.hexToString=hexToString;exports.hexToUtf8=hexToUtf8$1;exports.isAddress=isAddress$1;exports.isBN=isBN$1;exports.isBigNumber=isBigNumber$1;exports.isBloom=isBloom$1;exports.isHex=isHex$1;exports.isHexStrict=isHexStrict$1;exports.isTopic=isTopic$1;exports.jsonInterfaceMethodToString=jsonInterfaceMethodToString;exports.keccak256=keccak256$1;exports.numberToHex=numberToHex$1;exports.padLeft=padLeft;exports.padRight=padRight;exports.randomHex=randomHex;exports.sha3=sha3;exports.soliditySha3=soliditySha3;exports.stringToHex=stringToHex;exports.stripHexPrefix=stripHexPrefix$1;exports.toAscii=toAscii;exports.toBN=toBN$1;exports.toChecksumAddress=toChecksumAddress;exports.toDecimal=toDecimal;exports.toHex=toHex$1;exports.toTwosComplement=toTwosComplement$1;exports.toUtf8=toUtf8;exports.toWei=toWei;exports.utf8ToHex=utf8ToHex$1;Object.defineProperty(exports,'__esModule',{value:true});});

},{"@babel/runtime/helpers/interopRequireDefault":738,"@babel/runtime/helpers/typeof":747,"bn.js":795,"eth-lib/lib/hash":860,"ethjs-unit":875,"lodash/isArray":1010,"lodash/isBoolean":1012,"lodash/isNull":1016,"lodash/isNumber":1017,"lodash/isObject":1018,"lodash/isString":1020,"lodash/map":1024,"number-to-bn":1035,"randombytes":1067,"utf8":1089}],1097:[function(require,module,exports){
function __export(m){for(var p in m){if(!exports.hasOwnProperty(p))exports[p]=m[p];}}Object.defineProperty(exports,"__esModule",{value:true});try{var _a=require('@evan.network/ui-dapp-browser'),getDomainName=_a.getDomainName,System=_a.System;System.map['@evan.network/api-blockchain-core']="bcc."+getDomainName()+"!dapp-content";System.map['@evan.network/dbcp']="bcc."+getDomainName()+"!dapp-content";}catch(ex){}__export(require("@evan.network/api-blockchain-core"));

},{"@evan.network/api-blockchain-core":24,"@evan.network/ui-dapp-browser":undefined}],1098:[function(require,module,exports){
arguments[4][55][0].apply(exports,arguments)
},{"dup":55}],1099:[function(require,module,exports){
arguments[4][66][0].apply(exports,arguments)
},{"dup":66}],1194:[function(require,module,exports){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/'use strict';var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError('Object.assign cannot be called with null or undefined');}return Object(val);}function shouldUseNative(){try{if(!Object.assign){return false;}var test1=new String('abc');test1[5]='de';if(Object.getOwnPropertyNames(test1)[0]==='5'){return false;}var test2={};for(var i=0;i<10;i++){test2['_'+String.fromCharCode(i)]=i;}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n];});if(order2.join('')!=='0123456789'){return false;}var test3={};'abcdefghijklmnopqrst'.split('').forEach(function(letter){test3[letter]=letter;});if(Object.keys(Object.assign({},test3)).join('')!=='abcdefghijklmnopqrst'){return false;}return true;}catch(err){return false;}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key];}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]];}}}}return to;};

},{}],1286:[function(require,module,exports){
(function (process,global){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]));}return objects.join(' ');}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==='%%')return'%';if(i>=len)return x;switch(x){case'%s':return String(args[i++]);case'%d':return Number(args[i++]);case'%j':try{return JSON.stringify(args[i++]);}catch(_){return'[Circular]';}default:return x;}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=' '+x;}else{str+=' '+inspect(x);}}return str;};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments);};}if(process.noDeprecation===true){return fn;}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg);}else if(process.traceDeprecation){console.trace(msg);}else{console.error(msg);}warned=true;}return fn.apply(this,arguments);}return deprecated;};var debugs={};var debugEnviron;/* common-shake removed: exports.debuglog = */ void function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||'';set=set.toUpperCase();if(!debugs[set]){if(new RegExp('\\b'+set+'\\b','i').test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error('%s %d: %s',set,pid,msg);};}else{debugs[set]=function(){};}}return debugs[set];};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts;}else if(opts){exports._extend(ctx,opts);}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth);}exports.inspect=inspect;inspect.colors={'bold':[1,22],'italic':[3,23],'underline':[4,24],'inverse':[7,27],'white':[37,39],'grey':[90,39],'black':[30,39],'blue':[34,39],'cyan':[36,39],'green':[32,39],'magenta':[35,39],'red':[31,39],'yellow':[33,39]};inspect.styles={'special':'cyan','number':'yellow','boolean':'yellow','undefined':'grey','null':'bold','string':'green','date':'magenta','regexp':'red'};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"\x1B["+inspect.colors[style][0]+'m'+str+"\x1B["+inspect.colors[style][1]+'m';}else{return str;}}function stylizeNoColor(str,styleType){return str;}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true;});return hash;}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes);}return ret;}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive;}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value);}if(isError(value)&&(keys.indexOf('message')>=0||keys.indexOf('description')>=0)){return formatError(value);}if(keys.length===0){if(isFunction(value)){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special');}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),'date');}if(isError(value)){return formatError(value);}}var base='',array=false,braces=['{','}'];if(isArray(value)){array=true;braces=['[',']'];}if(isFunction(value)){var n=value.name?': '+value.name:'';base=' [Function'+n+']';}if(isRegExp(value)){base=' '+RegExp.prototype.toString.call(value);}if(isDate(value)){base=' '+Date.prototype.toUTCString.call(value);}if(isError(value)){base=' '+formatError(value);}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1];}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}else{return ctx.stylize('[Object]','special');}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys);}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);});}ctx.seen.pop();return reduceToSingleString(output,base,braces);}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize('undefined','undefined');if(isString(value)){var simple='\''+JSON.stringify(value).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+'\'';return ctx.stylize(simple,'string');}if(isNumber(value))return ctx.stylize(''+value,'number');if(isBoolean(value))return ctx.stylize(''+value,'boolean');if(isNull(value))return ctx.stylize('null','null');}function formatError(value){return'['+Error.prototype.toString.call(value)+']';}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));}else{output.push('');}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true));}});return output;}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize('[Getter/Setter]','special');}else{str=ctx.stylize('[Getter]','special');}}else{if(desc.set){str=ctx.stylize('[Setter]','special');}}if(!hasOwnProperty(visibleKeys,key)){name='['+key+']';}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null);}else{str=formatValue(ctx,desc.value,recurseTimes-1);}if(str.indexOf('\n')>-1){if(array){str=str.split('\n').map(function(line){return'  '+line;}).join('\n').substr(2);}else{str='\n'+str.split('\n').map(function(line){return'   '+line;}).join('\n');}}}else{str=ctx.stylize('[Circular]','special');}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str;}name=JSON.stringify(''+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,'name');}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,'string');}}return name+': '+str;}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf('\n')>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,'').length+1;},0);if(length>60){return braces[0]+(base===''?'':base+'\n ')+' '+output.join(',\n  ')+' '+braces[1];}return braces[0]+base+' '+output.join(', ')+' '+braces[1];}function isArray(ar){return Array.isArray(ar);}/* common-shake removed: exports.isArray = */ void isArray;function isBoolean(arg){return typeof arg==='boolean';}/* common-shake removed: exports.isBoolean = */ void isBoolean;function isNull(arg){return arg===null;}/* common-shake removed: exports.isNull = */ void isNull;function isNullOrUndefined(arg){return arg==null;}/* common-shake removed: exports.isNullOrUndefined = */ void isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}/* common-shake removed: exports.isNumber = */ void isNumber;function isString(arg){return typeof arg==='string';}/* common-shake removed: exports.isString = */ void isString;function isSymbol(arg){return(0,_typeof2["default"])(arg)==='symbol';}/* common-shake removed: exports.isSymbol = */ void isSymbol;function isUndefined(arg){return arg===void 0;}/* common-shake removed: exports.isUndefined = */ void isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]';}exports.isRegExp=isRegExp;function isObject(arg){return(0,_typeof2["default"])(arg)==='object'&&arg!==null;}/* common-shake removed: exports.isObject = */ void isObject;function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]';}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error);}exports.isError=isError;function isFunction(arg){return typeof arg==='function';}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||(0,_typeof2["default"])(arg)==='symbol'||typeof arg==='undefined';}exports.isPrimitive=isPrimitive;/* common-shake removed: exports.isBuffer = */ void require('./support/isBuffer');function objectToString(o){return Object.prototype.toString.call(o);}function pad(n){return n<10?'0'+n.toString(10):n.toString(10);}var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];function timestamp(){var d=new Date();var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(':');return[d.getDate(),months[d.getMonth()],time].join(' ');}/* common-shake removed: exports.log = */ void function(){console.log('%s - %s',timestamp(),exports.format.apply(exports,arguments));};exports.inherits=require('inherits');exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]];}return origin;};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":1285,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"_process":1221,"inherits":1284}],1101:[function(require,module,exports){
'use strict';/* common-shake removed: exports.byteLength = */ void byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=='undefined'?Uint8Array:Array;var code='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i;}revLookup['-'.charCodeAt(0)]=62;revLookup['_'.charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error('Invalid string. Length must be a multiple of 4');}var validLen=b64.indexOf('=');if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen];}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen;}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen;}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&0xFF;arr[curByte++]=tmp>>8&0xFF;arr[curByte++]=tmp&0xFF;}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&0xFF;}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&0xFF;arr[curByte++]=tmp&0xFF;}return arr;}function tripletToBase64(num){return lookup[num>>18&0x3F]+lookup[num>>12&0x3F]+lookup[num>>6&0x3F]+lookup[num&0x3F];}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&0xFF0000)+(uint8[i+1]<<8&0xFF00)+(uint8[i+2]&0xFF);output.push(tripletToBase64(tmp));}return output.join('');}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&0x3F]+'==');}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&0x3F]+lookup[tmp<<2&0x3F]+'=');}return parts.join('');}

},{}],1102:[function(require,module,exports){
arguments[4][132][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"buffer":1104,"dup":132}],1103:[function(require,module,exports){
arguments[4][133][0].apply(exports,arguments)
},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"crypto":1104,"dup":133}],1105:[function(require,module,exports){
arguments[4][134][0].apply(exports,arguments)
},{"dup":134,"safe-buffer":1250}],1250:[function(require,module,exports){
arguments[4][639][0].apply(exports,arguments)
},{"buffer":1133,"dup":639}],1106:[function(require,module,exports){
arguments[4][135][0].apply(exports,arguments)
},{"./aes":1105,"./ghash":1110,"./incr32":1111,"buffer-xor":1132,"cipher-base":1135,"dup":135,"inherits":1187,"safe-buffer":1250}],1111:[function(require,module,exports){
arguments[4][140][0].apply(exports,arguments)
},{"dup":140}],1187:[function(require,module,exports){
arguments[4][129][0].apply(exports,arguments)
},{"dup":129}],1135:[function(require,module,exports){
arguments[4][169][0].apply(exports,arguments)
},{"dup":169,"inherits":1187,"safe-buffer":1250,"stream":1259,"string_decoder":1279}],1132:[function(require,module,exports){
(function (Buffer){
module.exports=function xor(a,b){var length=Math.min(a.length,b.length);var buffer=new Buffer(length);for(var i=0;i<length;++i){buffer[i]=a[i]^b[i];}return buffer;};

}).call(this,require("buffer").Buffer)

},{"buffer":1133}],1110:[function(require,module,exports){
arguments[4][139][0].apply(exports,arguments)
},{"dup":139,"safe-buffer":1250}],1107:[function(require,module,exports){
arguments[4][136][0].apply(exports,arguments)
},{"./decrypter":1108,"./encrypter":1109,"./modes/list.json":1119,"dup":136}],1119:[function(require,module,exports){
arguments[4][148][0].apply(exports,arguments)
},{"dup":148}],1108:[function(require,module,exports){
arguments[4][137][0].apply(exports,arguments)
},{"./aes":1105,"./authCipher":1106,"./modes":1118,"./streamCipher":1121,"cipher-base":1135,"dup":137,"evp_bytestokey":1170,"inherits":1187,"safe-buffer":1250}],1109:[function(require,module,exports){
arguments[4][138][0].apply(exports,arguments)
},{"./aes":1105,"./authCipher":1106,"./modes":1118,"./streamCipher":1121,"cipher-base":1135,"dup":138,"evp_bytestokey":1170,"inherits":1187,"safe-buffer":1250}],1121:[function(require,module,exports){
arguments[4][150][0].apply(exports,arguments)
},{"./aes":1105,"cipher-base":1135,"dup":150,"inherits":1187,"safe-buffer":1250}],1118:[function(require,module,exports){
arguments[4][147][0].apply(exports,arguments)
},{"./cbc":1112,"./cfb":1113,"./cfb1":1114,"./cfb8":1115,"./ctr":1116,"./ecb":1117,"./list.json":1119,"./ofb":1120,"dup":147}],1170:[function(require,module,exports){
arguments[4][290][0].apply(exports,arguments)
},{"dup":290,"md5.js":1190,"safe-buffer":1250}],1112:[function(require,module,exports){
arguments[4][141][0].apply(exports,arguments)
},{"buffer-xor":1132,"dup":141}],1113:[function(require,module,exports){
arguments[4][142][0].apply(exports,arguments)
},{"buffer-xor":1132,"dup":142,"safe-buffer":1250}],1114:[function(require,module,exports){
arguments[4][143][0].apply(exports,arguments)
},{"dup":143,"safe-buffer":1250}],1115:[function(require,module,exports){
arguments[4][144][0].apply(exports,arguments)
},{"dup":144,"safe-buffer":1250}],1116:[function(require,module,exports){
arguments[4][145][0].apply(exports,arguments)
},{"../incr32":1111,"buffer-xor":1132,"dup":145,"safe-buffer":1250}],1117:[function(require,module,exports){
arguments[4][146][0].apply(exports,arguments)
},{"dup":146}],1120:[function(require,module,exports){
(function (Buffer){
var xor=require('buffer-xor');function getBlock(self){self._prev=self._cipher.encryptBlock(self._prev);return self._prev;}exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)]);}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad);};

}).call(this,require("buffer").Buffer)

},{"buffer":1133,"buffer-xor":1132}],1122:[function(require,module,exports){
arguments[4][151][0].apply(exports,arguments)
},{"browserify-aes/browser":1107,"browserify-aes/modes":1118,"browserify-des":1123,"browserify-des/modes":1124,"dup":151,"evp_bytestokey":1170}],1124:[function(require,module,exports){
arguments[4][153][0].apply(exports,arguments)
},{"dup":153}],1123:[function(require,module,exports){
arguments[4][152][0].apply(exports,arguments)
},{"cipher-base":1135,"des.js":1143,"dup":152,"inherits":1187,"safe-buffer":1250}],1143:[function(require,module,exports){
arguments[4][212][0].apply(exports,arguments)
},{"./des/cbc":1144,"./des/cipher":1145,"./des/des":1146,"./des/ede":1147,"./des/utils":1148,"dup":212}],1125:[function(require,module,exports){
(function (Buffer){
var bn=require('bn.js');var randomBytes=require('randombytes');module.exports=crt;function blind(priv){var r=getr(priv);var blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)};}function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var mod=bn.mont(priv.modulus);var blinded=new bn(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(bn.mont(priv.prime1));var c2=blinded.toRed(bn.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1);var m2=c2.redPow(priv.exponent2);m1=m1.fromRed();m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);h.imul(q);m2.iadd(h);return new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(false,len));}crt.getr=getr;function getr(priv){var len=priv.modulus.byteLength();var r=new bn(randomBytes(len));while(r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2)){r=new bn(randomBytes(len));}return r;}

}).call(this,require("buffer").Buffer)

},{"bn.js":1102,"buffer":1133,"randombytes":1232}],1232:[function(require,module,exports){
(function (process,global){
'use strict';var MAX_BYTES=65536;var MAX_UINT32=4294967295;function oldBrowser(){throw new Error('Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11');}var Buffer=require('safe-buffer').Buffer;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){module.exports=randomBytes;}else{module.exports=oldBrowser;}function randomBytes(size,cb){if(size>MAX_UINT32)throw new RangeError('requested too many random bytes');var bytes=Buffer.allocUnsafe(size);if(size>0){if(size>MAX_BYTES){for(var generated=0;generated<size;generated+=MAX_BYTES){crypto.getRandomValues(bytes.slice(generated,generated+MAX_BYTES));}}else{crypto.getRandomValues(bytes);}}if(typeof cb==='function'){return process.nextTick(function(){cb(null,bytes);});}return bytes;}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1221,"safe-buffer":1250}],1126:[function(require,module,exports){
arguments[4][157][0].apply(exports,arguments)
},{"./browser/algorithms.json":1127,"dup":157}],1127:[function(require,module,exports){
arguments[4][158][0].apply(exports,arguments)
},{"dup":158}],1128:[function(require,module,exports){
arguments[4][159][0].apply(exports,arguments)
},{"dup":159}],1129:[function(require,module,exports){
(function (Buffer){
var createHash=require('create-hash');var stream=require('stream');var inherits=require('inherits');var sign=require('./sign');var verify=require('./verify');var algorithms=require('./algorithms.json');Object.keys(algorithms).forEach(function(key){algorithms[key].id=new Buffer(algorithms[key].id,'hex');algorithms[key.toLowerCase()]=algorithms[key];});function Sign(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hashType=data.hash;this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign;}inherits(Sign,stream.Writable);Sign.prototype._write=function _write(data,_,done){this._hash.update(data);done();};Sign.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc);this._hash.update(data);return this;};Sign.prototype.sign=function signMethod(key,enc){this.end();var hash=this._hash.digest();var sig=sign(hash,key,this._hashType,this._signType,this._tag);return enc?sig.toString(enc):sig;};function Verify(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign;}inherits(Verify,stream.Writable);Verify.prototype._write=function _write(data,_,done){this._hash.update(data);done();};Verify.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc);this._hash.update(data);return this;};Verify.prototype.verify=function verifyMethod(key,sig,enc){if(typeof sig==='string')sig=new Buffer(sig,enc);this.end();var hash=this._hash.digest();return verify(sig,hash,key,this._signType,this._tag);};function createSign(algorithm){return new Sign(algorithm);}function createVerify(algorithm){return new Verify(algorithm);}module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify};

}).call(this,require("buffer").Buffer)

},{"./algorithms.json":1127,"./sign":1130,"./verify":1131,"buffer":1133,"create-hash":1138,"inherits":1187,"stream":1259}],1138:[function(require,module,exports){
arguments[4][173][0].apply(exports,arguments)
},{"cipher-base":1135,"dup":173,"inherits":1187,"md5.js":1190,"ripemd160":1249,"sha.js":1252}],1130:[function(require,module,exports){
(function (Buffer){
var createHmac=require('create-hmac');var crt=require('browserify-rsa');var EC=require('elliptic').ec;var BN=require('bn.js');var parseKeys=require('parse-asn1');var curves=require('./curves.json');function sign(hash,key,hashType,signType,tag){var priv=parseKeys(key);if(priv.curve){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');return ecSign(hash,priv);}else if(priv.type==='dsa'){if(signType!=='dsa')throw new Error('wrong private key type');return dsaSign(hash,priv,hashType);}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');}hash=Buffer.concat([tag,hash]);var len=priv.modulus.byteLength();var pad=[0,1];while(hash.length+pad.length+1<len){pad.push(0xff);}pad.push(0x00);var i=-1;while(++i<hash.length){pad.push(hash[i]);}var out=crt(pad,priv);return out;}function ecSign(hash,priv){var curveId=curves[priv.curve.join('.')];if(!curveId)throw new Error('unknown curve '+priv.curve.join('.'));var curve=new EC(curveId);var key=curve.keyFromPrivate(priv.privateKey);var out=key.sign(hash);return new Buffer(out.toDER());}function dsaSign(hash,priv,algo){var x=priv.params.priv_key;var p=priv.params.p;var q=priv.params.q;var g=priv.params.g;var r=new BN(0);var k;var H=bits2int(hash,q).mod(q);var s=false;var kv=getKey(x,q,hash,algo);while(s===false){k=makeKey(q,kv,algo);r=makeR(g,k,p,q);s=k.invm(q).imul(H.add(x.mul(r))).mod(q);if(s.cmpn(0)===0){s=false;r=new BN(0);}}return toDER(r,s);}function toDER(r,s){r=r.toArray();s=s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);var total=r.length+s.length+4;var res=[0x30,total,0x02,r.length];res=res.concat(r,[0x02,s.length],s);return new Buffer(res);}function getKey(x,q,hash,algo){x=new Buffer(x.toArray());if(x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0);x=Buffer.concat([zeros,x]);}var hlen=hash.length;var hbits=bits2octets(hash,q);var v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);k.fill(0);k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();return{k:k,v:v};}function bits2int(obits,q){var bits=new BN(obits);var shift=(obits.length<<3)-q.bitLength();if(shift>0)bits.ishrn(shift);return bits;}function bits2octets(bits,q){bits=bits2int(bits,q);bits=bits.mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0);out=Buffer.concat([zeros,out]);}return out;}function makeKey(q,kv,algo){var t;var k;do{t=new Buffer(0);while(t.length*8<q.bitLength()){kv.v=createHmac(algo,kv.k).update(kv.v).digest();t=Buffer.concat([t,kv.v]);}k=bits2int(t,q);kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest();kv.v=createHmac(algo,kv.k).update(kv.v).digest();}while(k.cmp(q)!==-1);return k;}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q);}module.exports=sign;module.exports.getKey=getKey;module.exports.makeKey=makeKey;

}).call(this,require("buffer").Buffer)

},{"./curves.json":1128,"bn.js":1102,"browserify-rsa":1125,"buffer":1133,"create-hmac":1140,"elliptic":1153,"parse-asn1":1200}],1131:[function(require,module,exports){
(function (Buffer){
var BN=require('bn.js');var EC=require('elliptic').ec;var parseKeys=require('parse-asn1');var curves=require('./curves.json');function verify(sig,hash,key,signType,tag){var pub=parseKeys(key);if(pub.type==='ec'){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');return ecVerify(sig,hash,pub);}else if(pub.type==='dsa'){if(signType!=='dsa')throw new Error('wrong public key type');return dsaVerify(sig,hash,pub);}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');}hash=Buffer.concat([tag,hash]);var len=pub.modulus.byteLength();var pad=[1];var padNum=0;while(hash.length+pad.length+2<len){pad.push(0xff);padNum++;}pad.push(0x00);var i=-1;while(++i<hash.length){pad.push(hash[i]);}pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red);sig=sig.redPow(new BN(pub.publicExponent));sig=new Buffer(sig.fromRed().toArray());var out=padNum<8?1:0;len=Math.min(sig.length,pad.length);if(sig.length!==pad.length)out=1;i=-1;while(++i<len){out|=sig[i]^pad[i];}return out===0;}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join('.')];if(!curveId)throw new Error('unknown curve '+pub.data.algorithm.curve.join('.'));var curve=new EC(curveId);var pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey);}function dsaVerify(sig,hash,pub){var p=pub.data.p;var q=pub.data.q;var g=pub.data.g;var y=pub.data.pub_key;var unpacked=parseKeys.signature.decode(sig,'der');var s=unpacked.s;var r=unpacked.r;checkValue(s,q);checkValue(r,q);var montp=BN.mont(p);var w=s.invm(q);var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return v.cmp(r)===0;}function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error('invalid sig');if(b.cmp(q)>=q)throw new Error('invalid sig');}module.exports=verify;

}).call(this,require("buffer").Buffer)

},{"./curves.json":1128,"bn.js":1102,"buffer":1133,"elliptic":1153,"parse-asn1":1200}],1140:[function(require,module,exports){
arguments[4][175][0].apply(exports,arguments)
},{"./legacy":1141,"cipher-base":1135,"create-hash/md5":1139,"dup":175,"inherits":1187,"ripemd160":1249,"safe-buffer":1250,"sha.js":1252}],1200:[function(require,module,exports){
arguments[4][503][0].apply(exports,arguments)
},{"./aesid.json":1196,"./asn1":1197,"./fixProc":1199,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"browserify-aes":1107,"dup":503,"pbkdf2":1215,"safe-buffer":1250}],1153:[function(require,module,exports){
arguments[4][114][0].apply(exports,arguments)
},{"../package.json":1168,"./elliptic/curve":1156,"./elliptic/curves":1159,"./elliptic/ec":1160,"./elliptic/eddsa":1163,"./elliptic/utils":1167,"brorand":1103,"dup":114}],1186:[function(require,module,exports){
exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity;}else{m=m+Math.pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*Math.pow(2,e-mLen);};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax;}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2;}if(e+eBias>=1){value+=rt/c;}else{value+=rt*Math.pow(2,1-eBias);}if(value*c>=2){e++;c/=2;}if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias;}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0;}}for(;mLen>=8;buffer[offset+i]=m&0xff,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&0xff,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128;};

},{}],1134:[function(require,module,exports){
module.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"};

},{}],1136:[function(require,module,exports){
(function (Buffer){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function isArray(arg){if(Array.isArray){return Array.isArray(arg);}return objectToString(arg)==='[object Array]';}exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}exports.isString=isString;function isSymbol(arg){return(0,_typeof2["default"])(arg)==='symbol';}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==='[object RegExp]';}exports.isRegExp=isRegExp;function isObject(arg){return(0,_typeof2["default"])(arg)==='object'&&arg!==null;}exports.isObject=isObject;function isDate(d){return objectToString(d)==='[object Date]';}exports.isDate=isDate;function isError(e){return objectToString(e)==='[object Error]'||e instanceof Error;}exports.isError=isError;function isFunction(arg){return typeof arg==='function';}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||(0,_typeof2["default"])(arg)==='symbol'||typeof arg==='undefined';}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o);}

}).call(this,{"isBuffer":require("../../is-buffer/index.js")})

},{"../../is-buffer/index.js":1188,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],1137:[function(require,module,exports){
(function (Buffer){
var elliptic=require('elliptic');var BN=require('bn.js');module.exports=function createECDH(curve){return new ECDH(curve);};var aliases={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}};aliases.p224=aliases.secp224r1;aliases.p256=aliases.secp256r1=aliases.prime256v1;aliases.p192=aliases.secp192r1=aliases.prime192v1;aliases.p384=aliases.secp384r1;aliases.p521=aliases.secp521r1;function ECDH(curve){this.curveType=aliases[curve];if(!this.curveType){this.curveType={name:curve};}this.curve=new elliptic.ec(this.curveType.name);this.keys=void 0;}ECDH.prototype.generateKeys=function(enc,format){this.keys=this.curve.genKeyPair();return this.getPublicKey(enc,format);};ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||'utf8';if(!Buffer.isBuffer(other)){other=new Buffer(other,inenc);}var otherPub=this.curve.keyFromPublic(other).getPublic();var out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength);};ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==='compressed',true);if(format==='hybrid'){if(key[key.length-1]%2){key[0]=7;}else{key[0]=6;}}return formatReturnValue(key,enc);};ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc);};ECDH.prototype.setPublicKey=function(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}this.keys._importPublic(pub);return this;};ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}var _priv=new BN(priv);_priv=_priv.toString(16);this.keys=this.curve.genKeyPair();this.keys._importPrivate(_priv);return this;};function formatReturnValue(bn,enc,len){if(!Array.isArray(bn)){bn=bn.toArray();}var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0);buf=Buffer.concat([zeros,buf]);}if(!enc){return buf;}else{return buf.toString(enc);}}

}).call(this,require("buffer").Buffer)

},{"bn.js":1102,"buffer":1133,"elliptic":1153}],1249:[function(require,module,exports){
arguments[4][536][0].apply(exports,arguments)
},{"buffer":1133,"dup":536,"hash-base":1171,"inherits":1187}],1190:[function(require,module,exports){
arguments[4][478][0].apply(exports,arguments)
},{"dup":478,"hash-base":1171,"inherits":1187,"safe-buffer":1250}],1252:[function(require,module,exports){
arguments[4][652][0].apply(exports,arguments)
},{"./sha":1253,"./sha1":1254,"./sha224":1255,"./sha256":1256,"./sha384":1257,"./sha512":1258,"dup":652}],1139:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"dup":174,"md5.js":1190}],1141:[function(require,module,exports){
arguments[4][176][0].apply(exports,arguments)
},{"cipher-base":1135,"dup":176,"inherits":1187,"safe-buffer":1250}],1233:[function(require,module,exports){
(function (process,global){
'use strict';function oldBrowser(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11');}var safeBuffer=require('safe-buffer');var randombytes=require('randombytes');var Buffer=safeBuffer.Buffer;var kBufferMaxLength=safeBuffer.kMaxLength;var crypto=global.crypto||global.msCrypto;var kMaxUint32=Math.pow(2,32)-1;function assertOffset(offset,length){if(typeof offset!=='number'||offset!==offset){throw new TypeError('offset must be a number');}if(offset>kMaxUint32||offset<0){throw new TypeError('offset must be a uint32');}if(offset>kBufferMaxLength||offset>length){throw new RangeError('offset out of range');}}function assertSize(size,offset,length){if(typeof size!=='number'||size!==size){throw new TypeError('size must be a number');}if(size>kMaxUint32||size<0){throw new TypeError('size must be a uint32');}if(size+offset>length||size>kBufferMaxLength){throw new RangeError('buffer too small');}}if(crypto&&crypto.getRandomValues||!process.browser){exports.randomFill=randomFill;exports.randomFillSync=randomFillSync;}else{exports.randomFill=oldBrowser;exports.randomFillSync=oldBrowser;}function randomFill(buf,offset,size,cb){if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array');}if(typeof offset==='function'){cb=offset;offset=0;size=buf.length;}else if(typeof size==='function'){cb=size;size=buf.length-offset;}else if(typeof cb!=='function'){throw new TypeError('"cb" argument must be a function');}assertOffset(offset,buf.length);assertSize(size,offset,buf.length);return actualFill(buf,offset,size,cb);}function actualFill(buf,offset,size,cb){if(process.browser){var ourBuf=buf.buffer;var uint=new Uint8Array(ourBuf,offset,size);crypto.getRandomValues(uint);if(cb){process.nextTick(function(){cb(null,buf);});return;}return buf;}if(cb){randombytes(size,function(err,bytes){if(err){return cb(err);}bytes.copy(buf,offset);cb(null,buf);});return;}var bytes=randombytes(size);bytes.copy(buf,offset);return buf;}function randomFillSync(buf,offset,size){if(typeof offset==='undefined'){offset=0;}if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array');}assertOffset(offset,buf.length);if(size===undefined)size=buf.length-offset;assertSize(size,offset,buf.length);return actualFill(buf,offset,size);}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1221,"randombytes":1232,"safe-buffer":1250}],1215:[function(require,module,exports){
arguments[4][518][0].apply(exports,arguments)
},{"./lib/async":1216,"./lib/sync":1219,"dup":518}],1149:[function(require,module,exports){
(function (Buffer){
var generatePrime=require('./lib/generatePrime');var primes=require('./lib/primes.json');var DH=require('./lib/dh');function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,'hex');var gen=new Buffer(primes[mod].gen,'hex');return new DH(prime,gen);}var ENCODINGS={'binary':true,'hex':true,'base64':true};function createDiffieHellman(prime,enc,generator,genc){if(Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined){return createDiffieHellman(prime,'binary',enc,generator);}enc=enc||'binary';genc=genc||'binary';generator=generator||new Buffer([2]);if(!Buffer.isBuffer(generator)){generator=new Buffer(generator,genc);}if(typeof prime==='number'){return new DH(generatePrime(prime,generator),generator,true);}if(!Buffer.isBuffer(prime)){prime=new Buffer(prime,enc);}return new DH(prime,generator,true);}exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman;exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman;

}).call(this,require("buffer").Buffer)

},{"./lib/dh":1150,"./lib/generatePrime":1151,"./lib/primes.json":1152,"buffer":1133}],1222:[function(require,module,exports){
arguments[4][525][0].apply(exports,arguments)
},{"./privateDecrypt":1224,"./publicEncrypt":1225,"dup":525}],1148:[function(require,module,exports){
arguments[4][217][0].apply(exports,arguments)
},{"dup":217}],1146:[function(require,module,exports){
arguments[4][215][0].apply(exports,arguments)
},{"./cipher":1145,"./utils":1148,"dup":215,"inherits":1187,"minimalistic-assert":1192}],1145:[function(require,module,exports){
arguments[4][214][0].apply(exports,arguments)
},{"dup":214,"minimalistic-assert":1192}],1144:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"dup":213,"inherits":1187,"minimalistic-assert":1192}],1147:[function(require,module,exports){
arguments[4][216][0].apply(exports,arguments)
},{"./cipher":1145,"./des":1146,"dup":216,"inherits":1187,"minimalistic-assert":1192}],1192:[function(require,module,exports){
arguments[4][480][0].apply(exports,arguments)
},{"dup":480}],1152:[function(require,module,exports){
arguments[4][221][0].apply(exports,arguments)
},{"dup":221}],1150:[function(require,module,exports){
(function (Buffer){
var BN=require('bn.js');var MillerRabin=require('miller-rabin');var millerRabin=new MillerRabin();var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=require('./generatePrime');var randomBytes=require('randombytes');module.exports=DH;function setPublicKey(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}this._pub=new BN(pub);return this;}function setPrivateKey(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}this._priv=new BN(priv);return this;}var primeCache={};function checkPrime(prime,generator){var gen=generator.toString('hex');var hex=[gen,prime.toString(16)].join('_');if(hex in primeCache){return primeCache[hex];}var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime)){error+=1;if(gen==='02'||gen==='05'){error+=8;}else{error+=4;}primeCache[hex]=error;return error;}if(!millerRabin.test(prime.shrn(1))){error+=2;}var rem;switch(gen){case'02':if(prime.mod(TWENTYFOUR).cmp(ELEVEN)){error+=8;}break;case'05':rem=prime.mod(TEN);if(rem.cmp(THREE)&&rem.cmp(SEVEN)){error+=8;}break;default:error+=4;}primeCache[hex]=error;return error;}function DH(prime,generator,malleable){this.setGenerator(generator);this.__prime=new BN(prime);this._prime=BN.mont(this.__prime);this._primeLen=prime.length;this._pub=undefined;this._priv=undefined;this._primeCode=undefined;if(malleable){this.setPublicKey=setPublicKey;this.setPrivateKey=setPrivateKey;}else{this._primeCode=8;}}Object.defineProperty(DH.prototype,'verifyError',{enumerable:true,get:function get(){if(typeof this._primeCode!=='number'){this._primeCode=checkPrime(this.__prime,this.__gen);}return this._primeCode;}});DH.prototype.generateKeys=function(){if(!this._priv){this._priv=new BN(randomBytes(this._primeLen));}this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed();return this.getPublicKey();};DH.prototype.computeSecret=function(other){other=new BN(other);other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0);out=Buffer.concat([front,out]);}return out;};DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc);};DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc);};DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc);};DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc);};DH.prototype.setGenerator=function(gen,enc){enc=enc||'utf8';if(!Buffer.isBuffer(gen)){gen=new Buffer(gen,enc);}this.__gen=gen;this._gen=new BN(gen);return this;};function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());if(!enc){return buf;}else{return buf.toString(enc);}}

}).call(this,require("buffer").Buffer)

},{"./generatePrime":1151,"bn.js":1102,"buffer":1133,"miller-rabin":1191,"randombytes":1232}],1151:[function(require,module,exports){
arguments[4][220][0].apply(exports,arguments)
},{"bn.js":1102,"dup":220,"miller-rabin":1191,"randombytes":1232}],1191:[function(require,module,exports){
arguments[4][479][0].apply(exports,arguments)
},{"bn.js":1102,"brorand":1103,"dup":479}],1168:[function(require,module,exports){
arguments[4][237][0].apply(exports,arguments)
},{"dup":237}],1167:[function(require,module,exports){
arguments[4][236][0].apply(exports,arguments)
},{"bn.js":1102,"dup":236,"minimalistic-assert":1192,"minimalistic-crypto-utils":1193}],1156:[function(require,module,exports){
arguments[4][117][0].apply(exports,arguments)
},{"./base":1154,"./edwards":1155,"./mont":1157,"./short":1158,"dup":117}],1160:[function(require,module,exports){
arguments[4][229][0].apply(exports,arguments)
},{"../curves":1159,"../utils":1167,"./key":1161,"./signature":1162,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"bn.js":1102,"brorand":1103,"dup":229,"hmac-drbg":1184}],1163:[function(require,module,exports){
arguments[4][232][0].apply(exports,arguments)
},{"../curves":1159,"../utils":1167,"./key":1164,"./signature":1165,"dup":232,"hash.js":1172}],1159:[function(require,module,exports){
arguments[4][228][0].apply(exports,arguments)
},{"./curve":1156,"./precomputed/secp256k1":1166,"./utils":1167,"dup":228,"hash.js":1172}],1154:[function(require,module,exports){
arguments[4][223][0].apply(exports,arguments)
},{"../utils":1167,"bn.js":1102,"dup":223}],1155:[function(require,module,exports){
arguments[4][224][0].apply(exports,arguments)
},{"../utils":1167,"./base":1154,"bn.js":1102,"dup":224,"inherits":1187}],1158:[function(require,module,exports){
arguments[4][227][0].apply(exports,arguments)
},{"../utils":1167,"./base":1154,"bn.js":1102,"dup":227,"inherits":1187}],1157:[function(require,module,exports){
arguments[4][226][0].apply(exports,arguments)
},{"../utils":1167,"./base":1154,"bn.js":1102,"dup":226,"inherits":1187}],1166:[function(require,module,exports){
arguments[4][127][0].apply(exports,arguments)
},{"dup":127}],1172:[function(require,module,exports){
arguments[4][292][0].apply(exports,arguments)
},{"./hash/common":1173,"./hash/hmac":1174,"./hash/ripemd":1175,"./hash/sha":1176,"./hash/utils":1183,"dup":292}],1162:[function(require,module,exports){
arguments[4][231][0].apply(exports,arguments)
},{"../utils":1167,"bn.js":1102,"dup":231}],1161:[function(require,module,exports){
arguments[4][230][0].apply(exports,arguments)
},{"../utils":1167,"bn.js":1102,"dup":230}],1184:[function(require,module,exports){
arguments[4][304][0].apply(exports,arguments)
},{"dup":304,"hash.js":1172,"minimalistic-assert":1192,"minimalistic-crypto-utils":1193}],1164:[function(require,module,exports){
arguments[4][233][0].apply(exports,arguments)
},{"../utils":1167,"dup":233}],1165:[function(require,module,exports){
arguments[4][234][0].apply(exports,arguments)
},{"../utils":1167,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"bn.js":1102,"dup":234}],1193:[function(require,module,exports){
arguments[4][481][0].apply(exports,arguments)
},{"dup":481}],1171:[function(require,module,exports){
arguments[4][291][0].apply(exports,arguments)
},{"dup":291,"inherits":1187,"safe-buffer":1250,"stream":1259}],1175:[function(require,module,exports){
arguments[4][295][0].apply(exports,arguments)
},{"./common":1173,"./utils":1183,"dup":295}],1173:[function(require,module,exports){
arguments[4][293][0].apply(exports,arguments)
},{"./utils":1183,"dup":293,"minimalistic-assert":1192}],1174:[function(require,module,exports){
arguments[4][294][0].apply(exports,arguments)
},{"./utils":1183,"dup":294,"minimalistic-assert":1192}],1183:[function(require,module,exports){
arguments[4][303][0].apply(exports,arguments)
},{"dup":303,"inherits":1187,"minimalistic-assert":1192}],1176:[function(require,module,exports){
arguments[4][296][0].apply(exports,arguments)
},{"./sha/1":1177,"./sha/224":1178,"./sha/256":1179,"./sha/384":1180,"./sha/512":1181,"dup":296}],1178:[function(require,module,exports){
arguments[4][298][0].apply(exports,arguments)
},{"../utils":1183,"./256":1179,"dup":298}],1177:[function(require,module,exports){
arguments[4][297][0].apply(exports,arguments)
},{"../common":1173,"../utils":1183,"./common":1182,"dup":297}],1180:[function(require,module,exports){
arguments[4][300][0].apply(exports,arguments)
},{"../utils":1183,"./512":1181,"dup":300}],1181:[function(require,module,exports){
arguments[4][301][0].apply(exports,arguments)
},{"../common":1173,"../utils":1183,"dup":301,"minimalistic-assert":1192}],1179:[function(require,module,exports){
arguments[4][299][0].apply(exports,arguments)
},{"../common":1173,"../utils":1183,"./common":1182,"dup":299,"minimalistic-assert":1192}],1182:[function(require,module,exports){
arguments[4][302][0].apply(exports,arguments)
},{"../utils":1183,"dup":302}],1189:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};

},{}],1196:[function(require,module,exports){
arguments[4][499][0].apply(exports,arguments)
},{"dup":499}],1197:[function(require,module,exports){
arguments[4][500][0].apply(exports,arguments)
},{"./certificate":1198,"asn1.js":1201,"dup":500}],1198:[function(require,module,exports){
arguments[4][501][0].apply(exports,arguments)
},{"asn1.js":1201,"dup":501}],1201:[function(require,module,exports){
arguments[4][504][0].apply(exports,arguments)
},{"./asn1/api":1202,"./asn1/base":1204,"./asn1/constants":1208,"./asn1/decoders":1210,"./asn1/encoders":1213,"bn.js":1102,"dup":504}],1199:[function(require,module,exports){
arguments[4][502][0].apply(exports,arguments)
},{"browserify-aes":1107,"dup":502,"evp_bytestokey":1170,"safe-buffer":1250}],1208:[function(require,module,exports){
arguments[4][511][0].apply(exports,arguments)
},{"./der":1207,"dup":511}],1202:[function(require,module,exports){
arguments[4][505][0].apply(exports,arguments)
},{"../asn1":1201,"dup":505,"inherits":1187,"vm":1287}],1213:[function(require,module,exports){
arguments[4][516][0].apply(exports,arguments)
},{"./der":1212,"./pem":1214,"dup":516}],1210:[function(require,module,exports){
arguments[4][513][0].apply(exports,arguments)
},{"./der":1209,"./pem":1211,"dup":513}],1204:[function(require,module,exports){
arguments[4][507][0].apply(exports,arguments)
},{"./buffer":1203,"./node":1205,"./reporter":1206,"dup":507}],1203:[function(require,module,exports){
arguments[4][506][0].apply(exports,arguments)
},{"../base":1204,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"buffer":1133,"dup":506,"inherits":1187}],1206:[function(require,module,exports){
arguments[4][509][0].apply(exports,arguments)
},{"dup":509,"inherits":1187}],1205:[function(require,module,exports){
arguments[4][508][0].apply(exports,arguments)
},{"../base":1204,"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099,"dup":508,"minimalistic-assert":1192}],1207:[function(require,module,exports){
arguments[4][510][0].apply(exports,arguments)
},{"../constants":1208,"dup":510}],1209:[function(require,module,exports){
arguments[4][512][0].apply(exports,arguments)
},{"../../asn1":1201,"dup":512,"inherits":1187}],1211:[function(require,module,exports){
arguments[4][514][0].apply(exports,arguments)
},{"./der":1209,"buffer":1133,"dup":514,"inherits":1187}],1212:[function(require,module,exports){
arguments[4][515][0].apply(exports,arguments)
},{"../../asn1":1201,"buffer":1133,"dup":515,"inherits":1187}],1214:[function(require,module,exports){
arguments[4][517][0].apply(exports,arguments)
},{"./der":1212,"dup":517,"inherits":1187}],1219:[function(require,module,exports){
arguments[4][522][0].apply(exports,arguments)
},{"./default-encoding":1217,"./precondition":1218,"create-hash/md5":1139,"dup":522,"ripemd160":1249,"safe-buffer":1250,"sha.js":1252}],1216:[function(require,module,exports){
(function (process,global){
var checkParameters=require('./precondition');var defaultEncoding=require('./default-encoding');var sync=require('./sync');var Buffer=require('safe-buffer').Buffer;var ZERO_BUF;var subtle=global.crypto&&global.crypto.subtle;var toBrowser={'sha':'SHA-1','sha-1':'SHA-1','sha1':'SHA-1','sha256':'SHA-256','sha-256':'SHA-256','sha384':'SHA-384','sha-384':'SHA-384','sha-512':'SHA-512','sha512':'SHA-512'};var checks=[];function checkNative(algo){if(global.process&&!global.process.browser){return Promise.resolve(false);}if(!subtle||!subtle.importKey||!subtle.deriveBits){return Promise.resolve(false);}if(checks[algo]!==undefined){return checks[algo];}ZERO_BUF=ZERO_BUF||Buffer.alloc(8);var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return true;})["catch"](function(){return false;});checks[algo]=prom;return prom;}function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey('raw',password,{name:'PBKDF2'},false,['deriveBits']).then(function(key){return subtle.deriveBits({name:'PBKDF2',salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3);}).then(function(res){return Buffer.from(res);});}function resolvePromise(promise,callback){promise.then(function(out){process.nextTick(function(){callback(null,out);});},function(e){process.nextTick(function(){callback(e);});});}module.exports=function(password,salt,iterations,keylen,digest,callback){if(typeof digest==='function'){callback=digest;digest=undefined;}digest=digest||'sha1';var algo=toBrowser[digest.toLowerCase()];if(!algo||typeof global.Promise!=='function'){return process.nextTick(function(){var out;try{out=sync(password,salt,iterations,keylen,digest);}catch(e){return callback(e);}callback(null,out);});}checkParameters(password,salt,iterations,keylen);if(typeof callback!=='function')throw new Error('No callback provided to pbkdf2');if(!Buffer.isBuffer(password))password=Buffer.from(password,defaultEncoding);if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,defaultEncoding);resolvePromise(checkNative(algo).then(function(resp){if(resp)return browserPbkdf2(password,salt,iterations,keylen,algo);return sync(password,salt,iterations,keylen,digest);}),callback);};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./default-encoding":1217,"./precondition":1218,"./sync":1219,"_process":1221,"safe-buffer":1250}],1217:[function(require,module,exports){
(function (process){
var defaultEncoding;if(process.browser){defaultEncoding='utf-8';}else{var pVersionMajor=parseInt(process.version.split('.')[0].slice(1),10);defaultEncoding=pVersionMajor>=6?'utf-8':'binary';}module.exports=defaultEncoding;

}).call(this,require('_process'))

},{"_process":1221}],1218:[function(require,module,exports){
(function (Buffer){
var MAX_ALLOC=Math.pow(2,30)-1;function checkBuffer(buf,name){if(typeof buf!=='string'&&!Buffer.isBuffer(buf)){throw new TypeError(name+' must be a buffer or string');}}module.exports=function(password,salt,iterations,keylen){checkBuffer(password,'Password');checkBuffer(salt,'Salt');if(typeof iterations!=='number'){throw new TypeError('Iterations not a number');}if(iterations<0){throw new TypeError('Bad iterations');}if(typeof keylen!=='number'){throw new TypeError('Key length not a number');}if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen){throw new TypeError('Bad key length');}};

}).call(this,{"isBuffer":require("../../is-buffer/index.js")})

},{"../../is-buffer/index.js":1188}],1220:[function(require,module,exports){
(function (process){
'use strict';if(typeof process==='undefined'||!process.version||process.version.indexOf('v0.')===0||process.version.indexOf('v1.')===0&&process.version.indexOf('v1.8.')!==0){module.exports={nextTick:nextTick};}else{module.exports=process;}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=='function'){throw new TypeError('"callback" argument must be a function');}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1);});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2);});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3);});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i];}return process.nextTick(function afterTick(){fn.apply(null,args);});}}

}).call(this,require('_process'))

},{"_process":1221}],1224:[function(require,module,exports){
arguments[4][527][0].apply(exports,arguments)
},{"./mgf":1223,"./withPublic":1226,"./xor":1227,"bn.js":1102,"browserify-rsa":1125,"create-hash":1138,"dup":527,"parse-asn1":1200,"safe-buffer":1250}],1225:[function(require,module,exports){
arguments[4][528][0].apply(exports,arguments)
},{"./mgf":1223,"./withPublic":1226,"./xor":1227,"bn.js":1102,"browserify-rsa":1125,"create-hash":1138,"dup":528,"parse-asn1":1200,"randombytes":1232,"safe-buffer":1250}],1223:[function(require,module,exports){
arguments[4][526][0].apply(exports,arguments)
},{"create-hash":1138,"dup":526,"safe-buffer":1250}],1227:[function(require,module,exports){
arguments[4][530][0].apply(exports,arguments)
},{"dup":530}],1226:[function(require,module,exports){
arguments[4][529][0].apply(exports,arguments)
},{"bn.js":1102,"dup":529,"safe-buffer":1250}],1229:[function(require,module,exports){
'use strict';function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}module.exports=function(qs,sep,eq,options){sep=sep||'&';eq=eq||'=';var obj={};if(typeof qs!=='string'||qs.length===0){return obj;}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1000;if(options&&typeof options.maxKeys==='number'){maxKeys=options.maxKeys;}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys;}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,'%20'),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1);}else{kstr=x;vstr='';}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v;}else if(isArray(obj[k])){obj[k].push(v);}else{obj[k]=[obj[k],v];}}return obj;};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]';};

},{}],1230:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var stringifyPrimitive=function stringifyPrimitive(v){switch((0,_typeof2["default"])(v)){case'string':return v;case'boolean':return v?'true':'false';case'number':return isFinite(v)?v:'';default:return'';}};module.exports=function(obj,sep,eq,name){sep=sep||'&';eq=eq||'=';if(obj===null){obj=undefined;}if((0,_typeof2["default"])(obj)==='object'){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v));}).join(sep);}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]));}}).join(sep);}if(!name)return'';return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj));};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]';};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i));}return res;}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key);}return res;};

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],1231:[function(require,module,exports){
'use strict';/* common-shake removed: exports.decode = */ void 0, exports.parse=require('./decode');/* common-shake removed: exports.encode = */ void 0, exports.stringify=require('./encode');

},{"./decode":1229,"./encode":1230}],1234:[function(require,module,exports){
module.exports=require('./lib/_stream_duplex.js');

},{"./lib/_stream_duplex.js":1235}],1235:[function(require,module,exports){
'use strict';var pna=require('process-nextick-args');var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=require('core-util-is');util.inherits=require('inherits');var Readable=require('./_stream_readable');var Writable=require('./_stream_writable');util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function get(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function set(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};

},{"./_stream_readable":1237,"./_stream_writable":1239,"core-util-is":1136,"inherits":1187,"process-nextick-args":1220}],1239:[function(require,module,exports){
(function (process,global,setImmediate){
'use strict';var pna=require('process-nextick-args');module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=require('core-util-is');util.inherits=require('inherits');var internalUtil={deprecate:require('util-deprecate')};var Stream=require('./internal/streams/stream');var Buffer=require('safe-buffer').Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=require('./internal/streams/destroy');util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||require('./_stream_duplex');options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function realHasInstance(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||require('./_stream_duplex');if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options["final"]==='function')this._final=options["final"];}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function get(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}Object.defineProperty(Writable.prototype,'destroyed',{get:function get(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function set(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("timers").setImmediate)

},{"./_stream_duplex":1235,"./internal/streams/destroy":1241,"./internal/streams/stream":1242,"_process":1221,"core-util-is":1136,"inherits":1187,"process-nextick-args":1220,"safe-buffer":1243,"timers":1280,"util-deprecate":1283}],1237:[function(require,module,exports){
(function (process,global){
'use strict';var pna=require('process-nextick-args');module.exports=Readable;var isArray=require('isarray');var Duplex;Readable.ReadableState=ReadableState;var EE=require('events').EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length;};var Stream=require('./internal/streams/stream');var Buffer=require('safe-buffer').Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var util=require('core-util-is');util.inherits=require('inherits');var debugUtil=require('util');var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function debug(){};}var BufferList=require('./internal/streams/BufferList');var destroyImpl=require('./internal/streams/destroy');var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream){Duplex=Duplex||require('./_stream_duplex');options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require('string_decoder/').StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||require('./_stream_duplex');if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{get:function get(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function set(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}return needMoreData(state);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require('string_decoder/').StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;emitReadable(stream);}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function get(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}return ret;}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}return ret;}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}break;}++c;}list.length-=c;return ret;}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}break;}++c;}list.length-=c;return ret;}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./_stream_duplex":1235,"./internal/streams/BufferList":1240,"./internal/streams/destroy":1241,"./internal/streams/stream":1242,"_process":1221,"core-util-is":1136,"events":1169,"inherits":1187,"isarray":1189,"process-nextick-args":1220,"safe-buffer":1243,"string_decoder/":1244,"util":1104}],1236:[function(require,module,exports){
'use strict';module.exports=PassThrough;var Transform=require('./_stream_transform');var util=require('core-util-is');util.inherits=require('inherits');util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};

},{"./_stream_transform":1238,"core-util-is":1136,"inherits":1187}],1238:[function(require,module,exports){
'use strict';module.exports=Transform;var Duplex=require('./_stream_duplex');var util=require('core-util-is');util.inherits=require('inherits');util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}

},{"./_stream_duplex":1235,"core-util-is":1136,"inherits":1187}],1242:[function(require,module,exports){
module.exports=require('events').EventEmitter;

},{"events":1169}],1243:[function(require,module,exports){
var buffer=require('buffer');var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key];}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer;}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer;}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length);}copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==='number'){throw new TypeError('Argument must not be a number');}return Buffer(arg,encodingOrOffset,length);};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==='string'){buf.fill(fill,encoding);}else{buf.fill(fill);}}else{buf.fill(0);}return buf;};SafeBuffer.allocUnsafe=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}return Buffer(size);};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}return buffer.SlowBuffer(size);};

},{"buffer":1133}],1240:[function(require,module,exports){
'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Buffer=require('safe-buffer').Buffer;var util=require('util');function copyBuffer(src,target,offset){src.copy(target,offset);}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}

},{"safe-buffer":1243,"util":1104}],1241:[function(require,module,exports){
'use strict';var pna=require('process-nextick-args');function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};

},{"process-nextick-args":1220}],1244:[function(require,module,exports){
'use strict';var Buffer=require('safe-buffer').Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=''+encoding;switch(encoding&&encoding.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return true;default:return false;}};function _normalizeEncoding(enc){if(!enc)return'utf8';var retried;while(true){switch(enc){case'utf8':case'utf-8':return'utf8';case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return'utf16le';case'latin1':case'binary':return'latin1';case'base64':case'ascii':case'hex':return enc;default:if(retried)return;enc=(''+enc).toLowerCase();retried=true;}}};function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=='string'&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error('Unknown encoding: '+enc);return nenc||enc;}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case'utf16le':this.text=utf16Text;this.end=utf16End;nb=4;break;case'utf8':this.fillLast=utf8FillLast;nb=4;break;case'base64':this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return;}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb);}StringDecoder.prototype.write=function(buf){if(buf.length===0)return'';var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return'';i=this.lastNeed;this.lastNeed=0;}else{i=0;}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||'';};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length;};function utf8CheckByte(_byte){if(_byte<=0x7F)return 0;else if(_byte>>5===0x06)return 2;else if(_byte>>4===0x0E)return 3;else if(_byte>>3===0x1E)return 4;return _byte>>6===0x02?-1:-2;}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb;}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb;}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3;}return nb;}return 0;}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&0xC0)!==0x80){self.lastNeed=0;return"\uFFFD";}if(self.lastNeed>1&&buf.length>1){if((buf[1]&0xC0)!==0x80){self.lastNeed=1;return"\uFFFD";}if(self.lastNeed>2&&buf.length>2){if((buf[2]&0xC0)!==0x80){self.lastNeed=2;return"\uFFFD";}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length;}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString('utf8',i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString('utf8',i,end);}function utf8End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed)return r+"\uFFFD";return r;}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString('utf16le',i);if(r){var c=r.charCodeAt(r.length-1);if(c>=0xD800&&c<=0xDBFF){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1);}}return r;}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString('utf16le',i,buf.length-1);}function utf16End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString('utf16le',0,end);}return r;}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString('base64',i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1];}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];}return buf.toString('base64',i,buf.length-n);}function base64End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed)return r+this.lastChar.toString('base64',0,3-this.lastNeed);return r;}function simpleWrite(buf){return buf.toString(this.encoding);}function simpleEnd(buf){return buf&&buf.length?this.write(buf):'';}

},{"safe-buffer":1243}],1283:[function(require,module,exports){
(function (global){
module.exports=deprecate;function deprecate(fn,msg){if(config('noDeprecation')){return fn;}var warned=false;function deprecated(){if(!warned){if(config('throwDeprecation')){throw new Error(msg);}else if(config('traceDeprecation')){console.trace(msg);}else{console.warn(msg);}warned=true;}return fn.apply(this,arguments);}return deprecated;}function config(name){try{if(!global.localStorage)return false;}catch(_){return false;}var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==='true';}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],1245:[function(require,module,exports){
module.exports=require('./readable').PassThrough;

},{"./readable":1246}],1246:[function(require,module,exports){
exports=module.exports=require('./lib/_stream_readable.js');exports.Stream=exports;exports.Readable=exports;exports.Writable=require('./lib/_stream_writable.js');exports.Duplex=require('./lib/_stream_duplex.js');exports.Transform=require('./lib/_stream_transform.js');exports.PassThrough=require('./lib/_stream_passthrough.js');

},{"./lib/_stream_duplex.js":1235,"./lib/_stream_passthrough.js":1236,"./lib/_stream_readable.js":1237,"./lib/_stream_transform.js":1238,"./lib/_stream_writable.js":1239}],1247:[function(require,module,exports){
module.exports=require('./readable').Transform;

},{"./readable":1246}],1248:[function(require,module,exports){
module.exports=require('./lib/_stream_writable.js');

},{"./lib/_stream_writable.js":1239}],1251:[function(require,module,exports){
arguments[4][651][0].apply(exports,arguments)
},{"dup":651,"safe-buffer":1250}],1254:[function(require,module,exports){
arguments[4][654][0].apply(exports,arguments)
},{"./hash":1251,"dup":654,"inherits":1187,"safe-buffer":1250}],1255:[function(require,module,exports){
arguments[4][655][0].apply(exports,arguments)
},{"./hash":1251,"./sha256":1256,"dup":655,"inherits":1187,"safe-buffer":1250}],1256:[function(require,module,exports){
arguments[4][656][0].apply(exports,arguments)
},{"./hash":1251,"dup":656,"inherits":1187,"safe-buffer":1250}],1258:[function(require,module,exports){
arguments[4][658][0].apply(exports,arguments)
},{"./hash":1251,"dup":658,"inherits":1187,"safe-buffer":1250}],1257:[function(require,module,exports){
arguments[4][657][0].apply(exports,arguments)
},{"./hash":1251,"./sha512":1258,"dup":657,"inherits":1187,"safe-buffer":1250}],1253:[function(require,module,exports){
arguments[4][653][0].apply(exports,arguments)
},{"./hash":1251,"dup":653,"inherits":1187,"safe-buffer":1250}],1288:[function(require,module,exports){
module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}

},{}],1263:[function(require,module,exports){
(function (process,global,Buffer){
var capability=require('./capability');var inherits=require('inherits');var stream=require('readable-stream');var rStates=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var IncomingMessage=exports.IncomingMessage=function(xhr,response,mode,fetchTimer){var self=this;stream.Readable.call(self);self._mode=mode;self.headers={};self.rawHeaders=[];self.trailers={};self.rawTrailers=[];self.on('end',function(){process.nextTick(function(){self.emit('close');});});if(mode==='fetch'){var read=function read(){reader.read().then(function(result){if(self._destroyed)return;if(result.done){global.clearTimeout(fetchTimer);self.push(null);return;}self.push(Buffer.from(result.value));read();})["catch"](function(err){global.clearTimeout(fetchTimer);if(!self._destroyed)self.emit('error',err);});};self._fetchResponse=response;self.url=response.url;self.statusCode=response.status;self.statusMessage=response.statusText;response.headers.forEach(function(header,key){self.headers[key.toLowerCase()]=header;self.rawHeaders.push(key,header);});if(capability.writableStream){var writable=new WritableStream({write:function write(chunk){return new Promise(function(resolve,reject){if(self._destroyed){reject();}else if(self.push(Buffer.from(chunk))){resolve();}else{self._resumeFetch=resolve;}});},close:function close(){global.clearTimeout(fetchTimer);if(!self._destroyed)self.push(null);},abort:function abort(err){if(!self._destroyed)self.emit('error',err);}});try{response.body.pipeTo(writable)["catch"](function(err){global.clearTimeout(fetchTimer);if(!self._destroyed)self.emit('error',err);});return;}catch(e){}}var reader=response.body.getReader();read();}else{self._xhr=xhr;self._pos=0;self.url=xhr.responseURL;self.statusCode=xhr.status;self.statusMessage=xhr.statusText;var headers=xhr.getAllResponseHeaders().split(/\r?\n/);headers.forEach(function(header){var matches=header.match(/^([^:]+):\s*(.*)/);if(matches){var key=matches[1].toLowerCase();if(key==='set-cookie'){if(self.headers[key]===undefined){self.headers[key]=[];}self.headers[key].push(matches[2]);}else if(self.headers[key]!==undefined){self.headers[key]+=', '+matches[2];}else{self.headers[key]=matches[2];}self.rawHeaders.push(matches[1],matches[2]);}});self._charset='x-user-defined';if(!capability.overrideMimeType){var mimeType=self.rawHeaders['mime-type'];if(mimeType){var charsetMatch=mimeType.match(/;\s*charset=([^;])(;|$)/);if(charsetMatch){self._charset=charsetMatch[1].toLowerCase();}}if(!self._charset)self._charset='utf-8';}}};inherits(IncomingMessage,stream.Readable);IncomingMessage.prototype._read=function(){var self=this;var resolve=self._resumeFetch;if(resolve){self._resumeFetch=null;resolve();}};IncomingMessage.prototype._onXHRProgress=function(){var self=this;var xhr=self._xhr;var response=null;switch(self._mode){case'text':response=xhr.responseText;if(response.length>self._pos){var newData=response.substr(self._pos);if(self._charset==='x-user-defined'){var buffer=Buffer.alloc(newData.length);for(var i=0;i<newData.length;i++){buffer[i]=newData.charCodeAt(i)&0xff;}self.push(buffer);}else{self.push(newData,self._charset);}self._pos=response.length;}break;case'arraybuffer':if(xhr.readyState!==rStates.DONE||!xhr.response)break;response=xhr.response;self.push(Buffer.from(new Uint8Array(response)));break;case'moz-chunked-arraybuffer':response=xhr.response;if(xhr.readyState!==rStates.LOADING||!response)break;self.push(Buffer.from(new Uint8Array(response)));break;case'ms-stream':response=xhr.response;if(xhr.readyState!==rStates.LOADING)break;var reader=new global.MSStreamReader();reader.onprogress=function(){if(reader.result.byteLength>self._pos){self.push(Buffer.from(new Uint8Array(reader.result.slice(self._pos))));self._pos=reader.result.byteLength;}};reader.onload=function(){self.push(null);};reader.readAsArrayBuffer(response);break;}if(self._xhr.readyState===rStates.DONE&&self._mode!=='ms-stream'){self.push(null);}};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"./capability":1261,"_process":1221,"buffer":1133,"inherits":1187,"readable-stream":1278}],1262:[function(require,module,exports){
(function (process,global,Buffer){
var capability=require('./capability');var inherits=require('inherits');var response=require('./response');var stream=require('readable-stream');var IncomingMessage=response.IncomingMessage;var rStates=response.readyStates;function decideMode(preferBinary,useFetch){if(capability.fetch&&useFetch){return'fetch';}else if(capability.mozchunkedarraybuffer){return'moz-chunked-arraybuffer';}else if(capability.msstream){return'ms-stream';}else if(capability.arraybuffer&&preferBinary){return'arraybuffer';}else{return'text';}}var ClientRequest=module.exports=function(opts){var self=this;stream.Writable.call(self);self._opts=opts;self._body=[];self._headers={};if(opts.auth)self.setHeader('Authorization','Basic '+Buffer.from(opts.auth).toString('base64'));Object.keys(opts.headers).forEach(function(name){self.setHeader(name,opts.headers[name]);});var preferBinary;var useFetch=true;if(opts.mode==='disable-fetch'||'requestTimeout'in opts&&!capability.abortController){useFetch=false;preferBinary=true;}else if(opts.mode==='prefer-streaming'){preferBinary=false;}else if(opts.mode==='allow-wrong-content-type'){preferBinary=!capability.overrideMimeType;}else if(!opts.mode||opts.mode==='default'||opts.mode==='prefer-fast'){preferBinary=true;}else{throw new Error('Invalid value for opts.mode');}self._mode=decideMode(preferBinary,useFetch);self._fetchTimer=null;self.on('finish',function(){self._onFinish();});};inherits(ClientRequest,stream.Writable);ClientRequest.prototype.setHeader=function(name,value){var self=this;var lowerName=name.toLowerCase();if(unsafeHeaders.indexOf(lowerName)!==-1)return;self._headers[lowerName]={name:name,value:value};};ClientRequest.prototype.getHeader=function(name){var header=this._headers[name.toLowerCase()];if(header)return header.value;return null;};ClientRequest.prototype.removeHeader=function(name){var self=this;delete self._headers[name.toLowerCase()];};ClientRequest.prototype._onFinish=function(){var self=this;if(self._destroyed)return;var opts=self._opts;var headersObj=self._headers;var body=null;if(opts.method!=='GET'&&opts.method!=='HEAD'){body=new Blob(self._body,{type:(headersObj['content-type']||{}).value||''});}var headersList=[];Object.keys(headersObj).forEach(function(keyName){var name=headersObj[keyName].name;var value=headersObj[keyName].value;if(Array.isArray(value)){value.forEach(function(v){headersList.push([name,v]);});}else{headersList.push([name,value]);}});if(self._mode==='fetch'){var signal=null;var fetchTimer=null;if(capability.abortController){var controller=new AbortController();signal=controller.signal;self._fetchAbortController=controller;if('requestTimeout'in opts&&opts.requestTimeout!==0){self._fetchTimer=global.setTimeout(function(){self.emit('requestTimeout');if(self._fetchAbortController)self._fetchAbortController.abort();},opts.requestTimeout);}}global.fetch(self._opts.url,{method:self._opts.method,headers:headersList,body:body||undefined,mode:'cors',credentials:opts.withCredentials?'include':'same-origin',signal:signal}).then(function(response){self._fetchResponse=response;self._connect();},function(reason){global.clearTimeout(self._fetchTimer);if(!self._destroyed)self.emit('error',reason);});}else{var xhr=self._xhr=new global.XMLHttpRequest();try{xhr.open(self._opts.method,self._opts.url,true);}catch(err){process.nextTick(function(){self.emit('error',err);});return;}if('responseType'in xhr)xhr.responseType=self._mode;if('withCredentials'in xhr)xhr.withCredentials=!!opts.withCredentials;if(self._mode==='text'&&'overrideMimeType'in xhr)xhr.overrideMimeType('text/plain; charset=x-user-defined');if('requestTimeout'in opts){xhr.timeout=opts.requestTimeout;xhr.ontimeout=function(){self.emit('requestTimeout');};}headersList.forEach(function(header){xhr.setRequestHeader(header[0],header[1]);});self._response=null;xhr.onreadystatechange=function(){switch(xhr.readyState){case rStates.LOADING:case rStates.DONE:self._onXHRProgress();break;}};if(self._mode==='moz-chunked-arraybuffer'){xhr.onprogress=function(){self._onXHRProgress();};}xhr.onerror=function(){if(self._destroyed)return;self.emit('error',new Error('XHR error'));};try{xhr.send(body);}catch(err){process.nextTick(function(){self.emit('error',err);});return;}}};function statusValid(xhr){try{var status=xhr.status;return status!==null&&status!==0;}catch(e){return false;}}ClientRequest.prototype._onXHRProgress=function(){var self=this;if(!statusValid(self._xhr)||self._destroyed)return;if(!self._response)self._connect();self._response._onXHRProgress();};ClientRequest.prototype._connect=function(){var self=this;if(self._destroyed)return;self._response=new IncomingMessage(self._xhr,self._fetchResponse,self._mode,self._fetchTimer);self._response.on('error',function(err){self.emit('error',err);});self.emit('response',self._response);};ClientRequest.prototype._write=function(chunk,encoding,cb){var self=this;self._body.push(chunk);cb();};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var self=this;self._destroyed=true;global.clearTimeout(self._fetchTimer);if(self._response)self._response._destroyed=true;if(self._xhr)self._xhr.abort();else if(self._fetchAbortController)self._fetchAbortController.abort();};ClientRequest.prototype.end=function(data,encoding,cb){var self=this;if(typeof data==='function'){cb=data;data=undefined;}stream.Writable.prototype.end.call(self,data,encoding,cb);};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};var unsafeHeaders=['accept-charset','accept-encoding','access-control-request-headers','access-control-request-method','connection','content-length','cookie','cookie2','date','dnt','expect','host','keep-alive','origin','referer','te','trailer','transfer-encoding','upgrade','via'];

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"./capability":1261,"./response":1263,"_process":1221,"buffer":1133,"inherits":1187,"readable-stream":1278}],1261:[function(require,module,exports){
(function (global){
exports.fetch=isFunction(global.fetch)&&isFunction(global.ReadableStream);exports.writableStream=isFunction(global.WritableStream);exports.abortController=isFunction(global.AbortController);var xhr;function getXHR(){if(xhr!==undefined)return xhr;if(global.XMLHttpRequest){xhr=new global.XMLHttpRequest();try{xhr.open('GET',global.XDomainRequest?'/':'https://example.com');}catch(e){xhr=null;}}else{xhr=null;}return xhr;}function checkTypeSupport(type){var xhr=getXHR();if(!xhr)return false;try{xhr.responseType=type;return xhr.responseType===type;}catch(e){}return false;}exports.arraybuffer=exports.fetch||checkTypeSupport('arraybuffer');exports.msstream=!exports.fetch&&checkTypeSupport('ms-stream');exports.mozchunkedarraybuffer=!exports.fetch&&checkTypeSupport('moz-chunked-arraybuffer');exports.overrideMimeType=exports.fetch||(getXHR()?isFunction(getXHR().overrideMimeType):false);function isFunction(value){return typeof value==='function';}xhr=null;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],1278:[function(require,module,exports){
exports=module.exports=require('./lib/_stream_readable.js');exports.Stream=exports;exports.Readable=exports;exports.Writable=require('./lib/_stream_writable.js');exports.Duplex=require('./lib/_stream_duplex.js');exports.Transform=require('./lib/_stream_transform.js');exports.PassThrough=require('./lib/_stream_passthrough.js');exports.finished=require('./lib/internal/streams/end-of-stream.js');exports.pipeline=require('./lib/internal/streams/pipeline.js');

},{"./lib/_stream_duplex.js":1266,"./lib/_stream_passthrough.js":1267,"./lib/_stream_readable.js":1268,"./lib/_stream_transform.js":1269,"./lib/_stream_writable.js":1270,"./lib/internal/streams/end-of-stream.js":1274,"./lib/internal/streams/pipeline.js":1275}],1264:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}var codes={};function createErrorType(code,message,Base){if(!Base){Base=Error;}function getMessage(arg1,arg2,arg3){if(typeof message==='string'){return message;}else{return message(arg1,arg2,arg3);}}var NodeError=function(_Base){_inheritsLoose(NodeError,_Base);function NodeError(arg1,arg2,arg3){return _Base.call(this,getMessage(arg1,arg2,arg3))||this;}return NodeError;}(Base);NodeError.prototype.name=Base.name;NodeError.prototype.code=code;codes[code]=NodeError;}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;expected=expected.map(function(i){return String(i);});if(len>2){return"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(', '),", or ")+expected[len-1];}else if(len===2){return"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]);}else{return"of ".concat(thing," ").concat(expected[0]);}}else{return"of ".concat(thing," ").concat(String(expected));}}function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search;}function endsWith(str,search,this_len){if(this_len===undefined||this_len>str.length){this_len=str.length;}return str.substring(this_len-search.length,this_len)===search;}function includes(str,search,start){if(typeof start!=='number'){start=0;}if(start+search.length>str.length){return false;}else{return str.indexOf(search,start)!==-1;}}createErrorType('ERR_INVALID_OPT_VALUE',function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"';},TypeError);createErrorType('ERR_INVALID_ARG_TYPE',function(name,expected,actual){var determiner;if(typeof expected==='string'&&startsWith(expected,'not ')){determiner='must not be';expected=expected.replace(/^not /,'');}else{determiner='must be';}var msg;if(endsWith(name,' argument')){msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,'type'));}else{var type=includes(name,'.')?'property':'argument';msg="The \"".concat(name,"\" ").concat(type," ").concat(determiner," ").concat(oneOf(expected,'type'));}msg+=". Received type ".concat((0,_typeof2["default"])(actual));return msg;},TypeError);createErrorType('ERR_STREAM_PUSH_AFTER_EOF','stream.push() after EOF');createErrorType('ERR_METHOD_NOT_IMPLEMENTED',function(name){return'The '+name+' method is not implemented';});createErrorType('ERR_STREAM_PREMATURE_CLOSE','Premature close');createErrorType('ERR_STREAM_DESTROYED',function(name){return'Cannot call '+name+' after a stream was destroyed';});createErrorType('ERR_MULTIPLE_CALLBACK','Callback called multiple times');createErrorType('ERR_STREAM_CANNOT_PIPE','Cannot pipe, not readable');createErrorType('ERR_STREAM_WRITE_AFTER_END','write after end');createErrorType('ERR_STREAM_NULL_VALUES','May not write null values to stream',TypeError);createErrorType('ERR_UNKNOWN_ENCODING',function(arg){return'Unknown encoding: '+arg;},TypeError);createErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT','stream.unshift() after end event');module.exports.codes=codes;

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],1265:[function(require,module,exports){
(function (process){
'use strict';var experimentalWarnings=new Set();function emitExperimentalWarning(feature){if(experimentalWarnings.has(feature))return;var msg=feature+' is an experimental feature. This feature could '+'change at any time';experimentalWarnings.add(feature);process.emitWarning(msg,'ExperimentalWarning');}function noop(){}module.exports.emitExperimentalWarning=process.emitWarning?emitExperimentalWarning:noop;

}).call(this,require('_process'))

},{"_process":1221}],1266:[function(require,module,exports){
(function (process){
'use strict';var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var Readable=require('./_stream_readable');var Writable=require('./_stream_writable');require('inherits')(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);this.allowHalfOpen=true;if(options){if(options.readable===false)this.readable=false;if(options.writable===false)this.writable=false;if(options.allowHalfOpen===false){this.allowHalfOpen=false;this.once('end',onend);}}}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function get(){return this._writableState.highWaterMark;}});Object.defineProperty(Duplex.prototype,'writableBuffer',{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer();}});Object.defineProperty(Duplex.prototype,'writableLength',{enumerable:false,get:function get(){return this._writableState.length;}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function set(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});

}).call(this,require('_process'))

},{"./_stream_readable":1268,"./_stream_writable":1270,"_process":1221,"inherits":1187}],1270:[function(require,module,exports){
(function (process,global){
'use strict';module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require('util-deprecate')};var Stream=require('./internal/streams/stream');var Buffer=require('buffer').Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=require('./internal/streams/destroy');var _require=require('./internal/streams/state'),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require('../errors').codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING;require('inherits')(Writable,Stream);function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require('./_stream_duplex');options=options||{};if(typeof isDuplex!=='boolean')isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;this.highWaterMark=getHighWaterMark(this,options,'writableHighWaterMark',isDuplex);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=options.emitClose!==false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function writableStateBufferGetter(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function realHasInstance(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||require('./_stream_duplex');var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options["final"]==='function')this._final=options["final"];}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new ERR_STREAM_CANNOT_PIPE());};function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END();stream.emit('error',er);process.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var er;if(chunk===null){er=new ERR_STREAM_NULL_VALUES();}else if(typeof chunk!=='string'&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE('chunk',['string','Buffer'],chunk);}if(er){stream.emit('error',er);process.nextTick(cb,er);return false;}return true;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ending)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){this._writableState.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);this._writableState.defaultEncoding=encoding;return this;};Object.defineProperty(Writable.prototype,'writableBuffer',{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer();}});function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function get(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(state.destroyed)state.onwrite(new ERR_STREAM_DESTROYED('write'));else if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){process.nextTick(cb,er);process.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(typeof cb!=='function')throw new ERR_MULTIPLE_CALLBACK();onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){process.nextTick(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending)endWritable(this,state,cb);return this;};Object.defineProperty(Writable.prototype,'writableLength',{enumerable:false,get:function get(){return this._writableState.length;}});function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'&&!state.destroyed){state.pendingcb++;state.finalCalled=true;process.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}state.corkedRequestsFree.next=corkReq;}Object.defineProperty(Writable.prototype,'destroyed',{enumerable:false,get:function get(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function set(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){cb(err);};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../errors":1264,"./_stream_duplex":1266,"./internal/streams/destroy":1273,"./internal/streams/state":1276,"./internal/streams/stream":1277,"_process":1221,"buffer":1133,"inherits":1187,"util-deprecate":1283}],1268:[function(require,module,exports){
(function (process,global){
'use strict';module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=require('events').EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length;};var Stream=require('./internal/streams/stream');var Buffer=require('buffer').Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var debugUtil=require('util');var debug;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function debug(){};}var BufferList=require('./internal/streams/buffer_list');var destroyImpl=require('./internal/streams/destroy');var _require=require('./internal/streams/state'),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require('../errors').codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var _require2=require('../experimentalWarning'),emitExperimentalWarning=_require2.emitExperimentalWarning;var StringDecoder;var createReadableStreamAsyncIterator;require('inherits')(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(Array.isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream,isDuplex){Duplex=Duplex||require('./_stream_duplex');options=options||{};if(typeof isDuplex!=='boolean')isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;this.highWaterMark=getHighWaterMark(this,options,'readableHighWaterMark',isDuplex);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=options.emitClose!==false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require('string_decoder/').StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||require('./_stream_duplex');if(!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{enumerable:false,get:function get(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function set(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug('readableAddChunk',chunk);var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new ERR_STREAM_PUSH_AFTER_EOF());}else if(state.destroyed){return false;}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;maybeReadMore(stream,state);}}return!state.ended&&(state.length<state.highWaterMark||state.length===0);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){state.awaitDrain=0;stream.emit('data',chunk);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE('chunk',['string','Buffer','Uint8Array'],chunk);}return er;}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require('string_decoder/').StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=this._readableState.decoder.encoding;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&((state.highWaterMark!==0?state.length>=state.highWaterMark:state.length>0)||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;state.awaitDrain=0;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;if(state.sync){emitReadable(stream);}else{state.needReadable=false;if(!state.emittedReadable){state.emittedReadable=true;emitReadable_(stream);}}}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;process.nextTick(emitReadable_,stream);}}function emitReadable_(stream){var state=stream._readableState;debug('emitReadable_',state.destroyed,state.length,state.ended);if(!state.destroyed&&(state.length||state.ended)){stream.emit('readable');}state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark;flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){while(!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&state.length===0)){var len=state.length;debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new ERR_METHOD_NOT_IMPLEMENTED('_read()'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)process.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}src.on('data',ondata);function ondata(chunk){debug('ondata');var ret=dest.write(chunk);debug('dest.write',ret);if(ret===false){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',state.awaitDrain);state.awaitDrain++;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,{hasUnpiped:false});}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);var state=this._readableState;if(ev==='data'){state.readableListening=this.listenerCount('readable')>0;if(state.flowing!==false)this.resume();}else if(ev==='readable'){if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.flowing=false;state.emittedReadable=false;debug('on readable',state.length,state.reading);if(state.length){emitReadable(this);}else if(!state.reading){process.nextTick(nReadingNextTick,this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);if(ev==='readable'){process.nextTick(updateReadableListening,this);}return res;};Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);if(ev==='readable'||ev===undefined){process.nextTick(updateReadableListening,this);}return res;};function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount('readable')>0;if(state.resumeScheduled&&!state.paused){state.flowing=true;}else if(self.listenerCount('data')>0){self.resume();}}function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=!state.readableListening;resume(this,state);}state.paused=false;return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(resume_,stream,state);}}function resume_(stream,state){debug('resume',state.reading);if(!state.reading){stream.read(0);}state.resumeScheduled=false;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(this._readableState.flowing!==false){debug('pause');this._readableState.flowing=false;this.emit('pause');}this._readableState.paused=true;return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){;}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};if(typeof Symbol==='function'){Readable.prototype[Symbol.asyncIterator]=function(){emitExperimentalWarning('Readable[Symbol.asyncIterator]');if(createReadableStreamAsyncIterator===undefined){createReadableStreamAsyncIterator=require('./internal/streams/async_iterator');}return createReadableStreamAsyncIterator(this);};}Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function get(){return this._readableState.highWaterMark;}});Object.defineProperty(Readable.prototype,'readableBuffer',{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer;}});Object.defineProperty(Readable.prototype,'readableFlowing',{enumerable:false,get:function get(){return this._readableState.flowing;},set:function set(state){if(this._readableState){this._readableState.flowing=state;}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,'readableLength',{enumerable:false,get:function get(){return this._readableState.length;}});function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.first();else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=state.buffer.consume(n,state.decoder);}return ret;}function endReadable(stream){var state=stream._readableState;debug('endReadable',state.endEmitted);if(!state.endEmitted){state.ended=true;process.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){debug('endReadableNT',state.endEmitted,state.length);if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../errors":1264,"../experimentalWarning":1265,"./_stream_duplex":1266,"./internal/streams/async_iterator":1271,"./internal/streams/buffer_list":1272,"./internal/streams/destroy":1273,"./internal/streams/state":1276,"./internal/streams/stream":1277,"_process":1221,"buffer":1133,"events":1169,"inherits":1187,"string_decoder/":1279,"util":1104}],1267:[function(require,module,exports){
'use strict';module.exports=PassThrough;var Transform=require('./_stream_transform');require('inherits')(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};

},{"./_stream_transform":1269,"inherits":1187}],1269:[function(require,module,exports){
'use strict';module.exports=Transform;var _require$codes=require('../errors').codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0;var Duplex=require('./_stream_duplex');require('inherits')(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(cb===null){return this.emit('error',new ERR_MULTIPLE_CALLBACK());}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'&&!this._readableState.destroyed){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0();if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();return stream.push(null);}

},{"../errors":1264,"./_stream_duplex":1266,"inherits":1187}],1277:[function(require,module,exports){
arguments[4][1242][0].apply(exports,arguments)
},{"dup":1242,"events":1169}],1273:[function(require,module,exports){
(function (process){
'use strict';function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){process.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){process.nextTick(emitErrorAndCloseNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){process.nextTick(emitCloseNT,_this);cb(err);}else{process.nextTick(emitCloseNT,_this);}});return this;}function emitErrorAndCloseNT(self,err){emitErrorNT(self,err);emitCloseNT(self);}function emitCloseNT(self){if(self._writableState&&!self._writableState.emitClose)return;if(self._readableState&&!self._readableState.emitClose)return;self.emit('close');}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};

}).call(this,require('_process'))

},{"_process":1221}],1272:[function(require,module,exports){
'use strict';function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var _require=require('buffer'),Buffer=_require.Buffer;var _require2=require('util'),inspect=_require2.inspect;var custom=inspect&&inspect.custom||'inspect';function copyBuffer(src,target,offset){Buffer.prototype.copy.call(src,target,offset);}module.exports=function(){function BufferList(){this.head=null;this.tail=null;this.length=0;}var _proto=BufferList.prototype;_proto.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};_proto.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};_proto.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};_proto.clear=function clear(){this.head=this.tail=null;this.length=0;};_proto.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};_proto.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};_proto.consume=function consume(n,hasStrings){var ret;if(n<this.head.data.length){ret=this.head.data.slice(0,n);this.head.data=this.head.data.slice(n);}else if(n===this.head.data.length){ret=this.shift();}else{ret=hasStrings?this._getString(n):this._getBuffer(n);}return ret;};_proto.first=function first(){return this.head.data;};_proto._getString=function _getString(n){var p=this.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null;}else{this.head=p;p.data=str.slice(nb);}break;}++c;}this.length-=c;return ret;};_proto._getBuffer=function _getBuffer(n){var ret=Buffer.allocUnsafe(n);var p=this.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null;}else{this.head=p;p.data=buf.slice(nb);}break;}++c;}this.length-=c;return ret;};_proto[custom]=function(_,options){return inspect(this,_objectSpread({},options,{depth:0,customInspect:false}));};return BufferList;}();

},{"buffer":1133,"util":1104}],1276:[function(require,module,exports){
'use strict';var ERR_INVALID_OPT_VALUE=require('../../../errors').codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(options,isDuplex,duplexKey){return options.highWaterMark!=null?options.highWaterMark:isDuplex?options[duplexKey]:null;}function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(hwm!=null){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||hwm<0){var name=isDuplex?duplexKey:'highWaterMark';throw new ERR_INVALID_OPT_VALUE(name,hwm);}return Math.floor(hwm);}return state.objectMode?16:16*1024;}module.exports={getHighWaterMark:getHighWaterMark};

},{"../../../errors":1264}],1271:[function(require,module,exports){
(function (process){
'use strict';var _Object$setPrototypeO;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var finished=require('./end-of-stream');var kLastResolve=Symbol('lastResolve');var kLastReject=Symbol('lastReject');var kError=Symbol('error');var kEnded=Symbol('ended');var kLastPromise=Symbol('lastPromise');var kHandlePromise=Symbol('handlePromise');var kStream=Symbol('stream');function createIterResult(value,done){return{value:value,done:done};}function readAndResolve(iter){var resolve=iter[kLastResolve];if(resolve!==null){var data=iter[kStream].read();if(data!==null){iter[kLastPromise]=null;iter[kLastResolve]=null;iter[kLastReject]=null;resolve(createIterResult(data,false));}}}function onReadable(iter){process.nextTick(readAndResolve,iter);}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){if(iter[kEnded]){resolve(createIterResult(undefined,true));return;}iter[kHandlePromise](resolve,reject);},reject);};}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){});var ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream];},next:function next(){var _this=this;var error=this[kError];if(error!==null){return Promise.reject(error);}if(this[kEnded]){return Promise.resolve(createIterResult(undefined,true));}if(this[kStream].destroyed){return new Promise(function(resolve,reject){process.nextTick(function(){if(_this[kError]){reject(_this[kError]);}else{resolve(createIterResult(undefined,true));}});});}var lastPromise=this[kLastPromise];var promise;if(lastPromise){promise=new Promise(wrapForNext(lastPromise,this));}else{var data=this[kStream].read();if(data!==null){return Promise.resolve(createIterResult(data,false));}promise=new Promise(this[kHandlePromise]);}this[kLastPromise]=promise;return promise;}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this;}),_defineProperty(_Object$setPrototypeO,"return",function _return(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){if(err){reject(err);return;}resolve(createIterResult(undefined,true));});});}),_Object$setPrototypeO),AsyncIteratorPrototype);var createReadableStreamAsyncIterator=function createReadableStreamAsyncIterator(stream){var _Object$create;var iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:true}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:true}),_defineProperty(_Object$create,kLastReject,{value:null,writable:true}),_defineProperty(_Object$create,kError,{value:null,writable:true}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:true}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();if(data){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(data,false));}else{iterator[kLastResolve]=resolve;iterator[kLastReject]=reject;}},writable:true}),_Object$create));iterator[kLastPromise]=null;finished(stream,function(err){if(err&&err.code!=='ERR_STREAM_PREMATURE_CLOSE'){var reject=iterator[kLastReject];if(reject!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;reject(err);}iterator[kError]=err;return;}var resolve=iterator[kLastResolve];if(resolve!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(undefined,true));}iterator[kEnded]=true;});stream.on('readable',onReadable.bind(null,iterator));return iterator;};module.exports=createReadableStreamAsyncIterator;

}).call(this,require('_process'))

},{"./end-of-stream":1274,"_process":1221}],1274:[function(require,module,exports){
'use strict';var ERR_STREAM_PREMATURE_CLOSE=require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;function once(callback){var called=false;return function(){if(called)return;called=true;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}callback.apply(this,args);};}function noop(){}function isRequest(stream){return stream.setHeader&&typeof stream.abort==='function';}function eos(stream,opts,callback){if(typeof opts==='function')return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var onlegacyfinish=function onlegacyfinish(){if(!stream.writable)onfinish();};var writableEnded=stream._writableState&&stream._writableState.finished;var onfinish=function onfinish(){writable=false;writableEnded=true;if(!readable)callback.call(stream);};var readableEnded=stream._readableState&&stream._readableState.endEmitted;var onend=function onend(){readable=false;readableEnded=true;if(!writable)callback.call(stream);};var onerror=function onerror(err){callback.call(stream,err);};var onclose=function onclose(){var err;if(readable&&!readableEnded){if(!stream._readableState||!stream._readableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE();return callback.call(stream,err);}if(writable&&!writableEnded){if(!stream._writableState||!stream._writableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE();return callback.call(stream,err);}};var onrequest=function onrequest(){stream.req.on('finish',onfinish);};if(isRequest(stream)){stream.on('complete',onfinish);stream.on('abort',onclose);if(stream.req)onrequest();else stream.on('request',onrequest);}else if(writable&&!stream._writableState){stream.on('end',onlegacyfinish);stream.on('close',onlegacyfinish);}stream.on('end',onend);stream.on('finish',onfinish);if(opts.error!==false)stream.on('error',onerror);stream.on('close',onclose);return function(){stream.removeListener('complete',onfinish);stream.removeListener('abort',onclose);stream.removeListener('request',onrequest);if(stream.req)stream.req.removeListener('finish',onfinish);stream.removeListener('end',onlegacyfinish);stream.removeListener('close',onlegacyfinish);stream.removeListener('finish',onfinish);stream.removeListener('end',onend);stream.removeListener('error',onerror);stream.removeListener('close',onclose);};}module.exports=eos;

},{"../../../errors":1264}],1275:[function(require,module,exports){
'use strict';var eos;function once(callback){var called=false;return function(){if(called)return;called=true;callback.apply(void 0,arguments);};}var _require$codes=require('../../../errors').codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err;}function isRequest(stream){return stream.setHeader&&typeof stream.abort==='function';}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on('close',function(){closed=true;});if(eos===undefined)eos=require('./end-of-stream');eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback();});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;if(isRequest(stream))return stream.abort();if(typeof stream.destroy==='function')return stream.destroy();callback(err||new ERR_STREAM_DESTROYED('pipe'));};}function call(fn){fn();}function pipe(from,to){return from.pipe(to);}function popCallback(streams){if(!streams.length)return noop;if(typeof streams[streams.length-1]!=='function')return noop;return streams.pop();}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++){streams[_key]=arguments[_key];}var callback=popCallback(streams);if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2){throw new ERR_MISSING_ARGS('streams');}var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error);});});return streams.reduce(pipe);}module.exports=pipeline;

},{"../../../errors":1264,"./end-of-stream":1274}],1282:[function(require,module,exports){
'use strict';var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports={isString:function isString(arg){return typeof arg==='string';},isObject:function isObject(arg){return(0,_typeof2["default"])(arg)==='object'&&arg!==null;},isNull:function isNull(arg){return arg===null;},isNullOrUndefined:function isNullOrUndefined(arg){return arg==null;}};

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}],1284:[function(require,module,exports){
arguments[4][131][0].apply(exports,arguments)
},{"dup":131}],1285:[function(require,module,exports){
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));module.exports=function isBuffer(arg){return arg&&(0,_typeof2["default"])(arg)==='object'&&typeof arg.copy==='function'&&typeof arg.fill==='function'&&typeof arg.readUInt8==='function';};

},{"@babel/runtime/helpers/interopRequireDefault":1098,"@babel/runtime/helpers/typeof":1099}]},{},[1097])(1097)
});

//# sourceMappingURL=http://localhost:3000/external/bcc/bcc.js.map
